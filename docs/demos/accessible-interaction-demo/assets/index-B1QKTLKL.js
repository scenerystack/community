(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();(function(){self.assertions=self.assertions||{},self.assertions.assertionHooks=[],self.assertions.assertFunction=self.assertions.assertFunction||function(n,...e){if(!n){e=e.filter(o=>!!e),self.navigator&&self.navigator.appName==="Microsoft Internet Explorer"&&e.push(`stack=
${new Error().stack}`);const t=e.length>0?"Assertion failed: ":"Assertion failed";if(console&&console.error&&console.error(t,...e),self.assertions.assertionHooks.forEach(o=>o()),self.QueryStringMachine&&QueryStringMachine.containsKey("debugger"))debugger;const i=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");i&&(i.writable||i.set&&typeof i.set=="function")&&(Error.stackTraceLimit=20);const r=new Error(t+e.join(`
 `));if(QueryStringMachine.containsKey("eacontinue"))console.log(r.stack);else throw r}},self.assert=self.assert||null,self.assertSlow=self.assertSlow||null,self.assertions.enableAssert=function(){self.assert=self.assertions.assertFunction,self.console&&self.console.log&&self.console.log("enabling assert")},self.assertions.disableAssert=function(){self.assert=null,self.console&&self.console.log&&self.console.log("disabling assert")},self.assertions.enableAssertSlow=function(){self.assertSlow=self.assertions.assertFunction,self.console&&self.console.log&&self.console.log("enabling assertSlow")},self.assertions.disableAssertSlow=function(){self.assertSlow=null,self.console&&self.console.log&&self.console.log("disabling assertSlow")}})();const pT=globalThis.hasOwnProperty("window"),gT=!pT;function Cr(){return gT||!!globalThis.assert}function Kt(n,...e){if(Cr()&&!n){const t=e.length>0?"Affirmation failed: ":"Affirmation failed";console.error(t,...e),mT.forEach(r=>r());const i=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");throw i&&(i.writable||i.set&&typeof i.set=="function")&&(Error.stackTraceLimit=20),new Error(t+e.join(`
 `))}}const mT=[],nA="Options";function jn(n,...e){Cr()&&rA(n),Kt(n!==null,"target should not be null"),Kt(e.length>0,"at least one source expected");for(let t=0;t<e.length;t++){const i=e[t];if(i){Cr()&&rA(i);for(const s in i)if(i.hasOwnProperty(s)&&i[s]!==void 0){const r=i[s];s.endsWith(nA)&&s!==nA?(Kt(r!==void 0,"nested *Options should not be undefined"),n[s]=jn(n[s]||{},r)):n[s]=r}}}return n}function rA(n){Kt(n===null||n&&typeof n=="object"&&Object.getPrototypeOf(n)===Object.prototype,"object is not compatible with merge"),n!==null&&Object.keys(n).forEach(e=>{const t=Object.getOwnPropertyDescriptor(n,e);Kt(!t.hasOwnProperty("set"),"cannot use merge with an object that has a setter"),Kt(!t.hasOwnProperty("get"),"cannot use merge with an object that has a getter")})}const f0=(n,e,t,i)=>jn(n,e,t,i);function St(){return f0}function Vl(){return f0}function Qi(n,...e){return f0(n,...e)}var pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function yT(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var rf={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */rf.exports;(function(n,e){(function(){var t,i="4.17.21",s=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",d="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",y=500,S="__lodash_placeholder__",T=1,L=2,x=4,A=1,Q=2,z=1,G=2,re=4,ne=8,ae=16,pe=32,N=64,Ie=128,$e=256,Ee=512,Je=30,Ge="...",_t=800,it=16,nt=1,Ct=2,Qe=3,Zt=1/0,At=9007199254740991,Re=17976931348623157e292,at=NaN,Et=4294967295,Nt=Et-1,Ht=Et>>>1,cs=[["ary",Ie],["bind",z],["bindKey",G],["curry",ne],["curryRight",ae],["flip",Ee],["partial",pe],["partialRight",N],["rearg",$e]],hi="[object Arguments]",zs="[object Array]",Ji="[object AsyncFunction]",bs="[object Boolean]",ai="[object Date]",Ei="[object DOMException]",Pt="[object Error]",Hn="[object Function]",Zs="[object GeneratorFunction]",ns="[object Map]",on="[object Number]",P="[object Null]",fe="[object Object]",ye="[object Promise]",we="[object Proxy]",De="[object RegExp]",yt="[object Set]",tt="[object String]",lt="[object Symbol]",Kn="[object Undefined]",Jt="[object WeakMap]",a="[object WeakSet]",h="[object ArrayBuffer]",f="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",I="[object Int16Array]",D="[object Int32Array]",k="[object Uint8Array]",B="[object Uint8ClampedArray]",H="[object Uint16Array]",U="[object Uint32Array]",F=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Z=/[&<>"']/g,K=RegExp(X.source),W=RegExp(Z.source),O=/<%-([\s\S]+?)%>/g,j=/<%([\s\S]+?)%>/g,te=/<%=([\s\S]+?)%>/g,se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,de=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,me=/[\\^$.*+?()[\]{}|]/g,be=RegExp(me.source),Se=/^\s+/,ge=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ce=/\{\n\/\* \[wrapped with (.+)\] \*/,Be=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,We=/[()=,{}\[\]\/\s]/,dt=/\\(\\)?/g,wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dt=/\w*$/,Mt=/^[-+]0x[0-9a-f]+$/i,et=/^0b[01]+$/i,st=/^\[object .+?Constructor\]$/,It=/^0o[0-7]+$/i,qt=/^(?:0|[1-9]\d*)$/,Ot=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt=/($^)/,$t=/['\n\r\u2028\u2029\\]/g,si="\\ud800-\\udfff",gi="\\u0300-\\u036f",oi="\\ufe20-\\ufe2f",Hs="\\u20d0-\\u20ff",xs=gi+oi+Hs,Gs="\\u2700-\\u27bf",xt="a-z\\xdf-\\xf6\\xf8-\\xff",Ui="\\xac\\xb1\\xd7\\xf7",rs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nn="\\u2000-\\u206f",Js=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Bn="A-Z\\xc0-\\xd6\\xd8-\\xde",yr="\\ufe0e\\ufe0f",Un=Ui+rs+Nn+Js,bn="['’]",Dn="["+si+"]",ln="["+Un+"]",Cs="["+xs+"]",Ps="\\d+",Ua="["+Gs+"]",Va="["+xt+"]",ko="[^"+si+Un+Ps+Gs+xt+Bn+"]",io="\\ud83c[\\udffb-\\udfff]",nl="(?:"+Cs+"|"+io+")",Lo="[^"+si+"]",_r="(?:\\ud83c[\\udde6-\\uddff]){2}",wa="[\\ud800-\\udbff][\\udc00-\\udfff]",Ar="["+Bn+"]",Kr="\\u200d",br="(?:"+Va+"|"+ko+")",di="(?:"+Ar+"|"+ko+")",ar="(?:"+bn+"(?:d|ll|m|re|s|t|ve))?",hn="(?:"+bn+"(?:D|LL|M|RE|S|T|VE))?",Zn=nl+"?",Rn="["+yr+"]?",la="(?:"+Kr+"(?:"+[Lo,_r,wa].join("|")+")"+Rn+Zn+")*",so="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",no="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",c=Rn+Zn+la,C="(?:"+[Ua,_r,wa].join("|")+")"+c,u="(?:"+[Lo+Cs+"?",Cs,_r,wa,Dn].join("|")+")",m=RegExp(bn,"g"),v=RegExp(Cs,"g"),E=RegExp(io+"(?="+io+")|"+u+c,"g"),R=RegExp([Ar+"?"+Va+"+"+ar+"(?="+[ln,Ar,"$"].join("|")+")",di+"+"+hn+"(?="+[ln,Ar+br,"$"].join("|")+")",Ar+"?"+br+"+"+ar,Ar+"+"+hn,no,so,Ps,C].join("|"),"g"),Y=RegExp("["+Kr+si+xs+yr+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_e=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xe=-1,ze={};ze[_]=ze[b]=ze[w]=ze[I]=ze[D]=ze[k]=ze[B]=ze[H]=ze[U]=!0,ze[hi]=ze[zs]=ze[h]=ze[bs]=ze[f]=ze[ai]=ze[Pt]=ze[Hn]=ze[ns]=ze[on]=ze[fe]=ze[De]=ze[yt]=ze[tt]=ze[Jt]=!1;var Fe={};Fe[hi]=Fe[zs]=Fe[h]=Fe[f]=Fe[bs]=Fe[ai]=Fe[_]=Fe[b]=Fe[w]=Fe[I]=Fe[D]=Fe[ns]=Fe[on]=Fe[fe]=Fe[De]=Fe[yt]=Fe[tt]=Fe[lt]=Fe[k]=Fe[B]=Fe[H]=Fe[U]=!0,Fe[Pt]=Fe[Hn]=Fe[Jt]=!1;var bt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ui={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ni=parseFloat,Di=parseInt,Jn=typeof pr=="object"&&pr&&pr.Object===Object&&pr,un=typeof self=="object"&&self&&self.Object===Object&&self,Rs=Jn||un||Function("return this")(),Ut=e&&!e.nodeType&&e,Ks=Ut&&!0&&n&&!n.nodeType&&n,Ti=Ks&&Ks.exports===Ut,Ms=Ti&&Jn.process,cn=function(){try{var Te=Ks&&Ks.require&&Ks.require("util").types;return Te||Ms&&Ms.binding&&Ms.binding("util")}catch{}}(),Sa=cn&&cn.isArrayBuffer,Mn=cn&&cn.isDate,xr=cn&&cn.isMap,Ur=cn&&cn.isRegExp,Yn=cn&&cn.isSet,On=cn&&cn.isTypedArray;function xi(Te,Ye,He){switch(He.length){case 0:return Te.call(Ye);case 1:return Te.call(Ye,He[0]);case 2:return Te.call(Ye,He[0],He[1]);case 3:return Te.call(Ye,He[0],He[1],He[2])}return Te.apply(Ye,He)}function Pu(Te,Ye,He,le){for(var Ae=-1,qe=Te==null?0:Te.length;++Ae<qe;){var Xe=Te[Ae];Ye(le,Xe,He(Xe),Te)}return le}function $s(Te,Ye){for(var He=-1,le=Te==null?0:Te.length;++He<le&&Ye(Te[He],He,Te)!==!1;);return Te}function Ya(Te,Ye){for(var He=Te==null?0:Te.length;He--&&Ye(Te[He],He,Te)!==!1;);return Te}function Ca(Te,Ye){for(var He=-1,le=Te==null?0:Te.length;++He<le;)if(!Ye(Te[He],He,Te))return!1;return!0}function Yr(Te,Ye){for(var He=-1,le=Te==null?0:Te.length,Ae=0,qe=[];++He<le;){var Xe=Te[He];Ye(Xe,He,Te)&&(qe[Ae++]=Xe)}return qe}function hs(Te,Ye){var He=Te==null?0:Te.length;return!!He&&Wr(Te,Ye,0)>-1}function Pa(Te,Ye,He){for(var le=-1,Ae=Te==null?0:Te.length;++le<Ae;)if(He(Ye,Te[le]))return!0;return!1}function Is(Te,Ye){for(var He=-1,le=Te==null?0:Te.length,Ae=Array(le);++He<le;)Ae[He]=Ye(Te[He],He,Te);return Ae}function ha(Te,Ye){for(var He=-1,le=Ye.length,Ae=Te.length;++He<le;)Te[Ae+He]=Ye[He];return Te}function No(Te,Ye,He,le){var Ae=-1,qe=Te==null?0:Te.length;for(le&&qe&&(He=Te[++Ae]);++Ae<qe;)He=Ye(He,Te[Ae],Ae,Te);return He}function Eu(Te,Ye,He,le){var Ae=Te==null?0:Te.length;for(le&&Ae&&(He=Te[--Ae]);Ae--;)He=Ye(He,Te[Ae],Ae,Te);return He}function ro(Te,Ye){for(var He=-1,le=Te==null?0:Te.length;++He<le;)if(Ye(Te[He],He,Te))return!0;return!1}var Wa=al("length");function vn(Te){return Te.split("")}function yh(Te){return Te.match(Me)||[]}function ao(Te,Ye,He){var le;return He(Te,function(Ae,qe,Xe){if(Ye(Ae,qe,Xe))return le=qe,!1}),le}function rl(Te,Ye,He,le){for(var Ae=Te.length,qe=He+(le?1:-1);le?qe--:++qe<Ae;)if(Ye(Te[qe],qe,Te))return qe;return-1}function Wr(Te,Ye,He){return Ye===Ye?Pe(Te,Ye,He):rl(Te,Bo,He)}function Du(Te,Ye,He,le){for(var Ae=He-1,qe=Te.length;++Ae<qe;)if(le(Te[Ae],Ye))return Ae;return-1}function Bo(Te){return Te!==Te}function Ir(Te,Ye){var He=Te==null?0:Te.length;return He?vr(Te,Ye)/He:at}function al(Te){return function(Ye){return Ye==null?t:Ye[Te]}}function oo(Te){return function(Ye){return Te==null?t:Te[Ye]}}function Gi(Te,Ye,He,le,Ae){return Ae(Te,function(qe,Xe,Bt){He=le?(le=!1,qe):Ye(He,qe,Xe,Bt)}),He}function kr(Te,Ye){var He=Te.length;for(Te.sort(Ye);He--;)Te[He]=Te[He].value;return Te}function vr(Te,Ye){for(var He,le=-1,Ae=Te.length;++le<Ae;){var qe=Ye(Te[le]);qe!==t&&(He=He===t?qe:He+qe)}return He}function Ro(Te,Ye){for(var He=-1,le=Array(Te);++He<Te;)le[He]=Ye(He);return le}function Ci(Te,Ye){return Is(Ye,function(He){return[He,Te[He]]})}function Lr(Te){return Te&&Te.slice(0,ht(Te)+1).replace(Se,"")}function Yt(Te){return function(Ye){return Te(Ye)}}function $n(Te,Ye){return Is(Ye,function(He){return Te[He]})}function ms(Te,Ye){return Te.has(Ye)}function lo(Te,Ye){for(var He=-1,le=Te.length;++He<le&&Wr(Ye,Te[He],0)>-1;);return He}function Ea(Te,Ye){for(var He=Te.length;He--&&Wr(Ye,Te[He],0)>-1;);return He}function nn(Te,Ye){for(var He=Te.length,le=0;He--;)Te[He]===Ye&&++le;return le}var Wn=oo(bt),ho=oo(vt);function _h(Te){return"\\"+ui[Te]}function uo(Te,Ye){return Te==null?t:Te[Ye]}function Da(Te){return Y.test(Te)}function or(Te){return ee.test(Te)}function Mo(Te){for(var Ye,He=[];!(Ye=Te.next()).done;)He.push(Ye.value);return He}function Gr(Te){var Ye=-1,He=Array(Te.size);return Te.forEach(function(le,Ae){He[++Ye]=[Ae,le]}),He}function co(Te,Ye){return function(He){return Te(Ye(He))}}function Nr(Te,Ye){for(var He=-1,le=Te.length,Ae=0,qe=[];++He<le;){var Xe=Te[He];(Xe===Ye||Xe===S)&&(Te[He]=S,qe[Ae++]=He)}return qe}function Oo(Te){var Ye=-1,He=Array(Te.size);return Te.forEach(function(le){He[++Ye]=le}),He}function ue(Te){var Ye=-1,He=Array(Te.size);return Te.forEach(function(le){He[++Ye]=[le,le]}),He}function Pe(Te,Ye,He){for(var le=He-1,Ae=Te.length;++le<Ae;)if(Te[le]===Ye)return le;return-1}function Oe(Te,Ye,He){for(var le=He+1;le--;)if(Te[le]===Ye)return le;return le}function Ze(Te){return Da(Te)?Lt(Te):Wa(Te)}function Ue(Te){return Da(Te)?Gt(Te):vn(Te)}function ht(Te){for(var Ye=Te.length;Ye--&&ge.test(Te.charAt(Ye)););return Ye}var gt=oo(kt);function Lt(Te){for(var Ye=E.lastIndex=0;E.test(Te);)++Ye;return Ye}function Gt(Te){return Te.match(E)||[]}function wi(Te){return Te.match(R)||[]}var li=function Te(Ye){Ye=Ye==null?Rs:ei.defaults(Rs.Object(),Ye,ei.pick(Rs,_e));var He=Ye.Array,le=Ye.Date,Ae=Ye.Error,qe=Ye.Function,Xe=Ye.Math,Bt=Ye.Object,ri=Ye.RegExp,vi=Ye.String,ki=Ye.TypeError,Vr=He.prototype,qo=qe.prototype,fo=Bt.prototype,Fo=Ye["__core-js_shared__"],Ah=qo.toString,ks=fo.hasOwnProperty,hw=0,gy=function(){var l=/[^.]+$/.exec(Fo&&Fo.keys&&Fo.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Qc=fo.toString,uw=Ah.call(Bt),cw=Rs._,dw=ri("^"+Ah.call(ks).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zc=Ti?Ye.Buffer:t,ol=Ye.Symbol,Jc=Ye.Uint8Array,my=Zc?Zc.allocUnsafe:t,$c=co(Bt.getPrototypeOf,Bt),yy=Bt.create,_y=fo.propertyIsEnumerable,ed=Vr.splice,Ay=ol?ol.isConcatSpreadable:t,Tu=ol?ol.iterator:t,Cl=ol?ol.toStringTag:t,td=function(){try{var l=xl(Bt,"defineProperty");return l({},"",{}),l}catch{}}(),fw=Ye.clearTimeout!==Rs.clearTimeout&&Ye.clearTimeout,pw=le&&le.now!==Rs.Date.now&&le.now,gw=Ye.setTimeout!==Rs.setTimeout&&Ye.setTimeout,id=Xe.ceil,sd=Xe.floor,_p=Bt.getOwnPropertySymbols,mw=Zc?Zc.isBuffer:t,by=Ye.isFinite,yw=Vr.join,_w=co(Bt.keys,Bt),Gn=Xe.max,wr=Xe.min,Aw=le.now,bw=Ye.parseInt,vy=Xe.random,vw=Vr.reverse,Ap=xl(Ye,"DataView"),xu=xl(Ye,"Map"),bp=xl(Ye,"Promise"),bh=xl(Ye,"Set"),Iu=xl(Ye,"WeakMap"),ku=xl(Bt,"create"),nd=Iu&&new Iu,vh={},Vw=Il(Ap),ww=Il(xu),Sw=Il(bp),Cw=Il(bh),Pw=Il(Iu),rd=ol?ol.prototype:t,Lu=rd?rd.valueOf:t,Vy=rd?rd.toString:t;function oe(l){if(Vn(l)&&!Bi(l)&&!(l instanceof as)){if(l instanceof Ta)return l;if(ks.call(l,"__wrapped__"))return w_(l)}return new Ta(l)}var Vh=function(){function l(){}return function(p){if(!dn(p))return{};if(yy)return yy(p);l.prototype=p;var V=new l;return l.prototype=t,V}}();function ad(){}function Ta(l,p){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}oe.templateSettings={escape:O,evaluate:j,interpolate:te,variable:"",imports:{_:oe}},oe.prototype=ad.prototype,oe.prototype.constructor=oe,Ta.prototype=Vh(ad.prototype),Ta.prototype.constructor=Ta;function as(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Et,this.__views__=[]}function Ew(){var l=new as(this.__wrapped__);return l.__actions__=Xr(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Xr(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Xr(this.__views__),l}function Dw(){if(this.__filtered__){var l=new as(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function Tw(){var l=this.__wrapped__.value(),p=this.__dir__,V=Bi(l),M=p<0,ie=V?l.length:0,ce=zS(0,ie,this.__views__),Ve=ce.start,ke=ce.end,Ke=ke-Ve,ft=M?ke:Ve-1,pt=this.__iteratees__,Vt=pt.length,Ft=0,ti=wr(Ke,this.__takeCount__);if(!V||!M&&ie==Ke&&ti==Ke)return Wy(l,this.__actions__);var mi=[];e:for(;Ke--&&Ft<ti;){ft+=p;for(var zi=-1,yi=l[ft];++zi<Vt;){var $i=pt[zi],us=$i.iteratee,da=$i.type,Mr=us(yi);if(da==Ct)yi=Mr;else if(!Mr){if(da==nt)continue e;break e}}mi[Ft++]=yi}return mi}as.prototype=Vh(ad.prototype),as.prototype.constructor=as;function Pl(l){var p=-1,V=l==null?0:l.length;for(this.clear();++p<V;){var M=l[p];this.set(M[0],M[1])}}function xw(){this.__data__=ku?ku(null):{},this.size=0}function Iw(l){var p=this.has(l)&&delete this.__data__[l];return this.size-=p?1:0,p}function kw(l){var p=this.__data__;if(ku){var V=p[l];return V===g?t:V}return ks.call(p,l)?p[l]:t}function Lw(l){var p=this.__data__;return ku?p[l]!==t:ks.call(p,l)}function Nw(l,p){var V=this.__data__;return this.size+=this.has(l)?0:1,V[l]=ku&&p===t?g:p,this}Pl.prototype.clear=xw,Pl.prototype.delete=Iw,Pl.prototype.get=kw,Pl.prototype.has=Lw,Pl.prototype.set=Nw;function zo(l){var p=-1,V=l==null?0:l.length;for(this.clear();++p<V;){var M=l[p];this.set(M[0],M[1])}}function Bw(){this.__data__=[],this.size=0}function Rw(l){var p=this.__data__,V=od(p,l);if(V<0)return!1;var M=p.length-1;return V==M?p.pop():ed.call(p,V,1),--this.size,!0}function Mw(l){var p=this.__data__,V=od(p,l);return V<0?t:p[V][1]}function Ow(l){return od(this.__data__,l)>-1}function qw(l,p){var V=this.__data__,M=od(V,l);return M<0?(++this.size,V.push([l,p])):V[M][1]=p,this}zo.prototype.clear=Bw,zo.prototype.delete=Rw,zo.prototype.get=Mw,zo.prototype.has=Ow,zo.prototype.set=qw;function Ho(l){var p=-1,V=l==null?0:l.length;for(this.clear();++p<V;){var M=l[p];this.set(M[0],M[1])}}function Fw(){this.size=0,this.__data__={hash:new Pl,map:new(xu||zo),string:new Pl}}function zw(l){var p=Ad(this,l).delete(l);return this.size-=p?1:0,p}function Hw(l){return Ad(this,l).get(l)}function Kw(l){return Ad(this,l).has(l)}function Uw(l,p){var V=Ad(this,l),M=V.size;return V.set(l,p),this.size+=V.size==M?0:1,this}Ho.prototype.clear=Fw,Ho.prototype.delete=zw,Ho.prototype.get=Hw,Ho.prototype.has=Kw,Ho.prototype.set=Uw;function El(l){var p=-1,V=l==null?0:l.length;for(this.__data__=new Ho;++p<V;)this.add(l[p])}function Yw(l){return this.__data__.set(l,g),this}function Ww(l){return this.__data__.has(l)}El.prototype.add=El.prototype.push=Yw,El.prototype.has=Ww;function Ga(l){var p=this.__data__=new zo(l);this.size=p.size}function Gw(){this.__data__=new zo,this.size=0}function Xw(l){var p=this.__data__,V=p.delete(l);return this.size=p.size,V}function jw(l){return this.__data__.get(l)}function Qw(l){return this.__data__.has(l)}function Zw(l,p){var V=this.__data__;if(V instanceof zo){var M=V.__data__;if(!xu||M.length<s-1)return M.push([l,p]),this.size=++V.size,this;V=this.__data__=new Ho(M)}return V.set(l,p),this.size=V.size,this}Ga.prototype.clear=Gw,Ga.prototype.delete=Xw,Ga.prototype.get=jw,Ga.prototype.has=Qw,Ga.prototype.set=Zw;function wy(l,p){var V=Bi(l),M=!V&&kl(l),ie=!V&&!M&&dl(l),ce=!V&&!M&&!ie&&Ph(l),Ve=V||M||ie||ce,ke=Ve?Ro(l.length,vi):[],Ke=ke.length;for(var ft in l)(p||ks.call(l,ft))&&!(Ve&&(ft=="length"||ie&&(ft=="offset"||ft=="parent")||ce&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||Wo(ft,Ke)))&&ke.push(ft);return ke}function Sy(l){var p=l.length;return p?l[Ip(0,p-1)]:t}function Jw(l,p){return bd(Xr(l),Dl(p,0,l.length))}function $w(l){return bd(Xr(l))}function vp(l,p,V){(V!==t&&!Xa(l[p],V)||V===t&&!(p in l))&&Ko(l,p,V)}function Nu(l,p,V){var M=l[p];(!(ks.call(l,p)&&Xa(M,V))||V===t&&!(p in l))&&Ko(l,p,V)}function od(l,p){for(var V=l.length;V--;)if(Xa(l[V][0],p))return V;return-1}function eS(l,p,V,M){return ll(l,function(ie,ce,Ve){p(M,ie,V(ie),Ve)}),M}function Cy(l,p){return l&&go(p,er(p),l)}function tS(l,p){return l&&go(p,Qr(p),l)}function Ko(l,p,V){p=="__proto__"&&td?td(l,p,{configurable:!0,enumerable:!0,value:V,writable:!0}):l[p]=V}function Vp(l,p){for(var V=-1,M=p.length,ie=He(M),ce=l==null;++V<M;)ie[V]=ce?t:ig(l,p[V]);return ie}function Dl(l,p,V){return l===l&&(V!==t&&(l=l<=V?l:V),p!==t&&(l=l>=p?l:p)),l}function xa(l,p,V,M,ie,ce){var Ve,ke=p&T,Ke=p&L,ft=p&x;if(V&&(Ve=ie?V(l,M,ie,ce):V(l)),Ve!==t)return Ve;if(!dn(l))return l;var pt=Bi(l);if(pt){if(Ve=KS(l),!ke)return Xr(l,Ve)}else{var Vt=Sr(l),Ft=Vt==Hn||Vt==Zs;if(dl(l))return jy(l,ke);if(Vt==fe||Vt==hi||Ft&&!ie){if(Ve=Ke||Ft?{}:p_(l),!ke)return Ke?kS(l,tS(Ve,l)):IS(l,Cy(Ve,l))}else{if(!Fe[Vt])return ie?l:{};Ve=US(l,Vt,ke)}}ce||(ce=new Ga);var ti=ce.get(l);if(ti)return ti;ce.set(l,Ve),K_(l)?l.forEach(function(yi){Ve.add(xa(yi,p,V,yi,l,ce))}):z_(l)&&l.forEach(function(yi,$i){Ve.set($i,xa(yi,p,V,$i,l,ce))});var mi=ft?Ke?Hp:zp:Ke?Qr:er,zi=pt?t:mi(l);return $s(zi||l,function(yi,$i){zi&&($i=yi,yi=l[$i]),Nu(Ve,$i,xa(yi,p,V,$i,l,ce))}),Ve}function iS(l){var p=er(l);return function(V){return Py(V,l,p)}}function Py(l,p,V){var M=V.length;if(l==null)return!M;for(l=Bt(l);M--;){var ie=V[M],ce=p[ie],Ve=l[ie];if(Ve===t&&!(ie in l)||!ce(Ve))return!1}return!0}function Ey(l,p,V){if(typeof l!="function")throw new ki(o);return zu(function(){l.apply(t,V)},p)}function Bu(l,p,V,M){var ie=-1,ce=hs,Ve=!0,ke=l.length,Ke=[],ft=p.length;if(!ke)return Ke;V&&(p=Is(p,Yt(V))),M?(ce=Pa,Ve=!1):p.length>=s&&(ce=ms,Ve=!1,p=new El(p));e:for(;++ie<ke;){var pt=l[ie],Vt=V==null?pt:V(pt);if(pt=M||pt!==0?pt:0,Ve&&Vt===Vt){for(var Ft=ft;Ft--;)if(p[Ft]===Vt)continue e;Ke.push(pt)}else ce(p,Vt,M)||Ke.push(pt)}return Ke}var ll=e_(po),Dy=e_(Sp,!0);function sS(l,p){var V=!0;return ll(l,function(M,ie,ce){return V=!!p(M,ie,ce),V}),V}function ld(l,p,V){for(var M=-1,ie=l.length;++M<ie;){var ce=l[M],Ve=p(ce);if(Ve!=null&&(ke===t?Ve===Ve&&!ca(Ve):V(Ve,ke)))var ke=Ve,Ke=ce}return Ke}function nS(l,p,V,M){var ie=l.length;for(V=Oi(V),V<0&&(V=-V>ie?0:ie+V),M=M===t||M>ie?ie:Oi(M),M<0&&(M+=ie),M=V>M?0:Y_(M);V<M;)l[V++]=p;return l}function Ty(l,p){var V=[];return ll(l,function(M,ie,ce){p(M,ie,ce)&&V.push(M)}),V}function lr(l,p,V,M,ie){var ce=-1,Ve=l.length;for(V||(V=WS),ie||(ie=[]);++ce<Ve;){var ke=l[ce];p>0&&V(ke)?p>1?lr(ke,p-1,V,M,ie):ha(ie,ke):M||(ie[ie.length]=ke)}return ie}var wp=t_(),xy=t_(!0);function po(l,p){return l&&wp(l,p,er)}function Sp(l,p){return l&&xy(l,p,er)}function hd(l,p){return Yr(p,function(V){return Go(l[V])})}function Tl(l,p){p=ul(p,l);for(var V=0,M=p.length;l!=null&&V<M;)l=l[mo(p[V++])];return V&&V==M?l:t}function Iy(l,p,V){var M=p(l);return Bi(l)?M:ha(M,V(l))}function Br(l){return l==null?l===t?Kn:P:Cl&&Cl in Bt(l)?FS(l):$S(l)}function Cp(l,p){return l>p}function rS(l,p){return l!=null&&ks.call(l,p)}function aS(l,p){return l!=null&&p in Bt(l)}function oS(l,p,V){return l>=wr(p,V)&&l<Gn(p,V)}function Pp(l,p,V){for(var M=V?Pa:hs,ie=l[0].length,ce=l.length,Ve=ce,ke=He(ce),Ke=1/0,ft=[];Ve--;){var pt=l[Ve];Ve&&p&&(pt=Is(pt,Yt(p))),Ke=wr(pt.length,Ke),ke[Ve]=!V&&(p||ie>=120&&pt.length>=120)?new El(Ve&&pt):t}pt=l[0];var Vt=-1,Ft=ke[0];e:for(;++Vt<ie&&ft.length<Ke;){var ti=pt[Vt],mi=p?p(ti):ti;if(ti=V||ti!==0?ti:0,!(Ft?ms(Ft,mi):M(ft,mi,V))){for(Ve=ce;--Ve;){var zi=ke[Ve];if(!(zi?ms(zi,mi):M(l[Ve],mi,V)))continue e}Ft&&Ft.push(mi),ft.push(ti)}}return ft}function lS(l,p,V,M){return po(l,function(ie,ce,Ve){p(M,V(ie),ce,Ve)}),M}function Ru(l,p,V){p=ul(p,l),l=__(l,p);var M=l==null?l:l[mo(ka(p))];return M==null?t:xi(M,l,V)}function ky(l){return Vn(l)&&Br(l)==hi}function hS(l){return Vn(l)&&Br(l)==h}function uS(l){return Vn(l)&&Br(l)==ai}function Mu(l,p,V,M,ie){return l===p?!0:l==null||p==null||!Vn(l)&&!Vn(p)?l!==l&&p!==p:cS(l,p,V,M,Mu,ie)}function cS(l,p,V,M,ie,ce){var Ve=Bi(l),ke=Bi(p),Ke=Ve?zs:Sr(l),ft=ke?zs:Sr(p);Ke=Ke==hi?fe:Ke,ft=ft==hi?fe:ft;var pt=Ke==fe,Vt=ft==fe,Ft=Ke==ft;if(Ft&&dl(l)){if(!dl(p))return!1;Ve=!0,pt=!1}if(Ft&&!pt)return ce||(ce=new Ga),Ve||Ph(l)?c_(l,p,V,M,ie,ce):OS(l,p,Ke,V,M,ie,ce);if(!(V&A)){var ti=pt&&ks.call(l,"__wrapped__"),mi=Vt&&ks.call(p,"__wrapped__");if(ti||mi){var zi=ti?l.value():l,yi=mi?p.value():p;return ce||(ce=new Ga),ie(zi,yi,V,M,ce)}}return Ft?(ce||(ce=new Ga),qS(l,p,V,M,ie,ce)):!1}function dS(l){return Vn(l)&&Sr(l)==ns}function Ep(l,p,V,M){var ie=V.length,ce=ie,Ve=!M;if(l==null)return!ce;for(l=Bt(l);ie--;){var ke=V[ie];if(Ve&&ke[2]?ke[1]!==l[ke[0]]:!(ke[0]in l))return!1}for(;++ie<ce;){ke=V[ie];var Ke=ke[0],ft=l[Ke],pt=ke[1];if(Ve&&ke[2]){if(ft===t&&!(Ke in l))return!1}else{var Vt=new Ga;if(M)var Ft=M(ft,pt,Ke,l,p,Vt);if(!(Ft===t?Mu(pt,ft,A|Q,M,Vt):Ft))return!1}}return!0}function Ly(l){if(!dn(l)||XS(l))return!1;var p=Go(l)?dw:st;return p.test(Il(l))}function fS(l){return Vn(l)&&Br(l)==De}function pS(l){return Vn(l)&&Sr(l)==yt}function gS(l){return Vn(l)&&Pd(l.length)&&!!ze[Br(l)]}function Ny(l){return typeof l=="function"?l:l==null?Zr:typeof l=="object"?Bi(l)?My(l[0],l[1]):Ry(l):iA(l)}function Dp(l){if(!Fu(l))return _w(l);var p=[];for(var V in Bt(l))ks.call(l,V)&&V!="constructor"&&p.push(V);return p}function mS(l){if(!dn(l))return JS(l);var p=Fu(l),V=[];for(var M in l)M=="constructor"&&(p||!ks.call(l,M))||V.push(M);return V}function Tp(l,p){return l<p}function By(l,p){var V=-1,M=jr(l)?He(l.length):[];return ll(l,function(ie,ce,Ve){M[++V]=p(ie,ce,Ve)}),M}function Ry(l){var p=Up(l);return p.length==1&&p[0][2]?m_(p[0][0],p[0][1]):function(V){return V===l||Ep(V,l,p)}}function My(l,p){return Wp(l)&&g_(p)?m_(mo(l),p):function(V){var M=ig(V,l);return M===t&&M===p?sg(V,l):Mu(p,M,A|Q)}}function ud(l,p,V,M,ie){l!==p&&wp(p,function(ce,Ve){if(ie||(ie=new Ga),dn(ce))yS(l,p,Ve,V,ud,M,ie);else{var ke=M?M(Xp(l,Ve),ce,Ve+"",l,p,ie):t;ke===t&&(ke=ce),vp(l,Ve,ke)}},Qr)}function yS(l,p,V,M,ie,ce,Ve){var ke=Xp(l,V),Ke=Xp(p,V),ft=Ve.get(Ke);if(ft){vp(l,V,ft);return}var pt=ce?ce(ke,Ke,V+"",l,p,Ve):t,Vt=pt===t;if(Vt){var Ft=Bi(Ke),ti=!Ft&&dl(Ke),mi=!Ft&&!ti&&Ph(Ke);pt=Ke,Ft||ti||mi?Bi(ke)?pt=ke:Tn(ke)?pt=Xr(ke):ti?(Vt=!1,pt=jy(Ke,!0)):mi?(Vt=!1,pt=Qy(Ke,!0)):pt=[]:Hu(Ke)||kl(Ke)?(pt=ke,kl(ke)?pt=W_(ke):(!dn(ke)||Go(ke))&&(pt=p_(Ke))):Vt=!1}Vt&&(Ve.set(Ke,pt),ie(pt,Ke,M,ce,Ve),Ve.delete(Ke)),vp(l,V,pt)}function Oy(l,p){var V=l.length;if(V)return p+=p<0?V:0,Wo(p,V)?l[p]:t}function qy(l,p,V){p.length?p=Is(p,function(ce){return Bi(ce)?function(Ve){return Tl(Ve,ce.length===1?ce[0]:ce)}:ce}):p=[Zr];var M=-1;p=Is(p,Yt(fi()));var ie=By(l,function(ce,Ve,ke){var Ke=Is(p,function(ft){return ft(ce)});return{criteria:Ke,index:++M,value:ce}});return kr(ie,function(ce,Ve){return xS(ce,Ve,V)})}function _S(l,p){return Fy(l,p,function(V,M){return sg(l,M)})}function Fy(l,p,V){for(var M=-1,ie=p.length,ce={};++M<ie;){var Ve=p[M],ke=Tl(l,Ve);V(ke,Ve)&&Ou(ce,ul(Ve,l),ke)}return ce}function AS(l){return function(p){return Tl(p,l)}}function xp(l,p,V,M){var ie=M?Du:Wr,ce=-1,Ve=p.length,ke=l;for(l===p&&(p=Xr(p)),V&&(ke=Is(l,Yt(V)));++ce<Ve;)for(var Ke=0,ft=p[ce],pt=V?V(ft):ft;(Ke=ie(ke,pt,Ke,M))>-1;)ke!==l&&ed.call(ke,Ke,1),ed.call(l,Ke,1);return l}function zy(l,p){for(var V=l?p.length:0,M=V-1;V--;){var ie=p[V];if(V==M||ie!==ce){var ce=ie;Wo(ie)?ed.call(l,ie,1):Np(l,ie)}}return l}function Ip(l,p){return l+sd(vy()*(p-l+1))}function bS(l,p,V,M){for(var ie=-1,ce=Gn(id((p-l)/(V||1)),0),Ve=He(ce);ce--;)Ve[M?ce:++ie]=l,l+=V;return Ve}function kp(l,p){var V="";if(!l||p<1||p>At)return V;do p%2&&(V+=l),p=sd(p/2),p&&(l+=l);while(p);return V}function Yi(l,p){return jp(y_(l,p,Zr),l+"")}function vS(l){return Sy(Eh(l))}function VS(l,p){var V=Eh(l);return bd(V,Dl(p,0,V.length))}function Ou(l,p,V,M){if(!dn(l))return l;p=ul(p,l);for(var ie=-1,ce=p.length,Ve=ce-1,ke=l;ke!=null&&++ie<ce;){var Ke=mo(p[ie]),ft=V;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return l;if(ie!=Ve){var pt=ke[Ke];ft=M?M(pt,Ke,ke):t,ft===t&&(ft=dn(pt)?pt:Wo(p[ie+1])?[]:{})}Nu(ke,Ke,ft),ke=ke[Ke]}return l}var Hy=nd?function(l,p){return nd.set(l,p),l}:Zr,wS=td?function(l,p){return td(l,"toString",{configurable:!0,enumerable:!1,value:rg(p),writable:!0})}:Zr;function SS(l){return bd(Eh(l))}function Ia(l,p,V){var M=-1,ie=l.length;p<0&&(p=-p>ie?0:ie+p),V=V>ie?ie:V,V<0&&(V+=ie),ie=p>V?0:V-p>>>0,p>>>=0;for(var ce=He(ie);++M<ie;)ce[M]=l[M+p];return ce}function CS(l,p){var V;return ll(l,function(M,ie,ce){return V=p(M,ie,ce),!V}),!!V}function cd(l,p,V){var M=0,ie=l==null?M:l.length;if(typeof p=="number"&&p===p&&ie<=Ht){for(;M<ie;){var ce=M+ie>>>1,Ve=l[ce];Ve!==null&&!ca(Ve)&&(V?Ve<=p:Ve<p)?M=ce+1:ie=ce}return ie}return Lp(l,p,Zr,V)}function Lp(l,p,V,M){var ie=0,ce=l==null?0:l.length;if(ce===0)return 0;p=V(p);for(var Ve=p!==p,ke=p===null,Ke=ca(p),ft=p===t;ie<ce;){var pt=sd((ie+ce)/2),Vt=V(l[pt]),Ft=Vt!==t,ti=Vt===null,mi=Vt===Vt,zi=ca(Vt);if(Ve)var yi=M||mi;else ft?yi=mi&&(M||Ft):ke?yi=mi&&Ft&&(M||!ti):Ke?yi=mi&&Ft&&!ti&&(M||!zi):ti||zi?yi=!1:yi=M?Vt<=p:Vt<p;yi?ie=pt+1:ce=pt}return wr(ce,Nt)}function Ky(l,p){for(var V=-1,M=l.length,ie=0,ce=[];++V<M;){var Ve=l[V],ke=p?p(Ve):Ve;if(!V||!Xa(ke,Ke)){var Ke=ke;ce[ie++]=Ve===0?0:Ve}}return ce}function Uy(l){return typeof l=="number"?l:ca(l)?at:+l}function ua(l){if(typeof l=="string")return l;if(Bi(l))return Is(l,ua)+"";if(ca(l))return Vy?Vy.call(l):"";var p=l+"";return p=="0"&&1/l==-1/0?"-0":p}function hl(l,p,V){var M=-1,ie=hs,ce=l.length,Ve=!0,ke=[],Ke=ke;if(V)Ve=!1,ie=Pa;else if(ce>=s){var ft=p?null:RS(l);if(ft)return Oo(ft);Ve=!1,ie=ms,Ke=new El}else Ke=p?[]:ke;e:for(;++M<ce;){var pt=l[M],Vt=p?p(pt):pt;if(pt=V||pt!==0?pt:0,Ve&&Vt===Vt){for(var Ft=Ke.length;Ft--;)if(Ke[Ft]===Vt)continue e;p&&Ke.push(Vt),ke.push(pt)}else ie(Ke,Vt,V)||(Ke!==ke&&Ke.push(Vt),ke.push(pt))}return ke}function Np(l,p){return p=ul(p,l),l=__(l,p),l==null||delete l[mo(ka(p))]}function Yy(l,p,V,M){return Ou(l,p,V(Tl(l,p)),M)}function dd(l,p,V,M){for(var ie=l.length,ce=M?ie:-1;(M?ce--:++ce<ie)&&p(l[ce],ce,l););return V?Ia(l,M?0:ce,M?ce+1:ie):Ia(l,M?ce+1:0,M?ie:ce)}function Wy(l,p){var V=l;return V instanceof as&&(V=V.value()),No(p,function(M,ie){return ie.func.apply(ie.thisArg,ha([M],ie.args))},V)}function Bp(l,p,V){var M=l.length;if(M<2)return M?hl(l[0]):[];for(var ie=-1,ce=He(M);++ie<M;)for(var Ve=l[ie],ke=-1;++ke<M;)ke!=ie&&(ce[ie]=Bu(ce[ie]||Ve,l[ke],p,V));return hl(lr(ce,1),p,V)}function Gy(l,p,V){for(var M=-1,ie=l.length,ce=p.length,Ve={};++M<ie;){var ke=M<ce?p[M]:t;V(Ve,l[M],ke)}return Ve}function Rp(l){return Tn(l)?l:[]}function Mp(l){return typeof l=="function"?l:Zr}function ul(l,p){return Bi(l)?l:Wp(l,p)?[l]:V_(Es(l))}var PS=Yi;function cl(l,p,V){var M=l.length;return V=V===t?M:V,!p&&V>=M?l:Ia(l,p,V)}var Xy=fw||function(l){return Rs.clearTimeout(l)};function jy(l,p){if(p)return l.slice();var V=l.length,M=my?my(V):new l.constructor(V);return l.copy(M),M}function Op(l){var p=new l.constructor(l.byteLength);return new Jc(p).set(new Jc(l)),p}function ES(l,p){var V=p?Op(l.buffer):l.buffer;return new l.constructor(V,l.byteOffset,l.byteLength)}function DS(l){var p=new l.constructor(l.source,Dt.exec(l));return p.lastIndex=l.lastIndex,p}function TS(l){return Lu?Bt(Lu.call(l)):{}}function Qy(l,p){var V=p?Op(l.buffer):l.buffer;return new l.constructor(V,l.byteOffset,l.length)}function Zy(l,p){if(l!==p){var V=l!==t,M=l===null,ie=l===l,ce=ca(l),Ve=p!==t,ke=p===null,Ke=p===p,ft=ca(p);if(!ke&&!ft&&!ce&&l>p||ce&&Ve&&Ke&&!ke&&!ft||M&&Ve&&Ke||!V&&Ke||!ie)return 1;if(!M&&!ce&&!ft&&l<p||ft&&V&&ie&&!M&&!ce||ke&&V&&ie||!Ve&&ie||!Ke)return-1}return 0}function xS(l,p,V){for(var M=-1,ie=l.criteria,ce=p.criteria,Ve=ie.length,ke=V.length;++M<Ve;){var Ke=Zy(ie[M],ce[M]);if(Ke){if(M>=ke)return Ke;var ft=V[M];return Ke*(ft=="desc"?-1:1)}}return l.index-p.index}function Jy(l,p,V,M){for(var ie=-1,ce=l.length,Ve=V.length,ke=-1,Ke=p.length,ft=Gn(ce-Ve,0),pt=He(Ke+ft),Vt=!M;++ke<Ke;)pt[ke]=p[ke];for(;++ie<Ve;)(Vt||ie<ce)&&(pt[V[ie]]=l[ie]);for(;ft--;)pt[ke++]=l[ie++];return pt}function $y(l,p,V,M){for(var ie=-1,ce=l.length,Ve=-1,ke=V.length,Ke=-1,ft=p.length,pt=Gn(ce-ke,0),Vt=He(pt+ft),Ft=!M;++ie<pt;)Vt[ie]=l[ie];for(var ti=ie;++Ke<ft;)Vt[ti+Ke]=p[Ke];for(;++Ve<ke;)(Ft||ie<ce)&&(Vt[ti+V[Ve]]=l[ie++]);return Vt}function Xr(l,p){var V=-1,M=l.length;for(p||(p=He(M));++V<M;)p[V]=l[V];return p}function go(l,p,V,M){var ie=!V;V||(V={});for(var ce=-1,Ve=p.length;++ce<Ve;){var ke=p[ce],Ke=M?M(V[ke],l[ke],ke,V,l):t;Ke===t&&(Ke=l[ke]),ie?Ko(V,ke,Ke):Nu(V,ke,Ke)}return V}function IS(l,p){return go(l,Yp(l),p)}function kS(l,p){return go(l,d_(l),p)}function fd(l,p){return function(V,M){var ie=Bi(V)?Pu:eS,ce=p?p():{};return ie(V,l,fi(M,2),ce)}}function wh(l){return Yi(function(p,V){var M=-1,ie=V.length,ce=ie>1?V[ie-1]:t,Ve=ie>2?V[2]:t;for(ce=l.length>3&&typeof ce=="function"?(ie--,ce):t,Ve&&Rr(V[0],V[1],Ve)&&(ce=ie<3?t:ce,ie=1),p=Bt(p);++M<ie;){var ke=V[M];ke&&l(p,ke,M,ce)}return p})}function e_(l,p){return function(V,M){if(V==null)return V;if(!jr(V))return l(V,M);for(var ie=V.length,ce=p?ie:-1,Ve=Bt(V);(p?ce--:++ce<ie)&&M(Ve[ce],ce,Ve)!==!1;);return V}}function t_(l){return function(p,V,M){for(var ie=-1,ce=Bt(p),Ve=M(p),ke=Ve.length;ke--;){var Ke=Ve[l?ke:++ie];if(V(ce[Ke],Ke,ce)===!1)break}return p}}function LS(l,p,V){var M=p&z,ie=qu(l);function ce(){var Ve=this&&this!==Rs&&this instanceof ce?ie:l;return Ve.apply(M?V:this,arguments)}return ce}function i_(l){return function(p){p=Es(p);var V=Da(p)?Ue(p):t,M=V?V[0]:p.charAt(0),ie=V?cl(V,1).join(""):p.slice(1);return M[l]()+ie}}function Sh(l){return function(p){return No(eA($_(p).replace(m,"")),l,"")}}function qu(l){return function(){var p=arguments;switch(p.length){case 0:return new l;case 1:return new l(p[0]);case 2:return new l(p[0],p[1]);case 3:return new l(p[0],p[1],p[2]);case 4:return new l(p[0],p[1],p[2],p[3]);case 5:return new l(p[0],p[1],p[2],p[3],p[4]);case 6:return new l(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new l(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var V=Vh(l.prototype),M=l.apply(V,p);return dn(M)?M:V}}function NS(l,p,V){var M=qu(l);function ie(){for(var ce=arguments.length,Ve=He(ce),ke=ce,Ke=Ch(ie);ke--;)Ve[ke]=arguments[ke];var ft=ce<3&&Ve[0]!==Ke&&Ve[ce-1]!==Ke?[]:Nr(Ve,Ke);if(ce-=ft.length,ce<V)return o_(l,p,pd,ie.placeholder,t,Ve,ft,t,t,V-ce);var pt=this&&this!==Rs&&this instanceof ie?M:l;return xi(pt,this,Ve)}return ie}function s_(l){return function(p,V,M){var ie=Bt(p);if(!jr(p)){var ce=fi(V,3);p=er(p),V=function(ke){return ce(ie[ke],ke,ie)}}var Ve=l(p,V,M);return Ve>-1?ie[ce?p[Ve]:Ve]:t}}function n_(l){return Yo(function(p){var V=p.length,M=V,ie=Ta.prototype.thru;for(l&&p.reverse();M--;){var ce=p[M];if(typeof ce!="function")throw new ki(o);if(ie&&!Ve&&_d(ce)=="wrapper")var Ve=new Ta([],!0)}for(M=Ve?M:V;++M<V;){ce=p[M];var ke=_d(ce),Ke=ke=="wrapper"?Kp(ce):t;Ke&&Gp(Ke[0])&&Ke[1]==(Ie|ne|pe|$e)&&!Ke[4].length&&Ke[9]==1?Ve=Ve[_d(Ke[0])].apply(Ve,Ke[3]):Ve=ce.length==1&&Gp(ce)?Ve[ke]():Ve.thru(ce)}return function(){var ft=arguments,pt=ft[0];if(Ve&&ft.length==1&&Bi(pt))return Ve.plant(pt).value();for(var Vt=0,Ft=V?p[Vt].apply(this,ft):pt;++Vt<V;)Ft=p[Vt].call(this,Ft);return Ft}})}function pd(l,p,V,M,ie,ce,Ve,ke,Ke,ft){var pt=p&Ie,Vt=p&z,Ft=p&G,ti=p&(ne|ae),mi=p&Ee,zi=Ft?t:qu(l);function yi(){for(var $i=arguments.length,us=He($i),da=$i;da--;)us[da]=arguments[da];if(ti)var Mr=Ch(yi),fa=nn(us,Mr);if(M&&(us=Jy(us,M,ie,ti)),ce&&(us=$y(us,ce,Ve,ti)),$i-=fa,ti&&$i<ft){var xn=Nr(us,Mr);return o_(l,p,pd,yi.placeholder,V,us,xn,ke,Ke,ft-$i)}var ja=Vt?V:this,jo=Ft?ja[l]:l;return $i=us.length,ke?us=eC(us,ke):mi&&$i>1&&us.reverse(),pt&&Ke<$i&&(us.length=Ke),this&&this!==Rs&&this instanceof yi&&(jo=zi||qu(jo)),jo.apply(ja,us)}return yi}function r_(l,p){return function(V,M){return lS(V,l,p(M),{})}}function gd(l,p){return function(V,M){var ie;if(V===t&&M===t)return p;if(V!==t&&(ie=V),M!==t){if(ie===t)return M;typeof V=="string"||typeof M=="string"?(V=ua(V),M=ua(M)):(V=Uy(V),M=Uy(M)),ie=l(V,M)}return ie}}function qp(l){return Yo(function(p){return p=Is(p,Yt(fi())),Yi(function(V){var M=this;return l(p,function(ie){return xi(ie,M,V)})})})}function md(l,p){p=p===t?" ":ua(p);var V=p.length;if(V<2)return V?kp(p,l):p;var M=kp(p,id(l/Ze(p)));return Da(p)?cl(Ue(M),0,l).join(""):M.slice(0,l)}function BS(l,p,V,M){var ie=p&z,ce=qu(l);function Ve(){for(var ke=-1,Ke=arguments.length,ft=-1,pt=M.length,Vt=He(pt+Ke),Ft=this&&this!==Rs&&this instanceof Ve?ce:l;++ft<pt;)Vt[ft]=M[ft];for(;Ke--;)Vt[ft++]=arguments[++ke];return xi(Ft,ie?V:this,Vt)}return Ve}function a_(l){return function(p,V,M){return M&&typeof M!="number"&&Rr(p,V,M)&&(V=M=t),p=Xo(p),V===t?(V=p,p=0):V=Xo(V),M=M===t?p<V?1:-1:Xo(M),bS(p,V,M,l)}}function yd(l){return function(p,V){return typeof p=="string"&&typeof V=="string"||(p=La(p),V=La(V)),l(p,V)}}function o_(l,p,V,M,ie,ce,Ve,ke,Ke,ft){var pt=p&ne,Vt=pt?Ve:t,Ft=pt?t:Ve,ti=pt?ce:t,mi=pt?t:ce;p|=pt?pe:N,p&=~(pt?N:pe),p&re||(p&=-4);var zi=[l,p,ie,ti,Vt,mi,Ft,ke,Ke,ft],yi=V.apply(t,zi);return Gp(l)&&A_(yi,zi),yi.placeholder=M,b_(yi,l,p)}function Fp(l){var p=Xe[l];return function(V,M){if(V=La(V),M=M==null?0:wr(Oi(M),292),M&&by(V)){var ie=(Es(V)+"e").split("e"),ce=p(ie[0]+"e"+(+ie[1]+M));return ie=(Es(ce)+"e").split("e"),+(ie[0]+"e"+(+ie[1]-M))}return p(V)}}var RS=bh&&1/Oo(new bh([,-0]))[1]==Zt?function(l){return new bh(l)}:lg;function l_(l){return function(p){var V=Sr(p);return V==ns?Gr(p):V==yt?ue(p):Ci(p,l(p))}}function Uo(l,p,V,M,ie,ce,Ve,ke){var Ke=p&G;if(!Ke&&typeof l!="function")throw new ki(o);var ft=M?M.length:0;if(ft||(p&=-97,M=ie=t),Ve=Ve===t?Ve:Gn(Oi(Ve),0),ke=ke===t?ke:Oi(ke),ft-=ie?ie.length:0,p&N){var pt=M,Vt=ie;M=ie=t}var Ft=Ke?t:Kp(l),ti=[l,p,V,M,ie,pt,Vt,ce,Ve,ke];if(Ft&&ZS(ti,Ft),l=ti[0],p=ti[1],V=ti[2],M=ti[3],ie=ti[4],ke=ti[9]=ti[9]===t?Ke?0:l.length:Gn(ti[9]-ft,0),!ke&&p&(ne|ae)&&(p&=-25),!p||p==z)var mi=LS(l,p,V);else p==ne||p==ae?mi=NS(l,p,ke):(p==pe||p==(z|pe))&&!ie.length?mi=BS(l,p,V,M):mi=pd.apply(t,ti);var zi=Ft?Hy:A_;return b_(zi(mi,ti),l,p)}function h_(l,p,V,M){return l===t||Xa(l,fo[V])&&!ks.call(M,V)?p:l}function u_(l,p,V,M,ie,ce){return dn(l)&&dn(p)&&(ce.set(p,l),ud(l,p,t,u_,ce),ce.delete(p)),l}function MS(l){return Hu(l)?t:l}function c_(l,p,V,M,ie,ce){var Ve=V&A,ke=l.length,Ke=p.length;if(ke!=Ke&&!(Ve&&Ke>ke))return!1;var ft=ce.get(l),pt=ce.get(p);if(ft&&pt)return ft==p&&pt==l;var Vt=-1,Ft=!0,ti=V&Q?new El:t;for(ce.set(l,p),ce.set(p,l);++Vt<ke;){var mi=l[Vt],zi=p[Vt];if(M)var yi=Ve?M(zi,mi,Vt,p,l,ce):M(mi,zi,Vt,l,p,ce);if(yi!==t){if(yi)continue;Ft=!1;break}if(ti){if(!ro(p,function($i,us){if(!ms(ti,us)&&(mi===$i||ie(mi,$i,V,M,ce)))return ti.push(us)})){Ft=!1;break}}else if(!(mi===zi||ie(mi,zi,V,M,ce))){Ft=!1;break}}return ce.delete(l),ce.delete(p),Ft}function OS(l,p,V,M,ie,ce,Ve){switch(V){case f:if(l.byteLength!=p.byteLength||l.byteOffset!=p.byteOffset)return!1;l=l.buffer,p=p.buffer;case h:return!(l.byteLength!=p.byteLength||!ce(new Jc(l),new Jc(p)));case bs:case ai:case on:return Xa(+l,+p);case Pt:return l.name==p.name&&l.message==p.message;case De:case tt:return l==p+"";case ns:var ke=Gr;case yt:var Ke=M&A;if(ke||(ke=Oo),l.size!=p.size&&!Ke)return!1;var ft=Ve.get(l);if(ft)return ft==p;M|=Q,Ve.set(l,p);var pt=c_(ke(l),ke(p),M,ie,ce,Ve);return Ve.delete(l),pt;case lt:if(Lu)return Lu.call(l)==Lu.call(p)}return!1}function qS(l,p,V,M,ie,ce){var Ve=V&A,ke=zp(l),Ke=ke.length,ft=zp(p),pt=ft.length;if(Ke!=pt&&!Ve)return!1;for(var Vt=Ke;Vt--;){var Ft=ke[Vt];if(!(Ve?Ft in p:ks.call(p,Ft)))return!1}var ti=ce.get(l),mi=ce.get(p);if(ti&&mi)return ti==p&&mi==l;var zi=!0;ce.set(l,p),ce.set(p,l);for(var yi=Ve;++Vt<Ke;){Ft=ke[Vt];var $i=l[Ft],us=p[Ft];if(M)var da=Ve?M(us,$i,Ft,p,l,ce):M($i,us,Ft,l,p,ce);if(!(da===t?$i===us||ie($i,us,V,M,ce):da)){zi=!1;break}yi||(yi=Ft=="constructor")}if(zi&&!yi){var Mr=l.constructor,fa=p.constructor;Mr!=fa&&"constructor"in l&&"constructor"in p&&!(typeof Mr=="function"&&Mr instanceof Mr&&typeof fa=="function"&&fa instanceof fa)&&(zi=!1)}return ce.delete(l),ce.delete(p),zi}function Yo(l){return jp(y_(l,t,P_),l+"")}function zp(l){return Iy(l,er,Yp)}function Hp(l){return Iy(l,Qr,d_)}var Kp=nd?function(l){return nd.get(l)}:lg;function _d(l){for(var p=l.name+"",V=vh[p],M=ks.call(vh,p)?V.length:0;M--;){var ie=V[M],ce=ie.func;if(ce==null||ce==l)return ie.name}return p}function Ch(l){var p=ks.call(oe,"placeholder")?oe:l;return p.placeholder}function fi(){var l=oe.iteratee||ag;return l=l===ag?Ny:l,arguments.length?l(arguments[0],arguments[1]):l}function Ad(l,p){var V=l.__data__;return GS(p)?V[typeof p=="string"?"string":"hash"]:V.map}function Up(l){for(var p=er(l),V=p.length;V--;){var M=p[V],ie=l[M];p[V]=[M,ie,g_(ie)]}return p}function xl(l,p){var V=uo(l,p);return Ly(V)?V:t}function FS(l){var p=ks.call(l,Cl),V=l[Cl];try{l[Cl]=t;var M=!0}catch{}var ie=Qc.call(l);return M&&(p?l[Cl]=V:delete l[Cl]),ie}var Yp=_p?function(l){return l==null?[]:(l=Bt(l),Yr(_p(l),function(p){return _y.call(l,p)}))}:hg,d_=_p?function(l){for(var p=[];l;)ha(p,Yp(l)),l=$c(l);return p}:hg,Sr=Br;(Ap&&Sr(new Ap(new ArrayBuffer(1)))!=f||xu&&Sr(new xu)!=ns||bp&&Sr(bp.resolve())!=ye||bh&&Sr(new bh)!=yt||Iu&&Sr(new Iu)!=Jt)&&(Sr=function(l){var p=Br(l),V=p==fe?l.constructor:t,M=V?Il(V):"";if(M)switch(M){case Vw:return f;case ww:return ns;case Sw:return ye;case Cw:return yt;case Pw:return Jt}return p});function zS(l,p,V){for(var M=-1,ie=V.length;++M<ie;){var ce=V[M],Ve=ce.size;switch(ce.type){case"drop":l+=Ve;break;case"dropRight":p-=Ve;break;case"take":p=wr(p,l+Ve);break;case"takeRight":l=Gn(l,p-Ve);break}}return{start:l,end:p}}function HS(l){var p=l.match(Ce);return p?p[1].split(Be):[]}function f_(l,p,V){p=ul(p,l);for(var M=-1,ie=p.length,ce=!1;++M<ie;){var Ve=mo(p[M]);if(!(ce=l!=null&&V(l,Ve)))break;l=l[Ve]}return ce||++M!=ie?ce:(ie=l==null?0:l.length,!!ie&&Pd(ie)&&Wo(Ve,ie)&&(Bi(l)||kl(l)))}function KS(l){var p=l.length,V=new l.constructor(p);return p&&typeof l[0]=="string"&&ks.call(l,"index")&&(V.index=l.index,V.input=l.input),V}function p_(l){return typeof l.constructor=="function"&&!Fu(l)?Vh($c(l)):{}}function US(l,p,V){var M=l.constructor;switch(p){case h:return Op(l);case bs:case ai:return new M(+l);case f:return ES(l,V);case _:case b:case w:case I:case D:case k:case B:case H:case U:return Qy(l,V);case ns:return new M;case on:case tt:return new M(l);case De:return DS(l);case yt:return new M;case lt:return TS(l)}}function YS(l,p){var V=p.length;if(!V)return l;var M=V-1;return p[M]=(V>1?"& ":"")+p[M],p=p.join(V>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+p+`] */
`)}function WS(l){return Bi(l)||kl(l)||!!(Ay&&l&&l[Ay])}function Wo(l,p){var V=typeof l;return p=p??At,!!p&&(V=="number"||V!="symbol"&&qt.test(l))&&l>-1&&l%1==0&&l<p}function Rr(l,p,V){if(!dn(V))return!1;var M=typeof p;return(M=="number"?jr(V)&&Wo(p,V.length):M=="string"&&p in V)?Xa(V[p],l):!1}function Wp(l,p){if(Bi(l))return!1;var V=typeof l;return V=="number"||V=="symbol"||V=="boolean"||l==null||ca(l)?!0:J.test(l)||!se.test(l)||p!=null&&l in Bt(p)}function GS(l){var p=typeof l;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?l!=="__proto__":l===null}function Gp(l){var p=_d(l),V=oe[p];if(typeof V!="function"||!(p in as.prototype))return!1;if(l===V)return!0;var M=Kp(V);return!!M&&l===M[0]}function XS(l){return!!gy&&gy in l}var jS=Fo?Go:ug;function Fu(l){var p=l&&l.constructor,V=typeof p=="function"&&p.prototype||fo;return l===V}function g_(l){return l===l&&!dn(l)}function m_(l,p){return function(V){return V==null?!1:V[l]===p&&(p!==t||l in Bt(V))}}function QS(l){var p=Sd(l,function(M){return V.size===y&&V.clear(),M}),V=p.cache;return p}function ZS(l,p){var V=l[1],M=p[1],ie=V|M,ce=ie<(z|G|Ie),Ve=M==Ie&&V==ne||M==Ie&&V==$e&&l[7].length<=p[8]||M==(Ie|$e)&&p[7].length<=p[8]&&V==ne;if(!(ce||Ve))return l;M&z&&(l[2]=p[2],ie|=V&z?0:re);var ke=p[3];if(ke){var Ke=l[3];l[3]=Ke?Jy(Ke,ke,p[4]):ke,l[4]=Ke?Nr(l[3],S):p[4]}return ke=p[5],ke&&(Ke=l[5],l[5]=Ke?$y(Ke,ke,p[6]):ke,l[6]=Ke?Nr(l[5],S):p[6]),ke=p[7],ke&&(l[7]=ke),M&Ie&&(l[8]=l[8]==null?p[8]:wr(l[8],p[8])),l[9]==null&&(l[9]=p[9]),l[0]=p[0],l[1]=ie,l}function JS(l){var p=[];if(l!=null)for(var V in Bt(l))p.push(V);return p}function $S(l){return Qc.call(l)}function y_(l,p,V){return p=Gn(p===t?l.length-1:p,0),function(){for(var M=arguments,ie=-1,ce=Gn(M.length-p,0),Ve=He(ce);++ie<ce;)Ve[ie]=M[p+ie];ie=-1;for(var ke=He(p+1);++ie<p;)ke[ie]=M[ie];return ke[p]=V(Ve),xi(l,this,ke)}}function __(l,p){return p.length<2?l:Tl(l,Ia(p,0,-1))}function eC(l,p){for(var V=l.length,M=wr(p.length,V),ie=Xr(l);M--;){var ce=p[M];l[M]=Wo(ce,V)?ie[ce]:t}return l}function Xp(l,p){if(!(p==="constructor"&&typeof l[p]=="function")&&p!="__proto__")return l[p]}var A_=v_(Hy),zu=gw||function(l,p){return Rs.setTimeout(l,p)},jp=v_(wS);function b_(l,p,V){var M=p+"";return jp(l,YS(M,tC(HS(M),V)))}function v_(l){var p=0,V=0;return function(){var M=Aw(),ie=it-(M-V);if(V=M,ie>0){if(++p>=_t)return arguments[0]}else p=0;return l.apply(t,arguments)}}function bd(l,p){var V=-1,M=l.length,ie=M-1;for(p=p===t?M:p;++V<p;){var ce=Ip(V,ie),Ve=l[ce];l[ce]=l[V],l[V]=Ve}return l.length=p,l}var V_=QS(function(l){var p=[];return l.charCodeAt(0)===46&&p.push(""),l.replace(de,function(V,M,ie,ce){p.push(ie?ce.replace(dt,"$1"):M||V)}),p});function mo(l){if(typeof l=="string"||ca(l))return l;var p=l+"";return p=="0"&&1/l==-1/0?"-0":p}function Il(l){if(l!=null){try{return Ah.call(l)}catch{}try{return l+""}catch{}}return""}function tC(l,p){return $s(cs,function(V){var M="_."+V[0];p&V[1]&&!hs(l,M)&&l.push(M)}),l.sort()}function w_(l){if(l instanceof as)return l.clone();var p=new Ta(l.__wrapped__,l.__chain__);return p.__actions__=Xr(l.__actions__),p.__index__=l.__index__,p.__values__=l.__values__,p}function iC(l,p,V){(V?Rr(l,p,V):p===t)?p=1:p=Gn(Oi(p),0);var M=l==null?0:l.length;if(!M||p<1)return[];for(var ie=0,ce=0,Ve=He(id(M/p));ie<M;)Ve[ce++]=Ia(l,ie,ie+=p);return Ve}function sC(l){for(var p=-1,V=l==null?0:l.length,M=0,ie=[];++p<V;){var ce=l[p];ce&&(ie[M++]=ce)}return ie}function nC(){var l=arguments.length;if(!l)return[];for(var p=He(l-1),V=arguments[0],M=l;M--;)p[M-1]=arguments[M];return ha(Bi(V)?Xr(V):[V],lr(p,1))}var rC=Yi(function(l,p){return Tn(l)?Bu(l,lr(p,1,Tn,!0)):[]}),aC=Yi(function(l,p){var V=ka(p);return Tn(V)&&(V=t),Tn(l)?Bu(l,lr(p,1,Tn,!0),fi(V,2)):[]}),oC=Yi(function(l,p){var V=ka(p);return Tn(V)&&(V=t),Tn(l)?Bu(l,lr(p,1,Tn,!0),t,V):[]});function lC(l,p,V){var M=l==null?0:l.length;return M?(p=V||p===t?1:Oi(p),Ia(l,p<0?0:p,M)):[]}function hC(l,p,V){var M=l==null?0:l.length;return M?(p=V||p===t?1:Oi(p),p=M-p,Ia(l,0,p<0?0:p)):[]}function uC(l,p){return l&&l.length?dd(l,fi(p,3),!0,!0):[]}function cC(l,p){return l&&l.length?dd(l,fi(p,3),!0):[]}function dC(l,p,V,M){var ie=l==null?0:l.length;return ie?(V&&typeof V!="number"&&Rr(l,p,V)&&(V=0,M=ie),nS(l,p,V,M)):[]}function S_(l,p,V){var M=l==null?0:l.length;if(!M)return-1;var ie=V==null?0:Oi(V);return ie<0&&(ie=Gn(M+ie,0)),rl(l,fi(p,3),ie)}function C_(l,p,V){var M=l==null?0:l.length;if(!M)return-1;var ie=M-1;return V!==t&&(ie=Oi(V),ie=V<0?Gn(M+ie,0):wr(ie,M-1)),rl(l,fi(p,3),ie,!0)}function P_(l){var p=l==null?0:l.length;return p?lr(l,1):[]}function fC(l){var p=l==null?0:l.length;return p?lr(l,Zt):[]}function pC(l,p){var V=l==null?0:l.length;return V?(p=p===t?1:Oi(p),lr(l,p)):[]}function gC(l){for(var p=-1,V=l==null?0:l.length,M={};++p<V;){var ie=l[p];M[ie[0]]=ie[1]}return M}function E_(l){return l&&l.length?l[0]:t}function mC(l,p,V){var M=l==null?0:l.length;if(!M)return-1;var ie=V==null?0:Oi(V);return ie<0&&(ie=Gn(M+ie,0)),Wr(l,p,ie)}function yC(l){var p=l==null?0:l.length;return p?Ia(l,0,-1):[]}var _C=Yi(function(l){var p=Is(l,Rp);return p.length&&p[0]===l[0]?Pp(p):[]}),AC=Yi(function(l){var p=ka(l),V=Is(l,Rp);return p===ka(V)?p=t:V.pop(),V.length&&V[0]===l[0]?Pp(V,fi(p,2)):[]}),bC=Yi(function(l){var p=ka(l),V=Is(l,Rp);return p=typeof p=="function"?p:t,p&&V.pop(),V.length&&V[0]===l[0]?Pp(V,t,p):[]});function vC(l,p){return l==null?"":yw.call(l,p)}function ka(l){var p=l==null?0:l.length;return p?l[p-1]:t}function VC(l,p,V){var M=l==null?0:l.length;if(!M)return-1;var ie=M;return V!==t&&(ie=Oi(V),ie=ie<0?Gn(M+ie,0):wr(ie,M-1)),p===p?Oe(l,p,ie):rl(l,Bo,ie,!0)}function wC(l,p){return l&&l.length?Oy(l,Oi(p)):t}var SC=Yi(D_);function D_(l,p){return l&&l.length&&p&&p.length?xp(l,p):l}function CC(l,p,V){return l&&l.length&&p&&p.length?xp(l,p,fi(V,2)):l}function PC(l,p,V){return l&&l.length&&p&&p.length?xp(l,p,t,V):l}var EC=Yo(function(l,p){var V=l==null?0:l.length,M=Vp(l,p);return zy(l,Is(p,function(ie){return Wo(ie,V)?+ie:ie}).sort(Zy)),M});function DC(l,p){var V=[];if(!(l&&l.length))return V;var M=-1,ie=[],ce=l.length;for(p=fi(p,3);++M<ce;){var Ve=l[M];p(Ve,M,l)&&(V.push(Ve),ie.push(M))}return zy(l,ie),V}function Qp(l){return l==null?l:vw.call(l)}function TC(l,p,V){var M=l==null?0:l.length;return M?(V&&typeof V!="number"&&Rr(l,p,V)?(p=0,V=M):(p=p==null?0:Oi(p),V=V===t?M:Oi(V)),Ia(l,p,V)):[]}function xC(l,p){return cd(l,p)}function IC(l,p,V){return Lp(l,p,fi(V,2))}function kC(l,p){var V=l==null?0:l.length;if(V){var M=cd(l,p);if(M<V&&Xa(l[M],p))return M}return-1}function LC(l,p){return cd(l,p,!0)}function NC(l,p,V){return Lp(l,p,fi(V,2),!0)}function BC(l,p){var V=l==null?0:l.length;if(V){var M=cd(l,p,!0)-1;if(Xa(l[M],p))return M}return-1}function RC(l){return l&&l.length?Ky(l):[]}function MC(l,p){return l&&l.length?Ky(l,fi(p,2)):[]}function OC(l){var p=l==null?0:l.length;return p?Ia(l,1,p):[]}function qC(l,p,V){return l&&l.length?(p=V||p===t?1:Oi(p),Ia(l,0,p<0?0:p)):[]}function FC(l,p,V){var M=l==null?0:l.length;return M?(p=V||p===t?1:Oi(p),p=M-p,Ia(l,p<0?0:p,M)):[]}function zC(l,p){return l&&l.length?dd(l,fi(p,3),!1,!0):[]}function HC(l,p){return l&&l.length?dd(l,fi(p,3)):[]}var KC=Yi(function(l){return hl(lr(l,1,Tn,!0))}),UC=Yi(function(l){var p=ka(l);return Tn(p)&&(p=t),hl(lr(l,1,Tn,!0),fi(p,2))}),YC=Yi(function(l){var p=ka(l);return p=typeof p=="function"?p:t,hl(lr(l,1,Tn,!0),t,p)});function WC(l){return l&&l.length?hl(l):[]}function GC(l,p){return l&&l.length?hl(l,fi(p,2)):[]}function XC(l,p){return p=typeof p=="function"?p:t,l&&l.length?hl(l,t,p):[]}function Zp(l){if(!(l&&l.length))return[];var p=0;return l=Yr(l,function(V){if(Tn(V))return p=Gn(V.length,p),!0}),Ro(p,function(V){return Is(l,al(V))})}function T_(l,p){if(!(l&&l.length))return[];var V=Zp(l);return p==null?V:Is(V,function(M){return xi(p,t,M)})}var jC=Yi(function(l,p){return Tn(l)?Bu(l,p):[]}),QC=Yi(function(l){return Bp(Yr(l,Tn))}),ZC=Yi(function(l){var p=ka(l);return Tn(p)&&(p=t),Bp(Yr(l,Tn),fi(p,2))}),JC=Yi(function(l){var p=ka(l);return p=typeof p=="function"?p:t,Bp(Yr(l,Tn),t,p)}),$C=Yi(Zp);function eP(l,p){return Gy(l||[],p||[],Nu)}function tP(l,p){return Gy(l||[],p||[],Ou)}var iP=Yi(function(l){var p=l.length,V=p>1?l[p-1]:t;return V=typeof V=="function"?(l.pop(),V):t,T_(l,V)});function x_(l){var p=oe(l);return p.__chain__=!0,p}function sP(l,p){return p(l),l}function vd(l,p){return p(l)}var nP=Yo(function(l){var p=l.length,V=p?l[0]:0,M=this.__wrapped__,ie=function(ce){return Vp(ce,l)};return p>1||this.__actions__.length||!(M instanceof as)||!Wo(V)?this.thru(ie):(M=M.slice(V,+V+(p?1:0)),M.__actions__.push({func:vd,args:[ie],thisArg:t}),new Ta(M,this.__chain__).thru(function(ce){return p&&!ce.length&&ce.push(t),ce}))});function rP(){return x_(this)}function aP(){return new Ta(this.value(),this.__chain__)}function oP(){this.__values__===t&&(this.__values__=U_(this.value()));var l=this.__index__>=this.__values__.length,p=l?t:this.__values__[this.__index__++];return{done:l,value:p}}function lP(){return this}function hP(l){for(var p,V=this;V instanceof ad;){var M=w_(V);M.__index__=0,M.__values__=t,p?ie.__wrapped__=M:p=M;var ie=M;V=V.__wrapped__}return ie.__wrapped__=l,p}function uP(){var l=this.__wrapped__;if(l instanceof as){var p=l;return this.__actions__.length&&(p=new as(this)),p=p.reverse(),p.__actions__.push({func:vd,args:[Qp],thisArg:t}),new Ta(p,this.__chain__)}return this.thru(Qp)}function cP(){return Wy(this.__wrapped__,this.__actions__)}var dP=fd(function(l,p,V){ks.call(l,V)?++l[V]:Ko(l,V,1)});function fP(l,p,V){var M=Bi(l)?Ca:sS;return V&&Rr(l,p,V)&&(p=t),M(l,fi(p,3))}function pP(l,p){var V=Bi(l)?Yr:Ty;return V(l,fi(p,3))}var gP=s_(S_),mP=s_(C_);function yP(l,p){return lr(Vd(l,p),1)}function _P(l,p){return lr(Vd(l,p),Zt)}function AP(l,p,V){return V=V===t?1:Oi(V),lr(Vd(l,p),V)}function I_(l,p){var V=Bi(l)?$s:ll;return V(l,fi(p,3))}function k_(l,p){var V=Bi(l)?Ya:Dy;return V(l,fi(p,3))}var bP=fd(function(l,p,V){ks.call(l,V)?l[V].push(p):Ko(l,V,[p])});function vP(l,p,V,M){l=jr(l)?l:Eh(l),V=V&&!M?Oi(V):0;var ie=l.length;return V<0&&(V=Gn(ie+V,0)),Ed(l)?V<=ie&&l.indexOf(p,V)>-1:!!ie&&Wr(l,p,V)>-1}var VP=Yi(function(l,p,V){var M=-1,ie=typeof p=="function",ce=jr(l)?He(l.length):[];return ll(l,function(Ve){ce[++M]=ie?xi(p,Ve,V):Ru(Ve,p,V)}),ce}),wP=fd(function(l,p,V){Ko(l,V,p)});function Vd(l,p){var V=Bi(l)?Is:By;return V(l,fi(p,3))}function SP(l,p,V,M){return l==null?[]:(Bi(p)||(p=p==null?[]:[p]),V=M?t:V,Bi(V)||(V=V==null?[]:[V]),qy(l,p,V))}var CP=fd(function(l,p,V){l[V?0:1].push(p)},function(){return[[],[]]});function PP(l,p,V){var M=Bi(l)?No:Gi,ie=arguments.length<3;return M(l,fi(p,4),V,ie,ll)}function EP(l,p,V){var M=Bi(l)?Eu:Gi,ie=arguments.length<3;return M(l,fi(p,4),V,ie,Dy)}function DP(l,p){var V=Bi(l)?Yr:Ty;return V(l,Cd(fi(p,3)))}function TP(l){var p=Bi(l)?Sy:vS;return p(l)}function xP(l,p,V){(V?Rr(l,p,V):p===t)?p=1:p=Oi(p);var M=Bi(l)?Jw:VS;return M(l,p)}function IP(l){var p=Bi(l)?$w:SS;return p(l)}function kP(l){if(l==null)return 0;if(jr(l))return Ed(l)?Ze(l):l.length;var p=Sr(l);return p==ns||p==yt?l.size:Dp(l).length}function LP(l,p,V){var M=Bi(l)?ro:CS;return V&&Rr(l,p,V)&&(p=t),M(l,fi(p,3))}var NP=Yi(function(l,p){if(l==null)return[];var V=p.length;return V>1&&Rr(l,p[0],p[1])?p=[]:V>2&&Rr(p[0],p[1],p[2])&&(p=[p[0]]),qy(l,lr(p,1),[])}),wd=pw||function(){return Rs.Date.now()};function BP(l,p){if(typeof p!="function")throw new ki(o);return l=Oi(l),function(){if(--l<1)return p.apply(this,arguments)}}function L_(l,p,V){return p=V?t:p,p=l&&p==null?l.length:p,Uo(l,Ie,t,t,t,t,p)}function N_(l,p){var V;if(typeof p!="function")throw new ki(o);return l=Oi(l),function(){return--l>0&&(V=p.apply(this,arguments)),l<=1&&(p=t),V}}var Jp=Yi(function(l,p,V){var M=z;if(V.length){var ie=Nr(V,Ch(Jp));M|=pe}return Uo(l,M,p,V,ie)}),B_=Yi(function(l,p,V){var M=z|G;if(V.length){var ie=Nr(V,Ch(B_));M|=pe}return Uo(p,M,l,V,ie)});function R_(l,p,V){p=V?t:p;var M=Uo(l,ne,t,t,t,t,t,p);return M.placeholder=R_.placeholder,M}function M_(l,p,V){p=V?t:p;var M=Uo(l,ae,t,t,t,t,t,p);return M.placeholder=M_.placeholder,M}function O_(l,p,V){var M,ie,ce,Ve,ke,Ke,ft=0,pt=!1,Vt=!1,Ft=!0;if(typeof l!="function")throw new ki(o);p=La(p)||0,dn(V)&&(pt=!!V.leading,Vt="maxWait"in V,ce=Vt?Gn(La(V.maxWait)||0,p):ce,Ft="trailing"in V?!!V.trailing:Ft);function ti(xn){var ja=M,jo=ie;return M=ie=t,ft=xn,Ve=l.apply(jo,ja),Ve}function mi(xn){return ft=xn,ke=zu($i,p),pt?ti(xn):Ve}function zi(xn){var ja=xn-Ke,jo=xn-ft,sA=p-ja;return Vt?wr(sA,ce-jo):sA}function yi(xn){var ja=xn-Ke,jo=xn-ft;return Ke===t||ja>=p||ja<0||Vt&&jo>=ce}function $i(){var xn=wd();if(yi(xn))return us(xn);ke=zu($i,zi(xn))}function us(xn){return ke=t,Ft&&M?ti(xn):(M=ie=t,Ve)}function da(){ke!==t&&Xy(ke),ft=0,M=Ke=ie=ke=t}function Mr(){return ke===t?Ve:us(wd())}function fa(){var xn=wd(),ja=yi(xn);if(M=arguments,ie=this,Ke=xn,ja){if(ke===t)return mi(Ke);if(Vt)return Xy(ke),ke=zu($i,p),ti(Ke)}return ke===t&&(ke=zu($i,p)),Ve}return fa.cancel=da,fa.flush=Mr,fa}var RP=Yi(function(l,p){return Ey(l,1,p)}),MP=Yi(function(l,p,V){return Ey(l,La(p)||0,V)});function OP(l){return Uo(l,Ee)}function Sd(l,p){if(typeof l!="function"||p!=null&&typeof p!="function")throw new ki(o);var V=function(){var M=arguments,ie=p?p.apply(this,M):M[0],ce=V.cache;if(ce.has(ie))return ce.get(ie);var Ve=l.apply(this,M);return V.cache=ce.set(ie,Ve)||ce,Ve};return V.cache=new(Sd.Cache||Ho),V}Sd.Cache=Ho;function Cd(l){if(typeof l!="function")throw new ki(o);return function(){var p=arguments;switch(p.length){case 0:return!l.call(this);case 1:return!l.call(this,p[0]);case 2:return!l.call(this,p[0],p[1]);case 3:return!l.call(this,p[0],p[1],p[2])}return!l.apply(this,p)}}function qP(l){return N_(2,l)}var FP=PS(function(l,p){p=p.length==1&&Bi(p[0])?Is(p[0],Yt(fi())):Is(lr(p,1),Yt(fi()));var V=p.length;return Yi(function(M){for(var ie=-1,ce=wr(M.length,V);++ie<ce;)M[ie]=p[ie].call(this,M[ie]);return xi(l,this,M)})}),$p=Yi(function(l,p){var V=Nr(p,Ch($p));return Uo(l,pe,t,p,V)}),q_=Yi(function(l,p){var V=Nr(p,Ch(q_));return Uo(l,N,t,p,V)}),zP=Yo(function(l,p){return Uo(l,$e,t,t,t,p)});function HP(l,p){if(typeof l!="function")throw new ki(o);return p=p===t?p:Oi(p),Yi(l,p)}function KP(l,p){if(typeof l!="function")throw new ki(o);return p=p==null?0:Gn(Oi(p),0),Yi(function(V){var M=V[p],ie=cl(V,0,p);return M&&ha(ie,M),xi(l,this,ie)})}function UP(l,p,V){var M=!0,ie=!0;if(typeof l!="function")throw new ki(o);return dn(V)&&(M="leading"in V?!!V.leading:M,ie="trailing"in V?!!V.trailing:ie),O_(l,p,{leading:M,maxWait:p,trailing:ie})}function YP(l){return L_(l,1)}function WP(l,p){return $p(Mp(p),l)}function GP(){if(!arguments.length)return[];var l=arguments[0];return Bi(l)?l:[l]}function XP(l){return xa(l,x)}function jP(l,p){return p=typeof p=="function"?p:t,xa(l,x,p)}function QP(l){return xa(l,T|x)}function ZP(l,p){return p=typeof p=="function"?p:t,xa(l,T|x,p)}function JP(l,p){return p==null||Py(l,p,er(p))}function Xa(l,p){return l===p||l!==l&&p!==p}var $P=yd(Cp),eE=yd(function(l,p){return l>=p}),kl=ky(function(){return arguments}())?ky:function(l){return Vn(l)&&ks.call(l,"callee")&&!_y.call(l,"callee")},Bi=He.isArray,tE=Sa?Yt(Sa):hS;function jr(l){return l!=null&&Pd(l.length)&&!Go(l)}function Tn(l){return Vn(l)&&jr(l)}function iE(l){return l===!0||l===!1||Vn(l)&&Br(l)==bs}var dl=mw||ug,sE=Mn?Yt(Mn):uS;function nE(l){return Vn(l)&&l.nodeType===1&&!Hu(l)}function rE(l){if(l==null)return!0;if(jr(l)&&(Bi(l)||typeof l=="string"||typeof l.splice=="function"||dl(l)||Ph(l)||kl(l)))return!l.length;var p=Sr(l);if(p==ns||p==yt)return!l.size;if(Fu(l))return!Dp(l).length;for(var V in l)if(ks.call(l,V))return!1;return!0}function aE(l,p){return Mu(l,p)}function oE(l,p,V){V=typeof V=="function"?V:t;var M=V?V(l,p):t;return M===t?Mu(l,p,t,V):!!M}function eg(l){if(!Vn(l))return!1;var p=Br(l);return p==Pt||p==Ei||typeof l.message=="string"&&typeof l.name=="string"&&!Hu(l)}function lE(l){return typeof l=="number"&&by(l)}function Go(l){if(!dn(l))return!1;var p=Br(l);return p==Hn||p==Zs||p==Ji||p==we}function F_(l){return typeof l=="number"&&l==Oi(l)}function Pd(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=At}function dn(l){var p=typeof l;return l!=null&&(p=="object"||p=="function")}function Vn(l){return l!=null&&typeof l=="object"}var z_=xr?Yt(xr):dS;function hE(l,p){return l===p||Ep(l,p,Up(p))}function uE(l,p,V){return V=typeof V=="function"?V:t,Ep(l,p,Up(p),V)}function cE(l){return H_(l)&&l!=+l}function dE(l){if(jS(l))throw new Ae(r);return Ly(l)}function fE(l){return l===null}function pE(l){return l==null}function H_(l){return typeof l=="number"||Vn(l)&&Br(l)==on}function Hu(l){if(!Vn(l)||Br(l)!=fe)return!1;var p=$c(l);if(p===null)return!0;var V=ks.call(p,"constructor")&&p.constructor;return typeof V=="function"&&V instanceof V&&Ah.call(V)==uw}var tg=Ur?Yt(Ur):fS;function gE(l){return F_(l)&&l>=-9007199254740991&&l<=At}var K_=Yn?Yt(Yn):pS;function Ed(l){return typeof l=="string"||!Bi(l)&&Vn(l)&&Br(l)==tt}function ca(l){return typeof l=="symbol"||Vn(l)&&Br(l)==lt}var Ph=On?Yt(On):gS;function mE(l){return l===t}function yE(l){return Vn(l)&&Sr(l)==Jt}function _E(l){return Vn(l)&&Br(l)==a}var AE=yd(Tp),bE=yd(function(l,p){return l<=p});function U_(l){if(!l)return[];if(jr(l))return Ed(l)?Ue(l):Xr(l);if(Tu&&l[Tu])return Mo(l[Tu]());var p=Sr(l),V=p==ns?Gr:p==yt?Oo:Eh;return V(l)}function Xo(l){if(!l)return l===0?l:0;if(l=La(l),l===Zt||l===-1/0){var p=l<0?-1:1;return p*Re}return l===l?l:0}function Oi(l){var p=Xo(l),V=p%1;return p===p?V?p-V:p:0}function Y_(l){return l?Dl(Oi(l),0,Et):0}function La(l){if(typeof l=="number")return l;if(ca(l))return at;if(dn(l)){var p=typeof l.valueOf=="function"?l.valueOf():l;l=dn(p)?p+"":p}if(typeof l!="string")return l===0?l:+l;l=Lr(l);var V=et.test(l);return V||It.test(l)?Di(l.slice(2),V?2:8):Mt.test(l)?at:+l}function W_(l){return go(l,Qr(l))}function vE(l){return l?Dl(Oi(l),-9007199254740991,At):l===0?l:0}function Es(l){return l==null?"":ua(l)}var VE=wh(function(l,p){if(Fu(p)||jr(p)){go(p,er(p),l);return}for(var V in p)ks.call(p,V)&&Nu(l,V,p[V])}),G_=wh(function(l,p){go(p,Qr(p),l)}),Dd=wh(function(l,p,V,M){go(p,Qr(p),l,M)}),wE=wh(function(l,p,V,M){go(p,er(p),l,M)}),SE=Yo(Vp);function CE(l,p){var V=Vh(l);return p==null?V:Cy(V,p)}var PE=Yi(function(l,p){l=Bt(l);var V=-1,M=p.length,ie=M>2?p[2]:t;for(ie&&Rr(p[0],p[1],ie)&&(M=1);++V<M;)for(var ce=p[V],Ve=Qr(ce),ke=-1,Ke=Ve.length;++ke<Ke;){var ft=Ve[ke],pt=l[ft];(pt===t||Xa(pt,fo[ft])&&!ks.call(l,ft))&&(l[ft]=ce[ft])}return l}),EE=Yi(function(l){return l.push(t,u_),xi(X_,t,l)});function DE(l,p){return ao(l,fi(p,3),po)}function TE(l,p){return ao(l,fi(p,3),Sp)}function xE(l,p){return l==null?l:wp(l,fi(p,3),Qr)}function IE(l,p){return l==null?l:xy(l,fi(p,3),Qr)}function kE(l,p){return l&&po(l,fi(p,3))}function LE(l,p){return l&&Sp(l,fi(p,3))}function NE(l){return l==null?[]:hd(l,er(l))}function BE(l){return l==null?[]:hd(l,Qr(l))}function ig(l,p,V){var M=l==null?t:Tl(l,p);return M===t?V:M}function RE(l,p){return l!=null&&f_(l,p,rS)}function sg(l,p){return l!=null&&f_(l,p,aS)}var ME=r_(function(l,p,V){p!=null&&typeof p.toString!="function"&&(p=Qc.call(p)),l[p]=V},rg(Zr)),OE=r_(function(l,p,V){p!=null&&typeof p.toString!="function"&&(p=Qc.call(p)),ks.call(l,p)?l[p].push(V):l[p]=[V]},fi),qE=Yi(Ru);function er(l){return jr(l)?wy(l):Dp(l)}function Qr(l){return jr(l)?wy(l,!0):mS(l)}function FE(l,p){var V={};return p=fi(p,3),po(l,function(M,ie,ce){Ko(V,p(M,ie,ce),M)}),V}function zE(l,p){var V={};return p=fi(p,3),po(l,function(M,ie,ce){Ko(V,ie,p(M,ie,ce))}),V}var HE=wh(function(l,p,V){ud(l,p,V)}),X_=wh(function(l,p,V,M){ud(l,p,V,M)}),KE=Yo(function(l,p){var V={};if(l==null)return V;var M=!1;p=Is(p,function(ce){return ce=ul(ce,l),M||(M=ce.length>1),ce}),go(l,Hp(l),V),M&&(V=xa(V,T|L|x,MS));for(var ie=p.length;ie--;)Np(V,p[ie]);return V});function UE(l,p){return j_(l,Cd(fi(p)))}var YE=Yo(function(l,p){return l==null?{}:_S(l,p)});function j_(l,p){if(l==null)return{};var V=Is(Hp(l),function(M){return[M]});return p=fi(p),Fy(l,V,function(M,ie){return p(M,ie[0])})}function WE(l,p,V){p=ul(p,l);var M=-1,ie=p.length;for(ie||(ie=1,l=t);++M<ie;){var ce=l==null?t:l[mo(p[M])];ce===t&&(M=ie,ce=V),l=Go(ce)?ce.call(l):ce}return l}function GE(l,p,V){return l==null?l:Ou(l,p,V)}function XE(l,p,V,M){return M=typeof M=="function"?M:t,l==null?l:Ou(l,p,V,M)}var Q_=l_(er),Z_=l_(Qr);function jE(l,p,V){var M=Bi(l),ie=M||dl(l)||Ph(l);if(p=fi(p,4),V==null){var ce=l&&l.constructor;ie?V=M?new ce:[]:dn(l)?V=Go(ce)?Vh($c(l)):{}:V={}}return(ie?$s:po)(l,function(Ve,ke,Ke){return p(V,Ve,ke,Ke)}),V}function QE(l,p){return l==null?!0:Np(l,p)}function ZE(l,p,V){return l==null?l:Yy(l,p,Mp(V))}function JE(l,p,V,M){return M=typeof M=="function"?M:t,l==null?l:Yy(l,p,Mp(V),M)}function Eh(l){return l==null?[]:$n(l,er(l))}function $E(l){return l==null?[]:$n(l,Qr(l))}function eD(l,p,V){return V===t&&(V=p,p=t),V!==t&&(V=La(V),V=V===V?V:0),p!==t&&(p=La(p),p=p===p?p:0),Dl(La(l),p,V)}function tD(l,p,V){return p=Xo(p),V===t?(V=p,p=0):V=Xo(V),l=La(l),oS(l,p,V)}function iD(l,p,V){if(V&&typeof V!="boolean"&&Rr(l,p,V)&&(p=V=t),V===t&&(typeof p=="boolean"?(V=p,p=t):typeof l=="boolean"&&(V=l,l=t)),l===t&&p===t?(l=0,p=1):(l=Xo(l),p===t?(p=l,l=0):p=Xo(p)),l>p){var M=l;l=p,p=M}if(V||l%1||p%1){var ie=vy();return wr(l+ie*(p-l+ni("1e-"+((ie+"").length-1))),p)}return Ip(l,p)}var sD=Sh(function(l,p,V){return p=p.toLowerCase(),l+(V?J_(p):p)});function J_(l){return ng(Es(l).toLowerCase())}function $_(l){return l=Es(l),l&&l.replace(Ot,Wn).replace(v,"")}function nD(l,p,V){l=Es(l),p=ua(p);var M=l.length;V=V===t?M:Dl(Oi(V),0,M);var ie=V;return V-=p.length,V>=0&&l.slice(V,ie)==p}function rD(l){return l=Es(l),l&&W.test(l)?l.replace(Z,ho):l}function aD(l){return l=Es(l),l&&be.test(l)?l.replace(me,"\\$&"):l}var oD=Sh(function(l,p,V){return l+(V?"-":"")+p.toLowerCase()}),lD=Sh(function(l,p,V){return l+(V?" ":"")+p.toLowerCase()}),hD=i_("toLowerCase");function uD(l,p,V){l=Es(l),p=Oi(p);var M=p?Ze(l):0;if(!p||M>=p)return l;var ie=(p-M)/2;return md(sd(ie),V)+l+md(id(ie),V)}function cD(l,p,V){l=Es(l),p=Oi(p);var M=p?Ze(l):0;return p&&M<p?l+md(p-M,V):l}function dD(l,p,V){l=Es(l),p=Oi(p);var M=p?Ze(l):0;return p&&M<p?md(p-M,V)+l:l}function fD(l,p,V){return V||p==null?p=0:p&&(p=+p),bw(Es(l).replace(Se,""),p||0)}function pD(l,p,V){return(V?Rr(l,p,V):p===t)?p=1:p=Oi(p),kp(Es(l),p)}function gD(){var l=arguments,p=Es(l[0]);return l.length<3?p:p.replace(l[1],l[2])}var mD=Sh(function(l,p,V){return l+(V?"_":"")+p.toLowerCase()});function yD(l,p,V){return V&&typeof V!="number"&&Rr(l,p,V)&&(p=V=t),V=V===t?Et:V>>>0,V?(l=Es(l),l&&(typeof p=="string"||p!=null&&!tg(p))&&(p=ua(p),!p&&Da(l))?cl(Ue(l),0,V):l.split(p,V)):[]}var _D=Sh(function(l,p,V){return l+(V?" ":"")+ng(p)});function AD(l,p,V){return l=Es(l),V=V==null?0:Dl(Oi(V),0,l.length),p=ua(p),l.slice(V,V+p.length)==p}function bD(l,p,V){var M=oe.templateSettings;V&&Rr(l,p,V)&&(p=t),l=Es(l),p=Dd({},p,M,h_);var ie=Dd({},p.imports,M.imports,h_),ce=er(ie),Ve=$n(ie,ce),ke,Ke,ft=0,pt=p.interpolate||Qt,Vt="__p += '",Ft=ri((p.escape||Qt).source+"|"+pt.source+"|"+(pt===te?wt:Qt).source+"|"+(p.evaluate||Qt).source+"|$","g"),ti="//# sourceURL="+(ks.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xe+"]")+`
`;l.replace(Ft,function(yi,$i,us,da,Mr,fa){return us||(us=da),Vt+=l.slice(ft,fa).replace($t,_h),$i&&(ke=!0,Vt+=`' +
__e(`+$i+`) +
'`),Mr&&(Ke=!0,Vt+=`';
`+Mr+`;
__p += '`),us&&(Vt+=`' +
((__t = (`+us+`)) == null ? '' : __t) +
'`),ft=fa+yi.length,yi}),Vt+=`';
`;var mi=ks.call(p,"variable")&&p.variable;if(!mi)Vt=`with (obj) {
`+Vt+`
}
`;else if(We.test(mi))throw new Ae(d);Vt=(Ke?Vt.replace(F,""):Vt).replace(q,"$1").replace($,"$1;"),Vt="function("+(mi||"obj")+`) {
`+(mi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ke?", __e = _.escape":"")+(Ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Vt+`return __p
}`;var zi=tA(function(){return qe(ce,ti+"return "+Vt).apply(t,Ve)});if(zi.source=Vt,eg(zi))throw zi;return zi}function vD(l){return Es(l).toLowerCase()}function VD(l){return Es(l).toUpperCase()}function wD(l,p,V){if(l=Es(l),l&&(V||p===t))return Lr(l);if(!l||!(p=ua(p)))return l;var M=Ue(l),ie=Ue(p),ce=lo(M,ie),Ve=Ea(M,ie)+1;return cl(M,ce,Ve).join("")}function SD(l,p,V){if(l=Es(l),l&&(V||p===t))return l.slice(0,ht(l)+1);if(!l||!(p=ua(p)))return l;var M=Ue(l),ie=Ea(M,Ue(p))+1;return cl(M,0,ie).join("")}function CD(l,p,V){if(l=Es(l),l&&(V||p===t))return l.replace(Se,"");if(!l||!(p=ua(p)))return l;var M=Ue(l),ie=lo(M,Ue(p));return cl(M,ie).join("")}function PD(l,p){var V=Je,M=Ge;if(dn(p)){var ie="separator"in p?p.separator:ie;V="length"in p?Oi(p.length):V,M="omission"in p?ua(p.omission):M}l=Es(l);var ce=l.length;if(Da(l)){var Ve=Ue(l);ce=Ve.length}if(V>=ce)return l;var ke=V-Ze(M);if(ke<1)return M;var Ke=Ve?cl(Ve,0,ke).join(""):l.slice(0,ke);if(ie===t)return Ke+M;if(Ve&&(ke+=Ke.length-ke),tg(ie)){if(l.slice(ke).search(ie)){var ft,pt=Ke;for(ie.global||(ie=ri(ie.source,Es(Dt.exec(ie))+"g")),ie.lastIndex=0;ft=ie.exec(pt);)var Vt=ft.index;Ke=Ke.slice(0,Vt===t?ke:Vt)}}else if(l.indexOf(ua(ie),ke)!=ke){var Ft=Ke.lastIndexOf(ie);Ft>-1&&(Ke=Ke.slice(0,Ft))}return Ke+M}function ED(l){return l=Es(l),l&&K.test(l)?l.replace(X,gt):l}var DD=Sh(function(l,p,V){return l+(V?" ":"")+p.toUpperCase()}),ng=i_("toUpperCase");function eA(l,p,V){return l=Es(l),p=V?t:p,p===t?or(l)?wi(l):yh(l):l.match(p)||[]}var tA=Yi(function(l,p){try{return xi(l,t,p)}catch(V){return eg(V)?V:new Ae(V)}}),TD=Yo(function(l,p){return $s(p,function(V){V=mo(V),Ko(l,V,Jp(l[V],l))}),l});function xD(l){var p=l==null?0:l.length,V=fi();return l=p?Is(l,function(M){if(typeof M[1]!="function")throw new ki(o);return[V(M[0]),M[1]]}):[],Yi(function(M){for(var ie=-1;++ie<p;){var ce=l[ie];if(xi(ce[0],this,M))return xi(ce[1],this,M)}})}function ID(l){return iS(xa(l,T))}function rg(l){return function(){return l}}function kD(l,p){return l==null||l!==l?p:l}var LD=n_(),ND=n_(!0);function Zr(l){return l}function ag(l){return Ny(typeof l=="function"?l:xa(l,T))}function BD(l){return Ry(xa(l,T))}function RD(l,p){return My(l,xa(p,T))}var MD=Yi(function(l,p){return function(V){return Ru(V,l,p)}}),OD=Yi(function(l,p){return function(V){return Ru(l,V,p)}});function og(l,p,V){var M=er(p),ie=hd(p,M);V==null&&!(dn(p)&&(ie.length||!M.length))&&(V=p,p=l,l=this,ie=hd(p,er(p)));var ce=!(dn(V)&&"chain"in V)||!!V.chain,Ve=Go(l);return $s(ie,function(ke){var Ke=p[ke];l[ke]=Ke,Ve&&(l.prototype[ke]=function(){var ft=this.__chain__;if(ce||ft){var pt=l(this.__wrapped__),Vt=pt.__actions__=Xr(this.__actions__);return Vt.push({func:Ke,args:arguments,thisArg:l}),pt.__chain__=ft,pt}return Ke.apply(l,ha([this.value()],arguments))})}),l}function qD(){return Rs._===this&&(Rs._=cw),this}function lg(){}function FD(l){return l=Oi(l),Yi(function(p){return Oy(p,l)})}var zD=qp(Is),HD=qp(Ca),KD=qp(ro);function iA(l){return Wp(l)?al(mo(l)):AS(l)}function UD(l){return function(p){return l==null?t:Tl(l,p)}}var YD=a_(),WD=a_(!0);function hg(){return[]}function ug(){return!1}function GD(){return{}}function XD(){return""}function jD(){return!0}function QD(l,p){if(l=Oi(l),l<1||l>At)return[];var V=Et,M=wr(l,Et);p=fi(p),l-=Et;for(var ie=Ro(M,p);++V<l;)p(V);return ie}function ZD(l){return Bi(l)?Is(l,mo):ca(l)?[l]:Xr(V_(Es(l)))}function JD(l){var p=++hw;return Es(l)+p}var $D=gd(function(l,p){return l+p},0),eT=Fp("ceil"),tT=gd(function(l,p){return l/p},1),iT=Fp("floor");function sT(l){return l&&l.length?ld(l,Zr,Cp):t}function nT(l,p){return l&&l.length?ld(l,fi(p,2),Cp):t}function rT(l){return Ir(l,Zr)}function aT(l,p){return Ir(l,fi(p,2))}function oT(l){return l&&l.length?ld(l,Zr,Tp):t}function lT(l,p){return l&&l.length?ld(l,fi(p,2),Tp):t}var hT=gd(function(l,p){return l*p},1),uT=Fp("round"),cT=gd(function(l,p){return l-p},0);function dT(l){return l&&l.length?vr(l,Zr):0}function fT(l,p){return l&&l.length?vr(l,fi(p,2)):0}return oe.after=BP,oe.ary=L_,oe.assign=VE,oe.assignIn=G_,oe.assignInWith=Dd,oe.assignWith=wE,oe.at=SE,oe.before=N_,oe.bind=Jp,oe.bindAll=TD,oe.bindKey=B_,oe.castArray=GP,oe.chain=x_,oe.chunk=iC,oe.compact=sC,oe.concat=nC,oe.cond=xD,oe.conforms=ID,oe.constant=rg,oe.countBy=dP,oe.create=CE,oe.curry=R_,oe.curryRight=M_,oe.debounce=O_,oe.defaults=PE,oe.defaultsDeep=EE,oe.defer=RP,oe.delay=MP,oe.difference=rC,oe.differenceBy=aC,oe.differenceWith=oC,oe.drop=lC,oe.dropRight=hC,oe.dropRightWhile=uC,oe.dropWhile=cC,oe.fill=dC,oe.filter=pP,oe.flatMap=yP,oe.flatMapDeep=_P,oe.flatMapDepth=AP,oe.flatten=P_,oe.flattenDeep=fC,oe.flattenDepth=pC,oe.flip=OP,oe.flow=LD,oe.flowRight=ND,oe.fromPairs=gC,oe.functions=NE,oe.functionsIn=BE,oe.groupBy=bP,oe.initial=yC,oe.intersection=_C,oe.intersectionBy=AC,oe.intersectionWith=bC,oe.invert=ME,oe.invertBy=OE,oe.invokeMap=VP,oe.iteratee=ag,oe.keyBy=wP,oe.keys=er,oe.keysIn=Qr,oe.map=Vd,oe.mapKeys=FE,oe.mapValues=zE,oe.matches=BD,oe.matchesProperty=RD,oe.memoize=Sd,oe.merge=HE,oe.mergeWith=X_,oe.method=MD,oe.methodOf=OD,oe.mixin=og,oe.negate=Cd,oe.nthArg=FD,oe.omit=KE,oe.omitBy=UE,oe.once=qP,oe.orderBy=SP,oe.over=zD,oe.overArgs=FP,oe.overEvery=HD,oe.overSome=KD,oe.partial=$p,oe.partialRight=q_,oe.partition=CP,oe.pick=YE,oe.pickBy=j_,oe.property=iA,oe.propertyOf=UD,oe.pull=SC,oe.pullAll=D_,oe.pullAllBy=CC,oe.pullAllWith=PC,oe.pullAt=EC,oe.range=YD,oe.rangeRight=WD,oe.rearg=zP,oe.reject=DP,oe.remove=DC,oe.rest=HP,oe.reverse=Qp,oe.sampleSize=xP,oe.set=GE,oe.setWith=XE,oe.shuffle=IP,oe.slice=TC,oe.sortBy=NP,oe.sortedUniq=RC,oe.sortedUniqBy=MC,oe.split=yD,oe.spread=KP,oe.tail=OC,oe.take=qC,oe.takeRight=FC,oe.takeRightWhile=zC,oe.takeWhile=HC,oe.tap=sP,oe.throttle=UP,oe.thru=vd,oe.toArray=U_,oe.toPairs=Q_,oe.toPairsIn=Z_,oe.toPath=ZD,oe.toPlainObject=W_,oe.transform=jE,oe.unary=YP,oe.union=KC,oe.unionBy=UC,oe.unionWith=YC,oe.uniq=WC,oe.uniqBy=GC,oe.uniqWith=XC,oe.unset=QE,oe.unzip=Zp,oe.unzipWith=T_,oe.update=ZE,oe.updateWith=JE,oe.values=Eh,oe.valuesIn=$E,oe.without=jC,oe.words=eA,oe.wrap=WP,oe.xor=QC,oe.xorBy=ZC,oe.xorWith=JC,oe.zip=$C,oe.zipObject=eP,oe.zipObjectDeep=tP,oe.zipWith=iP,oe.entries=Q_,oe.entriesIn=Z_,oe.extend=G_,oe.extendWith=Dd,og(oe,oe),oe.add=$D,oe.attempt=tA,oe.camelCase=sD,oe.capitalize=J_,oe.ceil=eT,oe.clamp=eD,oe.clone=XP,oe.cloneDeep=QP,oe.cloneDeepWith=ZP,oe.cloneWith=jP,oe.conformsTo=JP,oe.deburr=$_,oe.defaultTo=kD,oe.divide=tT,oe.endsWith=nD,oe.eq=Xa,oe.escape=rD,oe.escapeRegExp=aD,oe.every=fP,oe.find=gP,oe.findIndex=S_,oe.findKey=DE,oe.findLast=mP,oe.findLastIndex=C_,oe.findLastKey=TE,oe.floor=iT,oe.forEach=I_,oe.forEachRight=k_,oe.forIn=xE,oe.forInRight=IE,oe.forOwn=kE,oe.forOwnRight=LE,oe.get=ig,oe.gt=$P,oe.gte=eE,oe.has=RE,oe.hasIn=sg,oe.head=E_,oe.identity=Zr,oe.includes=vP,oe.indexOf=mC,oe.inRange=tD,oe.invoke=qE,oe.isArguments=kl,oe.isArray=Bi,oe.isArrayBuffer=tE,oe.isArrayLike=jr,oe.isArrayLikeObject=Tn,oe.isBoolean=iE,oe.isBuffer=dl,oe.isDate=sE,oe.isElement=nE,oe.isEmpty=rE,oe.isEqual=aE,oe.isEqualWith=oE,oe.isError=eg,oe.isFinite=lE,oe.isFunction=Go,oe.isInteger=F_,oe.isLength=Pd,oe.isMap=z_,oe.isMatch=hE,oe.isMatchWith=uE,oe.isNaN=cE,oe.isNative=dE,oe.isNil=pE,oe.isNull=fE,oe.isNumber=H_,oe.isObject=dn,oe.isObjectLike=Vn,oe.isPlainObject=Hu,oe.isRegExp=tg,oe.isSafeInteger=gE,oe.isSet=K_,oe.isString=Ed,oe.isSymbol=ca,oe.isTypedArray=Ph,oe.isUndefined=mE,oe.isWeakMap=yE,oe.isWeakSet=_E,oe.join=vC,oe.kebabCase=oD,oe.last=ka,oe.lastIndexOf=VC,oe.lowerCase=lD,oe.lowerFirst=hD,oe.lt=AE,oe.lte=bE,oe.max=sT,oe.maxBy=nT,oe.mean=rT,oe.meanBy=aT,oe.min=oT,oe.minBy=lT,oe.stubArray=hg,oe.stubFalse=ug,oe.stubObject=GD,oe.stubString=XD,oe.stubTrue=jD,oe.multiply=hT,oe.nth=wC,oe.noConflict=qD,oe.noop=lg,oe.now=wd,oe.pad=uD,oe.padEnd=cD,oe.padStart=dD,oe.parseInt=fD,oe.random=iD,oe.reduce=PP,oe.reduceRight=EP,oe.repeat=pD,oe.replace=gD,oe.result=WE,oe.round=uT,oe.runInContext=Te,oe.sample=TP,oe.size=kP,oe.snakeCase=mD,oe.some=LP,oe.sortedIndex=xC,oe.sortedIndexBy=IC,oe.sortedIndexOf=kC,oe.sortedLastIndex=LC,oe.sortedLastIndexBy=NC,oe.sortedLastIndexOf=BC,oe.startCase=_D,oe.startsWith=AD,oe.subtract=cT,oe.sum=dT,oe.sumBy=fT,oe.template=bD,oe.times=QD,oe.toFinite=Xo,oe.toInteger=Oi,oe.toLength=Y_,oe.toLower=vD,oe.toNumber=La,oe.toSafeInteger=vE,oe.toString=Es,oe.toUpper=VD,oe.trim=wD,oe.trimEnd=SD,oe.trimStart=CD,oe.truncate=PD,oe.unescape=ED,oe.uniqueId=JD,oe.upperCase=DD,oe.upperFirst=ng,oe.each=I_,oe.eachRight=k_,oe.first=E_,og(oe,function(){var l={};return po(oe,function(p,V){ks.call(oe.prototype,V)||(l[V]=p)}),l}(),{chain:!1}),oe.VERSION=i,$s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){oe[l].placeholder=oe}),$s(["drop","take"],function(l,p){as.prototype[l]=function(V){V=V===t?1:Gn(Oi(V),0);var M=this.__filtered__&&!p?new as(this):this.clone();return M.__filtered__?M.__takeCount__=wr(V,M.__takeCount__):M.__views__.push({size:wr(V,Et),type:l+(M.__dir__<0?"Right":"")}),M},as.prototype[l+"Right"]=function(V){return this.reverse()[l](V).reverse()}}),$s(["filter","map","takeWhile"],function(l,p){var V=p+1,M=V==nt||V==Qe;as.prototype[l]=function(ie){var ce=this.clone();return ce.__iteratees__.push({iteratee:fi(ie,3),type:V}),ce.__filtered__=ce.__filtered__||M,ce}}),$s(["head","last"],function(l,p){var V="take"+(p?"Right":"");as.prototype[l]=function(){return this[V](1).value()[0]}}),$s(["initial","tail"],function(l,p){var V="drop"+(p?"":"Right");as.prototype[l]=function(){return this.__filtered__?new as(this):this[V](1)}}),as.prototype.compact=function(){return this.filter(Zr)},as.prototype.find=function(l){return this.filter(l).head()},as.prototype.findLast=function(l){return this.reverse().find(l)},as.prototype.invokeMap=Yi(function(l,p){return typeof l=="function"?new as(this):this.map(function(V){return Ru(V,l,p)})}),as.prototype.reject=function(l){return this.filter(Cd(fi(l)))},as.prototype.slice=function(l,p){l=Oi(l);var V=this;return V.__filtered__&&(l>0||p<0)?new as(V):(l<0?V=V.takeRight(-l):l&&(V=V.drop(l)),p!==t&&(p=Oi(p),V=p<0?V.dropRight(-p):V.take(p-l)),V)},as.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},as.prototype.toArray=function(){return this.take(Et)},po(as.prototype,function(l,p){var V=/^(?:filter|find|map|reject)|While$/.test(p),M=/^(?:head|last)$/.test(p),ie=oe[M?"take"+(p=="last"?"Right":""):p],ce=M||/^find/.test(p);ie&&(oe.prototype[p]=function(){var Ve=this.__wrapped__,ke=M?[1]:arguments,Ke=Ve instanceof as,ft=ke[0],pt=Ke||Bi(Ve),Vt=function($i){var us=ie.apply(oe,ha([$i],ke));return M&&Ft?us[0]:us};pt&&V&&typeof ft=="function"&&ft.length!=1&&(Ke=pt=!1);var Ft=this.__chain__,ti=!!this.__actions__.length,mi=ce&&!Ft,zi=Ke&&!ti;if(!ce&&pt){Ve=zi?Ve:new as(this);var yi=l.apply(Ve,ke);return yi.__actions__.push({func:vd,args:[Vt],thisArg:t}),new Ta(yi,Ft)}return mi&&zi?l.apply(this,ke):(yi=this.thru(Vt),mi?M?yi.value()[0]:yi.value():yi)})}),$s(["pop","push","shift","sort","splice","unshift"],function(l){var p=Vr[l],V=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",M=/^(?:pop|shift)$/.test(l);oe.prototype[l]=function(){var ie=arguments;if(M&&!this.__chain__){var ce=this.value();return p.apply(Bi(ce)?ce:[],ie)}return this[V](function(Ve){return p.apply(Bi(Ve)?Ve:[],ie)})}}),po(as.prototype,function(l,p){var V=oe[p];if(V){var M=V.name+"";ks.call(vh,M)||(vh[M]=[]),vh[M].push({name:p,func:V})}}),vh[pd(t,G).name]=[{name:"wrapper",func:t}],as.prototype.clone=Ew,as.prototype.reverse=Dw,as.prototype.value=Tw,oe.prototype.at=nP,oe.prototype.chain=rP,oe.prototype.commit=aP,oe.prototype.next=oP,oe.prototype.plant=hP,oe.prototype.reverse=uP,oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=cP,oe.prototype.first=oe.prototype.head,Tu&&(oe.prototype[Tu]=lP),oe},ei=li();Ks?((Ks.exports=ei)._=ei,Ut._=ei):Rs._=ei}).call(pr)})(rf,rf.exports);var _T=rf.exports;const he=Mc(_T),p0=(n,e,t)=>{};self.phet=self.phet||{};self.phet.chipper=self.phet.chipper||{};const AT={aa:{locale3:"aar",englishName:"Afar",localizedName:"Qafar af",direction:"ltr"},ab:{locale3:"abk",englishName:"Abkhazian",localizedName:"аҧсуа бызшәа",direction:"ltr"},ac:{locale3:"ace",englishName:"Achinese",localizedName:"بهسا اچيه",direction:"rtl"},ad:{locale3:"ady",englishName:"Adyghe",localizedName:"Адыгабзэ",direction:"ltr"},af:{locale3:"afr",englishName:"Afrikaans",localizedName:"Afrikaans",direction:"ltr"},ag:{locale3:"anp",englishName:"Angika",localizedName:"अंगिका",direction:"ltr"},ah:{locale3:"mas",englishName:"Masai",localizedName:"ɔl Maa",direction:"ltr"},ai:{locale3:"ain",englishName:"Ainu",localizedName:"アイヌ・イタㇰ",direction:"ltr"},aj:{locale3:"nog",englishName:"Nogai",localizedName:"Ногай тили",direction:"ltr"},ak:{locale3:"aka",englishName:"Akan",localizedName:"Akan",direction:"ltr"},ak_FT:{locale3:"fat",englishName:"Fanti",localizedName:"Mfantse",direction:"ltr",fallbackLocales:["ak"]},al:{locale3:"ale",englishName:"Aleut",localizedName:"Уна́ӈам тунуу́",direction:"ltr"},am:{locale3:"amh",englishName:"Amharic",localizedName:"አማርኛ",direction:"ltr"},an:{locale3:"arg",englishName:"Aragonese",localizedName:"aragonés",direction:"ltr"},ao:{locale3:"mak",englishName:"Makasar",localizedName:"ᨅᨔ ᨆᨀᨔᨑ",direction:"ltr"},ap:{locale3:"arp",englishName:"Arapaho",localizedName:"Hinónoʼeitíít",direction:"ltr"},ar:{locale3:"ara",englishName:"Arabic",localizedName:"العربية",direction:"rtl"},ar_AE:{englishName:"Arabic (U.A.E.)",localizedName:"العربية (الإمارات العربية المتحدة)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_BH:{englishName:"Arabic (Bahrain)",localizedName:"العربية (البحرين)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_DJ:{englishName:"Arabic (Djibouti)",localizedName:"العربية (جيبوتي)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_DZ:{englishName:"Arabic (Algeria)",localizedName:"العربية (الجزائر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_EG:{englishName:"Arabic (Egypt)",localizedName:"العربية (مصر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_EH:{englishName:"Arabic (Sahrawi Republic)",localizedName:"العربية (الجمهورية الصحراوية)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_ER:{englishName:"Arabic (Eritrea)",localizedName:"العربية (إريتريا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_IQ:{englishName:"Arabic (Iraq)",localizedName:"العربية (العراق)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_JO:{englishName:"Arabic (Jordan)",localizedName:"العربية (الأردن)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_KM:{englishName:"Arabic (Comoros)",localizedName:"العربية (جزر القمر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_KW:{englishName:"Arabic (Kuwait)",localizedName:"العربية (الكويت)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_LB:{englishName:"Arabic (Lebanon)",localizedName:"العربية (لبنان)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_LY:{englishName:"Arabic (Libya)",localizedName:"العربية (ليبيا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_MA:{locale3:"ary",englishName:"Arabic, Morocco",localizedName:"العربية (المغرب)",direction:"rtl",fallbackLocales:["ar"]},ar_MR:{englishName:"Arabic (Mauritania)",localizedName:"العربية (موريتانيا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_OM:{englishName:"Arabic (Oman)",localizedName:"العربية (عُمان)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_QA:{englishName:"Arabic (Qatar)",localizedName:"العربية (قطر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SA:{englishName:"Arabic, Saudi Arabia",localizedName:"العربية (السعودية)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SD:{englishName:"Arabic (Sudan)",localizedName:"العربية (السودان)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SO:{englishName:"Arabic (Somalia)",localizedName:"العربية (الصومال)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SY:{englishName:"Arabic (Syria)",localizedName:"العربية (سوريا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_TD:{englishName:"Arabic (Chad)",localizedName:"العربية (تشاد)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_TN:{englishName:"Arabic (Tunisia)",localizedName:"العربية (تونس)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_YE:{englishName:"Arabic (Yemen)",localizedName:"العربية (اليمن)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},as:{locale3:"asm",englishName:"Assamese",localizedName:"অসমীয়া",direction:"ltr"},at:{locale3:"ast",englishName:"Asturian",localizedName:"Asturianu",direction:"ltr"},au:{locale3:"awa",englishName:"Awadhi",localizedName:"अवधी",direction:"ltr"},av:{locale3:"ava",englishName:"Avaric",localizedName:"авар мацӀ",direction:"ltr"},aw:{locale3:"arw",englishName:"Arawak",localizedName:"Lokono",direction:"ltr"},ax:{locale3:"mai",englishName:"Maithili",localizedName:"मैथिली",direction:"ltr"},ay:{locale3:"aym",englishName:"Aymara",localizedName:"aymar aru",direction:"ltr"},az:{locale3:"aze",englishName:"Azerbaijani",localizedName:"azərbaycan dili",direction:"ltr"},ba:{locale3:"bak",englishName:"Bashkir",localizedName:"башҡорт теле",direction:"ltr"},bb:{locale3:"bem",englishName:"Bemba",localizedName:"Chibemba",direction:"ltr"},bc:{locale3:"bal",englishName:"Baluchi",localizedName:"بلۏچی",direction:"rtl"},bd:{locale3:"kmb",englishName:"Kimbundu",localizedName:"North Mbundu",direction:"ltr"},be:{locale3:"bel",englishName:"Belarusian",localizedName:"беларуская мова",direction:"ltr"},bg:{locale3:"bul",englishName:"Bulgarian",localizedName:"български език",direction:"ltr"},bi:{locale3:"bis",englishName:"Bislama",localizedName:"Bislama",direction:"ltr"},bj:{locale3:"bej",englishName:"Beja",localizedName:"Bidhaawyeet",direction:"ltr"},bk:{locale3:"bik",englishName:"Bikol",localizedName:"Bikol",direction:"ltr"},bl:{locale3:"ban",englishName:"Balinese",localizedName:"ᬪᬵᬱᬩᬮᬶ",direction:"ltr"},bm:{locale3:"bam",englishName:"Bambara",localizedName:"bamanankan",direction:"ltr"},bn:{locale3:"ben",englishName:"Bengali",localizedName:"বাংলা",direction:"ltr"},bo:{locale3:"bod",englishName:"Tibetan",localizedName:"བོད་ཡིག",direction:"ltr"},bp:{locale3:"bho",englishName:"Bhojpuri",localizedName:"भोजपुरी",direction:"ltr"},bq:{locale3:"bug",englishName:"Buginese",localizedName:"ᨅᨔ ᨕᨘᨁᨗ",direction:"ltr"},br:{locale3:"bre",englishName:"Breton",localizedName:"brezhoneg",direction:"ltr"},bs:{locale3:"bos",englishName:"Bosnian",localizedName:"bosanski jezik",direction:"ltr"},bt:{locale3:"min",englishName:"Minangkabau",localizedName:"Baso Minang",direction:"ltr"},bu:{locale3:"bua",englishName:"Buriat",localizedName:"буряад хэлэн",direction:"ltr"},bx:{locale3:"bnc",englishName:"Bontok",localizedName:"Finallig",direction:"ltr"},by:{locale3:"byn",englishName:"Blin",localizedName:"ብሊና",direction:"ltr"},ca:{locale3:"cat",englishName:"Catalan",localizedName:"Català",direction:"ltr"},cb:{locale3:"ceb",englishName:"Cebuano",localizedName:"Sinugbuanong Binisayâ",direction:"ltr"},cc:{locale3:"chk",englishName:"Chuukese",localizedName:"Trukese",direction:"ltr"},cd:{locale3:"cad",englishName:"Caddo",localizedName:"Hasí:nay",direction:"ltr"},ce:{locale3:"che",englishName:"Chechen",localizedName:"нохчийн мотт",direction:"ltr"},ch:{locale3:"cha",englishName:"Chamorro",localizedName:"Chamoru",direction:"ltr"},ci:{locale3:"scn",englishName:"Sicilian",localizedName:"Sicilianu",direction:"ltr"},cj:{locale3:"chy",englishName:"Cheyenne",localizedName:"Tsėhésenėstsestȯtse",direction:"ltr"},ck:{locale3:"chr",englishName:"Cherokee",localizedName:"ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ",direction:"ltr"},cl:{locale3:"lun",englishName:"Lunda",localizedName:"Chilunda",direction:"ltr"},cm:{locale3:"chm",englishName:"Mari",localizedName:"марий йылме",direction:"ltr"},cn:{locale3:"chn",englishName:"Chinook jargon",localizedName:"chinuk wawa",direction:"ltr"},co:{locale3:"cos",englishName:"Corsican",localizedName:"corsu",direction:"ltr"},cp:{locale3:"chp",englishName:"Chipewyan",localizedName:"ᑌᓀᓱᒼᕄᓀ (Dënesųłiné)",direction:"ltr"},cq:{locale3:"cak",englishName:"kaqchikel",localizedName:"Kaqchikel Chʼabʼäl",direction:"ltr"},cr:{locale3:"cre",englishName:"Cree",localizedName:"ᓀᐦᐃᔭᐍᐏᐣ",direction:"ltr"},cs:{locale3:"ces",englishName:"Czech",localizedName:"čeština",direction:"ltr"},ct:{locale3:"crh",englishName:"Crimean Tatar",localizedName:"Къырымтатарджа",direction:"ltr"},cv:{locale3:"chv",englishName:"Chuvash",localizedName:"чӑваш чӗлхи",direction:"ltr"},cw:{locale3:"cho",englishName:"Choctaw",localizedName:"Chahta'",direction:"ltr"},cy:{locale3:"cym",englishName:"Welsh",localizedName:"Cymraeg",direction:"ltr"},cz:{locale3:"coz",englishName:"Chocho",localizedName:"Ngiwa",direction:"ltr"},da:{locale3:"dan",englishName:"Danish",localizedName:"dansk",direction:"ltr"},db:{locale3:"dgr",englishName:"Dogrib",localizedName:"Tlicho",direction:"ltr"},de:{locale3:"deu",englishName:"German",localizedName:"Deutsch",direction:"ltr"},de_AT:{englishName:"German (Austria)",localizedName:"Deutsch (Österreich)",direction:"ltr",fallbackLocales:["de"]},de_CH:{englishName:"German (Switzerland)",localizedName:"Deutsch (Schweiz)",direction:"ltr",fallbackLocales:["de"]},de_LI:{englishName:"German (Liechtenstein)",localizedName:"Deutsch (Liechtenstein)",direction:"ltr",fallbackLocales:["de"]},de_LU:{englishName:"German (Luxembourg)",localizedName:"Deutsch (Luxemburg)",direction:"ltr",fallbackLocales:["de"]},dg:{locale3:"ada",englishName:"Adangme",localizedName:"Dangme",direction:"ltr"},di:{locale3:"doi",englishName:"Dogri",localizedName:"डोगरी; ڈوگرى",direction:"rtl"},dk:{locale3:"dak",englishName:"Dakota",localizedName:"Dakhótiyapi",direction:"ltr"},dl:{locale3:"del",englishName:"Delaware",localizedName:"Lënapei èlixsuwakàn",direction:"ltr"},dm:{locale3:"sid",englishName:"Sidamo",localizedName:"Sidaamu Afoo",direction:"ltr"},dn:{locale3:"din",englishName:"Dinka",localizedName:"Thuɔŋjäŋ",direction:"ltr"},dr:{locale3:"dar",englishName:"Dargwa",localizedName:"дарган мез",direction:"ltr"},ds:{locale3:"dsb",englishName:"Lower Sorbian",localizedName:"Dolnoserbski",direction:"ltr"},du:{locale3:"dua",englishName:"Duala",localizedName:"Duālā",direction:"ltr"},dv:{locale3:"div",englishName:"Divehi",localizedName:"ދިވެހި,",direction:"rtl"},dw:{locale3:"sad",englishName:"Sandawe",localizedName:"Sandaweeki",direction:"ltr"},dy:{locale3:"dyu",englishName:"Dyula",localizedName:"Julakan",direction:"ltr"},dz:{locale3:"dzo",englishName:"Dzongkha",localizedName:"རྫོང་ཁ",direction:"ltr"},ed:{locale3:"bin",englishName:"Bini",localizedName:"Ẹ̀dó",direction:"ltr"},ee:{locale3:"ewe",englishName:"Ewe",localizedName:"Eʋegbe",direction:"ltr"},ef:{locale3:"efi",englishName:"Efik",localizedName:"Usem Efịk",direction:"ltr"},ek:{locale3:"eka",englishName:"Ekajuk",localizedName:"Ekajuk",direction:"ltr"},el:{locale3:"ell",englishName:"Greek",localizedName:"Ελληνικά",direction:"ltr"},em:{locale3:"den",englishName:"Slave (Athapascan)",localizedName:"Dene K'e",direction:"ltr"},en:{locale3:"eng",englishName:"English",localizedName:"English",direction:"ltr"},en_AU:{englishName:"English (Australia)",localizedName:"English (Australia)",direction:"ltr"},en_BI:{englishName:"English (Burundi)",localizedName:"English (Burundi)",direction:"ltr"},en_BW:{englishName:"English (Botswana)",localizedName:"English (Botswana)",direction:"ltr"},en_BZ:{englishName:"English (Belize)",localizedName:"English (Belize)",direction:"ltr"},en_CA:{englishName:"English, Canada",localizedName:"English (Canada)",direction:"ltr"},en_CB:{englishName:"English (Caribbean)",localizedName:"English (Caribbean)",direction:"ltr"},en_CM:{englishName:"English (Cameroon)",localizedName:"English (Cameroon)",direction:"ltr"},en_ER:{englishName:"English (Eritrea)",localizedName:"English (Eritrea)",direction:"ltr"},en_ET:{englishName:"English (Ethiopia)",localizedName:"English (Ethiopia)",direction:"ltr"},en_GB:{englishName:"English, United Kingdom",localizedName:"English (United Kingdom)",direction:"ltr"},en_GH:{englishName:"English (Ghana)",localizedName:"English (Ghana)",direction:"ltr"},en_GM:{englishName:"English (Gambia)",localizedName:"English (Gambia)",direction:"ltr"},en_IE:{englishName:"English (Ireland)",localizedName:"English (Ireland)",direction:"ltr"},en_IN:{englishName:"English (India)",localizedName:"English (India)",direction:"ltr"},en_JM:{englishName:"English (Jamaica)",localizedName:"English (Jamaica)",direction:"ltr"},en_KE:{englishName:"English (Kenya)",localizedName:"English (Kenya)",direction:"ltr"},en_LR:{englishName:"English (Liberia)",localizedName:"English (Liberia)",direction:"ltr"},en_LS:{englishName:"English (Lesotho)",localizedName:"English (Lesotho)",direction:"ltr"},en_MU:{englishName:"English (Mauritius)",localizedName:"English (Mauritius)",direction:"ltr"},en_MW:{englishName:"English (Malawi)",localizedName:"English (Malawi)",direction:"ltr"},en_MY:{englishName:"English (Malaysia)",localizedName:"English (Malaysia)",direction:"ltr"},en_NA:{englishName:"English (Namibia)",localizedName:"English (Namibia)",direction:"ltr"},en_NG:{englishName:"English (Nigeria)",localizedName:"English (Nigeria)",direction:"ltr"},en_NZ:{englishName:"English (New Zealand)",localizedName:"English (New Zealand)",direction:"ltr"},en_PH:{englishName:"English (Republic of the Philippines)",localizedName:"English (Republic of the Philippines)",direction:"ltr"},en_RW:{englishName:"English (Rwanda)",localizedName:"English (Rwanda)",direction:"ltr"},en_SC:{englishName:"English (Seychelles)",localizedName:"English (Seychelles)",direction:"ltr"},en_SL:{englishName:"English (Sierra Leone)",localizedName:"English (Sierra Leone)",direction:"ltr"},en_SS:{englishName:"English (South Sudan)",localizedName:"English (South Sudan)",direction:"ltr"},en_SZ:{englishName:"English (Eswatini)",localizedName:"English (Eswatini)",direction:"ltr"},en_TT:{englishName:"English (Trinidad and Tobago)",localizedName:"English (Trinidad and Tobago)",direction:"ltr"},en_TZ:{englishName:"English (Tanzania)",localizedName:"English (Tanzania)",direction:"ltr"},en_UG:{englishName:"English (Uganda)",localizedName:"English (Uganda)",direction:"ltr"},en_ZA:{englishName:"English (South Africa)",localizedName:"English (South Africa)",direction:"ltr"},en_ZM:{englishName:"English (Zambia)",localizedName:"English (Zambia)",direction:"ltr"},en_ZW:{englishName:"English (Zimbabwe)",localizedName:"English (Zimbabwe)",direction:"ltr"},er:{locale3:"srr",englishName:"Serer",localizedName:"Seereer",direction:"ltr"},es:{locale3:"spa",englishName:"Spanish",localizedName:"español",direction:"ltr"},es_AR:{englishName:"Spanish (Argentina)",localizedName:"español (Argentina)",direction:"ltr",fallbackLocales:["es"]},es_BO:{englishName:"Spanish (Bolivia)",localizedName:"español (Bolivia)",direction:"ltr",fallbackLocales:["es"]},es_CL:{englishName:"Spanish (Chile)",localizedName:"español (Chile)",direction:"ltr",fallbackLocales:["es"]},es_CO:{englishName:"Spanish, Colombia",localizedName:"español (Colombia)",direction:"ltr",fallbackLocales:["es"]},es_CR:{englishName:"Spanish, Costa Rica",localizedName:"español (Costa Rica)",direction:"ltr",fallbackLocales:["es"]},es_DO:{englishName:"Spanish (Dominican Republic)",localizedName:"español (Dominican Republic)",direction:"ltr",fallbackLocales:["es"]},es_EC:{englishName:"Spanish (Ecuador)",localizedName:"español (Ecuador)",direction:"ltr",fallbackLocales:["es"]},es_ES:{englishName:"Spanish, Spain",localizedName:"español (España)",direction:"ltr",fallbackLocales:["es"]},es_GQ:{englishName:"Spanish (Equatorial Guinea)",localizedName:"español (Equatorial Guinea)",direction:"ltr",fallbackLocales:["es"]},es_GT:{englishName:"Spanish (Guatemala)",localizedName:"español (Guatemala)",direction:"ltr",fallbackLocales:["es"]},es_HN:{englishName:"Spanish (Honduras)",localizedName:"español (Honduras)",direction:"ltr",fallbackLocales:["es"]},es_MX:{englishName:"Spanish, Mexico",localizedName:"español (México)",direction:"ltr",fallbackLocales:["es"]},es_NI:{englishName:"Spanish (Nicaragua)",localizedName:"español (Nicaragua)",direction:"ltr",fallbackLocales:["es"]},es_PA:{englishName:"Spanish (Panama)",localizedName:"español (Panama)",direction:"ltr",fallbackLocales:["es"]},es_PE:{englishName:"Spanish, Peru",localizedName:"español (Perú)",direction:"ltr",fallbackLocales:["es"]},es_PR:{englishName:"Spanish (Puerto Rico)",localizedName:"español (Puerto Rico)",direction:"ltr",fallbackLocales:["es"]},es_PY:{englishName:"Spanish (Paraguay)",localizedName:"español (Paraguay)",direction:"ltr",fallbackLocales:["es"]},es_SV:{englishName:"Spanish (El Salvador)",localizedName:"español (El Salvador)",direction:"ltr",fallbackLocales:["es"]},es_US:{englishName:"Spanish (United States)",localizedName:"español (United States)",direction:"ltr",fallbackLocales:["es"]},es_UY:{englishName:"Spanish (Uruguay)",localizedName:"español (Uruguay)",direction:"ltr",fallbackLocales:["es"]},es_VE:{englishName:"Spanish (Venezuela)",localizedName:"español (Venezuela)",direction:"ltr",fallbackLocales:["es"]},et:{locale3:"est",englishName:"Estonian",localizedName:"eesti",direction:"ltr"},eu:{locale3:"eus",englishName:"Basque",localizedName:"euskara",direction:"ltr"},ew:{locale3:"ewo",englishName:"Ewondo",localizedName:"Beti",direction:"ltr"},fa:{locale3:"fas",englishName:"Persian",localizedName:"فارسی",direction:"rtl"},fa_DA:{locale3:"prs",englishName:"Persian (Dari)",localizedName:"دری",direction:"rtl"},ff:{locale3:"ful",englishName:"Fulah",localizedName:"Fulfulde",direction:"ltr"},fg:{locale3:"fon",englishName:"Fon",localizedName:"Fon gbè",direction:"ltr"},fi:{locale3:"fin",englishName:"Finnish",localizedName:"suomi",direction:"ltr"},fj:{locale3:"fij",englishName:"Fijian",localizedName:"Vakaviti",direction:"ltr"},fl:{locale3:"fil",englishName:"Filipino",localizedName:"Wikang Filipino",direction:"ltr"},fn:{locale3:"fan",englishName:"Fang",localizedName:"Pangwe",direction:"ltr"},fo:{locale3:"fao",englishName:"Faroese",localizedName:"føroyskt",direction:"ltr"},fr:{locale3:"fra",englishName:"French",localizedName:"français",direction:"ltr"},fr_BE:{englishName:"French (Belgium)",localizedName:"français (Belgium)",direction:"ltr",fallbackLocales:["fr"]},fr_BF:{englishName:"French (Burkina Faso)",localizedName:"français (Burkina Faso)",direction:"ltr",fallbackLocales:["fr"]},fr_BI:{englishName:"French (Burundi)",localizedName:"français (Burundi)",direction:"ltr",fallbackLocales:["fr"]},fr_BJ:{englishName:"French (Benin)",localizedName:"français (Bénin)",direction:"ltr",fallbackLocales:["fr"]},fr_CA:{englishName:"French (Canada)",localizedName:"français (Canada)",direction:"ltr",fallbackLocales:["fr"]},fr_CD:{englishName:"French (DR Congo)",localizedName:"français (RD Congo)",direction:"ltr",fallbackLocales:["fr"]},fr_CF:{englishName:"French (Central African Republic)",localizedName:"français (République centrafricaine)",direction:"ltr",fallbackLocales:["fr"]},fr_CG:{englishName:"French (Congo Republic)",localizedName:"français (République du Congo)",direction:"ltr",fallbackLocales:["fr"]},fr_CH:{englishName:"French (Switzerland)",localizedName:"français (Suisse)",direction:"ltr",fallbackLocales:["fr"]},fr_CI:{englishName:"French (Côte d’Ivoire)",localizedName:"français (Côte d'Ivoire)",direction:"ltr",fallbackLocales:["fr"]},fr_CM:{englishName:"French (Cameroon)",localizedName:"français (Cameroon)",direction:"ltr",fallbackLocales:["fr"]},fr_DJ:{englishName:"French (Djibouti)",localizedName:"français (Djibouti)",direction:"ltr",fallbackLocales:["fr"]},fr_EH:{englishName:"French (Sahrawi Republic)",localizedName:"français (République sahraouie)",direction:"ltr",fallbackLocales:["fr"]},fr_GA:{englishName:"French (Gabon)",localizedName:"français (Gabon)",direction:"ltr",fallbackLocales:["fr"]},fr_GN:{englishName:"French (Guinea)",localizedName:"français (Guinée)",direction:"ltr",fallbackLocales:["fr"]},fr_GQ:{englishName:"French (Equatorial Guinea)",localizedName:"français (Guinée Équatoriale)",direction:"ltr",fallbackLocales:["fr"]},fr_KM:{englishName:"French (Comoros)",localizedName:"français (Comores)",direction:"ltr",fallbackLocales:["fr"]},fr_LU:{englishName:"French (Luxembourg)",localizedName:"français (Luxembourg)",direction:"ltr",fallbackLocales:["fr"]},fr_MC:{englishName:"French (Monaco)",localizedName:"français (Monaco)",direction:"ltr",fallbackLocales:["fr"]},fr_MG:{englishName:"French (Madagascar)",localizedName:"français (Madagascar)",direction:"ltr",fallbackLocales:["fr"]},fr_ML:{englishName:"French (Mali)",localizedName:"français (Mali)",direction:"ltr",fallbackLocales:["fr"]},fr_NE:{englishName:"French (Niger)",localizedName:"français (Niger)",direction:"ltr",fallbackLocales:["fr"]},fr_RW:{englishName:"French (Rwanda)",localizedName:"français (Rwanda)",direction:"ltr",fallbackLocales:["fr"]},fr_SC:{englishName:"French (Seychelles)",localizedName:"français (les Seychelles)",direction:"ltr",fallbackLocales:["fr"]},fr_SN:{englishName:"French (Senegal)",localizedName:"français (Sénégal)",direction:"ltr",fallbackLocales:["fr"]},fr_TD:{englishName:"French (Chad)",localizedName:"français (Tchad)",direction:"ltr",fallbackLocales:["fr"]},fr_TG:{englishName:"French (Togo)",localizedName:"français (Togo)",direction:"ltr",fallbackLocales:["fr"]},fs:{locale3:"frs",englishName:"East Frisian Low Saxon",localizedName:"Oostfreesk",direction:"ltr"},fu:{locale3:"fur",englishName:"Friulian",localizedName:"furlan",direction:"ltr"},fy:{locale3:"fry",englishName:"Western Frisian",localizedName:"Frysk",direction:"ltr"},ga:{locale3:"gle",englishName:"Irish",localizedName:"Gaeilge",direction:"ltr"},gb:{locale3:"gba",englishName:"Gbaya",localizedName:"Gbaya–Manza–Ngbaka",direction:"ltr"},gc:{locale3:"car",englishName:"Galibi Carib",localizedName:"Kari'nja",direction:"ltr"},gd:{locale3:"gla",englishName:"Scottish Gaelic",localizedName:"Gàidhlig",direction:"ltr"},gf:{locale3:"cab",englishName:"Garifuna",localizedName:"Garifuna",direction:"ltr"},gg:{locale3:"gaa",englishName:"Ga",localizedName:"Gã",direction:"ltr"},gk:{locale3:"tkl",englishName:"Tokelau",localizedName:"gagana Tokelau",direction:"ltr"},gl:{locale3:"glg",englishName:"Galician",localizedName:"galego",direction:"ltr"},gn:{locale3:"grn",englishName:"Guarani",localizedName:"avañeʼẽ",direction:"ltr"},go:{locale3:"gon",englishName:"Gondi",localizedName:"గోండి",direction:"ltr"},gr:{locale3:"gor",englishName:"Gorontalo",localizedName:"Bahasa Hulontalo",direction:"ltr"},gs:{locale3:"gsw",englishName:"Swiss German",localizedName:"Schwiizerdütsch",direction:"ltr"},gt:{locale3:"gil",englishName:"Gilbertese",localizedName:"Taetae ni Kiribati",direction:"ltr"},gu:{locale3:"guj",englishName:"Gujarati",localizedName:"ગુજરાતી",direction:"ltr"},gv:{locale3:"glv",englishName:"Manx",localizedName:"Gaelg",direction:"ltr"},gw:{locale3:"gwi",englishName:"Gwich'in",localizedName:"Dinjii Zhu’ Ginjik",direction:"ltr"},gy:{locale3:"gay",englishName:"Gayo",localizedName:"Basa Gayo",direction:"ltr"},ha:{locale3:"hau",englishName:"Hausa",localizedName:"Hausa",direction:"ltr"},hd:{locale3:"mdr",englishName:"Mandar",localizedName:"Mandar",direction:"ltr"},hh:{locale3:"moh",englishName:"Mohawk",localizedName:"Kanien’kéha",direction:"ltr"},hi:{locale3:"hin",englishName:"Hindi",localizedName:"हिन्दी",direction:"ltr"},hk:{locale3:"kru",englishName:"Kurukh",localizedName:"कुड़ुख़",direction:"ltr"},hl:{locale3:"hil",englishName:"Hiligaynon",localizedName:"Ilonggo",direction:"ltr"},hm:{locale3:"hmn",englishName:"Hmong",localizedName:"𖬇𖬰𖬞 𖬌𖬣𖬵",direction:"ltr"},hn:{locale3:"shn",englishName:"Shan",localizedName:"ၵႂၢမ်းတႆးယႂ်",direction:"ltr"},ho:{locale3:"hmo",englishName:"Hiri Motu",localizedName:"Hiri Motu",direction:"ltr"},hp:{locale3:"hup",englishName:"Hupa",localizedName:"Na:tinixwe Mixine:whe'",direction:"ltr"},hr:{locale3:"hrv",englishName:"Croatian",localizedName:"Hrvatski",direction:"ltr"},hr_BA:{englishName:"Croatian (Latin, Bosnia, and Herzegovina)",localizedName:"hrvatski (Latinica, Bosna i Hercegovina)",direction:"ltr",fallbackLocales:["hr"]},hs:{locale3:"hsb",englishName:"Upper Sorbian",localizedName:"hornjoserbšćina",direction:"ltr"},ht:{locale3:"hat",englishName:"Haitian",localizedName:"Kreyòl ayisyen",direction:"ltr"},hu:{locale3:"hun",englishName:"Hungarian",localizedName:"magyar",direction:"ltr"},hw:{locale3:"haw",englishName:"Hawaiian",localizedName:"ʻŌlelo Hawaiʻi",direction:"ltr"},hx:{locale3:"hai",englishName:"Haida",localizedName:"X̱aat Kíl",direction:"ltr"},hy:{locale3:"hye",englishName:"Armenian",localizedName:"Հայերեն",direction:"ltr"},hz:{locale3:"her",englishName:"Herero",localizedName:"Otjiherero",direction:"ltr"},ib:{locale3:"iba",englishName:"Iban",localizedName:"Jaku Iban",direction:"ltr"},ig:{locale3:"ibo",englishName:"Igbo",localizedName:"Asụsụ Igbo",direction:"ltr"},ih:{locale3:"inh",englishName:"Ingush",localizedName:"ГӀалгӀай мотт",direction:"ltr"},ii:{locale3:"iii",englishName:"Sichuan Yi",localizedName:"ꆈꌠ꒿ Nuosuhxop",direction:"ltr"},ik:{locale3:"ipk",englishName:"Inupiaq",localizedName:"Iñupiaq",direction:"ltr"},il:{locale3:"ilo",englishName:"Iloko",localizedName:"Pagsasao nga Ilokano",direction:"ltr"},im:{locale3:"sma",englishName:"Southern Sami",localizedName:"Åarjelsaemien gïele",direction:"ltr"},in:{locale3:"ind",englishName:"Indonesian",localizedName:"Bahasa Indonesia",direction:"ltr"},iq:{locale3:"miq",englishName:"Miskito",localizedName:"Miskitu",direction:"ltr"},is:{locale3:"isl",englishName:"Icelandic",localizedName:"Íslenska",direction:"ltr"},it:{locale3:"ita",englishName:"Italian",localizedName:"italiano",direction:"ltr"},it_CH:{englishName:"Italian (Switzerland)",localizedName:"italiano(Svizzera)",direction:"ltr",fallbackLocales:["it"]},iu:{locale3:"iku",englishName:"Inuktitut",localizedName:"ᐃᓄᒃᑎᑐᑦ",direction:"ltr"},iv:{locale3:"tiv",englishName:"Tiv",localizedName:"Tiv",direction:"ltr"},iw:{locale3:"heb",englishName:"Hebrew",localizedName:"עברית",direction:"rtl"},ix:{locale3:"ixl",englishName:"ixil",localizedName:"Ixhil",direction:"ltr"},ja:{locale3:"jpn",englishName:"Japanese",localizedName:"日本語",direction:"ltr"},jb:{locale3:"kjb",englishName:"q'anjob'al",localizedName:"Kanjobal",direction:"ltr"},jp:{locale3:"jpr",englishName:"Judeo-Persian",localizedName:"Dzhidi",direction:"ltr"},jr:{locale3:"jrb",englishName:"Judeo-Arabic",localizedName:"عربية يهودية",direction:"rtl"},jv:{locale3:"jav",englishName:"Javanese",localizedName:"basa Jawa",direction:"ltr"},ka:{locale3:"kat",englishName:"Georgian",localizedName:"ქართული ენა",direction:"ltr"},kb:{locale3:"kab",englishName:"Kabyle",localizedName:"Taqbaylit",direction:"ltr"},kc:{locale3:"kac",englishName:"Kachin",localizedName:"Jingpho",direction:"ltr"},kd:{locale3:"kbd",englishName:"Kabardian",localizedName:"Къэбэрдейбзэ",direction:"ltr"},ke:{locale3:"kpe",englishName:"Kpelle",localizedName:"Kpɛlɛwoo",direction:"ltr"},kf:{locale3:"krc",englishName:"Karachay-Balkar",localizedName:"Къарачай-Малкъар тил",direction:"ltr"},kg:{locale3:"kon",englishName:"Kongo",localizedName:"Kikongo",direction:"ltr"},kh:{locale3:"kha",englishName:"Khasi",localizedName:"কা কতিয়েন খাশি",direction:"ltr"},ki:{locale3:"kik",englishName:"Kikuyu",localizedName:"Gĩkũyũ",direction:"ltr"},kj:{locale3:"kua",englishName:"Kwanyama",localizedName:"Oshikwanyama",direction:"ltr"},kk:{locale3:"kaz",englishName:"Kazakh",localizedName:"қазақ тілі",direction:"ltr"},kl:{locale3:"kal",englishName:"Kalaallisut",localizedName:"kalaallisut",direction:"ltr"},km:{locale3:"khm",englishName:"Khmer",localizedName:"ខេមរភាសា",direction:"ltr"},kn:{locale3:"kan",englishName:"Kannada",localizedName:"ಕನ್ನಡ",direction:"ltr"},ko:{locale3:"kor",englishName:"Korean",localizedName:"한국어",direction:"ltr"},kp:{locale3:"kaa",englishName:"Kara-Kalpak",localizedName:"Qaraqalpaq tili",direction:"ltr"},kq:{locale3:"kln",englishName:"Kalenjin",localizedName:"Kalenjin",direction:"ltr"},kr:{locale3:"kau",englishName:"Kanuri",localizedName:"Kanuri",direction:"ltr"},ks:{locale3:"kas",englishName:"Kashmiri",localizedName:"कश्मीरी",direction:"ltr"},kt:{locale3:"kut",englishName:"Kutenai",localizedName:"Ktunaxa",direction:"ltr"},ku:{locale3:"kur",englishName:"Kurdish (Sorani)",localizedName:"سۆرانی",direction:"rtl"},ku_TR:{locale3:"ckb",englishName:"Kurdish (Kurmanji)",localizedName:"Kurmancî",direction:"ltr"},kv:{locale3:"kom",englishName:"Komi",localizedName:"коми кыв",direction:"ltr"},kw:{locale3:"cor",englishName:"Cornish",localizedName:"Kernewek",direction:"ltr"},kx:{locale3:"kam",englishName:"Kamba",localizedName:"Kikamba",direction:"ltr"},ky:{locale3:"kir",englishName:"Kirghiz",localizedName:"Кыргыз тили",direction:"ltr"},kz:{locale3:"kos",englishName:"Kosraean",localizedName:"Kosraean",direction:"ltr"},lb:{locale3:"ltz",englishName:"Luxembourgish",localizedName:"Lëtzebuergesch",direction:"ltr"},ld:{locale3:"lad",englishName:"Ladino",localizedName:"Judeo-español",direction:"ltr"},lg:{locale3:"lug",englishName:"Ganda",localizedName:"Luganda",direction:"ltr"},lh:{locale3:"lah",englishName:"Lahnda",localizedName:"بھارت کا",direction:"rtl"},li:{locale3:"lim",englishName:"Limburgish",localizedName:"Limburgs",direction:"ltr"},lk:{locale3:"lak",englishName:"Lakota",localizedName:"Lakȟótiyapi",direction:"ltr"},ll:{locale3:"luo",englishName:"Luo (Kenya and Tanzania)",localizedName:"Dholuo",direction:"ltr"},lm:{locale3:"lam",englishName:"Lamba",localizedName:"Ichilamba",direction:"ltr"},ln:{locale3:"lin",englishName:"Lingala",localizedName:"Lingála",direction:"ltr"},lo:{locale3:"lao",englishName:"Lao",localizedName:"ພາສາລາວ",direction:"ltr"},lp:{locale3:"sel",englishName:"Selkup",localizedName:"чу́мэл шэ",direction:"ltr"},ls:{locale3:"lus",englishName:"Lushai",localizedName:"Mizo ṭawng",direction:"ltr"},lt:{locale3:"lit",englishName:"Lithuanian",localizedName:"lietuvių kalba",direction:"ltr"},lu:{locale3:"lub",englishName:"Luba-Katanga",localizedName:"Kiluba",direction:"ltr"},lv:{locale3:"lav",englishName:"Latvian",localizedName:"latviešu valoda",direction:"ltr"},lw:{locale3:"ach",englishName:"Acoli",localizedName:"Lwo",direction:"ltr"},lx:{locale3:"lua",englishName:"Luba-Lulua",localizedName:"Cilubà",direction:"ltr"},ly:{locale3:"luy",englishName:"Luyia",localizedName:"Luyia",direction:"ltr"},lz:{locale3:"lez",englishName:"Lezghian",localizedName:"Лезги чӏал",direction:"ltr"},ma:{locale3:"mag",englishName:"Magahi",localizedName:"मगही",direction:"ltr"},mb:{locale3:"bas",englishName:"Basa",localizedName:"Mbene",direction:"ltr"},mc:{locale3:"mnc",englishName:"Manchu",localizedName:"Manju gisun",direction:"ltr"},md:{locale3:"mad",englishName:"Madurese",localizedName:"Madhura",direction:"ltr"},me:{locale3:"men",englishName:"Mende",localizedName:"Mɛnde yia",direction:"ltr"},mf:{locale3:"mdf",englishName:"Moksha",localizedName:"мокшень кяль",direction:"ltr"},mg:{locale3:"mlg",englishName:"Malagasy",localizedName:"malagasy",direction:"ltr"},mh:{locale3:"mah",englishName:"Marshallese",localizedName:"Kajin M̧ajeļ",direction:"ltr"},mi:{locale3:"mri",englishName:"Maori",localizedName:"reo Māori",direction:"ltr"},mk:{locale3:"mkd",englishName:"Macedonian",localizedName:"македонски јазик",direction:"ltr"},ml:{locale3:"mal",englishName:"Malayalam",localizedName:"മലയാളം",direction:"ltr"},mm:{locale3:"tem",englishName:"Timne",localizedName:"KʌThemnɛ",direction:"ltr"},mn:{locale3:"mon",englishName:"Mongolian",localizedName:"Монгол хэл",direction:"ltr"},mo:{locale3:"mol",englishName:"Moldavian",localizedName:"Moldavian",direction:"ltr"},mq:{locale3:"mic",englishName:"Mi'kmaq",localizedName:"Míkmawísimk",direction:"ltr"},mr:{locale3:"mar",englishName:"Marathi",localizedName:"मराठी",direction:"ltr"},ms:{locale3:"msa",englishName:"Malay",localizedName:"Bahasa Malaysia",direction:"ltr"},ms_MY:{englishName:"Malay (Standard)",localizedName:"بهاس ملايو مليسيا",direction:"rtl",fallbackLocales:["ms"]},mt:{locale3:"mlt",englishName:"Maltese",localizedName:"Malti",direction:"ltr"},mu:{locale3:"mus",englishName:"Creek",localizedName:"Mvskoke",direction:"ltr"},mv:{locale3:"myv",englishName:"Erzya",localizedName:"эрзянь кель",direction:"ltr"},mw:{locale3:"mwl",englishName:"Mirandese",localizedName:"mirandés",direction:"ltr"},mx:{locale3:"mam",englishName:"mam",localizedName:"Qyool Mam",direction:"ltr"},my:{locale3:"mya",englishName:"Burmese",localizedName:"ဗမာစာ",direction:"ltr"},mz:{locale3:"mau",englishName:"Mazateco",localizedName:"En Ngixo",direction:"ltr"},na:{locale3:"nau",englishName:"Nauru",localizedName:"Ekakairũ Naoero",direction:"ltr"},nb:{locale3:"nob",englishName:"Norwegian Bokmal",localizedName:"Norwegian Bokmål",direction:"ltr"},nc:{locale3:"nyn",englishName:"Nyankole",localizedName:"Orunyankore",direction:"ltr"},nd:{locale3:"nde",englishName:"North Ndebele",localizedName:"North Ndebele",direction:"ltr"},ne:{locale3:"nep",englishName:"Nepali",localizedName:"नेपाली",direction:"ltr"},nf:{locale3:"frr",englishName:"Northern Frisian",localizedName:"Frasch",direction:"ltr"},ng:{locale3:"ndo",englishName:"Ndonga",localizedName:"Owambo",direction:"ltr"},nh:{locale3:"nyo",englishName:"Nyoro",localizedName:"Orunyoro",direction:"ltr"},ni:{locale3:"nia",englishName:"Nias",localizedName:"Li Niha",direction:"ltr"},nk:{locale3:"nor",englishName:"Norwegian",localizedName:"norsk",direction:"ltr"},nl:{locale3:"nld",englishName:"Dutch",localizedName:"Nederlands",direction:"ltr"},nl_BE:{englishName:"Dutch (Belgium)",localizedName:"Nederlands (België)",direction:"ltr",fallbackLocales:["nl"]},nm:{locale3:"smn",englishName:"Inari Sami",localizedName:"anarâškielâ",direction:"ltr"},nn:{locale3:"nno",englishName:"Norwegian Nynorsk",localizedName:"Norsk nynorsk",direction:"ltr"},np:{locale3:"nap",englishName:"Neapolitan",localizedName:"napulitano",direction:"ltr"},nq:{locale3:"nqo",englishName:"N'Ko",localizedName:"ߒߞߏ",direction:"rtl"},nr:{locale3:"nbl",englishName:"South Ndebele",localizedName:"South Ndebele",direction:"ltr"},ns:{locale3:"nds",englishName:"Low German",localizedName:"Plattdütsch",direction:"ltr"},nt:{locale3:"sat",englishName:"Santali",localizedName:"ᱥᱟᱱᱛᱟᱲᱤ",direction:"ltr"},nu:{locale3:"niu",englishName:"Niuean",localizedName:"ko e vagahau Niuē",direction:"ltr"},nv:{locale3:"nav",englishName:"Navajo",localizedName:"Diné bizaad",direction:"ltr"},nw:{locale3:"new",englishName:"Nepal Bhasa",localizedName:"नेपाल भाषा",direction:"ltr"},nx:{locale3:"nym",englishName:"Nyamwezi",localizedName:"Nyamwezi",direction:"ltr"},ny:{locale3:"nya",englishName:"Chichewa",localizedName:"Nyanja",direction:"ltr"},nz:{locale3:"nzi",englishName:"Nzima",localizedName:"Nzima",direction:"ltr"},oa:{locale3:"osa",englishName:"Osage",localizedName:"Wazhazhe ie / 𐓏𐓘𐓻𐓘𐓻𐓟 𐒻𐓟",direction:"ltr"},oc:{locale3:"oci",englishName:"Occitan",localizedName:"occitan",direction:"ltr"},oe:{locale3:"cnr",englishName:"Montenegrin",localizedName:"crnogorski / црногорски",direction:"ltr"},og:{locale3:"man",englishName:"Mandingo",localizedName:"Mandi'nka kango",direction:"ltr"},oi:{locale3:"snk",englishName:"Soninke",localizedName:"Sooninkanxanne",direction:"ltr"},oj:{locale3:"oji",englishName:"Ojibwa",localizedName:"Ojibwa",direction:"ltr"},ok:{locale3:"kok",englishName:"Konkani",localizedName:"कोंकणी",direction:"ltr"},ol:{locale3:"sms",englishName:"Skolt Sami",localizedName:"sääʹmǩiõll",direction:"ltr"},om:{locale3:"orm",englishName:"Oromo",localizedName:"Afaan Oromoo",direction:"ltr"},oo:{locale3:"mos",englishName:"Mossi",localizedName:"Mooré",direction:"ltr"},op:{locale3:"top",englishName:"Totonaca",localizedName:"Totonac–Tepehua",direction:"ltr"},or:{locale3:"ori",englishName:"Oriya",localizedName:"ଓଡ଼ିଆ",direction:"ltr"},os:{locale3:"oss",englishName:"Ossetian",localizedName:"ирон æвзаг",direction:"ltr"},ot:{locale3:"sco",englishName:"Scots",localizedName:"Lallans",direction:"ltr"},ou:{locale3:"alt",englishName:"Southern Altai",localizedName:"Алтай тили",direction:"ltr"},pa:{locale3:"pan",englishName:"Panjabi",localizedName:"ਪੰਜਾਬੀ",direction:"ltr"},pg:{locale3:"pag",englishName:"Pangasinan",localizedName:"Salitan Pangasinan",direction:"ltr"},pl:{locale3:"pol",englishName:"Polish",localizedName:"Polski",direction:"ltr"},pm:{locale3:"pam",englishName:"Pampanga",localizedName:"Amánung Kapampangan",direction:"ltr"},pn:{locale3:"pon",englishName:"Pohnpeian",localizedName:"Lokaiahn Pohnpei",direction:"ltr"},pp:{locale3:"pap",englishName:"Papiamento",localizedName:"Papiamentu",direction:"ltr"},ps:{locale3:"pus",englishName:"Pashto",localizedName:"پښتو",direction:"ltr"},pt:{locale3:"por",englishName:"Portuguese",localizedName:"Português",direction:"ltr",fallbackLocales:["pt_BR"]},pt_AO:{englishName:"Portuguese(Angola)",localizedName:"português(Angola)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_BR:{englishName:"Portuguese, Brazil",localizedName:"português (Brasil)",direction:"ltr"},pt_CV:{englishName:"Portuguese(Cabo verde)",localizedName:"português(Cabo verde)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_GQ:{englishName:"Portuguese(Equatorial Guinea)",localizedName:"português(Guiné Equatorial)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_GW:{englishName:"Portuguese(Guinea-Bissau)",localizedName:"português(Guiné-Bissau)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_MZ:{englishName:"Portuguese(Mozambique)",localizedName:"português(Moçambique)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_ST:{englishName:"Portuguese(São Tomé and Príncipe)",localizedName:"português(São Tomé e Príncipe)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pu:{locale3:"pau",englishName:"Palauan",localizedName:"a tekoi er a Belau",direction:"ltr"},qc:{locale3:"quc",englishName:"k'iche'",localizedName:"Qatzijobʼal",direction:"ltr"},qe:{locale3:"kek",englishName:"q'eqchi'",localizedName:"Kekchi",direction:"ltr"},qu:{locale3:"que",englishName:"Quechua",localizedName:"Qhichwa",direction:"ltr"},ra:{locale3:"bra",englishName:"Braj",localizedName:"ब्रजभाषा",direction:"ltr"},rb:{locale3:"grb",englishName:"Grebo",localizedName:"Kréébo",direction:"ltr"},rc:{locale3:"acr",englishName:"Achi",localizedName:"Achiʼ",direction:"ltr"},re:{locale3:"ter",englishName:"Tereno",localizedName:"Terêna",direction:"ltr"},rh:{locale3:"roh",englishName:"Romansh",localizedName:"Rumantsch",direction:"ltr"},ri:{locale3:"rap",englishName:"Rapanui",localizedName:"Vananga rapa nui",direction:"ltr"},rj:{locale3:"raj",englishName:"Rajasthani",localizedName:"राजस्थानी",direction:"ltr"},rl:{locale3:"krl",englishName:"Karelian",localizedName:"karjal",direction:"ltr"},rn:{locale3:"run",englishName:"Kirundi",localizedName:"Ikirundi",direction:"ltr"},ro:{locale3:"ron",englishName:"Romanian",localizedName:"Română",direction:"ltr"},rp:{locale3:"rup",englishName:"Aromanian",localizedName:"armãneashce",direction:"ltr"},rr:{locale3:"rar",englishName:"Rarotongan (Cook Islands Māori)",localizedName:"Māori Kūki 'Āirani",direction:"ltr"},ru:{locale3:"rus",englishName:"Russian",localizedName:"Русский",direction:"ltr"},rw:{locale3:"kin",englishName:"Kinyarwanda",localizedName:"Ikinyarwanda",direction:"ltr"},ry:{locale3:"rom",englishName:"Romany",localizedName:"romani čhib",direction:"ltr"},rz:{locale3:"loz",englishName:"Lozi",localizedName:"siLozi",direction:"ltr"},sb:{locale3:"csb",englishName:"Kashubian",localizedName:"Kaszëbsczi jãzëk",direction:"ltr"},sc:{locale3:"srd",englishName:"Sardinian",localizedName:"sardu",direction:"ltr"},sd:{locale3:"snd",englishName:"Sindhi",localizedName:"सिन्धी",direction:"ltr"},se:{locale3:"sme",englishName:"Northern Sami",localizedName:"Davvisámegiella",direction:"ltr"},sg:{locale3:"sag",englishName:"Sango",localizedName:"yângâ tî sängö",direction:"ltr"},sh:{locale3:"hbs",englishName:"Serbo-Croatian",localizedName:"Serbo-Croatian",direction:"ltr"},si:{locale3:"sin",englishName:"Sinhalese",localizedName:"සිංහල",direction:"ltr"},sj:{locale3:"smj",englishName:"Lule Sami",localizedName:"julevsámegiella",direction:"ltr"},sk:{locale3:"slk",englishName:"Slovak",localizedName:"slovenčina",direction:"ltr"},sl:{locale3:"slv",englishName:"Slovenian",localizedName:"slovenščina",direction:"ltr"},sm:{locale3:"smo",englishName:"Samoan",localizedName:"Gagana faʻa Sāmoa",direction:"ltr"},sn:{locale3:"sna",englishName:"Shona",localizedName:"chiShona",direction:"ltr"},so:{locale3:"som",englishName:"Somali",localizedName:"Af Soomaali",direction:"ltr"},sp:{locale3:"nso",englishName:"Sepedi",localizedName:"Sesotho sa Leboa",direction:"ltr"},sq:{locale3:"sqi",englishName:"Albanian",localizedName:"Shqip",direction:"ltr"},sr:{locale3:"srp",englishName:"Serbian",localizedName:"српски језик",direction:"ltr"},sr_BA:{englishName:"Serbian (Bosnia and Herzegovina)",localizedName:"Српски (Босна и Херцеговина)",direction:"ltr",fallbackLocales:["sr"]},ss:{locale3:"ssw",englishName:"Swati",localizedName:"SiSwati",direction:"ltr"},st:{locale3:"sot",englishName:"Sotho",localizedName:"Sesotho",direction:"ltr"},su:{locale3:"sun",englishName:"Sundanese",localizedName:"Basa Sunda",direction:"ltr"},sv:{locale3:"swe",englishName:"Swedish",localizedName:"Svenska",direction:"ltr"},sv_FI:{englishName:"Swedish (Finland)",localizedName:"svenska (Finland)",direction:"ltr",fallbackLocales:["sv"]},sw:{locale3:"swa",englishName:"Swahili",localizedName:"Kiswahili",direction:"ltr"},sx:{locale3:"sus",englishName:"Susu",localizedName:"Sosoxui",direction:"ltr"},sy:{locale3:"syr",englishName:"Syriac",localizedName:"ܠܫܢܐ ܣܘܪܝܝܐ Lešānā Suryāyā",direction:"rtl"},sz:{locale3:"sas",englishName:"Sasak",localizedName:"ᬪᬵᬲᬵᬲᬓ᭄ᬱᬓ᭄",direction:"ltr"},ta:{locale3:"tam",englishName:"Tamil",localizedName:"தமிழ்",direction:"ltr"},tc:{locale3:"tog",englishName:"Tonga (Nyasa)",localizedName:"chiTonga",direction:"ltr"},te:{locale3:"tel",englishName:"Telugu",localizedName:"తెలుగు",direction:"ltr"},tg:{locale3:"tgk",englishName:"Tajik",localizedName:"тоҷикӣ",direction:"ltr"},th:{locale3:"tha",englishName:"Thai",localizedName:"ไทย",direction:"ltr"},ti:{locale3:"tir",englishName:"Tigrinya",localizedName:"ትግርኛ",direction:"ltr"},tj:{locale3:"tli",englishName:"Tlingit",localizedName:"Lingít",direction:"ltr"},tk:{locale3:"tuk",englishName:"Turkmen",localizedName:"Türkmen",direction:"ltr"},tl:{locale3:"tgl",englishName:"Tagalog",localizedName:"Wikang Tagalog",direction:"ltr"},tm:{locale3:"tmh",englishName:"Tamashek",localizedName:"Tafaghist",direction:"ltr"},tn:{locale3:"tsn",englishName:"Tswana",localizedName:"Setswana",direction:"ltr"},to:{locale3:"ton",englishName:"Tonga",localizedName:"faka Tonga",direction:"ltr"},tp:{locale3:"tpi",englishName:"Tok Pisin",localizedName:"Tok Pisin",direction:"ltr"},tq:{locale3:"tig",englishName:"Tigre",localizedName:"ትግረ",direction:"ltr"},tr:{locale3:"tur",englishName:"Turkish",localizedName:"Türkçe",direction:"ltr"},ts:{locale3:"tso",englishName:"Tsonga",localizedName:"Xitsonga",direction:"ltr"},tt:{locale3:"tat",englishName:"Tatar",localizedName:"татар теле",direction:"ltr"},tu:{locale3:"tum",englishName:"Tumbuka",localizedName:"chiTumbuka",direction:"ltr"},tv:{locale3:"tvl",englishName:"Tuvalu",localizedName:"Te Ggana Tuuvalu",direction:"ltr"},tw:{locale3:"twi",englishName:"Twi",localizedName:"Twi",direction:"ltr",fallbackLocales:["ak"]},tx:{locale3:"tyv",englishName:"Tuvinian",localizedName:"тыва дыл",direction:"ltr"},ty:{locale3:"tah",englishName:"Tahitian",localizedName:"Reo Tahiti",direction:"ltr"},tz:{locale3:"tsi",englishName:"Tsimshian",localizedName:"Tsmksian",direction:"ltr"},ua:{locale3:"nah",englishName:"Náhuatl",localizedName:"Náhuatl",direction:"ltr"},ud:{locale3:"udm",englishName:"Udmurt",localizedName:"удмурт кыл",direction:"ltr"},ug:{locale3:"uig",englishName:"Uighur",localizedName:"ئۇيغۇرچە‎",direction:"rtl"},ui:{locale3:"mni",englishName:"Manipuri",localizedName:"Meitei",direction:"ltr"},uk:{locale3:"ukr",englishName:"Ukrainian",localizedName:"Українська",direction:"ltr"},um:{locale3:"umb",englishName:"Umbundu",localizedName:"Úmbúndú",direction:"ltr"},un:{locale3:"arn",englishName:"Mapudungun",localizedName:"Mapuche",direction:"ltr"},ur:{locale3:"urd",englishName:"Urdu",localizedName:"اردو",direction:"rtl"},ut:{locale3:"tet",englishName:"Tetum",localizedName:"Lia-Tetun",direction:"ltr"},uy:{locale3:"kum",englishName:"Kumyk",localizedName:"къумукъ тил/qumuq til",direction:"ltr"},uz:{locale3:"uzb",englishName:"Uzbek",localizedName:"ЎзбекЎзбек тили",direction:"ltr"},va:{locale3:"vai",englishName:"Vai",localizedName:"ꕙꔤ",direction:"ltr"},ve:{locale3:"ven",englishName:"Venda",localizedName:"Tshivenḓa",direction:"ltr"},vi:{locale3:"vie",englishName:"Vietnamese",localizedName:"Tiếng Việt",direction:"ltr"},vs:{locale3:"bla",englishName:"Siksika",localizedName:"ᓱᖽᐧᖿ",direction:"ltr"},vt:{locale3:"vot",englishName:"Votic",localizedName:"vađđa ceeli",direction:"ltr"},wa:{locale3:"wln",englishName:"Walloon",localizedName:"walon",direction:"ltr"},wl:{locale3:"wal",englishName:"Wolaitta",localizedName:"Wolayttatto Doonaa",direction:"ltr"},wo:{locale3:"wol",englishName:"Wolof",localizedName:"Wollof",direction:"ltr"},wr:{locale3:"war",englishName:"Waray",localizedName:"Winaray",direction:"ltr"},ws:{locale3:"was",englishName:"Washo",localizedName:"wá:šiw ʔítlu",direction:"ltr"},xa:{locale3:"xal",englishName:"Kalmyk",localizedName:"Хальмг келн",direction:"ltr"},xh:{locale3:"xho",englishName:"Xhosa",localizedName:"isiXhosa",direction:"ltr"},xl:{locale3:"lol",englishName:"Mongo",localizedName:"Lomongo",direction:"ltr"},xr:{locale3:"mwr",englishName:"Marwari",localizedName:"मारवाड़ी",direction:"ltr"},xs:{locale3:"suk",englishName:"Sukuma",localizedName:"Kɪsukuma",direction:"ltr"},xt:{locale3:"srn",englishName:"Sranan Tongo",localizedName:"Sranan Tongo",direction:"ltr"},ya:{locale3:"yao",englishName:"Yao",localizedName:"chiYao",direction:"ltr"},yi:{locale3:"yid",englishName:"Yiddish",localizedName:"ייִדיש",direction:"ltr"},yk:{locale3:"sah",englishName:"Yakut",localizedName:"Сахалыы",direction:"ltr"},yn:{locale3:"myn",englishName:"Mayan",localizedName:"Maya",direction:"ltr"},yo:{locale3:"yor",englishName:"Yoruba",localizedName:"Yorùbá",direction:"ltr"},yp:{locale3:"yap",englishName:"Yapese",localizedName:"Thin nu Wa’ab",direction:"ltr"},za:{locale3:"zha",englishName:"Zhuang",localizedName:"Saɯ cueŋƅ",direction:"ltr"},ze:{locale3:"zen",englishName:"Zenaga",localizedName:"Tuẓẓungiyya",direction:"ltr"},zg:{locale3:"zgh",englishName:"Standard Moroccan Tamazight",localizedName:"ⵜⴰⵎⴰⵣⵉⵖⵜ ⵜⴰⵏⴰⵡⴰⵢⵜ",direction:"ltr"},zh_CN:{locale3:"zho",englishName:"Chinese, Simplified",localizedName:"中文 (中国)",direction:"ltr"},zh_HK:{englishName:"Chinese, Hong Kong",localizedName:"中文 (香港)",direction:"ltr"},zh_MO:{englishName:"Chinese (Macau)",localizedName:"中文（澳门）",direction:"ltr"},zh_SG:{englishName:"Chinese (Singapore)",localizedName:"中文（新加坡）",direction:"ltr"},zh_TW:{englishName:"Chinese, Traditional",localizedName:"中文 (台灣)",direction:"ltr"},zn:{locale3:"zun",englishName:"Zuni",localizedName:"Shiwi'ma",direction:"ltr"},zp:{locale3:"zap",englishName:"Zapotec",localizedName:"Diidxazá",direction:"ltr"},zt:{locale3:"tzj",englishName:"tz'utujil",localizedName:"Tzʼutujiil",direction:"ltr"},zu:{locale3:"zul",englishName:"Zulu",localizedName:"isiZulu",direction:"ltr"},zz:{locale3:"zza",englishName:"Zaza",localizedName:"kirmanckî",direction:"ltr"}};phet.chipper.localeData=AT;self.phet=self.phet||{};self.phet.chipper=self.phet.chipper||{};const gm={aa:{},ab:{},ac:{},ad:{},af:{},ag:{},ah:{},ai:{},aj:{},ak:{},ak_FT:{},al:{},am:{},an:{},ao:{},ap:{},ar:{},ar_AE:{},ar_BH:{},ar_DJ:{},ar_DZ:{},ar_EG:{},ar_EH:{},ar_ER:{},ar_IQ:{},ar_JO:{},ar_KM:{},ar_KW:{},ar_LB:{},ar_LY:{},ar_MA:{},ar_MR:{},ar_OM:{},ar_QA:{},ar_SA:{},ar_SD:{},ar_SO:{},ar_SY:{},ar_TD:{},ar_TN:{},ar_YE:{},as:{},at:{},au:{},av:{},aw:{},ax:{},ay:{},az:{},ba:{},bb:{},bc:{},bd:{},be:{},bg:{},bi:{},bj:{},bk:{},bl:{},bm:{},bn:{},bo:{},bp:{},bq:{},br:{},bs:{},bt:{},bu:{},bx:{},by:{},ca:{},cb:{},cc:{},cd:{},ce:{},ch:{},ci:{},cj:{},ck:{},cl:{},cm:{},cn:{},co:{},cp:{},cq:{},cr:{},cs:{},ct:{},cv:{},cw:{},cy:{},cz:{},da:{},db:{},de:{},de_AT:{},de_CH:{},de_LI:{},de_LU:{},dg:{},di:{},dk:{},dl:{},dm:{},dn:{},dr:{},ds:{},du:{},dv:{},dw:{},dy:{},dz:{},ed:{},ee:{},ef:{},ek:{},el:{},em:{},en:{},en_AU:{},en_BI:{},en_BW:{},en_BZ:{},en_CA:{},en_CB:{},en_CM:{},en_ER:{},en_ET:{},en_GB:{},en_GH:{},en_GM:{},en_IE:{},en_IN:{},en_JM:{},en_KE:{},en_LR:{},en_LS:{},en_MU:{},en_MW:{},en_MY:{},en_NA:{},en_NG:{},en_NZ:{},en_PH:{},en_RW:{},en_SC:{},en_SL:{},en_SS:{},en_SZ:{},en_TT:{},en_TZ:{},en_UG:{},en_ZA:{},en_ZM:{},en_ZW:{},er:{},es:{},es_AR:{},es_BO:{},es_CL:{},es_CO:{},es_CR:{},es_DO:{},es_EC:{},es_ES:{},es_GQ:{},es_GT:{},es_HN:{},es_MX:{},es_NI:{},es_PA:{},es_PE:{},es_PR:{},es_PY:{},es_SV:{},es_US:{},es_UY:{},es_VE:{},et:{},eu:{},ew:{},fa:{},fa_DA:{},ff:{},fg:{},fi:{},fj:{},fl:{},fn:{},fo:{},fr:{},fr_BE:{},fr_BF:{},fr_BI:{},fr_BJ:{},fr_CA:{},fr_CD:{},fr_CF:{},fr_CG:{},fr_CH:{},fr_CI:{},fr_CM:{},fr_DJ:{},fr_EH:{},fr_GA:{},fr_GN:{},fr_GQ:{},fr_KM:{},fr_LU:{},fr_MC:{},fr_MG:{},fr_ML:{},fr_NE:{},fr_RW:{},fr_SC:{},fr_SN:{},fr_TD:{},fr_TG:{},fs:{},fu:{},fy:{},ga:{},gb:{},gc:{},gd:{},gf:{},gg:{},gk:{},gl:{},gn:{},go:{},gr:{},gs:{},gt:{},gu:{},gv:{},gw:{},gy:{},ha:{},hd:{},hh:{},hi:{},hk:{},hl:{},hm:{},hn:{},ho:{},hp:{},hr:{},hr_BA:{},hs:{},ht:{},hu:{},hw:{},hx:{},hy:{},hz:{},ib:{},ig:{},ih:{},ii:{},ik:{},il:{},im:{},in:{},iq:{},is:{},it:{},it_CH:{},iu:{},iv:{},iw:{},ix:{},ja:{},jb:{},jp:{},jr:{},jv:{},ka:{},kb:{},kc:{},kd:{},ke:{},kf:{},kg:{},kh:{},ki:{},kj:{},kk:{},kl:{},km:{},kn:{},ko:{},kp:{},kq:{},kr:{},ks:{},kt:{},ku:{},ku_TR:{},kv:{},kw:{},kx:{},ky:{},kz:{},lb:{},ld:{},lg:{},lh:{},li:{},lk:{},ll:{},lm:{},ln:{},lo:{},lp:{},ls:{},lt:{},lu:{},lv:{},lw:{},lx:{},ly:{},lz:{},ma:{},mb:{},mc:{},md:{},me:{},mf:{},mg:{},mh:{},mi:{},mk:{},ml:{},mm:{},mn:{},mo:{},mq:{},mr:{},ms:{},ms_MY:{},mt:{},mu:{},mv:{},mw:{},mx:{},my:{},mz:{},na:{},nb:{},nc:{},nd:{},ne:{},nf:{},ng:{},nh:{},ni:{},nk:{},nl:{},nl_BE:{},nm:{},nn:{},np:{},nq:{},nr:{},ns:{},nt:{},nu:{},nv:{},nw:{},nx:{},ny:{},nz:{},oa:{},oc:{},oe:{},og:{},oi:{},oj:{},ok:{},ol:{},om:{},oo:{},op:{},or:{},os:{},ot:{},ou:{},pa:{},pg:{},pl:{},pm:{},pn:{},pp:{},ps:{},pt:{},pt_AO:{},pt_BR:{},pt_CV:{},pt_GQ:{},pt_GW:{},pt_MZ:{},pt_ST:{},pu:{},qc:{},qe:{},qu:{},ra:{},rb:{},rc:{},re:{},rh:{},ri:{},rj:{},rl:{},rn:{},ro:{},rp:{},rr:{},ru:{},rw:{},ry:{},rz:{},sb:{},sc:{},sd:{},se:{},sg:{},sh:{},si:{},sj:{},sk:{},sl:{},sm:{},sn:{},so:{},sp:{},sq:{},sr:{},sr_BA:{},ss:{},st:{},su:{},sv:{},sv_FI:{},sw:{},sx:{},sy:{},sz:{},ta:{},tc:{},te:{},tg:{},th:{},ti:{},tj:{},tk:{},tl:{},tm:{},tn:{},to:{},tp:{},tq:{},tr:{},ts:{},tt:{},tu:{},tv:{},tw:{},tx:{},ty:{},tz:{},ua:{},ud:{},ug:{},ui:{},uk:{},um:{},un:{},ur:{},ut:{},uy:{},uz:{},va:{},ve:{},vi:{},vs:{},vt:{},wa:{},wl:{},wo:{},wr:{},ws:{},xa:{},xh:{},xl:{},xr:{},xs:{},xt:{},ya:{},yi:{},yk:{},yn:{},yo:{},yp:{},za:{},ze:{},zg:{},zh_CN:{},zh_HK:{},zh_MO:{},zh_SG:{},zh_TW:{},zn:{},zp:{},zt:{},zu:{},zz:{}};phet.chipper.strings=gm;phet.chipper.availableLocales&&Object.keys(gm).forEach(n=>{phet.chipper.availableLocales.includes(n)||delete gm[n]});(function(n,e){typeof self.define=="function"&&self.define.amd?self.define([],e):n.QueryStringMachine=e()})(self,()=>{const n=",",e=()=>{try{return localStorage.getItem("phetTeamMember")==="true"}catch{return!1}},t=i=>i.length===0||i.indexOf("?")===0;return function(){const i=(ne,ae,pe,N,Ie)=>{if(!ne)if(N.public)if(s.addWarning(ae,pe,Ie),N.hasOwnProperty("defaultValue"))pe=N.defaultValue;else{const $e=re[N.type];G($e.hasOwnProperty("defaultValue"),"Type must have a default value if the provided schema does not have one."),pe=$e.defaultValue}else G(ne,Ie);return pe},s={warnings:[],get:function(ne,ae){return this.getForString(ne,ae,self.location.search)},getAll:function(ne){return this.getAllForString(ne,self.location.search)},getForString:function(ne,ae,pe){if(!t(pe))throw new Error(`Query strings should be either the empty string or start with a "?": ${pe}`);const N=ae.private&&!e()?[]:r(ne,pe);o(ne,ae);let Ie=y(ne,ae,N);ae.hasOwnProperty("validValues")?Ie=i(z(Ie,ae.validValues),ne,Ie,ae,`Invalid value supplied for key "${ne}": ${Ie} is not a member of valid values: ${ae.validValues.join(", ")}`):ae.hasOwnProperty("isValidValue")&&(Ie=i(ae.isValidValue(Ie),ne,Ie,ae,`Invalid value supplied for key "${ne}": ${Ie}`));let $e=re[ae.type].isValidValue(Ie);if(ae.type==="array"&&Array.isArray(Ie)){let Ee=!0;for(let Je=0;Je<Ie.length;Je++){const Ge=Ie[Je];if(!re[ae.elementSchema.type].isValidValue(Ge)){Ee=!1;break}if(ae.elementSchema.hasOwnProperty("isValidValue")&&!ae.elementSchema.isValidValue(Ge)){Ee=!1;break}if(ae.elementSchema.hasOwnProperty("validValues")&&!z(Ge,ae.elementSchema.validValues)){Ee=!1;break}}$e=$e&&Ee}return Ie=i($e,ne,Ie,ae,`Invalid value for type, key: ${ne}`),Ie},getAllForString:function(ne,ae){const pe={};for(const N in ne)ne.hasOwnProperty(N)&&(pe[N]=this.getForString(N,ne[N],ae));return pe},containsKey:function(ne){return this.containsKeyForString(ne,self.location.search)},containsKeyForString:function(ne,ae){if(!t(ae))throw new Error(`Query strings should be either the empty string or start with a "?": ${ae}`);return r(ne,ae).length>0},deepEquals:function(ne,ae){if(typeof ne!=typeof ae)return!1;if(typeof ne=="string"||typeof ne=="number"||typeof ne=="boolean")return ne===ae;if(ne===null&&ae===null||ne===void 0&&ae===void 0)return!0;if(ne===null&&ae===void 0||ne===void 0&&ae===null)return!1;const pe=Object.keys(ne),N=Object.keys(ae);if(pe.length!==N.length)return!1;if(pe.length===0)return ne===ae;for(let Ie=0;Ie<pe.length;Ie++){if(pe[Ie]!==N[Ie])return!1;const $e=ne[pe[Ie]],Ee=ae[pe[Ie]];if(!s.deepEquals($e,Ee))return!1}return!0},removeKeyValuePair:function(ne,ae){if(ne.indexOf("?")===0){const pe=[],Ie=ne.substring(1).split("&");for(let $e=0;$e<Ie.length;$e++){const Ee=Ie[$e],Je=Ee.split("=");decodeURIComponent(Je[0])!==ae&&pe.push(Ee)}return pe.length>0?`?${pe.join("&")}`:""}else return ne},removeKeyValuePairs:function(ne,ae){for(let pe=0;pe<ae.length;pe++)ne=this.removeKeyValuePair(ne,ae[pe]);return ne},appendQueryString:function(ne,ae){if((ae.indexOf("?")===0||ae.indexOf("&")===0)&&(ae=ae.substring(1)),ae.length===0)return ne;const pe=ne.indexOf("?")>=0?"&":"?";return ne+pe+ae},appendQueryStringArray:function(ne,ae){for(let pe=0;pe<ae.length;pe++)ne=this.appendQueryString(ne,ae[pe]);return ne},getQueryString:function(ne){const ae=ne.indexOf("?");return ae>=0?ne.substring(ae):"?"},addWarning:function(ne,ae,pe){let N=!1;for(let Ie=0;Ie<this.warnings.length;Ie++){const $e=this.warnings[Ie];if(ne===$e.key&&ae===$e.value&&pe===$e.message){N=!0;break}}N||(console.warn(pe),this.warnings.push({key:ne,value:ae,message:pe}))},hasWarning:function(ne){let ae=!1;for(let pe=0;pe<this.warnings.length&&!ae;pe++)ae=this.warnings[pe].key===ne;return ae},getQueryParametersFromString:function(ne){return ne.indexOf("?")===0?ne.substring(1).split("&"):[]},getSingleQueryParameterString:function(ne,ae){const pe=this.getQueryString(ae),N=this.getQueryParametersFromString(pe);for(let Ie=0;Ie<N.length;Ie++){const $e=N[Ie],Ee=$e.split("=");if(decodeURIComponent(Ee[0])===ne)return $e}return null}},r=function(ne,ae){const pe=[],N=ae.slice(1).split("&");for(let Ie=0;Ie<N.length;Ie++){const $e=N[Ie].split("="),Ee=$e[0],Je=$e.slice(1).join("=");Ee===ne&&(Je?pe.push(decodeURIComponent(Je)):pe.push(null))}return pe},o=function(ne,ae){G(ae.hasOwnProperty("type"),`type field is required for key: ${ne}`),G(re.hasOwnProperty(ae.type),`invalid type: ${ae.type} for key: ${ne}`),ae.hasOwnProperty("parse")&&G(typeof ae.parse=="function",`parse must be a function for key: ${ne}`),G(!(ae.hasOwnProperty("validValues")&&ae.hasOwnProperty("isValidValue")),ae),ae.hasOwnProperty("validValues")&&G(Array.isArray(ae.validValues),`isValidValue must be an array for key: ${ne}`),ae.hasOwnProperty("isValidValue")&&G(typeof ae.isValidValue=="function",`isValidValue must be a function for key: ${ne}`),ae.hasOwnProperty("defaultValue")&&G(re[ae.type].isValidValue(ae.defaultValue),`defaultValue incorrect type: ${ne}`),ae.hasOwnProperty("validValues")&&ae.validValues.forEach(pe=>G(re[ae.type].isValidValue(pe),`validValue incorrect type for key: ${ne}`)),ae.hasOwnProperty("defaultValue")&&ae.hasOwnProperty("validValues")&&G(z(ae.defaultValue,ae.validValues),ae),ae.hasOwnProperty("public")&&ae.public&&ae.type!=="flag"&&G(ae.hasOwnProperty("defaultValue"),`defaultValue is required when public: true for key: ${ne}`),g(ne,ae,re[ae.type].required,re[ae.type].optional),re[ae.type].validateSchema&&re[ae.type].validateSchema(ne,ae)},d=function(ne,ae){ae.hasOwnProperty("separator")&&G(typeof ae.separator=="string"&&ae.separator.length===1,`invalid separator: ${ae.separator}, for key: ${ne}`),G(!ae.elementSchema.hasOwnProperty("public"),"Array elements should not declare public; it comes from the array schema itself."),o(`${ne}.element`,ae.elementSchema)},g=function(ne,ae,pe,N){const Ie=Object.getOwnPropertyNames(ae);pe.forEach(Ee=>{G(Ie.indexOf(Ee)!==-1,`missing required property: ${Ee} for key: ${ne}`)});const $e=pe.concat(N);Ie.forEach(Ee=>{G(Ee==="type"||$e.indexOf(Ee)!==-1,`unsupported property: ${Ee} for key: ${ne}`)})},y=function(ne,ae,pe){let N;return G(pe.length<=1,`query parameter cannot occur multiple times: ${ne}`),ae.type==="flag"?N=re[ae.type].parse(ne,ae,pe[0]):(G(pe[0]!==void 0||ae.hasOwnProperty("defaultValue"),`missing required query parameter: ${ne}`),pe[0]===void 0?N=ae.defaultValue:N=re[ae.type].parse(ne,ae,pe[0])),N},S=function(ne,ae,pe){return pe===null?!0:pe===void 0?!1:pe},T=function(ne,ae,pe){return pe==="true"?!0:pe==="false"?!1:pe},L=function(ne,ae,pe){const N=Number(pe);return pe===null||isNaN(N)?pe:N},x=function(ne,ae,pe){return pe},A=function(ne,ae,pe){let N;return pe===null?N=[]:N=pe.split(ae.separator||n).map(Ie=>y(ne,ae.elementSchema,[Ie])),N},Q=function(ne,ae,pe){return ae.parse(pe)},z=function(ne,ae){let pe=!1;for(let N=0;N<ae.length&&!pe;N++)pe=s.deepEquals(ae[N],ne);return pe},G=function(ne,ae){if(!ne)throw console&&console.log&&console.log(ae),new Error(`Query String Machine Assertion failed: ${ae}`)},re={flag:{required:[],optional:["private","public"],validateSchema:null,parse:S,isValidValue:ne=>ne===!0||ne===!1,defaultValue:!0},boolean:{required:[],optional:["defaultValue","private","public"],validateSchema:null,parse:T,isValidValue:ne=>ne===!0||ne===!1},number:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:L,isValidValue:ne=>typeof ne=="number"&&!isNaN(ne)},string:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:x,isValidValue:ne=>ne===null||typeof ne=="string"},array:{required:["elementSchema"],optional:["defaultValue","validValues","isValidValue","separator","validValues","private","public"],validateSchema:d,parse:A,isValidValue:ne=>Array.isArray(ne)||ne===null},custom:{required:["parse"],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:Q,isValidValue:ne=>!0}};return s}()});(function(){var g,y,S,T;self.phet=self.phet??{},self.phet.preloads=self.phet.preloads||{},self.phet.chipper=self.phet.chipper??{};const e=(phet.chipper.packageObject??{}).phet??{},t=phet.chipper.allowLocaleSwitching??!0,i=e.simFeatures??{},s="default",r="en",o=i.colorProfiles??[s],d={allowLinks:{type:"boolean",defaultValue:!0,public:!0},audio:{type:"string",defaultValue:"enabled",validValues:["enabled","disabled","muted"],public:!0},binder:{type:"flag"},brand:{type:"string",defaultValue:"adapted-from-phet"},buildCompatible:{type:"flag"},continuousTest:{type:"string",defaultValue:""},colorProfile:{type:"string",defaultValue:o[0],validValues:o,public:!0},launchCounter:{type:"flag"},debugger:{type:"flag"},deprecationWarnings:{type:"flag"},dev:{type:"flag"},disableModals:{type:"flag"},ea:{type:"flag"},eall:{type:"flag"},extraSoundInitiallyEnabled:{type:"flag",public:!0},forceSVGRefresh:{type:"flag"},fuzz:{type:"flag"},fuzzBoard:{type:"flag"},fuzzMouse:{type:"flag"},fuzzPointers:{type:"number",defaultValue:1},fuzzTouch:{type:"flag"},fuzzRate:{type:"number",defaultValue:100,isValidValue:function(L){return L>0}},ga4:{type:"string",defaultValue:null,public:!0},gameUp:{type:"flag"},gameUpTestHarness:{type:"flag"},gameUpLogging:{type:"flag"},gaPage:{type:"string",defaultValue:null},homeScreen:{type:"boolean",defaultValue:!0,public:!0},initialScreen:{type:"number",defaultValue:0,public:!0},interruptMultitouch:{type:"boolean",defaultValue:((g=e==null?void 0:e.simFeatures)==null?void 0:g.interruptMultitouch)??!1},legendsOfLearning:{type:"flag"},listenerLimit:{type:"number",defaultValue:Number.POSITIVE_INFINITY,public:!1},locale:{type:"string",defaultValue:self.phet.chipper.locale??r},supportsDynamicLocale:{type:"boolean",defaultValue:t&&!!i.supportsDynamicLocale},log:{type:"flag"},memoryLimit:{type:"number",defaultValue:0},mobileA11yTest:{type:"flag"},"phet-android-app":{type:"flag"},"phet-app":{type:"flag"},playbackMode:{type:"boolean",defaultValue:!1},postMessageOnBeforeUnload:{type:"flag"},postMessageOnError:{type:"flag"},postMessageOnLoad:{type:"flag"},postMessageOnReady:{type:"flag"},preventFullScreen:{type:"flag"},preventMultitouch:{type:"boolean",defaultValue:((y=e==null?void 0:e.simFeatures)==null?void 0:y.preventMultitouch)??!1},profiler:{type:"flag"},qrCode:{type:"flag"},randomSeed:{type:"number",defaultValue:Math.random()},regionAndCulture:{public:!0,type:"string",defaultValue:((S=e==null?void 0:e.simFeatures)==null?void 0:S.defaultRegionAndCulture)??"usa"},rootRenderer:{type:"string",defaultValue:null,validValues:[null,"canvas","svg","dom","webgl","vello"]},sceneryLog:{type:"array",elementSchema:{type:"string"},defaultValue:null},sceneryStringLog:{type:"flag"},screens:{type:"array",elementSchema:{type:"number",isValidValue:Number.isInteger},defaultValue:null,isValidValue:function(L){return L===null||L.length===he.uniq(L).length&&L.length>0},public:!0},showAnswers:{type:"flag",private:!0},showCanvasNodeBounds:{type:"flag"},showFittedBlockBounds:{type:"flag"},showHitAreas:{type:"flag"},showPointerAreas:{type:"flag"},showPointers:{type:"flag"},showVisibleBounds:{type:"flag"},listenerOrder:{type:"string",defaultValue:"default",isValidValue:function(L){const x=/random(?:%28|\()(\d+)(?:%29|\))/;return L==="default"||L==="random"||L==="reverse"||L.match(x)}},speechSynthesisFromParent:{type:"flag"},speed:{type:"number",defaultValue:1,isValidValue:function(L){return L>0}},stringTest:{type:"string",defaultValue:null},keyboardLocaleSwitcher:{type:"flag"},supportsDescriptionPlugin:{type:"boolean",defaultValue:!!i.supportsDescriptionPlugin},supportsInteractiveDescription:{type:"boolean",defaultValue:!!i.supportsInteractiveDescription},supportsInteractiveHighlights:{type:"boolean",defaultValue:i.hasOwnProperty("supportsInteractiveHighlights")?!!i.supportsInteractiveHighlights:!!i.supportsInteractiveDescription},interactiveHighlightsInitiallyEnabled:{type:"flag",public:!0},supportsGestureControl:{type:"boolean",defaultValue:!!i.supportsGestureControl},supportsVoicing:{type:"boolean",defaultValue:!!i.supportsVoicing},supportsTier1Voicing:{type:"boolean",defaultValue:!!i.supportsTier1Voicing},swashText:{type:"boolean",defaultValue:!0},swashTextColor:{type:"string",defaultValue:""},voicingInitiallyEnabled:{type:"flag",public:!0},preferencesStorage:{type:"flag"},printVoicingResponses:{type:"flag"},supportsPanAndZoom:{type:"boolean",public:!0,defaultValue:!i.hasOwnProperty("supportsPanAndZoom")||i.supportsPanAndZoom},supportsSound:{type:"boolean",defaultValue:!!i.supportsSound},supportsExtraSound:{type:"boolean",defaultValue:!!i.supportsExtraSound},vibrationParadigm:{type:"string",defaultValue:null},voicingAddObjectResponses:{type:"flag",public:!0},voicingAddContextResponses:{type:"flag",public:!0},voicingAddHintResponses:{type:"flag",public:!0},voicingCollapseToolbar:{type:"flag",public:!0},voicingRemoveToolbar:{type:"flag",public:!0},webgl:{type:"boolean",defaultValue:!0},yotta:{type:"boolean",defaultValue:!0,public:!0}};self.phet.chipper.queryParameters=QueryStringMachine.getAll(d),self.phet.chipper.isProduction=self.document?((T=self.document.querySelector('meta[name="phet-sim-level"]'))==null?void 0:T.content)==="production":!0,self.phet.chipper.isApp=phet.chipper.queryParameters["phet-app"]||phet.chipper.queryParameters["phet-android-app"],function(){const L=!phet.chipper.isProduction&&phet.chipper.queryParameters.eall;(L||!phet.chipper.isProduction&&phet.chipper.queryParameters.ea||phet.chipper.isDebugBuild)&&self.assertions.enableAssert(),L&&self.assertions.enableAssertSlow()}();{self.phet.chipper.colorProfiles=o,self.phet.chipper.isFuzzEnabled=()=>self.phet.chipper.queryParameters.fuzz||self.phet.chipper.queryParameters.fuzzMouse||self.phet.chipper.queryParameters.fuzzTouch||self.phet.chipper.queryParameters.fuzzBoard,self.phet.chipper.supportsAnyVoicing=()=>self.phet.chipper.queryParameters.supportsVoicing||self.phet.chipper.queryParameters.supportsTier1Voicing,self.phet.chipper.queryParameters.log&&(self.phet.log=function(x,A){A=he.assignIn({color:"#009900"},A),console.log(`%c${x}`,`color: ${A.color}`)}),self.phet.chipper.brand=self.phet.chipper.brand||phet.chipper.queryParameters.brand||"adapted-from-phet";const L=typeof self<"u"&&phet.chipper.queryParameters.stringTest?phet.chipper.queryParameters.stringTest:null;self.phet.chipper.mapString=function(x){const A="script";return L===null?x:L==="double"?`${x}:${x}`:L==="long"?"12345678901234567890123456789012345678901234567890":L==="rtl"?"‫تست (زبان)‬":L==="xss"?`${x}<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg==" onload="window.location.href=atob('aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQ==')" />`:L==="xss2"?`${x}<${A}>alert('XSS')</${A}>`:L==="none"||L==="dynamic"?x:L},phet.chipper.remapLocale=(x,A=!1)=>{const Q=x;if(x.length<5)x=x.toLowerCase();else{x=x.replace(/-/,"_");const ne=x.split("_");ne.length===2&&(x=ne[0].toLowerCase()+"_"+ne[1].toUpperCase())}if(x.length===3){for(const ne of Object.keys(phet.chipper.localeData))if(phet.chipper.localeData[ne].locale3===x){x=ne;break}}const z=/^[a-zA-Z]{2}$/,G=/^[a-zA-Z]{3}$/,re=/^[a-zA-Z]{2}[_-][a-zA-Z]{2}$/;if(!phet.chipper.localeData[x]){const ne=Q;!z.test(ne)&&!G.test(ne)&&!re.test(ne)&&(A||QueryStringMachine.addWarning("locale",Q,`Invalid locale format received: ${ne}. ?locale query parameter accepts the following formats: "xx" for ISO-639-1, "xx_XX" for ISO-639-1 and a 2-letter country code, "xxx" for ISO-639-2`)),x=r}return x},phet.chipper.getValidRuntimeLocale=x=>{var z;return[x,...((z=phet.chipper.localeData[x])==null?void 0:z.fallbackLocales)??[],r].find(G=>!!phet.chipper.strings[G])},phet.chipper.checkAndRemapLocale=(x=phet.chipper.queryParameters.locale,A=!1)=>{var G;if(!phet.chipper.localeData||!((G=phet.chipper.strings)!=null&&G.hasOwnProperty(r))||!x)return x;const Q=phet.chipper.remapLocale(x,A),z=phet.chipper.getValidRuntimeLocale(Q);return phet.chipper.remappedLocale=Q,phet.chipper.locale=z,z},phet.chipper.queryParameters.locale===null&&(phet.chipper.queryParameters.locale=r),phet.chipper.checkAndRemapLocale()}self.phet.chipper.makeEverythingSlow=function(){self.setInterval(()=>{},16)},self.phet.chipper.makeRandomSlowness=function(){self.setInterval(()=>{},Math.ceil(100+Math.random()*200))},function(){self.phet.chipper.reportContinuousTestResult=L=>{self.parent&&self.parent.postMessage(JSON.stringify(he.assignIn({continuousTest:JSON.parse(phet.chipper.queryParameters.continuousTest),url:self.location.href},L)),"*")},phet.chipper.queryParameters.continuousTest&&(self.addEventListener("error",L=>{let x="",A="";L&&L.message&&(x=L.message),L&&L.error&&L.error.stack&&(A=L.error.stack),phet.chipper.reportContinuousTestResult({type:"continuous-test-error",message:x,stack:A})}),self.addEventListener("beforeunload",L=>{phet.chipper.reportContinuousTestResult({type:"continuous-test-unload"})}),self.open=()=>({focus:()=>{},blur:()=>{}})),phet.chipper.queryParameters.postMessageOnError&&self.addEventListener("error",L=>{let x="",A="";L&&L.message&&(x=L.message),L&&L.error&&L.error.stack&&(A=L.error.stack),self.parent&&self.parent.postMessage(JSON.stringify({type:"error",url:self.location.href,message:x,stack:A}),"*")}),phet.chipper.queryParameters.postMessageOnBeforeUnload&&self.addEventListener("beforeunload",L=>{self.parent&&self.parent.postMessage(JSON.stringify({type:"beforeUnload"}),"*")})}(),(()=>{const L={supportsInteractiveDescription:{type:"boolean"},supportsVoicing:{type:"boolean"},supportsTier1Voicing:{type:"boolean"},supportsInteractiveHighlights:{type:"boolean"},supportsDescriptionPlugin:{type:"boolean"},supportsSound:{type:"boolean"},supportsExtraSound:{type:"boolean"},supportsDynamicLocale:{type:"boolean"},colorProfiles:{type:"array"},supportedRegionsAndCultures:{type:"array"},defaultRegionAndCulture:{type:"string"},preventMultitouch:{type:"boolean"},interruptMultitouch:{type:"boolean"}};if(Object.keys(L).forEach(x=>{}),e.hasOwnProperty("simFeatures")){const x=e.simFeatures;Object.keys(x).forEach(A=>{x[A],L[A]&&(L[A.type]==="boolean"||L[A.type])})}})()})();const aA={},iv=(n,e=self.phet&&self.phet.chipper&&self.phet.chipper.queryParameters&&phet.chipper.queryParameters.deprecationWarnings)=>{e&&!aA.hasOwnProperty(n)&&(aA[n]=!0,console.warn(`Deprecation warning: ${n}`))};class g0{constructor(e){var t,i;if(this.name=e,!!globalThis.self&&globalThis.phet){if(e==="chipper")return globalThis.phet.chipper=globalThis.phet.chipper||{},globalThis.phet.chipper.name="chipper",globalThis.phet.chipper.register=this.register.bind(globalThis.phet.chipper),globalThis.phet.chipper;{const s=!((i=(t=globalThis.phet)==null?void 0:t.chipper)!=null&&i.brand);Cr()&&!s&&Kt(!globalThis.phet[e],`namespace ${e} already exists`),globalThis.phet[e]=this}}}register(e,t){if(!globalThis.self)return t;if(e.includes("."))Kt(!this[e],`${e} is already registered for namespace ${this.name}`),this[e]=t;else{const i=e.split(".");let s=this;for(let o=0;o<i.length-1;o++)Kt(!!s[i[o]],`${[this.name].concat(i.slice(0,o+1)).join(".")} needs to be defined to register ${e}`),s=s[i[o]];const r=i[i.length-1];Kt(!s[r],`${e} is already registered for namespace ${this.name}`),s[r]=t}return t}}class gc{constructor(e){iv("EnumerationDeprecated should be exchanged for classes that extend EnumerationValue, see WilderEnumerationPatterns for examples."),Kt(e,"config must be provided");const t=!!e.keys,i=!!e.map;Kt(t!==i,"must provide one or the other but not both of keys/map");const s=e.keys||Object.keys(e.map),r=e.map||{};e=jn({phetioDocumentation:null,beforeFreeze:null},e),Kt(Array.isArray(s),"Values should be an array"),Kt(he.uniq(s).length===s.length,"There should be no duplicated values provided"),Cr()&&s.forEach(o=>Kt(typeof o=="string","Each value should be a string")),Cr()&&s.forEach(o=>Kt(/^[A-Z][A-Z0-9_]*$/g.test(o),"EnumerationDeprecated values should be uppercase alphanumeric with underscores and begin with a letter")),Kt(!he.includes(s,"VALUES"),"This is the name of a built-in provided value, so it cannot be included as an enumeration value"),Kt(!he.includes(s,"KEYS"),"This is the name of a built-in provided value, so it cannot be included as an enumeration value"),Kt(!he.includes(s,"includes"),"This is the name of a built-in provided value, so it cannot be included as an enumeration value"),this.phetioDocumentation=e.phetioDocumentation,this.KEYS=s,this.VALUES=[],s.forEach(o=>{const d=r[o]||{};Kt(d.name===void 0,'"rich" enumeration values cannot provide their own name attribute'),Kt(d.toString===Object.prototype.toString,'"rich" enumeration values cannot provide their own toString'),d.name=o,d.toString=()=>o,this[o]=d,this.VALUES.push(d)}),e.beforeFreeze&&e.beforeFreeze(this),Cr()&&Object.freeze(this),Cr()&&Object.freeze(this.VALUES),Cr()&&Object.freeze(this.KEYS),Cr()&&s.forEach(o=>Cr()&&Object.freeze(r[o]))}toString(){return this.KEYS.join(", ")}includes(e){return he.includes(this.VALUES,e)}getValue(e){return this[e]}getKey(e){return e.name}get values(){return this.VALUES}get keys(){return this.KEYS}get enumeration(){return this}static byKeys(e,t){return Kt(Array.isArray(e),"keys must be an array"),Kt(!t||t.keys===void 0),new gc(jn({keys:e},t))}static byMap(e,t){if(Kt(!t||t.map===void 0),Cr()){const i=he.values(e);Kt(i.length>=1,"must have at least 2 entries in an enumeration"),Kt(he.every(i,s=>s.constructor===i[0].constructor),"Values must have same constructor")}return new gc(jn({map:e},t))}}const bT=["string","number","boolean","function"],Zd=["valueType","validValues","valueComparisonStrategy","isValidValue","phetioType","validators"];class fs{static getValidatorValidationError(e){if(!(e instanceof Object))return"validator must be an Object";if(!(e.hasOwnProperty("isValidValue")||e.hasOwnProperty("valueType")||e.hasOwnProperty("validValues")||e.hasOwnProperty("valueComparisonStrategy")||e.hasOwnProperty("phetioType")||e.hasOwnProperty("validators")))return this.combineErrorMessages(`validator must have at least one of: ${Zd.join(",")}`,e.validationMessage);if(e.hasOwnProperty("valueType")){const t=fs.getValueOrElementTypeValidationError(e.valueType);if(t)return this.combineErrorMessages(`Invalid valueType: ${e.valueType}, error: ${t}`,e.validationMessage)}if(e.hasOwnProperty("isValidValue")&&!(typeof e.isValidValue=="function"||e.isValidValue===null||e.isValidValue===void 0))return this.combineErrorMessages(`isValidValue must be a function: ${e.isValidValue}`,e.validationMessage);if(e.hasOwnProperty("valueComparisonStrategy")&&!(e.valueComparisonStrategy==="reference"||e.valueComparisonStrategy==="lodashDeep"||e.valueComparisonStrategy==="equalsFunction"||typeof e.valueComparisonStrategy=="function"))return this.combineErrorMessages(`valueComparisonStrategy must be "reference", "lodashDeep", 
        "equalsFunction", or a comparison function: ${e.valueComparisonStrategy}`,e.validationMessage);if(e.validValues!==void 0&&e.validValues!==null){if(!Array.isArray(e.validValues))return this.combineErrorMessages(`validValues must be an array: ${e.validValues}`,e.validationMessage);const t=he.omit(e,"validValues");if(fs.containsValidatorKey(t))for(let i=0;i<e.validValues.length;i++){const s=e.validValues[i],r=fs.getValidationError(s,t);if(r)return this.combineErrorMessages(`Item not valid in validValues: ${s}, error: ${r}`,e.validationMessage)}}if(e.hasOwnProperty("phetioType")){if(!e.phetioType)return this.combineErrorMessages("falsey phetioType provided",e.validationMessage);if(!e.phetioType.validator)return this.combineErrorMessages(`validator needed for phetioType: ${e.phetioType.typeName}`,e.validationMessage);const t=fs.getValidatorValidationError(e.phetioType.validator);if(t)return this.combineErrorMessages(t,e.validationMessage)}if(e.hasOwnProperty("validators")){const t=e.validators;for(let i=0;i<t.length;i++){const s=t[i],r=fs.getValidatorValidationError(s);if(r)return this.combineErrorMessages(`validators[${i}] invalid: ${r}`,e.validationMessage)}}return null}static getValueTypeValidatorValidationError(e){return typeof e=="function"||typeof e=="string"||e instanceof gc||e===null||e===void 0?typeof e=="string"&&!he.includes(bT,e)?`valueType not a supported primitive types: ${e}`:null:`valueType must be {function|string|EnumerationDeprecated|null|undefined}, valueType=${e}`}static validateValidator(e){}static containsValidatorKey(e){if(!(e instanceof Object))return!1;for(let t=0;t<Zd.length;t++)if(e.hasOwnProperty(Zd[t]))return!0;return!1}static combineErrorMessages(e,t){return t&&(e=`${typeof t=="function"?t():t}: ${e}`),e}static isValueValid(e,t,i){return this.getValidationError(e,t,i)===null}static getValidationError(e,t,i){const s=St()({validateValidator:!0},i);if(s.validateValidator){const r=fs.getValidatorValidationError(t);if(r)return r}if(t.hasOwnProperty("valueType")){const r=t.valueType;if(Array.isArray(r)){if(!he.some(r.map(o=>!fs.getValueTypeValidationError(e,o,t.validationMessage))))return this.combineErrorMessages(`value not valid for any valueType in ${r.toString().substring(0,100)}, value: ${e}`,t.validationMessage)}else if(r){const o=fs.getValueTypeValidationError(e,r,t.validationMessage);if(o)return o}}if(t.validValues){const r=t.valueComparisonStrategy||"reference";if(!t.validValues.some(d=>fs.equalsForValidationStrategy(d,e,r)))return this.combineErrorMessages(`value not in validValues: ${e}`,t.validationMessage)}if(t.hasOwnProperty("isValidValue")&&!t.isValidValue(e))return this.combineErrorMessages(`value failed isValidValue: ${e}`,t.validationMessage);if(t.hasOwnProperty("phetioType")){const r=fs.getValidationError(e,t.phetioType.validator,s);if(r)return this.combineErrorMessages(`value failed phetioType validator: ${e}, error: ${r}`,t.validationMessage)}if(t.hasOwnProperty("validators")){const r=t.validators;for(let o=0;o<r.length;o++){const d=r[o],g=fs.getValidationError(e,d,s);if(g)return this.combineErrorMessages(`Failed validation for validators[${o}]: ${g}`,t.validationMessage)}}return null}static getValueTypeValidationError(e,t,i){return typeof t=="string"&&typeof e!==t?this.combineErrorMessages(`value should have typeof ${t}, value=${e}`,i):t===Array&&!Array.isArray(e)?this.combineErrorMessages(`value should have been an array, value=${e}`,i):t instanceof gc&&!t.includes(e)?this.combineErrorMessages(`value is not a member of EnumerationDeprecated ${t}`,i):typeof t=="function"&&!(e instanceof t)?this.combineErrorMessages(`value should be instanceof ${t.name}, value=${e}`,i):t===null&&e!==null?this.combineErrorMessages(`value should be null, value=${e}`,i):null}static getValueOrElementTypeValidationError(e){if(Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t],s=fs.getValueTypeValidatorValidationError(i);if(s)return`Array value invalid: ${s}`}else if(e){const t=fs.getValueTypeValidatorValidationError(e);if(t)return`Value type invalid: ${t}`}return null}static equalsForValidationStrategy(e,t,i="reference"){if(i==="reference")return e===t;if(i==="equalsFunction"){if(e!=null&&t!=null){const s=e,r=t,o=s.equals(r);return e.constructor===t.constructor?o:o&&r.equals(e)}return e===t}return i==="lodashDeep"?he.isEqual(e,t):i(e,t)}}fs.VALIDATOR_KEYS=Zd;fs.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR={valueType:"string",isValidValue:n=>!/\{\{\w*\}\}/.test(n)};const vT={IO_TYPE_SUFFIX:"IO"},sv="ObjectIO",nv="MODEL",VT={phetioTypeName:sv,phetioDocumentation:"",phetioState:!0,phetioReadOnly:!1,phetioEventType:nv,phetioHighFrequency:!1,phetioPlayback:!1,phetioDynamicElement:!1,phetioIsArchetype:!1,phetioFeatured:!1,phetioDesigned:!1,phetioArchetypePhetioID:null},rv="a-zA-Z0-9[\\],",wT=`${rv}_`,ST=`${wT}\\-`,ya={OBJECT_IO_TYPE_NAME:sv,EVENT_TYPE_MODEL:nv,PHET_IO_OBJECT_METADATA_DEFAULTS:VT,BASE_TANDEM_CHARACTER_CLASS:rv,BASE_DERIVED_TANDEM_CHARACTER_CLASS:ST};class aa{constructor(e){const t=St()({displayString:"",validator:null,compositeSchema:null,apiStateKeys:null},e);this.displayString=t.displayString,this.validator=t.validator,this.compositeSchema=t.compositeSchema,this.apiStateKeys=t.apiStateKeys}defaultApplyState(e,t){for(const i in this.compositeSchema)if(this.compositeSchema.hasOwnProperty(i)){const s=this.compositeSchema[i],r=this.getCoreObjectAccessorName(i,e);s.defaultDeserializationMethod==="fromStateObject"?e[r]=this.compositeSchema[i].fromStateObject(t[i]):this.compositeSchema[i].applyState(e[r],t[i])}}defaultToStateObject(e){const t={};for(const i in this.compositeSchema)if(this.compositeSchema.hasOwnProperty(i)){const s=this.getCoreObjectAccessorName(i,e);t[i]=this.compositeSchema[i].toStateObject(e[s])}return t}getCoreObjectAccessorName(e,t){const i=e.startsWith("_")?e.substring(1):e,s=`_${i}`;let r;return t.hasOwnProperty(s)?r=s:r=i,r}isComposite(){return!!this.compositeSchema}checkStateObjectValid(e,t,i){if(this.isComposite()){const s=e,r=this.compositeSchema;let o=null;return s?(Object.keys(r).forEach(g=>{typeof g=="string"?(s.hasOwnProperty(g)&&r[g].isStateObjectValid(s[g],!1)||(o=!1),i.push(g)):console.error("key should be a string",g)}),o):(o=!1,o)}else{const s=e;return fs.isValueValid(s,this.validator)}}getRelatedTypes(){const e=[];return this.compositeSchema&&Object.keys(this.compositeSchema).forEach(i=>{e.push(this.compositeSchema[i])}),e}getStateSchemaAPI(){return this.isComposite()?he.mapValues(this.compositeSchema,e=>e.typeName):this.displayString}static asValue(e,t){return new aa({validator:t,displayString:e})}}const CT=n=>!!n;let cg=!1,dg=0;const PT=n=>{const e=n.indexOf(vT.IO_TYPE_SUFFIX);return n.substring(0,e)};class pi{constructor(e,t){this.typeName=e;const i=t.supertype||pi.ObjectIO,s=!!t.toStateObject,r=!!t.applyState,o=!!t.stateSchema,d=St()({supertype:pi.ObjectIO,methods:{},events:[],metadataDefaults:{},dataDefaults:{},methodOrder:[],parameterTypes:[],documentation:`PhET-iO Type for ${PT(e)}`,isFunctionType:!1,toStateObject:null,fromStateObject:null,stateObjectToCreateElementArguments:null,applyState:null,stateSchema:null,apiStateKeys:null,defaultDeserializationMethod:"fromStateObject",addChildElement:i&&i.addChildElement},t);if(this.supertype=i,this.documentation=d.documentation,this.methods=d.methods,this.events=d.events,this.metadataDefaults=d.metadataDefaults,this.dataDefaults=d.dataDefaults,this.methodOrder=d.methodOrder,this.parameterTypes=d.parameterTypes,this.validator=he.pick(d,fs.VALIDATOR_KEYS),this.validator.validationMessage=this.validator.validationMessage||`Validation failed IOType Validator: ${this.typeName}`,this.defaultDeserializationMethod=d.defaultDeserializationMethod,d.stateSchema===null||d.stateSchema instanceof aa)this.stateSchema=d.stateSchema;else{const g=typeof d.stateSchema=="function"?d.stateSchema(this):d.stateSchema;this.stateSchema=new aa({compositeSchema:g,apiStateKeys:d.apiStateKeys})}this.toStateObjectOption=d.toStateObject,this.fromStateObjectOption=d.fromStateObject,this.applyStateOption=d.applyState,this.stateObjectToCreateElementArgumentsOption=d.stateObjectToCreateElementArguments,this.toStateObjectSupplied=s,this.applyStateSupplied=r,this.stateSchemaSupplied=o,this.isFunctionType=d.isFunctionType,this.addChildElement=d.addChildElement}toStateObject(e){dg++;let t;!this.toStateObjectSupplied&&this.stateSchemaSupplied&&this.stateSchema&&this.stateSchema.isComposite()?t=this.defaultToStateObject(e):t=this.toStateObjectOption?this.toStateObjectOption(e):this.supertype.toStateObject(e);let i;return cg&&this.isCompositeStateSchema()&&!(dg>1&&this.apiStateKeysProvided())?i=he.pick(t,this.getAllAPIStateKeys()):i=t,dg--,i}fromStateObject(e){return this.fromStateObjectOption?this.fromStateObjectOption(e):this.supertype.fromStateObject(e)}applyState(e,t){p0(e,this.validator),this.applyStateSupplied||this.stateSchemaSupplied,!this.applyStateSupplied&&this.stateSchemaSupplied&&this.stateSchema&&this.stateSchema.isComposite()?this.defaultApplyState(e,t):this.applyStateOption?this.applyStateOption(e,t):this.supertype.applyState(e,t)}stateObjectToCreateElementArguments(e){return this.stateObjectToCreateElementArgumentsOption?this.stateObjectToCreateElementArgumentsOption(e):this.supertype.stateObjectToCreateElementArguments(e)}defaultToStateObject(e){let t={};return this.supertype&&(t=this.supertype.defaultToStateObject(e)),this.stateSchema&&this.stateSchema.isComposite()?he.merge(t,this.stateSchema.defaultToStateObject(e)):t}defaultApplyState(e,t){this.supertype&&this.supertype.defaultApplyState(e,t),this.stateSchema&&this.stateSchema.isComposite()&&this.stateSchema.defaultApplyState(e,t)}getTypeHierarchy(){const e=[];let t=this;for(;t;)e.push(t),t=t.supertype;return e}extends(e){return this.getTypeHierarchy().includes(e)}getAllMetadataDefaults(){return he.merge({},this.supertype?this.supertype.getAllMetadataDefaults():{},this.metadataDefaults)}getAllDataDefaults(){return he.merge({},this.supertype?this.supertype.getAllDataDefaults():{},this.dataDefaults)}isCompositeStateSchema(){var e,t;return((e=this.supertype)==null?void 0:e.isCompositeStateSchema())||!!((t=this.stateSchema)!=null&&t.compositeSchema)}getAllAPIStateKeyValues(e=[]){var t;return this.supertype&&this.supertype.getAllAPIStateKeyValues(e),e.push(((t=this.stateSchema)==null?void 0:t.apiStateKeys)||null),e}apiStateKeysProvided(){return this.getAllAPIStateKeyValues().filter(CT).length===0}getAllAPIStateKeys(){return he.concat(...this.getAllAPIStateKeyValues().map(e=>e||[]))}toStateObjectForAPI(e){cg=!0;const t=this.toStateObject(e);return cg=!1,t}isStateObjectValid(e,t=!1,i=[]){let s=!0;if(this.stateSchema){const r=this.stateSchema.checkStateObjectValid(e,t,i);if(r!==null)return r}return this.supertype?s&&this.supertype.isStateObjectValid(e,t,i):!this.supertype&&e&&typeof e!="string"&&!Array.isArray(e)?(Object.keys(e).forEach(r=>{i.includes(r)||(s=!1)}),s):!0}validateStateObject(e){this.isStateObjectValid(e,!0)}toString(){return this.typeName}getAPI(){const e={},t=he.keys(this.methods);for(let r=0;r<t.length;r++){const o=t[r],d=this.methods[o],g={returnType:d.returnType.typeName,parameterTypes:d.parameterTypes.map(oA),documentation:d.documentation};d.invocableForReadOnlyElements===!1&&(g.invocableForReadOnlyElements=!1),e[o]=g}const i=this.supertype,s={methods:e,supertype:i&&i.typeName,typeName:this.typeName,documentation:this.documentation,events:this.events,metadataDefaults:this.metadataDefaults,dataDefaults:this.dataDefaults,methodOrder:this.methodOrder};return this.stateSchema&&(s.stateSchema=this.stateSchema.getStateSchemaAPI(),this.stateSchema.apiStateKeys&&this.stateSchema.apiStateKeys.length>0&&(s.apiStateKeys=this.stateSchema.apiStateKeys)),this.parameterTypes&&(s.parameterTypes=this.parameterTypes.map(oA)),s}}const oA=n=>n.typeName,lA=null;pi.ObjectIO=new pi(ya.OBJECT_IO_TYPE_NAME,{isValidValue:()=>!0,supertype:null,documentation:"The root of the PhET-iO Type hierarchy",toStateObject:n=>(phet&&phet.tandem&&phet.tandem.Tandem.VALIDATION,lA),fromStateObject:()=>{throw new Error("ObjectIO.fromStateObject should not be called")},stateObjectToCreateElementArguments:()=>[],applyState:he.noop,metadataDefaults:ya.PHET_IO_OBJECT_METADATA_DEFAULTS,dataDefaults:{initialState:lA},stateSchema:null});const m0=new pi("ValueIO",{isValidValue:he.stubTrue,supertype:pi.ObjectIO,toStateObject:n=>n,fromStateObject:n=>n,stateSchema:aa.asValue("*",{isValidValue:he.stubTrue})}),zh=new pi("BooleanIO",{supertype:m0,valueType:"boolean",documentation:"PhET-iO Type for Javascript's boolean primitive type",stateSchema:aa.asValue("boolean",{valueType:"boolean"}),toStateObject:he.identity});class zr extends Map{constructor(e){super(e),zr.caches.push(this)}static clearAll(){zr.caches.forEach(e=>e.clear())}}zr.caches=[];var y0={exports:{}};y0.exports;(function(n){(function(e,t,i){function s(g){var y=this,S=d();y.next=function(){var T=2091639*y.s0+y.c*23283064365386963e-26;return y.s0=y.s1,y.s1=y.s2,y.s2=T-(y.c=T|0)},y.c=1,y.s0=S(" "),y.s1=S(" "),y.s2=S(" "),y.s0-=S(g),y.s0<0&&(y.s0+=1),y.s1-=S(g),y.s1<0&&(y.s1+=1),y.s2-=S(g),y.s2<0&&(y.s2+=1),S=null}function r(g,y){return y.c=g.c,y.s0=g.s0,y.s1=g.s1,y.s2=g.s2,y}function o(g,y){var S=new s(g),T=y&&y.state,L=S.next;return L.int32=function(){return S.next()*4294967296|0},L.double=function(){return L()+(L()*2097152|0)*11102230246251565e-32},L.quick=L,T&&(typeof T=="object"&&r(T,S),L.state=function(){return r(S,{})}),L}function d(){var g=4022871197,y=function(S){S=S.toString();for(var T=0;T<S.length;T++){g+=S.charCodeAt(T);var L=.02519603282416938*g;g=L>>>0,L-=g,L*=g,g=L>>>0,L-=g,g+=L*4294967296}return(g>>>0)*23283064365386963e-26};return y}t&&t.exports?t.exports=o:this.alea=o})(pr,n)})(y0);var ET=y0.exports,_0={exports:{}};_0.exports;(function(n){(function(e,t,i){function s(d){var g=this,y="";g.x=0,g.y=0,g.z=0,g.w=0,g.next=function(){var T=g.x^g.x<<11;return g.x=g.y,g.y=g.z,g.z=g.w,g.w^=g.w>>>19^T^T>>>8},d===(d|0)?g.x=d:y+=d;for(var S=0;S<y.length+64;S++)g.x^=y.charCodeAt(S)|0,g.next()}function r(d,g){return g.x=d.x,g.y=d.y,g.z=d.z,g.w=d.w,g}function o(d,g){var y=new s(d),S=g&&g.state,T=function(){return(y.next()>>>0)/4294967296};return T.double=function(){do var L=y.next()>>>11,x=(y.next()>>>0)/4294967296,A=(L+x)/(1<<21);while(A===0);return A},T.int32=y.next,T.quick=T,S&&(typeof S=="object"&&r(S,y),T.state=function(){return r(y,{})}),T}t&&t.exports?t.exports=o:this.xor128=o})(pr,n)})(_0);var DT=_0.exports,A0={exports:{}};A0.exports;(function(n){(function(e,t,i){function s(d){var g=this,y="";g.next=function(){var T=g.x^g.x>>>2;return g.x=g.y,g.y=g.z,g.z=g.w,g.w=g.v,(g.d=g.d+362437|0)+(g.v=g.v^g.v<<4^(T^T<<1))|0},g.x=0,g.y=0,g.z=0,g.w=0,g.v=0,d===(d|0)?g.x=d:y+=d;for(var S=0;S<y.length+64;S++)g.x^=y.charCodeAt(S)|0,S==y.length&&(g.d=g.x<<10^g.x>>>4),g.next()}function r(d,g){return g.x=d.x,g.y=d.y,g.z=d.z,g.w=d.w,g.v=d.v,g.d=d.d,g}function o(d,g){var y=new s(d),S=g&&g.state,T=function(){return(y.next()>>>0)/4294967296};return T.double=function(){do var L=y.next()>>>11,x=(y.next()>>>0)/4294967296,A=(L+x)/(1<<21);while(A===0);return A},T.int32=y.next,T.quick=T,S&&(typeof S=="object"&&r(S,y),T.state=function(){return r(y,{})}),T}t&&t.exports?t.exports=o:this.xorwow=o})(pr,n)})(A0);var TT=A0.exports,b0={exports:{}};b0.exports;(function(n){(function(e,t,i){function s(d){var g=this;g.next=function(){var S=g.x,T=g.i,L,x;return L=S[T],L^=L>>>7,x=L^L<<24,L=S[T+1&7],x^=L^L>>>10,L=S[T+3&7],x^=L^L>>>3,L=S[T+4&7],x^=L^L<<7,L=S[T+7&7],L=L^L<<13,x^=L^L<<9,S[T]=x,g.i=T+1&7,x};function y(S,T){var L,x=[];if(T===(T|0))x[0]=T;else for(T=""+T,L=0;L<T.length;++L)x[L&7]=x[L&7]<<15^T.charCodeAt(L)+x[L+1&7]<<13;for(;x.length<8;)x.push(0);for(L=0;L<8&&x[L]===0;++L);for(L==8?x[7]=-1:x[L],S.x=x,S.i=0,L=256;L>0;--L)S.next()}y(g,d)}function r(d,g){return g.x=d.x.slice(),g.i=d.i,g}function o(d,g){d==null&&(d=+new Date);var y=new s(d),S=g&&g.state,T=function(){return(y.next()>>>0)/4294967296};return T.double=function(){do var L=y.next()>>>11,x=(y.next()>>>0)/4294967296,A=(L+x)/(1<<21);while(A===0);return A},T.int32=y.next,T.quick=T,S&&(S.x&&r(S,y),T.state=function(){return r(y,{})}),T}t&&t.exports?t.exports=o:this.xorshift7=o})(pr,n)})(b0);var xT=b0.exports,v0={exports:{}};v0.exports;(function(n){(function(e,t,i){function s(d){var g=this;g.next=function(){var S=g.w,T=g.X,L=g.i,x,A;return g.w=S=S+1640531527|0,A=T[L+34&127],x=T[L=L+1&127],A^=A<<13,x^=x<<17,A^=A>>>15,x^=x>>>12,A=T[L]=A^x,g.i=L,A+(S^S>>>16)|0};function y(S,T){var L,x,A,Q,z,G=[],re=128;for(T===(T|0)?(x=T,T=null):(T=T+"\0",x=0,re=Math.max(re,T.length)),A=0,Q=-32;Q<re;++Q)T&&(x^=T.charCodeAt((Q+32)%T.length)),Q===0&&(z=x),x^=x<<10,x^=x>>>15,x^=x<<4,x^=x>>>13,Q>=0&&(z=z+1640531527|0,L=G[Q&127]^=x+z,A=L==0?A+1:0);for(A>=128&&(G[(T&&T.length||0)&127]=-1),A=127,Q=4*128;Q>0;--Q)x=G[A+34&127],L=G[A=A+1&127],x^=x<<13,L^=L<<17,x^=x>>>15,L^=L>>>12,G[A]=x^L;S.w=z,S.X=G,S.i=A}y(g,d)}function r(d,g){return g.i=d.i,g.w=d.w,g.X=d.X.slice(),g}function o(d,g){d==null&&(d=+new Date);var y=new s(d),S=g&&g.state,T=function(){return(y.next()>>>0)/4294967296};return T.double=function(){do var L=y.next()>>>11,x=(y.next()>>>0)/4294967296,A=(L+x)/(1<<21);while(A===0);return A},T.int32=y.next,T.quick=T,S&&(S.X&&r(S,y),T.state=function(){return r(y,{})}),T}t&&t.exports?t.exports=o:this.xor4096=o})(pr,n)})(v0);var IT=v0.exports,V0={exports:{}};V0.exports;(function(n){(function(e,t,i){function s(d){var g=this,y="";g.next=function(){var T=g.b,L=g.c,x=g.d,A=g.a;return T=T<<25^T>>>7^L,L=L-x|0,x=x<<24^x>>>8^A,A=A-T|0,g.b=T=T<<20^T>>>12^L,g.c=L=L-x|0,g.d=x<<16^L>>>16^A,g.a=A-T|0},g.a=0,g.b=0,g.c=-1640531527,g.d=1367130551,d===Math.floor(d)?(g.a=d/4294967296|0,g.b=d|0):y+=d;for(var S=0;S<y.length+20;S++)g.b^=y.charCodeAt(S)|0,g.next()}function r(d,g){return g.a=d.a,g.b=d.b,g.c=d.c,g.d=d.d,g}function o(d,g){var y=new s(d),S=g&&g.state,T=function(){return(y.next()>>>0)/4294967296};return T.double=function(){do var L=y.next()>>>11,x=(y.next()>>>0)/4294967296,A=(L+x)/(1<<21);while(A===0);return A},T.int32=y.next,T.quick=T,S&&(typeof S=="object"&&r(S,y),T.state=function(){return r(y,{})}),T}t&&t.exports?t.exports=o:this.tychei=o})(pr,n)})(V0);var kT=V0.exports,av={exports:{}};const LT={},NT=Object.freeze(Object.defineProperty({__proto__:null,default:LT},Symbol.toStringTag,{value:"Module"})),mm=yT(NT);(function(n){(function(e,t){var i=(0,eval)("this"),s=256,r=6,o=52,d="random",g=t.pow(s,r),y=t.pow(2,o),S=y*2,T=s-1,L;function x(ae,pe,N){var Ie=[];pe=pe==!0?{entropy:!0}:pe||{};var $e=G(z(pe.entropy?[ae,ne(e)]:ae??re(),3),Ie),Ee=new A(Ie),Je=function(){for(var Ge=Ee.g(r),_t=g,it=0;Ge<y;)Ge=(Ge+it)*s,_t*=s,it=Ee.g(1);for(;Ge>=S;)Ge/=2,_t/=2,it>>>=1;return(Ge+it)/_t};return Je.int32=function(){return Ee.g(4)|0},Je.quick=function(){return Ee.g(4)/4294967296},Je.double=Je,G(ne(Ee.S),e),(pe.pass||N||function(Ge,_t,it,nt){return nt&&(nt.S&&Q(nt,Ee),Ge.state=function(){return Q(Ee,{})}),it?(t[d]=Ge,_t):Ge})(Je,$e,"global"in pe?pe.global:this==t,pe.state)}t["seed"+d]=x;function A(ae){var pe,N=ae.length,Ie=this,$e=0,Ee=Ie.i=Ie.j=0,Je=Ie.S=[];for(N||(ae=[N++]);$e<s;)Je[$e]=$e++;for($e=0;$e<s;$e++)Je[$e]=Je[Ee=T&Ee+ae[$e%N]+(pe=Je[$e])],Je[Ee]=pe;(Ie.g=function(Ge){for(var _t,it=0,nt=Ie.i,Ct=Ie.j,Qe=Ie.S;Ge--;)_t=Qe[nt=T&nt+1],it=it*s+Qe[T&(Qe[nt]=Qe[Ct=T&Ct+_t])+(Qe[Ct]=_t)];return Ie.i=nt,Ie.j=Ct,it})(s)}function Q(ae,pe){return pe.i=ae.i,pe.j=ae.j,pe.S=ae.S.slice(),pe}function z(ae,pe){var N=[],Ie=typeof ae,$e;if(pe&&Ie=="object")for($e in ae)try{N.push(z(ae[$e],pe-1))}catch{}return N.length?N:Ie=="string"?ae:ae+"\0"}function G(ae,pe){for(var N=ae+"",Ie,$e=0;$e<N.length;)pe[T&$e]=T&(Ie^=pe[T&$e]*19)+N.charCodeAt($e++);return ne(pe)}function re(){try{var ae;return L&&(ae=L.randomBytes)?ae=ae(s):(ae=new Uint8Array(s),(i.crypto||i.msCrypto).getRandomValues(ae)),ne(ae)}catch{var pe=i.navigator,N=pe&&pe.plugins;return[+new Date,i,N,i.screen,ne(e)]}}function ne(ae){return String.fromCharCode.apply(0,ae)}if(G(t.random(),e),n.exports){n.exports=x;try{L=mm}catch{}}})([],Math)})(av);var BT=av.exports,RT=ET,MT=DT,OT=TT,qT=xT,FT=IT,zT=kT,yu=BT;yu.alea=RT;yu.xor128=MT;yu.xorwow=OT;yu.xorshift7=qT;yu.xor4096=FT;yu.tychei=zT;class Fs{constructor(e,...t){this.objects=[];const i=St()({defaultArguments:[],initialize:e.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},t[0]);for(Kt(i.maxSize>=0),Kt(i.initialSize>=0),this._maxPoolSize=i.maxSize,this.partialConstructor=Function.prototype.bind.bind(e,e),this.DefaultConstructor=this.partialConstructor(...i.defaultArguments),this.initialize=i.initialize,Kt(this.initialize,"Either pass in an initialize option, or provide a method named initialize on the type with the proper signature"),this.useDefaultConstruction=i.useDefaultConstruction;this.objects.length<i.initialSize;)this.objects.push(this.createDefaultObject())}createDefaultObject(){return new this.DefaultConstructor}fetch(){return this.objects.length?this.objects.pop():this.createDefaultObject()}create(...e){let t;return this.objects.length?(t=this.objects.pop(),this.initialize.apply(t,e)):this.useDefaultConstruction?(t=this.createDefaultObject(),this.initialize.apply(t,e)):t=new(this.partialConstructor(...e)),t}get poolSize(){return this.objects.length}set maxPoolSize(e){Kt(e===Number.POSITIVE_INFINITY||Number.isInteger(e)&&e>=0,"maxPoolSize should be a non-negative integer or infinity"),this._maxPoolSize=e}get maxPoolSize(){return this._maxPoolSize}freeToPool(e){this.objects.length<this.maxPoolSize&&this.objects.push(e)}forEach(e){this.objects.forEach(e)}}const Fi=new pi("NumberIO",{valueType:"number",documentation:"PhET-iO Type for Javascript's number primitive type",toStateObject:he.identity,fromStateObject:n=>n,stateSchema:aa.asValue("number",{isValidValue:n=>typeof n=="number"&&!isNaN(n)&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY})});function Xn(n){return(n<0?-1:1)*Math.round(Math.abs(n))}function qs(n,e,t){return n<e?e:n>t?t:n}const HT=(n,e)=>n.add(e);class Ne{constructor(e,t){this.x=e,this.y=t}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.x*this.x+this.y*this.y}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceXY(e,t){const i=this.x-e,s=this.y-t;return Math.sqrt(i*i+s*s)}distanceSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}distanceSquaredXY(e,t){const i=this.x-e,s=this.y-t;return i*i+s*s}dot(e){return this.x*e.x+this.y*e.y}dotXY(e,t){return this.x*e+this.y*t}getAngle(){return Math.atan2(this.y,this.x)}get angle(){return this.getAngle()}angleBetween(e){const t=this.magnitude,i=e.magnitude;return Math.acos(qs((this.x*e.x+this.y*e.y)/(t*i),-1,1))}equals(e){return this.x===e.x&&this.y===e.y}equalsEpsilon(e,t){return t||(t=0),Math.max(Math.abs(this.x-e.x),Math.abs(this.y-e.y))<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)}copy(e){return e?e.set(this):hr(this.x,this.y)}crossScalar(e){return this.x*e.y-this.y*e.x}normalized(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return hr(this.x/e,this.y/e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return hr(this.x*e,this.y*e)}times(e){return this.timesScalar(e)}componentTimes(e){return hr(this.x*e.x,this.y*e.y)}plus(e){return hr(this.x+e.x,this.y+e.y)}plusXY(e,t){return hr(this.x+e,this.y+t)}plusScalar(e){return hr(this.x+e,this.y+e)}minus(e){return hr(this.x-e.x,this.y-e.y)}minusXY(e,t){return hr(this.x-e,this.y-t)}minusScalar(e){return hr(this.x-e,this.y-e)}dividedScalar(e){return hr(this.x/e,this.y/e)}negated(){return hr(-this.x,-this.y)}getPerpendicular(){return hr(this.y,-this.x)}get perpendicular(){return this.getPerpendicular()}rotated(e){const t=this.angle+e,i=this.magnitude;return hr(i*Math.cos(t),i*Math.sin(t))}rotateAboutXY(e,t,i){const s=this.x-e,r=this.y-t,o=Math.cos(i),d=Math.sin(i);return this.x=e+s*o-r*d,this.y=t+s*d+r*o,this}rotateAboutPoint(e,t){return this.rotateAboutXY(e.x,e.y,t)}rotatedAboutXY(e,t,i){return hr(this.x,this.y).rotateAboutXY(e,t,i)}rotatedAboutPoint(e,t){return this.rotatedAboutXY(e.x,e.y,t)}blend(e,t){return hr(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}average(e){return this.blend(e,.5)}static average(e){return he.reduce(e,HT,new Ne(0,0)).divideScalar(e.length)}toString(){return`Vector2(${this.x}, ${this.y})`}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}set(e){return this.setXY(e.x,e.y)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXY(this.x+e.x,this.y+e.y)}addXY(e,t){return this.setXY(this.x+e,this.y+t)}addScalar(e){return this.setXY(this.x+e,this.y+e)}subtract(e){return this.setXY(this.x-e.x,this.y-e.y)}subtractXY(e,t){return this.setXY(this.x-e,this.y-t)}subtractScalar(e){return this.setXY(this.x-e,this.y-e)}multiplyScalar(e){return this.setXY(this.x*e,this.y*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXY(this.x*e.x,this.y*e.y)}divideScalar(e){return this.setXY(this.x/e,this.y/e)}negate(){return this.setXY(-this.x,-this.y)}normalize(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXY(Xn(this.x),Xn(this.y))}rotate(e){const t=this.angle+e,i=this.magnitude;return this.setXY(i*Math.cos(t),i*Math.sin(t))}setPolar(e,t){return this.setXY(e*Math.cos(t),e*Math.sin(t))}toStateObject(){return{x:this.x,y:this.y}}freeToPool(){Ne.pool.freeToPool(this)}static createPolar(e,t){return new Ne(0,0).setPolar(e,t)}static fromStateObject(e){return Ne.from(e)}static from(e){return hr(e.x||0,e.y||0)}static getAngleBetweenVectors(e,t){const i=t.x-e.x,s=t.y-e.y;return Math.atan2(s,i)}static getDistanceBetweenVectors(e,t){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}}Ne.pool=new Fs(Ne,{maxSize:1e3,initialize:Ne.prototype.setXY,defaultArguments:[0,0]});Ne.prototype.isVector2=!0;Ne.prototype.dimension=2;const hr=Ne.pool.create.bind(Ne.pool);class Sl extends Ne{static mutableOverrideHelper(e){Sl.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector2`)}}}Sl.mutableOverrideHelper("setXY");Sl.mutableOverrideHelper("setX");Sl.mutableOverrideHelper("setY");Ne.ZERO=assert?new Sl(0,0):new Ne(0,0);Ne.X_UNIT=assert?new Sl(1,0):new Ne(1,0);Ne.Y_UNIT=assert?new Sl(0,1):new Ne(0,1);const KT={x:Fi,y:Fi};Ne.Vector2IO=new pi("Vector2IO",{valueType:Ne,stateSchema:KT,toStateObject:n=>n.toStateObject(),fromStateObject:n=>Ne.fromStateObject(n),documentation:"A numerical object with x and y properties, like {x:3,y:4}"});let fg=!1,hA=0,uA=0;const cA=2*Math.PI;function UT(n,e,t){if(fg=!fg,!fg)return uA*e+n;let i,s;do i=t.nextDouble(),s=t.nextDouble();while(i<=Number.MIN_VALUE);return hA=Math.sqrt(-2*Math.log(i))*Math.cos(cA*s),uA=Math.sqrt(-2*Math.log(i))*Math.sin(cA*s),hA*e+n}class Qh{constructor(e){this.seed=null,this.seedrandom=null,this.numberOfCalls=0;const t=St()({seed:null},e);this.setSeed(t.seed),Qh.allRandomInstances.add(this)}dispose(){Qh.allRandomInstances.delete(this)}getSeed(){return this.seed}nextBoolean(){return this.nextDouble()>=.5}nextInt(e){const t=this.nextDouble()*e;return Math.floor(t)}nextIntBetween(e,t){const i=t-e;return this.nextInt(i+1)+e}sample(e){const t=this.nextIntBetween(0,e.length-1);return e[t]}shuffle(e){let t=-1;const i=new Array(e.length);return he.forEach(e,s=>{const r=this.nextIntBetween(0,++t);i[t]=i[r],i[r]=s}),i}nextDouble(){return this.numberOfCalls++,this.seedrandom()}nextDoubleBetween(e,t){return e+this.nextDouble()*(t-e)}nextGaussian(){return UT(0,1,this)}nextDoubleInRange(e){return e.min<e.max?this.nextDoubleBetween(e.min,e.max):e.min}nextPointInBounds(e){return new Ne(this.nextDoubleBetween(e.minX,e.maxX),this.nextDoubleBetween(e.minY,e.maxY))}setSeed(e){typeof e=="number"||(e=Math.random()),this.seed=e,this.seedrandom=Math.seedrandom?new Math.seedrandom(`${e}`):()=>Math.random()}sampleProbabilities(e){const i=he.sum(e)*this.nextDouble();let s=0;for(let r=0;r<e.length;r++)if(s+=e[r],s>=i)return r;return e.length-1}}Qh.allRandomInstances=new Set;const Fl=new Qh({seed:he.hasIn(self,"phet.chipper.queryParameters.randomSeed")?self.phet.chipper.queryParameters.randomSeed:null}),pg=he.hasIn(self,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.listenerOrder;he.hasIn(self,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.listenerLimit;if(pg&&pg.startsWith("random")){const n=pg.match(/random(?:%28|\()(\d+)(?:%29|\))/),e=n?Number(n[1]):Fl.nextInt(1e6);new Qh({seed:e}),console.log("listenerOrder random seed: "+e)}class Hi{constructor(e,t,i){this.emitContexts=[],e&&(this.onBeforeNotify=e),t&&(this.hasListenerOrderDependencies=t),i&&(this.reentrantNotificationStrategy=i),this.listeners=new Set}dispose(){this.removeAllListeners()}emit(...e){var t,i;if(this.onBeforeNotify&&this.onBeforeNotify.apply(null,e),this.listeners.size>0){const s=zl.create(0,e);if(this.emitContexts.push(s),this.reentrantNotificationStrategy==="queue"){if(this.emitContexts.length===1)for(;this.emitContexts.length;){const r=this.emitContexts[0],o=r.hasListenerArray?r.listenerArray:this.listeners;this.notifyLoop(r,o),(t=this.emitContexts.shift())==null||t.freeToPool()}}else(!this.reentrantNotificationStrategy||this.reentrantNotificationStrategy==="stack")&&(this.notifyLoop(s,this.listeners),(i=this.emitContexts.pop())==null||i.freeToPool())}}notifyLoop(e,t){const i=e.args;for(const s of t)if(s(...i),e.index++,e.hasListenerArray)break;if(e.hasListenerArray)for(let s=e.index;s<e.listenerArray.length;s++)e.listenerArray[s](...i)}addListener(e){this.guardListeners(),this.listeners.add(e),this.changeCount&&this.changeCount(1)}removeListener(e){this.guardListeners(),this.listeners.delete(e),this.changeCount&&this.changeCount(-1)}removeAllListeners(){const e=this.listeners.size;this.guardListeners(),this.listeners.clear(),this.changeCount&&this.changeCount(-e)}guardListeners(){for(let e=this.emitContexts.length-1;e>=0;e--){const t=this.emitContexts[e];if(t.hasListenerArray)break;t.listenerArray.push(...this.listeners),t.hasListenerArray=!0}}hasListener(e){return this.listeners.has(e)}hasListeners(){return this.listeners.size>0}getListenerCount(){return this.listeners.size}forEachListener(e){this.listeners.forEach(e)}}class zl{constructor(e,t){this.hasListenerArray=!1,this.listenerArray=[],this.initialize(e,t)}initialize(e,t){return this.index=e,this.args=t,this.hasListenerArray=!1,this}freeToPool(){zl.pool.freeToPool(this),this.args=null,this.listenerArray.length=0}static create(e,t){return zl.pool.create(e,t)}}zl.pool=new Fs(zl,{initialize:zl.prototype.initialize});class Ni extends Hi{constructor(e,t,i,s){super(t,i,s||"queue"),this._value=e}get(){return this._value}get value(){return this.get()}set value(e){this.set(e)}set(e){if(!this.equalsValue(e)){const t=this._value;this.setPropertyValue(e),this.notifyListeners(t)}}setPropertyValue(e){this._value=e}equalsValue(e){return this.areValuesEqual(e,this._value)}areValuesEqual(e,t){return fs.equalsForValidationStrategy(e,t,this.valueComparisonStrategy)}notifyListeners(e){this.emit(this._value,e,this)}link(e){this.addListener(e),e(this._value,null,this)}lazyLink(e){this.addListener(e)}unlink(e){this.removeListener(e)}unlinkAll(){this.removeAllListeners()}linkAttribute(e,t){const i=s=>{e[t]=s};return this.link(i),i}isSettable(){return!0}get valueComparisonStrategy(){return this._valueComparisonStrategy||"reference"}set valueComparisonStrategy(e){this._valueComparisonStrategy=e}dispose(){this.unlinkAll(),super.dispose()}}const YT=new Ni(!1),WT=new Ni(!1);class hh{constructor(e){if(this._disposeEmitter=new Hi,this._isDisposable=!0,this._isDisposed=!1,e&&this.initializeDisposable(e),Cr()){const t=this.dispose;this.dispose=()=>{Kt(!this._isDisposed,"This Disposable has already been disposed, and cannot be disposed again"),t.call(this),Kt(this._isDisposed,"Disposable.dispose() call is missing from an overridden dispose method")}}}getDisposeEmitter(){return this._disposeEmitter}get disposeEmitter(){return this.getDisposeEmitter()}get isDisposed(){return this._isDisposed}get isDisposable(){return this._isDisposable}set isDisposable(e){this._isDisposable=e}initializeDisposable(e){e&&e.hasOwnProperty("isDisposable")&&(this._isDisposable=e.isDisposable)}addDisposable(...e){this.disposeEmitter.addListener(()=>{for(let t=0;t<e.length;t++)e[t].dispose()})}dispose(){if(Cr()&&!this._isDisposable&&hh.assertNotDisposable(),Kt(!this._isDisposed,"Disposable can only be disposed once"),this.disposerMap)for(const[e]of this.disposerMap)this.removeAllDisposerActions(e);this._disposeEmitter.emit(),this._disposeEmitter.dispose(),this._isDisposed=!0}addDisposerAction(e,t,i,s){this.disposerMap=this.disposerMap||new Map,this.disposerMap.has(e)||this.disposerMap.set(e,new Map);const r=this.disposerMap.get(e);Kt(!r.has(t),`Target already registered for disposer action type: ${e}`,t);const o=()=>{r.delete(t),s()};r.set(t,{disposer:i,unregisterCallback:o}),i.disposeEmitter.addListener(o)}removeDisposerAction(e,t){if(this.disposerMap){const i=this.disposerMap.get(e);if(i){const s=i.get(t);s&&(s.disposer.disposeEmitter.removeListener(s.unregisterCallback),i.delete(t))}}}removeAllDisposerActions(e){if(this.disposerMap){const t=this.disposerMap.get(e);t&&t.forEach((i,s)=>this.removeDisposerAction(e,s))}}static assertNotDisposable(){Kt(!1,"dispose is not supported, exists for the lifetime of the sim")}}function mn(n,e){Kt(Array.isArray(n),"arrayRemove takes an Array");const t=he.indexOf(n,e);Kt(t>=0,"item not found in Array"),n.splice(t,1)}class dr{static add(e,t){if(!dr.ENABLED)return;dr.map.set(e.phetioID,t);const i=e.phetioID.split(".");let s=dr.root;for(let r=0;r<i.length;r++){const o=i[r];s[o]||(s[o]={}),s=s[o]}s._value=t,dr.addedEmitter.emit(e.phetioID,t)}static remove(e){if(!dr.ENABLED)return;const t=e.phetioID;if(dr.map.has(t)){dr.removedEmitter.emit(t,e),dr.map.delete(t);const i=t.split("."),s=[];let r=dr.root;for(let o=0;o<i.length;o++){const d=i[o];r&&(r=r[d],r&&s.push(r))}s.length===i.length&&delete r._value;for(let o=s.length-1;o>=0;o--){const d=s[o];d&&Object.keys(d).length===0&&delete s[o]}}}}var Y2,W2,G2;dr.ENABLED=!!((G2=(W2=(Y2=self==null?void 0:self.phet)==null?void 0:Y2.chipper)==null?void 0:W2.queryParameters)!=null&&G2.supportsDescriptionPlugin);dr.root={};dr.map=new Map;dr.addedEmitter=new Hi;dr.removedEmitter=new Hi;class rr{toString(){return this.name}isEnumerationValue(){return!0}constructor(){const e=this.constructor;Kt(!rr.sealedCache.has(e),"cannot create instanceof of a sealed constructor"),this._name=null,this._enumeration=null}set name(e){Kt(!this._name,"name cannot be changed once defined."),this._name=e}get name(){return Kt(this._name,"name cannot be retrieved until it has been filled in by Enumeration."),this._name}set enumeration(e){Kt(!this._enumeration,"enumeration cannot be changed once defined."),this._enumeration=e}get enumeration(){return Kt(this._enumeration,"enumeration cannot be retrieved until it has been filled in by Enumeration."),this._enumeration}}rr.sealedCache=new Set;function ov(n){const e=[n];let t=n.prototype;for(;t&&(t=Object.getPrototypeOf(t));)t.constructor&&e.push(t.constructor);return e}class oa{constructor(e,t){const i=St()({phetioDocumentation:"",instanceType:e},t);this.phetioDocumentation=i.phetioDocumentation;const s=i.instanceType,r=he.reverse(ov(e));Kt(r.includes(s),"the specified type should be in its own hierarchy"),this.keys=[],this.values=[],r.forEach(o=>{Object.keys(o).forEach(d=>{const g=o[d];g instanceof s&&(Kt(d===d.toUpperCase(),"keys should be upper case by convention"),this.keys.push(d),this.values.push(g),g instanceof e&&(g.name=d,g.enumeration=this))})}),Kt(this.keys.length>0,"no keys found"),Kt(this.values.length>0,"no values found"),this.Enumeration=e,rr.sealedCache.add(e)}getKey(e){return e.name}getValue(e){return this.Enumeration[e]}includes(e){return this.values.includes(e)}}const gg=new zr,dA=n=>n.join("|"),lv=n=>{const e=n.enumeration;if(!gg.has(e)){const t=e.phetioDocumentation?` ${e.phetioDocumentation}`:"",i=e.keys,s=e.values,r=`EnumerationIO(${dA(i)})`;gg.set(e,new pi(r,{validValues:s,documentation:`Possible values: ${i.join(", ")}.${t}`,toStateObject:o=>e.getKey(o),fromStateObject:o=>e.getValue(o),stateSchema:aa.asValue(`${dA(i)}`,{isValidValue:o=>i.includes(o)})}))}return gg.get(e)};var hv;class Si extends rr{}hv=ya.EVENT_TYPE_MODEL;Si.USER=new Si;Si[hv]=new Si;Si.WRAPPER=new Si;Si.OPT_OUT=new Si;Si.enumeration=new oa(Si);Si.phetioType=lv(Si);const gs=new pi("StringIO",{supertype:m0,valueType:"string",documentation:"PhET-iO Type for Javascript's string primitive type",stateSchema:aa.asValue("string",{valueType:"string"}),toStateObject:he.identity}),GT=new pi("LinkedElementIO",{isValidValue:()=>!0,documentation:"A LinkedElement",toStateObject:n=>({elementID:n.element.tandem.phetioID}),applyState:he.noop,stateSchema:{elementID:gs},apiStateKeys:["elementID"]}),Ja=".",uv="_",ym="-",XT="general",jT="global",QT="homeScreen",ZT="model",JT="view",$T="colors",ex="strings",tx="controller",fA="Screen",_m="archetype",cv="Capsule";class Ss{constructor(){Kt(!1,"should not construct a PhetioIDUtils")}static append(e,...t){return t.forEach(i=>{if(Kt(!i.includes(Ja),`separator appears in componentName: ${i}`),i==="")return;e+=(e===""?"":Ja)+i}),e}static getComponentName(e){Kt(e.length>0);const t=e.lastIndexOf(Ja);return t===-1?e:e.substring(t+1,e.length)}static getParentID(e){const t=e.lastIndexOf(Ja);return t===-1?null:e.substring(0,t)}static getDOMElementID(e){return`phetioID:${e}`}static getScreenID(e){const t=[],i=e.split(Ja);for(let s=0;s<i.length;s++){const r=i[s];t.push(r);const o=r.indexOf(fA);if(o>0&&o+fA.length===r.length)return t.join(Ja)}return null}static getGroupElementIndex(e){return Kt(e.includes(this.GROUP_SEPARATOR),"component name for phetioID should have group element syntax"),Number(e.split(this.GROUP_SEPARATOR)[1])}static isAncestor(e,t){const i=e.split(Ja),s=t.split(Ja);for(let r=0;r<i.length;r++)if(i[r]!==s[r])return!1;return t!==e}static getArchetypalPhetioID(e){const t=e.split(Ja);for(let i=0;i<t.length;i++){const s=t[i];if(s.endsWith(cv)&&i<t.length-1)t[i+1]=_m,i++;else{const r=s.split(ym).map(o=>o.includes(uv)?_m:o);t[i]=r.join(ym)}}return t.join(Ja)}}Ss.SEPARATOR=Ja;Ss.GROUP_SEPARATOR=uv;Ss.INTER_TERM_SEPARATOR=ym;Ss.GENERAL_COMPONENT_NAME=XT;Ss.GLOBAL_COMPONENT_NAME=jT;Ss.HOME_SCREEN_COMPONENT_NAME=QT;Ss.MODEL_COMPONENT_NAME=ZT;Ss.VIEW_COMPONENT_NAME=JT;Ss.CONTROLLER_COMPONENT_NAME=tx;Ss.COLORS_COMPONENT_NAME=$T;Ss.STRINGS_COMPONENT_NAME=ex;Ss.ARCHETYPE=_m;Ss.CAPSULE_SUFFIX=cv;const ix=he.hasIn(self,"phet.preloads.phetio"),Am=he.hasIn(self,"phet.chipper.packageObject")?phet.chipper.packageObject:{name:"placeholder"},Jl=ix,w0=Jl&&phet.preloads.phetio.queryParameters.phetioPrintMissingTandems,sx=he.hasIn(Am,"phet.phet-io.validation")?!!Am.phet["phet-io"].validation:!0,nx=self.QueryStringMachine&&QueryStringMachine.containsKey("phetioValidation"),rx=Jl&&nx?!!phet.preloads.phetio.queryParameters.phetioValidation:Jl&&sx,dv=Jl&&rx&&!w0,fv="requiredTandem",pv="optionalTandem",gv="test",ax=Ss.INTER_TERM_SEPARATOR,ox=Ss.ARCHETYPE,bm={required:[],optional:[]},Ku=[],Td=[];class rt{constructor(e,t,i){this.children={},this.isDisposed=!1,this.parentTandem=e,this.name=t,this.phetioID=this.parentTandem?Ss.append(this.parentTandem.phetioID,this.name):this.name;const s=St()({required:!0,supplied:!0,isValidTandemName:r=>rt.getRegexFromCharacterClass().test(r)},i);this.children={},this.parentTandem&&this.parentTandem.addChild(t,this),this.required=s.required,this.supplied=s.supplied}static getRegexFromCharacterClass(e=ya.BASE_TANDEM_CHARACTER_CLASS){return new RegExp(`^[${e}]+$`)}static onMissingTandem(e){if(w0&&!e.supplied){const t=rt.captureStackTrace();e.required?bm.required.push({phetioID:e.phetioID,stack:t}):t.includes("Font")||bm.optional.push({phetioID:e.phetioID,stack:t})}}static captureStackTrace(e=1/0){const t=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");if(t&&(t.writable||t.set&&typeof t.set=="function")){const s=Error.stackTraceLimit;Error.stackTraceLimit=e;const r=new Error().stack;return Error.stackTraceLimit=s,r}else return new Error().stack}addPhetioObject(e){if(Jl){if(!this.required&&!this.supplied)return;if(!rt.launched)rt.bufferedPhetioObjects.push(e);else for(let t=0;t<Ku.length;t++)Ku[t].addPhetioObject(e)}}hasAncestor(e){return this.parentTandem===e||!!(this.parentTandem&&this.parentTandem.hasAncestor(e))}removePhetioObject(e){if(this.supplied){if(Jl)if(!rt.launched)mn(rt.bufferedPhetioObjects,e);else for(let t=0;t<Ku.length;t++)Ku[t].removePhetioObject(e);e.tandem.dispose()}}getExtendedOptions(e){return jn({supplied:this.supplied,required:this.required},e)}createTandem(e,t){return t=this.getExtendedOptions(t),this.hasChild(e)?this.children[e]:new rt(this,e,t)}createTandem1Indexed(e,t,i){return this.createTandem(`${e}${t+1}`,i)}hasChild(e){return this.children.hasOwnProperty(e)}addChild(e,t){this.children[e]=t}iterateDescendants(e){for(const t in this.children)this.children.hasOwnProperty(t)&&(e(this.children[t]),this.children[t].iterateDescendants(e))}removeChild(e){delete this.children[e]}dispose(){this.parentTandem.removeChild(this.name),this.parentTandem=null,this.isDisposed=!0}getArchetypalPhetioID(){return Ss.getArchetypalPhetioID(this.phetioID)}createGroupTandem(e){return this.children[e]?this.children[e]:new lx(this,e)}equals(e){return this.phetioID===e.phetioID}static addPhetioObjectListener(e){Ku.push(e)}static launch(){for(rt.launched=!0;Td.length>0;)Td.shift()()}static unlaunch(){rt.launched=!1,rt.bufferedPhetioObjects.length=0,Td.length=0}static addLaunchListener(e){Td.push(e)}createTandemFromPhetioID(e){return this.createTandem(e.split(Ss.SEPARATOR).join(ax),{isValidTandemName:t=>rt.getRegexFromCharacterClass(ya.BASE_DERIVED_TANDEM_CHARACTER_CLASS).test(t)})}static getStringsTandem(e=rt.ROOT.name){return rt.STRINGS.createTandem(e)}static getDerivedStringsTandem(e=rt.ROOT.name){return rt.getStringsTandem(e).createTandem("derivedStrings")}}rt.SCREEN_TANDEM_NAME_SUFFIX="Screen";rt.missingTandems=bm;rt.PHET_IO_ENABLED=Jl;rt.VALIDATION=dv;rt.apiValidationEnabled=!!assert&&rt.VALIDATION;rt.METADATA_KEY="_metadata";rt.DATA_KEY="_data";rt.launched=!1;rt.bufferedPhetioObjects=[];rt.RootTandem=class extends rt{createTandem(e,t){return rt.VALIDATION&&(e===Ss.GLOBAL_COMPONENT_NAME||e===fv||e===pv||e===gv||e===Ss.GENERAL_COMPONENT_NAME||he.endsWith(e,rt.SCREEN_TANDEM_NAME_SUFFIX)),super.createTandem(e,t)}};rt.ROOT=new rt.RootTandem(null,he.camelCase(Am.name));rt.GENERAL=rt.ROOT.createTandem(Ss.GENERAL_COMPONENT_NAME);rt.ROOT_TEST=rt.ROOT.createTandem(gv);rt.GENERAL_MODEL=rt.GENERAL.createTandem(Ss.MODEL_COMPONENT_NAME);rt.GENERAL_VIEW=rt.GENERAL.createTandem(Ss.VIEW_COMPONENT_NAME);rt.GENERAL_CONTROLLER=rt.GENERAL.createTandem(Ss.CONTROLLER_COMPONENT_NAME);rt.GLOBAL=rt.ROOT.createTandem(Ss.GLOBAL_COMPONENT_NAME);rt.GLOBAL_MODEL=rt.GLOBAL.createTandem(Ss.MODEL_COMPONENT_NAME);rt.GLOBAL_VIEW=rt.GLOBAL.createTandem(Ss.VIEW_COMPONENT_NAME);rt.COLORS=rt.GLOBAL_VIEW.createTandem(Ss.COLORS_COMPONENT_NAME);rt.STRINGS=rt.GENERAL_MODEL.createTandem(Ss.STRINGS_COMPONENT_NAME);rt.OPTIONAL=rt.ROOT.createTandem(pv,{required:!1,supplied:!1});rt.OPT_OUT=rt.OPTIONAL;rt.REQUIRED=rt.ROOT.createTandem(fv,{required:dv||w0,supplied:!1});rt.PREFERENCES=rt.GLOBAL_MODEL.createTandem("preferences");rt.addLaunchListener(()=>{for(;rt.bufferedPhetioObjects.length>0;){const n=rt.bufferedPhetioObjects.shift();n.tandem.addPhetioObject(n)}});class lx extends rt{constructor(e,t){super(e,t),this.groupName=t,this.groupMemberIndex=0}createNextTandem(){const e=this.parentTandem.createTandem(`${this.groupName}${this.groupMemberIndex}`);return this.groupMemberIndex++,e}}const xd=rt.PHET_IO_ENABLED,hx=n=>n.tandem.phetioID,mg=-1;var X2,j2,Q2;const pA=!!((Q2=(j2=(X2=self.phet)==null?void 0:X2.chipper)==null?void 0:j2.queryParameters)!=null&&Q2.supportsDescriptionPlugin),vm={tandem:rt.OPTIONAL,descriptionTandem:rt.OPTIONAL,phetioType:pi.ObjectIO,phetioDocumentation:ya.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDocumentation,phetioState:ya.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioState,phetioReadOnly:ya.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioReadOnly,phetioEventType:Si.MODEL,phetioHighFrequency:ya.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioHighFrequency,phetioPlayback:ya.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioPlayback,phetioFeatured:ya.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioFeatured,phetioDynamicElement:ya.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDynamicElement,phetioDesigned:ya.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDesigned,phetioEventMetadata:null,tandemNameSuffix:null};class As extends hh{constructor(e){super(),this.tandem=vm.tandem,this.phetioID=this.tandem.phetioID,this.phetioObjectInitialized=!1,e&&this.initializePhetioObject({},e)}initializePhetioObject(e,t){if(this.initializeDisposable(t),t.tandem&&rt.onMissingTandem(t.tandem),pA&&t.tandem&&t.tandem.supplied&&dr.add(t.tandem,this),!(xd&&t.tandem&&t.tandem.supplied)){t.tandem&&(this.tandem=t.tandem,this.phetioID=this.tandem.phetioID);return}const i=Qi({},vm,e);let s=St()(i,t);this.phetioIsArchetype=!1,this.phetioBaselineMetadata=rt.apiValidationEnabled||phet.preloads.phetio.queryParameters.phetioEmitAPIBaseline?this.getMetadata(jn({phetioIsArchetype:this.phetioIsArchetype,phetioArchetypePhetioID:this.phetioArchetypePhetioID},s)):null;const r=s.tandem.getArchetypalPhetioID();if(self.phet.preloads.phetio.phetioElementsOverrides){const o=self.phet.preloads.phetio.phetioElementsOverrides[r];o&&(s=St()(s,o))}this.tandem=s.tandem,this.phetioID=this.tandem.phetioID,this._phetioType=s.phetioType,this._phetioState=s.phetioState,this._phetioReadOnly=s.phetioReadOnly,this._phetioDocumentation=s.phetioDocumentation,this._phetioEventType=s.phetioEventType,this._phetioHighFrequency=s.phetioHighFrequency,this._phetioPlayback=s.phetioPlayback,this._phetioDynamicElement=s.phetioDynamicElement,this._phetioFeatured=s.phetioFeatured,this._phetioEventMetadata=s.phetioEventMetadata,this._phetioDesigned=s.phetioDesigned,this.phetioArchetypePhetioID=null,this.linkedElements=[],this.phetioNotifiedObjectCreated=!1,this.phetioMessageStack=[],this._phetioPlayback&&(this._phetioEventMetadata=this._phetioEventMetadata||{},this._phetioEventMetadata.playback=!0),this.tandem.addPhetioObject(this),this.phetioObjectInitialized=!0}static swapCaseOfFirstCharacter(e){const t=e[0];return(t===t.toLowerCase()?t.toUpperCase():t.toLowerCase())+e.substring(1)}get phetioType(){return this._phetioType}get phetioState(){return this._phetioState}get phetioReadOnly(){return this._phetioReadOnly}get phetioDocumentation(){return this._phetioDocumentation}get phetioEventType(){return this._phetioEventType}get phetioHighFrequency(){return this._phetioHighFrequency}get phetioPlayback(){return this._phetioPlayback}get phetioDynamicElement(){return this._phetioDynamicElement}get phetioFeatured(){return this._phetioFeatured}get phetioEventMetadata(){return this._phetioEventMetadata}get phetioDesigned(){return this._phetioDesigned}phetioStartEvent(e,t){if(xd&&this.isPhetioInstrumented()){const i=St()({data:null,getData:null},t);if(!he.hasIn(self,"phet.phetio.dataStream")){this.phetioMessageStack.push(mg);return}const s=this.phetioHighFrequency&&he.hasIn(self,"phet.preloads.phetio.queryParameters")&&!self.phet.preloads.phetio.queryParameters.phetioEmitHighFrequencyEvents&&!phet.phetio.dataStream.isEmittingLowFrequencyEvent(),r=!assert&&!he.hasIn(self,"phet.phetio.dataStream");if(s||this.phetioEventType===Si.OPT_OUT||r){this.phetioMessageStack.push(mg);return}const o=i.getData?i.getData():i.data;this.phetioMessageStack.push(phet.phetio.dataStream.start(this.phetioEventType,this.tandem.phetioID,this.phetioType,e,o,this.phetioEventMetadata,this.phetioHighFrequency)),this.phetioPlayback&&phet.phetio.dataStream.pushNonPlaybackable()}}phetioEndEvent(e=!1){if(xd&&this.isPhetioInstrumented()){const t=this.phetioMessageStack.pop();if(t===mg)return;this.phetioPlayback&&phet.phetio.dataStream.popNonPlaybackable(),phet.phetio.dataStream.end(t,e)}}propagateDynamicFlagsToDescendants(){const e=phet.phetio.phetioEngine,t=rt.launched?[]:rt.bufferedPhetioObjects.map(hx);this.tandem.iterateDescendants(i=>{const s=i.phetioID;if(e.hasPhetioObject(s)||!rt.launched&&t.includes(s)){const r=e.hasPhetioObject(s)?e.getPhetioElement(s):rt.bufferedPhetioObjects[t.indexOf(s)];r.phetioIsArchetype=this.phetioIsArchetype,r.setPhetioDynamicElement(this.phetioDynamicElement),r.phetioBaselineMetadata&&(r.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype)}})}setPhetioDynamicElement(e){this._phetioDynamicElement=this.phetioIsArchetype?!1:e,this.phetioArchetypePhetioID=e?this.tandem.getArchetypalPhetioID():null,this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioDynamicElement=this.phetioDynamicElement)}markDynamicElementArchetype(){this.phetioIsArchetype=!0,this.setPhetioDynamicElement(!1),this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype),rt.PHET_IO_ENABLED&&this.propagateDynamicFlagsToDescendants()}isPhetioInstrumented(){return this.tandem&&this.tandem.supplied}addLinkedElement(e,t){if(!this.isPhetioInstrumented()){this.linkedElements=null;return}if(xd&&e.isPhetioInstrumented()){const i=St()({phetioFeatured:this.phetioFeatured&&e.phetioFeatured},t);let s=null;t&&t.tandem?s=t.tandem:t&&t.tandemName?s=this.tandem.createTandem(t.tandemName):!t&&e.tandem&&(s=this.tandem.createTandem(e.tandem.name)),s&&(i.tandem=s),this.linkedElements.push(new gA(e,i))}}removeLinkedElements(e){this.isPhetioInstrumented()&&this.linkedElements&&this.linkedElements.filter(i=>i.element===e).forEach(i=>{i.dispose(),mn(this.linkedElements,i)})}onSimulationConstructionCompleted(){this.phetioBaselineMetadata=null}getPhetioMouseHitTarget(e=!1){if(!e&&phet.tandem.phetioElementSelectionProperty.value==="linked"){const t=this.getCorrespondingLinkedElement();if(t!=="noCorrespondingLinkedElement")return t.getPhetioMouseHitTarget(!0);if(this.tandem.parentTandem){const i=phet.phetio.phetioEngine.phetioElementMap[this.tandem.parentTandem.phetioID];if(i){const s=i.getCorrespondingLinkedElement();if(s!=="noCorrespondingLinkedElement")return s.getPhetioMouseHitTarget(!0)}}}return phet.tandem.phetioElementSelectionProperty.value==="string"?"phetioNotSelectable":this.getPhetioMouseHitTargetSelf()}getPhetioMouseHitTargetSelf(){return this.isPhetioMouseHitSelectable()?this:"phetioNotSelectable"}isPhetioMouseHitSelectable(){const e=phet.tandem.phetioElementsDisplayProperty.value!=="featured"||this.isDisplayedInFeaturedTree();return this.isPhetioInstrumented()&&e}isDisplayedInFeaturedTree(){if(this.isPhetioInstrumented()&&this.phetioFeatured)return!0;let e=!1;return this.tandem.iterateDescendants(t=>{const i=phet.phetio.phetioEngine.phetioElementMap[t.phetioID];i&&i.isPhetioInstrumented()&&i.phetioFeatured&&(e=!0)}),e}getCorrespondingLinkedElement(){const e=Object.keys(this.tandem.children),t=[];e.forEach(r=>{const o=Ss.append(this.tandem.phetioID,r),d=phet.phetio.phetioEngine.phetioElementMap[o];d instanceof gA&&t.push(d)});const i=t.map(r=>Ss.getComponentName(r.phetioID));let s=null;if(t.length===1)s=t[0];else if(i.includes("property"))s=t[i.indexOf("property")];else if(i.includes("valueProperty"))s=t[i.indexOf("valueProperty")];else return"noCorrespondingLinkedElement";return s.element}dispose(){pA&&this.tandem&&this.tandem.supplied&&dr.remove(this),this.tandem.removePhetioObject(this),this.linkedElements&&(this.linkedElements.forEach(e=>e.dispose()),this.linkedElements.length=0),super.dispose()}getMetadata(e){e=e||this;const t={phetioTypeName:e.phetioType.typeName,phetioDocumentation:e.phetioDocumentation,phetioState:e.phetioState,phetioReadOnly:e.phetioReadOnly,phetioEventType:Si.phetioType.toStateObject(e.phetioEventType),phetioHighFrequency:e.phetioHighFrequency,phetioPlayback:e.phetioPlayback,phetioDynamicElement:e.phetioDynamicElement,phetioIsArchetype:e.phetioIsArchetype,phetioFeatured:e.phetioFeatured,phetioDesigned:e.phetioDesigned};return e.phetioArchetypePhetioID&&(t.phetioArchetypePhetioID=e.phetioArchetypePhetioID),t}static create(e){return new As(e)}}As.DEFAULT_OPTIONS=vm;As.METADATA_DOCUMENTATION=`Get metadata about the PhET-iO Element. This includes the following keys:<ul><li><strong>phetioTypeName:</strong> The name of the PhET-iO Type
</li><li><strong>phetioDocumentation:</strong> default - null. Useful notes about a PhET-iO Element, shown in the PhET-iO Studio Wrapper</li><li><strong>phetioState:</strong> default - true. When true, includes the PhET-iO Element in the PhET-iO state
</li><li><strong>phetioReadOnly:</strong> default - false. When true, you can only get values from the PhET-iO Element; no setting allowed.
</li><li><strong>phetioEventType:</strong> default - MODEL. The category of event that this element emits to the PhET-iO Data Stream.
</li><li><strong>phetioDynamicElement:</strong> default - false. If this element is a "dynamic element" that can be created and destroyed throughout the lifetime of the sim (as opposed to existing forever).
</li><li><strong>phetioIsArchetype:</strong> default - false. If this element is an archetype for a dynamic element.
</li><li><strong>phetioFeatured:</strong> default - false. If this is a featured PhET-iO Element.
</li><li><strong>phetioArchetypePhetioID:</strong> default - ''. If an applicable dynamic element, this is the phetioID of its archetype.
</li></ul>`;class gA extends As{constructor(e,t){const i=St()({phetioType:GT,phetioState:!0,phetioFeatured:e.phetioFeatured},t);i.phetioReadOnly=!0,super(i),this.element=e}}const yg=new zr,wl=n=>(yg.has(n)||yg.set(n,new pi(`ArrayIO<${n.typeName}>`,{valueType:Array,isValidValue:e=>he.every(e,t=>fs.isValueValid(t,n.validator)),parameterTypes:[n],toStateObject:e=>e.map(t=>n.toStateObject(t)),fromStateObject:e=>e.map(t=>n.fromStateObject(t)),documentation:"PhET-iO Type for the built-in JS array type, with the element type specified.",stateSchema:aa.asValue(`Array<${n.typeName}>`,{isValidValue:e=>he.every(e,t=>n.isStateObjectValid(t))})})),yg.get(n)),_g=new zr,lc=(n,e)=>{for(let i=0;i<e.length;i++);const t=`${n.typeName}.${e.map(i=>i.typeName).join(",")}`;if(!_g.has(t)){let i=e.map(r=>r.typeName).join(", ");i===""&&(i="none");const s=e.map(r=>r.typeName).join(",");_g.set(t,new pi(`FunctionIO(${s})=>${n.typeName}`,{valueType:"function",isFunctionType:!0,parameterTypes:e.concat([n]),documentation:`Wrapper for the built-in JS function type.<br><strong>Arguments:</strong> ${i}<br><strong>Return Type:</strong> ${n.typeName}`}))}return _g.get(t)},Ag=new zr,Ai=n=>(Ag.has(n)||Ag.set(n,new pi(`NullableIO<${n.typeName}>`,{documentation:"A PhET-iO Type adding support for null in addition to the behavior of its parameter.",isValidValue:e=>e===null||fs.isValueValid(e,n.validator),parameterTypes:[n],toStateObject:e=>e===null?null:n.toStateObject(e),fromStateObject:e=>e===null?null:n.fromStateObject(e),stateSchema:aa.asValue(`null|<${n.typeName}>`,{isValidValue:e=>e===null||n.isStateObjectValid(e)})})),Ag.get(n)),qr=new pi("VoidIO",{isValidValue:()=>!0,documentation:"Type for which there is no instance, usually to mark functions without a return value",toStateObject:()=>{}});class tn extends rr{}tn.UNDEFER=new tn;tn.NOTIFY=new tn;tn.enumeration=new oa(tn);class ux{constructor(){this.initialized=!1,this.phaseCallbackSets=new cx,this.undeferBeforeUndeferMapPair=new Id(tn.UNDEFER,tn.UNDEFER),this.undeferBeforeNotifyMapPair=new Id(tn.UNDEFER,tn.NOTIFY),this.notifyBeforeUndeferMapPair=new Id(tn.NOTIFY,tn.UNDEFER),this.notifyBeforeNotifyMapPair=new Id(tn.NOTIFY,tn.NOTIFY),this.mapPairs=[this.undeferBeforeUndeferMapPair,this.undeferBeforeNotifyMapPair,this.notifyBeforeUndeferMapPair,this.notifyBeforeNotifyMapPair]}initialize(e,t){e.onBeforeApplyStateEmitter.addListener(i=>{if(i instanceof t&&!i.isDeferred){i.setDeferred(!0);const s=i.tandem.phetioID,r=()=>{const o=i.setDeferred(!1);this.phaseCallbackSets.addNotifyPhaseCallback(new mA(s,tn.NOTIFY,o||he.noop))};this.phaseCallbackSets.addUndeferPhaseCallback(new mA(s,tn.UNDEFER,r))}}),e.undeferEmitter.addListener(i=>{this.undeferAndNotifyProperties(new Set(Object.keys(i)))}),e.isSettingStateProperty.lazyLink(i=>{}),this.initialized=!0}static validateInstrumentedProperty(e){}validatePropertyPhasePair(e,t){}getMapPairFromPhases(e,t){return this.mapPairs.filter(s=>e===s.beforePhase&&t===s.afterPhase)[0]}registerPhetioOrderDependency(e,t,i,s){rt.PHET_IO_ENABLED&&(this.validatePropertyPhasePair(e,t),this.validatePropertyPhasePair(i,s),this.getMapPairFromPhases(t,s).addOrderDependency(e.tandem.phetioID,i.tandem.phetioID))}propertyInAnOrderDependency(e){return he.some(this.mapPairs,t=>t.usesPhetioID(e.tandem.phetioID))}unregisterOrderDependenciesForProperty(e){rt.PHET_IO_ENABLED&&this.propertyInAnOrderDependency(e)&&this.mapPairs.forEach(t=>t.unregisterOrderDependenciesForProperty(e))}undeferAndNotifyProperties(e){const t={};let i=0;for(;this.phaseCallbackSets.size>0;)i++,i>5e3&&this.errorInUndeferAndNotifyStep(t),this.attemptToApplyPhases(tn.UNDEFER,t,e),this.attemptToApplyPhases(tn.NOTIFY,t,e)}errorInUndeferAndNotifyStep(e){const t=[];this.phaseCallbackSets.forEach(o=>t.push(o.getTerm()));const i=[];this.mapPairs.forEach(o=>{const d=o.beforeMap;for(const[g,y]of d)y.forEach(S=>{const T=g+d.beforePhase,L=S+d.afterPhase;(t.includes(T)||t.includes(L))&&i.push({beforeTerm:T,afterTerm:L})})});let s="";console.log("still to be undeferred",this.phaseCallbackSets.undeferSet),console.log("still to be notified",this.phaseCallbackSets.notifySet),console.log("order dependencies that apply to the still todos",i),i.forEach(o=>{s+=`${o.beforeTerm}	${o.afterTerm}
`}),console.log(`

in graphable form:

`,s);const r="Impossible set state: from undeferAndNotifyProperties; ordering constraints cannot be satisfied";if(!assert)throw new Error(r)}getNumberOfOrderDependencies(){let e=0;return this.mapPairs.forEach(t=>{t.afterMap.forEach(i=>{e+=i.size})}),e}attemptToApplyPhases(e,t,i){const s=this.phaseCallbackSets.getSetFromPhase(e);for(const r of s)this.phetioIDCanApplyPhase(r.phetioID,e,t,i)&&(r.listener(),s.delete(r),t[r.getTerm()]=!0)}phetioIDCanApplyPhase(e,t,i,s){if(t===tn.NOTIFY&&!i[e+tn.UNDEFER])return!1;const r=[];this.mapPairs.forEach(o=>{o.afterPhase===t&&r.push(o.afterMap)});for(let o=0;o<r.length;o++){const d=r[o];if(!d.has(e))return!0;const g=d.get(e);for(const y of g)if(!i[y+d.beforePhase]&&s.has(y)&&s.has(e))return!1}return!0}}class mA{constructor(e,t,i=he.noop){this.phetioID=e,this.phase=t,this.listener=i}getTerm(){return this.phetioID+this.phase}}class Id{constructor(e,t){this.beforeMap=new Map,this.beforeMap.beforePhase=e,this.beforeMap.afterPhase=t,this.afterMap=new Map,this.afterMap.beforePhase=e,this.afterMap.afterPhase=t,this.beforeMap.otherMap=this.afterMap,this.afterMap.otherMap=this.beforeMap,this.beforePhase=e,this.afterPhase=t}addOrderDependency(e,t){this.beforeMap.has(e)||this.beforeMap.set(e,new Set),this.beforeMap.get(e).add(t),this.afterMap.has(t)||this.afterMap.set(t,new Set),this.afterMap.get(t).add(e)}unregisterOrderDependenciesForProperty(e){const t=e.tandem.phetioID;[this.beforeMap,this.afterMap].forEach(i=>{i.has(t)&&i.get(t).forEach(s=>{const r=i.otherMap.get(s);r&&r.delete(t),r.size===0&&i.otherMap.delete(s)}),i.delete(t)})}usesPhetioID(e){return this.beforeMap.has(e)||this.afterMap.has(e)}}class cx{constructor(){this.undeferSet=new Set,this.notifySet=new Set}get size(){return this.undeferSet.size+this.notifySet.size}forEach(e){this.undeferSet.forEach(e),this.notifySet.forEach(e)}addUndeferPhaseCallback(e){this.undeferSet.add(e)}addNotifyPhaseCallback(e){this.notifySet.add(e)}getSetFromPhase(e){return e===tn.NOTIFY?this.notifySet:this.undeferSet}}const Vm=new ux,dx={validateValidator:!1};let fx=0;const bg=new zr;class rn extends As{constructor(e,t){const i=St()({units:null,reentrant:!1,hasListenerOrderDependencies:!1,reentrantNotificationStrategy:"queue",valueComparisonStrategy:"reference",tandemNameSuffix:["Property",ox],phetioOuterType:rn.PropertyIO,phetioValueType:pi.ObjectIO},t);i.units&&(i.phetioEventMetadata=i.phetioEventMetadata||{},i.phetioEventMetadata.units=i.units),i.phetioOuterType&&i.phetioValueType&&(i.phetioType=i.phetioOuterType(i.phetioValueType)),fs.containsValidatorKey(i)||(i.isValidValue=()=>!0),super(i),this.id=fx++,this.units=i.units,this.isPhetioInstrumented(),this.validValues=i.validValues,this.tinyProperty=new Ni(e,null,i.hasListenerOrderDependencies,i.reentrantNotificationStrategy),this.tinyProperty.valueComparisonStrategy=i.valueComparisonStrategy,this.notifying=!1,this.reentrant=i.reentrant,this.isDeferred=!1,this.deferredValue=null,this.hasDeferredValue=!1,this.phetioValueType=i.phetioValueType,this.valueValidator=he.pick(i,fs.VALIDATOR_KEYS),this.valueValidator.validationMessage=this.valueValidator.validationMessage||"Property value not valid",this.valueValidator.phetioType&&(this.valueValidator.phetioType=this.valueValidator.phetioType.parameterTypes[0])}isSettable(){return!1}get(){return this.tinyProperty.get()}set(e){WT.value&&!YT.value&&this.isPhetioInstrumented()&&this.phetioState&&this.isSettable()||this.unguardedSet(e)}unguardedSet(e){if(!this.isDisposed){if(this.isDeferred)this.deferredValue=e,this.hasDeferredValue=!0;else if(!this.equalsValue(e)){const t=this.get();this.setPropertyValue(e),this._notifyListeners(t)}}}setPropertyValue(e){this.tinyProperty.setPropertyValue(e)}equalsValue(e){return this.areValuesEqual(e,this.get())}areValuesEqual(e,t){return this.tinyProperty.areValuesEqual(e,t)}_notifyListeners(e){const t=this.get();rt.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent(rn.CHANGED_EVENT_NAME,{getData:()=>{const i=this.phetioType.parameterTypes[0];return{oldValue:Ai(i).toStateObject(e),newValue:i.toStateObject(t)}}}),this.notifying=!0,this.tinyProperty.emit(t,e,this),this.notifying=!1,rt.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}notifyListenersStatic(){this._notifyListeners(null)}setDeferred(e){if(e)this.isDeferred=!0;else{this.isDeferred=!1;const t=this.get();if(this.hasDeferredValue&&(this.setPropertyValue(this.deferredValue),this.hasDeferredValue=!1,this.deferredValue=null),!this.equalsValue(t))return()=>!this.isDisposed&&this._notifyListeners(t)}return null}get value(){return this.get()}set value(e){this.set(e)}addPhetioStateDependencies(e){for(let t=0;t<e.length;t++){const i=e[t];i instanceof rn&&i.isPhetioInstrumented()&&this.isPhetioInstrumented()&&Vm.registerPhetioOrderDependency(i,tn.UNDEFER,this,tn.NOTIFY)}}link(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.addListener(e),this.addPropertyDisposerAction(e,t),e(this.get(),null,this)}lazyLink(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.lazyLink(e),this.addPropertyDisposerAction(e,t)}unlink(e){this.tinyProperty.unlink(e),this.removeDisposerAction("link",e)}unlinkAll(){this.tinyProperty.unlinkAll(),this.removeAllDisposerActions("link")}linkAttribute(e,t){const i=s=>{e[t]=s};return this.link(i),i}toString(){return`Property#${this.id}{${this.get()}}`}debug(e){const t=i=>console.log(e,i);return this.link(t),t}isValueValid(e){return this.getValidationError(e)===null}getValidationError(e){return fs.getValidationError(e,this.valueValidator,dx)}addPropertyDisposerAction(e,t){t!=null&&t.disposer&&this.addDisposerAction("link",e,t.disposer,()=>this.unlink(e))}dispose(){this.isPhetioInstrumented()&&Vm.unregisterOrderDependenciesForProperty(this),super.dispose(),this.tinyProperty.dispose()}hasListener(e){return this.tinyProperty.hasListener(e)}getListenerCount(){return this.tinyProperty.getListenerCount()}forEachListener(e){this.tinyProperty.forEachListener(e)}hasListeners(){return this.tinyProperty.hasListeners()}get valueComparisonStrategy(){return this.tinyProperty.valueComparisonStrategy}set valueComparisonStrategy(e){this.tinyProperty.valueComparisonStrategy=e}toStateObject(){return{value:this.phetioValueType.toStateObject(this.value),validValues:Ai(wl(this.phetioValueType)).toStateObject(this.validValues===void 0?null:this.validValues),units:Ai(gs).toStateObject(this.units)}}applyState(e){Ai(gs).fromStateObject(e.units),this.unguardedSet(this.phetioValueType.fromStateObject(e.value))}static PropertyIO(e){return bg.has(e)||bg.set(e,new pi(`PropertyIO<${e.typeName}>`,{valueType:rn,documentation:"Observable values that send out notifications when the value changes. This differs from the traditional listener pattern in that added listeners also receive a callback with the current value when the listeners are registered. This is a widely-used pattern in PhET-iO simulations.",methodOrder:["link","lazyLink"],events:[rn.CHANGED_EVENT_NAME],parameterTypes:[e],toStateObject:t=>t.toStateObject(),applyState:(t,i)=>{t.applyState(i)},stateSchema:{value:e,validValues:Ai(wl(e)),units:Ai(gs)},apiStateKeys:["validValues","units"],methods:{getValue:{returnType:e,parameterTypes:[],implementation:rn.prototype.get,documentation:"Gets the current value."},getValidationError:{returnType:Ai(gs),parameterTypes:[e],implementation:function(t){return this.getValidationError(t)},documentation:"Checks to see if a proposed value is valid. Returns the first validation error, or null if the value is valid."},setValue:{returnType:qr,parameterTypes:[e],implementation:function(t){this.set(t)},documentation:"Sets the value of the Property. If the value differs from the previous value, listeners are notified with the new value.",invocableForReadOnlyElements:!1},link:{returnType:qr,parameterTypes:[lc(qr,[e,Ai(e)])],implementation:rn.prototype.link,documentation:"Adds a listener which will be called when the value changes. On registration, the listener is also called with the current value. The listener takes two arguments, the new value and the previous value."},lazyLink:{returnType:qr,parameterTypes:[lc(qr,[e,Ai(e)])],implementation:rn.prototype.lazyLink,documentation:'Adds a listener which will be called when the value changes. This method is like "link", but without the current-value callback on registration. The listener takes two arguments, the new value and the previous value.'},unlink:{returnType:qr,parameterTypes:[lc(qr,[e])],implementation:rn.prototype.unlink,documentation:"Removes a listener."}}})),bg.get(e)}getPhetioMouseHitTarget(e=!1){return phet.tandem.phetioElementSelectionProperty.value==="string"?this.getPhetioMouseHitTargetSelf():super.getPhetioMouseHitTarget(e)}}rn.CHANGED_EVENT_NAME="changed";class Li extends rn{constructor(e,t){super(e,t),this._initialValue=e}getInitialValue(){return this._initialValue}get initialValue(){return this.getInitialValue()}setInitialValue(e){this._initialValue=e}get value(){return super.value}set value(e){super.set(e)}reset(){this.set(this._initialValue)}set(e){super.set(e)}isSettable(){return!0}}class Ri extends Li{constructor(e,t){const i=St()({valueType:"boolean",phetioValueType:zh},t);super(e,i)}toggle(){this.value=!this.value}}class px extends Hi{setTimeout(e,t){let i=0;const s=r=>{i+=r,i*1e3>=t&&this.hasListener(s)&&(e(),this.removeListener(s))};return this.addListener(s),s}clearTimeout(e){this.hasListener(e)&&this.removeListener(e)}setInterval(e,t){let i=0;const s=r=>{for(i+=r;i*1e3>=t&&this.hasListener(s);)e(),i=i-t/1e3};return this.addListener(s),s}clearInterval(e){this.hasListener(e)&&this.removeListener(e)}runOnNextTick(e){this.setTimeout(e,0)}}const Qn=new px;class mv{constructor(e){this.callbacks=[],this._delay=400,this._interval=100,this.delayID=null,this.intervalID=null,this.fired=!1,(e==null?void 0:e.delay)!==void 0&&(this.delay=e.delay),(e==null?void 0:e.interval)!==void 0&&(this.interval=e.interval),e!=null&&e.callback&&this.callbacks.push(e.callback)}isRunning(){return this.delayID!==null||this.intervalID!==null}start(){this.isRunning()||(this.fired=!1,this.delayID=Qn.setTimeout(()=>{this.delayID=null,this.intervalID=Qn.setInterval(()=>this.fire(),this.interval),this.fire()},this.delay))}stop(e){this.isRunning()&&(this.delayID&&(Qn.clearTimeout(this.delayID),this.delayID=null),this.intervalID&&(Qn.clearInterval(this.intervalID),this.intervalID=null),e&&!this.fired&&this.fire())}addCallback(e){this.callbacks.includes(e)||this.callbacks.push(e)}removeCallback(e){const t=this.callbacks.indexOf(e);t!==-1&&this.callbacks.splice(t,1)}fire(){const e=this.callbacks.slice(0);for(let t=0;t<e.length;t++)e[t]();this.fired=!0}set delay(e){this._delay=e}get delay(){return this._delay}set interval(e){this._interval=e}get interval(){return this._interval}dispose(){this.stop(!1),this.callbacks.length=0}}const gx="DerivedPropertyIO";function vg(n,e){return n(...e.map(t=>t.get()))}class ps extends rn{constructor(e,t,i){const s=St()({phetioReadOnly:!0,phetioOuterType:ps.DerivedPropertyIO,phetioLinkDependencies:!0},i),r=vg(t,e);super(r,s),rt.VALIDATION&&this.isPhetioInstrumented(),this.dependencies=e,this.derivation=t,this.derivedPropertyListener=this.getDerivedPropertyListener.bind(this),e.forEach(o=>{if(o.lazyLink(this.derivedPropertyListener),rt.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&o instanceof As&&o.isPhetioInstrumented()&&(o instanceof rn&&Vm.registerPhetioOrderDependency(o,tn.UNDEFER,this,tn.UNDEFER),s.tandem&&s.phetioLinkDependencies)){const d=s.tandem.createTandem("dependencies");this.addLinkedElement(o,{tandem:d.createTandemFromPhetioID(o.tandem.phetioID)})}})}hasDependency(e){return this.definedDependencies.includes(e)}get definedDependencies(){return this.dependencies}getDerivedPropertyListener(){this.isDisposed||(this.isDeferred?this.hasDeferredValue=!0:super.set(vg(this.derivation,this.definedDependencies)))}recomputeDerivation(){this.getDerivedPropertyListener()}dispose(){const e=this.definedDependencies;for(let t=0;t<e.length;t++){const i=e[t];i.hasListener(this.derivedPropertyListener)&&i.unlink(this.derivedPropertyListener)}this.dependencies=null,super.dispose()}setDeferred(e){return this.isDeferred&&!e&&(this.deferredValue=vg(this.derivation,this.definedDependencies)),super.setDeferred(e)}static valueEquals(e,t,i){return new ps([e,t],(s,r)=>s===r,i)}static valueNotEquals(e,t,i){return new ps([e,t],(s,r)=>s!==r,i)}static valueEqualsConstant(e,t,i){return new ps([e],s=>s===t,i)}static valueNotEqualsConstant(e,t,i){return new ps([e],s=>s!==t,i)}static and(e,t){return ps.deriveAny(e,()=>he.reduce(e,mx,!0),t)}static or(e,t){return ps.deriveAny(e,()=>he.reduce(e,yx,!1),t)}static multiply(e,t){return ps.deriveAny(e,()=>he.reduce(e,_x,1),t)}static add(e,t){return ps.deriveAny(e,()=>he.reduce(e,Ax,0),t)}static not(e,t){return new ps([e],i=>!i,t)}static fromRecord(e,t,i){const s=Object.values(t);return ps.deriveAny([e,...s],()=>t[e.value].value,i)}static deriveAny(e,t,i){return new ps(e,t,i)}}const mx=(n,e)=>n&&e.value,yx=(n,e)=>n||e.value,_x=(n,e)=>n*e.value,Ax=(n,e)=>n+e.value,Vg=new zr;ps.DerivedPropertyIO=n=>(Vg.has(n)||Vg.set(n,new pi(`${gx}<${n.typeName}>`,{valueType:ps,parameterTypes:[n],supertype:Li.PropertyIO(n),documentation:"Like PropertyIO, but not settable.  Instead it is derived from other DerivedPropertyIO or PropertyIO instances",applyState:he.noop,methods:{setValue:{returnType:qr,parameterTypes:[n],implementation:ps.prototype.set,documentation:"Errors out when you try to set a derived property.",invocableForReadOnlyElements:!1}}})),Vg.get(n));class yv extends ps{}class bx extends ps{}class vx extends ps{constructor(e,t,i){const s=St()({phetioFeatured:!0,phetioValueType:gs,tandemNameSuffix:"StringProperty"},i);super(e,t,s)}}class _v extends rn{constructor(e,t){const i=St()({bidirectional:!1,defaultValue:null,derive:he.identity,map:he.identity,inverseMap:he.identity},t),s=i.derive,r=i.map,o=i.inverseMap,d=typeof s=="function"?s:T=>T[s],g=typeof r=="function"?r:T=>T[r],y=typeof o=="function"?o:T=>T[o],S=e.value===null?g(i.defaultValue):g(d(e.value).value);super(S,i),this.defaultValue=i.defaultValue,this.derive=d,this.map=g,this.inverseMap=y,this.bidirectional=i.bidirectional,this.valuePropertyProperty=e,this.isExternallyChanging=!1,this.propertyPropertyListener=this.onPropertyPropertyChange.bind(this),this.propertyListener=this.onPropertyChange.bind(this),e.link(this.propertyListener),i.bidirectional&&this.lazyLink(this.onSelfChange.bind(this))}onPropertyPropertyChange(e,t,i){this.bidirectional&&this.valuePropertyProperty.value!==null&&i&&this.derive(this.valuePropertyProperty.value)===i&&i.areValuesEqual(this.inverseMap(this.value),i.get())||super.set(this.map(e))}onPropertyChange(e,t){t&&this.derive(t).unlink(this.propertyPropertyListener),e?this.derive(e).link(this.propertyPropertyListener):this.onPropertyPropertyChange(this.defaultValue,null,null)}onSelfChange(e){if(this.valuePropertyProperty.value!==null){const t=this.derive(this.valuePropertyProperty.value);this.areValuesEqual(e,this.map(t.value))||(t.value=this.inverseMap(e))}}dispose(){this.valuePropertyProperty.unlink(this.propertyListener),this.valuePropertyProperty.value!==null&&this.derive(this.valuePropertyProperty.value).unlink(this.propertyPropertyListener),super.dispose()}reset(){this.valuePropertyProperty.value!==null&&this.derive(this.valuePropertyProperty.value).reset()}set(e){this.isExternallyChanging=!0,super.set(e),this.isExternallyChanging=!1}get value(){return super.value}set value(e){this.set(e)}isSettable(){return super.isSettable()||this.bidirectional}}const Vx={validateValidator:!1},wx=[];["name","phetioType","phetioDocumentation","phetioPrivate"].concat(fs.VALIDATOR_KEYS);const yA=n=>n.phetioType,Sx=n=>n.name;class Zf extends As{constructor(e){const t=St()({parameters:wx,hasListenerOrderDependencies:!1,phetioPlayback:As.DEFAULT_OPTIONS.phetioPlayback,phetioEventMetadata:As.DEFAULT_OPTIONS.phetioEventMetadata,phetioDocumentation:""},e),i=t.parameters.filter(yA);t.phetioType=t.phetioOuterType(i.map(yA)),t.phetioPlayback&&(t.phetioEventMetadata=t.phetioEventMetadata||{},t.phetioEventMetadata.dataKeys=t.parameters.map(Sx)),t.phetioDocumentation=Zf.getPhetioDocumentation(t.phetioDocumentation,i),super(t),this.parameters=t.parameters}static validateParameters(e,t){let i=!1;for(let s=0;s<e.length;s++){const r=e[s];i=i||r.phetioPrivate,fs.validateValidator(r)}}validateArguments(...e){for(let t=0;t<this.parameters.length;t++){const i=this.parameters[t];i.phetioType&&i.valueType}}getValidationErrors(...e){return this.parameters.map((t,i)=>fs.getValidationError(e[i],t,Vx))}getPhetioData(...e){let t=null;if(this.parameters.length>0){t={};for(let i=0;i<this.parameters.length;i++){const s=this.parameters[i];s.phetioPrivate||(t[s.name]=s.phetioType.toStateObject(e[i]))}}return t}static getPhetioDocumentation(e,t){const i=s=>{const r=s.phetioDocumentation?` - ${s.phetioDocumentation}`:"";return`<li>${s.name}: ${he.escape(s.phetioType.typeName)}${r}</li>`};return e+(t.length===0?"<br>No parameters.":`<br>The parameters are:<br/><ol>${t.map(i).join("<br/>")}</ol>`)}}const Av=!1;class _n extends Zf{constructor(e){const t=St()({reentrantNotificationStrategy:"stack",phetioOuterType:_n.EmitterIO,phetioState:Av},e);super(t),this.tinyEmitter=new Hi(null,t.hasListenerOrderDependencies,t.reentrantNotificationStrategy)}emit(...e){rt.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("emitted",{data:this.getPhetioData(...e)}),this.tinyEmitter.emit(...e),rt.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}dispose(){this.tinyEmitter.dispose(),super.dispose()}addListener(e,t){this.tinyEmitter.addListener(e),t!=null&&t.disposer&&this.addDisposerAction("listener",e,t.disposer,()=>this.removeListener(e))}removeListener(e){this.tinyEmitter.removeListener(e),this.removeDisposerAction("listener",e)}removeAllListeners(){this.tinyEmitter.removeAllListeners(),this.removeAllDisposerActions("listener")}hasListener(e){return this.tinyEmitter.hasListener(e)}hasListeners(){return this.tinyEmitter.hasListeners()}getListenerCount(){return this.tinyEmitter.getListenerCount()}debug(e){const t=(...i)=>console.log(e,...i);return this.addListener(t),t}}_n.EmitterIO=n=>{const e=n.map(_A).join(",");return wg.has(e)||wg.set(e,new pi(`EmitterIO<${n.map(_A).join(", ")}>`,{valueType:_n,documentation:"Emits when an event occurs and calls added listeners.",parameterTypes:n,events:["emitted"],metadataDefaults:{phetioState:Av},methods:{addListener:{returnType:qr,parameterTypes:[lc(qr,n)],implementation:_n.prototype.addListener,documentation:"Adds a listener which will be called when the emitter emits."},removeListener:{returnType:qr,parameterTypes:[lc(qr,n)],implementation:_n.prototype.removeListener,documentation:"Remove a listener."},emit:{returnType:qr,parameterTypes:n,implementation:function(...t){this.emit(...t)},documentation:"Emits a single event to all listeners.",invocableForReadOnlyElements:!1},getValidationErrors:{returnType:wl(Ai(gs)),parameterTypes:n,implementation:function(...t){return this.getValidationErrors(...t)},documentation:"Checks to see if the proposed values are valid. Returns an array of length N where each element is an error (string) or null if the value is valid."}}})),wg.get(e)};const _A=n=>n.typeName,wg=new zr,Cx="enabledProperty";class af extends Ri{constructor(e,t){const i=St()({phetioDocumentation:"Determines whether the element is enabled (true) or disabled (false).",phetioFeatured:!0,checkTandemName:!0},t);super(e,i)}static get TANDEM_NAME(){return Cx}}const Px={enabledProperty:null,enabled:!0,enabledPropertyOptions:null,phetioEnabledPropertyInstrumented:!0,tandem:As.DEFAULT_OPTIONS.tandem};class Jf extends hh{constructor(e){const t=Vl()({},Px,e),i=!t.enabledProperty;super(t),this.enabledProperty=t.enabledProperty||new af(t.enabled,jn({tandem:t.phetioEnabledPropertyInstrumented?t.tandem.createTandem(af.TANDEM_NAME):rt.OPT_OUT},t.enabledPropertyOptions)),this.disposeEnabledComponent=()=>{i&&this.enabledProperty.dispose()}}setEnabled(e){this.enabledProperty.value=e}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this.enabledProperty.value}dispose(){this.disposeEnabledComponent(),super.dispose()}}class sr{constructor(e,t,i){if(this.dependencies=e,this.dependencyListeners=new Map,e.forEach(s=>{const r=()=>{if(!this.isDisposed){const o=e.map(d=>d.get());t(...o)}};this.dependencyListeners.set(s,r),s.lazyLink(r,{phetioDependencies:he.without(e,s)})}),!i){const s=e.map(r=>r.get());t(...s)}this.isDisposed=!1}get definedDependencies(){return this.dependencies}dispose(){const e=this.definedDependencies;for(let t=0;t<e.length;t++){const i=e[t],s=this.dependencyListeners.get(i);i.hasListener(s)&&i.unlink(s)}this.dependencies=null,this.dependencyListeners.clear(),this.isDisposed=!0}static multilink(e,t){return new sr(e,t,!1)}static multilinkAny(e,t){return new sr(e,t)}static lazyMultilink(e,t){return new sr(e,t,!0)}static lazyMultilinkAny(e,t){return new sr(e,t,!0)}static unmultilink(e){e.dispose()}}const zn=new pi("InfiniteNumberIO",{valueType:"number",documentation:"PhET-iO Type for Javascript's number primitive type",toStateObject:n=>n===Number.POSITIVE_INFINITY?"POSITIVE_INFINITY":n===Number.NEGATIVE_INFINITY?"NEGATIVE_INFINITY":n,fromStateObject:n=>n==="POSITIVE_INFINITY"?Number.POSITIVE_INFINITY:n==="NEGATIVE_INFINITY"?Number.NEGATIVE_INFINITY:n,stateSchema:aa.asValue("'POSITIVE_INFINITY'|'NEGATIVE_INFINITY'|number",{isValidValue:n=>n==="POSITIVE_INFINITY"||n==="NEGATIVE_INFINITY"||typeof n=="number"&&!isNaN(n)})}),Ex={min:zn,max:zn};class ss{constructor(e,t){this._min=e,this._max=t}getMin(){return this._min}get min(){return this.getMin()}set min(e){this.setMin(e)}setMin(e){this._min=e}getMax(){return this._max}get max(){return this.getMax()}set max(e){this.setMax(e)}setMax(e){this._max=e}setMinMax(e,t){return this._min=e,this._max=t,this}set(e){return this.setMinMax(e.min,e.max),this}addValue(e){this._min=Math.min(this._min,e),this._max=Math.max(this._max,e)}withValue(e){return new ss(Math.min(this._min,e),Math.max(this._max,e))}copy(){return new ss(this._min,this._max)}getLength(){return this._max-this._min}getCenter(){return(this._max+this._min)/2}contains(e){return e>=this._min&&e<=this._max}containsRange(e){return this._min<=e.min&&this._max>=e.max}intersects(e){return this._max>=e.min&&e.max>=this._min}intersectsExclusive(e){return this._max>e.min&&e.max>this._min}union(e){return new ss(Math.min(this.min,e.min),Math.max(this.max,e.max))}intersection(e){return new ss(Math.max(this.min,e.min),Math.min(this.max,e.max))}includeRange(e){return this.setMinMax(Math.min(this.min,e.min),Math.max(this.max,e.max))}constrainRange(e){return this.setMinMax(Math.max(this.min,e.min),Math.min(this.max,e.max))}shifted(e){return new ss(this.min+e,this.max+e)}toString(){return`[Range (min:${this._min} max:${this._max})]`}constrainValue(e){return Math.min(Math.max(e,this._min),this._max)}times(e){return new ss(this._min*e,this._max*e)}multiply(e){return this.setMinMax(this._min*e,this._max*e),this}equals(e){return this.constructor===e.constructor&&this._min===e.min&&this._max===e.max}equalsEpsilon(e,t){return this.constructor===e.constructor&&Math.abs(this._min-e.min)<=t&&Math.abs(this._max-e.max)<=t}getNormalizedValue(e){return(e-this.min)/this.getLength()}expandNormalizedValue(e){return e*this.getLength()+this.min}get defaultValue(){throw new Error("defaultValue is undefined, did you mean to use RangeWithValue?")}toStateObject(){return{min:zn.toStateObject(this.min),max:zn.toStateObject(this.max)}}clampDelta(e,t){return e+t<this.min?this.min-e:e+t>this.max?this.max-e:t}static fromStateObject(e){return new ss(zn.fromStateObject(e.min),zn.fromStateObject(e.max))}}ss.RangeIO=new pi("RangeIO",{valueType:ss,documentation:'A range with "min" and "max" members.',stateSchema:Ex,toStateObject:n=>n.toStateObject(),fromStateObject:n=>ss.fromStateObject(n)});ss.EVERYTHING=new ss(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY);ss.NOTHING=new ss(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);const Dx={valueType:"number",isValidValue:n=>n%1===0,validationMessage:"Should be a valid integer"},Tx={isValidValue:n=>!isNaN(n),validationMessage:"Should not be NaN"},xx=["FloatingPoint","Integer"],Ix="rangeProperty",AA=ss.EVERYTHING,bA=Li.PropertyIO(Fi);class Er extends Li{constructor(e,t){var g;const i=St()({numberType:"FloatingPoint",range:AA,validators:[],phetioOuterType:()=>Er.NumberPropertyIO},t);i.rangePropertyOptions=St()({phetioDocumentation:"Provides the range of possible values for the parent NumberPropertyIO",phetioValueType:ss.RangeIO,phetioReadOnly:!0,tandem:i.range!==AA?(g=i.tandem)==null?void 0:g.createTandem(Ix):rt.OPT_OUT},i.rangePropertyOptions),i.valueType="number",i.phetioValueType=Fi;const r=!(i.range&&i.range instanceof rn),o=i.range instanceof rn?i.range:new Li(i.range,i.rangePropertyOptions);i.validators.push(Tx),i.numberType==="Integer"&&i.validators.push(Dx);let d=!1;if(i.validators.push({isValidValue:y=>o.value.contains(y),validationMessage:()=>`Number value ${d?this.value:e} must be within rangeProperty value: ${o.value}`}),super(e,i),d=!0,this.numberType=i.numberType,this.rangeProperty=o,this.rangeProperty.addPhetioStateDependencies([this]),this.addPhetioStateDependencies([this.rangeProperty]),i.validValues&&this.validateNumberAndRangeProperty)for(let y=0;y<i.validValues.length;y++){const S=i.validValues[y];this.validateNumberAndRangeProperty(S)}this.disposeNumberProperty=()=>{r&&this.rangeProperty.dispose()},this.resetNumberProperty=()=>{r&&this.rangeProperty.reset()}}get range(){return this.rangeProperty.value}set range(e){this.rangeProperty.value=e}reset(){this.resetValueAndRange(),super.reset()}dispose(){this.disposeNumberProperty(),super.dispose()}setValueAndRange(e,t){this.setDeferred(!0),this.rangeProperty.setDeferred(!0),this.set(e),this.rangeProperty.set(t);const i=this.setDeferred(!1),s=this.rangeProperty.setDeferred(!1);i&&i(),s&&s()}resetValueAndRange(){this.setValueAndRange(this.initialValue,this.rangeProperty.initialValue)}toStateObject(){const e=super.toStateObject();return he.assignIn({numberType:this.numberType,range:ss.RangeIO.toStateObject(this.rangeProperty.value),rangePhetioID:this.rangeProperty&&this.rangeProperty.isPhetioInstrumented()?this.rangeProperty.tandem.phetioID:null},e)}}Er.NumberPropertyIO=new pi("NumberPropertyIO",{valueType:Er,supertype:bA,parameterTypes:[Fi],documentation:`Extends PropertyIO to add values for the numeric range ( min, max ) and numberType ( '${xx.join("' | '")}' )`,toStateObject:n=>n.toStateObject(),applyState:(n,e)=>{bA.applyState(n,e)},stateSchema:{numberType:gs,range:ss.RangeIO,rangePhetioID:Ai(gs)},apiStateKeys:["numberType","range","rangePhetioID"]});function ii(n){return n instanceof rn||n instanceof Ni}var kx=20,Lx=1,_u=1e6,Nx=1e6,Bx=-7,Rx=21,Mx=!1,Oc="[big.js] ",uh=Oc+"Invalid ",$f=uh+"decimal places",Ox=uh+"rounding mode",bv=Oc+"Division by zero",Ns={},Eo=void 0,qx=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function vv(){function n(e){var t=this;if(!(t instanceof n))return e===Eo?vv():new n(e);if(e instanceof n)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(n.strict===!0&&typeof e!="bigint")throw TypeError(uh+"value");e=e===0&&1/e<0?"-0":String(e)}Fx(t,e)}t.constructor=n}return n.prototype=Ns,n.DP=kx,n.RM=Lx,n.NE=Bx,n.PE=Rx,n.strict=Mx,n.roundDown=0,n.roundHalfUp=1,n.roundHalfEven=2,n.roundUp=3,n}function Fx(n,e){var t,i,s;if(!qx.test(e))throw Error(uh+"number");for(n.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),s=e.length,i=0;i<s&&e.charAt(i)=="0";)++i;if(i==s)n.c=[n.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(n.e=t-i-1,n.c=[],t=0;i<=s;)n.c[t++]=+e.charAt(i++)}return n}function ch(n,e,t,i){var s=n.c;if(t===Eo&&(t=n.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(Ox);if(e<1)i=t===3&&(i||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(i||s[1]!==Eo))),s.length=1,i?(n.e=n.e-e+1,s[0]=1):s[0]=n.e=0;else if(e<s.length){if(i=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(i||s[e+1]!==Eo||s[e-1]&1))||t===3&&(i||!!s[0]),s.length=e,i){for(;++s[--e]>9;)if(s[e]=0,e===0){++n.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return n}function dh(n,e,t){var i=n.e,s=n.c.join(""),r=s.length;if(e)s=s.charAt(0)+(r>1?"."+s.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)s="0"+s;s="0."+s}else if(i>0)if(++i>r)for(i-=r;i--;)s+="0";else i<r&&(s=s.slice(0,i)+"."+s.slice(i));else r>1&&(s=s.charAt(0)+"."+s.slice(1));return n.s<0&&t?"-"+s:s}Ns.abs=function(){var n=new this.constructor(this);return n.s=1,n};Ns.cmp=function(n){var e,t=this,i=t.c,s=(n=new t.constructor(n)).c,r=t.s,o=n.s,d=t.e,g=n.e;if(!i[0]||!s[0])return i[0]?r:s[0]?-o:0;if(r!=o)return r;if(e=r<0,d!=g)return d>g^e?1:-1;for(o=(d=i.length)<(g=s.length)?d:g,r=-1;++r<o;)if(i[r]!=s[r])return i[r]>s[r]^e?1:-1;return d==g?0:d>g^e?1:-1};Ns.div=function(n){var e=this,t=e.constructor,i=e.c,s=(n=new t(n)).c,r=e.s==n.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>_u)throw Error($f);if(!s[0])throw Error(bv);if(!i[0])return n.s=r,n.c=[n.e=0],n;var d,g,y,S,T,L=s.slice(),x=d=s.length,A=i.length,Q=i.slice(0,d),z=Q.length,G=n,re=G.c=[],ne=0,ae=o+(G.e=e.e-n.e)+1;for(G.s=r,r=ae<0?0:ae,L.unshift(0);z++<d;)Q.push(0);do{for(y=0;y<10;y++){if(d!=(z=Q.length))S=d>z?1:-1;else for(T=-1,S=0;++T<d;)if(s[T]!=Q[T]){S=s[T]>Q[T]?1:-1;break}if(S<0){for(g=z==d?s:L;z;){if(Q[--z]<g[z]){for(T=z;T&&!Q[--T];)Q[T]=9;--Q[T],Q[z]+=10}Q[z]-=g[z]}for(;!Q[0];)Q.shift()}else break}re[ne++]=S?y:++y,Q[0]&&S?Q[z]=i[x]||0:Q=[i[x]]}while((x++<A||Q[0]!==Eo)&&r--);return!re[0]&&ne!=1&&(re.shift(),G.e--,ae--),ne>ae&&ch(G,ae,t.RM,Q[0]!==Eo),G};Ns.eq=function(n){return this.cmp(n)===0};Ns.gt=function(n){return this.cmp(n)>0};Ns.gte=function(n){return this.cmp(n)>-1};Ns.lt=function(n){return this.cmp(n)<0};Ns.lte=function(n){return this.cmp(n)<1};Ns.minus=Ns.sub=function(n){var e,t,i,s,r=this,o=r.constructor,d=r.s,g=(n=new o(n)).s;if(d!=g)return n.s=-g,r.plus(n);var y=r.c.slice(),S=r.e,T=n.c,L=n.e;if(!y[0]||!T[0])return T[0]?n.s=-g:y[0]?n=new o(r):n.s=1,n;if(d=S-L){for((s=d<0)?(d=-d,i=y):(L=S,i=T),i.reverse(),g=d;g--;)i.push(0);i.reverse()}else for(t=((s=y.length<T.length)?y:T).length,d=g=0;g<t;g++)if(y[g]!=T[g]){s=y[g]<T[g];break}if(s&&(i=y,y=T,T=i,n.s=-n.s),(g=(t=T.length)-(e=y.length))>0)for(;g--;)y[e++]=0;for(g=e;t>d;){if(y[--t]<T[t]){for(e=t;e&&!y[--e];)y[e]=9;--y[e],y[t]+=10}y[t]-=T[t]}for(;y[--g]===0;)y.pop();for(;y[0]===0;)y.shift(),--L;return y[0]||(n.s=1,y=[L=0]),n.c=y,n.e=L,n};Ns.mod=function(n){var e,t=this,i=t.constructor,s=t.s,r=(n=new i(n)).s;if(!n.c[0])throw Error(bv);return t.s=n.s=1,e=n.cmp(t)==1,t.s=s,n.s=r,e?new i(t):(s=i.DP,r=i.RM,i.DP=i.RM=0,t=t.div(n),i.DP=s,i.RM=r,this.minus(t.times(n)))};Ns.neg=function(){var n=new this.constructor(this);return n.s=-n.s,n};Ns.plus=Ns.add=function(n){var e,t,i,s=this,r=s.constructor;if(n=new r(n),s.s!=n.s)return n.s=-n.s,s.minus(n);var o=s.e,d=s.c,g=n.e,y=n.c;if(!d[0]||!y[0])return y[0]||(d[0]?n=new r(s):n.s=s.s),n;if(d=d.slice(),e=o-g){for(e>0?(g=o,i=y):(e=-e,i=d),i.reverse();e--;)i.push(0);i.reverse()}for(d.length-y.length<0&&(i=y,y=d,d=i),e=y.length,t=0;e;d[e]%=10)t=(d[--e]=d[e]+y[e]+t)/10|0;for(t&&(d.unshift(t),++g),e=d.length;d[--e]===0;)d.pop();return n.c=d,n.e=g,n};Ns.pow=function(n){var e=this,t=new e.constructor("1"),i=t,s=n<0;if(n!==~~n||n<-1e6||n>Nx)throw Error(uh+"exponent");for(s&&(n=-n);n&1&&(i=i.times(e)),n>>=1,!!n;)e=e.times(e);return s?t.div(i):i};Ns.prec=function(n,e){if(n!==~~n||n<1||n>_u)throw Error(uh+"precision");return ch(new this.constructor(this),n,e)};Ns.round=function(n,e){if(n===Eo)n=0;else if(n!==~~n||n<-1e6||n>_u)throw Error($f);return ch(new this.constructor(this),n+this.e+1,e)};Ns.sqrt=function(){var n,e,t,i=this,s=i.constructor,r=i.s,o=i.e,d=new s("0.5");if(!i.c[0])return new s(i);if(r<0)throw Error(Oc+"No square root");r=Math.sqrt(+dh(i,!0,!0)),r===0||r===1/0?(e=i.c.join(""),e.length+o&1||(e+="0"),r=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),n=new s((r==1/0?"5e":(r=r.toExponential()).slice(0,r.indexOf("e")+1))+o)):n=new s(r+""),o=n.e+(s.DP+=4);do t=n,n=d.times(t.plus(i.div(t)));while(t.c.slice(0,o).join("")!==n.c.slice(0,o).join(""));return ch(n,(s.DP-=4)+n.e+1,s.RM)};Ns.times=Ns.mul=function(n){var e,t=this,i=t.constructor,s=t.c,r=(n=new i(n)).c,o=s.length,d=r.length,g=t.e,y=n.e;if(n.s=t.s==n.s?1:-1,!s[0]||!r[0])return n.c=[n.e=0],n;for(n.e=g+y,o<d&&(e=s,s=r,r=e,y=o,o=d,d=y),e=new Array(y=o+d);y--;)e[y]=0;for(g=d;g--;){for(d=0,y=o+g;y>g;)d=e[y]+r[g]*s[y-g-1]+d,e[y--]=d%10,d=d/10|0;e[y]=d}for(d?++n.e:e.shift(),g=e.length;!e[--g];)e.pop();return n.c=e,n};Ns.toExponential=function(n,e){var t=this,i=t.c[0];if(n!==Eo){if(n!==~~n||n<0||n>_u)throw Error($f);for(t=ch(new t.constructor(t),++n,e);t.c.length<n;)t.c.push(0)}return dh(t,!0,!!i)};Ns.toFixed=function(n,e){var t=this,i=t.c[0];if(n!==Eo){if(n!==~~n||n<0||n>_u)throw Error($f);for(t=ch(new t.constructor(t),n+t.e+1,e),n=n+t.e+1;t.c.length<n;)t.c.push(0)}return dh(t,!1,!!i)};Ns[Symbol.for("nodejs.util.inspect.custom")]=Ns.toJSON=Ns.toString=function(){var n=this,e=n.constructor;return dh(n,n.e<=e.NE||n.e>=e.PE,!!n.c[0])};Ns.toNumber=function(){var n=+dh(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(n.toString()))throw Error(Oc+"Imprecise conversion");return n};Ns.toPrecision=function(n,e){var t=this,i=t.constructor,s=t.c[0];if(n!==Eo){if(n!==~~n||n<1||n>_u)throw Error(uh+"precision");for(t=ch(new i(t),n,e);t.c.length<n;)t.c.push(0)}return dh(t,n<=t.e||t.e<=i.NE||t.e>=i.PE,!!s)};Ns.valueOf=function(){var n=this,e=n.constructor;if(e.strict===!0)throw Error(Oc+"valueOf disallowed");return dh(n,n.e<=e.NE||n.e>=e.PE,!0)};var zx=vv();function S0(n,e){if(isNaN(n))return"NaN";if(n===Number.POSITIVE_INFINITY)return"Infinity";if(n===Number.NEGATIVE_INFINITY)return"-Infinity";const t=new zx(n).toFixed(e);return t.startsWith("-0.")&&Number.parseFloat(t)===0?"0"+t.slice(2):t}class Vv extends Li{constructor(e,t){const i=St()({valueType:"string",phetioValueType:gs},t);super(e,i)}}class Po extends Ni{constructor(e,t=!1,i){super(e,i),t&&(this.targetPropertyInstrumented=t)}setValueOrTargetProperty(e,t,i){if(ii(i))this.setTargetProperty(i,e,t);else{const s=this.get();this.clearTargetProperty(),this.setPropertyValue(i),this.areValuesEqual(s,i)||this.notifyListeners(s)}}setTargetProperty(e,t=null,i=null){if(this.targetProperty===e)return t;this.targetProperty&&this.targetProperty instanceof rn&&this.targetProperty.isPhetioInstrumented();const s=this.targetProperty;this.ownedPhetioProperty&&e!==this.ownedPhetioProperty&&this.disposeOwnedPhetioProperty(),t&&i!==null&&t.updateLinkedElementForProperty(i,s,e);const r=this.get();return this.clearTargetProperty(),this.targetProperty=e,this.targetProperty?(this.targetProperty.lazyLink(this.forwardingListener),this.setPropertyValue(this.targetProperty.value)):this.setPropertyValue(r),this.areValuesEqual(r,this.get())||this.notifyListeners(r),t}clearTargetProperty(){this.forwardingListener=this.forwardingListener||this.onTargetPropertyChange.bind(this),this.targetProperty&&this.targetProperty.unlink(this.forwardingListener),this.targetProperty=null}onTargetPropertyChange(e){super.set(e)}set(e){return this.targetProperty?this.targetProperty.set(e):super.set(e),this}setTargetPropertyInstrumented(e,t){return this.targetPropertyInstrumented=e,t}getTargetPropertyInstrumented(){return this.targetPropertyInstrumented||!1}initializePhetio(e,t,i){!this.targetProperty&&this.targetPropertyInstrumented?(this.ownedPhetioProperty=i(),this.setTargetProperty(this.ownedPhetioProperty,e,t)):this.targetProperty&&this.targetProperty instanceof rn&&this.targetProperty.isPhetioInstrumented()&&e.updateLinkedElementForProperty(t,null,this.targetProperty)}getTargetProperty(){return this.targetProperty||null}isSettable(){return this.targetProperty?this.targetProperty.isSettable():super.isSettable()}disposeOwnedPhetioProperty(){this.ownedPhetioProperty&&(this.ownedPhetioProperty.dispose(),delete this.ownedPhetioProperty)}dispose(){this.clearTargetProperty(),this.disposeOwnedPhetioProperty(),super.dispose()}}class kd extends Ni{constructor(e,t){super(e),this.onAccessAttempt=t}get(){return this.onAccessAttempt(),super.get()}set(e){throw new Error("Cannot set a TinyStaticProperty value")}isSettable(){return!1}notifyListeners(e){this.emit(this.get(),e,this)}link(e){this.addListener(e),e(this.get(),null,this)}equalsValue(e){return this.areValuesEqual(e,this.get())}}const vo=function(n,...e){if(Cr()&&n){const t=e.map(i=>Object.keys(he.pick(n,...i)));t.filter(i=>i.length>0).length>1&&Kt(!1,`Cannot simultaneously specify ${t.join(" and ")}`)}},ep=n=>{var T,L,x,A;vo(n,["length"],["elements"]);const e=St()({hasListenerOrderDependencies:!1,length:0,elements:[],elementAddedEmitterOptions:{},elementRemovedEmitterOptions:{},lengthPropertyOptions:{}},n);let t=null;if(e.phetioType)t={name:"value",phetioType:e.phetioType.parameterTypes[0]};else if(fs.getValidatorValidationError(e))t=jn({name:"value"},{isValidValue:he.stubTrue});else{const Q=he.pick(e,fs.VALIDATOR_KEYS);t=jn({name:"value"},Q)}const i=new _n(Qi({tandem:(T=e.tandem)==null?void 0:T.createTandem("elementAddedEmitter"),parameters:[t],phetioReadOnly:!0,hasListenerOrderDependencies:e.hasListenerOrderDependencies},e.elementAddedEmitterOptions)),s=new _n(Qi({tandem:(L=e.tandem)==null?void 0:L.createTandem("elementRemovedEmitter"),parameters:[t],phetioReadOnly:!0,hasListenerOrderDependencies:e.hasListenerOrderDependencies},e.elementRemovedEmitterOptions)),r=new Er(0,Qi({numberType:"Integer",tandem:(x=e.tandem)==null?void 0:x.createTandem("lengthProperty"),phetioReadOnly:!0,hasListenerOrderDependencies:e.hasListenerOrderDependencies},e.lengthPropertyOptions)),o=[],d=[],g=(Q,z)=>{y.notificationsDeferred?y.deferredActions.push(()=>Q.emit(z)):Q.emit(z)},y=new Proxy(o,{get:function(Q,z,G){return vA.hasOwnProperty(z)?vA[z]:Reflect.get(Q,z,G)},set:function(Q,z,G){const re=Q[z];let ne=null;z==="length"&&(ne=Q.slice(G));const ae=Reflect.set(Q,z,G),pe=Number(z);return Number.isInteger(pe)&&pe>=0&&re!==G?(r.value=Q.length,re!==void 0&&g(s,Q[z]),G!==void 0&&g(i,G)):z==="length"&&(r.value=G,ne&&ne.forEach(N=>g(s,N))),ae},deleteProperty:function(Q,z){const G=Number(z);let re;Number.isInteger(G)&&G>=0&&(re=Q[z]);const ne=Reflect.deleteProperty(Q,z);return re!==void 0&&g(s,re),ne}});y.targetArray=o,y.notificationsDeferred=!1,y.emitNotification=g,y.deferredActions=d,y.elementAddedEmitter=i,y.elementRemovedEmitter=s,y.lengthProperty=r;const S=()=>{e.length>=0&&(y.length=e.length),e.elements.length>0&&Array.prototype.push.apply(y,e.elements)};if(S(),y.reset=()=>{y.length=0,S()},(A=e.tandem)!=null&&A.supplied&&(y.phetioElementType=e.phetioType.parameterTypes[0],y._observableArrayPhetioObject=new wv(y,e),rt.PHET_IO_ENABLED)){const Q=phet.phetio.phetioEngine.phetioStateEngine;Q.clearDynamicElementsEmitter.addListener((z,G)=>{var re;(re=y._observableArrayPhetioObject)!=null&&re.tandem.hasAncestor(G)&&(y.length=0,y.setNotificationsDeferred(!0))}),Q.undeferEmitter.addListener(()=>{y.notificationsDeferred&&y.setNotificationsDeferred(!1)}),Q.addSetStateHelper(()=>y.deferredActions.length>0?(y.deferredActions.shift()(),!0):!1)}return y};class wv extends As{constructor(e,t){super(t),this.observableArray=e}}const vA={pop(...n){const e=this.targetArray.length,t=Array.prototype.pop.apply(this.targetArray,n);return this.lengthProperty.value=this.length,e>0&&this.emitNotification(this.elementRemovedEmitter,t),t},shift(...n){const e=this.targetArray.length,t=Array.prototype.shift.apply(this.targetArray,n);return this.lengthProperty.value=this.length,e>0&&this.emitNotification(this.elementRemovedEmitter,t),t},push(...n){const e=Array.prototype.push.apply(this.targetArray,n);this.lengthProperty.value=this.length;for(let t=0;t<arguments.length;t++)this.emitNotification(this.elementAddedEmitter,n[t]);return e},unshift(...n){const e=Array.prototype.unshift.apply(this.targetArray,n);this.lengthProperty.value=this.length;for(let t=0;t<n.length;t++)this.emitNotification(this.elementAddedEmitter,n[t]);return e},splice(...n){const e=Array.prototype.splice.apply(this.targetArray,n);this.lengthProperty.value=this.length;const t=e;for(let i=2;i<n.length;i++)this.emitNotification(this.elementAddedEmitter,n[i]);return t.forEach(i=>this.emitNotification(this.elementRemovedEmitter,i)),e},copyWithin(...n){const e=this.targetArray.slice(),t=Array.prototype.copyWithin.apply(this.targetArray,n);return VA(e,this),t},fill(...n){const e=this.targetArray.slice(),t=Array.prototype.fill.apply(this.targetArray,n);return VA(e,this),t},get:function(n){return this[n]},addItemAddedListener:function(n){this.elementAddedEmitter.addListener(n)},removeItemAddedListener:function(n){this.elementAddedEmitter.removeListener(n)},addItemRemovedListener:function(n){this.elementRemovedEmitter.addListener(n)},removeItemRemovedListener:function(n){this.elementRemovedEmitter.removeListener(n)},add:function(n){this.push(n)},addAll:function(n){this.push(...n)},remove:function(n){mn(this,n)},removeAll:function(n){n.forEach(e=>mn(this,e))},clear:function(){for(;this.length>0;)this.pop()},count:function(n){let e=0;for(let t=0;t<this.length;t++)n(this[t])&&e++;return e},find:function(n,e){return he.find(this,n,e)},shuffle:function(n){const e=n.shuffle(this);this.targetArray.length=0,Array.prototype.push.apply(this.targetArray,e)},getArrayCopy:function(){return this.slice()},dispose:function(){this.elementAddedEmitter.dispose(),this.elementRemovedEmitter.dispose(),this.lengthProperty.dispose(),this._observableArrayPhetioObject&&this._observableArrayPhetioObject.dispose()},toStateObject:function(){return{array:this.map(n=>this.phetioElementType.toStateObject(n))}},applyState:function(n){this.length=0;const e=n.array.map(t=>this.phetioElementType.fromStateObject(t));this.push(...e)},setNotificationsDeferred:function(n){if(!n)for(;this.deferredActions.length>0;)this.deferredActions.shift()();this.notificationsDeferred=n}},VA=(n,e)=>{const t=n,i=e.targetArray.slice();for(let s=0;s<t.length;s++){const r=t[s],o=i.indexOf(r);o>=0&&(t.splice(s,1),i.splice(o,1),s--)}t.forEach(s=>e.emitNotification(e.elementRemovedEmitter,s)),i.forEach(s=>e.emitNotification(e.elementAddedEmitter,s))},Sg=new zr,Hx=n=>(Sg.has(n)||Sg.set(n,new pi(`ObservableArrayIO<${n.typeName}>`,{valueType:wv,parameterTypes:[n],toStateObject:e=>e.observableArray.toStateObject(),applyState:(e,t)=>e.observableArray.applyState(t),stateSchema:{array:wl(n)}})),Sg.get(n));ep.ObservableArrayIO=Hx;class jt extends rr{static fromLayoutOrientation(e){return e==="horizontal"?jt.HORIZONTAL:jt.VERTICAL}constructor(e,t,i,s,r,o,d,g,y,S,T,L,x,A,Q,z,G,re,ne){super(),this.coordinate=e,this.centerCoordinate=t,this.minCoordinate=i,this.maxCoordinate=s,this.minSide=r,this.maxSide=o,this.minSize=d,this.maxSize=g,this.rectCoordinate=y,this.rectSize=S,this.flowBoxOrientation=T,this.size=L,this.line=x,this.preferredSize=A,this.localPreferredSize=Q,this.sizable=z,this.ariaOrientation=T,this.modelToView=G,this.viewToModel=re,this.toVector=ne}}jt.HORIZONTAL=new jt("x","centerX","minX","maxX","left","right","minWidth","maxWidth","rectX","rectWidth","horizontal","width","column","preferredWidth","localPreferredWidth","widthSizable",(n,e)=>n.modelToViewX(e),(n,e)=>n.viewToModelX(e),(n,e,t)=>new t(n,e,0,0));jt.VERTICAL=new jt("y","centerY","minY","maxY","top","bottom","minHeight","maxHeight","rectY","rectHeight","vertical","height","row","preferredHeight","localPreferredHeight","heightSizable",(n,e)=>n.modelToViewY(e),(n,e)=>n.viewToModelY(e),(n,e,t)=>new t(e,n,0,0));jt.enumeration=new oa(jt,{phetioDocumentation:"Horizontal or vertical orientation"});jt.HORIZONTAL.opposite=jt.VERTICAL;jt.VERTICAL.opposite=jt.HORIZONTAL;const Ld=new Ne(0,0);class ot{constructor(e,t,i,s){this.minX=e,this.minY=t,this.maxX=i,this.maxY=s}getWidth(){return this.maxX-this.minX}get width(){return this.getWidth()}getHeight(){return this.maxY-this.minY}get height(){return this.getHeight()}getX(){return this.minX}get x(){return this.getX()}getY(){return this.minY}get y(){return this.getY()}getMinX(){return this.minX}getMinY(){return this.minY}getMaxX(){return this.maxX}getMaxY(){return this.maxY}getLeft(){return this.minX}get left(){return this.minX}getTop(){return this.minY}get top(){return this.minY}getRight(){return this.maxX}get right(){return this.maxX}getBottom(){return this.maxY}get bottom(){return this.maxY}getCenterX(){return(this.maxX+this.minX)/2}get centerX(){return this.getCenterX()}getCenterY(){return(this.maxY+this.minY)/2}get centerY(){return this.getCenterY()}getLeftTop(){return new Ne(this.minX,this.minY)}get leftTop(){return this.getLeftTop()}getCenterTop(){return new Ne(this.getCenterX(),this.minY)}get centerTop(){return this.getCenterTop()}getRightTop(){return new Ne(this.maxX,this.minY)}get rightTop(){return this.getRightTop()}getLeftCenter(){return new Ne(this.minX,this.getCenterY())}get leftCenter(){return this.getLeftCenter()}getCenter(){return new Ne(this.getCenterX(),this.getCenterY())}get center(){return this.getCenter()}getRightCenter(){return new Ne(this.maxX,this.getCenterY())}get rightCenter(){return this.getRightCenter()}getLeftBottom(){return new Ne(this.minX,this.maxY)}get leftBottom(){return this.getLeftBottom()}getCenterBottom(){return new Ne(this.getCenterX(),this.maxY)}get centerBottom(){return this.getCenterBottom()}getRightBottom(){return new Ne(this.maxX,this.maxY)}get rightBottom(){return this.getRightBottom()}isEmpty(){return this.getWidth()<0||this.getHeight()<0}isFinite(){return isFinite(this.minX)&&isFinite(this.minY)&&isFinite(this.maxX)&&isFinite(this.maxY)}hasNonzeroArea(){return this.getWidth()>0&&this.getHeight()>0}isValid(){return!this.isEmpty()&&this.isFinite()}closestPointTo(e){return this.containsCoordinates(e.x,e.y)?e:this.getConstrainedPoint(e)}closestBoundaryPointTo(e){if(this.containsCoordinates(e.x,e.y)){const t=e.x<this.centerX?this.minX:this.maxX,i=e.y<this.centerY?this.minY:this.maxY;return Math.abs(t-e.x)<Math.abs(i-e.y)?new Ne(t,e.y):new Ne(e.x,i)}else return this.getConstrainedPoint(e)}getConstrainedPoint(e){const t=Math.max(Math.min(e.x,this.maxX),this.x),i=Math.max(Math.min(e.y,this.maxY),this.y);return new Ne(t,i)}containsCoordinates(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}containsPoint(e){return this.containsCoordinates(e.x,e.y)}containsBounds(e){return this.minX<=e.minX&&this.maxX>=e.maxX&&this.minY<=e.minY&&this.maxY>=e.maxY}intersectsBounds(e){const t=Math.max(this.minX,e.minX),i=Math.max(this.minY,e.minY),s=Math.min(this.maxX,e.maxX),r=Math.min(this.maxY,e.maxY);return s-t>=0&&r-i>=0}minimumDistanceToPointSquared(e){const t=e.x<this.minX?this.minX:e.x>this.maxX?this.maxX:null,i=e.y<this.minY?this.minY:e.y>this.maxY?this.maxY:null;let s;if(t===null&&i===null)return 0;if(t===null)return s=i-e.y,s*s;if(i===null)return s=t-e.x,s*s;{const r=t-e.x,o=i-e.y;return r*r+o*o}}maximumDistanceToPointSquared(e){let t=e.x>this.getCenterX()?this.minX:this.maxX,i=e.y>this.getCenterY()?this.minY:this.maxY;return t-=e.x,i-=e.y,t*t+i*i}toString(){return`[x:(${this.minX},${this.maxX}),y:(${this.minY},${this.maxY})]`}equals(e){return this.minX===e.minX&&this.minY===e.minY&&this.maxX===e.maxX&&this.maxY===e.maxY}equalsEpsilon(e,t){t=t!==void 0?t:0;const i=this.isFinite(),s=e.isFinite();return i&&s?Math.abs(this.minX-e.minX)<t&&Math.abs(this.minY-e.minY)<t&&Math.abs(this.maxX-e.maxX)<t&&Math.abs(this.maxY-e.maxY)<t:i!==s?!1:this===e?!0:(isFinite(this.minX+e.minX)?Math.abs(this.minX-e.minX)<t:this.minX===e.minX)&&(isFinite(this.minY+e.minY)?Math.abs(this.minY-e.minY)<t:this.minY===e.minY)&&(isFinite(this.maxX+e.maxX)?Math.abs(this.maxX-e.maxX)<t:this.maxX===e.maxX)&&(isFinite(this.maxY+e.maxY)?Math.abs(this.maxY-e.maxY)<t:this.maxY===e.maxY)}copy(e){return e?e.set(this):fn(this.minX,this.minY,this.maxX,this.maxY)}static create(e){return fn(e.minX,e.minY,e.maxX,e.maxY)}union(e){return fn(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}intersection(e){return fn(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}withCoordinates(e,t){return fn(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}withPoint(e){return this.withCoordinates(e.x,e.y)}withX(e){return this.copy().addX(e)}withY(e){return this.copy().addY(e)}withMinX(e){return fn(e,this.minY,this.maxX,this.maxY)}withMinY(e){return fn(this.minX,e,this.maxX,this.maxY)}withMaxX(e){return fn(this.minX,this.minY,e,this.maxY)}withMaxY(e){return fn(this.minX,this.minY,this.maxX,e)}roundedOut(){return fn(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}roundedIn(){return fn(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}transformed(e){return this.copy().transform(e)}dilated(e){return this.dilatedXY(e,e)}dilatedX(e){return fn(this.minX-e,this.minY,this.maxX+e,this.maxY)}dilatedY(e){return fn(this.minX,this.minY-e,this.maxX,this.maxY+e)}dilatedXY(e,t){return fn(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}eroded(e){return this.dilated(-e)}erodedX(e){return this.dilatedX(-e)}erodedY(e){return this.dilatedY(-e)}erodedXY(e,t){return this.dilatedXY(-e,-t)}withOffsets(e,t,i,s){return fn(this.minX-e,this.minY-t,this.maxX+i,this.maxY+s)}shiftedX(e){return fn(this.minX+e,this.minY,this.maxX+e,this.maxY)}shiftedY(e){return fn(this.minX,this.minY+e,this.maxX,this.maxY+e)}shiftedXY(e,t){return fn(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}shifted(e){return this.shiftedXY(e.x,e.y)}blend(e,t){const i=1-t;return fn(i*this.minX+t*e.minX,i*this.minY+t*e.minY,i*this.maxX+t*e.maxX,i*this.maxY+t*e.maxY)}setMinMax(e,t,i,s){return this.minX=e,this.minY=t,this.maxX=i,this.maxY=s,this}setMinX(e){return this.minX=e,this}setMinY(e){return this.minY=e,this}setMaxX(e){return this.maxX=e,this}setMaxY(e){return this.maxY=e,this}set(e){return this.setMinMax(e.minX,e.minY,e.maxX,e.maxY)}includeBounds(e){return this.setMinMax(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}constrainBounds(e){return this.setMinMax(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}addCoordinates(e,t){return this.setMinMax(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}addPoint(e){return this.addCoordinates(e.x,e.y)}addX(e){return this.minX=Math.min(e,this.minX),this.maxX=Math.max(e,this.maxX),this}addY(e){return this.minY=Math.min(e,this.minY),this.maxY=Math.max(e,this.maxY),this}roundOut(){return this.setMinMax(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}roundIn(){return this.setMinMax(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}transform(e){if(this.isEmpty())return this;if(e.isIdentity())return this;const t=this.minX,i=this.minY,s=this.maxX,r=this.maxY;return this.set(ot.NOTHING),this.addPoint(e.multiplyVector2(Ld.setXY(t,i))),this.addPoint(e.multiplyVector2(Ld.setXY(t,r))),this.addPoint(e.multiplyVector2(Ld.setXY(s,i))),this.addPoint(e.multiplyVector2(Ld.setXY(s,r))),this}dilate(e){return this.dilateXY(e,e)}dilateX(e){return this.setMinMax(this.minX-e,this.minY,this.maxX+e,this.maxY)}dilateY(e){return this.setMinMax(this.minX,this.minY-e,this.maxX,this.maxY+e)}dilateXY(e,t){return this.setMinMax(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}erode(e){return this.dilate(-e)}erodeX(e){return this.dilateX(-e)}erodeY(e){return this.dilateY(-e)}erodeXY(e,t){return this.dilateXY(-e,-t)}offset(e,t,i,s){return fn(this.minX-e,this.minY-t,this.maxX+i,this.maxY+s)}shiftX(e){return this.setMinMax(this.minX+e,this.minY,this.maxX+e,this.maxY)}shiftY(e){return this.setMinMax(this.minX,this.minY+e,this.maxX,this.maxY+e)}shiftXY(e,t){return this.setMinMax(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}shift(e){return this.shiftXY(e.x,e.y)}getXRange(){return new ss(this.minX,this.maxX)}setXRange(e){return this.setMinMax(e.min,this.minY,e.max,this.maxY)}get xRange(){return this.getXRange()}set xRange(e){this.setXRange(e)}getYRange(){return new ss(this.minY,this.maxY)}setYRange(e){return this.setMinMax(this.minX,e.min,this.maxX,e.max)}get yRange(){return this.getYRange()}set yRange(e){this.setYRange(e)}getClosestPoint(e,t,i){return i?i.setXY(e,t):i=new Ne(e,t),i.x<this.minX&&(i.x=this.minX),i.x>this.maxX&&(i.x=this.maxX),i.y<this.minY&&(i.y=this.minY),i.y>this.maxY&&(i.y=this.maxY),i}freeToPool(){ot.pool.freeToPool(this)}static rect(e,t,i,s){return fn(e,t,e+i,t+s)}static oriented(e,t,i,s,r){return e===jt.HORIZONTAL?new ot(t,i,s,r):new ot(i,t,r,s)}static point(e,t){if(e instanceof Ne){const i=e;return fn(i.x,i.y,i.x,i.y)}else return fn(e,t,e,t)}}ot.pool=new Fs(ot,{maxSize:1e3,initialize:ot.prototype.setMinMax,defaultArguments:[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]});ot.NOTHING=new ot(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);ot.EVERYTHING=new ot(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);ot.Bounds2IO=new pi("Bounds2IO",{valueType:ot,documentation:"a 2-dimensional bounds rectangle",toStateObject:n=>({minX:n.minX,minY:n.minY,maxX:n.maxX,maxY:n.maxY}),fromStateObject:n=>new ot(zn.fromStateObject(n.minX),zn.fromStateObject(n.minY),zn.fromStateObject(n.maxX),zn.fromStateObject(n.maxY)),stateSchema:{minX:zn,maxX:zn,minY:zn,maxY:zn}});const fn=ot.pool.create.bind(ot.pool);ot.prototype.isBounds=!0;ot.prototype.dimension=2;class Sv{constructor(e){this.rootBin=new Yh(e,null)}allocate(e,t){const i=this.rootBin.findAvailableBin(e,t);if(i){const s=i.split(e,t);return s.use(),s}else return null}deallocate(e){e.unuse()}toString(){let e="",t="";function i(s){e+=`${t+s.toString()}
`,t=`${t}  `,he.each(s.children,i),t=t.substring(2)}return i(this.rootBin),e}}class Yh{constructor(e,t){this.bounds=e,this.parent=t,this.isSplit=!1,this.isUsed=!1,this.children=[]}findAvailableBin(e,t){if(this.isUsed)return null;if(this.bounds.width<e||this.bounds.height<t)return null;if(this.isSplit){for(let i=0;i<this.children.length;i++){const s=this.children[i].findAvailableBin(e,t);if(s)return s}return null}else return this}split(e,t){if(e===this.bounds.width&&t===this.bounds.height)return this;this.isSplit=!0;const i=this.bounds.minX+e,s=this.bounds.minY+t,r=new ot(this.bounds.minX,this.bounds.minY,i,s),o=new ot(i,this.bounds.minY,this.bounds.maxX,s),d=new ot(this.bounds.minX,s,this.bounds.maxX,this.bounds.maxY),g=new Yh(r,this);return this.children.push(g),o.hasNonzeroArea()&&this.children.push(new Yh(o,this)),d.hasNonzeroArea()&&this.children.push(new Yh(d,this)),g}use(){this.isUsed=!0}unuse(){this.isUsed=!1,this.parent&&this.parent.attemptToCollapse()}attemptToCollapse(){for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.isSplit||t.isUsed)return}this.children=[],this.isSplit=!1,this.parent&&this.parent.attemptToCollapse()}toString(){return this.bounds.toString()+(this.isUsed?" used":"")}}Sv.Bin=Yh;function wA(n,...e){return he.each(e,t=>{if(t)for(const i in t)Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))}),n}const Ts={mixInto(n,e){const t=St()({defaultArguments:[],initialize:n.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},e);Kt(t.maxSize>=0),Kt(t.initialSize>=0);const i=[];let s=t.maxSize;const r=Function.prototype.bind.bind(n,n),o=r(...t.defaultArguments),d=t.initialize,g=t.useDefaultConstruction,y=n.prototype;for(wA(n,{pool:i,dirtyFromPool(){return i.length?i.pop():new o},createFromPool(...S){let T;return i.length?(T=i.pop(),d.apply(T,S)):g?(T=new o,d.apply(T,S)):T=new(r(...S)),T},get poolSize(){return i.length},set maxPoolSize(S){Kt(S===Number.POSITIVE_INFINITY||Number.isInteger(S)&&S>=0,"maxPoolSize should be a non-negative integer or infinity"),s=S},get maxPoolSize(){return s}}),wA(y,{freeToPool(){i.length<s&&i.push(this)}});i.length<t.initialSize;)i.push(new o);return n}},Cg=new g0("dot"),Kx=(n,e)=>n.add(e);class ls{constructor(e,t,i){this.x=e,this.y=t,this.z=i}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.dot(this)}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceXYZ(e,t,i){const s=this.x-e,r=this.y-t,o=this.z-i;return Math.sqrt(s*s+r*r+o*o)}distanceSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}distanceSquaredXYZ(e,t,i){const s=this.x-e,r=this.y-t,o=this.z-i;return s*s+r*r+o*o}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}dotXYZ(e,t,i){return this.x*e+this.y*t+this.z*i}angleBetween(e){return Math.acos(qs(this.normalized().dot(e.normalized()),-1,1))}equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}equalsEpsilon(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)}copy(e){return e?e.set(this):Jr(this.x,this.y,this.z)}cross(e){return Jr(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}normalized(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return Jr(this.x/e,this.y/e,this.z/e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return Jr(this.x*e,this.y*e,this.z*e)}times(e){return this.timesScalar(e)}componentTimes(e){return Jr(this.x*e.x,this.y*e.y,this.z*e.z)}plus(e){return Jr(this.x+e.x,this.y+e.y,this.z+e.z)}plusXYZ(e,t,i){return Jr(this.x+e,this.y+t,this.z+i)}plusScalar(e){return Jr(this.x+e,this.y+e,this.z+e)}minus(e){return Jr(this.x-e.x,this.y-e.y,this.z-e.z)}minusXYZ(e,t,i){return Jr(this.x-e,this.y-t,this.z-i)}minusScalar(e){return Jr(this.x-e,this.y-e,this.z-e)}dividedScalar(e){return Jr(this.x/e,this.y/e,this.z/e)}negated(){return Jr(-this.x,-this.y,-this.z)}blend(e,t){return this.plus(e.minus(this).times(t))}average(e){return this.blend(e,.5)}static average(e){return he.reduce(e,Kx,new ls(0,0,0)).divideScalar(e.length)}toString(){return`Vector3(${this.x}, ${this.y}, ${this.z})`}setXYZ(e,t,i){return this.x=e,this.y=t,this.z=i,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}set(e){return this.setXYZ(e.x,e.y,e.z)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXYZ(this.x+e.x,this.y+e.y,this.z+e.z)}addXYZ(e,t,i){return this.setXYZ(this.x+e,this.y+t,this.z+i)}addScalar(e){return this.setXYZ(this.x+e,this.y+e,this.z+e)}subtract(e){return this.setXYZ(this.x-e.x,this.y-e.y,this.z-e.z)}subtractXYZ(e,t,i){return this.setXYZ(this.x-e,this.y-t,this.z-i)}subtractScalar(e){return this.setXYZ(this.x-e,this.y-e,this.z-e)}multiplyScalar(e){return this.setXYZ(this.x*e,this.y*e,this.z*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXYZ(this.x*e.x,this.y*e.y,this.z*e.z)}divideScalar(e){return this.setXYZ(this.x/e,this.y/e,this.z/e)}negate(){return this.setXYZ(-this.x,-this.y,-this.z)}setCross(e){return this.setXYZ(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}normalize(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXYZ(Xn(this.x),Xn(this.y),Xn(this.z))}toStateObject(){return{x:this.x,y:this.y,z:this.z}}freeToPool(){ls.pool.freeToPool(this)}static slerp(e,t,i){return Cg.Quaternion.slerp(new Cg.Quaternion,Cg.Quaternion.getRotationQuaternion(e,t),i).timesVector3(e)}static fromStateObject(e){return ls.from(e)}static from(e){return Jr(e.x||0,e.y||0,e.z||0)}}ls.pool=new Fs(ls,{maxSize:1e3,initialize:ls.prototype.setXYZ,defaultArguments:[0,0,0]});ls.prototype.isVector3=!0;ls.prototype.dimension=3;const Jr=ls.pool.create.bind(ls.pool);class xo extends ls{static mutableOverrideHelper(e){xo.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector3`)}}}xo.mutableOverrideHelper("setXYZ");xo.mutableOverrideHelper("setX");xo.mutableOverrideHelper("setY");xo.mutableOverrideHelper("setZ");ls.ZERO=assert?new xo(0,0,0):new ls(0,0,0);ls.X_UNIT=assert?new xo(1,0,0):new ls(1,0,0);ls.Y_UNIT=assert?new xo(0,1,0):new ls(0,1,0);ls.Z_UNIT=assert?new xo(0,0,1):new ls(0,0,1);ls.Vector3IO=new pi("Vector3IO",{valueType:ls,documentation:"Basic 3-dimensional vector, represented as (x,y,z)",toStateObject:n=>n.toStateObject(),fromStateObject:n=>ls.fromStateObject(n),stateSchema:{x:Fi,y:Fi,z:Fi}});function Ux(n,e,t){return n.x*(e.y-t.y)+e.x*(t.y-n.y)+t.x*(n.y-e.y)}function Yx(n,e,t){return Math.abs(Ux(n,e,t))}function of(n,e,t,i=0){return Yx(n,e,t)<=i}function Dr(n,e,t,i,s){return(i-t)/(e-n)*(s-n)+t}function C0(n,e,t,i){if(n.equalsEpsilon(e,1e-10)||t.equalsEpsilon(i,1e-10))return null;const r=n.x-e.x,o=t.x-i.x,d=n.y-e.y,g=t.y-i.y,y=r*g-d*o;if(Math.abs(y)<1e-10)return null;const S=n.x*e.y-n.y*e.x,T=t.x*i.y-t.y*i.x;return new Ne((S*o-r*T)/y,(S*g-d*T)/y)}class ta{constructor(e){this.points=e.slice();for(let t=0;t<this.points.length-2;t++){const i=this.points[t],s=this.points[t+1],r=this.points[t+2];of(i,s,r)&&(this.points.splice(t+1,1),t--)}}findMatchingPair(e){let t=0;for(;t<this.points.length-2&&this.points[t+1].x<e;)t++;return[this.points[t],this.points[t+1]]}evaluate(e){if(this.points.length===1)return this.points[0].y;{const[t,i]=this.findMatchingPair(e);return t.x===e?t.y:i.x===e?i.y:Dr(t.x,i.x,t.y,i.y,e)}}getCombinedXValues(e){return ta.sortedUniqueEpsilon(this.points.map(t=>t.x).concat(e.points.map(t=>t.x)))}getIntersectedXValues(e){const t=this.getCombinedXValues(e),i=[];for(let r=0;r<t.length-1;r++){const o=t[r],d=t[r+1],g=C0(new Ne(o,this.evaluate(o)),new Ne(d,this.evaluate(d)),new Ne(o,e.evaluate(o)),new Ne(d,e.evaluate(d)));g&&(r===0||g.x>o)&&(r===t.length-2||g.x<d)&&i.push(g.x)}const s=ta.sortedUniqueEpsilon([...t,...i]);return[s[0]-1,...s,s[s.length-1]+1]}binaryXOperation(e,t,i){return new ta(i.map(s=>new Ne(s,t(this.evaluate(s),e.evaluate(s)))))}binaryPointwiseOperation(e,t){return this.binaryXOperation(e,t,this.getCombinedXValues(e))}binaryIntersectingOperation(e,t){return this.binaryXOperation(e,t,this.getIntersectedXValues(e))}plus(e){return this.binaryPointwiseOperation(e,(t,i)=>t+i)}minus(e){return this.binaryPointwiseOperation(e,(t,i)=>t-i)}min(e){return this.binaryIntersectingOperation(e,Math.min)}max(e){return this.binaryIntersectingOperation(e,Math.max)}withXValues(e){return new ta(e.map(t=>new Ne(t,this.evaluate(t))))}inverted(){const e=this.points.map(t=>new Ne(t.y,t.x));return e.length>1&&e[0].x>e[1].x&&e.reverse(),new ta(e)}static sum(...e){return e.reduce((t,i)=>t.plus(i))}static min(...e){return e.reduce((t,i)=>t.min(i))}static max(...e){return e.reduce((t,i)=>t.max(i))}static constant(e){return new ta([new Ne(0,e)])}static linear(e,t){return new ta([new Ne(0,t),new Ne(1,e+t)])}static sortedUniqueEpsilon(e,t=1e-10){e=he.sortBy(e);for(let i=0;i<e.length-1;i++)Math.abs(e[i]-e[i+1])<t&&(e.splice(i,1),i--);return e}}function Wx(n,e,t,i,s,r,o,d){const g=(L,x,A,Q,z,G)=>(G-x)*(A-L)-(Q-x)*(z-L);if(g(n,e,s,r,o,d)*g(t,i,s,r,o,d)>0||g(s,r,n,e,t,i)*g(o,d,n,e,t,i)>0)return null;const y=(n-t)*(r-d)-(e-i)*(s-o);if(Math.abs(y)<1e-10)return null;if(n===s&&e===r||n===o&&e===d)return new Ne(n,e);if(t===s&&i===r||t===o&&i===d)return new Ne(t,i);const S=((n*i-e*t)*(s-o)-(n-t)*(s*d-r*o))/y,T=((n*i-e*t)*(r-d)-(e-i)*(s*d-r*o))/y;return new Ne(S,T)}const Gx={width:zn,height:zn};class Ws{constructor(e,t){this.width=e,this.height=t}toString(){return`[${this.width}w, ${this.height}h]`}set(e){return this.width=e.width,this.height=e.height,this}setWidth(e){return this.width=e,this}setHeight(e){return this.height=e,this}copy(e){return e?e.set(this):new Ws(this.width,this.height)}swapped(){return new Ws(this.height,this.width)}toBounds(e,t){return e=e!==void 0?e:0,t=t!==void 0?t:0,new ot(e,t,this.width+e,this.height+t)}equals(e){return this.width===e.width&&this.height===e.height}equalsEpsilon(e,t=0){return Math.max(Math.abs(this.width-e.width),Math.abs(this.height-e.height))<=t}toStateObject(){return{width:zn.toStateObject(this.width),height:zn.toStateObject(this.height)}}static fromStateObject(e){return new Ws(zn.fromStateObject(e.width),zn.fromStateObject(e.height))}}Ws.Dimension2IO=new pi("Dimension2IO",{valueType:Ws,documentation:'A dimension with "width" and "height" members.',stateSchema:Gx,toStateObject:n=>n.toStateObject(),fromStateObject:n=>Ws.fromStateObject(n)});class Xx{constructor(e,t,i,s,r=!1){this.a1=e,this.a2=t,this.b1=i,this.b2=s,this.clamp=r}evaluate(e){return SA(this.a1,this.a2,this.b1,this.b2,e,this.clamp)}inverse(e){return SA(this.b1,this.b2,this.a1,this.a2,e,this.clamp)}}const SA=(n,e,t,i,s,r)=>{let o=Dr(n,e,t,i,s);if(r){const d=Math.max(t,i),g=Math.min(t,i);o=qs(o,g,d)}return o};function jx(n){return Object.prototype.toString.call(n)==="[object Array]"}class Qs{constructor(e,t,i,s){this.x=e,this.y=t,this.z=i,this.w=s}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.dot(this)}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return this.minus(e).magnitude}distanceXYZW(e,t,i,s){const r=this.x-e,o=this.y-t,d=this.z-i,g=this.w-s;return Math.sqrt(r*r+o*o+d*d+g*g)}distanceSquared(e){return this.minus(e).magnitudeSquared}distanceSquaredXYZW(e,t,i,s){const r=this.x-e,o=this.y-t,d=this.z-i,g=this.w-s;return r*r+o*o+d*d+g*g}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}dotXYZW(e,t,i,s){return this.x*e+this.y*t+this.z*i+this.w*s}angleBetween(e){return Math.acos(qs(this.normalized().dot(e.normalized()),-1,1))}equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}equalsEpsilon(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)+Math.abs(this.w-e.w)<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)&&isFinite(this.w)}copy(e){return e?e.set(this):Na(this.x,this.y,this.z,this.w)}normalized(){const e=this.magnitude;return this.dividedScalar(e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return Na(this.x*e,this.y*e,this.z*e,this.w*e)}times(e){return this.timesScalar(e)}componentTimes(e){return Na(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}plus(e){return Na(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}plusXYZW(e,t,i,s){return Na(this.x+e,this.y+t,this.z+i,this.w+s)}plusScalar(e){return Na(this.x+e,this.y+e,this.z+e,this.w+e)}minus(e){return Na(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}minusXYZW(e,t,i,s){return Na(this.x-e,this.y-t,this.z-i,this.w-s)}minusScalar(e){return Na(this.x-e,this.y-e,this.z-e,this.w-e)}dividedScalar(e){return Na(this.x/e,this.y/e,this.z/e,this.w/e)}negated(){return Na(-this.x,-this.y,-this.z,-this.w)}blend(e,t){return this.plus(e.minus(this).times(t))}average(e){return this.blend(e,.5)}toString(){return`Vector4(${this.x}, ${this.y}, ${this.z}, ${this.w})`}setXYZW(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}set(e){return this.setXYZW(e.x,e.y,e.z,e.w)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXYZW(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}addXYZW(e,t,i,s){return this.setXYZW(this.x+e,this.y+t,this.z+i,this.w+s)}addScalar(e){return this.setXYZW(this.x+e,this.y+e,this.z+e,this.w+e)}subtract(e){return this.setXYZW(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}subtractXYZW(e,t,i,s){return this.setXYZW(this.x-e,this.y-t,this.z-i,this.w-s)}subtractScalar(e){return this.setXYZW(this.x-e,this.y-e,this.z-e,this.w-e)}multiplyScalar(e){return this.setXYZW(this.x*e,this.y*e,this.z*e,this.w*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXYZW(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}divideScalar(e){return this.setXYZW(this.x/e,this.y/e,this.z/e,this.w/e)}negate(){return this.setXYZW(-this.x,-this.y,-this.z,-this.w)}normalize(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXYZW(Xn(this.x),Xn(this.y),Xn(this.z),Xn(this.w))}toStateObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}freeToPool(){Qs.pool.freeToPool(this)}static fromStateObject(e){return Qs.from(e)}static from(e,t=1){return Na(e.x||0,e.y||0,e.z||0,e.w||t)}}Qs.pool=new Fs(Qs,{maxSize:1e3,initialize:Qs.prototype.setXYZW,defaultArguments:[0,0,0,0]});Qs.prototype.isVector4=!0;Qs.prototype.dimension=4;const Na=Qs.pool.create.bind(Qs.pool);class Ka extends Qs{static mutableOverrideHelper(e){Ka.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector3`)}}}Ka.mutableOverrideHelper("setXYZW");Ka.mutableOverrideHelper("setX");Ka.mutableOverrideHelper("setY");Ka.mutableOverrideHelper("setZ");Ka.mutableOverrideHelper("setW");Qs.ZERO=assert?new Ka(0,0,0,0):new Qs(0,0,0,0);Qs.X_UNIT=assert?new Ka(1,0,0,0):new Qs(1,0,0,0);Qs.Y_UNIT=assert?new Ka(0,1,0,0):new Qs(0,1,0,0);Qs.Z_UNIT=assert?new Ka(0,0,1,0):new Qs(0,0,1,0);Qs.W_UNIT=assert?new Ka(0,0,0,1):new Qs(0,0,0,1);const sa=self.Float64Array||Array;class _i{constructor(e,t,i,s){this.m=e,this.n=t;const r=e*t;this.size=r;let o;if(s)this.entries=i;else if(i||(i=0),this.entries=new sa(r),jx(i))for(o=0;o<r;o++)this.entries[o]=i[o];else for(o=0;o<r;o++)this.entries[o]=i}copy(){const e=new _i(this.m,this.n);for(let t=0;t<this.size;t++)e.entries[t]=this.entries[t];return e}getArray(){return this.entries}getArrayCopy(){return new sa(this.entries)}getRowDimension(){return this.m}getColumnDimension(){return this.n}index(e,t){return e*this.n+t}get(e,t){return this.entries[this.index(e,t)]}set(e,t,i){this.entries[this.index(e,t)]=i}getMatrix(e,t,i,s){const r=new _i(t-e+1,s-i+1);for(let o=e;o<=t;o++)for(let d=i;d<=s;d++)r.entries[r.index(o-e,d-i)]=this.entries[this.index(o,d)];return r}getArrayRowMatrix(e,t,i){const s=new _i(e.length,i-t+1);for(let r=0;r<e.length;r++)for(let o=t;o<=i;o++)s.entries[s.index(r,o-t)]=this.entries[this.index(e[r],o)];return s}transpose(e){e=e||new _i(this.n,this.m);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e.entries[e.index(i,t)]=this.entries[this.index(t,i)];return e}norm1(){let e=0;for(let t=0;t<this.n;t++){let i=0;for(let s=0;s<this.m;s++)i+=Math.abs(this.entries[this.index(s,t)]);e=Math.max(e,i)}return e}norm2(){return new Hl(this).norm2()}normInf(){let e=0;for(let t=0;t<this.m;t++){let i=0;for(let s=0;s<this.n;s++)i+=Math.abs(this.entries[this.index(t,s)]);e=Math.max(e,i)}return e}normF(){let e=0;for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e=_i.hypot(e,this.entries[this.index(t,i)]);return e}uminus(){const e=new _i(this.m,this.n);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=-this.entries[this.index(t,i)];return e}plus(e){this.checkMatrixDimensions(e);const t=new _i(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=t.index(i,s);t.entries[r]=this.entries[r]+e.entries[r]}return t}plusEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=this.entries[s]+e.entries[s]}return this}blendEquals(e,t){this.checkMatrixDimensions(e);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=this.index(i,s),o=this.entries[r],d=e.entries[r];this.entries[r]=o+(d-o)*t}return this}minus(e){this.checkMatrixDimensions(e);const t=new _i(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=this.index(i,s);t.entries[r]=this.entries[r]-e.entries[r]}return t}minusEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=this.entries[s]-e.entries[s]}return this}arrayTimes(e){this.checkMatrixDimensions(e);const t=new _i(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=t.index(i,s);t.entries[r]=this.entries[r]*e.entries[r]}return t}arrayTimesEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=this.entries[s]*e.entries[s]}return this}arrayRightDivide(e){this.checkMatrixDimensions(e);const t=new _i(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=this.index(i,s);t.entries[r]=this.entries[r]/e.entries[r]}return t}arrayRightDivideEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=this.entries[s]/e.entries[s]}return this}arrayLeftDivide(e){this.checkMatrixDimensions(e);const t=new _i(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=this.index(i,s);t.entries[r]=e.entries[r]/this.entries[r]}return t}arrayLeftDivideEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=e.entries[s]/this.entries[s]}return this}times(e){let t,i,s,r,o,d;if(e.isMatrix){if(d=e,d.m!==this.n)throw new Error("Matrix inner dimensions must agree.");t=new _i(this.m,d.n);const g=new sa(this.n);for(s=0;s<d.n;s++){for(r=0;r<this.n;r++)g[r]=d.entries[d.index(r,s)];for(i=0;i<this.m;i++){for(o=0,r=0;r<this.n;r++)o+=this.entries[this.index(i,r)]*g[r];t.entries[t.index(i,s)]=o}}return t}else{for(o=e,t=new _i(this.m,this.n),i=0;i<this.m;i++)for(s=0;s<this.n;s++)t.entries[t.index(i,s)]=o*this.entries[this.index(i,s)];return t}}timesEquals(e){for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=e*this.entries[s]}return this}solve(e){return this.m===this.n?new CA(this).solve(e):new Qx(this).solve(e)}solveTranspose(e){return this.transpose().solve(e.transpose())}inverse(){return this.solve(_i.identity(this.m,this.m))}det(){return new CA(this).det()}rank(){return new Hl(this).rank()}cond(){return new Hl(this).cond()}trace(){let e=0;for(let t=0;t<Math.min(this.m,this.n);t++)e+=this.entries[this.index(t,t)];return e}checkMatrixDimensions(e){if(e.m!==this.m||e.n!==this.n)throw new Error("Matrix dimensions must agree.")}toString(){let e="";e+=`dim: ${this.getRowDimension()}x${this.getColumnDimension()}
`;for(let t=0;t<this.getRowDimension();t++){for(let i=0;i<this.getColumnDimension();i++)e+=`${this.get(t,i)} `;e+=`
`}return e}extractVector2(e){return new Ne(this.get(0,e),this.get(1,e))}extractVector3(e){return new ls(this.get(0,e),this.get(1,e),this.get(2,e))}extractVector4(e){return new Qs(this.get(0,e),this.get(1,e),this.get(2,e),this.get(3,e))}setVectors3(e){const t=e.length;for(let i=0;i<t;i++){const s=e[i];this.entries[i]=s.x,this.entries[i+t]=s.y,this.entries[i+2*t]=s.z}return this}static hypot(e,t){let i;return Math.abs(e)>Math.abs(t)?(i=t/e,i=Math.abs(e)*Math.sqrt(1+i*i)):t!==0?(i=e/t,i=Math.abs(t)*Math.sqrt(1+i*i)):i=0,i}static identity(e,t){const i=new _i(e,t);for(let s=0;s<e;s++)for(let r=0;r<t;r++)i.entries[i.index(s,r)]=s===r?1:0;return i}static diagonalMatrix(e){const t=e.length,i=new _i(t,t);for(let s=0;s<t;s++)i.entries[i.index(s,s)]=e[s];return i}static rowVector2(e){return new _i(1,2,[e.x,e.y])}static rowVector3(e){return new _i(1,3,[e.x,e.y,e.z])}static rowVector4(e){return new _i(1,4,[e.x,e.y,e.z,e.w])}static rowVector(e){if(e.isVector2)return _i.rowVector2(e);if(e.isVector3)return _i.rowVector3(e);if(e.isVector4)return _i.rowVector4(e);throw new Error(`undetected type of vector: ${e.toString()}`)}static columnVector2(e){return new _i(2,1,[e.x,e.y])}static columnVector3(e){return new _i(3,1,[e.x,e.y,e.z])}static columnVector4(e){return new _i(4,1,[e.x,e.y,e.z,e.w])}static columnVector(e){if(e.isVector2)return _i.columnVector2(e);if(e.isVector3)return _i.columnVector3(e);if(e.isVector4)return _i.columnVector4(e);throw new Error(`undetected type of vector: ${e.toString()}`)}static fromVectors2(e){const i=e.length,s=new sa(2*i);for(let r=0;r<i;r++){const o=e[r];s[r]=o.x,s[r+i]=o.y}return new _i(2,i,s,!0)}static fromVectors3(e){const i=e.length,s=new sa(3*i);for(let r=0;r<i;r++){const o=e[r];s[r]=o.x,s[r+i]=o.y,s[r+2*i]=o.z}return new _i(3,i,s,!0)}static fromVectors4(e){const i=e.length,s=new sa(4*i);for(let r=0;r<i;r++){const o=e[r];s[r]=o.x,s[r+i]=o.y,s[r+2*i]=o.z,s[r+3*i]=o.w}return new _i(4,i,s,!0)}}_i.prototype.isMatrix=!0;class CA{constructor(e){let t,i,s;this.matrix=e,this.LU=e.getArrayCopy();const r=this.LU;this.m=e.getRowDimension();const o=this.m;this.n=e.getColumnDimension();const d=this.n;for(this.piv=new Uint32Array(o),t=0;t<o;t++)this.piv[t]=t;this.pivsign=1;const g=new sa(o);for(i=0;i<d;i++){for(t=0;t<o;t++)g[t]=r[e.index(t,i)];for(t=0;t<o;t++){const S=Math.min(t,i);let T=0;for(s=0;s<S;s++){const L=e.index(t,s);T+=r[L]*g[s]}g[t]-=T,r[e.index(t,i)]=g[t]}let y=i;for(t=i+1;t<o;t++)Math.abs(g[t])>Math.abs(g[y])&&(y=t);if(y!==i){for(s=0;s<d;s++){const S=e.index(y,s),T=e.index(i,s),L=r[S];r[S]=r[T],r[T]=L}s=this.piv[y],this.piv[y]=this.piv[i],this.piv[i]=s,this.pivsign=-this.pivsign}if(i<o&&r[this.matrix.index(i,i)]!==0)for(t=i+1;t<o;t++)r[e.index(t,i)]/=r[e.index(i,i)]}}isNonsingular(){for(let e=0;e<this.n;e++){const t=this.matrix.index(e,e);if(this.LU[t]===0)return!1}return!0}getL(){const e=new _i(this.m,this.n);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)t>i?e.entries[e.index(t,i)]=this.LU[this.matrix.index(t,i)]:t===i?e.entries[e.index(t,i)]=1:e.entries[e.index(t,i)]=0;return e}getU(){const e=new _i(this.n,this.n);for(let t=0;t<this.n;t++)for(let i=0;i<this.n;i++)t<=i?e.entries[e.index(t,i)]=this.LU[this.matrix.index(t,i)]:e.entries[e.index(t,i)]=0;return e}getPivot(){const e=new Uint32Array(this.m);for(let t=0;t<this.m;t++)e[t]=this.piv[t];return e}getDoublePivot(){const e=new sa(this.m);for(let t=0;t<this.m;t++)e[t]=this.piv[t];return e}det(){if(this.m!==this.n)throw new Error("Matrix must be square.");let e=this.pivsign;for(let t=0;t<this.n;t++)e*=this.LU[this.matrix.index(t,t)];return e}solve(e){let t,i,s;if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isNonsingular())throw new Error("Matrix is singular.");const r=e.getColumnDimension(),o=e.getArrayRowMatrix(this.piv,0,r-1);for(s=0;s<this.n;s++)for(t=s+1;t<this.n;t++)for(i=0;i<r;i++)o.entries[o.index(t,i)]-=o.entries[o.index(s,i)]*this.LU[this.matrix.index(t,s)];for(s=this.n-1;s>=0;s--){for(i=0;i<r;i++)o.entries[o.index(s,i)]/=this.LU[this.matrix.index(s,s)];for(t=0;t<s;t++)for(i=0;i<r;i++)o.entries[o.index(t,i)]-=o.entries[o.index(s,i)]*this.LU[this.matrix.index(t,s)]}return o}}class Qx{constructor(e){this.matrix=e,this.QR=e.getArrayCopy();const t=this.QR;this.m=e.getRowDimension();const i=this.m;this.n=e.getColumnDimension();const s=this.n;this.Rdiag=new sa(s);let r,o,d;for(d=0;d<s;d++){let g=0;for(r=d;r<i;r++)g=_i.hypot(g,t[this.matrix.index(r,d)]);if(g!==0){for(t[this.matrix.index(d,d)]<0&&(g=-g),r=d;r<i;r++)t[this.matrix.index(r,d)]/=g;for(t[this.matrix.index(d,d)]+=1,o=d+1;o<s;o++){let y=0;for(r=d;r<i;r++)y+=t[this.matrix.index(r,d)]*t[this.matrix.index(r,o)];for(y=-y/t[this.matrix.index(d,d)],r=d;r<i;r++)t[this.matrix.index(r,o)]+=y*t[this.matrix.index(r,d)]}}this.Rdiag[d]=-g}}isFullRank(){for(let e=0;e<this.n;e++)if(this.Rdiag[e]===0)return!1;return!0}getH(){const e=new _i(this.m,this.n);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)t>=i?e.entries[e.index(t,i)]=this.QR[this.matrix.index(t,i)]:e.entries[e.index(t,i)]=0;return e}getR(){const e=new _i(this.n,this.n);for(let t=0;t<this.n;t++)for(let i=0;i<this.n;i++)t<i?e.entries[e.index(t,i)]=this.QR[this.matrix.index(t,i)]:t===i?e.entries[e.index(t,i)]=this.Rdiag[t]:e.entries[e.index(t,i)]=0;return e}getQ(){let e,t,i;const s=new _i(this.m,this.n);for(i=this.n-1;i>=0;i--){for(e=0;e<this.m;e++)s.entries[s.index(e,i)]=0;for(s.entries[s.index(i,i)]=1,t=i;t<this.n;t++)if(this.QR[this.matrix.index(i,i)]!==0){let r=0;for(e=i;e<this.m;e++)r+=this.QR[this.matrix.index(e,i)]*s.entries[s.index(e,t)];for(r=-r/this.QR[this.matrix.index(i,i)],e=i;e<this.m;e++)s.entries[s.index(e,t)]+=r*this.QR[this.matrix.index(e,i)]}}return s}solve(e){if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isFullRank())throw new Error("Matrix is rank deficient.");let t,i,s;const r=e.getColumnDimension(),o=e.getArrayCopy();for(s=0;s<this.n;s++)for(i=0;i<r;i++){let d=0;for(t=s;t<this.m;t++)d+=this.QR[this.matrix.index(t,s)]*o[e.index(t,i)];for(d=-d/this.QR[this.matrix.index(s,s)],t=s;t<this.m;t++)o[e.index(t,i)]+=d*this.QR[this.matrix.index(t,s)]}for(s=this.n-1;s>=0;s--){for(i=0;i<r;i++)o[e.index(s,i)]/=this.Rdiag[s];for(t=0;t<s;t++)for(i=0;i<r;i++)o[e.index(t,i)]-=o[e.index(s,i)]*this.QR[this.matrix.index(t,s)]}return new _i(this.n,r,o,!0).getMatrix(0,this.n-1,0,r-1)}}class Hl{constructor(e){this.matrix=e;const t=e,i=t.getArrayCopy();this.m=t.getRowDimension(),this.n=t.getColumnDimension();const s=this.m,r=this.n,o=Math.min,d=Math.max,g=Math.pow,y=Math.abs,S=o(s,r);this.s=new sa(o(s+1,r));const T=this.s;this.U=new sa(s*S);const L=this.U;this.V=new sa(r*r);const x=this.V,A=new sa(r),Q=new sa(s);let z,G,re,ne,ae,pe,N;const Ie=_i.hypot,$e=o(s-1,r),Ee=d(0,o(r-2,s));for(re=0;re<d($e,Ee);re++){if(re<$e){for(T[re]=0,z=re;z<s;z++)T[re]=Ie(T[re],i[z*r+re]);if(T[re]!==0){for(i[re*r+re]<0&&(T[re]=-T[re]),z=re;z<s;z++)i[z*r+re]/=T[re];i[re*r+re]+=1}T[re]=-T[re]}for(G=re+1;G<r;G++){if(re<$e&&T[re]!==0){for(ne=0,z=re;z<s;z++)ne+=i[z*r+re]*i[z*r+G];for(ne=-ne/i[re*r+re],z=re;z<s;z++)i[z*r+G]+=ne*i[z*r+re]}A[G]=i[re*r+G]}if(re<$e)for(z=re;z<s;z++)L[z*S+re]=i[z*r+re];if(re<Ee){for(A[re]=0,z=re+1;z<r;z++)A[re]=Ie(A[re],A[z]);if(A[re]!==0){for(A[re+1]<0&&(A[re]=-A[re]),z=re+1;z<r;z++)A[z]/=A[re];A[re+1]+=1}if(A[re]=-A[re],re+1<s&&A[re]!==0){for(z=re+1;z<s;z++)Q[z]=0;for(G=re+1;G<r;G++)for(z=re+1;z<s;z++)Q[z]+=A[G]*i[z*r+G];for(G=re+1;G<r;G++)for(ne=-A[G]/A[re+1],z=re+1;z<s;z++)i[z*r+G]+=ne*Q[z]}for(z=re+1;z<r;z++)x[z*r+re]=A[z]}}let Je=o(r,s+1);$e<r&&(T[$e]=i[$e*r+$e]),s<Je&&(T[Je-1]=0),Ee+1<Je&&(A[Ee]=i[Ee*r+Je-1]),A[Je-1]=0;{for(G=$e;G<S;G++){for(z=0;z<s;z++)L[z*S+G]=0;L[G*S+G]=1}for(re=$e-1;re>=0;re--)if(T[re]!==0){for(G=re+1;G<S;G++){for(ne=0,z=re;z<s;z++)ne+=L[z*S+re]*L[z*S+G];for(ne=-ne/L[re*S+re],z=re;z<s;z++)L[z*S+G]+=ne*L[z*S+re]}for(z=re;z<s;z++)L[z*S+re]=-L[z*S+re];for(L[re*S+re]=1+L[re*S+re],z=0;z<re-1;z++)L[z*S+re]=0}else{for(z=0;z<s;z++)L[z*S+re]=0;L[re*S+re]=1}}for(re=r-1;re>=0;re--){if(re<Ee&&A[re]!==0)for(G=re+1;G<S;G++){for(ne=0,z=re+1;z<r;z++)ne+=x[z*r+re]*x[z*r+G];for(ne=-ne/x[(re+1)*r+re],z=re+1;z<r;z++)x[z*r+G]+=ne*x[z*r+re]}for(z=0;z<r;z++)x[z*r+re]=0;x[re*r+re]=1}const Ge=Je-1;let _t=0;const it=g(2,-52),nt=g(2,-966);for(;Je>0;){let Ct;if(_t>500)break;for(re=Je-2;re>=-1&&re!==-1;re--)if(y(A[re])<=nt+it*(y(T[re])+y(T[re+1]))){A[re]=0;break}if(re===Je-2)Ct=4;else{let Qe;for(Qe=Je-1;Qe>=re&&Qe!==re;Qe--)if(ne=(Qe!==Je?y(A[Qe]):0)+(Qe!==re+1?y(A[Qe-1]):0),y(T[Qe])<=nt+it*ne){T[Qe]=0;break}Qe===re?Ct=3:Qe===Je-1?Ct=1:(Ct=2,re=Qe)}switch(re++,Ct){case 1:for(ae=A[Je-2],A[Je-2]=0,G=Je-2;G>=re;G--)for(ne=Ie(T[G],ae),pe=T[G]/ne,N=ae/ne,T[G]=ne,G!==re&&(ae=-N*A[G-1],A[G-1]=pe*A[G-1]),z=0;z<r;z++)ne=pe*x[z*r+G]+N*x[z*r+Je-1],x[z*r+Je-1]=-N*x[z*r+G]+pe*x[z*r+Je-1],x[z*r+G]=ne;break;case 2:for(ae=A[re-1],A[re-1]=0,G=re;G<Je;G++)for(ne=Ie(T[G],ae),pe=T[G]/ne,N=ae/ne,T[G]=ne,ae=-N*A[G],A[G]=pe*A[G],z=0;z<s;z++)ne=pe*L[z*S+G]+N*L[z*S+re-1],L[z*S+re-1]=-N*L[z*S+G]+pe*L[z*S+re-1],L[z*S+G]=ne;break;case 3:{const Qe=d(d(d(d(y(T[Je-1]),y(T[Je-2])),y(A[Je-2])),y(T[re])),y(A[re])),Zt=T[Je-1]/Qe,At=T[Je-2]/Qe,Re=A[Je-2]/Qe,at=T[re]/Qe,Et=A[re]/Qe,Nt=((At+Zt)*(At-Zt)+Re*Re)/2,Ht=Zt*Re*(Zt*Re);let cs=0;(Nt!==0||Ht!==0)&&(cs=Math.sqrt(Nt*Nt+Ht),Nt<0&&(cs=-cs),cs=Ht/(Nt+cs)),ae=(at+Zt)*(at-Zt)+cs;let hi=at*Et;for(G=re;G<Je-1;G++){for(ne=Ie(ae,hi),pe=ae/ne,N=hi/ne,G!==re&&(A[G-1]=ne),ae=pe*T[G]+N*A[G],A[G]=pe*A[G]-N*T[G],hi=N*T[G+1],T[G+1]=pe*T[G+1],z=0;z<r;z++)ne=pe*x[z*r+G]+N*x[z*r+G+1],x[z*r+G+1]=-N*x[z*r+G]+pe*x[z*r+G+1],x[z*r+G]=ne;if(ne=Ie(ae,hi),pe=ae/ne,N=hi/ne,T[G]=ne,ae=pe*A[G]+N*T[G+1],T[G+1]=-N*A[G]+pe*T[G+1],hi=N*A[G+1],A[G+1]=pe*A[G+1],G<s-1)for(z=0;z<s;z++)ne=pe*L[z*S+G]+N*L[z*S+G+1],L[z*S+G+1]=-N*L[z*S+G]+pe*L[z*S+G+1],L[z*S+G]=ne}A[Je-2]=ae,_t=_t+1}break;case 4:{if(T[re]<=0)for(T[re]=T[re]<0?-T[re]:0,z=0;z<=Ge;z++)x[z*r+re]=-x[z*r+re];for(;re<Ge&&!(T[re]>=T[re+1]);){if(ne=T[re],T[re]=T[re+1],T[re+1]=ne,re<r-1)for(z=0;z<r;z++)ne=x[z*r+re+1],x[z*r+re+1]=x[z*r+re],x[z*r+re]=ne;if(re<s-1)for(z=0;z<s;z++)ne=L[z*S+re+1],L[z*S+re+1]=L[z*S+re],L[z*S+re]=ne;re++}_t=0,Je--}break;default:throw new Error(`invalid kase: ${Ct}`)}}}getU(){return new _i(this.m,Math.min(this.m+1,this.n),this.U,!0)}getV(){return new _i(this.n,this.n,this.V,!0)}getSingularValues(){return this.s}getS(){const e=new _i(this.n,this.n);for(let t=0;t<this.n;t++){for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=0;e.entries[e.index(t,t)]=this.s[t]}return e}norm2(){return this.s[0]}cond(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}rank(){const e=Math.pow(2,-23),t=Math.max(this.m,this.n)*this.s[0]*e;let i=0;for(let s=0;s<this.s.length;s++)this.s[s]>t&&i++;return i}static pseudoinverse(e){const t=new Hl(e),i=_i.diagonalMatrix(t.getSingularValues().map(s=>Math.abs(s)<1e-300?0:1/s));return t.getV().times(i).times(t.getU().transpose())}}const Zx=self.Float32Array||Array;class Os{constructor(e,t,i,s,r,o,d,g,y,S,T,L,x,A,Q,z,G){this.entries=new Zx(16),this.type=qi.OTHER,this.rowMajor(e!==void 0?e:1,t!==void 0?t:0,i!==void 0?i:0,s!==void 0?s:0,r!==void 0?r:0,o!==void 0?o:1,d!==void 0?d:0,g!==void 0?g:0,y!==void 0?y:0,S!==void 0?S:0,T!==void 0?T:1,L!==void 0?L:0,x!==void 0?x:0,A!==void 0?A:0,Q!==void 0?Q:0,z!==void 0?z:1,G)}rowMajor(e,t,i,s,r,o,d,g,y,S,T,L,x,A,Q,z,G){return this.entries[0]=e,this.entries[1]=r,this.entries[2]=y,this.entries[3]=x,this.entries[4]=t,this.entries[5]=o,this.entries[6]=S,this.entries[7]=A,this.entries[8]=i,this.entries[9]=d,this.entries[10]=T,this.entries[11]=Q,this.entries[12]=s,this.entries[13]=g,this.entries[14]=L,this.entries[15]=z,this.type=G===void 0?x===0&&A===0&&Q===0&&z===1?qi.AFFINE:qi.OTHER:G,this}columnMajor(e,t,i,s,r,o,d,g,y,S,T,L,x,A,Q,z,G){return this.rowMajor(e,r,y,x,t,o,S,A,i,d,T,Q,s,g,L,z,G)}set(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m03(),e.m10(),e.m11(),e.m12(),e.m13(),e.m20(),e.m21(),e.m22(),e.m23(),e.m30(),e.m31(),e.m32(),e.m33(),e.type)}m00(){return this.entries[0]}m01(){return this.entries[4]}m02(){return this.entries[8]}m03(){return this.entries[12]}m10(){return this.entries[1]}m11(){return this.entries[5]}m12(){return this.entries[9]}m13(){return this.entries[13]}m20(){return this.entries[2]}m21(){return this.entries[6]}m22(){return this.entries[10]}m23(){return this.entries[14]}m30(){return this.entries[3]}m31(){return this.entries[7]}m32(){return this.entries[11]}m33(){return this.entries[15]}isIdentity(){return this.type===qi.IDENTITY||this.equals(Os.IDENTITY)}isFinite(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m03())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m13())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())&&isFinite(this.m23())&&isFinite(this.m30())&&isFinite(this.m31())&&isFinite(this.m32())&&isFinite(this.m33())}getTranslation(){return new ls(this.m03(),this.m13(),this.m23())}get translation(){return this.getTranslation()}getScaleVector(){const e=this.m00()+this.m03(),t=this.m10()+this.m13(),i=this.m20()+this.m23(),s=this.m30()+this.m33(),r=this.m01()+this.m03(),o=this.m11()+this.m13(),d=this.m21()+this.m23(),g=this.m31()+this.m33(),y=this.m02()+this.m03(),S=this.m12()+this.m13(),T=this.m22()+this.m23(),L=this.m32()+this.m33();return new ls(Math.sqrt(e*e+t*t+i*i+s*s),Math.sqrt(r*r+o*o+d*d+g*g),Math.sqrt(y*y+S*S+T*T+L*L))}get scaleVector(){return this.getScaleVector()}getCSSTransform(){return`matrix3d(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[2].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[5].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)},${this.entries[8].toFixed(20)},${this.entries[9].toFixed(20)},${this.entries[10].toFixed(20)},${this.entries[11].toFixed(20)},${this.entries[12].toFixed(20)},${this.entries[13].toFixed(20)},${this.entries[14].toFixed(20)},${this.entries[15].toFixed(20)})`}get cssTransform(){return this.getCSSTransform()}equals(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m03()===e.m03()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m13()===e.m13()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()&&this.m23()===e.m23()&&this.m30()===e.m30()&&this.m31()===e.m31()&&this.m32()===e.m32()&&this.m33()===e.m33()}equalsEpsilon(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m03()-e.m03())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m13()-e.m13())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t&&Math.abs(this.m23()-e.m23())<t&&Math.abs(this.m30()-e.m30())<t&&Math.abs(this.m31()-e.m31())<t&&Math.abs(this.m32()-e.m32())<t&&Math.abs(this.m33()-e.m33())<t}copy(){return new Os(this.m00(),this.m01(),this.m02(),this.m03(),this.m10(),this.m11(),this.m12(),this.m13(),this.m20(),this.m21(),this.m22(),this.m23(),this.m30(),this.m31(),this.m32(),this.m33(),this.type)}plus(e){return new Os(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m03()+e.m03(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m13()+e.m13(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22(),this.m23()+e.m23(),this.m30()+e.m30(),this.m31()+e.m31(),this.m32()+e.m32(),this.m33()+e.m33())}minus(e){return new Os(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m03()-e.m03(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m13()-e.m13(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22(),this.m23()-e.m23(),this.m30()-e.m30(),this.m31()-e.m31(),this.m32()-e.m32(),this.m33()-e.m33())}transposed(){return new Os(this.m00(),this.m10(),this.m20(),this.m30(),this.m01(),this.m11(),this.m21(),this.m31(),this.m02(),this.m12(),this.m22(),this.m32(),this.m03(),this.m13(),this.m23(),this.m33())}negated(){return new Os(-this.m00(),-this.m01(),-this.m02(),-this.m03(),-this.m10(),-this.m11(),-this.m12(),-this.m13(),-this.m20(),-this.m21(),-this.m22(),-this.m23(),-this.m30(),-this.m31(),-this.m32(),-this.m33())}inverted(){let e;switch(this.type){case qi.IDENTITY:return this;case qi.TRANSLATION_3D:return new Os(1,0,0,-this.m03(),0,1,0,-this.m13(),0,0,1,-this.m23(),0,0,0,1,qi.TRANSLATION_3D);case qi.SCALING:return new Os(1/this.m00(),0,0,0,0,1/this.m11(),0,0,0,0,1/this.m22(),0,0,0,0,1/this.m33(),qi.SCALING);case qi.AFFINE:case qi.OTHER:if(e=this.getDeterminant(),e!==0)return new Os((-this.m31()*this.m22()*this.m13()+this.m21()*this.m32()*this.m13()+this.m31()*this.m12()*this.m23()-this.m11()*this.m32()*this.m23()-this.m21()*this.m12()*this.m33()+this.m11()*this.m22()*this.m33())/e,(this.m31()*this.m22()*this.m03()-this.m21()*this.m32()*this.m03()-this.m31()*this.m02()*this.m23()+this.m01()*this.m32()*this.m23()+this.m21()*this.m02()*this.m33()-this.m01()*this.m22()*this.m33())/e,(-this.m31()*this.m12()*this.m03()+this.m11()*this.m32()*this.m03()+this.m31()*this.m02()*this.m13()-this.m01()*this.m32()*this.m13()-this.m11()*this.m02()*this.m33()+this.m01()*this.m12()*this.m33())/e,(this.m21()*this.m12()*this.m03()-this.m11()*this.m22()*this.m03()-this.m21()*this.m02()*this.m13()+this.m01()*this.m22()*this.m13()+this.m11()*this.m02()*this.m23()-this.m01()*this.m12()*this.m23())/e,(this.m30()*this.m22()*this.m13()-this.m20()*this.m32()*this.m13()-this.m30()*this.m12()*this.m23()+this.m10()*this.m32()*this.m23()+this.m20()*this.m12()*this.m33()-this.m10()*this.m22()*this.m33())/e,(-this.m30()*this.m22()*this.m03()+this.m20()*this.m32()*this.m03()+this.m30()*this.m02()*this.m23()-this.m00()*this.m32()*this.m23()-this.m20()*this.m02()*this.m33()+this.m00()*this.m22()*this.m33())/e,(this.m30()*this.m12()*this.m03()-this.m10()*this.m32()*this.m03()-this.m30()*this.m02()*this.m13()+this.m00()*this.m32()*this.m13()+this.m10()*this.m02()*this.m33()-this.m00()*this.m12()*this.m33())/e,(-this.m20()*this.m12()*this.m03()+this.m10()*this.m22()*this.m03()+this.m20()*this.m02()*this.m13()-this.m00()*this.m22()*this.m13()-this.m10()*this.m02()*this.m23()+this.m00()*this.m12()*this.m23())/e,(-this.m30()*this.m21()*this.m13()+this.m20()*this.m31()*this.m13()+this.m30()*this.m11()*this.m23()-this.m10()*this.m31()*this.m23()-this.m20()*this.m11()*this.m33()+this.m10()*this.m21()*this.m33())/e,(this.m30()*this.m21()*this.m03()-this.m20()*this.m31()*this.m03()-this.m30()*this.m01()*this.m23()+this.m00()*this.m31()*this.m23()+this.m20()*this.m01()*this.m33()-this.m00()*this.m21()*this.m33())/e,(-this.m30()*this.m11()*this.m03()+this.m10()*this.m31()*this.m03()+this.m30()*this.m01()*this.m13()-this.m00()*this.m31()*this.m13()-this.m10()*this.m01()*this.m33()+this.m00()*this.m11()*this.m33())/e,(this.m20()*this.m11()*this.m03()-this.m10()*this.m21()*this.m03()-this.m20()*this.m01()*this.m13()+this.m00()*this.m21()*this.m13()+this.m10()*this.m01()*this.m23()-this.m00()*this.m11()*this.m23())/e,(this.m30()*this.m21()*this.m12()-this.m20()*this.m31()*this.m12()-this.m30()*this.m11()*this.m22()+this.m10()*this.m31()*this.m22()+this.m20()*this.m11()*this.m32()-this.m10()*this.m21()*this.m32())/e,(-this.m30()*this.m21()*this.m02()+this.m20()*this.m31()*this.m02()+this.m30()*this.m01()*this.m22()-this.m00()*this.m31()*this.m22()-this.m20()*this.m01()*this.m32()+this.m00()*this.m21()*this.m32())/e,(this.m30()*this.m11()*this.m02()-this.m10()*this.m31()*this.m02()-this.m30()*this.m01()*this.m12()+this.m00()*this.m31()*this.m12()+this.m10()*this.m01()*this.m32()-this.m00()*this.m11()*this.m32())/e,(-this.m20()*this.m11()*this.m02()+this.m10()*this.m21()*this.m02()+this.m20()*this.m01()*this.m12()-this.m00()*this.m21()*this.m12()-this.m10()*this.m01()*this.m22()+this.m00()*this.m11()*this.m22())/e);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error(`Matrix4.inverted with unknown type: ${this.type}`)}}timesMatrix(e){if(this.type===qi.IDENTITY||e.type===qi.IDENTITY)return this.type===qi.IDENTITY?e:this;if(this.type===e.type){if(this.type===qi.TRANSLATION_3D)return new Os(1,0,0,this.m03()+e.m02(),0,1,0,this.m13()+e.m12(),0,0,1,this.m23()+e.m23(),0,0,0,1,qi.TRANSLATION_3D);if(this.type===qi.SCALING)return new Os(this.m00()*e.m00(),0,0,0,0,this.m11()*e.m11(),0,0,0,0,this.m22()*e.m22(),0,0,0,0,1,qi.SCALING)}return this.type!==qi.OTHER&&e.type!==qi.OTHER?new Os(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m00()*e.m03()+this.m01()*e.m13()+this.m02()*e.m23()+this.m03(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m10()*e.m03()+this.m11()*e.m13()+this.m12()*e.m23()+this.m13(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22(),this.m20()*e.m03()+this.m21()*e.m13()+this.m22()*e.m23()+this.m23(),0,0,0,1,qi.AFFINE):new Os(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20()+this.m03()*e.m30(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21()+this.m03()*e.m31(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22()+this.m03()*e.m32(),this.m00()*e.m03()+this.m01()*e.m13()+this.m02()*e.m23()+this.m03()*e.m33(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20()+this.m13()*e.m30(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21()+this.m13()*e.m31(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22()+this.m13()*e.m32(),this.m10()*e.m03()+this.m11()*e.m13()+this.m12()*e.m23()+this.m13()*e.m33(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20()+this.m23()*e.m30(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21()+this.m23()*e.m31(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22()+this.m23()*e.m32(),this.m20()*e.m03()+this.m21()*e.m13()+this.m22()*e.m23()+this.m23()*e.m33(),this.m30()*e.m00()+this.m31()*e.m10()+this.m32()*e.m20()+this.m33()*e.m30(),this.m30()*e.m01()+this.m31()*e.m11()+this.m32()*e.m21()+this.m33()*e.m31(),this.m30()*e.m02()+this.m31()*e.m12()+this.m32()*e.m22()+this.m33()*e.m32(),this.m30()*e.m03()+this.m31()*e.m13()+this.m32()*e.m23()+this.m33()*e.m33())}timesVector4(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z+this.m03()*e.w,i=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z+this.m13()*e.w,s=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z+this.m23()*e.w,r=this.m30()*e.x+this.m31()*e.y+this.m32()*e.z+this.m33()*e.w;return new Qs(t,i,s,r)}timesVector3(e){return ls.from(this.timesVector4(Qs.from(e)))}timesTransposeVector4(e){const t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z+this.m30()*e.w,i=this.m01()*e.x+this.m11()*e.y+this.m21()*e.z+this.m31()*e.w,s=this.m02()*e.x+this.m12()*e.y+this.m22()*e.z+this.m32()*e.w,r=this.m03()*e.x+this.m13()*e.y+this.m23()*e.z+this.m33()*e.w;return new Qs(t,i,s,r)}timesTransposeVector3(e){return ls.from(this.timesTransposeVector4(Qs.from(e)))}timesRelativeVector3(e){const t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z,i=this.m01()*e.y+this.m11()*e.y+this.m21()*e.z,s=this.m02()*e.z+this.m12()*e.y+this.m22()*e.z;return new ls(t,i,s)}getDeterminant(){return this.m03()*this.m12()*this.m21()*this.m30()-this.m02()*this.m13()*this.m21()*this.m30()-this.m03()*this.m11()*this.m22()*this.m30()+this.m01()*this.m13()*this.m22()*this.m30()+this.m02()*this.m11()*this.m23()*this.m30()-this.m01()*this.m12()*this.m23()*this.m30()-this.m03()*this.m12()*this.m20()*this.m31()+this.m02()*this.m13()*this.m20()*this.m31()+this.m03()*this.m10()*this.m22()*this.m31()-this.m00()*this.m13()*this.m22()*this.m31()-this.m02()*this.m10()*this.m23()*this.m31()+this.m00()*this.m12()*this.m23()*this.m31()+this.m03()*this.m11()*this.m20()*this.m32()-this.m01()*this.m13()*this.m20()*this.m32()-this.m03()*this.m10()*this.m21()*this.m32()+this.m00()*this.m13()*this.m21()*this.m32()+this.m01()*this.m10()*this.m23()*this.m32()-this.m00()*this.m11()*this.m23()*this.m32()-this.m02()*this.m11()*this.m20()*this.m33()+this.m01()*this.m12()*this.m20()*this.m33()+this.m02()*this.m10()*this.m21()*this.m33()-this.m00()*this.m12()*this.m21()*this.m33()-this.m01()*this.m10()*this.m22()*this.m33()+this.m00()*this.m11()*this.m22()*this.m33()}get determinant(){return this.getDeterminant()}toString(){return`${this.m00()} ${this.m01()} ${this.m02()} ${this.m03()}
${this.m10()} ${this.m11()} ${this.m12()} ${this.m13()}
${this.m20()} ${this.m21()} ${this.m22()} ${this.m23()}
${this.m30()} ${this.m31()} ${this.m32()} ${this.m33()}`}makeImmutable(){return this}copyToArray(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m30(),e[4]=this.m01(),e[5]=this.m11(),e[6]=this.m21(),e[7]=this.m31(),e[8]=this.m02(),e[9]=this.m12(),e[10]=this.m22(),e[11]=this.m32(),e[12]=this.m03(),e[13]=this.m13(),e[14]=this.m23(),e[15]=this.m33(),e}static identity(){return new Os(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,qi.IDENTITY)}static translation(e,t,i){return new Os(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1,qi.TRANSLATION_3D)}static translationFromVector(e){return Os.translation(e.x,e.y,e.z)}static scaling(e,t,i){return t=t===void 0?e:t,i=i===void 0?e:i,new Os(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1,qi.SCALING)}static rotationAxisAngle(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i;return new Os(e.x*e.x*r+i,e.x*e.y*r-e.z*s,e.x*e.z*r+e.y*s,0,e.y*e.x*r+e.z*s,e.y*e.y*r+i,e.y*e.z*r-e.x*s,0,e.z*e.x*r-e.y*s,e.z*e.y*r+e.x*s,e.z*e.z*r+i,0,0,0,0,1,qi.AFFINE)}static rotationX(e){const t=Math.cos(e),i=Math.sin(e);return new Os(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1,qi.AFFINE)}static rotationY(e){const t=Math.cos(e),i=Math.sin(e);return new Os(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1,qi.AFFINE)}static rotationZ(e){const t=Math.cos(e),i=Math.sin(e);return new Os(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1,qi.AFFINE)}static gluPerspective(e,t,i,s){const r=Math.cos(e)/Math.sin(e);return new Os(r/t,0,0,0,0,r,0,0,0,0,(s+i)/(i-s),2*s*i/(i-s),0,0,-1,0)}}class qi extends rr{}qi.OTHER=new qi;qi.IDENTITY=new qi;qi.TRANSLATION_3D=new qi;qi.SCALING=new qi;qi.AFFINE=new qi;qi.enumeration=new oa(qi);Os.Types=qi;Os.IDENTITY=new Os().makeImmutable();function is(n){return n.toFixed(20)}class Tt extends rr{}Tt.OTHER=new Tt;Tt.IDENTITY=new Tt;Tt.TRANSLATION_2D=new Tt;Tt.SCALING=new Tt;Tt.AFFINE=new Tt;Tt.enumeration=new oa(Tt);class mt{constructor(){this.entries=[1,0,0,0,1,0,0,0,1],this.type=Tt.IDENTITY}initialize(){return this}m00(){return this.entries[0]}m01(){return this.entries[3]}m02(){return this.entries[6]}m10(){return this.entries[1]}m11(){return this.entries[4]}m12(){return this.entries[7]}m20(){return this.entries[2]}m21(){return this.entries[5]}m22(){return this.entries[8]}isIdentity(){return this.type===Tt.IDENTITY||this.equals(mt.IDENTITY)}isFastIdentity(){return this.type===Tt.IDENTITY}isTranslation(){return this.type===Tt.TRANSLATION_2D||this.m00()===1&&this.m11()===1&&this.m22()===1&&this.m01()===0&&this.m10()===0&&this.m20()===0&&this.m21()===0}isAffine(){return this.type===Tt.AFFINE||this.m20()===0&&this.m21()===0&&this.m22()===1}isAligned(){return this.isAffine()&&this.m01()===0&&this.m10()===0}isAxisAligned(){return this.isAffine()&&(this.m01()===0&&this.m10()===0||this.m00()===0&&this.m11()===0)}isFinite(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())}getDeterminant(){return this.m00()*this.m11()*this.m22()+this.m01()*this.m12()*this.m20()+this.m02()*this.m10()*this.m21()-this.m02()*this.m11()*this.m20()-this.m01()*this.m10()*this.m22()-this.m00()*this.m12()*this.m21()}get determinant(){return this.getDeterminant()}getTranslation(){return new Ne(this.m02(),this.m12())}get translation(){return this.getTranslation()}getScaleVector(){return new Ne(Math.sqrt(this.m00()*this.m00()+this.m10()*this.m10()),Math.sqrt(this.m01()*this.m01()+this.m11()*this.m11()))}get scaleVector(){return this.getScaleVector()}getSignedScale(){return this.m00()*this.m11()-this.m10()*this.m01()}getRotation(){return Math.atan2(this.m10(),this.m00())}get rotation(){return this.getRotation()}toMatrix4(){return new Os(this.m00(),this.m01(),this.m02(),0,this.m10(),this.m11(),this.m12(),0,this.m20(),this.m21(),this.m22(),0,0,0,0,1)}toAffineMatrix4(){return new Os(this.m00(),this.m01(),0,this.m02(),this.m10(),this.m11(),0,this.m12(),0,0,1,0,0,0,0,1)}toString(){return`${this.m00()} ${this.m01()} ${this.m02()}
${this.m10()} ${this.m11()} ${this.m12()}
${this.m20()} ${this.m21()} ${this.m22()}`}toSVGMatrix(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix();return e.a=this.m00(),e.b=this.m10(),e.c=this.m01(),e.d=this.m11(),e.e=this.m02(),e.f=this.m12(),e}getCSSTransform(){return`matrix(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)})`}get cssTransform(){return this.getCSSTransform()}getSVGTransform(){switch(this.type){case Tt.IDENTITY:return"";case Tt.TRANSLATION_2D:return`translate(${is(this.entries[6])},${is(this.entries[7])})`;case Tt.SCALING:return`scale(${is(this.entries[0])}${this.entries[0]===this.entries[4]?"":`,${is(this.entries[4])}`})`;default:return`matrix(${is(this.entries[0])},${is(this.entries[1])},${is(this.entries[3])},${is(this.entries[4])},${is(this.entries[6])},${is(this.entries[7])})`}}get svgTransform(){return this.getSVGTransform()}getCSSTransformStyles(){const e=this.getCSSTransform();return{"-webkit-perspective":"1000","-webkit-backface-visibility":"hidden","-webkit-transform":`${e} translateZ(0)`,"-moz-transform":`${e} translateZ(0)`,"-ms-transform":e,"-o-transform":e,transform:e,"transform-origin":"top left","-ms-transform-origin":"top left"}}get cssTransformStyles(){return this.getCSSTransformStyles()}equals(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()}equalsEpsilon(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t}copy(){return ur(this.m00(),this.m01(),this.m02(),this.m10(),this.m11(),this.m12(),this.m20(),this.m21(),this.m22(),this.type)}plus(e){return ur(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}minus(e){return ur(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}transposed(){return ur(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===Tt.IDENTITY||this.type===Tt.SCALING?this.type:void 0)}negated(){return ur(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}inverted(){let e;switch(this.type){case Tt.IDENTITY:return this;case Tt.TRANSLATION_2D:return ur(1,0,-this.m02(),0,1,-this.m12(),0,0,1,Tt.TRANSLATION_2D);case Tt.SCALING:return ur(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),Tt.SCALING);case Tt.AFFINE:if(e=this.getDeterminant(),e!==0)return ur((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,Tt.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case Tt.OTHER:if(e=this.getDeterminant(),e!==0)return ur((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,Tt.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error(`Matrix3.inverted with unknown type: ${this.type}`)}}timesMatrix(e){if(this.type===Tt.IDENTITY||e.type===Tt.IDENTITY)return this.type===Tt.IDENTITY?e:this;if(this.type===e.type){if(this.type===Tt.TRANSLATION_2D)return ur(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,Tt.TRANSLATION_2D);if(this.type===Tt.SCALING)return ur(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,Tt.SCALING)}return this.type!==Tt.OTHER&&e.type!==Tt.OTHER?ur(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,Tt.AFFINE):ur(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}timesVector2(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02(),i=this.m10()*e.x+this.m11()*e.y+this.m12();return new Ne(t,i)}timesVector3(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,i=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,s=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z;return new ls(t,i,s)}timesTransposeVector2(e){const t=this.m00()*e.x+this.m10()*e.y,i=this.m01()*e.x+this.m11()*e.y;return new Ne(t,i)}timesRelativeVector2(e){const t=this.m00()*e.x+this.m01()*e.y,i=this.m10()*e.y+this.m11()*e.y;return new Ne(t,i)}rowMajor(e,t,i,s,r,o,d,g,y,S){return this.entries[0]=e,this.entries[1]=s,this.entries[2]=d,this.entries[3]=t,this.entries[4]=r,this.entries[5]=g,this.entries[6]=i,this.entries[7]=o,this.entries[8]=y,this.type=S===void 0?d===0&&g===0&&y===1?Tt.AFFINE:Tt.OTHER:S,this}set(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m10(),e.m11(),e.m12(),e.m20(),e.m21(),e.m22(),e.type)}setArray(e){return this.rowMajor(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}set00(e){return this.entries[0]=e,this}set01(e){return this.entries[3]=e,this}set02(e){return this.entries[6]=e,this}set10(e){return this.entries[1]=e,this}set11(e){return this.entries[4]=e,this}set12(e){return this.entries[7]=e,this}set20(e){return this.entries[2]=e,this}set21(e){return this.entries[5]=e,this}set22(e){return this.entries[8]=e,this}makeImmutable(){return this}columnMajor(e,t,i,s,r,o,d,g,y,S){return this.rowMajor(e,s,d,t,r,g,i,o,y,S)}add(e){return this.rowMajor(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}subtract(e){return this.rowMajor(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}transpose(){return this.rowMajor(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===Tt.IDENTITY||this.type===Tt.SCALING?this.type:void 0)}negate(){return this.rowMajor(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}invert(){let e;switch(this.type){case Tt.IDENTITY:return this;case Tt.TRANSLATION_2D:return this.rowMajor(1,0,-this.m02(),0,1,-this.m12(),0,0,1,Tt.TRANSLATION_2D);case Tt.SCALING:return this.rowMajor(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),Tt.SCALING);case Tt.AFFINE:if(e=this.getDeterminant(),e!==0)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,Tt.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case Tt.OTHER:if(e=this.getDeterminant(),e!==0)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,Tt.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error(`Matrix3.inverted with unknown type: ${this.type}`)}}multiplyMatrix(e){if(e.type===Tt.IDENTITY)return this;if(this.type===Tt.IDENTITY)return this.set(e);if(this.type===e.type){if(this.type===Tt.TRANSLATION_2D)return this.rowMajor(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,Tt.TRANSLATION_2D);if(this.type===Tt.SCALING)return this.rowMajor(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,Tt.SCALING)}return this.type!==Tt.OTHER&&e.type!==Tt.OTHER?this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,Tt.AFFINE):this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}prependTranslation(e,t){return this.set02(this.m02()+e),this.set12(this.m12()+t),this.type===Tt.IDENTITY||this.type===Tt.TRANSLATION_2D?this.type=Tt.TRANSLATION_2D:this.type===Tt.OTHER?this.type=Tt.OTHER:this.type=Tt.AFFINE,this}setToIdentity(){return this.rowMajor(1,0,0,0,1,0,0,0,1,Tt.IDENTITY)}setToTranslation(e,t){return this.rowMajor(1,0,e,0,1,t,0,0,1,Tt.TRANSLATION_2D)}setToScale(e,t){return t=t===void 0?e:t,this.rowMajor(e,0,0,0,t,0,0,0,1,Tt.SCALING)}setToAffine(e,t,i,s,r,o){return this.rowMajor(e,t,i,s,r,o,0,0,1,Tt.AFFINE)}setToRotationAxisAngle(e,t){let i=Math.cos(t),s=Math.sin(t);Math.abs(i)<1e-15&&(i=0),Math.abs(s)<1e-15&&(s=0);const r=1-i;return this.rowMajor(e.x*e.x*r+i,e.x*e.y*r-e.z*s,e.x*e.z*r+e.y*s,e.y*e.x*r+e.z*s,e.y*e.y*r+i,e.y*e.z*r-e.x*s,e.z*e.x*r-e.y*s,e.z*e.y*r+e.x*s,e.z*e.z*r+i,Tt.OTHER)}setToRotationX(e){let t=Math.cos(e),i=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(i)<1e-15&&(i=0),this.rowMajor(1,0,0,0,t,-i,0,i,t,Tt.OTHER)}setToRotationY(e){let t=Math.cos(e),i=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(i)<1e-15&&(i=0),this.rowMajor(t,0,i,0,1,0,-i,0,t,Tt.OTHER)}setToRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(i)<1e-15&&(i=0),this.rowMajor(t,-i,0,i,t,0,0,0,1,Tt.AFFINE)}setToTranslationRotation(e,t,i){let s=Math.cos(i),r=Math.sin(i);return Math.abs(s)<1e-15&&(s=0),Math.abs(r)<1e-15&&(r=0),this.rowMajor(s,-r,e,r,s,t,0,0,1,Tt.AFFINE)}setToTranslationRotationPoint(e,t){return this.setToTranslationRotation(e.x,e.y,t)}setToScaleTranslationRotation(e,t,i,s){let r=Math.cos(s),o=Math.sin(s);return Math.abs(r)<1e-15&&(r=0),Math.abs(o)<1e-15&&(o=0),r*=e,o*=e,this.rowMajor(r,-o,t,o,r,i,0,0,1,Tt.AFFINE)}setToScaleTranslationRotationPoint(e,t,i){return this.setToScaleTranslationRotation(e,t.x,t.y,i)}setToSVGMatrix(e){return this.rowMajor(e.a,e.c,e.e,e.b,e.d,e.f,0,0,1,Tt.AFFINE)}setRotationAToB(e,t){const i=e,s=t,r=1e-4;let o=i.cross(s);const d=i.dot(s);if((d<0?-d:d)>1-r){let y=new ls(i.x>0?i.x:-i.x,i.y>0?i.y:-i.y,i.z>0?i.z:-i.z);y.x<y.y?y.x<y.z?y=ls.X_UNIT:y=ls.Z_UNIT:y.y<y.z?y=ls.Y_UNIT:y=ls.Z_UNIT;const S=y.minus(i);o=y.minus(s);const T=2/S.dot(S),L=2/o.dot(o),x=T*L*S.dot(o);return this.rowMajor(-T*S.x*S.x-L*o.x*o.x+x*o.x*S.x+1,-T*S.x*S.y-L*o.x*o.y+x*o.x*S.y,-T*S.x*S.z-L*o.x*o.z+x*o.x*S.z,-T*S.y*S.x-L*o.y*o.x+x*o.y*S.x,-T*S.y*S.y-L*o.y*o.y+x*o.y*S.y+1,-T*S.y*S.z-L*o.y*o.z+x*o.y*S.z,-T*S.z*S.x-L*o.z*o.x+x*o.z*S.x,-T*S.z*S.y-L*o.z*o.y+x*o.z*S.y,-T*S.z*S.z-L*o.z*o.z+x*o.z*S.z+1)}else{const y=1/(1+d),S=y*o.x,T=y*o.z,L=S*o.y,x=S*o.z,A=T*o.y;return this.rowMajor(d+S*o.x,L-o.z,x+o.y,L+o.z,d+y*o.y*o.y,A-o.x,x-o.y,A+o.x,d+T*o.z)}}multiplyVector2(e){return e.setXY(this.m00()*e.x+this.m01()*e.y+this.m02(),this.m10()*e.x+this.m11()*e.y+this.m12())}multiplyVector3(e){return e.setXYZ(this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,this.m20()*e.x+this.m21()*e.y+this.m22()*e.z)}multiplyTransposeVector2(e){return e.setXY(this.m00()*e.x+this.m10()*e.y,this.m01()*e.x+this.m11()*e.y)}multiplyRelativeVector2(e){return e.setXY(this.m00()*e.x+this.m01()*e.y,this.m10()*e.y+this.m11()*e.y)}canvasSetTransform(e){e.setTransform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}canvasAppendTransform(e){this.type!==Tt.IDENTITY&&e.transform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}copyToArray(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m01(),e[4]=this.m11(),e[5]=this.m21(),e[6]=this.m02(),e[7]=this.m12(),e[8]=this.m22(),e}freeToPool(){mt.pool.freeToPool(this)}static identity(){return $r().setToIdentity()}static translation(e,t){return $r().setToTranslation(e,t)}static translationFromVector(e){return mt.translation(e.x,e.y)}static scaling(e,t){return $r().setToScale(e,t)}static scale(e,t){return mt.scaling(e,t)}static affine(e,t,i,s,r,o){return $r().setToAffine(e,t,i,s,r,o)}static rowMajor(e,t,i,s,r,o,d,g,y,S){return $r().rowMajor(e,t,i,s,r,o,d,g,y,S)}static rotationAxisAngle(e,t){return $r().setToRotationAxisAngle(e,t)}static rotationX(e){return $r().setToRotationX(e)}static rotationY(e){return $r().setToRotationY(e)}static rotationZ(e){return $r().setToRotationZ(e)}static translationRotation(e,t,i){return $r().setToTranslationRotation(e,t,i)}static rotation2(e){return $r().setToRotationZ(e)}static rotationAround(e,t,i){return mt.translation(t,i).timesMatrix(mt.rotation2(e)).timesMatrix(mt.translation(-t,-i))}static rotationAroundPoint(e,t){return mt.rotationAround(e,t.x,t.y)}static fromSVGMatrix(e){return $r().setToSVGMatrix(e)}static rotateAToB(e,t){return $r().setRotationAToB(e,t)}static translationTimesMatrix(e,t,i){let s;return i.type===Tt.IDENTITY||i.type===Tt.TRANSLATION_2D?ur(1,0,i.m02()+e,0,1,i.m12()+t,0,0,1,Tt.TRANSLATION_2D):(i.type===Tt.OTHER?s=Tt.OTHER:s=Tt.AFFINE,ur(i.m00(),i.m01(),i.m02()+e,i.m10(),i.m11(),i.m12()+t,i.m20(),i.m21(),i.m22(),s))}static toStateObject(e){return{entries:e.entries,type:e.type.name}}static fromStateObject(e){const t=mt.identity();return t.entries=e.entries,t.type=Tt.enumeration.getValue(e.type),t}}mt.pool=new Fs(mt,{initialize:mt.prototype.initialize,useDefaultConstruction:!0,maxSize:300});const $r=mt.pool.fetch.bind(mt.pool),ur=(n,e,t,i,s,r,o,d,g,y)=>$r().rowMajor(n,e,t,i,s,r,o,d,g,y);mt.IDENTITY=mt.identity().makeImmutable();mt.X_REFLECTION=ur(-1,0,0,0,1,0,0,0,1,Tt.AFFINE).makeImmutable();mt.Y_REFLECTION=ur(1,0,0,0,-1,0,0,0,1,Tt.AFFINE).makeImmutable();mt.Matrix3IO=new pi("Matrix3IO",{valueType:mt,documentation:"A 3x3 matrix often used for holding transform data.",toStateObject:n=>mt.toStateObject(n),fromStateObject:n=>mt.fromStateObject(n),stateSchema:{entries:wl(Fi),type:lv(Tt)}});class Ma{constructor(e,t){this.position=e,this.direction=t}shifted(e){return new Ma(this.pointAtDistance(e),this.direction)}pointAtDistance(e){return this.position.plus(this.direction.timesScalar(e))}toString(){return`${this.position.toString()} => ${this.direction.toString()}`}}const PA=new mt;class ra{constructor(e){this.matrix=mt.IDENTITY.copy(),this.inverse=mt.IDENTITY.copy(),this.matrixTransposed=mt.IDENTITY.copy(),this.inverseTransposed=mt.IDENTITY.copy(),this.inverseValid=!0,this.transposeValid=!0,this.inverseTransposeValid=!0,this.changeEmitter=new Hi,e&&this.setMatrix(e)}setMatrix(e){this.matrix.set(e),this.invalidate()}validateMatrix(e){}invalidate(){this.inverseValid=!1,this.transposeValid=!1,this.inverseTransposeValid=!1,this.changeEmitter.emit()}prepend(e){PA.set(this.matrix),this.matrix.set(e),this.matrix.multiplyMatrix(PA),this.invalidate()}prependTranslation(e,t){this.matrix.prependTranslation(e,t),this.invalidate()}append(e){this.matrix.multiplyMatrix(e),this.invalidate()}prependTransform(e){this.prepend(e.matrix)}appendTransform(e){this.append(e.matrix)}applyToCanvasContext(e){e.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m02(),this.matrix.m12())}copy(){const e=new ra(this.matrix);e.inverse=this.inverse,e.matrixTransposed=this.matrixTransposed,e.inverseTransposed=this.inverseTransposed,e.inverseValid=this.inverseValid,e.transposeValid=this.transposeValid,e.inverseTransposeValid=this.inverseTransposeValid}getMatrix(){return this.matrix}getInverse(){return this.inverseValid||(this.inverseValid=!0,this.inverse.set(this.matrix),this.inverse.invert()),this.inverse}getMatrixTransposed(){return this.transposeValid||(this.transposeValid=!0,this.matrixTransposed.set(this.matrix),this.matrixTransposed.transpose()),this.matrixTransposed}getInverseTransposed(){return this.inverseTransposeValid||(this.inverseTransposeValid=!0,this.inverseTransposed.set(this.getInverse()),this.inverseTransposed.transpose()),this.inverseTransposed}isIdentity(){return this.matrix.isFastIdentity()}isFinite(){return this.matrix.isFinite()}transformPosition2(e){return this.matrix.timesVector2(e)}transformDelta2(e){const t=this.getMatrix();return new Ne(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}transformNormal2(e){return this.getInverse().timesTransposeVector2(e).normalize()}transformX(e){const t=this.getMatrix();return t.m00()*e+t.m02()}transformY(e){const t=this.getMatrix();return t.m11()*e+t.m12()}transformDeltaX(e){return this.getMatrix().m00()*e}transformDeltaY(e){return this.getMatrix().m11()*e}transformBounds2(e){return e.transformed(this.matrix)}transformShape(e){return e.transformed(this.matrix)}transformRay2(e){return new Ma(this.transformPosition2(e.position),this.transformDelta2(e.direction).normalized())}inversePosition2(e){return this.getInverse().timesVector2(e)}inverseDelta2(e){const t=this.getInverse();return new Ne(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}inverseNormal2(e){return this.matrix.timesTransposeVector2(e).normalize()}inverseX(e){const t=this.getInverse();return t.m00()*e+t.m02()}inverseY(e){const t=this.getInverse();return t.m11()*e+t.m12()}inverseDeltaX(e){return this.getInverse().m00()*e}inverseDeltaY(e){return this.getInverse().m11()*e}inverseBounds2(e){return e.transformed(this.getInverse())}inverseShape(e){return e.transformed(this.getInverse())}inverseRay2(e){return new Ma(this.inversePosition2(e.position),this.inverseDelta2(e.direction).normalized())}}const Jx={isValidValue:n=>!isNaN(n.x)&&!isNaN(n.y),validationMessage:"Vector2 x/y should not be NaN"};class $x extends Li{constructor(e,t){const i=St()({valueType:Ne,validBounds:null,validators:[],phetioValueType:Ne.Vector2IO},t);i.validators.push(Jx),i.validBounds&&i.validators.push({validationMessage:"Vector2 is not within validBounds",isValidValue:s=>i.validBounds.containsPoint(s)}),super(e,i),this.validBounds=i.validBounds}}function eI(n,e,t){const i=new Ne((n.x+e.x)/2,(n.y+e.y)/2),s=new Ne((e.x+t.x)/2,(e.y+t.y)/2),r=new Ne(i.x+(e.y-n.y),i.y-(e.x-n.x)),o=new Ne(s.x+(t.y-e.y),s.y-(t.x-e.x));return C0(i,r,s,o)}function Pg(n){return n>=0?Math.pow(n,1/3):-Math.pow(-n,1/3)}function EA(n,e,t){const i=e.distanceSquared(t);if(i===0)return n.distanceSquared(e);const s=((n.x-e.x)*(t.x-e.x)+(n.y-e.y)*(t.y-e.y))/i;let r;return s<0?r=n.distanceSquared(e):s>1?r=n.distanceSquared(t):r=n.distanceSquared(new Ne(e.x+s*(t.x-e.x),e.y+s*(t.y-e.y))),r}function Cv(n,e,t){return Math.abs(n-e)<=t}function na(n,e,t){const i=t-e;let s=(n-e)%i;return s<0&&(s+=i),s+e}function Pv(n,e,t){return-na(-n,-t,-e)}function Ev(n){if(Math.floor(n)===n)return 0;{const e=n.toString();if(e.includes("e")){const t=e.split("e"),i=t[0],s=Number(t[1]),r=i.includes(".")?i.split(".")[1].length:0;return Math.max(r-s,0)}else return e.split(".")[1].length}}function tI(n,e){return parseFloat(S0(n,e))}function Jd(n,e){return tI(Xn(n/e)*e,Ev(e))}function wm(n,e){return n===0?e===0?null:[]:[-e/n]}function Kl(n,e,t){if(n===0||Math.abs(e/n)>1e7||Math.abs(t/n)>1e7)return wm(e,t);const s=e*e-4*n*t;if(s<0)return[];const r=Math.sqrt(s);return[(-e-r)/(2*n),(-e+r)/(2*n)]}function iI(n,e,t,i,s=1e-7){let r;if(n===0)r=Kl(e,t,i);else if(n===0||Math.abs(e/n)>1e7||Math.abs(t/n)>1e7||Math.abs(i/n)>1e7)r=Kl(e,t,i);else if(i===0||Math.abs(n/i)>1e7||Math.abs(e/i)>1e7||Math.abs(t/i)>1e7)r=[0].concat(Kl(n,e,t));else{e/=n,t/=n,i/=n;const d=(3*t-e*e)/9,g=(-(27*i)+e*(9*t-2*(e*e)))/54,y=d*d*d+g*g,S=e/3;if(y>s){const T=Math.sqrt(y);r=[Pg(g+T)+Pg(g-T)-S]}else if(y>-s){const T=Pg(g),L=-S-T;r=[-S+2*T,L,L]}else{let T=-d*d*d;T=Math.acos(g/Math.sqrt(T));const L=2*Math.sqrt(-d);r=[-S+L*Math.cos(T/3),-S+L*Math.cos((T+2*Math.PI)/3),-S+L*Math.cos((T+4*Math.PI)/3)]}}return r}function Dv(n){return 180*n/Math.PI}class P0{constructor(e,t){this._map=new Map,this._enumeration=e,this._values=e.enumeration.values,this._values.forEach(i=>{Kt(!this._map.has(i),"Enumeration key override problem"),this._map.set(i,t(i))})}get(e){return Kt(this._values.includes(e)),Kt(this._map.has(e)),this._map.get(e)}set(e,t){Kt(this._values.includes(e)),this._map.set(e,t)}map(e){return new P0(this._enumeration,t=>e(this.get(t),t))}forEach(e){this._values.forEach(t=>e(this.get(t),t))}values(){return this._values.map(e=>this.get(e))}}class hc extends P0{constructor(e,t){super(jt,i=>i===jt.HORIZONTAL?e:t)}get horizontal(){return this.get(jt.HORIZONTAL)}set horizontal(e){this.set(jt.HORIZONTAL,e)}get vertical(){return this.get(jt.VERTICAL)}set vertical(e){this.set(jt.VERTICAL,e)}with(e,t){return new hc(e===jt.HORIZONTAL?t:this.horizontal,e===jt.VERTICAL?t:this.vertical)}static create(e){return new hc(e(jt.HORIZONTAL),e(jt.VERTICAL))}map(e){return new hc(e(this.horizontal,jt.HORIZONTAL),e(this.vertical,jt.VERTICAL))}}function Wh(n,e,t,i,s){Kt(Array.isArray(n)&&he.uniq(n).length===n.length,"a is not an array of unique items"),Kt(Array.isArray(e)&&he.uniq(e).length===e.length,"b is not an array of unique items"),t=t||[],i=i||[],s=s||[],Kt(Array.isArray(t)&&t.length===0),Kt(Array.isArray(i)&&i.length===0),Kt(Array.isArray(s)&&s.length===0),Array.prototype.push.apply(t,n),Array.prototype.push.apply(i,e);e:for(let r=0;r<t.length;r++){const o=t[r];for(let d=0;d<i.length;d++){const g=i[d];if(o===g){if(s.push(o),t.splice(r,1),i.splice(d,1),d=0,r===t.length)break e;r-=1}}}return t}const E0=(n,e)=>{Cr()&&n&&e.forEach(t=>{Kt(Object.getOwnPropertyDescriptor(n,t)||he.some(ov(n.constructor).map(i=>Object.getOwnPropertyDescriptor(i.prototype,t))),`property not defined: ${t}`)})};class sI{constructor(){this.pendingLocks=[],this.loadComplete=!1,this.listeners=[]}reset(){this.loadComplete=!1}addListener(e){this.listeners.push(e)}proceedIfReady(){this.pendingLocks.length===0&&(Kt(!this.loadComplete,"cannot complete load twice"),this.loadComplete=!0,this.listeners.forEach(e=>e()))}createLock(e){return Kt(!this.loadComplete,"Cannot create more locks after load-step has completed"),this.pendingLocks.push(e),()=>{Kt(this.pendingLocks.includes(e),"invalid lock"),mn(this.pendingLocks,e),this.proceedIfReady()}}}const an=new sI;function bi(n){if(Kt(!n||Array.isArray(n),"cleanArray either takes an Array"),n){for(;n.length;)n.pop();return n}else return[]}function Bs(n,e){if(n[e]!==void 0)return e;if(e=e.charAt(0).toUpperCase()+e.slice(1),n[`moz${e}`]!==void 0)return`moz${e}`;if(n[`Moz${e}`]!==void 0)return`Moz${e}`;if(n[`webkit${e}`]!==void 0)return`webkit${e}`;if(n[`ms${e}`]!==void 0)return`ms${e}`;if(n[`o${e}`]!==void 0)return`o${e}`}function nI(n,e){if(n[`on${e}`]!==void 0)return e;if(n[`onmoz${e}`]!==void 0)return`moz${e}`;if(n[`onMoz${e}`]!==void 0)return`Moz${e}`;if(n[`onwebkit${e}`]!==void 0)return`webkit${e}`;if(n[`onms${e}`]!==void 0)return`ms${e}`;if(n[`ono${e}`]!==void 0)return`o${e}`}function Sm(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/ /g,"&nbsp;")}function uc(n,...e){return he.each(e,t=>{if(t)for(const i in t){const s=Object.getOwnPropertyDescriptor(t,i);s&&(typeof s.get=="function"||t[i]!==void 0)&&Object.defineProperty(n,i,s)}}),n}function mr(n){const e=new Map;return t=>{if(e.has(t))return e.get(t);{const i=n(t);return e.set(t,i),i}}}function Tv(n,e,t){Kt(n),Kt(Array.isArray(e)),t&&(Kt(Object.getPrototypeOf(t)===Object.prototype,"Extra prototype on options object is a code smell"),he.each(e,i=>{Kt(!t.hasOwnProperty(i)||t[i]!==void 0,`Undefined not allowed for key: ${i}`),t[i]!==void 0&&(n[i]=t[i])}))}const vs=navigator.userAgent;function Eg(n){return xv()===n}function DA(){return!!(self.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters["phet-app"]||(vs.match(/(iPod|iPhone|iPad)/)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>=2)&&vs.match(/AppleWebKit/))}function xv(){let n=-1,e=null;return navigator.appName==="Microsoft Internet Explorer"?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),e.exec(vs)!==null&&(n=parseFloat(RegExp.$1))):navigator.appName==="Netscape"&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),e.exec(vs)!==null&&(n=parseFloat(RegExp.$1))),n}const An={firefox:vs.toLowerCase().includes("firefox"),mobileSafari:DA(),safari5:!!(vs.match(/Version\/5\./)&&vs.match(/Safari\//)&&vs.match(/AppleWebKit/)),safari6:!!(vs.match(/Version\/6\./)&&vs.match(/Safari\//)&&vs.match(/AppleWebKit/)),safari7:!!(vs.match(/Version\/7\./)&&vs.match(/Safari\//)&&vs.match(/AppleWebKit/)),safari10:!!(vs.match(/Version\/10\./)&&vs.match(/Safari\//)&&vs.match(/AppleWebKit/)),safari11:!!(vs.match(/Version\/11\./)&&vs.match(/Safari\//)&&vs.match(/AppleWebKit/)),safari9:!!(vs.match(/Version\/9\./)&&vs.match(/Safari\//)&&vs.match(/AppleWebKit/)),safari:DA()||!!(vs.match(/Version\//)&&vs.match(/Safari\//)&&vs.match(/AppleWebKit/)),ie:xv()!==-1,ie9:Eg(9),ie10:Eg(10),ie11:Eg(11),android:vs.indexOf("Android")>0,edge:!!vs.match(/Edge\//),chromium:/chrom(e|ium)/.test(vs.toLowerCase())&&!vs.match(/Edge\//),chromeOS:vs.indexOf("CrOS")>0,mac:navigator.platform.includes("Mac")};function D0(n){return n.replace(/\u202a|\u202b|\u202c/g,"")}const Dg={};function TA(n,e,t){const i=Dg;let s=i,r=i;return n.hasOwnProperty(e)&&(s=n[e]),n.hasOwnProperty(t)&&(r=n[t]),s!==Dg?n[t]=s:delete n[t],r!==Dg?n[e]=r:delete n[e],n}const qc={DISABLED_OPACITY:.45},Iv="ArrowRight",kv="ArrowLeft",Lv="ArrowUp",Nv="ArrowDown",T0="ShiftRight",x0="ShiftLeft",I0="ControlLeft",k0="ControlRight",L0="AltLeft",N0="AltRight",B0="MetaLeft",R0="MetaRight",M0="OSLeft",O0="OSRight",rI="KeyW",aI="KeyA",oI="KeyS",lI="KeyD",Bv="Digit0",Rv="Digit1",Mv="Digit2",Ov="Digit3",qv="Digit4",Fv="Digit5",zv="Digit6",Hv="Digit7",Kv="Digit8",Uv="Digit9",Cm="Alt",Pm="Shift",Em="Control",Tg=[Iv,kv,Lv,Nv],xg=[rI,oI,aI,lI],hI=[Bv,Rv,Mv,Ov,qv,Fv,zv,Hv,Kv,Uv],Ig=[x0,T0],kg=[I0,k0],Lg=[L0,N0],xA=[B0,R0,M0,O0],uI=[Cm,Em,Pm],cI=[L0,N0,I0,k0,x0,T0,B0,R0,M0,O0],Dm=[],je={KEY_SPACE:"Space",KEY_ENTER:"Enter",KEY_TAB:"Tab",KEY_RIGHT_ARROW:Iv,KEY_LEFT_ARROW:kv,KEY_UP_ARROW:Lv,KEY_DOWN_ARROW:Nv,KEY_SHIFT_LEFT:x0,KEY_SHIFT_RIGHT:T0,KEY_ALT_LEFT:L0,KEY_ALT_RIGHT:N0,KEY_CONTROL_LEFT:I0,KEY_CONTROL_RIGHT:k0,KEY_META_LEFT:B0,KEY_META_RIGHT:R0,KEY_META_LEFT_FIREFOX:M0,KEY_META_RIGHT_FIREFOX:O0,KEY_SHIFT:Pm,KEY_ALT:Cm,KEY_CONTROL:Em,KEY_ESCAPE:"Escape",KEY_DELETE:"Delete",KEY_BACKSPACE:"Backspace",KEY_PAGE_UP:"PageUp",KEY_PAGE_DOWN:"PageDown",KEY_END:"End",KEY_HOME:"Home",KEY_0:Bv,KEY_1:Rv,KEY_2:Mv,KEY_3:Ov,KEY_4:qv,KEY_5:Fv,KEY_6:zv,KEY_7:Hv,KEY_8:Kv,KEY_9:Uv,KEY_NUMPAD_0:"Numpad0",KEY_NUMPAD_1:"Numpad1",KEY_NUMPAD_2:"Numpad2",KEY_NUMPAD_3:"Numpad3",KEY_NUMPAD_4:"Numpad4",KEY_NUMPAD_5:"Numpad5",KEY_NUMPAD_6:"Numpad6",KEY_NUMPAD_7:"Numpad7",KEY_NUMPAD_8:"Numpad8",KEY_NUMPAD_9:"Numpad9",KEY_NUMPAD_DECIMAL:"NumpadDecimal",KEY_NUMPAD_PLUS:"NumpadAdd",KEY_NUMPAD_MINUS:"NumpadSubtract",KEY_A:"KeyA",KEY_B:"KeyB",KEY_C:"KeyC",KEY_D:"KeyD",KEY_E:"KeyE",KEY_F:"KeyF",KEY_G:"KeyG",KEY_H:"KeyH",KEY_I:"KeyI",KEY_J:"KeyJ",KEY_K:"KeyK",KEY_L:"KeyL",KEY_M:"KeyM",KEY_N:"KeyN",KEY_O:"KeyO",KEY_P:"KeyP",KEY_Q:"KeyQ",KEY_R:"KeyR",KEY_S:"KeyS",KEY_T:"KeyT",KEY_U:"KeyU",KEY_V:"KeyV",KEY_W:"KeyW",KEY_X:"KeyX",KEY_Y:"KeyY",KEY_Z:"KeyZ",KEY_EQUALS:"Equal",KEY_PLUS:"Equal",KEY_MINUS:"Minus",KEY_PERIOD:"Period",ARROW_KEYS:Tg,WASD_KEYS:xg,MOVEMENT_KEYS:Tg.concat(xg),SHIFT_KEYS:Ig,CONTROL_KEYS:kg,ALT_KEYS:Lg,META_KEYS:xA,MODIFIER_KEY_CODES:cI,MODIFIER_KEY_TO_CODE_MAP:new Map([[Cm,Lg],[Pm,Ig],[Em,kg]]),isArrowKey(n){return je.isAnyKeyEvent(n,Tg)},isRangeKey(n){return je.isArrowKey(n)||je.isAnyKeyEvent(n,[je.KEY_PAGE_UP,je.KEY_PAGE_DOWN,je.KEY_HOME,je.KEY_END])},isNumberKey(n){return je.isAnyKeyEvent(n,hI)},getNumberFromCode(n){return je.isNumberKey(n)&&n instanceof KeyboardEvent?Number(n.code.replace("Digit","")):null},isShiftKey(n){return je.isAnyKeyEvent(n,Ig)},isAltKey(n){return je.isAnyKeyEvent(n,Lg)},isControlKey(n){return je.isAnyKeyEvent(n,kg)},isMetaKey(n){return je.isAnyKeyEvent(n,xA)},isWASDKey(n){return je.isAnyKeyEvent(n,xg)},isMovementKey(n){return je.isAnyKeyEvent(n,je.MOVEMENT_KEYS)},isAnyKeyEvent(n,e){const t=je.getEventCode(n);return t?e.includes(t):!1},isKeyEvent(n,e){return je.getEventCode(n)===e},getEventCode(n){let e=null;return n instanceof KeyboardEvent&&n.code&&(e=n.code,e.startsWith("Numpad")&&Dm.includes(n.key)&&(e=n.key)),e},isModifierKey(n){return uI.includes(n)},ALL_KEYS:Dm};for(const n in je)je.hasOwnProperty(n)&&typeof je[n]=="string"&&Dm.push(je[n]);const $d={q:[je.KEY_Q],w:[je.KEY_W],e:[je.KEY_E],r:[je.KEY_R],t:[je.KEY_T],y:[je.KEY_Y],u:[je.KEY_U],i:[je.KEY_I],o:[je.KEY_O],p:[je.KEY_P],a:[je.KEY_A],s:[je.KEY_S],d:[je.KEY_D],f:[je.KEY_F],g:[je.KEY_G],h:[je.KEY_H],j:[je.KEY_J],k:[je.KEY_K],l:[je.KEY_L],z:[je.KEY_Z],x:[je.KEY_X],c:[je.KEY_C],v:[je.KEY_V],b:[je.KEY_B],n:[je.KEY_N],m:[je.KEY_M],0:[je.KEY_0,je.KEY_NUMPAD_0],1:[je.KEY_1,je.KEY_NUMPAD_1],2:[je.KEY_2,je.KEY_NUMPAD_2],3:[je.KEY_3,je.KEY_NUMPAD_3],4:[je.KEY_4,je.KEY_NUMPAD_4],5:[je.KEY_5,je.KEY_NUMPAD_5],6:[je.KEY_6,je.KEY_NUMPAD_6],7:[je.KEY_7,je.KEY_NUMPAD_7],8:[je.KEY_8,je.KEY_NUMPAD_8],9:[je.KEY_9,je.KEY_NUMPAD_9],enter:[je.KEY_ENTER],tab:[je.KEY_TAB],equals:[je.KEY_EQUALS],plus:[je.KEY_PLUS,je.KEY_NUMPAD_PLUS],minus:[je.KEY_MINUS,je.KEY_NUMPAD_MINUS],period:[je.KEY_PERIOD,je.KEY_NUMPAD_DECIMAL],escape:[je.KEY_ESCAPE],delete:[je.KEY_DELETE],backspace:[je.KEY_BACKSPACE],pageUp:[je.KEY_PAGE_UP],pageDown:[je.KEY_PAGE_DOWN],end:[je.KEY_END],home:[je.KEY_HOME],space:[je.KEY_SPACE],arrowLeft:[je.KEY_LEFT_ARROW],arrowRight:[je.KEY_RIGHT_ARROW],arrowUp:[je.KEY_UP_ARROW],arrowDown:[je.KEY_DOWN_ARROW],ctrl:je.CONTROL_KEYS,alt:je.ALT_KEYS,shift:je.SHIFT_KEYS,meta:je.META_KEYS},Yv=["ctrl","alt","shift","meta"],lf=n=>{for(const e in $d)if($d.hasOwnProperty(e)&&$d[e].includes(n))return e;return null};class $o{constructor(e,t){this.display=e,this.trail=t}}$o.FocusIO=new pi("FocusIO",{valueType:$o,documentation:"A PhET-iO Type for the instance in the simulation which currently has keyboard focus. FocusIO is serialized into and Object with key `focusedPhetioElement` that is a list of PhET-iO Elements, from parent-most to child-most corresponding to the PhET-iO Element that was instrumented.",toStateObject:n=>{const e=[];return n.trail.nodes.forEach((t,i)=>{t.isPhetioInstrumented()&&e.push(t.tandem.phetioID)}),{focusedPhetioElement:e}},stateSchema:{focusedPhetioElement:wl(gs)}});class dI{constructor(e,t){t=jn({isStatic:!1},t),this.isStatic=t.isStatic,this.trail=e,this._listeners=[],this.trailVisibleProperty=new Ni(this.trail.isVisible()),this._nodeVisibilityListeners=[];for(let i=0;i<this.trail.length;i++){const s=()=>{this.trailVisibleProperty.set(e.isVisible())};this._nodeVisibilityListeners.push(s),e.nodes[i].visibleProperty.link(s)}this.boundTrailVisibilityChangedListener=this.onVisibilityChange.bind(this),this.trailVisibleProperty.link(this.boundTrailVisibilityChangedListener)}addListener(e){this._listeners.push(e)}removeListener(e){const t=he.indexOf(this._listeners,e);this._listeners.splice(t,1)}dispose(){for(let e=0;e<this.trail.length;e++){const t=this._nodeVisibilityListeners[e];this.trail.nodes[e].visibleProperty.hasListener(t)&&this.trail.nodes[e].visibleProperty.removeListener(t)}this.trailVisibleProperty.unlink(this.boundTrailVisibilityChangedListener)}onVisibilityChange(){this.notifyListeners()}notifyListeners(){let e=this._listeners;this._isStatic||(e=e.slice());const t=e.length;for(let i=0;i<t;i++)e[i]()}}class Ng{constructor(e){this.node=null,this.visibilityTracker=null,this.focusProperty=e,this.boundVisibilityListener=this.handleTrailVisibilityChange.bind(this),this.boundInstancesChangedListener=this.handleInstancesChange.bind(this),this.boundNodeDisposedListener=this.handleNodeDisposed.bind(this),this.boundFocusListener=this.handleFocusChange.bind(this),this.focusProperty.link(this.boundFocusListener)}handleFocusChange(e){this.removeDisplayedListeners(),e&&this.addDisplayedListeners(e)}handleTrailVisibilityChange(){this.visibilityTracker&&!this.visibilityTracker.trailVisibleProperty.value&&(this.focusProperty.value=null)}handleInstancesChange(e){e.node&&e.node.instances.length===0&&(this.focusProperty.value=null)}handleNodeDisposed(){this.focusProperty.value=null}addDisplayedListeners(e){this.visibilityTracker=new dI(e.trail),this.visibilityTracker.addListener(this.boundVisibilityListener),this.node=e.trail.lastNode(),this.node.changedInstanceEmitter.addListener(this.boundInstancesChangedListener),this.node.disposeEmitter.addListener(this.boundNodeDisposedListener)}removeDisplayedListeners(){this.visibilityTracker&&(this.visibilityTracker.removeListener(this.boundVisibilityListener),this.visibilityTracker.dispose(),this.visibilityTracker=null),this.node&&(this.node.changedInstanceEmitter.removeListener(this.boundInstancesChangedListener),this.node.disposeEmitter.removeListener(this.boundNodeDisposedListener),this.node=null)}dispose(){this.removeDisplayedListeners(),this.focusProperty.unlink(this.boundFocusListener),this.node=null,this.visibilityTracker=null}}let Bg,ef;const fI=()=>{Bg=document.createElement("style"),document.head.appendChild(Bg),ef=Bg.sheet};fI();const pI=n=>{try{ef.insertRule(n,0)}catch{try{ef.insertRule(n,ef.cssRules.length)}catch{console.log("Error adding CSS rule: "+n)}}},q0=n=>{pI(n)},Wv="a11y-pdom-element",Gv="a11y-pdom-root",gI="a11y-pdom-list-item";q0(`.${Wv}{position: fixed;top: 0px;left: 0px;transform-origin: left top 0px;border-width: 0px;border: 0px;padding: 1px 1px;margin: 0px;white-space: nowrap;outline: none;box-shadow:none;border-color:transparent;font-size: 1px;clip: rect(1px, 1px, 1px, 1px);}`);q0(`.${Gv}{position: absolute;pointer-events: none;z-index: 1;opacity: 0.0001;}`);q0(`.${gI}{list-style: none;`);const F0={SIBLING_CLASS_NAME:Wv,ROOT_CLASS_NAME:Gv},Xv="NEXT",mI="PREVIOUS",hf="INPUT",yI="LABEL",Tm="BUTTON",xm="TEXTAREA",Im="SELECT",IA="OPTGROUP",kA="DATALIST",LA="OUTPUT",NA="DIV",km="A",_I="AREA",Rg="P",AI="IFRAME",jv="B",Qv="STRONG",Zv="I",Jv="EM",$v="MARK",e1="SMALL",t1="DEL",i1="INS",s1="SUB",n1="SUP",bI="BR",vI=[km,_I,hf,Im,xm,Tm,AI],BA=[jv,Qv,Zv,Jv,$v,e1,t1,i1,s1,n1,bI],VI=[hf],wI=["focusin","focusout","input","change","click","keydown","keyup"],SI=["input","change","click","keydown","keyup"],CI=["touchstart","touchend","touchmove","touchcancel","mousedown","mouseup","mousemove","mouseover","mouseout","pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"],PI="aria-labelledby",EI="aria-describedby",DI="aria-activedescendant",RA="data-focusable",TI="data-unique-id",xI=[PI,EI,DI];function Lm(n){const e=n.getElementsByTagName("*"),t=[];for(let i=0;i<e.length;i++)e[i].nodeType===Node.ELEMENT_NODE&&(t[i]=e[i]);return t}function r1(n){return n.hidden?!0:n===document.body?!1:r1(n.parentElement)}function MA(n,e){const t=e||document.body,i=Lm(t),s=document.activeElement,r=i.indexOf(s),o=n===Xv?1:-1;let d=r+o;for(;d<i.length&&d>=0;){const g=i[d];if(d+=o,Vi.isElementFocusable(g))return g}return s}function II(n){return n.replace(/^\s+/,"")}function OA(n){return!he.includes(VI,n.toUpperCase())}const Vi={unwrapStringProperty(n){return n===null?null:typeof n=="string"?n:n.value},getNextFocusable(n){return MA(Xv,n)},getPreviousFocusable(n){return MA(mI,n)},getFirstFocusable(n){const e=n||document.body,t=Lm(e);let i=document.body,s=0;for(;s<t.length;){const r=t[s];if(s++,Vi.isElementFocusable(r)){i=r;break}}return i},getRandomFocusable(n){const e=Lm(document.body),t=[];for(let i=0;i<e.length;i++)Vi.isElementFocusable(e[i])&&t.push(e[i]);return t[n.nextInt(t.length)]},unwrapProperty(n){return ii(n)?n.value:n},containsFormattingTags(n){if(n===null)return!1;let e=0;const t=[],i=[];for(;e<n.length;){const o=n.indexOf("<",e),d=n.indexOf(">",e);o>-1&&(t.push(o),e=o+1),d>-1?(i.push(d),e=d+1):e++}if(t.length!==i.length||t.length===0)return!1;let s=!0;const r=n.toUpperCase();for(let o=0;o<t.length;o++){let d=r.substring(t[o]+1,i[o]);d=d.replace("/","");const g=II(d);d.length-g.length>0||he.includes(BA,d)||(s=!1)}return s},setTextContent(n,e){if(e===null)n.innerHTML="";else{const t=e.replaceAll("<br>","<br/>"),i=D0(t);p0(i,fs.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR),OA(n.tagName)&&(Vi.containsFormattingTags(i)?n.innerHTML=i:n.textContent=i)}},tagIsDefaultFocusable(n){return he.includes(vI,n.toUpperCase())},isElementFocusable(n){return!document.body.contains(n)||r1(n)||he.includes(BA,n.tagName)?!1:n.getAttribute(RA)==="true"},tagNameSupportsContent(n){return OA(n)},removeElements(n,e){for(let t=0;t<e.length;t++){const i=e[t];n.removeChild(i)}},insertElements(n,e,t){for(let i=0;i<e.length;i++){const s=e[i];n.insertBefore(s,t||null)}},createElement(n,e,t){t=jn({namespace:null,id:null},t);const i=t.namespace?document.createElementNS(t.namespace,n):document.createElement(n);return t.id&&(i.id=t.id),Vi.overrideFocusWithTabIndex(i,e),i.classList.add(F0.SIBLING_CLASS_NAME),i},overrideFocusWithTabIndex(n,e){Vi.tagIsDefaultFocusable(n.tagName)!==e?n.tabIndex=e?0:-1:n.removeAttribute("tabindex"),n.setAttribute(RA,e)},TAGS:{INPUT:hf,LABEL:yI,BUTTON:Tm,TEXTAREA:xm,SELECT:Im,OPTGROUP:IA,DATALIST:kA,OUTPUT:LA,DIV:NA,A:km,P:Rg,B:jv,STRONG:Qv,I:Zv,EM:Jv,MARK:$v,SMALL:e1,DEL:t1,INS:i1,SUB:s1,SUP:n1},FORM_ELEMENTS:[hf,Tm,xm,Im,IA,kA,LA,km],DEFAULT_CONTAINER_TAG_NAME:NA,DEFAULT_DESCRIPTION_TAG_NAME:Rg,DEFAULT_LABEL_TAG_NAME:Rg,ASSOCIATION_ATTRIBUTES:xI,INPUT_TYPES_THAT_SUPPORT_CHECKED:["RADIO","CHECKBOX"],DOM_EVENTS:wI,USER_GESTURE_EVENTS:SI,BLOCKED_DOM_EVENTS:CI,DATA_PDOM_UNIQUE_ID:TI,PDOM_UNIQUE_ID_SEPARATOR:"-",DATA_EXCLUDE_FROM_INPUT:"data-exclude-from-input"},Mg=new zr,mc=n=>{const e=n.map(i=>i.typeName),t=e.join(",");if(!Mg.has(t)){const i=s=>{for(let r=0;r<n.length;r++){const o=n[r];if(fs.isValueValid(s,o.validator))return!0}return!1};Mg.set(t,new pi(`OrIO<${e.join(", ")}>`,{documentation:"A PhET-iO Type adding support for a composite type that can be any of its parameters.",parameterTypes:n,isValidValue:i,toStateObject:s=>{for(let r=0;r<n.length;r++){const o=n[r];if(fs.isValueValid(s,o.validator))return{index:r,state:o.toStateObject(s)}}throw new Error("somehow the instance was not valid, we should not get here. Why was isValidValue not used before this step?")},fromStateObject:s=>n[s.index].fromStateObject(s.state),stateSchema:aa.asValue(`${e.join("|")}`,{isValidValue:s=>typeof s.index=="number"?n[s.index].isStateObjectValid(s.state):!1})}))}return Mg.get(t)},Nd="‪",Bd="‫",Dh="‬",bo={format:function(n){const e=arguments;return n.replace(/{(\d)}/g,(t,i)=>e[+i+1])},fillIn:function(n,e){n=n&&n.get?n.get():n;let t=n;const i=n.match(/\{\{[^{}]+\}\}/g)||[];for(let s=0;s<i.length;s++){const r=i[s],o=r.replace("{{","").replace("}}","");if(e[o]!==void 0){const d=e[o]&&e[o].get?e[o].get():e[o];t=t.replace(r,d)}}return t},isEmbeddingMark:function(n){return n===Nd||n===Bd||n===Dh},embeddedSlice:function(n,e,t){const i=[];let s;for(t===void 0&&(t=n.length),t<0&&(t+=n.length);e<n.length&&bo.isEmbeddingMark(n.charAt(e));)e++;for(;t>=1&&bo.isEmbeddingMark(n.charAt(t-1));)t--;if(e>=t||e>=n.length)return"";for(let L=0;L<e;L++)s=n.charAt(L),s===Nd||s===Bd?i.push(s):s===Dh&&i.pop();let r=i.length,o=i.slice();const d=n.slice(e,t);for(let L=0;L<d.length;L++)s=d.charAt(L),s===Nd||s===Bd?i.push(s):s===Dh&&(i.pop(),r=Math.min(i.length,r));let g=i;const y=Math.max(0,r-1);o=o.slice(y),g=g.slice(y);const S=o.join(""),T=g.join("").replace(/./g,Dh);return S+d+T},embeddedSplit:function(n,e,t){if(e===void 0)return[n];let i=[],s,r=n;function o(){let g,y;if(e instanceof self.RegExp){const S=r.match(e);S?(g=S.index,y=S[0].length):g=-1}else g=r.indexOf(e),y=e.length;return{index:g,length:y}}let d=0;for(;(s=o()).index>=0;){i.push(bo.embeddedSlice(n,d,d+s.index));const g=s.index+s.length;r=r.slice(g),d+=g}return i.push(bo.embeddedSlice(n,d)),t!==void 0&&(i=he.first(i,t)),i},embeddedDebugString:function(n){return n.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")},wrapLTR:function(n){return Nd+n+Dh},wrapRTL:function(n){return Bd+n+Dh},wrapDirection:function(n,e){return e==="ltr"?bo.wrapLTR(n):bo.wrapRTL(n)},localeToLocalizedName:function(n){return bo.wrapDirection(phet.chipper.localeData[n].localizedName,phet.chipper.localeData[n].direction)},capitalize(n){const e=n.search(/[A-Za-z0-9]/);if(e===-1)return n.slice(0);const t=e>0?n.slice(0,e):"",i=n.charAt(e).toUpperCase(),s=e+1<n.length?n.slice(e+1):"";return t+i+s}},kI="NAME",LI="OBJECT",NI="CONTEXT",BI="HINT",RI={nameObjectContextHint:"{{NAME}}, {{OBJECT}}, {{CONTEXT}} {{HINT}}",nameObjectContext:"{{NAME}}, {{OBJECT}}, {{CONTEXT}}",nameObjectHint:"{{NAME}}, {{OBJECT}}, {{HINT}}",nameContextHint:"{{NAME}}, {{CONTEXT}} {{HINT}}",nameObject:"{{NAME}}, {{OBJECT}}",nameContext:"{{NAME}}, {{CONTEXT}}",nameHint:"{{NAME}}, {{HINT}}",name:"{{NAME}}",objectContextHint:"{{OBJECT}}, {{CONTEXT}} {{HINT}}",objectContext:"{{OBJECT}}, {{CONTEXT}}",objectHint:"{{OBJECT}}, {{HINT}}",contextHint:"{{CONTEXT}} {{HINT}}",object:"{{OBJECT}}",context:"{{CONTEXT}}",hint:"{{HINT}}"};class yc{constructor(e){const t=Vl()({},RI,e);this.nameObjectContextHint=t.nameObjectContextHint,this.nameObjectContext=t.nameObjectContext,this.nameObjectHint=t.nameObjectHint,this.nameContextHint=t.nameContextHint,this.nameObject=t.nameObject,this.nameContext=t.nameContext,this.nameHint=t.nameHint,this.name=t.name,this.objectContextHint=t.objectContextHint,this.objectContext=t.objectContext,this.objectHint=t.objectHint,this.contextHint=t.contextHint,this.object=t.object,this.context=t.context,this.hint=t.hint}getResponsePattern(e){return this[e]}static createPatternKey(e,t,i,s){let r="";return e&&(r=r.concat(kI.concat("_"))),t&&(r=r.concat(LI.concat("_"))),i&&(r=r.concat(NI.concat("_"))),s&&(r=r.concat(BI.concat("_"))),he.camelCase(r)}}yc.DEFAULT_RESPONSE_PATTERNS=new yc;const a1={nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null,ignoreProperties:!1,responsePatternCollection:yc.DEFAULT_RESPONSE_PATTERNS};class Vo{constructor(e){const t=Vl()({},a1,e);this._nameResponse=t.nameResponse,this._objectResponse=t.objectResponse,this._contextResponse=t.contextResponse,this._hintResponse=t.hintResponse,this.ignoreProperties=t.ignoreProperties,this.responsePatternCollection=t.responsePatternCollection}getNameResponse(){return Vo.getResponseText(this._nameResponse)}get nameResponse(){return this.getNameResponse()}set nameResponse(e){this.setNameResponse(e)}setNameResponse(e){this._nameResponse=e}getObjectResponse(){return Vo.getResponseText(this._objectResponse)}get objectResponse(){return this.getObjectResponse()}set objectResponse(e){this.setObjectResponse(e)}setObjectResponse(e){this._objectResponse=e}getContextResponse(){return Vo.getResponseText(this._contextResponse)}get contextResponse(){return this.getContextResponse()}set contextResponse(e){this.setContextResponse(e)}setContextResponse(e){this._contextResponse=e}getHintResponse(){return Vo.getResponseText(this._hintResponse)}get hintResponse(){return this.getHintResponse()}set hintResponse(e){this.setHintResponse(e)}setHintResponse(e){this._hintResponse=e}static getResponseText(e){return ii(e)?e.value:typeof e=="function"?e():e}copy(){return new Vo(this.serialize())}serialize(){return{nameResponse:this.nameResponse,objectResponse:this.objectResponse,contextResponse:this.contextResponse,hintResponse:this.hintResponse,ignoreProperties:this.ignoreProperties,responsePatternCollection:this.responsePatternCollection}}}Vo.DEFAULT_OPTIONS=a1;class MI extends As{constructor(e){super(),this.nameResponsesEnabledProperty=new Ri(!0),this.objectResponsesEnabledProperty=new Ri(!1),this.contextResponsesEnabledProperty=new Ri(!1),this.hintResponsesEnabledProperty=new Ri(!1)}reset(){this.nameResponsesEnabledProperty.reset(),this.objectResponsesEnabledProperty.reset(),this.contextResponsesEnabledProperty.reset(),this.hintResponsesEnabledProperty.reset()}collectResponses(e){const t=Vl()({},Vo.DEFAULT_OPTIONS,e),i=!!(t.nameResponse&&(this.nameResponsesEnabledProperty.get()||t.ignoreProperties)),s=!!(t.objectResponse&&(this.objectResponsesEnabledProperty.get()||t.ignoreProperties)),r=!!(t.contextResponse&&(this.contextResponsesEnabledProperty.get()||t.ignoreProperties)),o=!!(t.hintResponse&&(this.hintResponsesEnabledProperty.get()||t.ignoreProperties)),d=yc.createPatternKey(i,s,r,o);let g="";if(d){const y=t.responsePatternCollection.getResponsePattern(d);g=bo.fillIn(y,{NAME:t.nameResponse,OBJECT:t.objectResponse,CONTEXT:t.contextResponse,HINT:t.hintResponse})}return g}}const o1=new MI,l1=1;let OI=1;class Sn extends hh{constructor(e){const t=St()({alert:null,predicate:function(){return!0},canAnnounceProperties:[],descriptionCanAnnounceProperties:[],voicingCanAnnounceProperties:[],alertStableDelay:200,alertMaximumDelay:Number.MAX_VALUE,announcerOptions:{},priority:l1},e);super(t),this.id=OI++,this._alert=t.alert,this.predicate=t.predicate,this.canAnnounceProperty=new Og({dependentProperties:t.canAnnounceProperties}),this.descriptionCanAnnounceProperty=new Og({dependentProperties:t.descriptionCanAnnounceProperties}),this.voicingCanAnnounceProperty=new Og({dependentProperties:t.voicingCanAnnounceProperties}),this.alertStableDelay=t.alertStableDelay,this.alertMaximumDelay=t.alertMaximumDelay,this.announcerOptions=t.announcerOptions,this.priorityProperty=new Er(t.priority),this.previousAlertText=null}static getAlertStringFromResponsePacket(e,t){const i=e.serialize();return t||(i.ignoreProperties=!0),o1.collectResponses(i)}getAlertText(e=!1){const t=Sn.alertableToText(this._alert,e);return this.previousAlertText=t,t}getAlert(){return this._alert}get alert(){return this.getAlert()}set alert(e){this.setAlert(e)}setAlert(e){this._alert=e}setAlertStableDelay(e){this.alertStableDelay=e}toString(){return`Utterance_${this.id}#${this.getAlertText()}`}toStateObject(){return{alert:Ai(mc([gs,Fi])).toStateObject(this.getAlertText())}}reset(){this.previousAlertText=null}setCanAnnounceProperties(e){this.canAnnounceProperty.setDependentProperties(e)}set canAnnounceProperties(e){this.setCanAnnounceProperties(e)}get canAnnounceProperties(){return this.getCanAnnounceProperties()}getCanAnnounceProperties(){return this.canAnnounceProperty.getDependentProperties()}setDescriptionCanAnnounceProperties(e){this.descriptionCanAnnounceProperty.setDependentProperties(e)}set descriptionCanAnnounceProperties(e){this.setDescriptionCanAnnounceProperties(e)}get descriptionCanAnnounceProperties(){return this.getDescriptionCanAnnounceProperties()}getDescriptionCanAnnounceProperties(){return this.descriptionCanAnnounceProperty.getDependentProperties()}setVoicingCanAnnounceProperties(e){this.voicingCanAnnounceProperty.setDependentProperties(e)}set voicingCanAnnounceProperties(e){this.setVoicingCanAnnounceProperties(e)}get voicingCanAnnounceProperties(){return this.getVoicingCanAnnounceProperties()}getVoicingCanAnnounceProperties(){return this.voicingCanAnnounceProperty.getDependentProperties()}dispose(){this.canAnnounceProperty.dispose(),this.descriptionCanAnnounceProperty.dispose(),this.voicingCanAnnounceProperty.dispose(),this.priorityProperty.dispose(),super.dispose()}static alertableToText(e,t=!1){let i;if(typeof e=="function")i=e();else if(e instanceof Vo)i=Sn.getAlertStringFromResponsePacket(e,t);else{if(e instanceof Sn)return e.getAlertText(t);ii(e)?i=e.value:i=e}return i}}Sn.TOP_PRIORITY=10;Sn.HIGH_PRIORITY=5;Sn.MEDIUM_PRIORITY=2;Sn.DEFAULT_PRIORITY=l1;Sn.LOW_PRIORITY=0;Sn.UtteranceIO=new pi("UtteranceIO",{valueType:Sn,documentation:"Announces text to a specific browser technology (like aria-live or web speech)",toStateObject:n=>n.toStateObject(),stateSchema:{alert:Ai(mc([gs,Fi]))}});class Og extends _v{constructor(e){const t=St()({dependentProperties:[]},e),i=new Li(new Ni(!1));super(i),this._dependentProperties=[],this.implementationProperty=i,this.setDependentProperties(t.dependentProperties)}setDependentProperties(e){const t=this.implementationProperty.value,i=e.length===0?[new Ni(!0)]:e;this.implementationProperty.value=ps.and(i),t.dispose(),this._dependentProperties=e}set dependentProperties(e){this.setDependentProperties(e)}get dependentProperties(){return this.getDependentProperties()}getDependentProperties(){return this._dependentProperties.slice(0)}dispose(){this.implementationProperty.dispose(),this._dependentProperties=[],super.dispose()}}class qA extends Sn{constructor(e,t){super(t),this.readingBlockFocus=e}}class Zh extends As{constructor(e){var i;const t=St()({respectResponseCollectorProperties:!0,phetioType:Zh.AnnouncerIO,phetioState:!1},e);super(t),this.readyToAnnounce=!0,this.hasSpoken=!1,this.respectResponseCollectorProperties=t.respectResponseCollectorProperties,this.announcementCompleteEmitter=new _n({parameters:[{name:"utterance",phetioType:Sn.UtteranceIO},{name:"text",phetioType:Ai(mc([gs,Fi]))}],tandem:(i=t.tandem)==null?void 0:i.createTandem("announcementCompleteEmitter"),phetioReadOnly:!0,phetioDocumentation:"The announcement that has just completed. The Utterance text could potentially differ from the exact text that was announced, so both are emitted. Use `text` for an exact match of what was announced."})}shouldUtteranceCancelOther(e,t){return t.priorityProperty.value<e.priorityProperty.value}onUtterancePriorityChange(e){}}Zh.AnnouncerIO=new pi("AnnouncerIO",{valueType:Zh,documentation:"Announces text to a specific browser technology (like aria-live or web speech)"});const qI={initialize(){if(self.speechSynthesis||self.SpeechSynthesis||self.SpeechSynthesisUtterance)throw new Error("SpeechSynthesis is supported here, the polyfill should not overwrite it");self.SpeechSynthesis=self.parent.SpeechSynthesis,self.speechSynthesis=new self.parent.SpeechSynthesis,self.SpeechSynthesisUtterance=self.parent.SpeechSynthesisUtterance}};self.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters.speechSynthesisFromParent&&qI.initialize();const FA=5e3,FI=5e3,zI=1e4,zA=125,HI=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Good News","Jester","Organ","Superstar","Trinoids","Whisper","Wobble","Zarvox","Flo","Grandma","Grandpa","Junior"],HA={cmn:"zh_CN",yue:"zh_HK","yue-HK":"zh_HK",yue_HK:"zh_HK","fil-PH":"tl",fil_PH:"tl"},KA={cancelSelf:!0,cancelOther:!0,voice:null};class KI extends Zh{constructor(e){var i,s,r,o;const t=St()({respectResponseCollectorProperties:!1,debug:!1},e);super(t),this.debug=t.debug,this.voiceProperty=new Li(null,{tandem:(i=t.tandem)==null?void 0:i.createTandem("voiceProperty"),phetioValueType:Ai(WI),phetioState:!1,phetioReadOnly:!0,phetioDocumentation:"the voice that is currently voicing responses"}),this.voiceRateProperty=new Er(1,{range:new ss(.75,2),tandem:(s=t.tandem)==null?void 0:s.createTandem("voiceRateProperty"),phetioState:!1,phetioDocumentation:"changes the rate of the voicing-feature voice"}),this.voicePitchProperty=new Er(1,{range:new ss(.5,2),tandem:(r=t.tandem)==null?void 0:r.createTandem("voicePitchProperty"),phetioState:!1,phetioDocumentation:"changes the pitch of the voicing-feature voice"}),this.voiceVolumeProperty=new Er(1,{range:new ss(0,1)}),this.hasSpoken=!1,this.timeSinceWakingEngine=0,this.timeSincePauseResume=0,this.timeSincePendingUtterance=0,this.timeSinceUtteranceEnd=zA,this.startSpeakingEmitter=new _n({parameters:[{valueType:"string"},{valueType:Sn}]}),this.endSpeakingEmitter=new _n({parameters:[{valueType:"string"},{valueType:Sn}]}),this.enabledComponentImplementation=new Jf({enabled:!1,tandem:t.tandem,enabledPropertyOptions:{phetioDocumentation:"toggles this controller of SpeechSynthesis on and off",phetioState:!1,phetioFeatured:!1}}),this.enabledProperty=this.enabledComponentImplementation.enabledProperty,this.mainWindowVoicingEnabledProperty=new Ri(!0,{tandem:(o=t.tandem)==null?void 0:o.createTandem("mainWindowVoicingEnabledProperty"),phetioState:!1,phetioDocumentation:"toggles the voicing feature on and off for the simulation screen (not the voicing preferences and toolbar controls)"}),this.voicingFullyEnabledProperty=ps.and([this.enabledProperty,this.mainWindowVoicingEnabledProperty]),this._speechAllowedAndFullyEnabledProperty=new Ri(!1),this.speechAllowedAndFullyEnabledProperty=this._speechAllowedAndFullyEnabledProperty,this.synth=null,this.voicesProperty=new Li([]),this.speakingSpeechSynthesisUtteranceWrapper=null,this.isInitializedProperty=new Ri(!1),this.canSpeakProperty=null,this.boundHandleCanSpeakChange=this.handleCanSpeakChange.bind(this),this.boundHandleCanAnnounceChange=this.handleCanAnnounceChange.bind(this),this.debug&&(this.announcementCompleteEmitter.addListener((d,g)=>{console.log("announcement complete",g)}),this.startSpeakingEmitter.addListener(d=>{this.debug&&console.log("startSpeakingListener",d)}),this.endSpeakingEmitter.addListener(d=>{this.debug&&console.log("endSpeakingListener",d)}))}get initialized(){return this.isInitializedProperty.value}initialize(e,t){const i=St()({speechAllowedProperty:new Ri(!0)},t);this.synth=self.speechSynthesis,this.canSpeakProperty=ps.and([i.speechAllowedProperty,this.enabledProperty]),this.canSpeakProperty.link(this.boundHandleCanSpeakChange),sr.multilink([i.speechAllowedProperty,this.voicingFullyEnabledProperty],(o,d)=>{this._speechAllowedAndFullyEnabledProperty.value=o&&d});const s=this.getSynth();s.addEventListener&&s.addEventListener("voiceschanged",()=>{this.populateVoices()}),this.populateVoices();const r=()=>{this.timeSinceWakingEngine=FA,e.removeListener(r)};e.addListener(r),Qn.addListener(this.step.bind(this)),this.isInitializedProperty.value=!0}step(e){e*=1e3;const t=this.getSynth();this.initialized&&t&&(this.hasSpoken||(this.hasSpoken=t.speaking),this.timeSinceUtteranceEnd=t.speaking?0:this.timeSinceUtteranceEnd+e,this.timeSincePendingUtterance=this.speakingSpeechSynthesisUtteranceWrapper&&!this.speakingSpeechSynthesisUtteranceWrapper.started?this.timeSincePendingUtterance+e:0,this.timeSincePendingUtterance>FI&&(this.handleSpeechSynthesisEnd(this.speakingSpeechSynthesisUtteranceWrapper.announceText,this.speakingSpeechSynthesisUtteranceWrapper),this.speakingSpeechSynthesisUtteranceWrapper=null,this.cancelSynth()),this.timeSinceUtteranceEnd>zA&&!this.speakingSpeechSynthesisUtteranceWrapper&&(this.readyToAnnounce=!0),An.chromium&&!An.android&&this.voiceProperty.value&&!this.voiceProperty.value.localService&&(this.timeSincePauseResume=t.speaking?this.timeSincePauseResume+e:0,this.timeSincePauseResume>zI&&(this.timeSincePauseResume=0,t.pause(),t.resume())),An.chromeOS&&(this.timeSinceWakingEngine+=e,!t.speaking&&this.timeSinceWakingEngine>FA&&(this.timeSinceWakingEngine=0,t.speak(new SpeechSynthesisUtterance(" ")))))}handleCanSpeakChange(e){e||this.cancel()}populateVoices(){const e=this.getSynth();e&&(this.voicesProperty.value=he.uniqBy(e.getVoices(),t=>t.name))}getPrioritizedVoices(){const e=this.voicesProperty.value.slice(),t=he.filter(e,s=>!he.some(HI,r=>s.name.includes(r))),i=s=>s.name.includes("Google")?-1:s.name.includes("Fred")?t.length:t.indexOf(s);return t.sort((s,r)=>i(s)-i(r))}getEnglishPrioritizedVoices(){return he.filter(this.getPrioritizedVoices(),e=>e.lang==="en-US"||e.lang==="en_US")}getPrioritizedVoicesForLocale(e){const t=e,i=e.replace("_","-");return he.filter(this.getPrioritizedVoices(),s=>{const r=HA.hasOwnProperty(s.lang)?HA[s.lang]:s.lang;let o=!1;return(r.includes("_")||r.includes("-"))&&(o=t===r.slice(0,2)),o||t===r||i===r})}announce(e,t){this.initialized&&this.canSpeakProperty&&this.canSpeakProperty.value?this.requestSpeech(e,t):this.handleAnnouncementFailure(t,e)}handleAnnouncementFailure(e,t){this.debug&&console.log("announcement failure",t),this.announcementCompleteEmitter.emit(e,t)}speakIgnoringEnabled(e){this.initialized&&(this.cancel(),this.requestSpeech(e.getAlertText(this.respectResponseCollectorProperties),e))}requestSpeech(e,t){if(this.debug&&console.log("requestSpeech",e),!e){this.handleAnnouncementFailure(t,e);return}const i=Vl()({},KA,t.announcerOptions),s=YI(D0(e+""));p0(s,fs.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR);const r=new SpeechSynthesisUtterance(s);r.voice=i.voice||this.voiceProperty.value,r.pitch=this.voicePitchProperty.value,r.rate=this.voiceRateProperty.value,r.volume=this.voiceVolumeProperty.value;const o=()=>{this.startSpeakingEmitter.emit(s,t),this.speakingSpeechSynthesisUtteranceWrapper.started=!0,r.removeEventListener("start",o)},d=()=>{this.handleSpeechSynthesisEnd(s,g)},g=new UI(t,e,r,!1,d,o);this.speakingSpeechSynthesisUtteranceWrapper=g,r.addEventListener("start",o),r.addEventListener("end",d),r.addEventListener("error",d),this.readyToAnnounce=!1,this.timeSinceUtteranceEnd=0,t.canAnnounceProperty.link(this.boundHandleCanAnnounceChange),t.voicingCanAnnounceProperty.link(this.boundHandleCanAnnounceChange),this.getSynth().speak(r)}handleCanAnnounceChange(){this.speakingSpeechSynthesisUtteranceWrapper&&this.cancelUtteranceIfCanAnnounceFalse(this.speakingSpeechSynthesisUtteranceWrapper.utterance)}cancelUtteranceIfCanAnnounceFalse(e){(!e.canAnnounceProperty.value||!e.voicingCanAnnounceProperty.value)&&this.cancelUtterance(e)}handleSpeechSynthesisEnd(e,t){this.endSpeakingEmitter.emit(e,t.utterance),this.announcementCompleteEmitter.emit(t.utterance,t.speechSynthesisUtterance.text),t.speechSynthesisUtterance.removeEventListener("error",t.endListener),t.speechSynthesisUtterance.removeEventListener("end",t.endListener),t.speechSynthesisUtterance.removeEventListener("start",t.startListener);const i=t.utterance.canAnnounceProperty;i.hasListener(this.boundHandleCanAnnounceChange)&&i.unlink(this.boundHandleCanAnnounceChange);const s=t.utterance.voicingCanAnnounceProperty;s.hasListener(this.boundHandleCanAnnounceChange)&&s.unlink(this.boundHandleCanAnnounceChange),this.speakingSpeechSynthesisUtteranceWrapper=null}getSynth(){return this.synth}cancel(){this.initialized&&this.speakingSpeechSynthesisUtteranceWrapper&&this.cancelUtterance(this.speakingSpeechSynthesisUtteranceWrapper.utterance)}cancelUtterance(e){const t=this.speakingSpeechSynthesisUtteranceWrapper;t&&e===t.utterance&&(this.handleSpeechSynthesisEnd(t.announceText,t),this.cancelSynth())}shouldUtteranceCancelOther(e,t){const i=Vl()({},KA,e.announcerOptions);let s;return t.priorityProperty.value!==e.priorityProperty.value?s=t.priorityProperty.value<e.priorityProperty.value:(s=i.cancelOther,t&&t===e&&(s=i.cancelSelf)),s}onUtterancePriorityChange(e){const t=this.speakingSpeechSynthesisUtteranceWrapper;t&&this.shouldUtteranceCancelOther(e,t.utterance)&&this.cancelUtterance(t.utterance)}cancelSynth(){const e=this.getSynth();e&&e.cancel()}static isSpeechSynthesisSupported(){return!!self.speechSynthesis&&!!self.SpeechSynthesisUtterance}}class UI{constructor(e,t,i,s,r,o){this.utterance=e,this.announceText=t,this.speechSynthesisUtterance=i,this.started=s,this.endListener=r,this.startListener=o}}function YI(n){return n.split("<br/>").join(" ").split("<br>").join(" ")}const WI=new pi("SpeechSynthesisVoiceIO",{isValidValue:n=>!0,toStateObject:n=>n.name}),GI=[],h1=!1;class ts extends Zf{constructor(e,t){var s;const i=St()({parameters:GI,phetioOuterType:ts.PhetioActionIO,phetioState:h1,phetioReadOnly:As.DEFAULT_OPTIONS.phetioReadOnly,phetioHighFrequency:As.DEFAULT_OPTIONS.phetioHighFrequency,phetioEventType:As.DEFAULT_OPTIONS.phetioEventType,phetioDocumentation:"A class that wraps a function, adding API to execute that function and data stream capture."},t);super(i),this.action=e,this.isExecutingCount=0,this.disposeOnExecuteCompletion=!1,this.executedEmitter=new _n({parameters:i.parameters,tandem:(s=i.tandem)==null?void 0:s.createTandem("executedEmitter"),hasListenerOrderDependencies:i.hasListenerOrderDependencies,phetioState:i.phetioState,phetioReadOnly:i.phetioReadOnly,phetioHighFrequency:i.phetioHighFrequency,phetioEventType:i.phetioEventType,phetioDocumentation:"Emitter that emits when this actions work is complete"}),this.disposePhetioAction=()=>{this.executedEmitter.dispose()}}execute(...e){this.isExecutingCount++,rt.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("executed",{data:this.getPhetioData(...e)}),this.action.apply(null,e),this.executedEmitter.emit(...e),rt.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent(),this.isExecutingCount--,this.disposeOnExecuteCompletion&&this.isExecutingCount===0&&(this.disposePhetioAction(),this.disposeOnExecuteCompletion=!1)}dispose(){this.isExecutingCount>0?this.disposeOnExecuteCompletion=!0:this.disposePhetioAction(),super.dispose()}}ts.PhetioActionIO=n=>{const e=n.map(UA).join(",");return qg.has(e)||qg.set(e,new pi(`PhetioActionIO<${n.map(UA).join(", ")}>`,{valueType:ts,documentation:"Executes when an event occurs",events:["executed"],parameterTypes:n,metadataDefaults:{phetioState:h1},methods:{execute:{returnType:qr,parameterTypes:n,implementation:function(...t){this.execute(...t)},documentation:"Executes the function the PhetioAction is wrapping.",invocableForReadOnlyElements:!1},getValidationErrors:{returnType:wl(Ai(gs)),parameterTypes:n,implementation:function(...t){return this.getValidationErrors(...t)},documentation:"Checks to see if the proposed values are valid. Returns an array of length N where each element is an error (string) or null if the value is valid."}}})),qg.get(e)};const UA=n=>n.typeName,qg=new zr,YA=n=>Object.getPrototypeOf(n)===Object.prototype,WA=new pi("ObjectLiteralIO",{documentation:"PhET-iO Type for object literals",isValidValue:YA,supertype:m0,stateSchema:aa.asValue("object",{valueType:Object,isValidValue:YA}),toStateObject:he.identity}),uf="targetSubstitute",XI=["altKey","button","charCode","clientX","clientY","code","ctrlKey","deltaMode","deltaX","deltaY","deltaZ","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","scale","shiftKey","target","type","relatedTarget","which"],GA=["deltaMode","deltaX","deltaY","deltaZ","altKey","button","charCode","clientX","clientY","code","ctrlKey","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","shiftKey","type","relatedTarget","which"],jI=["target","relatedTarget"],u1=n=>{const e={constructorName:n.constructor.name};return XI.forEach(t=>{const i=n[t];i==null?e[t]=null:i instanceof Element&&jI.includes(t)&&typeof i.getAttribute=="function"&&i.hasAttribute(Vi.DATA_PDOM_UNIQUE_ID)?e[t]={[Vi.DATA_PDOM_UNIQUE_ID]:i.getAttribute(Vi.DATA_PDOM_UNIQUE_ID),id:i.getAttribute("id")}:e[t]=typeof i=="object"?{}:JSON.parse(JSON.stringify(i))}),e},c1=n=>{const e=n.constructorName||"Event",t=he.pick(n,GA);if(t.relatedTarget){const s=document.getElementById(t.relatedTarget.id);t.relatedTarget=s}const i=new window[e](e,t);for(const s in n)n.hasOwnProperty(s)&&!GA.includes(s)&&(s==="target"?(i[uf]=he.clone(n[s])||{},i[uf].getAttribute=function(r){return this[r]}):i[s]=n[s]);return i},$l=new pi("EventIO",{valueType:self.Event,documentation:"A DOM Event",toStateObject:n=>u1(n),fromStateObject:n=>c1(n),stateSchema:()=>({constructorName:gs,altKey:Ai(zh),button:Ai(Fi),charCode:Ai(Fi),clientX:Ai(Fi),clientY:Ai(Fi),code:Ai(gs),ctrlKey:Ai(zh),deltaMode:Ai(Fi),deltaX:Ai(Fi),deltaY:Ai(Fi),deltaZ:Ai(Fi),key:Ai(gs),keyCode:Ai(Fi),metaKey:Ai(zh),pageX:Ai(Fi),pageY:Ai(Fi),pointerId:Ai(Fi),pointerType:Ai(gs),scale:Ai(Fi),shiftKey:Ai(zh),target:Ai(WA),type:Ai(gs),relatedTarget:Ai(WA),which:Ai(Fi)})});class QI{constructor(e){var i,s;this.keyState={},this._lastKeyDown=null,this.attachedToDocument=!1,this.documentKeyupListener=null,this.documentKeydownListener=null,this.documentBlurListener=null,this._enabled=!0,this.keydownEmitter=new _n({parameters:[{valueType:KeyboardEvent}]}),this.keyupEmitter=new _n({parameters:[{valueType:KeyboardEvent}]}),this.keyDownStateChangedEmitter=new _n({parameters:[{valueType:[KeyboardEvent,null]}]}),this.keydownUpdateAction=new ts(r=>{const o=je.getEventCode(r);if(o){if(this.correctModifierKeys(r),!this.isKeyDown(o)){const d=je.getEventCode(r);this.keyState[d]={key:d,timeDown:0}}this._lastKeyDown=o,this.keydownEmitter.emit(r),this.keyDownStateChangedEmitter.emit(r)}},{phetioPlayback:!0,tandem:(i=e==null?void 0:e.tandem)==null?void 0:i.createTandem("keydownUpdateAction"),parameters:[{name:"event",phetioType:$l}],phetioEventType:Si.USER,phetioDocumentation:"Action that executes whenever a keydown occurs from the input listeners this keyStateTracker adds (most likely to the document)."}),this.keyupUpdateAction=new ts(r=>{const o=je.getEventCode(r);o&&(this.correctModifierKeys(r),this.isKeyDown(o)&&delete this.keyState[o],An.mac&&je.isMetaKey(r)&&this.clearState(!0),this.keyupEmitter.emit(r),this.keyDownStateChangedEmitter.emit(r))},{phetioPlayback:!0,tandem:(s=e==null?void 0:e.tandem)==null?void 0:s.createTandem("keyupUpdateAction"),parameters:[{name:"event",phetioType:$l}],phetioEventType:Si.USER,phetioDocumentation:"Action that executes whenever a keyup occurs from the input listeners this keyStateTracker adds (most likely to the document)."});const t=this.step.bind(this);Qn.addListener(t),this.disposeKeyStateTracker=()=>{Qn.removeListener(t),this.attachedToDocument&&this.detachFromDocument()}}keydownUpdate(e){this.enabled&&this.keydownUpdateAction.execute(e)}correctModifierKeys(e){const t=je.getEventCode(e);let i=!1;e.shiftKey&&!je.isShiftKey(e)&&!this.shiftKeyDown&&(i=i||!this.keyState[je.KEY_SHIFT_LEFT],this.keyState[je.KEY_SHIFT_LEFT]={key:t,timeDown:0}),e.altKey&&!je.isAltKey(e)&&!this.altKeyDown&&(i=i||!this.keyState[je.KEY_ALT_LEFT],this.keyState[je.KEY_ALT_LEFT]={key:t,timeDown:0}),e.ctrlKey&&!je.isControlKey(e)&&!this.ctrlKeyDown&&(i=i||!this.keyState[je.KEY_CONTROL_LEFT],this.keyState[je.KEY_CONTROL_LEFT]={key:t,timeDown:0}),e.metaKey&&!je.isMetaKey(e)&&!this.metaKeyDown&&(i=i||!this.keyState[je.KEY_META_LEFT],this.keyState[je.KEY_META_LEFT]={key:t,timeDown:0}),!e.shiftKey&&this.shiftKeyDown&&(i=i||!!this.keyState[je.KEY_SHIFT_LEFT]||!!this.keyState[je.KEY_SHIFT_RIGHT],delete this.keyState[je.KEY_SHIFT_LEFT],delete this.keyState[je.KEY_SHIFT_RIGHT]),!e.altKey&&this.altKeyDown&&(i=i||!!this.keyState[je.KEY_ALT_LEFT]||!!this.keyState[je.KEY_ALT_RIGHT],delete this.keyState[je.KEY_ALT_LEFT],delete this.keyState[je.KEY_ALT_RIGHT]),!e.ctrlKey&&this.ctrlKeyDown&&(i=i||!!this.keyState[je.KEY_CONTROL_LEFT]||!!this.keyState[je.KEY_CONTROL_RIGHT],delete this.keyState[je.KEY_CONTROL_LEFT],delete this.keyState[je.KEY_CONTROL_RIGHT]),!e.metaKey&&this.metaKeyDown&&(i=i||je.META_KEYS.some(s=>!!this.keyState[s]),je.META_KEYS.forEach(s=>{delete this.keyState[s]})),i&&this.keyDownStateChangedEmitter.emit(e)}keyupUpdate(e){this.enabled&&this.keyupUpdateAction.execute(e)}get movementKeysDown(){return this.isAnyKeyInListDown(je.MOVEMENT_KEYS)}getLastKeyDown(){return this._lastKeyDown}isKeyDown(e){return!!this.keyState[e]}isEnglishKeyDown(e){return this.isAnyKeyInListDown($d[e])}getKeysDown(){return Object.keys(this.keyState)}getEnglishKeysDown(){const e=new Set;for(const t of this.getKeysDown()){const i=lf(t);i&&e.add(i)}return e}isAnyKeyInListDown(e){for(let t=0;t<e.length;t++)if(this.isKeyDown(e[t]))return!0;return!1}areKeysDown(e){for(let i=0;i<e.length;i++)if(!this.isKeyDown(e[i]))return!1;return!0}areKeysExclusivelyDown(e){const t=Object.keys(this.keyState);if(t.length!==e.length)return!1;let i=!0;for(let s=0;s<e.length;s++){const r=e[s];let o=[r];je.isModifierKey(r)&&(o=je.MODIFIER_KEY_TO_CODE_MAP.get(r)),he.intersection(t,o).length===0&&(i=!1)}return i}areKeysDownWithoutExtraModifiers(e){for(let t=0;t<je.MODIFIER_KEY_CODES.length;t++){const i=je.MODIFIER_KEY_CODES[t];if(this.isKeyDown(i)&&!e.includes(i))return!1}return this.areKeysDown(e)}keysAreDown(){return Object.keys(this.keyState).length>0}get enterKeyDown(){return this.isKeyDown(je.KEY_ENTER)}get shiftKeyDown(){return this.isAnyKeyInListDown(je.SHIFT_KEYS)}get altKeyDown(){return this.isAnyKeyInListDown(je.ALT_KEYS)}get ctrlKeyDown(){return this.isAnyKeyInListDown(je.CONTROL_KEYS)}get metaKeyDown(){return this.isAnyKeyInListDown(je.META_KEYS)}timeDownForKey(e){return this.keyState[e].timeDown}clearState(e){this.keyState={},e||this.keyDownStateChangedEmitter.emit(null)}step(e){if(this.keysAreDown()){const t=e*1e3;for(const i in this.keyState)this.keyState[i]&&(this.keyState[i].timeDown+=t)}}attachToWindow(){this.documentKeydownListener=t=>{this.keydownUpdate(t)},this.documentKeyupListener=t=>{this.keyupUpdate(t)},this.documentBlurListener=t=>{this.clearState()};const e=()=>{self.addEventListener("keyup",this.documentKeyupListener,{capture:!0}),self.addEventListener("keydown",this.documentKeydownListener,{capture:!0}),self.addEventListener("blur",this.documentBlurListener,{capture:!0}),this.attachedToDocument=!0};if(document)e();else{const t=()=>{e(),self.removeEventListener("load",t)};self.addEventListener("load",t)}}setEnabled(e){this._enabled!==e&&(this._enabled=e,!e&&this.clearState())}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabled}detachFromDocument(){self.removeEventListener("keyup",this.documentKeyupListener),self.removeEventListener("keydown",this.documentKeydownListener),self.removeEventListener("blur",this.documentBlurListener),this.documentKeyupListener=null,this.documentKeydownListener=null,this.documentBlurListener=null,this.attachedToDocument=!1}dispose(){this.disposeKeyStateTracker()}}class ZI extends QI{constructor(e){super(e)}}const Fa=new ZI({tandem:rt.GENERAL_CONTROLLER.createTandem("keyStateTracker")});class JI extends KI{constructor(e){const t=St()({respectResponseCollectorProperties:!0,phetioDocumentation:"Announcer that manages the voicing feature, providing audio responses via WebAudio."},e);super(t)}initialize(e,t){super.initialize(e,t),Fa.keyupEmitter.addListener(i=>{je.isControlKey(i)&&this.cancel()})}voicingSupportedForLocale(e){return e.startsWith("en")}}const Rl=new JI,_c=(n,e)=>{n.reindex();const t=n.indices.lastIndexOf(-1);if(t<0)return n;const i=t+1,r=n.nodes[i].getTrailsTo(e);if(r.length===0)return n;const o=r[0];for(let d=i+1;d<n.length;d++)o.addDescendant(n.nodes[d]);return o};class za extends rr{}za.INDICES=new za;za.TRAIL_ID=new za;za.enumeration=new oa(za);const sc=za.TRAIL_ID,tp="-",Fg=tp;class Ki{constructor(e){if(e instanceof Ki){const t=e;this.nodes=t.nodes.slice(0),this.length=t.length,this.uniqueId=t.uniqueId,this.indices=t.indices.slice(0);return}if(this.nodes=[],this.length=0,this.uniqueId="",this.indices=[],e)if(e&&!Array.isArray(e)){const t=e;this.addDescendant(t)}else{const t=e.length;for(let i=0;i<t;i++)this.addDescendant(e[i])}}copy(){return new Ki(this)}isPainted(){return this.lastNode().isPainted()}isValid(){this.reindex();const e=this.indices.length;for(let t=0;t<e;t++)if(this.indices[t]<0)return!1;return!0}isVisible(){let e=this.nodes.length;for(;e--;)if(!this.nodes[e].isVisible())return!1;return!0}isPDOMVisible(){let e=this.nodes.length;for(;e--;)if(!this.nodes[e].isVisible()||!this.nodes[e].isPDOMVisible())return!1;return!0}getOpacity(){let e=1,t=this.nodes.length;for(;t--;)e*=this.nodes[t].getOpacity();return e}isPickable(){return he.some(this.nodes,e=>e.pickable===!1||!e.visible)?!1:!!he.some(this.nodes,e=>e._inputListeners.length>0||e.pickableProperty.value===!0)}get(e){return e>=0?this.nodes[e]:this.nodes[this.nodes.length+e]}slice(e,t){return new Ki(this.nodes.slice(e,t))}subtrailTo(e,t=!1){return this.slice(0,he.indexOf(this.nodes,e)+(t?0:1))}isEmpty(){return this.nodes.length===0}getMatrixConcatenation(e,t){const i=mt.identity(),s=this.nodes;for(let r=e;r<t;r++)i.multiplyMatrix(s[r].getMatrix());return i}getMatrix(){return this.getMatrixConcatenation(0,this.nodes.length)}getAncestorMatrix(){return this.getMatrixConcatenation(1,this.nodes.length)}getParentMatrix(){return this.getMatrixConcatenation(0,this.nodes.length-1)}getAncestorParentMatrix(){return this.getMatrixConcatenation(1,this.nodes.length-1)}getTransform(){return new ra(this.getMatrix())}getParentTransform(){return new ra(this.getParentMatrix())}addAncestor(e,t){if(this.nodes.length){const i=this.nodes[0];this.indices.unshift(t===void 0?he.indexOf(e._children,i):t)}return this.nodes.unshift(e),this.length++,this.uniqueId=this.uniqueId?e.id+Fg+this.uniqueId:`${e.id}`,this}removeAncestor(){return this.nodes.shift(),this.indices.length&&this.indices.shift(),this.length--,this.updateUniqueId(),this}addDescendant(e,t){if(this.nodes.length){const i=this.lastNode();this.indices.push(t===void 0?he.indexOf(i._children,e):t)}return this.nodes.push(e),this.length++,this.uniqueId=this.uniqueId?this.uniqueId+Fg+e.id:`${e.id}`,this}removeDescendant(){return this.nodes.pop(),this.indices.length&&this.indices.pop(),this.length--,this.updateUniqueId(),this}addDescendantTrail(e){const t=e.length;t&&this.addDescendant(e.nodes[0]);for(let i=1;i<t;i++)this.addDescendant(e.nodes[i],this.indices[i-1])}removeDescendantTrail(e){const t=e.length;for(let i=t-1;i>=0;i--)this.removeDescendant()}reindex(){const e=this.length;for(let t=1;t<e;t++){const i=this.indices[t-1],s=this.nodes[t-1];s._children[i]!==this.nodes[t]&&(this.indices[t-1]=he.indexOf(s._children,this.nodes[t]))}}setImmutable(){return this}setMutable(){return this}areIndicesValid(){for(let e=1;e<this.length;e++){const t=this.indices[e-1];if(this.nodes[e-1]._children[t]!==this.nodes[e])return!1}return!0}equals(e){if(this.length!==e.length)return!1;for(let t=0;t<this.nodes.length;t++)if(this.nodes[t]!==e.nodes[t])return!1;return!0}upToNode(e){return he.indexOf(this.nodes,e),this.slice(0,he.indexOf(this.nodes,e)+1)}isExtensionOf(e,t){if(this.length<=e.length-(t?1:0))return!1;for(let i=0;i<e.nodes.length;i++)if(this.nodes[i]!==e.nodes[i])return!1;return!0}containsNode(e){return he.includes(this.nodes,e)}getTransformTo(e){return new ra(this.getMatrixTo(e))}getMatrixTo(e){this.reindex(),e.reindex();const t=this.getBranchIndexTo(e);let i,s=mt.IDENTITY;for(i=this.length-1;i>=t;i--)s=this.nodes[i].getMatrix().timesMatrix(s);for(i=t;i<e.length;i++)s=e.nodes[i].getTransform().getInverse().timesMatrix(s);return s}getBranchIndexTo(e){let t;const i=Math.min(this.length,e.length);for(t=0;t<i&&this.nodes[t]===e.nodes[t];t++);return t}getLastInputEnabledIndex(){let e=-1;for(let t=0;t<this.length&&this.nodes[t].inputEnabled;t++)e=t;return e}getCursorCheckIndex(){return this.getLastInputEnabledIndex()}nodeFromTop(e){return this.nodes[this.length-1-e]}lastNode(){return this.nodeFromTop(0)}rootNode(){return this.nodes[0]}previous(){if(this.nodes.length<=1)return null;const e=this.nodeFromTop(0),t=this.nodeFromTop(1),i=he.indexOf(t._children,e),s=this.nodes.slice(0,this.nodes.length-1);if(i===0)return new Ki(s);for(s.push(t._children[i-1]);s[s.length-1]._children.length!==0;){const r=s[s.length-1];s.push(r._children[r._children.length-1])}return new Ki(s)}previousPainted(){let e=this.previous();for(;e&&!e.isPainted();)e=e.previous();return e}next(){const e=this.nodes.slice(0),t=this.nodeFromTop(0);if(t._children.length>0)return e.push(t._children[0]),new Ki(e);{let i=this.nodes.length-1;for(;i>0;){const s=this.nodes[i],r=this.nodes[i-1];e.pop();const o=he.indexOf(r._children,s);if(o!==r._children.length-1)return e.push(r._children[o+1]),new Ki(e);i--}return null}}nextPainted(){let e=this.next();for(;e&&!e.isPainted();)e=e.next();return e}compare(e){const t=Math.min(this.nodes.length,e.nodes.length);for(let i=0;i<t;i++)if(this.nodes[i]!==e.nodes[i])return this.nodes[i-1].children.indexOf(this.nodes[i])<e.nodes[i-1].children.indexOf(e.nodes[i])?-1:1;return this.nodes.length<e.nodes.length?-1:this.nodes.length>e.nodes.length?1:0}isBefore(e){return this.compare(e)===-1}isAfter(e){return this.compare(e)===1}localToGlobalPoint(e){return this.getMatrix().timesVector2(e)}localToGlobalBounds(e){return e.transformed(this.getMatrix())}globalToLocalPoint(e){return this.getTransform().inversePosition2(e)}globalToLocalBounds(e){return this.getTransform().inverseBounds2(e)}parentToGlobalPoint(e){return this.getParentMatrix().timesVector2(e)}parentToGlobalBounds(e){return e.transformed(this.getParentMatrix())}globalToParentPoint(e){return this.getParentTransform().inversePosition2(e)}globalToParentBounds(e){return this.getParentTransform().inverseBounds2(e)}updateUniqueId(){let e="";const t=this.nodes.length;t>0&&(e+=this.nodes[0]._id);for(let i=1;i<t;i++)e+=Fg+this.nodes[i]._id;this.uniqueId=e}getUniqueId(){return this.uniqueId}toString(){return this.reindex(),this.length?`[Trail ${this.indices.join(".")} ${this.getUniqueId()}]`:"Empty Trail"}toPathString(){return he.map(this.nodes,e=>{let t=e.constructor.name;return t==="Node"&&(t="."),t}).join("/")}toDebugString(){return`${this.toString()} ${this.toPathString()}`}static branchIndex(e,t){let i;const s=Math.min(e.length,t.length);for(i=0;i<s&&e.nodes[i]===t.nodes[i];i++);return i}static sharedTrail(e,t){return e.slice(0,Ki.branchIndex(e,t))}static appendAncestorTrailsWithPredicate(e,t,i){const s=t.rootNode();i(s)&&e.push(t.copy());const r=s._parents.length;for(let o=0;o<r;o++){const d=s._parents[o];t.addAncestor(d),Ki.appendAncestorTrailsWithPredicate(e,t,i),t.removeAncestor()}}static appendDescendantTrailsWithPredicate(e,t,i){const s=t.lastNode();i(s)&&e.push(t.copy());const r=s._children.length;for(let o=0;o<r;o++){const d=s._children[o];t.addDescendant(d,o),Ki.appendDescendantTrailsWithPredicate(e,t,i),t.removeDescendant()}}static spannedSubtrees(e,t){}}const $I=(n,e)=>{const i=e.split(tp).map(o=>Number(o));let s=n;i.shift();const r=[s];for(;i.length>0;){const o=i.shift(),g=(s.pdomOrder||[]).concat(s.children);for(let y=0;y<g.length;y++)if(g[y]!==null&&g[y].id===o){const S=g[y];r.push(S),s=S;break}}return new Ki(r)},tf=(n,e)=>sc===za.INDICES?n.getTrailFromPDOMIndicesString(e):$I(n.rootNode,e),gr=new Li(null,{tandem:rt.GENERAL_MODEL.createTandem("pdomFocusProperty"),phetioDocumentation:"Stores the current focus in the Parallel DOM, null if nothing has focus. This is not updated based on mouse or touch input, only keyboard and other alternative inputs. Note that this only applies to simulations that support alternative input.",phetioValueType:Ai($o.FocusIO),phetioState:!1,phetioFeatured:!0,phetioReadOnly:!0}),Ac=()=>{let n=null;const e=gr.value;return e&&(n=e.trail.lastNode()),n};function Jh(n){return typeof n=="object"&&n._isInteractiveHighlighting}class ys{constructor(){this.pointerFocusProperty=new Li(null),this.readingBlockFocusProperty=new Li(null),this.lockedPointerFocusProperty=new Li(null),this.pdomFocusHighlightsVisibleProperty=new Ri(!0),this.interactiveHighlightsVisibleProperty=new Ri(!1),this.readingBlockHighlightsVisibleProperty=new Ri(!1),this.voicingFullyEnabledListener=e=>{this.readingBlockHighlightsVisibleProperty.value=e},Rl.voicingFullyEnabledProperty.link(this.voicingFullyEnabledListener),this.pointerHighlightsVisibleProperty=new ps([this.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty],(e,t)=>e||t),this.readingBlockFocusController=new Ng(this.readingBlockFocusProperty),this.startSpeakingListener=(e,t)=>{this.readingBlockFocusProperty.value=t instanceof qA?t.readingBlockFocus:null},Rl.startSpeakingEmitter.addListener(this.startSpeakingListener),this.endSpeakingListener=(e,t)=>{t instanceof qA&&this.readingBlockFocusProperty.value&&t.readingBlockFocus.trail.equals(this.readingBlockFocusProperty.value.trail)&&(this.readingBlockFocusProperty.value=null)},Rl.endSpeakingEmitter.addListener(this.endSpeakingListener),this.pointerFocusDisplayedController=new Ng(this.pointerFocusProperty),this.lockedPointerFocusDisplayedController=new Ng(this.lockedPointerFocusProperty),[this.pointerFocusProperty,this.lockedPointerFocusProperty].forEach(e=>{e.link(this.onPointerFocusChange.bind(this))})}dispose(){this.pointerFocusProperty.dispose(),this.readingBlockFocusProperty.dispose(),this.lockedPointerFocusProperty.dispose(),this.pdomFocusHighlightsVisibleProperty.dispose(),this.interactiveHighlightsVisibleProperty.dispose(),this.readingBlockHighlightsVisibleProperty.dispose(),this.readingBlockFocusController.dispose(),this.pointerFocusDisplayedController.dispose(),this.pointerHighlightsVisibleProperty.dispose(),this.lockedPointerFocusDisplayedController.dispose(),Rl.startSpeakingEmitter.removeListener(this.startSpeakingListener),Rl.endSpeakingEmitter.removeListener(this.endSpeakingListener),Rl.voicingFullyEnabledProperty.unlink(this.voicingFullyEnabledListener)}static updatePDOMFocusFromEvent(e,t,i){if(i)for(let s=0;s<e.length;s++){const r=e[s],o=document.activeElement;if(r.isElementUnderPDOM(o,!1)){const d=o.getAttribute(Vi.DATA_PDOM_UNIQUE_ID),g=tf(r,d),y=_c(g,r.rootNode);y.lastNode().focusable?ys.pdomFocus=new $o(r,y):(t.target.blur(),t.stopImmediatePropagation());break}}else for(let s=0;s<e.length;s++){const r=e[s],o=r._input.getRelatedTargetTrail(t);o&&o.lastNode().focusable?ys.pdomFocus=new $o(r,_c(o,r.rootNode)):ys.pdomFocus=null}}onPointerFocusChange(e,t){const i=e==null?void 0:e.trail.lastNode();i&&Jh(i)&&i.handleHighlightActiveChange();const s=t==null?void 0:t.trail.lastNode();s&&Jh(s)&&s.handleHighlightActiveChange()}static set pdomFocus(e){if(gr.value!==e){let t;gr.value&&(t=Ac()),gr.value=e,t&&!e&&t.blur()}}static get pdomFocus(){return gr.value}static attachToWindow(){ys.attachedWindowFocusListener=()=>{ys._windowHasFocusProperty.value=!0},ys.attachedWindowBlurListener=()=>{ys._windowHasFocusProperty.value=!1},self.addEventListener("focus",ys.attachedWindowFocusListener),self.addEventListener("blur",ys.attachedWindowBlurListener),ys._windowHasFocusProperty.value=document.hasFocus(),ys.globallyAttached=!0}static detachFromWindow(){self.removeEventListener("focus",ys.attachedWindowFocusListener),self.removeEventListener("blur",ys.attachedWindowBlurListener),ys._windowHasFocusProperty.value=!1,ys.globallyAttached=!1}}ys.attachedWindowFocusListener=null;ys.attachedWindowBlurListener=null;ys.globallyAttached=!1;ys._windowHasFocusProperty=new Ri(!1);ys.windowHasFocusProperty=ys._windowHasFocusProperty;class ek{constructor(e){this._focusWasInGroup=!1,this.focusInGroupProperty=new Ri(!1),this.focusTargetProperty=new Li(null),this.groupParent=e}focusin(e){this.focusInGroupProperty.value=!0,this.focusTargetProperty.value=e.target,this._focusWasInGroup=!0}focusout(e){var i;const t=(i=gr.value)==null?void 0:i.trail;t&&t.containsNode(this.groupParent)||(this.focusInGroupProperty.value=!1,this.focusTargetProperty.value=null,this._focusWasInGroup=!1)}get focusWasInGroup(){return this._focusWasInGroup}dispose(){this.focusInGroupProperty.dispose(),this.focusTargetProperty.dispose()}}class zg{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let i=this.length++;for(;i>0;){const s=i-1>>1,r=this.values[s];if(t>=r)break;this.ids[i]=this.ids[s],this.values[i]=r,i=s}this.ids[i]=e,this.values[i]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],i=this.values[0]=this.values[this.length],s=this.length>>1;let r=0;for(;r<s;){let o=(r<<1)+1;const d=o+1;let g=this.ids[o],y=this.values[o];const S=this.values[d];if(d<this.length&&S<y&&(o=d,g=this.ids[d],y=S),y>=i)break;this.ids[r]=g,this.values[r]=y,r=o}this.ids[r]=t,this.values[r]=i}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}function tk(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var d1={exports:{}},Rd={exports:{}},XA;function ik(){return XA||(XA=1,function(n,e){(function(t,i){i(e)})(pr,function(t){var i=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],s=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],r="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",o="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",d={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},g="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",y={5:g,"5module":g+" export import",6:g+" const class extends export import super"},S=/^in(stanceof)?$/,T=new RegExp("["+o+"]"),L=new RegExp("["+o+r+"]");function x(c,C){for(var u=65536,m=0;m<C.length;m+=2){if(u+=C[m],u>c)return!1;if(u+=C[m+1],u>=c)return!0}return!1}function A(c,C){return c<65?c===36:c<91?!0:c<97?c===95:c<123?!0:c<=65535?c>=170&&T.test(String.fromCharCode(c)):C===!1?!1:x(c,s)}function Q(c,C){return c<48?c===36:c<58?!0:c<65?!1:c<91?!0:c<97?c===95:c<123?!0:c<=65535?c>=170&&L.test(String.fromCharCode(c)):C===!1?!1:x(c,s)||x(c,i)}var z=function(C,u){u===void 0&&(u={}),this.label=C,this.keyword=u.keyword,this.beforeExpr=!!u.beforeExpr,this.startsExpr=!!u.startsExpr,this.isLoop=!!u.isLoop,this.isAssign=!!u.isAssign,this.prefix=!!u.prefix,this.postfix=!!u.postfix,this.binop=u.binop||null,this.updateContext=null};function G(c,C){return new z(c,{beforeExpr:!0,binop:C})}var re={beforeExpr:!0},ne={startsExpr:!0},ae={};function pe(c,C){return C===void 0&&(C={}),C.keyword=c,ae[c]=new z(c,C)}var N={num:new z("num",ne),regexp:new z("regexp",ne),string:new z("string",ne),name:new z("name",ne),privateId:new z("privateId",ne),eof:new z("eof"),bracketL:new z("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new z("]"),braceL:new z("{",{beforeExpr:!0,startsExpr:!0}),braceR:new z("}"),parenL:new z("(",{beforeExpr:!0,startsExpr:!0}),parenR:new z(")"),comma:new z(",",re),semi:new z(";",re),colon:new z(":",re),dot:new z("."),question:new z("?",re),questionDot:new z("?."),arrow:new z("=>",re),template:new z("template"),invalidTemplate:new z("invalidTemplate"),ellipsis:new z("...",re),backQuote:new z("`",ne),dollarBraceL:new z("${",{beforeExpr:!0,startsExpr:!0}),eq:new z("=",{beforeExpr:!0,isAssign:!0}),assign:new z("_=",{beforeExpr:!0,isAssign:!0}),incDec:new z("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new z("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:G("||",1),logicalAND:G("&&",2),bitwiseOR:G("|",3),bitwiseXOR:G("^",4),bitwiseAND:G("&",5),equality:G("==/!=/===/!==",6),relational:G("</>/<=/>=",7),bitShift:G("<</>>/>>>",8),plusMin:new z("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:G("%",10),star:G("*",10),slash:G("/",10),starstar:new z("**",{beforeExpr:!0}),coalesce:G("??",1),_break:pe("break"),_case:pe("case",re),_catch:pe("catch"),_continue:pe("continue"),_debugger:pe("debugger"),_default:pe("default",re),_do:pe("do",{isLoop:!0,beforeExpr:!0}),_else:pe("else",re),_finally:pe("finally"),_for:pe("for",{isLoop:!0}),_function:pe("function",ne),_if:pe("if"),_return:pe("return",re),_switch:pe("switch"),_throw:pe("throw",re),_try:pe("try"),_var:pe("var"),_const:pe("const"),_while:pe("while",{isLoop:!0}),_with:pe("with"),_new:pe("new",{beforeExpr:!0,startsExpr:!0}),_this:pe("this",ne),_super:pe("super",ne),_class:pe("class",ne),_extends:pe("extends",re),_export:pe("export"),_import:pe("import",ne),_null:pe("null",ne),_true:pe("true",ne),_false:pe("false",ne),_in:pe("in",{beforeExpr:!0,binop:7}),_instanceof:pe("instanceof",{beforeExpr:!0,binop:7}),_typeof:pe("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:pe("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:pe("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ie=/\r\n?|\n|\u2028|\u2029/,$e=new RegExp(Ie.source,"g");function Ee(c){return c===10||c===13||c===8232||c===8233}function Je(c,C,u){u===void 0&&(u=c.length);for(var m=C;m<u;m++){var v=c.charCodeAt(m);if(Ee(v))return m<u-1&&v===13&&c.charCodeAt(m+1)===10?m+2:m+1}return-1}var Ge=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,_t=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,it=Object.prototype,nt=it.hasOwnProperty,Ct=it.toString,Qe=Object.hasOwn||function(c,C){return nt.call(c,C)},Zt=Array.isArray||function(c){return Ct.call(c)==="[object Array]"},At=Object.create(null);function Re(c){return At[c]||(At[c]=new RegExp("^(?:"+c.replace(/ /g,"|")+")$"))}function at(c){return c<=65535?String.fromCharCode(c):(c-=65536,String.fromCharCode((c>>10)+55296,(c&1023)+56320))}var Et=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Nt=function(C,u){this.line=C,this.column=u};Nt.prototype.offset=function(C){return new Nt(this.line,this.column+C)};var Ht=function(C,u,m){this.start=u,this.end=m,C.sourceFile!==null&&(this.source=C.sourceFile)};function cs(c,C){for(var u=1,m=0;;){var v=Je(c,m,C);if(v<0)return new Nt(u,C-m);++u,m=v}}var hi={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},zs=!1;function Ji(c){var C={};for(var u in hi)C[u]=c&&Qe(c,u)?c[u]:hi[u];if(C.ecmaVersion==="latest"?C.ecmaVersion=1e8:C.ecmaVersion==null?(!zs&&typeof console=="object"&&console.warn&&(zs=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),C.ecmaVersion=11):C.ecmaVersion>=2015&&(C.ecmaVersion-=2009),C.allowReserved==null&&(C.allowReserved=C.ecmaVersion<5),(!c||c.allowHashBang==null)&&(C.allowHashBang=C.ecmaVersion>=14),Zt(C.onToken)){var m=C.onToken;C.onToken=function(v){return m.push(v)}}return Zt(C.onComment)&&(C.onComment=bs(C,C.onComment)),C}function bs(c,C){return function(u,m,v,E,R,Y){var ee={type:u?"Block":"Line",value:m,start:v,end:E};c.locations&&(ee.loc=new Ht(this,R,Y)),c.ranges&&(ee.range=[v,E]),C.push(ee)}}var ai=1,Ei=2,Pt=4,Hn=8,Zs=16,ns=32,on=64,P=128,fe=256,ye=ai|Ei|fe;function we(c,C){return Ei|(c?Pt:0)|(C?Hn:0)}var De=0,yt=1,tt=2,lt=3,Kn=4,Jt=5,a=function(C,u,m){this.options=C=Ji(C),this.sourceFile=C.sourceFile,this.keywords=Re(y[C.ecmaVersion>=6?6:C.sourceType==="module"?"5module":5]);var v="";C.allowReserved!==!0&&(v=d[C.ecmaVersion>=6?6:C.ecmaVersion===5?5:3],C.sourceType==="module"&&(v+=" await")),this.reservedWords=Re(v);var E=(v?v+" ":"")+d.strict;this.reservedWordsStrict=Re(E),this.reservedWordsStrictBind=Re(E+" "+d.strictBind),this.input=String(u),this.containsEsc=!1,m?(this.pos=m,this.lineStart=this.input.lastIndexOf(`
`,m-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ie).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=N.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=C.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&C.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(ai),this.regexpState=null,this.privateNameStack=[]},h={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};a.prototype.parse=function(){var C=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(C)},h.inFunction.get=function(){return(this.currentVarScope().flags&Ei)>0},h.inGenerator.get=function(){return(this.currentVarScope().flags&Hn)>0&&!this.currentVarScope().inClassFieldInit},h.inAsync.get=function(){return(this.currentVarScope().flags&Pt)>0&&!this.currentVarScope().inClassFieldInit},h.canAwait.get=function(){for(var c=this.scopeStack.length-1;c>=0;c--){var C=this.scopeStack[c];if(C.inClassFieldInit||C.flags&fe)return!1;if(C.flags&Ei)return(C.flags&Pt)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},h.allowSuper.get=function(){var c=this.currentThisScope(),C=c.flags,u=c.inClassFieldInit;return(C&on)>0||u||this.options.allowSuperOutsideMethod},h.allowDirectSuper.get=function(){return(this.currentThisScope().flags&P)>0},h.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},h.allowNewDotTarget.get=function(){var c=this.currentThisScope(),C=c.flags,u=c.inClassFieldInit;return(C&(Ei|fe))>0||u},h.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&fe)>0},a.extend=function(){for(var C=[],u=arguments.length;u--;)C[u]=arguments[u];for(var m=this,v=0;v<C.length;v++)m=C[v](m);return m},a.parse=function(C,u){return new this(u,C).parse()},a.parseExpressionAt=function(C,u,m){var v=new this(m,C,u);return v.nextToken(),v.parseExpression()},a.tokenizer=function(C,u){return new this(u,C)},Object.defineProperties(a.prototype,h);var f=a.prototype,_=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;f.strictDirective=function(c){if(this.options.ecmaVersion<5)return!1;for(;;){_t.lastIndex=c,c+=_t.exec(this.input)[0].length;var C=_.exec(this.input.slice(c));if(!C)return!1;if((C[1]||C[2])==="use strict"){_t.lastIndex=c+C[0].length;var u=_t.exec(this.input),m=u.index+u[0].length,v=this.input.charAt(m);return v===";"||v==="}"||Ie.test(u[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(v)||v==="!"&&this.input.charAt(m+1)==="=")}c+=C[0].length,_t.lastIndex=c,c+=_t.exec(this.input)[0].length,this.input[c]===";"&&c++}},f.eat=function(c){return this.type===c?(this.next(),!0):!1},f.isContextual=function(c){return this.type===N.name&&this.value===c&&!this.containsEsc},f.eatContextual=function(c){return this.isContextual(c)?(this.next(),!0):!1},f.expectContextual=function(c){this.eatContextual(c)||this.unexpected()},f.canInsertSemicolon=function(){return this.type===N.eof||this.type===N.braceR||Ie.test(this.input.slice(this.lastTokEnd,this.start))},f.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},f.semicolon=function(){!this.eat(N.semi)&&!this.insertSemicolon()&&this.unexpected()},f.afterTrailingComma=function(c,C){if(this.type===c)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),C||this.next(),!0},f.expect=function(c){this.eat(c)||this.unexpected()},f.unexpected=function(c){this.raise(c??this.start,"Unexpected token")};var b=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};f.checkPatternErrors=function(c,C){if(c){c.trailingComma>-1&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element");var u=C?c.parenthesizedAssign:c.parenthesizedBind;u>-1&&this.raiseRecoverable(u,C?"Assigning to rvalue":"Parenthesized pattern")}},f.checkExpressionErrors=function(c,C){if(!c)return!1;var u=c.shorthandAssign,m=c.doubleProto;if(!C)return u>=0||m>=0;u>=0&&this.raise(u,"Shorthand property assignments are valid only in destructuring patterns"),m>=0&&this.raiseRecoverable(m,"Redefinition of __proto__ property")},f.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},f.isSimpleAssignTarget=function(c){return c.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(c.expression):c.type==="Identifier"||c.type==="MemberExpression"};var w=a.prototype;w.parseTopLevel=function(c){var C=Object.create(null);for(c.body||(c.body=[]);this.type!==N.eof;){var u=this.parseStatement(null,!0,C);c.body.push(u)}if(this.inModule)for(var m=0,v=Object.keys(this.undefinedExports);m<v.length;m+=1){var E=v[m];this.raiseRecoverable(this.undefinedExports[E].start,"Export '"+E+"' is not defined")}return this.adaptDirectivePrologue(c.body),this.next(),c.sourceType=this.options.sourceType,this.finishNode(c,"Program")};var I={kind:"loop"},D={kind:"switch"};w.isLet=function(c){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;_t.lastIndex=this.pos;var C=_t.exec(this.input),u=this.pos+C[0].length,m=this.input.charCodeAt(u);if(m===91||m===92)return!0;if(c)return!1;if(m===123||m>55295&&m<56320)return!0;if(A(m,!0)){for(var v=u+1;Q(m=this.input.charCodeAt(v),!0);)++v;if(m===92||m>55295&&m<56320)return!0;var E=this.input.slice(u,v);if(!S.test(E))return!0}return!1},w.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;_t.lastIndex=this.pos;var c=_t.exec(this.input),C=this.pos+c[0].length,u;return!Ie.test(this.input.slice(this.pos,C))&&this.input.slice(C,C+8)==="function"&&(C+8===this.input.length||!(Q(u=this.input.charCodeAt(C+8))||u>55295&&u<56320))},w.parseStatement=function(c,C,u){var m=this.type,v=this.startNode(),E;switch(this.isLet(c)&&(m=N._var,E="let"),m){case N._break:case N._continue:return this.parseBreakContinueStatement(v,m.keyword);case N._debugger:return this.parseDebuggerStatement(v);case N._do:return this.parseDoStatement(v);case N._for:return this.parseForStatement(v);case N._function:return c&&(this.strict||c!=="if"&&c!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(v,!1,!c);case N._class:return c&&this.unexpected(),this.parseClass(v,!0);case N._if:return this.parseIfStatement(v);case N._return:return this.parseReturnStatement(v);case N._switch:return this.parseSwitchStatement(v);case N._throw:return this.parseThrowStatement(v);case N._try:return this.parseTryStatement(v);case N._const:case N._var:return E=E||this.value,c&&E!=="var"&&this.unexpected(),this.parseVarStatement(v,E);case N._while:return this.parseWhileStatement(v);case N._with:return this.parseWithStatement(v);case N.braceL:return this.parseBlock(!0,v);case N.semi:return this.parseEmptyStatement(v);case N._export:case N._import:if(this.options.ecmaVersion>10&&m===N._import){_t.lastIndex=this.pos;var R=_t.exec(this.input),Y=this.pos+R[0].length,ee=this.input.charCodeAt(Y);if(ee===40||ee===46)return this.parseExpressionStatement(v,this.parseExpression())}return this.options.allowImportExportEverywhere||(C||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),m===N._import?this.parseImport(v):this.parseExport(v,u);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(v,!0,!c);var _e=this.value,xe=this.parseExpression();return m===N.name&&xe.type==="Identifier"&&this.eat(N.colon)?this.parseLabeledStatement(v,_e,xe,c):this.parseExpressionStatement(v,xe)}},w.parseBreakContinueStatement=function(c,C){var u=C==="break";this.next(),this.eat(N.semi)||this.insertSemicolon()?c.label=null:this.type!==N.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var m=0;m<this.labels.length;++m){var v=this.labels[m];if((c.label==null||v.name===c.label.name)&&(v.kind!=null&&(u||v.kind==="loop")||c.label&&u))break}return m===this.labels.length&&this.raise(c.start,"Unsyntactic "+C),this.finishNode(c,u?"BreakStatement":"ContinueStatement")},w.parseDebuggerStatement=function(c){return this.next(),this.semicolon(),this.finishNode(c,"DebuggerStatement")},w.parseDoStatement=function(c){return this.next(),this.labels.push(I),c.body=this.parseStatement("do"),this.labels.pop(),this.expect(N._while),c.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(N.semi):this.semicolon(),this.finishNode(c,"DoWhileStatement")},w.parseForStatement=function(c){this.next();var C=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(I),this.enterScope(0),this.expect(N.parenL),this.type===N.semi)return C>-1&&this.unexpected(C),this.parseFor(c,null);var u=this.isLet();if(this.type===N._var||this.type===N._const||u){var m=this.startNode(),v=u?"let":this.value;return this.next(),this.parseVar(m,!0,v),this.finishNode(m,"VariableDeclaration"),(this.type===N._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&m.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===N._in?C>-1&&this.unexpected(C):c.await=C>-1),this.parseForIn(c,m)):(C>-1&&this.unexpected(C),this.parseFor(c,m))}var E=this.isContextual("let"),R=!1,Y=this.containsEsc,ee=new b,_e=this.start,xe=C>-1?this.parseExprSubscripts(ee,"await"):this.parseExpression(!0,ee);return this.type===N._in||(R=this.options.ecmaVersion>=6&&this.isContextual("of"))?(C>-1?(this.type===N._in&&this.unexpected(C),c.await=!0):R&&this.options.ecmaVersion>=8&&(xe.start===_e&&!Y&&xe.type==="Identifier"&&xe.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(c.await=!1)),E&&R&&this.raise(xe.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(xe,!1,ee),this.checkLValPattern(xe),this.parseForIn(c,xe)):(this.checkExpressionErrors(ee,!0),C>-1&&this.unexpected(C),this.parseFor(c,xe))},w.parseFunctionStatement=function(c,C,u){return this.next(),this.parseFunction(c,B|(u?0:H),!1,C)},w.parseIfStatement=function(c){return this.next(),c.test=this.parseParenExpression(),c.consequent=this.parseStatement("if"),c.alternate=this.eat(N._else)?this.parseStatement("if"):null,this.finishNode(c,"IfStatement")},w.parseReturnStatement=function(c){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(N.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon()),this.finishNode(c,"ReturnStatement")},w.parseSwitchStatement=function(c){this.next(),c.discriminant=this.parseParenExpression(),c.cases=[],this.expect(N.braceL),this.labels.push(D),this.enterScope(0);for(var C,u=!1;this.type!==N.braceR;)if(this.type===N._case||this.type===N._default){var m=this.type===N._case;C&&this.finishNode(C,"SwitchCase"),c.cases.push(C=this.startNode()),C.consequent=[],this.next(),m?C.test=this.parseExpression():(u&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),u=!0,C.test=null),this.expect(N.colon)}else C||this.unexpected(),C.consequent.push(this.parseStatement(null));return this.exitScope(),C&&this.finishNode(C,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(c,"SwitchStatement")},w.parseThrowStatement=function(c){return this.next(),Ie.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),c.argument=this.parseExpression(),this.semicolon(),this.finishNode(c,"ThrowStatement")};var k=[];w.parseCatchClauseParam=function(){var c=this.parseBindingAtom(),C=c.type==="Identifier";return this.enterScope(C?ns:0),this.checkLValPattern(c,C?Kn:tt),this.expect(N.parenR),c},w.parseTryStatement=function(c){if(this.next(),c.block=this.parseBlock(),c.handler=null,this.type===N._catch){var C=this.startNode();this.next(),this.eat(N.parenL)?C.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),C.param=null,this.enterScope(0)),C.body=this.parseBlock(!1),this.exitScope(),c.handler=this.finishNode(C,"CatchClause")}return c.finalizer=this.eat(N._finally)?this.parseBlock():null,!c.handler&&!c.finalizer&&this.raise(c.start,"Missing catch or finally clause"),this.finishNode(c,"TryStatement")},w.parseVarStatement=function(c,C,u){return this.next(),this.parseVar(c,!1,C,u),this.semicolon(),this.finishNode(c,"VariableDeclaration")},w.parseWhileStatement=function(c){return this.next(),c.test=this.parseParenExpression(),this.labels.push(I),c.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(c,"WhileStatement")},w.parseWithStatement=function(c){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),c.object=this.parseParenExpression(),c.body=this.parseStatement("with"),this.finishNode(c,"WithStatement")},w.parseEmptyStatement=function(c){return this.next(),this.finishNode(c,"EmptyStatement")},w.parseLabeledStatement=function(c,C,u,m){for(var v=0,E=this.labels;v<E.length;v+=1){var R=E[v];R.name===C&&this.raise(u.start,"Label '"+C+"' is already declared")}for(var Y=this.type.isLoop?"loop":this.type===N._switch?"switch":null,ee=this.labels.length-1;ee>=0;ee--){var _e=this.labels[ee];if(_e.statementStart===c.start)_e.statementStart=this.start,_e.kind=Y;else break}return this.labels.push({name:C,kind:Y,statementStart:this.start}),c.body=this.parseStatement(m?m.indexOf("label")===-1?m+"label":m:"label"),this.labels.pop(),c.label=u,this.finishNode(c,"LabeledStatement")},w.parseExpressionStatement=function(c,C){return c.expression=C,this.semicolon(),this.finishNode(c,"ExpressionStatement")},w.parseBlock=function(c,C,u){for(c===void 0&&(c=!0),C===void 0&&(C=this.startNode()),C.body=[],this.expect(N.braceL),c&&this.enterScope(0);this.type!==N.braceR;){var m=this.parseStatement(null);C.body.push(m)}return u&&(this.strict=!1),this.next(),c&&this.exitScope(),this.finishNode(C,"BlockStatement")},w.parseFor=function(c,C){return c.init=C,this.expect(N.semi),c.test=this.type===N.semi?null:this.parseExpression(),this.expect(N.semi),c.update=this.type===N.parenR?null:this.parseExpression(),this.expect(N.parenR),c.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(c,"ForStatement")},w.parseForIn=function(c,C){var u=this.type===N._in;return this.next(),C.type==="VariableDeclaration"&&C.declarations[0].init!=null&&(!u||this.options.ecmaVersion<8||this.strict||C.kind!=="var"||C.declarations[0].id.type!=="Identifier")&&this.raise(C.start,(u?"for-in":"for-of")+" loop variable declaration may not have an initializer"),c.left=C,c.right=u?this.parseExpression():this.parseMaybeAssign(),this.expect(N.parenR),c.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(c,u?"ForInStatement":"ForOfStatement")},w.parseVar=function(c,C,u,m){for(c.declarations=[],c.kind=u;;){var v=this.startNode();if(this.parseVarId(v,u),this.eat(N.eq)?v.init=this.parseMaybeAssign(C):!m&&u==="const"&&!(this.type===N._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!m&&v.id.type!=="Identifier"&&!(C&&(this.type===N._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):v.init=null,c.declarations.push(this.finishNode(v,"VariableDeclarator")),!this.eat(N.comma))break}return c},w.parseVarId=function(c,C){c.id=this.parseBindingAtom(),this.checkLValPattern(c.id,C==="var"?yt:tt,!1)};var B=1,H=2,U=4;w.parseFunction=function(c,C,u,m,v){this.initFunction(c),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!m)&&(this.type===N.star&&C&H&&this.unexpected(),c.generator=this.eat(N.star)),this.options.ecmaVersion>=8&&(c.async=!!m),C&B&&(c.id=C&U&&this.type!==N.name?null:this.parseIdent(),c.id&&!(C&H)&&this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?yt:tt:lt));var E=this.yieldPos,R=this.awaitPos,Y=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(we(c.async,c.generator)),C&B||(c.id=this.type===N.name?this.parseIdent():null),this.parseFunctionParams(c),this.parseFunctionBody(c,u,!1,v),this.yieldPos=E,this.awaitPos=R,this.awaitIdentPos=Y,this.finishNode(c,C&B?"FunctionDeclaration":"FunctionExpression")},w.parseFunctionParams=function(c){this.expect(N.parenL),c.params=this.parseBindingList(N.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},w.parseClass=function(c,C){this.next();var u=this.strict;this.strict=!0,this.parseClassId(c,C),this.parseClassSuper(c);var m=this.enterClassBody(),v=this.startNode(),E=!1;for(v.body=[],this.expect(N.braceL);this.type!==N.braceR;){var R=this.parseClassElement(c.superClass!==null);R&&(v.body.push(R),R.type==="MethodDefinition"&&R.kind==="constructor"?(E&&this.raiseRecoverable(R.start,"Duplicate constructor in the same class"),E=!0):R.key&&R.key.type==="PrivateIdentifier"&&F(m,R)&&this.raiseRecoverable(R.key.start,"Identifier '#"+R.key.name+"' has already been declared"))}return this.strict=u,this.next(),c.body=this.finishNode(v,"ClassBody"),this.exitClassBody(),this.finishNode(c,C?"ClassDeclaration":"ClassExpression")},w.parseClassElement=function(c){if(this.eat(N.semi))return null;var C=this.options.ecmaVersion,u=this.startNode(),m="",v=!1,E=!1,R="method",Y=!1;if(this.eatContextual("static")){if(C>=13&&this.eat(N.braceL))return this.parseClassStaticBlock(u),u;this.isClassElementNameStart()||this.type===N.star?Y=!0:m="static"}if(u.static=Y,!m&&C>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===N.star)&&!this.canInsertSemicolon()?E=!0:m="async"),!m&&(C>=9||!E)&&this.eat(N.star)&&(v=!0),!m&&!E&&!v){var ee=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?R=ee:m=ee)}if(m?(u.computed=!1,u.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),u.key.name=m,this.finishNode(u.key,"Identifier")):this.parseClassElementName(u),C<13||this.type===N.parenL||R!=="method"||v||E){var _e=!u.static&&q(u,"constructor"),xe=_e&&c;_e&&R!=="method"&&this.raise(u.key.start,"Constructor can't have get/set modifier"),u.kind=_e?"constructor":R,this.parseClassMethod(u,v,E,xe)}else this.parseClassField(u);return u},w.isClassElementNameStart=function(){return this.type===N.name||this.type===N.privateId||this.type===N.num||this.type===N.string||this.type===N.bracketL||this.type.keyword},w.parseClassElementName=function(c){this.type===N.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)},w.parseClassMethod=function(c,C,u,m){var v=c.key;c.kind==="constructor"?(C&&this.raise(v.start,"Constructor can't be a generator"),u&&this.raise(v.start,"Constructor can't be an async method")):c.static&&q(c,"prototype")&&this.raise(v.start,"Classes may not have a static property named prototype");var E=c.value=this.parseMethod(C,u,m);return c.kind==="get"&&E.params.length!==0&&this.raiseRecoverable(E.start,"getter should have no params"),c.kind==="set"&&E.params.length!==1&&this.raiseRecoverable(E.start,"setter should have exactly one param"),c.kind==="set"&&E.params[0].type==="RestElement"&&this.raiseRecoverable(E.params[0].start,"Setter cannot use rest params"),this.finishNode(c,"MethodDefinition")},w.parseClassField=function(c){if(q(c,"constructor")?this.raise(c.key.start,"Classes can't have a field named 'constructor'"):c.static&&q(c,"prototype")&&this.raise(c.key.start,"Classes can't have a static field named 'prototype'"),this.eat(N.eq)){var C=this.currentThisScope(),u=C.inClassFieldInit;C.inClassFieldInit=!0,c.value=this.parseMaybeAssign(),C.inClassFieldInit=u}else c.value=null;return this.semicolon(),this.finishNode(c,"PropertyDefinition")},w.parseClassStaticBlock=function(c){c.body=[];var C=this.labels;for(this.labels=[],this.enterScope(fe|on);this.type!==N.braceR;){var u=this.parseStatement(null);c.body.push(u)}return this.next(),this.exitScope(),this.labels=C,this.finishNode(c,"StaticBlock")},w.parseClassId=function(c,C){this.type===N.name?(c.id=this.parseIdent(),C&&this.checkLValSimple(c.id,tt,!1)):(C===!0&&this.unexpected(),c.id=null)},w.parseClassSuper=function(c){c.superClass=this.eat(N._extends)?this.parseExprSubscripts(null,!1):null},w.enterClassBody=function(){var c={declared:Object.create(null),used:[]};return this.privateNameStack.push(c),c.declared},w.exitClassBody=function(){var c=this.privateNameStack.pop(),C=c.declared,u=c.used;if(this.options.checkPrivateFields)for(var m=this.privateNameStack.length,v=m===0?null:this.privateNameStack[m-1],E=0;E<u.length;++E){var R=u[E];Qe(C,R.name)||(v?v.used.push(R):this.raiseRecoverable(R.start,"Private field '#"+R.name+"' must be declared in an enclosing class"))}};function F(c,C){var u=C.key.name,m=c[u],v="true";return C.type==="MethodDefinition"&&(C.kind==="get"||C.kind==="set")&&(v=(C.static?"s":"i")+C.kind),m==="iget"&&v==="iset"||m==="iset"&&v==="iget"||m==="sget"&&v==="sset"||m==="sset"&&v==="sget"?(c[u]="true",!1):m?!0:(c[u]=v,!1)}function q(c,C){var u=c.computed,m=c.key;return!u&&(m.type==="Identifier"&&m.name===C||m.type==="Literal"&&m.value===C)}w.parseExportAllDeclaration=function(c,C){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(c.exported=this.parseModuleExportName(),this.checkExport(C,c.exported,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==N.string&&this.unexpected(),c.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(c.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(c,"ExportAllDeclaration")},w.parseExport=function(c,C){if(this.next(),this.eat(N.star))return this.parseExportAllDeclaration(c,C);if(this.eat(N._default))return this.checkExport(C,"default",this.lastTokStart),c.declaration=this.parseExportDefaultDeclaration(),this.finishNode(c,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())c.declaration=this.parseExportDeclaration(c),c.declaration.type==="VariableDeclaration"?this.checkVariableExport(C,c.declaration.declarations):this.checkExport(C,c.declaration.id,c.declaration.id.start),c.specifiers=[],c.source=null;else{if(c.declaration=null,c.specifiers=this.parseExportSpecifiers(C),this.eatContextual("from"))this.type!==N.string&&this.unexpected(),c.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(c.attributes=this.parseWithClause());else{for(var u=0,m=c.specifiers;u<m.length;u+=1){var v=m[u];this.checkUnreserved(v.local),this.checkLocalExport(v.local),v.local.type==="Literal"&&this.raise(v.local.start,"A string literal cannot be used as an exported binding without `from`.")}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")},w.parseExportDeclaration=function(c){return this.parseStatement(null)},w.parseExportDefaultDeclaration=function(){var c;if(this.type===N._function||(c=this.isAsyncFunction())){var C=this.startNode();return this.next(),c&&this.next(),this.parseFunction(C,B|U,!1,c)}else if(this.type===N._class){var u=this.startNode();return this.parseClass(u,"nullableID")}else{var m=this.parseMaybeAssign();return this.semicolon(),m}},w.checkExport=function(c,C,u){c&&(typeof C!="string"&&(C=C.type==="Identifier"?C.name:C.value),Qe(c,C)&&this.raiseRecoverable(u,"Duplicate export '"+C+"'"),c[C]=!0)},w.checkPatternExport=function(c,C){var u=C.type;if(u==="Identifier")this.checkExport(c,C,C.start);else if(u==="ObjectPattern")for(var m=0,v=C.properties;m<v.length;m+=1){var E=v[m];this.checkPatternExport(c,E)}else if(u==="ArrayPattern")for(var R=0,Y=C.elements;R<Y.length;R+=1){var ee=Y[R];ee&&this.checkPatternExport(c,ee)}else u==="Property"?this.checkPatternExport(c,C.value):u==="AssignmentPattern"?this.checkPatternExport(c,C.left):u==="RestElement"&&this.checkPatternExport(c,C.argument)},w.checkVariableExport=function(c,C){if(c)for(var u=0,m=C;u<m.length;u+=1){var v=m[u];this.checkPatternExport(c,v.id)}},w.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},w.parseExportSpecifier=function(c){var C=this.startNode();return C.local=this.parseModuleExportName(),C.exported=this.eatContextual("as")?this.parseModuleExportName():C.local,this.checkExport(c,C.exported,C.exported.start),this.finishNode(C,"ExportSpecifier")},w.parseExportSpecifiers=function(c){var C=[],u=!0;for(this.expect(N.braceL);!this.eat(N.braceR);){if(u)u=!1;else if(this.expect(N.comma),this.afterTrailingComma(N.braceR))break;C.push(this.parseExportSpecifier(c))}return C},w.parseImport=function(c){return this.next(),this.type===N.string?(c.specifiers=k,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===N.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(c.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(c,"ImportDeclaration")},w.parseImportSpecifier=function(){var c=this.startNode();return c.imported=this.parseModuleExportName(),this.eatContextual("as")?c.local=this.parseIdent():(this.checkUnreserved(c.imported),c.local=c.imported),this.checkLValSimple(c.local,tt),this.finishNode(c,"ImportSpecifier")},w.parseImportDefaultSpecifier=function(){var c=this.startNode();return c.local=this.parseIdent(),this.checkLValSimple(c.local,tt),this.finishNode(c,"ImportDefaultSpecifier")},w.parseImportNamespaceSpecifier=function(){var c=this.startNode();return this.next(),this.expectContextual("as"),c.local=this.parseIdent(),this.checkLValSimple(c.local,tt),this.finishNode(c,"ImportNamespaceSpecifier")},w.parseImportSpecifiers=function(){var c=[],C=!0;if(this.type===N.name&&(c.push(this.parseImportDefaultSpecifier()),!this.eat(N.comma)))return c;if(this.type===N.star)return c.push(this.parseImportNamespaceSpecifier()),c;for(this.expect(N.braceL);!this.eat(N.braceR);){if(C)C=!1;else if(this.expect(N.comma),this.afterTrailingComma(N.braceR))break;c.push(this.parseImportSpecifier())}return c},w.parseWithClause=function(){var c=[];if(!this.eat(N._with))return c;this.expect(N.braceL);for(var C={},u=!0;!this.eat(N.braceR);){if(u)u=!1;else if(this.expect(N.comma),this.afterTrailingComma(N.braceR))break;var m=this.parseImportAttribute(),v=m.key.type==="Identifier"?m.key.name:m.key.value;Qe(C,v)&&this.raiseRecoverable(m.key.start,"Duplicate attribute key '"+v+"'"),C[v]=!0,c.push(m)}return c},w.parseImportAttribute=function(){var c=this.startNode();return c.key=this.type===N.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(N.colon),this.type!==N.string&&this.unexpected(),c.value=this.parseExprAtom(),this.finishNode(c,"ImportAttribute")},w.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===N.string){var c=this.parseLiteral(this.value);return Et.test(c.value)&&this.raise(c.start,"An export name cannot include a lone surrogate."),c}return this.parseIdent(!0)},w.adaptDirectivePrologue=function(c){for(var C=0;C<c.length&&this.isDirectiveCandidate(c[C]);++C)c[C].directive=c[C].expression.raw.slice(1,-1)},w.isDirectiveCandidate=function(c){return this.options.ecmaVersion>=5&&c.type==="ExpressionStatement"&&c.expression.type==="Literal"&&typeof c.expression.value=="string"&&(this.input[c.start]==='"'||this.input[c.start]==="'")};var $=a.prototype;$.toAssignable=function(c,C,u){if(this.options.ecmaVersion>=6&&c)switch(c.type){case"Identifier":this.inAsync&&c.name==="await"&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":c.type="ObjectPattern",u&&this.checkPatternErrors(u,!0);for(var m=0,v=c.properties;m<v.length;m+=1){var E=v[m];this.toAssignable(E,C),E.type==="RestElement"&&(E.argument.type==="ArrayPattern"||E.argument.type==="ObjectPattern")&&this.raise(E.argument.start,"Unexpected token")}break;case"Property":c.kind!=="init"&&this.raise(c.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(c.value,C);break;case"ArrayExpression":c.type="ArrayPattern",u&&this.checkPatternErrors(u,!0),this.toAssignableList(c.elements,C);break;case"SpreadElement":c.type="RestElement",this.toAssignable(c.argument,C),c.argument.type==="AssignmentPattern"&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":c.operator!=="="&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value."),c.type="AssignmentPattern",delete c.operator,this.toAssignable(c.left,C);break;case"ParenthesizedExpression":this.toAssignable(c.expression,C,u);break;case"ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!C)break;default:this.raise(c.start,"Assigning to rvalue")}else u&&this.checkPatternErrors(u,!0);return c},$.toAssignableList=function(c,C){for(var u=c.length,m=0;m<u;m++){var v=c[m];v&&this.toAssignable(v,C)}if(u){var E=c[u-1];this.options.ecmaVersion===6&&C&&E&&E.type==="RestElement"&&E.argument.type!=="Identifier"&&this.unexpected(E.argument.start)}return c},$.parseSpread=function(c){var C=this.startNode();return this.next(),C.argument=this.parseMaybeAssign(!1,c),this.finishNode(C,"SpreadElement")},$.parseRestBinding=function(){var c=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==N.name&&this.unexpected(),c.argument=this.parseBindingAtom(),this.finishNode(c,"RestElement")},$.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case N.bracketL:var c=this.startNode();return this.next(),c.elements=this.parseBindingList(N.bracketR,!0,!0),this.finishNode(c,"ArrayPattern");case N.braceL:return this.parseObj(!0)}return this.parseIdent()},$.parseBindingList=function(c,C,u,m){for(var v=[],E=!0;!this.eat(c);)if(E?E=!1:this.expect(N.comma),C&&this.type===N.comma)v.push(null);else{if(u&&this.afterTrailingComma(c))break;if(this.type===N.ellipsis){var R=this.parseRestBinding();this.parseBindingListItem(R),v.push(R),this.type===N.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(c);break}else v.push(this.parseAssignableListItem(m))}return v},$.parseAssignableListItem=function(c){var C=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(C),C},$.parseBindingListItem=function(c){return c},$.parseMaybeDefault=function(c,C,u){if(u=u||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(N.eq))return u;var m=this.startNodeAt(c,C);return m.left=u,m.right=this.parseMaybeAssign(),this.finishNode(m,"AssignmentPattern")},$.checkLValSimple=function(c,C,u){C===void 0&&(C=De);var m=C!==De;switch(c.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(m?"Binding ":"Assigning to ")+c.name+" in strict mode"),m&&(C===tt&&c.name==="let"&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),u&&(Qe(u,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),u[c.name]=!0),C!==Jt&&this.declareName(c.name,C,c.start));break;case"ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":m&&this.raiseRecoverable(c.start,"Binding member expression");break;case"ParenthesizedExpression":return m&&this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,C,u);default:this.raise(c.start,(m?"Binding":"Assigning to")+" rvalue")}},$.checkLValPattern=function(c,C,u){switch(C===void 0&&(C=De),c.type){case"ObjectPattern":for(var m=0,v=c.properties;m<v.length;m+=1){var E=v[m];this.checkLValInnerPattern(E,C,u)}break;case"ArrayPattern":for(var R=0,Y=c.elements;R<Y.length;R+=1){var ee=Y[R];ee&&this.checkLValInnerPattern(ee,C,u)}break;default:this.checkLValSimple(c,C,u)}},$.checkLValInnerPattern=function(c,C,u){switch(C===void 0&&(C=De),c.type){case"Property":this.checkLValInnerPattern(c.value,C,u);break;case"AssignmentPattern":this.checkLValPattern(c.left,C,u);break;case"RestElement":this.checkLValPattern(c.argument,C,u);break;default:this.checkLValPattern(c,C,u)}};var X=function(C,u,m,v,E){this.token=C,this.isExpr=!!u,this.preserveSpace=!!m,this.override=v,this.generator=!!E},Z={b_stat:new X("{",!1),b_expr:new X("{",!0),b_tmpl:new X("${",!1),p_stat:new X("(",!1),p_expr:new X("(",!0),q_tmpl:new X("`",!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new X("function",!1),f_expr:new X("function",!0),f_expr_gen:new X("function",!0,!1,null,!0),f_gen:new X("function",!1,!1,null,!0)},K=a.prototype;K.initialContext=function(){return[Z.b_stat]},K.curContext=function(){return this.context[this.context.length-1]},K.braceIsBlock=function(c){var C=this.curContext();return C===Z.f_expr||C===Z.f_stat?!0:c===N.colon&&(C===Z.b_stat||C===Z.b_expr)?!C.isExpr:c===N._return||c===N.name&&this.exprAllowed?Ie.test(this.input.slice(this.lastTokEnd,this.start)):c===N._else||c===N.semi||c===N.eof||c===N.parenR||c===N.arrow?!0:c===N.braceL?C===Z.b_stat:c===N._var||c===N._const||c===N.name?!1:!this.exprAllowed},K.inGeneratorContext=function(){for(var c=this.context.length-1;c>=1;c--){var C=this.context[c];if(C.token==="function")return C.generator}return!1},K.updateContext=function(c){var C,u=this.type;u.keyword&&c===N.dot?this.exprAllowed=!1:(C=u.updateContext)?C.call(this,c):this.exprAllowed=u.beforeExpr},K.overrideContext=function(c){this.curContext()!==c&&(this.context[this.context.length-1]=c)},N.parenR.updateContext=N.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var c=this.context.pop();c===Z.b_stat&&this.curContext().token==="function"&&(c=this.context.pop()),this.exprAllowed=!c.isExpr},N.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?Z.b_stat:Z.b_expr),this.exprAllowed=!0},N.dollarBraceL.updateContext=function(){this.context.push(Z.b_tmpl),this.exprAllowed=!0},N.parenL.updateContext=function(c){var C=c===N._if||c===N._for||c===N._with||c===N._while;this.context.push(C?Z.p_stat:Z.p_expr),this.exprAllowed=!0},N.incDec.updateContext=function(){},N._function.updateContext=N._class.updateContext=function(c){c.beforeExpr&&c!==N._else&&!(c===N.semi&&this.curContext()!==Z.p_stat)&&!(c===N._return&&Ie.test(this.input.slice(this.lastTokEnd,this.start)))&&!((c===N.colon||c===N.braceL)&&this.curContext()===Z.b_stat)?this.context.push(Z.f_expr):this.context.push(Z.f_stat),this.exprAllowed=!1},N.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},N.backQuote.updateContext=function(){this.curContext()===Z.q_tmpl?this.context.pop():this.context.push(Z.q_tmpl),this.exprAllowed=!1},N.star.updateContext=function(c){if(c===N._function){var C=this.context.length-1;this.context[C]===Z.f_expr?this.context[C]=Z.f_expr_gen:this.context[C]=Z.f_gen}this.exprAllowed=!0},N.name.updateContext=function(c){var C=!1;this.options.ecmaVersion>=6&&c!==N.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(C=!0),this.exprAllowed=C};var W=a.prototype;W.checkPropClash=function(c,C,u){if(!(this.options.ecmaVersion>=9&&c.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(c.computed||c.method||c.shorthand))){var m=c.key,v;switch(m.type){case"Identifier":v=m.name;break;case"Literal":v=String(m.value);break;default:return}var E=c.kind;if(this.options.ecmaVersion>=6){v==="__proto__"&&E==="init"&&(C.proto&&(u?u.doubleProto<0&&(u.doubleProto=m.start):this.raiseRecoverable(m.start,"Redefinition of __proto__ property")),C.proto=!0);return}v="$"+v;var R=C[v];if(R){var Y;E==="init"?Y=this.strict&&R.init||R.get||R.set:Y=R.init||R[E],Y&&this.raiseRecoverable(m.start,"Redefinition of property")}else R=C[v]={init:!1,get:!1,set:!1};R[E]=!0}},W.parseExpression=function(c,C){var u=this.start,m=this.startLoc,v=this.parseMaybeAssign(c,C);if(this.type===N.comma){var E=this.startNodeAt(u,m);for(E.expressions=[v];this.eat(N.comma);)E.expressions.push(this.parseMaybeAssign(c,C));return this.finishNode(E,"SequenceExpression")}return v},W.parseMaybeAssign=function(c,C,u){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var m=!1,v=-1,E=-1,R=-1;C?(v=C.parenthesizedAssign,E=C.trailingComma,R=C.doubleProto,C.parenthesizedAssign=C.trailingComma=-1):(C=new b,m=!0);var Y=this.start,ee=this.startLoc;(this.type===N.parenL||this.type===N.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=c==="await");var _e=this.parseMaybeConditional(c,C);if(u&&(_e=u.call(this,_e,Y,ee)),this.type.isAssign){var xe=this.startNodeAt(Y,ee);return xe.operator=this.value,this.type===N.eq&&(_e=this.toAssignable(_e,!1,C)),m||(C.parenthesizedAssign=C.trailingComma=C.doubleProto=-1),C.shorthandAssign>=_e.start&&(C.shorthandAssign=-1),this.type===N.eq?this.checkLValPattern(_e):this.checkLValSimple(_e),xe.left=_e,this.next(),xe.right=this.parseMaybeAssign(c),R>-1&&(C.doubleProto=R),this.finishNode(xe,"AssignmentExpression")}else m&&this.checkExpressionErrors(C,!0);return v>-1&&(C.parenthesizedAssign=v),E>-1&&(C.trailingComma=E),_e},W.parseMaybeConditional=function(c,C){var u=this.start,m=this.startLoc,v=this.parseExprOps(c,C);if(this.checkExpressionErrors(C))return v;if(this.eat(N.question)){var E=this.startNodeAt(u,m);return E.test=v,E.consequent=this.parseMaybeAssign(),this.expect(N.colon),E.alternate=this.parseMaybeAssign(c),this.finishNode(E,"ConditionalExpression")}return v},W.parseExprOps=function(c,C){var u=this.start,m=this.startLoc,v=this.parseMaybeUnary(C,!1,!1,c);return this.checkExpressionErrors(C)||v.start===u&&v.type==="ArrowFunctionExpression"?v:this.parseExprOp(v,u,m,-1,c)},W.parseExprOp=function(c,C,u,m,v){var E=this.type.binop;if(E!=null&&(!v||this.type!==N._in)&&E>m){var R=this.type===N.logicalOR||this.type===N.logicalAND,Y=this.type===N.coalesce;Y&&(E=N.logicalAND.binop);var ee=this.value;this.next();var _e=this.start,xe=this.startLoc,ze=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,v),_e,xe,E,v),Fe=this.buildBinary(C,u,c,ze,ee,R||Y);return(R&&this.type===N.coalesce||Y&&(this.type===N.logicalOR||this.type===N.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Fe,C,u,m,v)}return c},W.buildBinary=function(c,C,u,m,v,E){m.type==="PrivateIdentifier"&&this.raise(m.start,"Private identifier can only be left side of binary expression");var R=this.startNodeAt(c,C);return R.left=u,R.operator=v,R.right=m,this.finishNode(R,E?"LogicalExpression":"BinaryExpression")},W.parseMaybeUnary=function(c,C,u,m){var v=this.start,E=this.startLoc,R;if(this.isContextual("await")&&this.canAwait)R=this.parseAwait(m),C=!0;else if(this.type.prefix){var Y=this.startNode(),ee=this.type===N.incDec;Y.operator=this.value,Y.prefix=!0,this.next(),Y.argument=this.parseMaybeUnary(null,!0,ee,m),this.checkExpressionErrors(c,!0),ee?this.checkLValSimple(Y.argument):this.strict&&Y.operator==="delete"&&O(Y.argument)?this.raiseRecoverable(Y.start,"Deleting local variable in strict mode"):Y.operator==="delete"&&j(Y.argument)?this.raiseRecoverable(Y.start,"Private fields can not be deleted"):C=!0,R=this.finishNode(Y,ee?"UpdateExpression":"UnaryExpression")}else if(!C&&this.type===N.privateId)(m||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),R=this.parsePrivateIdent(),this.type!==N._in&&this.unexpected();else{if(R=this.parseExprSubscripts(c,m),this.checkExpressionErrors(c))return R;for(;this.type.postfix&&!this.canInsertSemicolon();){var _e=this.startNodeAt(v,E);_e.operator=this.value,_e.prefix=!1,_e.argument=R,this.checkLValSimple(R),this.next(),R=this.finishNode(_e,"UpdateExpression")}}if(!u&&this.eat(N.starstar))if(C)this.unexpected(this.lastTokStart);else return this.buildBinary(v,E,R,this.parseMaybeUnary(null,!1,!1,m),"**",!1);else return R};function O(c){return c.type==="Identifier"||c.type==="ParenthesizedExpression"&&O(c.expression)}function j(c){return c.type==="MemberExpression"&&c.property.type==="PrivateIdentifier"||c.type==="ChainExpression"&&j(c.expression)||c.type==="ParenthesizedExpression"&&j(c.expression)}W.parseExprSubscripts=function(c,C){var u=this.start,m=this.startLoc,v=this.parseExprAtom(c,C);if(v.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return v;var E=this.parseSubscripts(v,u,m,!1,C);return c&&E.type==="MemberExpression"&&(c.parenthesizedAssign>=E.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=E.start&&(c.parenthesizedBind=-1),c.trailingComma>=E.start&&(c.trailingComma=-1)),E},W.parseSubscripts=function(c,C,u,m,v){for(var E=this.options.ecmaVersion>=8&&c.type==="Identifier"&&c.name==="async"&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&c.end-c.start===5&&this.potentialArrowAt===c.start,R=!1;;){var Y=this.parseSubscript(c,C,u,m,E,R,v);if(Y.optional&&(R=!0),Y===c||Y.type==="ArrowFunctionExpression"){if(R){var ee=this.startNodeAt(C,u);ee.expression=Y,Y=this.finishNode(ee,"ChainExpression")}return Y}c=Y}},W.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(N.arrow)},W.parseSubscriptAsyncArrow=function(c,C,u,m){return this.parseArrowExpression(this.startNodeAt(c,C),u,!0,m)},W.parseSubscript=function(c,C,u,m,v,E,R){var Y=this.options.ecmaVersion>=11,ee=Y&&this.eat(N.questionDot);m&&ee&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var _e=this.eat(N.bracketL);if(_e||ee&&this.type!==N.parenL&&this.type!==N.backQuote||this.eat(N.dot)){var xe=this.startNodeAt(C,u);xe.object=c,_e?(xe.property=this.parseExpression(),this.expect(N.bracketR)):this.type===N.privateId&&c.type!=="Super"?xe.property=this.parsePrivateIdent():xe.property=this.parseIdent(this.options.allowReserved!=="never"),xe.computed=!!_e,Y&&(xe.optional=ee),c=this.finishNode(xe,"MemberExpression")}else if(!m&&this.eat(N.parenL)){var ze=new b,Fe=this.yieldPos,bt=this.awaitPos,vt=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var kt=this.parseExprList(N.parenR,this.options.ecmaVersion>=8,!1,ze);if(v&&!ee&&this.shouldParseAsyncArrow())return this.checkPatternErrors(ze,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Fe,this.awaitPos=bt,this.awaitIdentPos=vt,this.parseSubscriptAsyncArrow(C,u,kt,R);this.checkExpressionErrors(ze,!0),this.yieldPos=Fe||this.yieldPos,this.awaitPos=bt||this.awaitPos,this.awaitIdentPos=vt||this.awaitIdentPos;var ui=this.startNodeAt(C,u);ui.callee=c,ui.arguments=kt,Y&&(ui.optional=ee),c=this.finishNode(ui,"CallExpression")}else if(this.type===N.backQuote){(ee||E)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var ni=this.startNodeAt(C,u);ni.tag=c,ni.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(ni,"TaggedTemplateExpression")}return c},W.parseExprAtom=function(c,C,u){this.type===N.slash&&this.readRegexp();var m,v=this.potentialArrowAt===this.start;switch(this.type){case N._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),m=this.startNode(),this.next(),this.type===N.parenL&&!this.allowDirectSuper&&this.raise(m.start,"super() call outside constructor of a subclass"),this.type!==N.dot&&this.type!==N.bracketL&&this.type!==N.parenL&&this.unexpected(),this.finishNode(m,"Super");case N._this:return m=this.startNode(),this.next(),this.finishNode(m,"ThisExpression");case N.name:var E=this.start,R=this.startLoc,Y=this.containsEsc,ee=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Y&&ee.name==="async"&&!this.canInsertSemicolon()&&this.eat(N._function))return this.overrideContext(Z.f_expr),this.parseFunction(this.startNodeAt(E,R),0,!1,!0,C);if(v&&!this.canInsertSemicolon()){if(this.eat(N.arrow))return this.parseArrowExpression(this.startNodeAt(E,R),[ee],!1,C);if(this.options.ecmaVersion>=8&&ee.name==="async"&&this.type===N.name&&!Y&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return ee=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(N.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(E,R),[ee],!0,C)}return ee;case N.regexp:var _e=this.value;return m=this.parseLiteral(_e.value),m.regex={pattern:_e.pattern,flags:_e.flags},m;case N.num:case N.string:return this.parseLiteral(this.value);case N._null:case N._true:case N._false:return m=this.startNode(),m.value=this.type===N._null?null:this.type===N._true,m.raw=this.type.keyword,this.next(),this.finishNode(m,"Literal");case N.parenL:var xe=this.start,ze=this.parseParenAndDistinguishExpression(v,C);return c&&(c.parenthesizedAssign<0&&!this.isSimpleAssignTarget(ze)&&(c.parenthesizedAssign=xe),c.parenthesizedBind<0&&(c.parenthesizedBind=xe)),ze;case N.bracketL:return m=this.startNode(),this.next(),m.elements=this.parseExprList(N.bracketR,!0,!0,c),this.finishNode(m,"ArrayExpression");case N.braceL:return this.overrideContext(Z.b_expr),this.parseObj(!1,c);case N._function:return m=this.startNode(),this.next(),this.parseFunction(m,0);case N._class:return this.parseClass(this.startNode(),!1);case N._new:return this.parseNew();case N.backQuote:return this.parseTemplate();case N._import:return this.options.ecmaVersion>=11?this.parseExprImport(u):this.unexpected();default:return this.parseExprAtomDefault()}},W.parseExprAtomDefault=function(){this.unexpected()},W.parseExprImport=function(c){var C=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===N.parenL&&!c)return this.parseDynamicImport(C);if(this.type===N.dot){var u=this.startNodeAt(C.start,C.loc&&C.loc.start);return u.name="import",C.meta=this.finishNode(u,"Identifier"),this.parseImportMeta(C)}else this.unexpected()},W.parseDynamicImport=function(c){if(this.next(),c.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(N.parenR)?c.options=null:(this.expect(N.comma),this.afterTrailingComma(N.parenR)?c.options=null:(c.options=this.parseMaybeAssign(),this.eat(N.parenR)||(this.expect(N.comma),this.afterTrailingComma(N.parenR)||this.unexpected())));else if(!this.eat(N.parenR)){var C=this.start;this.eat(N.comma)&&this.eat(N.parenR)?this.raiseRecoverable(C,"Trailing comma is not allowed in import()"):this.unexpected(C)}return this.finishNode(c,"ImportExpression")},W.parseImportMeta=function(c){this.next();var C=this.containsEsc;return c.property=this.parseIdent(!0),c.property.name!=="meta"&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'"),C&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module"),this.finishNode(c,"MetaProperty")},W.parseLiteral=function(c){var C=this.startNode();return C.value=c,C.raw=this.input.slice(this.start,this.end),C.raw.charCodeAt(C.raw.length-1)===110&&(C.bigint=C.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(C,"Literal")},W.parseParenExpression=function(){this.expect(N.parenL);var c=this.parseExpression();return this.expect(N.parenR),c},W.shouldParseArrow=function(c){return!this.canInsertSemicolon()},W.parseParenAndDistinguishExpression=function(c,C){var u=this.start,m=this.startLoc,v,E=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var R=this.start,Y=this.startLoc,ee=[],_e=!0,xe=!1,ze=new b,Fe=this.yieldPos,bt=this.awaitPos,vt;for(this.yieldPos=0,this.awaitPos=0;this.type!==N.parenR;)if(_e?_e=!1:this.expect(N.comma),E&&this.afterTrailingComma(N.parenR,!0)){xe=!0;break}else if(this.type===N.ellipsis){vt=this.start,ee.push(this.parseParenItem(this.parseRestBinding())),this.type===N.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else ee.push(this.parseMaybeAssign(!1,ze,this.parseParenItem));var kt=this.lastTokEnd,ui=this.lastTokEndLoc;if(this.expect(N.parenR),c&&this.shouldParseArrow(ee)&&this.eat(N.arrow))return this.checkPatternErrors(ze,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Fe,this.awaitPos=bt,this.parseParenArrowList(u,m,ee,C);(!ee.length||xe)&&this.unexpected(this.lastTokStart),vt&&this.unexpected(vt),this.checkExpressionErrors(ze,!0),this.yieldPos=Fe||this.yieldPos,this.awaitPos=bt||this.awaitPos,ee.length>1?(v=this.startNodeAt(R,Y),v.expressions=ee,this.finishNodeAt(v,"SequenceExpression",kt,ui)):v=ee[0]}else v=this.parseParenExpression();if(this.options.preserveParens){var ni=this.startNodeAt(u,m);return ni.expression=v,this.finishNode(ni,"ParenthesizedExpression")}else return v},W.parseParenItem=function(c){return c},W.parseParenArrowList=function(c,C,u,m){return this.parseArrowExpression(this.startNodeAt(c,C),u,!1,m)};var te=[];W.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===N.dot){var C=this.startNodeAt(c.start,c.loc&&c.loc.start);C.name="new",c.meta=this.finishNode(C,"Identifier"),this.next();var u=this.containsEsc;return c.property=this.parseIdent(!0),c.property.name!=="target"&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),u&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(c.start,"'new.target' can only be used in functions and class static block"),this.finishNode(c,"MetaProperty")}var m=this.start,v=this.startLoc;return c.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),m,v,!0,!1),this.eat(N.parenL)?c.arguments=this.parseExprList(N.parenR,this.options.ecmaVersion>=8,!1):c.arguments=te,this.finishNode(c,"NewExpression")},W.parseTemplateElement=function(c){var C=c.isTagged,u=this.startNode();return this.type===N.invalidTemplate?(C||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),u.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):u.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),u.tail=this.type===N.backQuote,this.finishNode(u,"TemplateElement")},W.parseTemplate=function(c){c===void 0&&(c={});var C=c.isTagged;C===void 0&&(C=!1);var u=this.startNode();this.next(),u.expressions=[];var m=this.parseTemplateElement({isTagged:C});for(u.quasis=[m];!m.tail;)this.type===N.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(N.dollarBraceL),u.expressions.push(this.parseExpression()),this.expect(N.braceR),u.quasis.push(m=this.parseTemplateElement({isTagged:C}));return this.next(),this.finishNode(u,"TemplateLiteral")},W.isAsyncProp=function(c){return!c.computed&&c.key.type==="Identifier"&&c.key.name==="async"&&(this.type===N.name||this.type===N.num||this.type===N.string||this.type===N.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===N.star)&&!Ie.test(this.input.slice(this.lastTokEnd,this.start))},W.parseObj=function(c,C){var u=this.startNode(),m=!0,v={};for(u.properties=[],this.next();!this.eat(N.braceR);){if(m)m=!1;else if(this.expect(N.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(N.braceR))break;var E=this.parseProperty(c,C);c||this.checkPropClash(E,v,C),u.properties.push(E)}return this.finishNode(u,c?"ObjectPattern":"ObjectExpression")},W.parseProperty=function(c,C){var u=this.startNode(),m,v,E,R;if(this.options.ecmaVersion>=9&&this.eat(N.ellipsis))return c?(u.argument=this.parseIdent(!1),this.type===N.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(u,"RestElement")):(u.argument=this.parseMaybeAssign(!1,C),this.type===N.comma&&C&&C.trailingComma<0&&(C.trailingComma=this.start),this.finishNode(u,"SpreadElement"));this.options.ecmaVersion>=6&&(u.method=!1,u.shorthand=!1,(c||C)&&(E=this.start,R=this.startLoc),c||(m=this.eat(N.star)));var Y=this.containsEsc;return this.parsePropertyName(u),!c&&!Y&&this.options.ecmaVersion>=8&&!m&&this.isAsyncProp(u)?(v=!0,m=this.options.ecmaVersion>=9&&this.eat(N.star),this.parsePropertyName(u)):v=!1,this.parsePropertyValue(u,c,m,v,E,R,C,Y),this.finishNode(u,"Property")},W.parseGetterSetter=function(c){c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1);var C=c.kind==="get"?0:1;if(c.value.params.length!==C){var u=c.value.start;c.kind==="get"?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else c.kind==="set"&&c.value.params[0].type==="RestElement"&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params")},W.parsePropertyValue=function(c,C,u,m,v,E,R,Y){(u||m)&&this.type===N.colon&&this.unexpected(),this.eat(N.colon)?(c.value=C?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,R),c.kind="init"):this.options.ecmaVersion>=6&&this.type===N.parenL?(C&&this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(u,m)):!C&&!Y&&this.options.ecmaVersion>=5&&!c.computed&&c.key.type==="Identifier"&&(c.key.name==="get"||c.key.name==="set")&&this.type!==N.comma&&this.type!==N.braceR&&this.type!==N.eq?((u||m)&&this.unexpected(),this.parseGetterSetter(c)):this.options.ecmaVersion>=6&&!c.computed&&c.key.type==="Identifier"?((u||m)&&this.unexpected(),this.checkUnreserved(c.key),c.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=v),c.kind="init",C?c.value=this.parseMaybeDefault(v,E,this.copyNode(c.key)):this.type===N.eq&&R?(R.shorthandAssign<0&&(R.shorthandAssign=this.start),c.value=this.parseMaybeDefault(v,E,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected()},W.parsePropertyName=function(c){if(this.options.ecmaVersion>=6){if(this.eat(N.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(N.bracketR),c.key;c.computed=!1}return c.key=this.type===N.num||this.type===N.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},W.initFunction=function(c){c.id=null,this.options.ecmaVersion>=6&&(c.generator=c.expression=!1),this.options.ecmaVersion>=8&&(c.async=!1)},W.parseMethod=function(c,C,u){var m=this.startNode(),v=this.yieldPos,E=this.awaitPos,R=this.awaitIdentPos;return this.initFunction(m),this.options.ecmaVersion>=6&&(m.generator=c),this.options.ecmaVersion>=8&&(m.async=!!C),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(we(C,m.generator)|on|(u?P:0)),this.expect(N.parenL),m.params=this.parseBindingList(N.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(m,!1,!0,!1),this.yieldPos=v,this.awaitPos=E,this.awaitIdentPos=R,this.finishNode(m,"FunctionExpression")},W.parseArrowExpression=function(c,C,u,m){var v=this.yieldPos,E=this.awaitPos,R=this.awaitIdentPos;return this.enterScope(we(u,!1)|Zs),this.initFunction(c),this.options.ecmaVersion>=8&&(c.async=!!u),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,c.params=this.toAssignableList(C,!0),this.parseFunctionBody(c,!0,!1,m),this.yieldPos=v,this.awaitPos=E,this.awaitIdentPos=R,this.finishNode(c,"ArrowFunctionExpression")},W.parseFunctionBody=function(c,C,u,m){var v=C&&this.type!==N.braceL,E=this.strict,R=!1;if(v)c.body=this.parseMaybeAssign(m),c.expression=!0,this.checkParams(c,!1);else{var Y=this.options.ecmaVersion>=7&&!this.isSimpleParamList(c.params);(!E||Y)&&(R=this.strictDirective(this.end),R&&Y&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var ee=this.labels;this.labels=[],R&&(this.strict=!0),this.checkParams(c,!E&&!R&&!C&&!u&&this.isSimpleParamList(c.params)),this.strict&&c.id&&this.checkLValSimple(c.id,Jt),c.body=this.parseBlock(!1,void 0,R&&!E),c.expression=!1,this.adaptDirectivePrologue(c.body.body),this.labels=ee}this.exitScope()},W.isSimpleParamList=function(c){for(var C=0,u=c;C<u.length;C+=1){var m=u[C];if(m.type!=="Identifier")return!1}return!0},W.checkParams=function(c,C){for(var u=Object.create(null),m=0,v=c.params;m<v.length;m+=1){var E=v[m];this.checkLValInnerPattern(E,yt,C?null:u)}},W.parseExprList=function(c,C,u,m){for(var v=[],E=!0;!this.eat(c);){if(E)E=!1;else if(this.expect(N.comma),C&&this.afterTrailingComma(c))break;var R=void 0;u&&this.type===N.comma?R=null:this.type===N.ellipsis?(R=this.parseSpread(m),m&&this.type===N.comma&&m.trailingComma<0&&(m.trailingComma=this.start)):R=this.parseMaybeAssign(!1,m),v.push(R)}return v},W.checkUnreserved=function(c){var C=c.start,u=c.end,m=c.name;if(this.inGenerator&&m==="yield"&&this.raiseRecoverable(C,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&m==="await"&&this.raiseRecoverable(C,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&m==="arguments"&&this.raiseRecoverable(C,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(m==="arguments"||m==="await")&&this.raise(C,"Cannot use "+m+" in class static initialization block"),this.keywords.test(m)&&this.raise(C,"Unexpected keyword '"+m+"'"),!(this.options.ecmaVersion<6&&this.input.slice(C,u).indexOf("\\")!==-1)){var v=this.strict?this.reservedWordsStrict:this.reservedWords;v.test(m)&&(!this.inAsync&&m==="await"&&this.raiseRecoverable(C,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(C,"The keyword '"+m+"' is reserved"))}},W.parseIdent=function(c){var C=this.parseIdentNode();return this.next(!!c),this.finishNode(C,"Identifier"),c||(this.checkUnreserved(C),C.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=C.start)),C},W.parseIdentNode=function(){var c=this.startNode();return this.type===N.name?c.name=this.value:this.type.keyword?(c.name=this.type.keyword,(c.name==="class"||c.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=N.name):this.unexpected(),c},W.parsePrivateIdent=function(){var c=this.startNode();return this.type===N.privateId?c.name=this.value:this.unexpected(),this.next(),this.finishNode(c,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(c.start,"Private field '#"+c.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(c)),c},W.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var C=this.startNode();return this.next(),this.type===N.semi||this.canInsertSemicolon()||this.type!==N.star&&!this.type.startsExpr?(C.delegate=!1,C.argument=null):(C.delegate=this.eat(N.star),C.argument=this.parseMaybeAssign(c)),this.finishNode(C,"YieldExpression")},W.parseAwait=function(c){this.awaitPos||(this.awaitPos=this.start);var C=this.startNode();return this.next(),C.argument=this.parseMaybeUnary(null,!0,!1,c),this.finishNode(C,"AwaitExpression")};var se=a.prototype;se.raise=function(c,C){var u=cs(this.input,c);C+=" ("+u.line+":"+u.column+")";var m=new SyntaxError(C);throw m.pos=c,m.loc=u,m.raisedAt=this.pos,m},se.raiseRecoverable=se.raise,se.curPosition=function(){if(this.options.locations)return new Nt(this.curLine,this.pos-this.lineStart)};var J=a.prototype,de=function(C){this.flags=C,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};J.enterScope=function(c){this.scopeStack.push(new de(c))},J.exitScope=function(){this.scopeStack.pop()},J.treatFunctionsAsVarInScope=function(c){return c.flags&Ei||!this.inModule&&c.flags&ai},J.declareName=function(c,C,u){var m=!1;if(C===tt){var v=this.currentScope();m=v.lexical.indexOf(c)>-1||v.functions.indexOf(c)>-1||v.var.indexOf(c)>-1,v.lexical.push(c),this.inModule&&v.flags&ai&&delete this.undefinedExports[c]}else if(C===Kn){var E=this.currentScope();E.lexical.push(c)}else if(C===lt){var R=this.currentScope();this.treatFunctionsAsVar?m=R.lexical.indexOf(c)>-1:m=R.lexical.indexOf(c)>-1||R.var.indexOf(c)>-1,R.functions.push(c)}else for(var Y=this.scopeStack.length-1;Y>=0;--Y){var ee=this.scopeStack[Y];if(ee.lexical.indexOf(c)>-1&&!(ee.flags&ns&&ee.lexical[0]===c)||!this.treatFunctionsAsVarInScope(ee)&&ee.functions.indexOf(c)>-1){m=!0;break}if(ee.var.push(c),this.inModule&&ee.flags&ai&&delete this.undefinedExports[c],ee.flags&ye)break}m&&this.raiseRecoverable(u,"Identifier '"+c+"' has already been declared")},J.checkLocalExport=function(c){this.scopeStack[0].lexical.indexOf(c.name)===-1&&this.scopeStack[0].var.indexOf(c.name)===-1&&(this.undefinedExports[c.name]=c)},J.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},J.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var C=this.scopeStack[c];if(C.flags&ye)return C}},J.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var C=this.scopeStack[c];if(C.flags&ye&&!(C.flags&Zs))return C}};var me=function(C,u,m){this.type="",this.start=u,this.end=0,C.options.locations&&(this.loc=new Ht(C,m)),C.options.directSourceFile&&(this.sourceFile=C.options.directSourceFile),C.options.ranges&&(this.range=[u,0])},be=a.prototype;be.startNode=function(){return new me(this,this.start,this.startLoc)},be.startNodeAt=function(c,C){return new me(this,c,C)};function Se(c,C,u,m){return c.type=C,c.end=u,this.options.locations&&(c.loc.end=m),this.options.ranges&&(c.range[1]=u),c}be.finishNode=function(c,C){return Se.call(this,c,C,this.lastTokEnd,this.lastTokEndLoc)},be.finishNodeAt=function(c,C,u,m){return Se.call(this,c,C,u,m)},be.copyNode=function(c){var C=new me(this,c.start,this.startLoc);for(var u in c)C[u]=c[u];return C};var ge="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",ve="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ce=ve+" Extended_Pictographic",Be=Ce,Me=Be+" EBase EComp EMod EPres ExtPict",We=Me,dt=We,wt={9:ve,10:Ce,11:Be,12:Me,13:We,14:dt},Dt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Mt={9:"",10:"",11:"",12:"",13:"",14:Dt},et="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",st="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",It=st+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",qt=It+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ot=qt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Qt=Ot+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",$t=Qt+" "+ge,si={9:st,10:It,11:qt,12:Ot,13:Qt,14:$t},gi={};function oi(c){var C=gi[c]={binary:Re(wt[c]+" "+et),binaryOfStrings:Re(Mt[c]),nonBinary:{General_Category:Re(et),Script:Re(si[c])}};C.nonBinary.Script_Extensions=C.nonBinary.Script,C.nonBinary.gc=C.nonBinary.General_Category,C.nonBinary.sc=C.nonBinary.Script,C.nonBinary.scx=C.nonBinary.Script_Extensions}for(var Hs=0,xs=[9,10,11,12,13,14];Hs<xs.length;Hs+=1){var Gs=xs[Hs];oi(Gs)}var xt=a.prototype,Ui=function(C,u){this.parent=C,this.base=u||this};Ui.prototype.separatedFrom=function(C){for(var u=this;u;u=u.parent)for(var m=C;m;m=m.parent)if(u.base===m.base&&u!==m)return!0;return!1},Ui.prototype.sibling=function(){return new Ui(this.parent,this.base)};var rs=function(C){this.parser=C,this.validFlags="gim"+(C.options.ecmaVersion>=6?"uy":"")+(C.options.ecmaVersion>=9?"s":"")+(C.options.ecmaVersion>=13?"d":"")+(C.options.ecmaVersion>=15?"v":""),this.unicodeProperties=gi[C.options.ecmaVersion>=14?14:C.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};rs.prototype.reset=function(C,u,m){var v=m.indexOf("v")!==-1,E=m.indexOf("u")!==-1;this.start=C|0,this.source=u+"",this.flags=m,v&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=E&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=E&&this.parser.options.ecmaVersion>=9)},rs.prototype.raise=function(C){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+C)},rs.prototype.at=function(C,u){u===void 0&&(u=!1);var m=this.source,v=m.length;if(C>=v)return-1;var E=m.charCodeAt(C);if(!(u||this.switchU)||E<=55295||E>=57344||C+1>=v)return E;var R=m.charCodeAt(C+1);return R>=56320&&R<=57343?(E<<10)+R-56613888:E},rs.prototype.nextIndex=function(C,u){u===void 0&&(u=!1);var m=this.source,v=m.length;if(C>=v)return v;var E=m.charCodeAt(C),R;return!(u||this.switchU)||E<=55295||E>=57344||C+1>=v||(R=m.charCodeAt(C+1))<56320||R>57343?C+1:C+2},rs.prototype.current=function(C){return C===void 0&&(C=!1),this.at(this.pos,C)},rs.prototype.lookahead=function(C){return C===void 0&&(C=!1),this.at(this.nextIndex(this.pos,C),C)},rs.prototype.advance=function(C){C===void 0&&(C=!1),this.pos=this.nextIndex(this.pos,C)},rs.prototype.eat=function(C,u){return u===void 0&&(u=!1),this.current(u)===C?(this.advance(u),!0):!1},rs.prototype.eatChars=function(C,u){u===void 0&&(u=!1);for(var m=this.pos,v=0,E=C;v<E.length;v+=1){var R=E[v],Y=this.at(m,u);if(Y===-1||Y!==R)return!1;m=this.nextIndex(m,u)}return this.pos=m,!0},xt.validateRegExpFlags=function(c){for(var C=c.validFlags,u=c.flags,m=!1,v=!1,E=0;E<u.length;E++){var R=u.charAt(E);C.indexOf(R)===-1&&this.raise(c.start,"Invalid regular expression flag"),u.indexOf(R,E+1)>-1&&this.raise(c.start,"Duplicate regular expression flag"),R==="u"&&(m=!0),R==="v"&&(v=!0)}this.options.ecmaVersion>=15&&m&&v&&this.raise(c.start,"Invalid regular expression flag")};function Nn(c){for(var C in c)return!0;return!1}xt.validateRegExpPattern=function(c){this.regexp_pattern(c),!c.switchN&&this.options.ecmaVersion>=9&&Nn(c.groupNames)&&(c.switchN=!0,this.regexp_pattern(c))},xt.regexp_pattern=function(c){c.pos=0,c.lastIntValue=0,c.lastStringValue="",c.lastAssertionIsQuantifiable=!1,c.numCapturingParens=0,c.maxBackReference=0,c.groupNames=Object.create(null),c.backReferenceNames.length=0,c.branchID=null,this.regexp_disjunction(c),c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets")),c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var C=0,u=c.backReferenceNames;C<u.length;C+=1){var m=u[C];c.groupNames[m]||c.raise("Invalid named capture referenced")}},xt.regexp_disjunction=function(c){var C=this.options.ecmaVersion>=16;for(C&&(c.branchID=new Ui(c.branchID,null)),this.regexp_alternative(c);c.eat(124);)C&&(c.branchID=c.branchID.sibling()),this.regexp_alternative(c);C&&(c.branchID=c.branchID.parent),this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat"),c.eat(123)&&c.raise("Lone quantifier brackets")},xt.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););},xt.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1},xt.regexp_eatAssertion=function(c){var C=c.pos;if(c.lastAssertionIsQuantifiable=!1,c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=C}if(c.eat(40)&&c.eat(63)){var u=!1;if(this.options.ecmaVersion>=9&&(u=c.eat(60)),c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=!u,!0}return c.pos=C,!1},xt.regexp_eatQuantifier=function(c,C){return C===void 0&&(C=!1),this.regexp_eatQuantifierPrefix(c,C)?(c.eat(63),!0):!1},xt.regexp_eatQuantifierPrefix=function(c,C){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,C)},xt.regexp_eatBracedQuantifier=function(c,C){var u=c.pos;if(c.eat(123)){var m=0,v=-1;if(this.regexp_eatDecimalDigits(c)&&(m=c.lastIntValue,c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(v=c.lastIntValue),c.eat(125)))return v!==-1&&v<m&&!C&&c.raise("numbers out of order in {} quantifier"),!0;c.switchU&&!C&&c.raise("Incomplete quantifier"),c.pos=u}return!1},xt.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)},xt.regexp_eatReverseSolidusAtomEscape=function(c){var C=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=C}return!1},xt.regexp_eatUncapturingGroup=function(c){var C=c.pos;if(c.eat(40)){if(c.eat(63)){if(this.options.ecmaVersion>=16){var u=this.regexp_eatModifiers(c),m=c.eat(45);if(u||m){for(var v=0;v<u.length;v++){var E=u.charAt(v);u.indexOf(E,v+1)>-1&&c.raise("Duplicate regular expression modifiers")}if(m){var R=this.regexp_eatModifiers(c);!u&&!R&&c.current()===58&&c.raise("Invalid regular expression modifiers");for(var Y=0;Y<R.length;Y++){var ee=R.charAt(Y);(R.indexOf(ee,Y+1)>-1||u.indexOf(ee)>-1)&&c.raise("Duplicate regular expression modifiers")}}}}if(c.eat(58)){if(this.regexp_disjunction(c),c.eat(41))return!0;c.raise("Unterminated group")}}c.pos=C}return!1},xt.regexp_eatCapturingGroup=function(c){if(c.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(c):c.current()===63&&c.raise("Invalid group"),this.regexp_disjunction(c),c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1},xt.regexp_eatModifiers=function(c){for(var C="",u=0;(u=c.current())!==-1&&Js(u);)C+=at(u),c.advance();return C};function Js(c){return c===105||c===109||c===115}xt.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)},xt.regexp_eatInvalidBracedQuantifier=function(c){return this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat"),!1},xt.regexp_eatSyntaxCharacter=function(c){var C=c.current();return Bn(C)?(c.lastIntValue=C,c.advance(),!0):!1};function Bn(c){return c===36||c>=40&&c<=43||c===46||c===63||c>=91&&c<=94||c>=123&&c<=125}xt.regexp_eatPatternCharacters=function(c){for(var C=c.pos,u=0;(u=c.current())!==-1&&!Bn(u);)c.advance();return c.pos!==C},xt.regexp_eatExtendedPatternCharacter=function(c){var C=c.current();return C!==-1&&C!==36&&!(C>=40&&C<=43)&&C!==46&&C!==63&&C!==91&&C!==94&&C!==124?(c.advance(),!0):!1},xt.regexp_groupSpecifier=function(c){if(c.eat(63)){this.regexp_eatGroupName(c)||c.raise("Invalid group");var C=this.options.ecmaVersion>=16,u=c.groupNames[c.lastStringValue];if(u)if(C)for(var m=0,v=u;m<v.length;m+=1){var E=v[m];E.separatedFrom(c.branchID)||c.raise("Duplicate capture group name")}else c.raise("Duplicate capture group name");C?(u||(c.groupNames[c.lastStringValue]=[])).push(c.branchID):c.groupNames[c.lastStringValue]=!0}},xt.regexp_eatGroupName=function(c){if(c.lastStringValue="",c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&c.eat(62))return!0;c.raise("Invalid capture group name")}return!1},xt.regexp_eatRegExpIdentifierName=function(c){if(c.lastStringValue="",this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=at(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=at(c.lastIntValue);return!0}return!1},xt.regexp_eatRegExpIdentifierStart=function(c){var C=c.pos,u=this.options.ecmaVersion>=11,m=c.current(u);return c.advance(u),m===92&&this.regexp_eatRegExpUnicodeEscapeSequence(c,u)&&(m=c.lastIntValue),yr(m)?(c.lastIntValue=m,!0):(c.pos=C,!1)};function yr(c){return A(c,!0)||c===36||c===95}xt.regexp_eatRegExpIdentifierPart=function(c){var C=c.pos,u=this.options.ecmaVersion>=11,m=c.current(u);return c.advance(u),m===92&&this.regexp_eatRegExpUnicodeEscapeSequence(c,u)&&(m=c.lastIntValue),Un(m)?(c.lastIntValue=m,!0):(c.pos=C,!1)};function Un(c){return Q(c,!0)||c===36||c===95||c===8204||c===8205}xt.regexp_eatAtomEscape=function(c){return this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||c.switchN&&this.regexp_eatKGroupName(c)?!0:(c.switchU&&(c.current()===99&&c.raise("Invalid unicode escape"),c.raise("Invalid escape")),!1)},xt.regexp_eatBackReference=function(c){var C=c.pos;if(this.regexp_eatDecimalEscape(c)){var u=c.lastIntValue;if(c.switchU)return u>c.maxBackReference&&(c.maxBackReference=u),!0;if(u<=c.numCapturingParens)return!0;c.pos=C}return!1},xt.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),!0;c.raise("Invalid named reference")}return!1},xt.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)},xt.regexp_eatCControlLetter=function(c){var C=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=C}return!1},xt.regexp_eatZero=function(c){return c.current()===48&&!_r(c.lookahead())?(c.lastIntValue=0,c.advance(),!0):!1},xt.regexp_eatControlEscape=function(c){var C=c.current();return C===116?(c.lastIntValue=9,c.advance(),!0):C===110?(c.lastIntValue=10,c.advance(),!0):C===118?(c.lastIntValue=11,c.advance(),!0):C===102?(c.lastIntValue=12,c.advance(),!0):C===114?(c.lastIntValue=13,c.advance(),!0):!1},xt.regexp_eatControlLetter=function(c){var C=c.current();return bn(C)?(c.lastIntValue=C%32,c.advance(),!0):!1};function bn(c){return c>=65&&c<=90||c>=97&&c<=122}xt.regexp_eatRegExpUnicodeEscapeSequence=function(c,C){C===void 0&&(C=!1);var u=c.pos,m=C||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){var v=c.lastIntValue;if(m&&v>=55296&&v<=56319){var E=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var R=c.lastIntValue;if(R>=56320&&R<=57343)return c.lastIntValue=(v-55296)*1024+(R-56320)+65536,!0}c.pos=E,c.lastIntValue=v}return!0}if(m&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125)&&Dn(c.lastIntValue))return!0;m&&c.raise("Invalid unicode escape"),c.pos=u}return!1};function Dn(c){return c>=0&&c<=1114111}xt.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var C=c.current();return C!==99&&(!c.switchN||C!==107)?(c.lastIntValue=C,c.advance(),!0):!1},xt.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var C=c.current();if(C>=49&&C<=57){do c.lastIntValue=10*c.lastIntValue+(C-48),c.advance();while((C=c.current())>=48&&C<=57);return!0}return!1};var ln=0,Cs=1,Ps=2;xt.regexp_eatCharacterClassEscape=function(c){var C=c.current();if(Ua(C))return c.lastIntValue=-1,c.advance(),Cs;var u=!1;if(c.switchU&&this.options.ecmaVersion>=9&&((u=C===80)||C===112)){c.lastIntValue=-1,c.advance();var m;if(c.eat(123)&&(m=this.regexp_eatUnicodePropertyValueExpression(c))&&c.eat(125))return u&&m===Ps&&c.raise("Invalid property name"),m;c.raise("Invalid property name")}return ln};function Ua(c){return c===100||c===68||c===115||c===83||c===119||c===87}xt.regexp_eatUnicodePropertyValueExpression=function(c){var C=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var u=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c)){var m=c.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(c,u,m),Cs}}if(c.pos=C,this.regexp_eatLoneUnicodePropertyNameOrValue(c)){var v=c.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(c,v)}return ln},xt.regexp_validateUnicodePropertyNameAndValue=function(c,C,u){Qe(c.unicodeProperties.nonBinary,C)||c.raise("Invalid property name"),c.unicodeProperties.nonBinary[C].test(u)||c.raise("Invalid property value")},xt.regexp_validateUnicodePropertyNameOrValue=function(c,C){if(c.unicodeProperties.binary.test(C))return Cs;if(c.switchV&&c.unicodeProperties.binaryOfStrings.test(C))return Ps;c.raise("Invalid property name")},xt.regexp_eatUnicodePropertyName=function(c){var C=0;for(c.lastStringValue="";Va(C=c.current());)c.lastStringValue+=at(C),c.advance();return c.lastStringValue!==""};function Va(c){return bn(c)||c===95}xt.regexp_eatUnicodePropertyValue=function(c){var C=0;for(c.lastStringValue="";ko(C=c.current());)c.lastStringValue+=at(C),c.advance();return c.lastStringValue!==""};function ko(c){return Va(c)||_r(c)}xt.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)},xt.regexp_eatCharacterClass=function(c){if(c.eat(91)){var C=c.eat(94),u=this.regexp_classContents(c);return c.eat(93)||c.raise("Unterminated character class"),C&&u===Ps&&c.raise("Negated character class may contain strings"),!0}return!1},xt.regexp_classContents=function(c){return c.current()===93?Cs:c.switchV?this.regexp_classSetExpression(c):(this.regexp_nonEmptyClassRanges(c),Cs)},xt.regexp_nonEmptyClassRanges=function(c){for(;this.regexp_eatClassAtom(c);){var C=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var u=c.lastIntValue;c.switchU&&(C===-1||u===-1)&&c.raise("Invalid character class"),C!==-1&&u!==-1&&C>u&&c.raise("Range out of order in character class")}}},xt.regexp_eatClassAtom=function(c){var C=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var u=c.current();(u===99||Kr(u))&&c.raise("Invalid class escape"),c.raise("Invalid escape")}c.pos=C}var m=c.current();return m!==93?(c.lastIntValue=m,c.advance(),!0):!1},xt.regexp_eatClassEscape=function(c){var C=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=C}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)},xt.regexp_classSetExpression=function(c){var C=Cs,u;if(!this.regexp_eatClassSetRange(c))if(u=this.regexp_eatClassSetOperand(c)){u===Ps&&(C=Ps);for(var m=c.pos;c.eatChars([38,38]);){if(c.current()!==38&&(u=this.regexp_eatClassSetOperand(c))){u!==Ps&&(C=Cs);continue}c.raise("Invalid character in character class")}if(m!==c.pos)return C;for(;c.eatChars([45,45]);)this.regexp_eatClassSetOperand(c)||c.raise("Invalid character in character class");if(m!==c.pos)return C}else c.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(c)){if(u=this.regexp_eatClassSetOperand(c),!u)return C;u===Ps&&(C=Ps)}},xt.regexp_eatClassSetRange=function(c){var C=c.pos;if(this.regexp_eatClassSetCharacter(c)){var u=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassSetCharacter(c)){var m=c.lastIntValue;return u!==-1&&m!==-1&&u>m&&c.raise("Range out of order in character class"),!0}c.pos=C}return!1},xt.regexp_eatClassSetOperand=function(c){return this.regexp_eatClassSetCharacter(c)?Cs:this.regexp_eatClassStringDisjunction(c)||this.regexp_eatNestedClass(c)},xt.regexp_eatNestedClass=function(c){var C=c.pos;if(c.eat(91)){var u=c.eat(94),m=this.regexp_classContents(c);if(c.eat(93))return u&&m===Ps&&c.raise("Negated character class may contain strings"),m;c.pos=C}if(c.eat(92)){var v=this.regexp_eatCharacterClassEscape(c);if(v)return v;c.pos=C}return null},xt.regexp_eatClassStringDisjunction=function(c){var C=c.pos;if(c.eatChars([92,113])){if(c.eat(123)){var u=this.regexp_classStringDisjunctionContents(c);if(c.eat(125))return u}else c.raise("Invalid escape");c.pos=C}return null},xt.regexp_classStringDisjunctionContents=function(c){for(var C=this.regexp_classString(c);c.eat(124);)this.regexp_classString(c)===Ps&&(C=Ps);return C},xt.regexp_classString=function(c){for(var C=0;this.regexp_eatClassSetCharacter(c);)C++;return C===1?Cs:Ps},xt.regexp_eatClassSetCharacter=function(c){var C=c.pos;if(c.eat(92))return this.regexp_eatCharacterEscape(c)||this.regexp_eatClassSetReservedPunctuator(c)?!0:c.eat(98)?(c.lastIntValue=8,!0):(c.pos=C,!1);var u=c.current();return u<0||u===c.lookahead()&&io(u)||nl(u)?!1:(c.advance(),c.lastIntValue=u,!0)};function io(c){return c===33||c>=35&&c<=38||c>=42&&c<=44||c===46||c>=58&&c<=64||c===94||c===96||c===126}function nl(c){return c===40||c===41||c===45||c===47||c>=91&&c<=93||c>=123&&c<=125}xt.regexp_eatClassSetReservedPunctuator=function(c){var C=c.current();return Lo(C)?(c.lastIntValue=C,c.advance(),!0):!1};function Lo(c){return c===33||c===35||c===37||c===38||c===44||c===45||c>=58&&c<=62||c===64||c===96||c===126}xt.regexp_eatClassControlLetter=function(c){var C=c.current();return _r(C)||C===95?(c.lastIntValue=C%32,c.advance(),!0):!1},xt.regexp_eatHexEscapeSequence=function(c){var C=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape"),c.pos=C}return!1},xt.regexp_eatDecimalDigits=function(c){var C=c.pos,u=0;for(c.lastIntValue=0;_r(u=c.current());)c.lastIntValue=10*c.lastIntValue+(u-48),c.advance();return c.pos!==C};function _r(c){return c>=48&&c<=57}xt.regexp_eatHexDigits=function(c){var C=c.pos,u=0;for(c.lastIntValue=0;wa(u=c.current());)c.lastIntValue=16*c.lastIntValue+Ar(u),c.advance();return c.pos!==C};function wa(c){return c>=48&&c<=57||c>=65&&c<=70||c>=97&&c<=102}function Ar(c){return c>=65&&c<=70?10+(c-65):c>=97&&c<=102?10+(c-97):c-48}xt.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var C=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var u=c.lastIntValue;C<=3&&this.regexp_eatOctalDigit(c)?c.lastIntValue=C*64+u*8+c.lastIntValue:c.lastIntValue=C*8+u}else c.lastIntValue=C;return!0}return!1},xt.regexp_eatOctalDigit=function(c){var C=c.current();return Kr(C)?(c.lastIntValue=C-48,c.advance(),!0):(c.lastIntValue=0,!1)};function Kr(c){return c>=48&&c<=55}xt.regexp_eatFixedHexDigits=function(c,C){var u=c.pos;c.lastIntValue=0;for(var m=0;m<C;++m){var v=c.current();if(!wa(v))return c.pos=u,!1;c.lastIntValue=16*c.lastIntValue+Ar(v),c.advance()}return!0};var br=function(C){this.type=C.type,this.value=C.value,this.start=C.start,this.end=C.end,C.options.locations&&(this.loc=new Ht(C,C.startLoc,C.endLoc)),C.options.ranges&&(this.range=[C.start,C.end])},di=a.prototype;di.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new br(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},di.getToken=function(){return this.next(),new br(this)},typeof Symbol<"u"&&(di[Symbol.iterator]=function(){var c=this;return{next:function(){var C=c.getToken();return{done:C.type===N.eof,value:C}}}}),di.nextToken=function(){var c=this.curContext();if((!c||!c.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(N.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())},di.readToken=function(c){return A(c,this.options.ecmaVersion>=6)||c===92?this.readWord():this.getTokenFromCode(c)},di.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(c<=55295||c>=56320)return c;var C=this.input.charCodeAt(this.pos+1);return C<=56319||C>=57344?c:(c<<10)+C-56613888},di.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),C=this.pos,u=this.input.indexOf("*/",this.pos+=2);if(u===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=u+2,this.options.locations)for(var m=void 0,v=C;(m=Je(this.input,v,this.pos))>-1;)++this.curLine,v=this.lineStart=m;this.options.onComment&&this.options.onComment(!0,this.input.slice(C+2,u),C,this.pos,c,this.curPosition())},di.skipLineComment=function(c){for(var C=this.pos,u=this.options.onComment&&this.curPosition(),m=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!Ee(m);)m=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(C+c,this.pos),C,this.pos,u,this.curPosition())},di.skipSpace=function(){e:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(c>8&&c<14||c>=5760&&Ge.test(String.fromCharCode(c)))++this.pos;else break e}}},di.finishToken=function(c,C){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var u=this.type;this.type=c,this.value=C,this.updateContext(u)},di.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(c>=48&&c<=57)return this.readNumber(!0);var C=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&c===46&&C===46?(this.pos+=3,this.finishToken(N.ellipsis)):(++this.pos,this.finishToken(N.dot))},di.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):c===61?this.finishOp(N.assign,2):this.finishOp(N.slash,1)},di.readToken_mult_modulo_exp=function(c){var C=this.input.charCodeAt(this.pos+1),u=1,m=c===42?N.star:N.modulo;return this.options.ecmaVersion>=7&&c===42&&C===42&&(++u,m=N.starstar,C=this.input.charCodeAt(this.pos+2)),C===61?this.finishOp(N.assign,u+1):this.finishOp(m,u)},di.readToken_pipe_amp=function(c){var C=this.input.charCodeAt(this.pos+1);if(C===c){if(this.options.ecmaVersion>=12){var u=this.input.charCodeAt(this.pos+2);if(u===61)return this.finishOp(N.assign,3)}return this.finishOp(c===124?N.logicalOR:N.logicalAND,2)}return C===61?this.finishOp(N.assign,2):this.finishOp(c===124?N.bitwiseOR:N.bitwiseAND,1)},di.readToken_caret=function(){var c=this.input.charCodeAt(this.pos+1);return c===61?this.finishOp(N.assign,2):this.finishOp(N.bitwiseXOR,1)},di.readToken_plus_min=function(c){var C=this.input.charCodeAt(this.pos+1);return C===c?C===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ie.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(N.incDec,2):C===61?this.finishOp(N.assign,2):this.finishOp(N.plusMin,1)},di.readToken_lt_gt=function(c){var C=this.input.charCodeAt(this.pos+1),u=1;return C===c?(u=c===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+u)===61?this.finishOp(N.assign,u+1):this.finishOp(N.bitShift,u)):C===33&&c===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(C===61&&(u=2),this.finishOp(N.relational,u))},di.readToken_eq_excl=function(c){var C=this.input.charCodeAt(this.pos+1);return C===61?this.finishOp(N.equality,this.input.charCodeAt(this.pos+2)===61?3:2):c===61&&C===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(N.arrow)):this.finishOp(c===61?N.eq:N.prefix,1)},di.readToken_question=function(){var c=this.options.ecmaVersion;if(c>=11){var C=this.input.charCodeAt(this.pos+1);if(C===46){var u=this.input.charCodeAt(this.pos+2);if(u<48||u>57)return this.finishOp(N.questionDot,2)}if(C===63){if(c>=12){var m=this.input.charCodeAt(this.pos+2);if(m===61)return this.finishOp(N.assign,3)}return this.finishOp(N.coalesce,2)}}return this.finishOp(N.question,1)},di.readToken_numberSign=function(){var c=this.options.ecmaVersion,C=35;if(c>=13&&(++this.pos,C=this.fullCharCodeAtPos(),A(C,!0)||C===92))return this.finishToken(N.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+at(C)+"'")},di.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(N.parenL);case 41:return++this.pos,this.finishToken(N.parenR);case 59:return++this.pos,this.finishToken(N.semi);case 44:return++this.pos,this.finishToken(N.comma);case 91:return++this.pos,this.finishToken(N.bracketL);case 93:return++this.pos,this.finishToken(N.bracketR);case 123:return++this.pos,this.finishToken(N.braceL);case 125:return++this.pos,this.finishToken(N.braceR);case 58:return++this.pos,this.finishToken(N.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(N.backQuote);case 48:var C=this.input.charCodeAt(this.pos+1);if(C===120||C===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(C===111||C===79)return this.readRadixNumber(8);if(C===98||C===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);case 63:return this.readToken_question();case 126:return this.finishOp(N.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+at(c)+"'")},di.finishOp=function(c,C){var u=this.input.slice(this.pos,this.pos+C);return this.pos+=C,this.finishToken(c,u)},di.readRegexp=function(){for(var c,C,u=this.pos;;){this.pos>=this.input.length&&this.raise(u,"Unterminated regular expression");var m=this.input.charAt(this.pos);if(Ie.test(m)&&this.raise(u,"Unterminated regular expression"),c)c=!1;else{if(m==="[")C=!0;else if(m==="]"&&C)C=!1;else if(m==="/"&&!C)break;c=m==="\\"}++this.pos}var v=this.input.slice(u,this.pos);++this.pos;var E=this.pos,R=this.readWord1();this.containsEsc&&this.unexpected(E);var Y=this.regexpState||(this.regexpState=new rs(this));Y.reset(u,v,R),this.validateRegExpFlags(Y),this.validateRegExpPattern(Y);var ee=null;try{ee=new RegExp(v,R)}catch{}return this.finishToken(N.regexp,{pattern:v,flags:R,value:ee})},di.readInt=function(c,C,u){for(var m=this.options.ecmaVersion>=12&&C===void 0,v=u&&this.input.charCodeAt(this.pos)===48,E=this.pos,R=0,Y=0,ee=0,_e=C??1/0;ee<_e;++ee,++this.pos){var xe=this.input.charCodeAt(this.pos),ze=void 0;if(m&&xe===95){v&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Y===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),ee===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Y=xe;continue}if(xe>=97?ze=xe-97+10:xe>=65?ze=xe-65+10:xe>=48&&xe<=57?ze=xe-48:ze=1/0,ze>=c)break;Y=xe,R=R*c+ze}return m&&Y===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===E||C!=null&&this.pos-E!==C?null:R};function ar(c,C){return C?parseInt(c,8):parseFloat(c.replace(/_/g,""))}function hn(c){return typeof BigInt!="function"?null:BigInt(c.replace(/_/g,""))}di.readRadixNumber=function(c){var C=this.pos;this.pos+=2;var u=this.readInt(c);return u==null&&this.raise(this.start+2,"Expected number in radix "+c),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(u=hn(this.input.slice(C,this.pos)),++this.pos):A(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(N.num,u)},di.readNumber=function(c){var C=this.pos;!c&&this.readInt(10,void 0,!0)===null&&this.raise(C,"Invalid number");var u=this.pos-C>=2&&this.input.charCodeAt(C)===48;u&&this.strict&&this.raise(C,"Invalid number");var m=this.input.charCodeAt(this.pos);if(!u&&!c&&this.options.ecmaVersion>=11&&m===110){var v=hn(this.input.slice(C,this.pos));return++this.pos,A(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(N.num,v)}u&&/[89]/.test(this.input.slice(C,this.pos))&&(u=!1),m===46&&!u&&(++this.pos,this.readInt(10),m=this.input.charCodeAt(this.pos)),(m===69||m===101)&&!u&&(m=this.input.charCodeAt(++this.pos),(m===43||m===45)&&++this.pos,this.readInt(10)===null&&this.raise(C,"Invalid number")),A(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var E=ar(this.input.slice(C,this.pos),u);return this.finishToken(N.num,E)},di.readCodePoint=function(){var c=this.input.charCodeAt(this.pos),C;if(c===123){this.options.ecmaVersion<6&&this.unexpected();var u=++this.pos;C=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,C>1114111&&this.invalidStringToken(u,"Code point out of bounds")}else C=this.readHexChar(4);return C},di.readString=function(c){for(var C="",u=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var m=this.input.charCodeAt(this.pos);if(m===c)break;m===92?(C+=this.input.slice(u,this.pos),C+=this.readEscapedChar(!1),u=this.pos):m===8232||m===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ee(m)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return C+=this.input.slice(u,this.pos++),this.finishToken(N.string,C)};var Zn={};di.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===Zn)this.readInvalidTemplateToken();else throw c}this.inTemplateElement=!1},di.invalidStringToken=function(c,C){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Zn;this.raise(c,C)},di.readTmplToken=function(){for(var c="",C=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var u=this.input.charCodeAt(this.pos);if(u===96||u===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===N.template||this.type===N.invalidTemplate)?u===36?(this.pos+=2,this.finishToken(N.dollarBraceL)):(++this.pos,this.finishToken(N.backQuote)):(c+=this.input.slice(C,this.pos),this.finishToken(N.template,c));if(u===92)c+=this.input.slice(C,this.pos),c+=this.readEscapedChar(!0),C=this.pos;else if(Ee(u)){switch(c+=this.input.slice(C,this.pos),++this.pos,u){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:c+=`
`;break;default:c+=String.fromCharCode(u);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),C=this.pos}else++this.pos}},di.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(N.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},di.readEscapedChar=function(c){var C=this.input.charCodeAt(++this.pos);switch(++this.pos,C){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return at(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c){var u=this.pos-1;this.invalidStringToken(u,"Invalid escape sequence in template string")}default:if(C>=48&&C<=55){var m=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],v=parseInt(m,8);return v>255&&(m=m.slice(0,-1),v=parseInt(m,8)),this.pos+=m.length-1,C=this.input.charCodeAt(this.pos),(m!=="0"||C===56||C===57)&&(this.strict||c)&&this.invalidStringToken(this.pos-1-m.length,c?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(v)}return Ee(C)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(C)}},di.readHexChar=function(c){var C=this.pos,u=this.readInt(16,c);return u===null&&this.invalidStringToken(C,"Bad character escape sequence"),u},di.readWord1=function(){this.containsEsc=!1;for(var c="",C=!0,u=this.pos,m=this.options.ecmaVersion>=6;this.pos<this.input.length;){var v=this.fullCharCodeAtPos();if(Q(v,m))this.pos+=v<=65535?1:2;else if(v===92){this.containsEsc=!0,c+=this.input.slice(u,this.pos);var E=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var R=this.readCodePoint();(C?A:Q)(R,m)||this.invalidStringToken(E,"Invalid Unicode escape"),c+=at(R),u=this.pos}else break;C=!1}return c+this.input.slice(u,this.pos)},di.readWord=function(){var c=this.readWord1(),C=N.name;return this.keywords.test(c)&&(C=ae[c]),this.finishToken(C,c)};var Rn="8.14.0";a.acorn={Parser:a,version:Rn,defaultOptions:hi,Position:Nt,SourceLocation:Ht,getLineInfo:cs,Node:me,TokenType:z,tokTypes:N,keywordTypes:ae,TokContext:X,tokContexts:Z,isIdentifierChar:Q,isIdentifierStart:A,Token:br,isNewLine:Ee,lineBreak:Ie,lineBreakG:$e,nonASCIIwhitespace:Ge};function la(c,C){return a.parse(c,C)}function so(c,C,u){return a.parseExpressionAt(c,C,u)}function no(c,C){return a.tokenizer(c,C)}t.Node=me,t.Parser=a,t.Position=Nt,t.SourceLocation=Ht,t.TokContext=X,t.Token=br,t.TokenType=z,t.defaultOptions=hi,t.getLineInfo=cs,t.isIdentifierChar=Q,t.isIdentifierStart=A,t.isNewLine=Ee,t.keywordTypes=ae,t.lineBreak=Ie,t.lineBreakG=$e,t.nonASCIIwhitespace=Ge,t.parse=la,t.parseExpressionAt=so,t.tokContexts=Z,t.tokTypes=N,t.tokenizer=no,t.version=Rn})}(Rd,Rd.exports)),Rd.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(n){(function(e,t){e=e||mm;var i=e.window,s=e.document,r=new function(){var a=/^(statics|enumerable|beans|preserve)$/,h=[],f=h.slice,_=Object.create,b=Object.getOwnPropertyDescriptor,w=Object.defineProperty,I=h.forEach||function(F,q){for(var $=0,X=this.length;$<X;$++)F.call(q,this[$],$,this)},D=function(F,q){for(var $ in this)this.hasOwnProperty($)&&F.call(q,this[$],$,this)},k=Object.assign||function(F){for(var q=1,$=arguments.length;q<$;q++){var X=arguments[q];for(var Z in X)X.hasOwnProperty(Z)&&(F[Z]=X[Z])}return F},B=function(F,q,$){if(F){var X=b(F,"length");(X&&typeof X.value=="number"?I:D).call(F,q,$=$||F)}return $};function H(F,q,$,X,Z){var K={};function W(J,de){de=de||(de=b(q,J))&&(de.get?de:de.value),typeof de=="string"&&de[0]==="#"&&(de=F[de.substring(1)]||de);var me=typeof de=="function",be=de,Se=Z||me&&!de.base?de&&de.get?J in F:F[J]:null,ge;(!Z||!Se)&&(me&&Se&&(de.base=Se),me&&X!==!1&&(ge=J.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(K[ge[3].toLowerCase()+ge[4]]=ge[2]),(!be||me||!be.get||typeof be.get!="function"||!U.isPlainObject(be))&&(be={value:be,writable:!0}),(b(F,J)||{configurable:!0}).configurable&&(be.configurable=!0,be.enumerable=$??!ge),w(F,J,be))}if(q){for(var O in q)q.hasOwnProperty(O)&&!a.test(O)&&W(O);for(var O in K){var j=K[O],te=F["set"+j],se=F["get"+j]||te&&F["is"+j];se&&(X===!0||se.length===0)&&W(O,{get:se,set:te})}}return F}function U(){for(var F=0,q=arguments.length;F<q;F++){var $=arguments[F];$&&k(this,$)}return this}return H(U,{inject:function(F){if(F){var q=F.statics===!0?F:F.statics,$=F.beans,X=F.preserve;q!==F&&H(this.prototype,F,F.enumerable,$,X),H(this,q,null,$,X)}for(var Z=1,K=arguments.length;Z<K;Z++)this.inject(arguments[Z]);return this},extend:function(){for(var F=this,q,$,X=0,Z,K=arguments.length;X<K&&!(q&&$);X++)Z=arguments[X],q=q||Z.initialize,$=$||Z.prototype;return q=q||function(){F.apply(this,arguments)},$=q.prototype=$||_(this.prototype),w($,"constructor",{value:q,writable:!0,configurable:!0}),H(q,this),arguments.length&&this.inject.apply(q,arguments),q.base=F,q}}).inject({enumerable:!1,initialize:U,set:U,inject:function(){for(var F=0,q=arguments.length;F<q;F++){var $=arguments[F];$&&H(this,$,$.enumerable,$.beans,$.preserve)}return this},extend:function(){var F=_(this);return F.inject.apply(F,arguments)},each:function(F,q){return B(this,F,q)},clone:function(){return new this.constructor(this)},statics:{set:k,each:B,create:_,define:w,describe:b,clone:function(F){return k(new F.constructor,F)},isPlainObject:function(F){var q=F!=null&&F.constructor;return q&&(q===Object||q===U||q.name==="Object")},pick:function(F,q){return F!==t?F:q},slice:function(F,q,$){return f.call(F,q,$)}}})};n.exports=r,r.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+r.each(this,function(a,h){if(!/^_/.test(h)){var f=typeof a;this.push(h+": "+(f==="number"?S.instance.number(a):f==="string"?"'"+a+"'":a))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(a){return r.importJSON(a,this)},exportJSON:function(a){return r.exportJSON(this,a)},toJSON:function(){return r.serialize(this)},set:function(a,h){return a&&r.filter(this,a,h,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function a(){var h=a.base.apply(this,arguments),f=h.prototype._class;return f&&!r.exports[f]&&(r.exports[f]=h),h},equals:function(a,h){if(a===h)return!0;if(a&&a.equals)return a.equals(h);if(h&&h.equals)return h.equals(a);if(a&&h&&typeof a=="object"&&typeof h=="object"){if(Array.isArray(a)&&Array.isArray(h)){var f=a.length;if(f!==h.length)return!1;for(;f--;)if(!r.equals(a[f],h[f]))return!1}else{var _=Object.keys(a),f=_.length;if(f!==Object.keys(h).length)return!1;for(;f--;){var b=_[f];if(!(h.hasOwnProperty(b)&&r.equals(a[b],h[b])))return!1}}return!0}return!1},read:function(a,h,f,_){if(this===r){var b=this.peek(a,h);return a.__index++,b}var w=this.prototype,I=w._readIndex,D=h||I&&a.__index||0,k=a.length,B=a[D];if(_=_||k-D,B instanceof this||f&&f.readNull&&B==null&&_<=1)return I&&(a.__index=D+1),B&&f&&f.clone?B.clone():B;if(B=r.create(w),I&&(B.__read=!0),B=B.initialize.apply(B,D>0||D+_<k?r.slice(a,D,D+_):a)||B,I){a.__index=D+B.__read;var H=B.__filtered;H&&(a.__filtered=H,B.__filtered=t),B.__read=t}return B},peek:function(a,h){return a[a.__index=h||a.__index||0]},remain:function(a){return a.length-(a.__index||0)},readList:function(a,h,f,_){for(var b=[],w,I=h||0,D=_?I+_:a.length,k=I;k<D;k++)b.push(Array.isArray(w=a[k])?this.read(w,0,f):this.read(a,k,f,1));return b},readNamed:function(a,h,f,_,b){var w=this.getNamed(a,h),I=w!==t;if(I){var D=a.__filtered;if(!D){var k=this.getSource(a);D=a.__filtered=r.create(k),D.__unfiltered=k}D[h]=t}return this.read(I?[w]:a,f,_,b)},readSupported:function(a,h){var f=this.getSource(a),_=this,b=!1;return f&&Object.keys(f).forEach(function(w){if(w in h){var I=_.readNamed(a,w);I!==t&&(h[w]=I),b=!0}}),b},getSource:function(a){var h=a.__source;if(h===t){var f=a.length===1&&a[0];h=a.__source=f&&r.isPlainObject(f)?f:null}return h},getNamed:function(a,h){var f=this.getSource(a);if(f)return h?f[h]:a.__filtered||f},hasNamed:function(a,h){return!!this.getNamed(a,h)},filter:function(a,h,f,_){var b;function w(H){if(!(f&&H in f)&&!(b&&H in b)){var U=h[H];U!==t&&(a[H]=U)}}if(_){for(var I={},D=0,k,B=_.length;D<B;D++)(k=_[D])in h&&(w(k),I[k]=!0);b=I}return Object.keys(h.__unfiltered||h).forEach(w),a},isPlainValue:function(a,h){return r.isPlainObject(a)||Array.isArray(a)||h&&typeof a=="string"},serialize:function(a,h,f,_){h=h||{};var b=!_,w;if(b&&(h.formatter=new S(h.precision),_={length:0,definitions:{},references:{},add:function(U,F){var q="#"+U._id,$=this.references[q];if(!$){this.length++;var X=F.call(U),Z=U._class;Z&&X[0]!==Z&&X.unshift(Z),this.definitions[q]=X,$=this.references[q]=[q]}return $}}),a&&a._serialize){w=a._serialize(h,_);var I=a._class;I&&!a._compactSerialize&&(b||!f)&&w[0]!==I&&w.unshift(I)}else if(Array.isArray(a)){w=[];for(var D=0,k=a.length;D<k;D++)w[D]=r.serialize(a[D],h,f,_)}else if(r.isPlainObject(a)){w={};for(var B=Object.keys(a),D=0,k=B.length;D<k;D++){var H=B[D];w[H]=r.serialize(a[H],h,f,_)}}else typeof a=="number"?w=h.formatter.number(a,h.precision):w=a;return b&&_.length>0?[["dictionary",_.definitions],w]:w},deserialize:function(a,h,f,_,b){var w=a,I=!f,D=I&&a&&a.length&&a[0][0]==="dictionary";if(f=f||{},Array.isArray(a)){var k=a[0],B=k==="dictionary";if(a.length==1&&/^#/.test(k))return f.dictionary[k];k=r.exports[k],w=[];for(var H=k?1:0,U=a.length;H<U;H++)w.push(r.deserialize(a[H],h,f,B,D));if(k){var F=w;h?w=h(k,F,I||b):w=new k(F)}}else if(r.isPlainObject(a)){w={},_&&(f.dictionary=w);for(var q in a)w[q]=r.deserialize(a[q],h,f)}return D?w[1]:w},exportJSON:function(a,h){var f=r.serialize(a,h);return h&&h.asString==!1?f:JSON.stringify(f)},importJSON:function(a,h){return r.deserialize(typeof a=="string"?JSON.parse(a):a,function(f,_,b){var w=b&&h&&h.constructor===f,I=w?h:r.create(f.prototype);if(_.length===1&&I instanceof N&&(w||!(I instanceof $e))){var D=_[0];r.isPlainObject(D)&&(D.insert=!1,w&&(_=_.concat([N.INSERT])))}return(w?I.set:f).apply(I,_),w&&(h=null),I})},push:function(a,h){var f=h.length;if(f<4096)a.push.apply(a,h);else{var _=a.length;a.length+=f;for(var b=0;b<f;b++)a[_+b]=h[b]}return a},splice:function(a,h,f,_){var b=h&&h.length,w=f===t;f=w?a.length:f,f>a.length&&(f=a.length);for(var I=0;I<b;I++)h[I]._index=f+I;if(w)return r.push(a,h),[];var D=[f,_];h&&r.push(D,h);for(var k=a.splice.apply(a,D),I=0,B=k.length;I<B;I++)k[I]._index=t;for(var I=f+b,B=a.length;I<B;I++)a[I]._index=I;return k},capitalize:function(a){return a.replace(/\b[a-z]/g,function(h){return h.toUpperCase()})},camelize:function(a){return a.replace(/-(.)/g,function(h,f){return f.toUpperCase()})},hyphenate:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var o={on:function(a,h){if(typeof a!="string")r.each(a,function(w,I){this.on(I,w)},this);else{var f=this._eventTypes,_=f&&f[a],b=this._callbacks=this._callbacks||{};b=b[a]=b[a]||[],b.indexOf(h)===-1&&(b.push(h),_&&_.install&&b.length===1&&_.install.call(this,a))}return this},off:function(a,h){if(typeof a!="string"){r.each(a,function(I,D){this.off(D,I)},this);return}var f=this._eventTypes,_=f&&f[a],b=this._callbacks&&this._callbacks[a],w;return b&&(!h||(w=b.indexOf(h))!==-1&&b.length===1?(_&&_.uninstall&&_.uninstall.call(this,a),delete this._callbacks[a]):w!==-1&&b.splice(w,1)),this},once:function(a,h){return this.on(a,function f(){h.apply(this,arguments),this.off(a,f)})},emit:function(a,h){var f=this._callbacks&&this._callbacks[a];if(!f)return!1;var _=r.slice(arguments,1),b=h&&h.target&&!h.currentTarget;f=f.slice(),b&&(h.currentTarget=this);for(var w=0,I=f.length;w<I;w++)if(f[w].apply(this,_)==!1){h&&h.stop&&h.stop();break}return b&&delete h.currentTarget,!0},responds:function(a){return!!(this._callbacks&&this._callbacks[a])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(a){var h=this._eventTypes,f=this._callbacks,_=a?"install":"uninstall";if(h){for(var b in f)if(f[b].length>0){var w=h[b],I=w&&w[_];I&&I.call(this,b)}}},statics:{inject:function a(h){var f=h._events;if(f){var _={};r.each(f,function(b,w){var I=typeof b=="string",D=I?b:w,k=r.capitalize(D),B=D.substring(2).toLowerCase();_[B]=I?{}:b,D="_"+D,h["get"+k]=function(){return this[D]},h["set"+k]=function(H){var U=this[D];U&&this.off(B,U),H&&this.on(B,H),this[D]=H}}),h._eventTypes=_}return a.base.apply(this,arguments)}}},d=r.extend({_class:"PaperScope",initialize:function a(){Jt=this,this.settings=new r({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=a._id++,a._scopes[this._id]=this;var h=a.prototype;if(!this.support){var f=yt.getContext(1,1)||{};h.support={nativeDash:"setLineDash"in f||"mozDash"in f,nativeBlendModes:tt.nativeModes},yt.release(f)}if(!this.agent){var _=e.navigator.userAgent.toLowerCase(),b=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(_)||[])[0],w=b==="darwin"?"mac":b,I=h.agent=h.browser={platform:w};w&&(I[w]=!0),_.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(D,k,B,H,U){if(!I.chrome){var F=k==="opera"?H:/^(node|trident)$/.test(k)?U:B;I.version=F,I.versionNumber=parseFloat(F),k={trident:"msie",jsdom:"node"}[k]||k,I.name=k,I[k]=!0}}),I.chrome&&delete I.webkit,I.atom&&delete I.chrome}},version:"0.12.18",getView:function(){var a=this.project;return a&&a._view},getPaper:function(){return this},execute:function(a,h){var f=Jt.PaperScript.execute(a,this,h);return Pt.updateFocus(),f},install:function(a){var h=this;r.each(["project","view","tool"],function(_){r.define(a,_,{configurable:!0,get:function(){return h[_]}})});for(var f in this)!/^_/.test(f)&&this[f]&&(a[f]=this[f])},setup:function(a){return Jt=this,this.project=new pe(a),this},createCanvas:function(a,h){return yt.getCanvas(a,h)},activate:function(){Jt=this},clear:function(){for(var a=this.projects,h=this.tools,f=a.length-1;f>=0;f--)a[f].remove();for(var f=h.length-1;f>=0;f--)h[f].remove()},remove:function(){this.clear(),delete d._scopes[this._id]},statics:new function(){function a(h){return h+="Attribute",function(f,_){return f[h](_)||f[h]("data-paper-"+_)}}return{_scopes:{},_id:0,get:function(h){return this._scopes[h]||null},getAttribute:a("get"),hasAttribute:a("has")}}}),g=r.extend(o,{initialize:function(a){this._scope=Jt,this._index=this._scope[this._list].push(this)-1,(a||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var a=this._scope[this._reference];return a&&a!==this&&a.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",a),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(r.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),y={findItemBoundsCollisions:function(a,h,f){function _(I){for(var D=new Array(I.length),k=0;k<I.length;k++){var B=I[k].getBounds();D[k]=[B.left,B.top,B.right,B.bottom]}return D}var b=_(a),w=!h||h===a?b:_(h);return this.findBoundsCollisions(b,w,f||0)},findCurveBoundsCollisions:function(a,h,f,_){function b(F){for(var q=Math.min,$=Math.max,X=new Array(F.length),Z=0;Z<F.length;Z++){var K=F[Z];X[Z]=[q(K[0],K[2],K[4],K[6]),q(K[1],K[3],K[5],K[7]),$(K[0],K[2],K[4],K[6]),$(K[1],K[3],K[5],K[7])]}return X}var w=b(a),I=!h||h===a?w:b(h);if(_){for(var D=this.findBoundsCollisions(w,I,f||0,!1,!0),k=this.findBoundsCollisions(w,I,f||0,!0,!0),B=[],H=0,U=D.length;H<U;H++)B[H]={hor:D[H],ver:k[H]};return B}return this.findBoundsCollisions(w,I,f||0)},findBoundsCollisions:function(a,h,f,_,b){var w=!h||a===h,I=w?a:a.concat(h),D=a.length,k=I.length;function B(wt,Dt,Mt){for(var et=0,st=wt.length;et<st;){var It=st+et>>>1;I[wt[It]][Dt]<Mt?et=It+1:st=It}return et-1}for(var H=_?1:0,U=H+2,F=_?0:1,q=F+2,$=new Array(k),X=0;X<k;X++)$[X]=X;$.sort(function(wt,Dt){return I[wt][H]-I[Dt][H]});for(var Z=[],K=new Array(D),X=0;X<k;X++){var W=$[X],O=I[W],j=w?W:W-D,te=W<D,se=w||!te,J=te?[]:null;if(Z.length){var de=B(Z,U,O[H]-f)+1;if(Z.splice(0,de),w&&b){J=J.concat(Z);for(var me=0;me<Z.length;me++){var be=Z[me];K[be].push(j)}}else for(var Se=O[q],ge=O[F],me=0;me<Z.length;me++){var be=Z[me],ve=I[be],Ce=be<D,Be=w||be>=D;(b||(te&&Be||se&&Ce)&&Se>=ve[F]-f&&ge<=ve[q]+f)&&(te&&Be&&J.push(w?be:be-D),se&&Ce&&K[be].push(j))}}if(te&&(a===h&&J.push(W),K[W]=J),Z.length){var Me=O[U],We=B(Z,U,Me);Z.splice(We+1,0,W)}else Z.push(W)}for(var X=0;X<K.length;X++){var dt=K[X];dt&&dt.sort(function(Dt,Mt){return Dt-Mt})}return K}},S=r.extend({initialize:function(a){this.precision=r.pick(a,5),this.multiplier=Math.pow(10,this.precision)},number:function(a){return this.precision<16?Math.round(a*this.multiplier)/this.multiplier:a},pair:function(a,h,f){return this.number(a)+(f||",")+this.number(h)},point:function(a,h){return this.number(a.x)+(h||",")+this.number(a.y)},size:function(a,h){return this.number(a.width)+(h||",")+this.number(a.height)},rectangle:function(a,h){return this.point(a,h)+(h||",")+this.size(a,h)}});S.instance=new S;var T=new function(){var a=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],h=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],f=Math.abs,_=Math.sqrt,b=Math.pow,w=Math.log2||function(U){return Math.log(U)*Math.LOG2E},I=1e-12,D=112e-18;function k(U,F,q){return U<F?F:U>q?q:U}function B(U,F,q){function $(de){var me=de*134217729,be=de-me,Se=be+me,ge=de-Se;return[Se,ge]}var X=F*F-U*q,Z=F*F+U*q;if(f(X)*3<Z){var K=$(U),W=$(F),O=$(q),j=F*F,te=W[0]*W[0]-j+2*W[0]*W[1]+W[1]*W[1],se=U*q,J=K[0]*O[0]-se+K[0]*O[1]+K[1]*O[0]+K[1]*O[1];X=j-se+(te-J)}return X}function H(){var U=Math.max.apply(Math,arguments);return U&&(U<1e-8||U>1e8)?b(2,-Math.round(w(U))):0}return{EPSILON:I,MACHINE_EPSILON:D,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(_(2)-1)/3,isZero:function(U){return U>=-1e-12&&U<=I},isMachineZero:function(U){return U>=-112e-18&&U<=D},clamp:k,integrate:function(U,F,q,$){for(var X=a[$-2],Z=h[$-2],K=(q-F)*.5,W=K+F,O=0,j=$+1>>1,te=$&1?Z[O++]*U(W):0;O<j;){var se=K*X[O];te+=Z[O++]*(U(W+se)+U(W-se))}return K*te},findRoot:function(U,F,q,$,X,Z,K){for(var W=0;W<Z;W++){var O=U(q),j=O/F(q),te=q-j;if(f(j)<K){q=te;break}O>0?(X=q,q=te<=$?($+X)*.5:te):($=q,q=te>=X?($+X)*.5:te)}return k(q,$,X)},solveQuadratic:function(U,F,q,$,X,Z){var K,W=1/0;if(f(U)<I){if(f(F)<I)return f(q)<I?-1:0;K=-q/F}else{F*=-.5;var O=B(U,F,q);if(O&&f(O)<D){var j=H(f(U),f(F),f(q));j&&(U*=j,F*=j,q*=j,O=B(U,F,q))}if(O>=-112e-18){var te=O<0?0:_(O),se=F+(F<0?-te:te);se===0?(K=q/U,W=-K):(K=se/U,W=q/se)}}var J=0,de=X==null,me=X-I,be=Z+I;return isFinite(K)&&(de||K>me&&K<be)&&($[J++]=de?K:k(K,X,Z)),W!==K&&isFinite(W)&&(de||W>me&&W<be)&&($[J++]=de?W:k(W,X,Z)),J},solveCubic:function(U,F,q,$,X,Z,K){var W=H(f(U),f(F),f(q),f($)),O,j,te,se,J;W&&(U*=W,F*=W,q*=W,$*=W);function de(We){O=We;var dt=U*O;j=dt+F,te=j*O+q,se=(dt+j)*O+te,J=te*O+$}if(f(U)<I)U=F,j=q,te=$,O=1/0;else if(f($)<I)j=F,te=q,O=0;else{de(-(F/U)/3);var me=J/U,be=b(f(me),1/3),Se=me<0?-1:1,ge=-se/U,ve=ge>0?1.324717957244746*Math.max(be,_(ge)):be,Ce=O-Se*ve;if(Ce!==O){do de(Ce),Ce=se===0?O:O-J/se/(1+D);while(Se*Ce>Se*O);f(U)*O*O>f($/O)&&(te=-$/O,j=(te-q)/O)}}var Be=T.solveQuadratic(U,j,te,X,Z,K),Me=Z==null;return isFinite(O)&&(Be===0||Be>0&&O!==X[0]&&O!==X[1])&&(Me||O>Z-I&&O<K+I)&&(X[Be++]=Me?O:k(O,Z,K)),Be}}},L={_id:1,_pools:{},get:function(a){if(a){var h=this._pools[a];return h||(h=this._pools[a]={_id:1}),h._id++}else return this._id++}},x=r.extend({_class:"Point",_readIndex:!0,initialize:function(h,f){var _=typeof h,b=this.__read,w=0;if(_==="number"){var I=typeof f=="number";this._set(h,I?f:h),b&&(w=I?2:1)}else if(_==="undefined"||h===null)this._set(0,0),b&&(w=h===null?1:0);else{var D=_==="string"?h.split(/[\s,]+/)||[]:h;w=1,Array.isArray(D)?this._set(+D[0],+(D.length>1?D[1]:D[0])):"x"in D?this._set(D.x||0,D.y||0):"width"in D?this._set(D.width||0,D.height||0):"angle"in D?(this._set(D.length||0,0),this.setAngle(D.angle||0)):(this._set(0,0),w=0)}return b&&(this.__read=w),this},set:"#initialize",_set:function(a,h){return this.x=a,this.y=h,this},equals:function(a){return this===a||a&&(this.x===a.x&&this.y===a.y||Array.isArray(a)&&this.x===a[0]&&this.y===a[1])||!1},clone:function(){return new x(this.x,this.y)},toString:function(){var a=S.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+" }"},_serialize:function(a){var h=a.formatter;return[h.number(this.x),h.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(a){if(this.isZero()){var h=this._angle||0;this._set(Math.cos(h)*a,Math.sin(h)*a)}else{var f=a/this.getLength();T.isZero(f)&&this.getAngle(),this._set(this.x*f,this.y*f)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(a){this.setAngleInRadians.call(this,a*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var a=x.read(arguments),h=this.getLength()*a.getLength();if(T.isZero(h))return NaN;var f=this.dot(a)/h;return Math.acos(f<-1?-1:f>1?1:f)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(a){if(this._angle=a,!this.isZero()){var h=this.getLength();this._set(Math.cos(a)*h,Math.sin(a)*h)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var a=x.read(arguments);return Math.atan2(this.cross(a),this.dot(a))*180/Math.PI},getDistance:function(){var a=arguments,h=x.read(a),f=h.x-this.x,_=h.y-this.y,b=f*f+_*_,w=r.read(a);return w?b:Math.sqrt(b)},normalize:function(a){a===t&&(a=1);var h=this.getLength(),f=h!==0?a/h:0,_=new x(this.x*f,this.y*f);return f>=0&&(_._angle=this._angle),_},rotate:function(a,h){if(a===0)return this.clone();a=a*Math.PI/180;var f=h?this.subtract(h):this,_=Math.sin(a),b=Math.cos(a);return f=new x(f.x*b-f.y*_,f.x*_+f.y*b),h?f.add(h):f},transform:function(a){return a?a._transformPoint(this):this},add:function(){var a=x.read(arguments);return new x(this.x+a.x,this.y+a.y)},subtract:function(){var a=x.read(arguments);return new x(this.x-a.x,this.y-a.y)},multiply:function(){var a=x.read(arguments);return new x(this.x*a.x,this.y*a.y)},divide:function(){var a=x.read(arguments);return new x(this.x/a.x,this.y/a.y)},modulo:function(){var a=x.read(arguments);return new x(this.x%a.x,this.y%a.y)},negate:function(){return new x(-this.x,-this.y)},isInside:function(){return G.read(arguments).contains(this)},isClose:function(){var a=arguments,h=x.read(a),f=r.read(a);return this.getDistance(h)<=f},isCollinear:function(){var a=x.read(arguments);return x.isCollinear(this.x,this.y,a.x,a.y)},isColinear:"#isCollinear",isOrthogonal:function(){var a=x.read(arguments);return x.isOrthogonal(this.x,this.y,a.x,a.y)},isZero:function(){var a=T.isZero;return a(this.x)&&a(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(a){return this.x*(a>1&&a<4?-1:1)>=0&&this.y*(a>2?-1:1)>=0},dot:function(){var a=x.read(arguments);return this.x*a.x+this.y*a.y},cross:function(){var a=x.read(arguments);return this.x*a.y-this.y*a.x},project:function(){var a=x.read(arguments),h=a.isZero()?0:this.dot(a)/a.dot(a);return new x(a.x*h,a.y*h)},statics:{min:function(){var a=arguments,h=x.read(a),f=x.read(a);return new x(Math.min(h.x,f.x),Math.min(h.y,f.y))},max:function(){var a=arguments,h=x.read(a),f=x.read(a);return new x(Math.max(h.x,f.x),Math.max(h.y,f.y))},random:function(){return new x(Math.random(),Math.random())},isCollinear:function(a,h,f,_){return Math.abs(a*_-h*f)<=Math.sqrt((a*a+h*h)*(f*f+_*_))*1e-8},isOrthogonal:function(a,h,f,_){return Math.abs(a*f+h*_)<=Math.sqrt((a*a+h*h)*(f*f+_*_))*1e-8}}},r.each(["round","ceil","floor","abs"],function(a){var h=Math[a];this[a]=function(){return new x(h(this.x),h(this.y))}},{})),A=x.extend({initialize:function(h,f,_,b){this._x=h,this._y=f,this._owner=_,this._setter=b},_set:function(a,h,f){return this._x=a,this._y=h,f||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner._changeSelection(this._getSelection(),a)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),Q=r.extend({_class:"Size",_readIndex:!0,initialize:function(h,f){var _=typeof h,b=this.__read,w=0;if(_==="number"){var I=typeof f=="number";this._set(h,I?f:h),b&&(w=I?2:1)}else if(_==="undefined"||h===null)this._set(0,0),b&&(w=h===null?1:0);else{var D=_==="string"?h.split(/[\s,]+/)||[]:h;w=1,Array.isArray(D)?this._set(+D[0],+(D.length>1?D[1]:D[0])):"width"in D?this._set(D.width||0,D.height||0):"x"in D?this._set(D.x||0,D.y||0):(this._set(0,0),w=0)}return b&&(this.__read=w),this},set:"#initialize",_set:function(a,h){return this.width=a,this.height=h,this},equals:function(a){return a===this||a&&(this.width===a.width&&this.height===a.height||Array.isArray(a)&&this.width===a[0]&&this.height===a[1])||!1},clone:function(){return new Q(this.width,this.height)},toString:function(){var a=S.instance;return"{ width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var h=a.formatter;return[h.number(this.width),h.number(this.height)]},add:function(){var a=Q.read(arguments);return new Q(this.width+a.width,this.height+a.height)},subtract:function(){var a=Q.read(arguments);return new Q(this.width-a.width,this.height-a.height)},multiply:function(){var a=Q.read(arguments);return new Q(this.width*a.width,this.height*a.height)},divide:function(){var a=Q.read(arguments);return new Q(this.width/a.width,this.height/a.height)},modulo:function(){var a=Q.read(arguments);return new Q(this.width%a.width,this.height%a.height)},negate:function(){return new Q(-this.width,-this.height)},isZero:function(){var a=T.isZero;return a(this.width)&&a(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(a,h){return new Q(Math.min(a.width,h.width),Math.min(a.height,h.height))},max:function(a,h){return new Q(Math.max(a.width,h.width),Math.max(a.height,h.height))},random:function(){return new Q(Math.random(),Math.random())}}},r.each(["round","ceil","floor","abs"],function(a){var h=Math[a];this[a]=function(){return new Q(h(this.width),h(this.height))}},{})),z=Q.extend({initialize:function(h,f,_,b){this._width=h,this._height=f,this._owner=_,this._setter=b},_set:function(a,h,f){return this._width=a,this._height=h,f||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(a){this._width=a,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(a){this._height=a,this._owner[this._setter](this)}}),G=r.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(h,f,_,b){var w=arguments,I=typeof h,D;if(I==="number"?(this._set(h,f,_,b),D=4):I==="undefined"||h===null?(this._set(0,0,0,0),D=h===null?1:0):w.length===1&&(Array.isArray(h)?(this._set.apply(this,h),D=1):h.x!==t||h.width!==t?(this._set(h.x||0,h.y||0,h.width||0,h.height||0),D=1):h.from===t&&h.to===t&&(this._set(0,0,0,0),r.readSupported(w,this)&&(D=1))),D===t){var k=x.readNamed(w,"from"),B=r.peek(w),H=k.x,U=k.y,F,q;if(B&&B.x!==t||r.hasNamed(w,"to")){var $=x.readNamed(w,"to");F=$.x-H,q=$.y-U,F<0&&(H=$.x,F=-F),q<0&&(U=$.y,q=-q)}else{var X=Q.read(w);F=X.width,q=X.height}this._set(H,U,F,q),D=w.__index}var Z=w.__filtered;return Z&&(this.__filtered=Z),this.__read&&(this.__read=D),this},set:"#initialize",_set:function(a,h,f,_){return this.x=a,this.y=h,this.width=f,this.height=_,this},clone:function(){return new G(this.x,this.y,this.width,this.height)},equals:function(a){var h=r.isPlainValue(a)?G.read(arguments):a;return h===this||h&&this.x===h.x&&this.y===h.y&&this.width===h.width&&this.height===h.height||!1},toString:function(){var a=S.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+", width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var h=a.formatter;return[h.number(this.x),h.number(this.y),h.number(this.width),h.number(this.height)]},getPoint:function(a){var h=a?x:A;return new h(this.x,this.y,this,"setPoint")},setPoint:function(){var a=x.read(arguments);this.x=a.x,this.y=a.y},getSize:function(a){var h=a?Q:z;return new h(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var a=Q.read(arguments),h=this._sx,f=this._sy,_=a.width,b=a.height;h&&(this.x+=(this.width-_)*h),f&&(this.y+=(this.height-b)*f),this.width=_,this.height=b,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(a){if(!this._fw){var h=a-this.x;this.width-=this._sx===.5?h*2:h}this.x=a,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(a){if(!this._fh){var h=a-this.y;this.height-=this._sy===.5?h*2:h}this.y=a,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(a){if(!this._fw){var h=a-this.x;this.width=this._sx===.5?h*2:h}this.x=a-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(a){if(!this._fh){var h=a-this.y;this.height=this._sy===.5?h*2:h}this.y=a-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(a){this._fw||this._sx===.5?this.x=a-this.width/2:(this._sx&&(this.x+=(a-this.x)*2*this._sx),this.width=(a-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(a){this._fh||this._sy===.5?this.y=a-this.height/2:(this._sy&&(this.y+=(a-this.y)*2*this._sy),this.height=(a-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(a){var h=a?x:A;return new h(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var a=x.read(arguments);return this.setCenterX(a.x),this.setCenterY(a.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(a){return a&&a.width!==t||(Array.isArray(a)?a:arguments).length===4?this._containsRectangle(G.read(arguments)):this._containsPoint(x.read(arguments))},_containsPoint:function(a){var h=a.x,f=a.y;return h>=this.x&&f>=this.y&&h<=this.x+this.width&&f<=this.y+this.height},_containsRectangle:function(a){var h=a.x,f=a.y;return h>=this.x&&f>=this.y&&h+a.width<=this.x+this.width&&f+a.height<=this.y+this.height},intersects:function(){var a=G.read(arguments),h=r.read(arguments)||0;return a.x+a.width>this.x-h&&a.y+a.height>this.y-h&&a.x<this.x+this.width+h&&a.y<this.y+this.height+h},intersect:function(){var a=G.read(arguments),h=Math.max(this.x,a.x),f=Math.max(this.y,a.y),_=Math.min(this.x+this.width,a.x+a.width),b=Math.min(this.y+this.height,a.y+a.height);return new G(h,f,_-h,b-f)},unite:function(){var a=G.read(arguments),h=Math.min(this.x,a.x),f=Math.min(this.y,a.y),_=Math.max(this.x+this.width,a.x+a.width),b=Math.max(this.y+this.height,a.y+a.height);return new G(h,f,_-h,b-f)},include:function(){var a=x.read(arguments),h=Math.min(this.x,a.x),f=Math.min(this.y,a.y),_=Math.max(this.x+this.width,a.x),b=Math.max(this.y+this.height,a.y);return new G(h,f,_-h,b-f)},expand:function(){var a=Q.read(arguments),h=a.width,f=a.height;return new G(this.x-h/2,this.y-f/2,this.width+h,this.height+f)},scale:function(a,h){return this.expand(this.width*a-this.width,this.height*(h===t?a:h)-this.height)}},r.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(a,h){var f=a.join(""),_=/^[RL]/.test(f);h>=4&&(a[1]+=_?"Y":"X");var b=a[_?0:1],w=a[_?1:0],I="get"+b,D="get"+w,k="set"+b,B="set"+w,H="get"+f,U="set"+f;this[H]=function(F){var q=F?x:A;return new q(this[I](),this[D](),this,U)},this[U]=function(){var F=x.read(arguments);this[k](F.x),this[B](F.y)}},{beans:!0})),re=G.extend({initialize:function(h,f,_,b,w,I){this._set(h,f,_,b,!0),this._owner=w,this._setter=I},_set:function(a,h,f,_,b){return this._x=a,this._y=h,this._width=f,this._height=_,b||this._owner[this._setter](this),this}},new function(){var a=G.prototype;return r.each(["x","y","width","height"],function(h){var f=r.capitalize(h),_="_"+h;this["get"+f]=function(){return this[_]},this["set"+f]=function(b){this[_]=b,this._dontNotify||this._owner[this._setter](this)}},r.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(h){var f="set"+h;this[f]=function(){this._dontNotify=!0,a[f].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(h){var f=this._owner;f._changeSelection&&f._changeSelection(2,h)}}))}),ne=r.extend({_class:"Matrix",initialize:function a(h,f){var _=arguments,b=_.length,w=!0;if(b>=6?this._set.apply(this,_):b===1||b===2?h instanceof a?this._set(h._a,h._b,h._c,h._d,h._tx,h._ty,f):Array.isArray(h)?this._set.apply(this,f?h.concat([f]):h):w=!1:b?w=!1:this.reset(),!w)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(a,h,f,_,b,w,I){return this._a=a,this._b=h,this._c=f,this._d=_,this._tx=b,this._ty=w,I||this._changed(),this},_serialize:function(a,h){return r.serialize(this.getValues(),a,!0,h)},_changed:function(){var a=this._owner;a&&(a._applyMatrix?a.transform(null,!0):a._changed(25))},clone:function(){return new ne(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(a){return a===this||a&&this._a===a._a&&this._b===a._b&&this._c===a._c&&this._d===a._d&&this._tx===a._tx&&this._ty===a._ty},toString:function(){var a=S.instance;return"[["+[a.number(this._a),a.number(this._c),a.number(this._tx)].join(", ")+"], ["+[a.number(this._b),a.number(this._d),a.number(this._ty)].join(", ")+"]]"},reset:function(a){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,a||this._changed(),this},apply:function(a,h){var f=this._owner;return f?(f.transform(null,r.pick(a,!0),h),this.isIdentity()):!1},translate:function(){var a=x.read(arguments),h=a.x,f=a.y;return this._tx+=h*this._a+f*this._c,this._ty+=h*this._b+f*this._d,this._changed(),this},scale:function(){var a=arguments,h=x.read(a),f=x.read(a,0,{readNull:!0});return f&&this.translate(f),this._a*=h.x,this._b*=h.x,this._c*=h.y,this._d*=h.y,f&&this.translate(f.negate()),this._changed(),this},rotate:function(a){a*=Math.PI/180;var h=x.read(arguments,1),f=h.x,_=h.y,b=Math.cos(a),w=Math.sin(a),I=f-f*b+_*w,D=_-f*w-_*b,k=this._a,B=this._b,H=this._c,U=this._d;return this._a=b*k+w*H,this._b=b*B+w*U,this._c=-w*k+b*H,this._d=-w*B+b*U,this._tx+=I*k+D*H,this._ty+=I*B+D*U,this._changed(),this},shear:function(){var a=arguments,h=x.read(a),f=x.read(a,0,{readNull:!0});f&&this.translate(f);var _=this._a,b=this._b;return this._a+=h.y*this._c,this._b+=h.y*this._d,this._c+=h.x*_,this._d+=h.x*b,f&&this.translate(f.negate()),this._changed(),this},skew:function(){var a=arguments,h=x.read(a),f=x.read(a,0,{readNull:!0}),_=Math.PI/180,b=new x(Math.tan(h.x*_),Math.tan(h.y*_));return this.shear(b,f)},append:function(a,h){if(a){var f=this._a,_=this._b,b=this._c,w=this._d,I=a._a,D=a._c,k=a._b,B=a._d,H=a._tx,U=a._ty;this._a=I*f+k*b,this._c=D*f+B*b,this._b=I*_+k*w,this._d=D*_+B*w,this._tx+=H*f+U*b,this._ty+=H*_+U*w,h||this._changed()}return this},prepend:function(a,h){if(a){var f=this._a,_=this._b,b=this._c,w=this._d,I=this._tx,D=this._ty,k=a._a,B=a._c,H=a._b,U=a._d,F=a._tx,q=a._ty;this._a=k*f+B*_,this._c=k*b+B*w,this._b=H*f+U*_,this._d=H*b+U*w,this._tx=k*I+B*D+F,this._ty=H*I+U*D+q,h||this._changed()}return this},appended:function(a){return this.clone().append(a)},prepended:function(a){return this.clone().prepend(a)},invert:function(){var a=this._a,h=this._b,f=this._c,_=this._d,b=this._tx,w=this._ty,I=a*_-h*f,D=null;return I&&!isNaN(I)&&isFinite(b)&&isFinite(w)&&(this._a=_/I,this._b=-h/I,this._c=-f/I,this._d=a/I,this._tx=(f*w-_*b)/I,this._ty=(h*b-a*w)/I,D=this),D},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new ne(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var a=this._a*this._d-this._c*this._b;return a&&!isNaN(a)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(a,h,f){return arguments.length<3?this._transformPoint(x.read(arguments)):this._transformCoordinates(a,h,f)},_transformPoint:function(a,h,f){var _=a.x,b=a.y;return h||(h=new x),h._set(_*this._a+b*this._c+this._tx,_*this._b+b*this._d+this._ty,f)},_transformCoordinates:function(a,h,f){for(var _=0,b=2*f;_<b;_+=2){var w=a[_],I=a[_+1];h[_]=w*this._a+I*this._c+this._tx,h[_+1]=w*this._b+I*this._d+this._ty}return h},_transformCorners:function(a){var h=a.x,f=a.y,_=h+a.width,b=f+a.height,w=[h,f,_,f,_,b,h,b];return this._transformCoordinates(w,w,4)},_transformBounds:function(a,h,f){for(var _=this._transformCorners(a),b=_.slice(0,2),w=b.slice(),I=2;I<8;I++){var D=_[I],k=I&1;D<b[k]?b[k]=D:D>w[k]&&(w[k]=D)}return h||(h=new G),h._set(b[0],b[1],w[0]-b[0],w[1]-b[1],f)},inverseTransform:function(){return this._inverseTransform(x.read(arguments))},_inverseTransform:function(a,h,f){var _=this._a,b=this._b,w=this._c,I=this._d,D=this._tx,k=this._ty,B=_*I-b*w,H=null;if(B&&!isNaN(B)&&isFinite(D)&&isFinite(k)){var U=a.x-this._tx,F=a.y-this._ty;h||(h=new x),H=h._set((U*I-F*w)/B,(F*_-U*b)/B,f)}return H},decompose:function(){var a=this._a,h=this._b,f=this._c,_=this._d,b=a*_-h*f,w=Math.sqrt,I=Math.atan2,D=180/Math.PI,k,B,H;if(a!==0||h!==0){var U=w(a*a+h*h);k=Math.acos(a/U)*(h>0?1:-1),B=[U,b/U],H=[I(a*f+h*_,U*U),0]}else if(f!==0||_!==0){var F=w(f*f+_*_);k=Math.asin(f/F)*(_>0?1:-1),B=[b/F,F],H=[0,I(a*f+h*_,F*F)]}else k=0,H=B=[0,0];return{translation:this.getTranslation(),rotation:k*D,scaling:new x(B),skewing:new x(H[0]*D,H[1]*D)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new x(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(a){this.isIdentity()||a.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},r.each(["a","b","c","d","tx","ty"],function(a){var h=r.capitalize(a),f="_"+a;this["get"+h]=function(){return this[f]},this["set"+h]=function(_){this[f]=_,this._changed()}},{})),ae=r.extend({_class:"Line",initialize:function(h,f,_,b,w){var I=!1;arguments.length>=4?(this._px=h,this._py=f,this._vx=_,this._vy=b,I=w):(this._px=h.x,this._py=h.y,this._vx=f.x,this._vy=f.y,I=_),I||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new x(this._px,this._py)},getVector:function(){return new x(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(a,h){return ae.intersect(this._px,this._py,this._vx,this._vy,a._px,a._py,a._vx,a._vy,!0,h)},getSide:function(a,h){return ae.getSide(this._px,this._py,this._vx,this._vy,a.x,a.y,!0,h)},getDistance:function(a){return Math.abs(this.getSignedDistance(a))},getSignedDistance:function(a){return ae.getSignedDistance(this._px,this._py,this._vx,this._vy,a.x,a.y,!0)},isCollinear:function(a){return x.isCollinear(this._vx,this._vy,a._vx,a._vy)},isOrthogonal:function(a){return x.isOrthogonal(this._vx,this._vy,a._vx,a._vy)},statics:{intersect:function(a,h,f,_,b,w,I,D,k,B){k||(f-=a,_-=h,I-=b,D-=w);var H=f*D-_*I;if(!T.isMachineZero(H)){var U=a-b,F=h-w,q=(I*F-D*U)/H,$=(f*F-_*U)/H,X=1e-12,Z=-X,K=1+X;if(B||Z<q&&q<K&&Z<$&&$<K)return B||(q=q<=0?0:q>=1?1:q),new x(a+q*f,h+q*_)}},getSide:function(a,h,f,_,b,w,I,D){I||(f-=a,_-=h);var k=b-a,B=w-h,H=k*_-B*f;return!D&&T.isMachineZero(H)&&(H=(k*f+k*f)/(f*f+_*_),H>=0&&H<=1&&(H=0)),H<0?-1:H>0?1:0},getSignedDistance:function(a,h,f,_,b,w,I){return I||(f-=a,_-=h),f===0?_>0?b-a:a-b:_===0?f<0?w-h:h-w:((b-a)*_-(w-h)*f)/(_>f?_*Math.sqrt(1+f*f/(_*_)):f*Math.sqrt(1+_*_/(f*f)))},getDistance:function(a,h,f,_,b,w,I){return Math.abs(ae.getSignedDistance(a,h,f,_,b,w,I))}}}),pe=g.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(h){g.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new bs(null,null,this),this._view=Pt.create(this,h||yt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(a,h){return r.serialize(this._children,a,!0,h)},_changed:function(a,h){if(a&1){var f=this._view;f&&(f._needsUpdate=!0,!f._requested&&f._autoUpdate&&f.requestUpdate())}var _=this._changes;if(_&&h){var b=this._changesById,w=h._id,I=b[w];I?I.flags|=a:_.push(b[w]={item:h,flags:a})}},clear:function(){for(var a=this._children,h=a.length-1;h>=0;h--)a[h].remove()},isEmpty:function(){return!this._children.length},remove:function a(){return a.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(a){this._currentStyle.set(a)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new $e({project:this,insert:!0})},getSymbolDefinitions:function(){var a=[],h={};return this.getItems({class:Ge,match:function(f){var _=f._definition,b=_._id;return h[b]||(h[b]=!0,a.push(_)),!1}}),a},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var a=this._selectionItems,h=[];for(var f in a){var _=a[f],b=_._selection;b&1&&_.isInserted()?h.push(_):b||this._updateSelection(_)}return h},_updateSelection:function(a){var h=a._id,f=this._selectionItems;a._selection?f[h]!==a&&(this._selectionCount++,f[h]=a):f[h]===a&&(this._selectionCount--,delete f[h])},selectAll:function(){for(var a=this._children,h=0,f=a.length;h<f;h++)a[h].setFullySelected(!0)},deselectAll:function(){var a=this._selectionItems;for(var h in a)a[h].setFullySelected(!1)},addLayer:function(a){return this.insertLayer(t,a)},insertLayer:function(a,h){if(h instanceof $e){h._remove(!1,!0),r.splice(this._children,[h],a,0),h._setProject(this,!0);var f=h._name;f&&h.setName(f),this._changes&&h._changed(5),this._activeLayer||(this._activeLayer=h)}else h=null;return h},_insertItem:function(a,h,f){return h=this.insertLayer(a,h)||(this._activeLayer||this._insertItem(t,new $e(N.NO_INSERT),!0)).insertChild(a,h),f&&h.activate&&h.activate(),h},getItems:function(a){return N._getItems(this,a)},getItem:function(a){return N._getItems(this,a,null,null,!0)[0]||null},importJSON:function(a){this.activate();var h=this._activeLayer;return r.importJSON(a,h&&h.isEmpty()&&h)},removeOn:function(a){var h=this._removeSets;if(h){a==="mouseup"&&(h.mousedrag=null);var f=h[a];if(f){for(var _ in f){var b=f[_];for(var w in h){var I=h[w];I&&I!=f&&delete I[b._id]}b.remove()}h[a]=null}}},draw:function(a,h,f){this._updateVersion++,a.save(),h.applyToContext(a);for(var _=this._children,b=new r({offset:new x(0,0),pixelRatio:f,viewMatrix:h.isIdentity()?null:h,matrices:[new ne],updateMatrix:!0}),w=0,I=_.length;w<I;w++)_[w].draw(a,b);if(a.restore(),this._selectionCount>0){a.save(),a.strokeWidth=1;var D=this._selectionItems,k=this._scope.settings.handleSize,B=this._updateVersion;for(var H in D)D[H]._drawSelection(a,h,k,D,B);a.restore()}}}),N=r.extend(o,{statics:{extend:function a(h){return h._serializeFields&&(h._serializeFields=r.set({},this.prototype._serializeFields,h._serializeFields)),a.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new ne,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var a=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return r.each(a,function(h){this._events[h]={install:function(f){this.getView()._countItemEvent(f,1)},uninstall:function(f){this.getView()._countItemEvent(f,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:a}})},{initialize:function(){},_initialize:function(a,h){var f=a&&r.isPlainObject(a),_=f&&a.internal===!0,b=this._matrix=new ne,w=f&&a.project||Jt.project,I=Jt.settings;return this._id=_?null:L.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&I.applyMatrix,h&&b.translate(h),b._owner=this,this._style=new bs(w._currentStyle,this,w),_||f&&a.insert==!1||!I.insertItems&&!(f&&a.insert==!0)?this._setProject(w):(f&&a.parent||w)._insertItem(t,this,!0),f&&a!==N.NO_INSERT&&a!==N.INSERT&&this.set(a,{internal:!0,insert:!0,project:!0,parent:!0}),f},_serialize:function(a,h){var f={},_=this;function b(w){for(var I in w){var D=_[I];r.equals(D,I==="leading"?w.fontSize*1.2:w[I])||(f[I]=r.serialize(D,a,I!=="data",h))}}return b(this._serializeFields),this instanceof Ie||b(this._style._defaults),[this._class,f]},_changed:function(a){var h=this._symbol,f=this._parent||h,_=this._project;a&8&&(this._bounds=this._position=this._decomposed=t),a&16&&(this._globalMatrix=t),f&&a&72&&N._clearBoundsCache(f),a&2&&N._clearBoundsCache(this),_&&_._changed(a,this),h&&h._changed(a)},getId:function(){return this._id},getName:function(){return this._name},setName:function(a){if(this._name&&this._removeNamed(),a===+a+"")throw new Error("Names consisting only of numbers are not supported.");var h=this._getOwner();if(a&&h){var f=h._children,_=h._namedChildren;(_[a]=_[a]||[]).push(this),a in f||(f[a]=this)}this._name=a||t,this._changed(256)},getStyle:function(){return this._style},setStyle:function(a){this.getStyle().set(a)}},r.each(["locked","visible","blendMode","opacity","guide"],function(a){var h=r.capitalize(a),f="_"+a,_={locked:256,visible:265};this["get"+h]=function(){return this[f]},this["set"+h]=function(b){b!=this[f]&&(this[f]=b,this._changed(_[a]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(a){if(a!==this._selection){this._selection=a;var h=this._project;h&&(h._updateSelection(this),this._changed(257))}},_changeSelection:function(a,h){var f=this._selection;this.setSelection(h?f|a:f&~a)},isSelected:function(){if(this._selectChildren){for(var a=this._children,h=0,f=a.length;h<f;h++)if(a[h].isSelected())return!0}return!!(this._selection&1)},setSelected:function(a){if(this._selectChildren)for(var h=this._children,f=0,_=h.length;f<_;f++)h[f].setSelected(a);this._changeSelection(1,a)},isFullySelected:function(){var a=this._children,h=!!(this._selection&1);if(a&&h){for(var f=0,_=a.length;f<_;f++)if(!a[f].isFullySelected())return!1;return!0}return h},setFullySelected:function(a){var h=this._children;if(h)for(var f=0,_=h.length;f<_;f++)h[f].setFullySelected(a);this._changeSelection(1,a)},isClipMask:function(){return this._clipMask},setClipMask:function(a){this._clipMask!=(a=!!a)&&(this._clipMask=a,a&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(a){this._data=a},getPosition:function(a){var h=a?x:A,f=this._position||(this._position=this._getPositionFromBounds());return new h(f.x,f.y,this,"setPosition")},setPosition:function(){this.translate(x.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(a){return this._pivot?this._matrix._transformPoint(this._pivot):(a||this.getBounds()).getCenter(!0)},getPivot:function(){var a=this._pivot;return a?new A(a.x,a.y,this,"setPivot"):null},setPivot:function(){this._pivot=x.read(arguments,0,{clone:!0,readNull:!0}),this._position=t}},r.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(a,h){this[h]=function(f){return this.getBounds(f,a)}},{beans:!0,getBounds:function(a,h){var f=h||a instanceof ne,_=r.set({},f?h:a,this._boundsOptions);(!_.stroke||this.getStrokeScaling())&&(_.cacheItem=this);var b=this._getCachedBounds(f&&a,_).rect;return arguments.length?b:new re(b.x,b.y,b.width,b.height,this,"setBounds")},setBounds:function(){var a=G.read(arguments),h=this.getBounds(),f=this._matrix,_=new ne,b=a.getCenter();_.translate(b),(a.width!=h.width||a.height!=h.height)&&(f.isInvertible()||(f.set(f._backup||new ne().translate(f.getTranslation())),h=this.getBounds()),_.scale(h.width!==0?a.width/h.width:0,h.height!==0?a.height/h.height:0)),b=h.getCenter(),_.translate(-b.x,-b.y),this.transform(_)},_getBounds:function(a,h){var f=this._children;return!f||!f.length?new G:(N._updateBoundsCache(this,h.cacheItem),N._getBounds(f,a,h))},_getBoundsCacheKey:function(a,h){return[a.stroke?1:0,a.handle?1:0,h?1:0].join("")},_getCachedBounds:function(a,h,f){a=a&&a._orNullIfIdentity();var _=h.internal&&!f,b=h.cacheItem,w=_?null:this._matrix._orNullIfIdentity(),I=b&&(!a||a.equals(w))&&this._getBoundsCacheKey(h,_),D=this._bounds;if(N._updateBoundsCache(this._parent||this._symbol,b),I&&D&&I in D){var k=D[I];return{rect:k.rect.clone(),nonscaling:k.nonscaling}}var B=this._getBounds(a||w,h),H=B.rect||B,U=this._style,F=B.nonscaling||U.hasStroke()&&!U.getStrokeScaling();if(I){D||(this._bounds=D={});var k=D[I]={rect:H.clone(),nonscaling:F,internal:_}}return{rect:H,nonscaling:F}},_getStrokeMatrix:function(a,h){var f=this.getStrokeScaling()?null:h&&h.internal?this:this._parent||this._symbol&&this._symbol._item,_=f?f.getViewMatrix().invert():a;return _&&_._shiftless()},statics:{_updateBoundsCache:function(a,h){if(a&&h){var f=h._id,_=a._boundsCache=a._boundsCache||{ids:{},list:[]};_.ids[f]||(_.list.push(h),_.ids[f]=h)}},_clearBoundsCache:function(a){var h=a._boundsCache;if(h){a._bounds=a._position=a._boundsCache=t;for(var f=0,_=h.list,b=_.length;f<b;f++){var w=_[f];w!==a&&(w._bounds=w._position=t,w._boundsCache&&N._clearBoundsCache(w))}}},_getBounds:function(a,h,f){var _=1/0,b=-_,w=_,I=b,D=!1;f=f||{};for(var k=0,B=a.length;k<B;k++){var H=a[k];if(H._visible&&!H.isEmpty(!0)){var U=H._getCachedBounds(h&&h.appended(H._matrix),f,!0),F=U.rect;_=Math.min(F.x,_),w=Math.min(F.y,w),b=Math.max(F.x+F.width,b),I=Math.max(F.y+F.height,I),U.nonscaling&&(D=!0)}}return{rect:isFinite(_)?new G(_,w,b-_,I-w):new G,nonscaling:D}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var a=this._decompose();return a?a.rotation:0},setRotation:function(a){var h=this.getRotation();if(h!=null&&a!=null){var f=this._decomposed;this.rotate(a-h),f&&(f.rotation=a,this._decomposed=f)}},getScaling:function(){var a=this._decompose(),h=a&&a.scaling;return new A(h?h.x:1,h?h.y:1,this,"setScaling")},setScaling:function(){var a=this.getScaling(),h=x.read(arguments,0,{clone:!0,readNull:!0});if(a&&h&&!a.equals(h)){var f=this.getRotation(),_=this._decomposed,b=new ne,w=T.isZero;if(w(a.x)||w(a.y))b.translate(_.translation),f&&b.rotate(f),b.scale(h.x,h.y),this._matrix.set(b);else{var I=this.getPosition(!0);b.translate(I),f&&b.rotate(f),b.scale(h.x/a.x,h.y/a.y),f&&b.rotate(-f),b.translate(I.negate()),this.transform(b)}_&&(_.scaling=h,this._decomposed=_)}},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.set.apply(a,arguments)},getGlobalMatrix:function(a){var h=this._globalMatrix;if(h)for(var f=this._parent,_=[];f;){if(!f._globalMatrix){h=null;for(var b=0,w=_.length;b<w;b++)_[b]._globalMatrix=null;break}_.push(f),f=f._parent}if(!h){h=this._globalMatrix=this._matrix.clone();var f=this._parent;f&&h.prepend(f.getGlobalMatrix(!0))}return a?h:h.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(a){(this._applyMatrix=this._canApplyMatrix&&!!a)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(a,h){if(this._project!==a){this._project&&this._installEvents(!1),this._project=a;for(var f=this._children,_=0,b=f&&f.length;_<b;_++)f[_]._setProject(a);h=!0}h&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function a(h){a.base.call(this,h);for(var f=this._children,_=0,b=f&&f.length;_<b;_++)f[_]._installEvents(h)},getLayer:function(){for(var a=this;a=a._parent;)if(a instanceof $e)return a;return null},getParent:function(){return this._parent},setParent:function(a){return a.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(a){this.removeChildren(),this.addChildren(a)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var a=this._getOwner();return a&&a._children[this._index+1]||null},getPreviousSibling:function(){var a=this._getOwner();return a&&a._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(a){var h=this._parent,f=h&&h._children;f&&h.insertChildren(a in f?a:t,[this])},equals:function(a){return a===this||a&&this._class===a._class&&this._style.equals(a._style)&&this._matrix.equals(a._matrix)&&this._locked===a._locked&&this._visible===a._visible&&this._blendMode===a._blendMode&&this._opacity===a._opacity&&this._clipMask===a._clipMask&&this._guide===a._guide&&this._equals(a)||!1},_equals:function(a){return r.equals(this._children,a._children)},clone:function(a){var h=new this.constructor(N.NO_INSERT),f=this._children,_=r.pick(a?a.insert:t,a===t||a===!0),b=r.pick(a?a.deep:t,!0);f&&h.copyAttributes(this),(!f||b)&&h.copyContent(this),f||h.copyAttributes(this),_&&h.insertAbove(this);var w=this._name,I=this._parent;if(w&&I){for(var f=I._children,D=w,k=1;f[w];)w=D+" "+k++;w!==D&&h.setName(w)}return h},copyContent:function(a){for(var h=a._children,f=0,_=h&&h.length;f<_;f++)this.addChild(h[f].clone(!1),!0)},copyAttributes:function(a,h){this.setStyle(a._style);for(var f=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],_=0,b=f.length;_<b;_++){var w=f[_];a.hasOwnProperty(w)&&(this[w]=a[w])}h||this._matrix.set(a._matrix,!0),this.setApplyMatrix(a._applyMatrix),this.setPivot(a._pivot),this.setSelection(a._selection);var I=a._data,D=a._name;this._data=I?r.clone(I):null,D&&this.setName(D)},rasterize:function(a,h){var f,_,b;r.isPlainObject(a)?(f=a.resolution,_=a.insert,b=a.raster):(f=a,_=h),b||(b=new Je(N.NO_INSERT));var w=this.getStrokeBounds(),I=(f||this.getView().getResolution())/72,D=w.getTopLeft().floor(),k=w.getBottomRight().ceil(),B=new Q(k.subtract(D)),H=B.multiply(I);if(b.setSize(H,!0),!H.isZero()){var U=b.getContext(!0),F=new ne().scale(I).translate(D.negate());U.save(),F.applyToContext(U),this.draw(U,new r({matrices:[F]})),U.restore()}return b._matrix.set(new ne().translate(D.add(B.divide(2))).scale(1/I)),(_===t||_)&&b.insertAbove(this),b},contains:function(){var a=this._matrix;return a.isInvertible()&&!!this._contains(a._inverseTransform(x.read(arguments)))},_contains:function(a){var h=this._children;if(h){for(var f=h.length-1;f>=0;f--)if(h[f].contains(a))return!0;return!1}return a.isInside(this.getInternalBounds())},isInside:function(){return G.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Re.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(a,h){return a instanceof N?this._asPathItem().getIntersections(a._asPathItem(),null,h,!0).length>0:!1}},new function(){function a(){var _=arguments;return this._hitTest(x.read(_),it.getOptions(_))}function h(){var _=arguments,b=x.read(_),w=it.getOptions(_),I=[];return this._hitTest(b,new r({all:I},w)),I}function f(_,b,w,I){var D=this._children;if(D)for(var k=D.length-1;k>=0;k--){var B=D[k],H=B!==I&&B._hitTest(_,b,w);if(H&&!b.all)return H}return null}return pe.inject({hitTest:a,hitTestAll:h,_hitTest:f}),{hitTest:a,hitTestAll:h,_hitTestChildren:f}},{_hitTest:function(a,h,f){if(this._locked||!this._visible||this._guide&&!h.guides||this.isEmpty())return null;var _=this._matrix,b=f?f.appended(_):this.getGlobalMatrix().prepend(this.getView()._matrix),w=Math.max(h.tolerance,1e-12),I=h._tolerancePadding=new Q(Re._getStrokePadding(w,_._shiftless().invert()));if(a=_._inverseTransform(a),!a||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(I.multiply(2))._containsPoint(a))return null;var D=!(h.guides&&!this._guide||h.selected&&!this.isSelected()||h.type&&h.type!==r.hyphenate(this._class)||h.class&&!(this instanceof h.class)),k=h.match,B=this,H,U;function F(O){return O&&k&&!k(O)&&(O=null),O&&h.all&&h.all.push(O),O}function q(O,j){var te=j?H["get"+j]():B.getPosition();if(a.subtract(te).divide(I).length<=1)return new it(O,B,{name:j?r.hyphenate(j):O,point:te})}var $=h.position,X=h.center,Z=h.bounds;if(D&&this._parent&&($||X||Z)){if((X||Z)&&(H=this.getInternalBounds()),U=$&&q("position")||X&&q("center","Center"),!U&&Z)for(var K=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],W=0;W<8&&!U;W++)U=q("bounds",K[W]);U=F(U)}return U||(U=this._hitTestChildren(a,h,b)||D&&F(this._hitTestSelf(a,h,b,this.getStrokeScaling()?null:b._shiftless().invert()))||null),U&&U.point&&(U.point=_.transform(U.point)),U},_hitTestSelf:function(a,h){if(h.fill&&this.hasFill()&&this._contains(a))return new it("fill",this)},matches:function(a,h){function f(I,D){for(var k in I)if(I.hasOwnProperty(k)){var B=I[k],H=D[k];if(r.isPlainObject(B)&&r.isPlainObject(H)){if(!f(B,H))return!1}else if(!r.equals(B,H))return!1}return!0}var _=typeof a;if(_==="object"){for(var b in a)if(a.hasOwnProperty(b)&&!this.matches(b,a[b]))return!1;return!0}else{if(_==="function")return a(this);if(a==="match")return h(this);var w=/^(empty|editable)$/.test(a)?this["is"+r.capitalize(a)]():a==="type"?r.hyphenate(this._class):this[a];if(a==="class"){if(typeof h=="function")return this instanceof h;w=this._class}if(typeof h=="function")return!!h(w);if(h){if(h.test)return h.test(w);if(r.isPlainObject(h))return f(h,w)}return r.equals(w,h)}},getItems:function(a){return N._getItems(this,a,this._matrix)},getItem:function(a){return N._getItems(this,a,this._matrix,null,!0)[0]||null},statics:{_getItems:function a(h,f,_,b,w){if(!b){var I=typeof f=="object"&&f,D=I&&I.overlapping,k=I&&I.inside,B=D||k,F=B&&G.read([B]);b={items:[],recursive:I&&I.recursive!==!1,inside:!!k,overlapping:!!D,rect:F,path:D&&new Re.Rectangle({rectangle:F,insert:!1})},I&&(f=r.filter({},f,{recursive:!0,inside:!0,overlapping:!0}))}var H=h._children,U=b.items,F=b.rect;_=F&&(_||new ne);for(var q=0,$=H&&H.length;q<$;q++){var X=H[q],Z=_&&_.appended(X._matrix),K=!0;if(F){var B=X.getBounds(Z);if(!F.intersects(B))continue;F.contains(B)||b.overlapping&&(B.contains(F)||b.path.intersects(X,Z))||(K=!1)}if(K&&X.matches(f)&&(U.push(X),w)||(b.recursive!==!1&&a(X,f,Z,b,w),w&&U.length>0))break}return U}}},{importJSON:function(a){var h=r.importJSON(a,this);return h!==this?this.addChild(h):h},addChild:function(a){return this.insertChild(t,a)},insertChild:function(a,h){var f=h?this.insertChildren(a,[h]):null;return f&&f[0]},addChildren:function(a){return this.insertChildren(this._children.length,a)},insertChildren:function(a,h){var f=this._children;if(f&&h&&h.length>0){h=r.slice(h);for(var _={},b=h.length-1;b>=0;b--){var w=h[b],I=w&&w._id;!w||_[I]?h.splice(b,1):(w._remove(!1,!0),_[I]=!0)}r.splice(f,h,a,0);for(var D=this._project,k=D._changes,b=0,B=h.length;b<B;b++){var w=h[b],H=w._name;w._parent=this,w._setProject(D,!0),H&&w.setName(H),k&&w._changed(5)}this._changed(11)}else h=null;return h},_insertItem:"#insertChild",_insertAt:function(a,h){var f=a&&a._getOwner(),_=a!==this&&f?this:null;return _&&(_._remove(!1,!0),f._insertItem(a._index+h,_)),_},insertAbove:function(a){return this._insertAt(a,1)},insertBelow:function(a){return this._insertAt(a,0)},sendToBack:function(){var a=this._getOwner();return a?a._insertItem(0,this):null},bringToFront:function(){var a=this._getOwner();return a?a._insertItem(t,this):null},appendTop:"#addChild",appendBottom:function(a){return this.insertChild(0,a)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(a){return a._insertItem(t,this)},copyTo:function(a){return this.clone(!1).addTo(a)},reduce:function(a){var h=this._children;if(h&&h.length===1){var f=h[0].reduce(a);return this._parent?(f.insertAbove(this),this.remove()):f.remove(),f}return this},_removeNamed:function(){var a=this._getOwner();if(a){var h=a._children,f=a._namedChildren,_=this._name,b=f[_],w=b?b.indexOf(this):-1;w!==-1&&(h[_]==this&&delete h[_],b.splice(w,1),b.length?h[_]=b[0]:delete f[_])}},_remove:function(a,h){var f=this._getOwner(),_=this._project,b=this._index;return this._style&&this._style._dispose(),f?(this._name&&this._removeNamed(),b!=null&&(_._activeLayer===this&&(_._activeLayer=this.getNextSibling()||this.getPreviousSibling()),r.splice(f._children,null,b,1)),this._installEvents(!1),a&&_._changes&&this._changed(5),h&&f._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(a){var h=a&&a.insertBelow(this);return h&&this.remove(),h},removeChildren:function(a,h){if(!this._children)return null;a=a||0,h=r.pick(h,this._children.length);for(var f=r.splice(this._children,null,a,h-a),_=f.length-1;_>=0;_--)f[_]._remove(!0,!1);return f.length>0&&this._changed(11),f},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var a=0,h=this._children.length;a<h;a++)this._children[a]._index=a;this._changed(11)}},isEmpty:function(a){var h=this._children,f=h?h.length:0;if(a){for(var _=0;_<f;_++)if(!h[_].isEmpty(a))return!1;return!0}return!f},isEditable:function(){for(var a=this;a;){if(!a._visible||a._locked)return!1;a=a._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(a){function h(I){var D=[];do D.unshift(I);while(I=I._parent);return D}for(var f=h(this),_=h(a),b=0,w=Math.min(f.length,_.length);b<w;b++)if(f[b]!=_[b])return f[b]._index<_[b]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(a){return this._getOrder(a)===-1},isBelow:function(a){return this._getOrder(a)===1},isParent:function(a){return this._parent===a},isChild:function(a){return a&&a._parent===this},isDescendant:function(a){for(var h=this;h=h._parent;)if(h===a)return!0;return!1},isAncestor:function(a){return a?a.isDescendant(this):!1},isSibling:function(a){return this._parent===a._parent},isGroupedWith:function(a){for(var h=this._parent;h;){if(h._parent&&/^(Group|Layer|CompoundPath)$/.test(h._class)&&a.isDescendant(h))return!0;h=h._parent}return!1}},r.each(["rotate","scale","shear","skew"],function(a){var h=a==="rotate";this[a]=function(){var f=arguments,_=(h?r:x).read(f),b=x.read(f,0,{readNull:!0});return this.transform(new ne()[a](_,b||this.getPosition(!0)))}},{translate:function(){var a=new ne;return this.transform(a.translate.apply(a,arguments))},transform:function(a,h,f){var _=this._matrix,b=a&&!a.isIdentity(),w=f&&this._canApplyMatrix||this._applyMatrix&&(b||!_.isIdentity()||h&&this._children);if(!b&&!w)return this;if(b){!a.isInvertible()&&_.isInvertible()&&(_._backup=_.getValues()),_.prepend(a,!0);var I=this._style,D=I.getFillColor(!0),k=I.getStrokeColor(!0);D&&D.transform(a),k&&k.transform(a)}if(w&&(w=this._transformContent(_,h,f))){var B=this._pivot;B&&_._transformPoint(B,B,!0),_.reset(!0),f&&this._canApplyMatrix&&(this._applyMatrix=!0)}var H=this._bounds,U=this._position;(b||w)&&this._changed(25);var F=b&&H&&a.decompose();if(F&&F.skewing.isZero()&&F.rotation%90===0){for(var q in H){var $=H[q];if($.nonscaling)delete H[q];else if(w||!$.internal){var X=$.rect;a._transformBounds(X,X)}}this._bounds=H;var Z=H[this._getBoundsCacheKey(this._boundsOptions||{})];Z&&(this._position=this._getPositionFromBounds(Z.rect))}else b&&U&&this._pivot&&(this._position=a._transformPoint(U,U));return this},_transformContent:function(a,h,f){var _=this._children;if(_){for(var b=0,w=_.length;b<w;b++)_[b].transform(a,h,f);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(x.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(x.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(x.read(arguments))},localToParent:function(){return this._matrix._transformPoint(x.read(arguments))},fitBounds:function(a,h){a=G.read(arguments);var f=this.getBounds(),_=f.height/f.width,b=a.height/a.width,w=(h?_>b:_<b)?a.width/f.width:a.height/f.height,I=new G(new x,new Q(f.width*w,f.height*w));I.setCenter(a.getCenter()),this.setBounds(I)}}),{_setStyles:function(a,h,f){var _=this._style,b=this._matrix;if(_.hasFill()&&(a.fillStyle=_.getFillColor().toCanvasStyle(a,b)),_.hasStroke()){a.strokeStyle=_.getStrokeColor().toCanvasStyle(a,b),a.lineWidth=_.getStrokeWidth();var w=_.getStrokeJoin(),I=_.getStrokeCap(),D=_.getMiterLimit();if(w&&(a.lineJoin=w),I&&(a.lineCap=I),D&&(a.miterLimit=D),Jt.support.nativeDash){var k=_.getDashArray(),B=_.getDashOffset();k&&k.length&&("setLineDash"in a?(a.setLineDash(k),a.lineDashOffset=B):(a.mozDash=k,a.mozDashOffset=B))}}if(_.hasShadow()){var H=h.pixelRatio||1,U=f._shiftless().prepend(new ne().scale(H,H)),F=U.transform(new x(_.getShadowBlur(),0)),q=U.transform(this.getShadowOffset());a.shadowColor=_.getShadowColor().toCanvasStyle(a),a.shadowBlur=F.getLength(),a.shadowOffsetX=q.x,a.shadowOffsetY=q.y}},draw:function(a,h,f){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var _=h.matrices,b=h.viewMatrix,w=this._matrix,I=_[_.length-1].appended(w);if(I.isInvertible()){b=b?b.appended(I):I,_.push(I),h.updateMatrix&&(this._globalMatrix=I);var D=this._blendMode,k=T.clamp(this._opacity,0,1),B=D==="normal",H=tt.nativeModes[D],U=B&&k===1||h.dontStart||h.clip||(H||B&&k<1)&&this._canComposite(),F=h.pixelRatio||1,q,$,X;if(!U){var Z=this.getStrokeBounds(b);if(!Z.width||!Z.height){_.pop();return}X=h.offset,$=h.offset=Z.getTopLeft().floor(),q=a,a=yt.getContext(Z.getSize().ceil().add(1).multiply(F)),F!==1&&a.scale(F,F)}a.save();var K=f?f.appended(w):this._canScaleStroke&&!this.getStrokeScaling(!0)&&b,W=!U&&h.clipItem,O=!K||W;if(U?(a.globalAlpha=k,H&&(a.globalCompositeOperation=D)):O&&a.translate(-$.x,-$.y),O&&(U?w:b).applyToContext(a),W&&h.clipItem.draw(a,h.extend({clip:!0})),K){a.setTransform(F,0,0,F,0,0);var j=h.offset;j&&a.translate(-j.x,-j.y)}this._draw(a,h,b,K),a.restore(),_.pop(),h.clip&&!h.dontFinish&&a.clip(this.getFillRule()),U||(tt.process(D,a,q,k,$.subtract(X).multiply(F)),yt.release(a),h.offset=X)}}},_isUpdated:function(a){var h=this._parent;if(h instanceof at)return h._isUpdated(a);var f=this._updateVersion===a;return!f&&h&&h._visible&&h._isUpdated(a)&&(this._updateVersion=a,f=!0),f},_drawSelection:function(a,h,f,_,b){var w=this._selection,I=w&1,D=w&2||I&&this._selectBounds,k=w&4;if(this._drawSelected||(I=!1),(I||D||k)&&this._isUpdated(b)){var B,H=this.getSelectedColor(!0)||(B=this.getLayer())&&B.getSelectedColor(!0),U=h.appended(this.getGlobalMatrix(!0)),F=f/2;if(a.strokeStyle=a.fillStyle=H?H.toCanvasStyle(a):"#009dec",I&&this._drawSelected(a,U,_),k){var q=this.getPosition(!0),$=this._parent,X=$?$.localToGlobal(q):q,Z=X.x,K=X.y;a.beginPath(),a.arc(Z,K,F,0,Math.PI*2,!0),a.stroke();for(var W=[[0,-1],[1,0],[0,1],[-1,0]],O=F,j=f+1,te=0;te<4;te++){var se=W[te],J=se[0],de=se[1];a.moveTo(Z+J*O,K+de*O),a.lineTo(Z+J*j,K+de*j),a.stroke()}}if(D){var me=U._transformCorners(this.getInternalBounds());a.beginPath();for(var te=0;te<8;te++)a[te?"lineTo":"moveTo"](me[te],me[++te]);a.closePath(),a.stroke();for(var te=0;te<8;te++)a.fillRect(me[te]-F,me[++te]-F,f,f)}}},_canComposite:function(){return!1}},r.each(["down","drag","up","move"],function(a){this["removeOn"+r.capitalize(a)]=function(){var h={};return h[a]=!0,this.removeOn(h)}},{removeOn:function(a){for(var h in a)if(a[h]){var f="mouse"+h,_=this._project,b=_._removeSets=_._removeSets||{};b[f]=b[f]||{},b[f][this._id]=this}return this}}),{tween:function(a,h,f){f||(f=h,h=a,a=null,f||(f=h,h=null));var _=f&&f.easing,b=f&&f.start,w=f!=null&&(typeof f=="number"?f:f.duration),I=new we(this,a,h,w,_,b);function D(k){I._handleFrame(k.time*1e3),I.running||this.off("frame",D)}return w&&this.on("frame",D),I},tweenTo:function(a,h){return this.tween(null,a,h)},tweenFrom:function(a,h){return this.tween(a,null,h)}}),Ie=N.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(h){this._children=[],this._namedChildren={},this._initialize(h)||this.addChildren(Array.isArray(h)?h:arguments)},_changed:function a(h){a.base.call(this,h),h&2050&&(this._clipItem=t)},_getClipItem:function(){var a=this._clipItem;if(a===t){a=null;for(var h=this._children,f=0,_=h.length;f<_;f++)if(h[f]._clipMask){a=h[f];break}this._clipItem=a}return a},isClipped:function(){return!!this._getClipItem()},setClipped:function(a){var h=this.getFirstChild();h&&h.setClipMask(a)},_getBounds:function a(h,f){var _=this._getClipItem();return _?_._getCachedBounds(_._matrix.prepended(h),r.set({},f,{stroke:!1})):a.base.call(this,h,f)},_hitTestChildren:function a(h,f,_){var b=this._getClipItem();return(!b||b.contains(h))&&a.base.call(this,h,f,_,b)},_draw:function(a,h){var f=h.clip,_=!f&&this._getClipItem();h=h.extend({clipItem:_,clip:!1}),f?(a.beginPath(),h.dontStart=h.dontFinish=!0):_&&_.draw(a,h.extend({clip:!0}));for(var b=this._children,w=0,I=b.length;w<I;w++){var D=b[w];D!==_&&D.draw(a,h)}}}),$e=Ie.extend({_class:"Layer",initialize:function(){Ie.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function a(){return this._parent?a.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Ee=N.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(h,f){this._initialize(h,f)},_equals:function(a){return this._type===a._type&&this._size.equals(a._size)&&r.equals(this._radius,a._radius)},copyContent:function(a){this.setType(a._type),this.setSize(a._size),this.setRadius(a._radius)},getType:function(){return this._type},setType:function(a){this._type=a},getShape:"#getType",setShape:"#setType",getSize:function(){var a=this._size;return new z(a.width,a.height,this,"setSize")},setSize:function(){var a=Q.read(arguments);if(!this._size)this._size=a.clone();else if(!this._size.equals(a)){var h=this._type,f=a.width,_=a.height;h==="rectangle"?this._radius.set(Q.min(this._radius,a.divide(2).abs())):h==="circle"?(f=_=(f+_)/2,this._radius=f/2):h==="ellipse"&&this._radius._set(f/2,_/2),this._size._set(f,_),this._changed(9)}},getRadius:function(){var a=this._radius;return this._type==="circle"?a:new z(a.width,a.height,this,"setRadius")},setRadius:function(a){var h=this._type;if(h==="circle"){if(a===this._radius)return;var f=a*2;this._radius=a,this._size._set(f,f)}else if(a=Q.read(arguments),!this._radius)this._radius=a.clone();else{if(this._radius.equals(a))return;if(this._radius.set(a),h==="rectangle"){var f=Q.max(this._size,a.multiply(2));this._size.set(f)}else h==="ellipse"&&this._size._set(a.width*2,a.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(a){var h=new Re[r.capitalize(this._type)]({center:new x,size:this._size,radius:this._radius,insert:!1});return h.copyAttributes(this),Jt.settings.applyMatrix&&h.setApplyMatrix(!0),(a===t||a)&&h.insertAbove(this),h},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(a,h,f,_){var b=this._style,w=b.hasFill(),I=b.hasStroke(),D=h.dontFinish||h.clip,k=!_;if(w||I||D){var B=this._type,H=this._radius,U=B==="circle";if(h.dontStart||a.beginPath(),k&&U)a.arc(0,0,H,0,Math.PI*2,!0);else{var F=U?H:H.width,q=U?H:H.height,$=this._size,X=$.width,Z=$.height;if(k&&B==="rectangle"&&F===0&&q===0)a.rect(-X/2,-Z/2,X,Z);else{var K=X/2,W=Z/2,O=1-.5522847498307936,j=F*O,te=q*O,se=[-K,-W+q,-K,-W+te,-K+j,-W,-K+F,-W,K-F,-W,K-j,-W,K,-W+te,K,-W+q,K,W-q,K,W-te,K-j,W,K-F,W,-K+F,W,-K+j,W,-K,W-te,-K,W-q];_&&_.transform(se,se,32),a.moveTo(se[0],se[1]),a.bezierCurveTo(se[2],se[3],se[4],se[5],se[6],se[7]),K!==F&&a.lineTo(se[8],se[9]),a.bezierCurveTo(se[10],se[11],se[12],se[13],se[14],se[15]),W!==q&&a.lineTo(se[16],se[17]),a.bezierCurveTo(se[18],se[19],se[20],se[21],se[22],se[23]),K!==F&&a.lineTo(se[24],se[25]),a.bezierCurveTo(se[26],se[27],se[28],se[29],se[30],se[31])}}a.closePath()}!D&&(w||I)&&(this._setStyles(a,h,f),w&&(a.fill(b.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),I&&a.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(a,h){var f=new G(this._size).setCenter(0,0),_=this._style,b=h.stroke&&_.hasStroke()&&_.getStrokeWidth();return a&&(f=a._transformBounds(f)),b?f.expand(Re._getStrokePadding(b,this._getStrokeMatrix(a,h))):f}},new function(){function a(f,_,b){var w=f._radius;if(!w.isZero())for(var I=f._size.divide(2),D=1;D<=4;D++){var k=new x(D>1&&D<4?-1:1,D>2?-1:1),B=k.multiply(I),H=B.subtract(k.multiply(w)),U=new G(b?B.add(k.multiply(b)):B,H);if(U.contains(_))return{point:H,quadrant:D}}}function h(f,_,b,w){var I=f.divide(_);return(!w||I.isInQuadrant(w))&&I.subtract(I.normalize()).multiply(_).divide(b).length<=1}return{_contains:function f(_){if(this._type==="rectangle"){var b=a(this,_);return b?_.subtract(b.point).divide(this._radius).getLength()<=1:f.base.call(this,_)}else return _.divide(this.size).getLength()<=.5},_hitTestSelf:function f(_,b,w,I){var D=!1,k=this._style,B=b.stroke&&k.hasStroke(),H=b.fill&&k.hasFill();if(B||H){var U=this._type,F=this._radius,q=B?k.getStrokeWidth()/2:0,$=b._tolerancePadding.add(Re._getStrokePadding(q,!k.getStrokeScaling()&&I));if(U==="rectangle"){var X=$.multiply(2),Z=a(this,_,X);if(Z)D=h(_.subtract(Z.point),F,$,Z.quadrant);else{var K=new G(this._size).setCenter(0,0),W=K.expand(X),O=K.expand(X.negate());D=W._containsPoint(_)&&!O._containsPoint(_)}}else D=h(_,F,$)}return D?new it(B?"stroke":"fill",this):f.base.apply(this,arguments)}}},{statics:new function(){function a(h,f,_,b,w){var I=r.create(Ee.prototype);return I._type=h,I._size=_,I._radius=b,I._initialize(r.getNamed(w),f),I}return{Circle:function(){var h=arguments,f=x.readNamed(h,"center"),_=r.readNamed(h,"radius");return a("circle",f,new Q(_*2),_,h)},Rectangle:function(){var h=arguments,f=G.readNamed(h,"rectangle"),_=Q.min(Q.readNamed(h,"radius"),f.getSize(!0).divide(2));return a("rectangle",f.getCenter(!0),f.getSize(!0),_,h)},Ellipse:function(){var h=arguments,f=Ee._readEllipse(h),_=f.radius;return a("ellipse",f.center,_.multiply(2),_,h)},_readEllipse:function(h){var f,_;if(r.hasNamed(h,"radius"))f=x.readNamed(h,"center"),_=Q.readNamed(h,"radius");else{var b=G.readNamed(h,"rectangle");f=b.getCenter(!0),_=b.getSize(!0).divide(2)}return{center:f,radius:_}}}}}),Je=N.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(h,f){if(!this._initialize(h,f!==t&&x.read(arguments))){var _,b=typeof h,w=b==="string"?s.getElementById(h):b==="object"?h:null;if(w&&w!==N.NO_INSERT){if(w.getContext||w.naturalHeight!=null)_=w;else if(w){var I=Q.read(arguments);I.isZero()||(_=yt.getCanvas(I))}}_?this.setImage(_):this.setSource(h)}this._size||(this._size=new Q,this._loaded=!1)},_equals:function(a){return this.getSource()===a.getSource()},copyContent:function(a){var h=a._image,f=a._canvas;if(h)this._setImage(h);else if(f){var _=yt.getCanvas(a._size);_.getContext("2d").drawImage(f,0,0),this._setImage(_)}this._crossOrigin=a._crossOrigin},getSize:function(){var a=this._size;return new z(a?a.width:0,a?a.height:0,this,"setSize")},setSize:function(a,h){var f=Q.read(arguments);if(f.equals(this._size))h&&this.clear();else if(f.width>0&&f.height>0){var _=!h&&this.getElement();this._setImage(yt.getCanvas(f)),_&&this.getContext(!0).drawImage(_,0,0,f.width,f.height)}else this._canvas&&yt.release(this._canvas),this._size=f.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(a){this.setSize(a,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(a){this.setSize(this.getWidth(),a)},getLoaded:function(){return this._loaded},isEmpty:function(){var a=this._size;return!a||a.width===0&&a.height===0},getResolution:function(){var a=this._matrix,h=new x(0,0).transform(a),f=new x(1,0).transform(a).subtract(h),_=new x(0,1).transform(a).subtract(h);return new Q(72/f.getLength(),72/_.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(a){var h=this;function f(_){var b=h.getView(),w=_&&_.type||"load";b&&h.responds(w)&&(Jt=b._scope,h.emit(w,new Zs(_)))}this._setImage(a),this._loaded?setTimeout(f,0):a&&Ei.add(a,{load:function(_){h._setImage(a),f(_)},error:f})},_setImage:function(a){this._canvas&&yt.release(this._canvas),a&&a.getContext?(this._image=null,this._canvas=a,this._loaded=!0):(this._image=a,this._canvas=null,this._loaded=!!(a&&a.src&&a.complete)),this._size=new Q(a?a.naturalWidth||a.width:0,a?a.naturalHeight||a.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var a=yt.getContext(this._size);try{this._image&&a.drawImage(this._image,0,0),this._canvas=a.canvas}catch{yt.release(a)}}return this._canvas},setCanvas:"#setImage",getContext:function(a){return this._context||(this._context=this.getCanvas().getContext("2d")),a&&(this._image=null,this._changed(1025)),this._context},setContext:function(a){this._context=a},getSource:function(){var a=this._image;return a&&a.src||this.toDataURL()},setSource:function(a){var h=new e.Image,f=this._crossOrigin;f&&(h.crossOrigin=f),a&&(h.src=a),this.setImage(h)},getCrossOrigin:function(){var a=this._image;return a&&a.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(a){this._crossOrigin=a;var h=this._image;h&&(h.crossOrigin=a)},getSmoothing:function(){return this._smoothing},setSmoothing:function(a){this._smoothing=typeof a=="string"?a:a?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var a=G.read(arguments),h=yt.getContext(a.getSize());return h.drawImage(this.getCanvas(),a.x,a.y,a.width,a.height,0,0,a.width,a.height),h.canvas},getSubRaster:function(){var a=G.read(arguments),h=new Je(N.NO_INSERT);return h._setImage(this.getSubCanvas(a)),h.translate(a.getCenter().subtract(this.getSize().divide(2))),h._matrix.prepend(this._matrix),h.insertAbove(this),h},toDataURL:function(){var a=this._image,h=a&&a.src;if(/^data:/.test(h))return h;var f=this.getCanvas();return f?f.toDataURL.apply(f,arguments):null},drawImage:function(a){var h=x.read(arguments,1);this.getContext(!0).drawImage(a,h.x,h.y)},getAverageColor:function(a){var h,f;if(a?a instanceof At?(f=a,h=a.getBounds()):typeof a=="object"&&("width"in a?h=new G(a):"x"in a&&(h=new G(a.x-.5,a.y-.5,1,1))):h=this.getBounds(),!h)return null;var _=32,b=Math.min(h.width,_),w=Math.min(h.height,_),I=Je._sampleContext;I?I.clearRect(0,0,_+1,_+1):I=Je._sampleContext=yt.getContext(new Q(_)),I.save();var D=new ne().scale(b/h.width,w/h.height).translate(-h.x,-h.y);D.applyToContext(I),f&&f.draw(I,new r({clip:!0,matrices:[D]})),this._matrix.applyToContext(I);var k=this.getElement(),B=this._size;k&&I.drawImage(k,-B.width/2,-B.height/2),I.restore();for(var H=I.getImageData(.5,.5,Math.ceil(b),Math.ceil(w)).data,U=[0,0,0],F=0,q=0,$=H.length;q<$;q+=4){var X=H[q+3];F+=X,X/=255,U[0]+=H[q]*X,U[1]+=H[q+1]*X,U[2]+=H[q+2]*X}for(var q=0;q<3;q++)U[q]/=F;return F?hi.read(U):null},getPixel:function(){var a=x.read(arguments),h=this.getContext().getImageData(a.x,a.y,1,1).data;return new hi("rgb",[h[0]/255,h[1]/255,h[2]/255],h[3]/255)},setPixel:function(){var a=arguments,h=x.read(a),f=hi.read(a),_=f._convert("rgb"),b=f._alpha,w=this.getContext(!0),I=w.createImageData(1,1),D=I.data;D[0]=_[0]*255,D[1]=_[1]*255,D[2]=_[2]*255,D[3]=b!=null?b*255:255,w.putImageData(I,h.x,h.y)},clear:function(){var a=this._size;this.getContext(!0).clearRect(0,0,a.width+1,a.height+1)},createImageData:function(){var a=Q.read(arguments);return this.getContext().createImageData(a.width,a.height)},getImageData:function(){var a=G.read(arguments);return a.isEmpty()&&(a=new G(this._size)),this.getContext().getImageData(a.x,a.y,a.width,a.height)},putImageData:function(a){var h=x.read(arguments,1);this.getContext(!0).putImageData(a,h.x,h.y)},setImageData:function(a){this.setSize(a),this.getContext(!0).putImageData(a,0,0)},_getBounds:function(a,h){var f=new G(this._size).setCenter(0,0);return a?a._transformBounds(f):f},_hitTestSelf:function(a){if(this._contains(a)){var h=this;return new it("pixel",h,{offset:a.add(h._size.divide(2)).round(),color:{get:function(){return h.getPixel(this.offset)}}})}},_draw:function(a,h,f){var _=this.getElement();if(_&&_.width>0&&_.height>0){a.globalAlpha=T.clamp(this._opacity,0,1),this._setStyles(a,h,f);var b=this._smoothing,w=b==="off";ai.setPrefixed(a,w?"imageSmoothingEnabled":"imageSmoothingQuality",w?!1:b),a.drawImage(_,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Ge=N.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(h,f){this._initialize(h,f!==t&&x.read(arguments,1))||this.setDefinition(h instanceof _t?h:new _t(h))},_equals:function(a){return this._definition===a._definition},copyContent:function(a){this.setDefinition(a._definition)},getDefinition:function(){return this._definition},setDefinition:function(a){this._definition=a,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(a,h){var f=this._definition._item;return f._getCachedBounds(f._matrix.prepended(a),h)},_hitTestSelf:function(a,h,f){var _=h.extend({all:!1}),b=this._definition._item._hitTest(a,_,f);return b&&(b.item=this),b},_draw:function(a,h){this._definition._item.draw(a,h)}}),_t=r.extend({_class:"SymbolDefinition",initialize:function(h,f){this._id=L.get(),this.project=Jt.project,h&&this.setItem(h,f)},_serialize:function(a,h){return h.add(this,function(){return r.serialize([this._class,this._item],a,!1,h)})},_changed:function(a){a&8&&N._clearBoundsCache(this),a&1&&this.project._changed(a)},getItem:function(){return this._item},setItem:function(a,h){a._symbol&&(a=a.clone()),this._item&&(this._item._symbol=null),this._item=a,a.remove(),a.setSelected(!1),h||a.setPosition(new x),a._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(a){return new Ge(this,a)},clone:function(){return new _t(this._item.clone(!1))},equals:function(a){return a===this||a&&this._item.equals(a._item)||!1}}),it=r.extend({_class:"HitResult",initialize:function(h,f,_){this.type=h,this.item=f,_&&this.inject(_)},statics:{getOptions:function(a){var h=a&&r.read(a);return new r({type:null,tolerance:Jt.settings.hitTolerance,fill:!h,stroke:!h,segments:!h,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},h)}}}),nt=r.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(h,f,_,b,w,I){var D=arguments.length,k,B,H,U;D>0&&(h==null||typeof h=="object"?D===1&&h&&"point"in h?(k=h.point,B=h.handleIn,H=h.handleOut,U=h.selection):(k=h,B=f,H=_,U=b):(k=[h,f],B=_!==t?[_,b]:null,H=w!==t?[w,I]:null)),new Ct(k,this,"_point"),new Ct(B,this,"_handleIn"),new Ct(H,this,"_handleOut"),U&&this.setSelection(U)},_serialize:function(a,h){var f=this._point,_=this._selection,b=_||this.hasHandles()?[f,this._handleIn,this._handleOut]:f;return _&&b.push(_),r.serialize(b,a,!0,h)},_changed:function(a){var h=this._path;if(h){var f=h._curves,_=this._index,b;f&&((!a||a===this._point||a===this._handleIn)&&(b=_>0?f[_-1]:h._closed?f[f.length-1]:null)&&b._changed(),(!a||a===this._point||a===this._handleOut)&&(b=f[_])&&b._changed()),h._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(x.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(x.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(x.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var a=this._handleIn,h=this._handleOut;return!a.isZero()&&!h.isZero()&&a.isCollinear(h)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(a){var h=this._selection,f=this._path;this._selection=a=a||0,f&&a!==h&&(f._updateSelection(this,h,a),f._changed(257))},_changeSelection:function(a,h){var f=this._selection;this.setSelection(h?f|a:f&~a)},isSelected:function(){return!!(this._selection&7)},setSelected:function(a){this._changeSelection(7,a)},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var a=this._path,h=this._index;return a?(h>0&&!a._closed&&h===a._segments.length-1&&h--,a.getCurves()[h]||null):null},getLocation:function(){var a=this.getCurve();return a?new Zt(a,this===a._segment1?0:1):null},getNext:function(){var a=this._path&&this._path._segments;return a&&(a[this._index+1]||this._path._closed&&a[0])||null},smooth:function(a,h,f){var _=a||{},b=_.type,w=_.factor,I=this.getPrevious(),D=this.getNext(),k=(I||this)._point,B=this._point,H=(D||this)._point,U=k.getDistance(B),F=B.getDistance(H);if(!b||b==="catmull-rom"){var q=w===t?.5:w,$=Math.pow(U,q),X=$*$,Z=Math.pow(F,q),K=Z*Z;if(!h&&I){var W=2*K+3*Z*$+X,O=3*Z*(Z+$);this.setHandleIn(O!==0?new x((K*k._x+W*B._x-X*H._x)/O-B._x,(K*k._y+W*B._y-X*H._y)/O-B._y):new x)}if(!f&&D){var W=2*X+3*$*Z+K,O=3*$*($+Z);this.setHandleOut(O!==0?new x((X*H._x+W*B._x-K*k._x)/O-B._x,(X*H._y+W*B._y-K*k._y)/O-B._y):new x)}}else if(b==="geometric"){if(I&&D){var j=k.subtract(H),te=w===t?.4:w,se=te*U/(U+F);h||this.setHandleIn(j.multiply(se)),f||this.setHandleOut(j.multiply(se-te))}}else throw new Error("Smoothing method '"+b+"' not supported.")},getPrevious:function(){var a=this._path&&this._path._segments;return a&&(a[this._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var a=this._path;return a&&this._index===a._segments.length-1||!1},reverse:function(){var a=this._handleIn,h=this._handleOut,f=a.clone();a.set(h),h.set(f)},reversed:function(){return new nt(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new nt(this._point,this._handleIn,this._handleOut)},equals:function(a){return a===this||a&&this._class===a._class&&this._point.equals(a._point)&&this._handleIn.equals(a._handleIn)&&this._handleOut.equals(a._handleOut)||!1},toString:function(){var a=["point: "+this._point];return this._handleIn.isZero()||a.push("handleIn: "+this._handleIn),this._handleOut.isZero()||a.push("handleOut: "+this._handleOut),"{ "+a.join(", ")+" }"},transform:function(a){this._transformCoordinates(a,new Array(6),!0),this._changed()},interpolate:function(a,h,f){var _=1-f,b=f,w=a._point,I=h._point,D=a._handleIn,k=h._handleIn,B=h._handleOut,H=a._handleOut;this._point._set(_*w._x+b*I._x,_*w._y+b*I._y,!0),this._handleIn._set(_*D._x+b*k._x,_*D._y+b*k._y,!0),this._handleOut._set(_*H._x+b*B._x,_*H._y+b*B._y,!0),this._changed()},_transformCoordinates:function(a,h,f){var _=this._point,b=!f||!this._handleIn.isZero()?this._handleIn:null,w=!f||!this._handleOut.isZero()?this._handleOut:null,I=_._x,D=_._y,k=2;return h[0]=I,h[1]=D,b&&(h[k++]=b._x+I,h[k++]=b._y+D),w&&(h[k++]=w._x+I,h[k++]=w._y+D),a&&(a._transformCoordinates(h,h,k/2),I=h[0],D=h[1],f?(_._x=I,_._y=D,k=2,b&&(b._x=h[k++]-I,b._y=h[k++]-D),w&&(w._x=h[k++]-I,w._y=h[k++]-D)):(b||(h[k++]=I,h[k++]=D),w||(h[k++]=I,h[k++]=D))),h}}),Ct=x.extend({initialize:function(h,f,_){var b,w,I;if(!h)b=w=0;else if((b=h[0])!==t)w=h[1];else{var D=h;(b=D.x)===t&&(D=x.read(arguments),b=D.x),w=D.y,I=D.selected}this._x=b,this._y=w,this._owner=f,f[_]=this,I&&this.setSelected(!0)},_set:function(a,h){return this._x=a,this._y=h,this._owner._changed(this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner._changed(this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner._changed(this)},isZero:function(){var a=T.isZero;return a(this._x)&&a(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner._changeSelection(this._getSelection(),a)},_getSelection:function(){var a=this._owner;return this===a._point?1:this===a._handleIn?2:this===a._handleOut?4:0}}),Qe=r.extend({_class:"Curve",beans:!0,initialize:function(h,f,_,b,w,I,D,k){var B=arguments.length,H,U,F,q,$,X;B===3?(this._path=h,H=f,U=_):B?B===1?"segment1"in h?(H=new nt(h.segment1),U=new nt(h.segment2)):"point1"in h?(F=h.point1,$=h.handle1,X=h.handle2,q=h.point2):Array.isArray(h)&&(F=[h[0],h[1]],q=[h[6],h[7]],$=[h[2]-h[0],h[3]-h[1]],X=[h[4]-h[6],h[5]-h[7]]):B===2?(H=new nt(h),U=new nt(f)):B===4?(F=h,$=f,X=_,q=b):B===8&&(F=[h,f],q=[D,k],$=[_-h,b-f],X=[w-D,I-k]):(H=new nt,U=new nt),this._segment1=H||new nt(F,null,$),this._segment2=U||new nt(q,X,null)},_serialize:function(a,h){return r.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],a,!0,h)},_changed:function(){this._length=this._bounds=t},clone:function(){return new Qe(this._segment1,this._segment2)},toString:function(){var a=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||a.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||a.push("handle2: "+this._segment2._handleIn),a.push("point2: "+this._segment2._point),"{ "+a.join(", ")+" }"},classify:function(){return Qe.classify(this.getValues())},remove:function(){var a=!1;if(this._path){var h=this._segment2,f=h._handleOut;a=h.remove(),a&&this._segment1._handleOut.set(f)}return a},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(x.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(x.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(x.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(x.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var a=this._path;return a&&this._segment1._index===a._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(a){this.getPoint1().setSelected(a),this.getHandle1().setSelected(a),this.getHandle2().setSelected(a),this.getPoint2().setSelected(a)},getValues:function(a){return Qe.getValues(this._segment1,this._segment2,a)},getPoints:function(){for(var a=this.getValues(),h=[],f=0;f<8;f+=2)h.push(new x(a[f],a[f+1]));return h}},{getLength:function(){return this._length==null&&(this._length=Qe.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Qe.getArea(this.getValues())},getLine:function(){return new ae(this._segment1._point,this._segment2._point)},getPart:function(a,h){return new Qe(Qe.getPart(this.getValues(),a,h))},getPartLength:function(a,h){return Qe.getLength(this.getValues(),a,h)},divideAt:function(a){return this.divideAtTime(a&&a.curve===this?a.time:this.getTimeAt(a))},divideAtTime:function(a,h){var f=1e-8,_=1-f,b=null;if(a>=f&&a<=_){var w=Qe.subdivide(this.getValues(),a),I=w[0],D=w[1],k=h||this.hasHandles(),B=this._segment1,H=this._segment2,U=this._path;k&&(B._handleOut._set(I[2]-I[0],I[3]-I[1]),H._handleIn._set(D[4]-D[6],D[5]-D[7]));var F=I[6],q=I[7],$=new nt(new x(F,q),k&&new x(I[4]-F,I[5]-q),k&&new x(D[2]-F,D[3]-q));U?(U.insert(B._index+1,$),b=this.getNext()):(this._segment2=$,this._changed(),b=new Qe($,H))}return b},splitAt:function(a){var h=this._path;return h?h.splitAt(a):null},splitAtTime:function(a){return this.splitAt(this.getLocationAtTime(a))},divide:function(a,h){return this.divideAtTime(a===t?.5:h?a:this.getTimeAt(a))},split:function(a,h){return this.splitAtTime(a===t?.5:h?a:this.getTimeAt(a))},reversed:function(){return new Qe(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(a,h,f,_){var b=a._point,w=a._handleOut,I=h._handleIn,D=h._point,k=b.x,B=b.y,H=D.x,U=D.y,F=_?[k,B,k,B,H,U,H,U]:[k,B,k+w._x,B+w._y,H+I._x,U+I._y,H,U];return f&&f._transformCoordinates(F,F,4),F},subdivide:function(a,h){var f=a[0],_=a[1],b=a[2],w=a[3],I=a[4],D=a[5],k=a[6],B=a[7];h===t&&(h=.5);var H=1-h,U=H*f+h*b,F=H*_+h*w,q=H*b+h*I,$=H*w+h*D,X=H*I+h*k,Z=H*D+h*B,K=H*U+h*q,W=H*F+h*$,O=H*q+h*X,j=H*$+h*Z,te=H*K+h*O,se=H*W+h*j;return[[f,_,U,F,K,W,te,se],[te,se,O,j,X,Z,k,B]]},getMonoCurves:function(a,h){var f=[],_=h?0:1,b=a[_+0],w=a[_+2],I=a[_+4],D=a[_+6];if(b>=w==w>=I&&w>=I==I>=D||Qe.isStraight(a))f.push(a);else{var k=3*(w-I)-b+D,B=2*(b+I)-4*w,H=w-b,U=1e-8,F=1-U,q=[],$=T.solveQuadratic(k,B,H,q,U,F);if(!$)f.push(a);else{q.sort();var X=q[0],Z=Qe.subdivide(a,X);f.push(Z[0]),$>1&&(X=(q[1]-X)/(1-X),Z=Qe.subdivide(Z[1],X),f.push(Z[0])),f.push(Z[1])}}return f},solveCubic:function(a,h,f,_,b,w){var I=a[h],D=a[h+2],k=a[h+4],B=a[h+6],H=0;if(!(I<f&&B<f&&D<f&&k<f||I>f&&B>f&&D>f&&k>f)){var U=3*(D-I),F=3*(k-D)-U,q=B-I-U-F;H=T.solveCubic(q,F,U,I-f,_,b,w)}return H},getTimeOf:function(a,h){var f=new x(a[0],a[1]),_=new x(a[6],a[7]),b=1e-12,w=1e-7,I=h.isClose(f,b)?0:h.isClose(_,b)?1:null;if(I===null)for(var D=[h.x,h.y],k=[],B=0;B<2;B++)for(var H=Qe.solveCubic(a,B,D[B],k,0,1),U=0;U<H;U++){var F=k[U];if(h.isClose(Qe.getPoint(a,F),w))return F}return h.isClose(f,w)?0:h.isClose(_,w)?1:null},getNearestTime:function(a,h){if(Qe.isStraight(a)){var f=a[0],_=a[1],b=a[6],w=a[7],I=b-f,D=w-_,k=I*I+D*D;if(k===0)return 0;var B=((h.x-f)*I+(h.y-_)*D)/k;return B<1e-12?0:B>.999999999999?1:Qe.getTimeOf(a,new x(f+B*I,_+B*D))}var H=100,U=1/0,F=0;function q(Z){if(Z>=0&&Z<=1){var K=h.getDistance(Qe.getPoint(a,Z),!0);if(K<U)return U=K,F=Z,!0}}for(var $=0;$<=H;$++)q($/H);for(var X=1/(H*2);X>1e-8;)!q(F-X)&&!q(F+X)&&(X/=2);return F},getPart:function(a,h,f){var _=h>f;if(_){var b=h;h=f,f=b}return h>0&&(a=Qe.subdivide(a,h)[1]),f<1&&(a=Qe.subdivide(a,(f-h)/(1-h))[0]),_?[a[6],a[7],a[4],a[5],a[2],a[3],a[0],a[1]]:a},isFlatEnough:function(a,h){var f=a[0],_=a[1],b=a[2],w=a[3],I=a[4],D=a[5],k=a[6],B=a[7],H=3*b-2*f-k,U=3*w-2*_-B,F=3*I-2*k-f,q=3*D-2*B-_;return Math.max(H*H,F*F)+Math.max(U*U,q*q)<=16*h*h},getArea:function(a){var h=a[0],f=a[1],_=a[2],b=a[3],w=a[4],I=a[5],D=a[6],k=a[7];return 3*((k-f)*(_+w)-(D-h)*(b+I)+b*(h-w)-_*(f-I)+k*(w+h/3)-D*(I+f/3))/20},getBounds:function(a){for(var h=a.slice(0,2),f=h.slice(),_=[0,0],b=0;b<2;b++)Qe._addBounds(a[b],a[b+2],a[b+4],a[b+6],b,0,h,f,_);return new G(h[0],h[1],f[0]-h[0],f[1]-h[1])},_addBounds:function(a,h,f,_,b,w,I,D,k){function B(te,se){var J=te-se,de=te+se;J<I[b]&&(I[b]=J),de>D[b]&&(D[b]=de)}w/=2;var H=I[b]+w,U=D[b]-w;if(a<H||h<H||f<H||_<H||a>U||h>U||f>U||_>U)if(h<a!=h<_&&f<a!=f<_)B(a,0),B(_,0);else{var F=3*(h-f)-a+_,q=2*(a+f)-4*h,$=h-a,X=T.solveQuadratic(F,q,$,k),Z=1e-8,K=1-Z;B(_,0);for(var W=0;W<X;W++){var O=k[W],j=1-O;Z<=O&&O<=K&&B(j*j*j*a+3*j*j*O*h+3*j*O*O*f+O*O*O*_,w)}}}}},r.each(["getBounds","getStrokeBounds","getHandleBounds"],function(a){this[a]=function(){this._bounds||(this._bounds={});var h=this._bounds[a];return h||(h=this._bounds[a]=Re[a]([this._segment1,this._segment2],!1,this._path)),h.clone()}},{}),r.each({isStraight:function(a,h,f,_){if(h.isZero()&&f.isZero())return!0;var b=_.subtract(a);if(b.isZero())return!1;if(b.isCollinear(h)&&b.isCollinear(f)){var w=new ae(a,_),I=1e-7;if(w.getDistance(a.add(h))<I&&w.getDistance(_.add(f))<I){var D=b.dot(b),k=b.dot(h)/D,B=b.dot(f)/D;return k>=0&&k<=1&&B<=0&&B>=-1}}return!1},isLinear:function(a,h,f,_){var b=_.subtract(a).divide(3);return h.equals(b)&&f.negate().equals(b)}},function(a,h){this[h]=function(f){var _=this._segment1,b=this._segment2;return a(_._point,_._handleOut,b._handleIn,b._point,f)},this.statics[h]=function(f,_){var b=f[0],w=f[1],I=f[6],D=f[7];return a(new x(b,w),new x(f[2]-b,f[3]-w),new x(f[4]-I,f[5]-D),new x(I,D),_)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(a){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(a||0)},isCollinear:function(a){return a&&this.isStraight()&&a.isStraight()&&this.getLine().isCollinear(a.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(a,h){return this.getLocationAtTime(h?a:this.getTimeAt(a))},getLocationAtTime:function(a){return a!=null&&a>=0&&a<=1?new Zt(this,a):null},getTimeAt:function(a,h){return Qe.getTimeAt(this.getValues(),a,h)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var a=x.read(arguments);return a.isZero()?[]:Qe.getTimesWithTangent(this.getValues(),a)},getOffsetAtTime:function(a){return this.getPartLength(0,a)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(x.read(arguments)))},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getTimeOf:function(){return Qe.getTimeOf(this.getValues(),x.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var a=x.read(arguments),h=this.getValues(),f=Qe.getNearestTime(h,a),_=Qe.getPoint(h,f);return new Zt(this,f,_,null,a.getDistance(_))},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a&&a.getPoint()}},new function(){var a=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return r.each(a,function(h){this[h+"At"]=function(f,_){var b=this.getValues();return Qe[h](b,_?f:Qe.getTimeAt(b,f))},this[h+"AtTime"]=function(f){return Qe[h](this.getValues(),f)}},{statics:{_evaluateMethods:a}})},new function(){function a(_){var b=_[0],w=_[1],I=_[2],D=_[3],k=_[4],B=_[5],H=_[6],U=_[7],F=9*(I-k)+3*(H-b),q=6*(b+k)-12*I,$=3*(I-b),X=9*(D-B)+3*(U-w),Z=6*(w+B)-12*D,K=3*(D-w);return function(W){var O=(F*W+q)*W+$,j=(X*W+Z)*W+K;return Math.sqrt(O*O+j*j)}}function h(_,b){return Math.max(2,Math.min(16,Math.ceil(Math.abs(b-_)*32)))}function f(_,b,w,I){if(b==null||b<0||b>1)return null;var D=_[0],k=_[1],B=_[2],H=_[3],U=_[4],F=_[5],q=_[6],$=_[7],X=T.isZero;X(B-D)&&X(H-k)&&(B=D,H=k),X(U-q)&&X(F-$)&&(U=q,F=$);var Z=3*(B-D),K=3*(U-B)-Z,W=q-D-Z-K,O=3*(H-k),j=3*(F-H)-O,te=$-k-O-j,se,J;if(w===0)se=b===0?D:b===1?q:((W*b+K)*b+Z)*b+D,J=b===0?k:b===1?$:((te*b+j)*b+O)*b+k;else{var de=1e-8,me=1-de;if(b<de?(se=Z,J=O):b>me?(se=3*(q-U),J=3*($-F)):(se=(3*W*b+2*K)*b+Z,J=(3*te*b+2*j)*b+O),I){se===0&&J===0&&(b<de||b>me)&&(se=U-B,J=F-H);var be=Math.sqrt(se*se+J*J);be&&(se/=be,J/=be)}if(w===3){var U=6*W*b+2*K,F=6*te*b+2*j,Se=Math.pow(se*se+J*J,3/2);se=Se!==0?(se*F-J*U)/Se:0,J=0}}return w===2?new x(J,-se):new x(se,J)}return{statics:{classify:function(_){var b=_[0],w=_[1],I=_[2],D=_[3],k=_[4],B=_[5],H=_[6],U=_[7],F=b*(U-B)+w*(k-H)+H*B-U*k,q=I*(w-U)+D*(H-b)+b*U-w*H,$=k*(D-w)+B*(b-I)+I*w-D*b,X=3*$,Z=X-q,K=Z-q+F,W=Math.sqrt(K*K+Z*Z+X*X),O=W!==0?1/W:0,j=T.isZero,te="serpentine";K*=O,Z*=O,X*=O;function se(be,Se,ge){var ve=Se!==t,Ce=ve&&Se>0&&Se<1,Be=ve&&ge>0&&ge<1;return ve&&(!(Ce||Be)||be==="loop"&&!(Ce&&Be))&&(be="arch",Ce=Be=!1),{type:be,roots:Ce||Be?Ce&&Be?Se<ge?[Se,ge]:[ge,Se]:[Ce?Se:ge]:null}}if(j(K))return j(Z)?se(j(X)?"line":"quadratic"):se(te,X/(3*Z));var J=3*Z*Z-4*K*X;if(j(J))return se("cusp",Z/(2*K));var de=J>0?Math.sqrt(J/3):Math.sqrt(-J),me=2*K;return se(J>0?te:"loop",(Z+de)/me,(Z-de)/me)},getLength:function(_,b,w,I){if(b===t&&(b=0),w===t&&(w=1),Qe.isStraight(_)){var D=_;w<1&&(D=Qe.subdivide(D,w)[0],b/=w),b>0&&(D=Qe.subdivide(D,b)[1]);var k=D[6]-D[0],B=D[7]-D[1];return Math.sqrt(k*k+B*B)}return T.integrate(I||a(_),b,w,h(b,w))},getTimeAt:function(_,b,w){if(w===t&&(w=b<0?1:0),b===0)return w;var I=Math.abs,D=1e-12,k=b>0,B=k?w:0,H=k?1:w,U=a(_),F=Qe.getLength(_,B,H,U),q=I(b)-F;if(I(q)<D)return k?H:B;if(q>D)return null;var $=b/F,X=0;function Z(K){return X+=T.integrate(U,w,K,h(w,K)),w=K,X-b}return T.findRoot(Z,U,w+$,B,H,32,1e-12)},getPoint:function(_,b){return f(_,b,0,!1)},getTangent:function(_,b){return f(_,b,1,!0)},getWeightedTangent:function(_,b){return f(_,b,1,!1)},getNormal:function(_,b){return f(_,b,2,!0)},getWeightedNormal:function(_,b){return f(_,b,2,!1)},getCurvature:function(_,b){return f(_,b,3,!1).x},getPeaks:function(_){var b=_[0],w=_[1],I=_[2],D=_[3],k=_[4],B=_[5],H=_[6],U=_[7],F=-b+3*I-3*k+H,q=3*b-6*I+3*k,$=-3*b+3*I,X=-w+3*D-3*B+U,Z=3*w-6*D+3*B,K=-3*w+3*D,W=1e-8,O=1-W,j=[];return T.solveCubic(9*(F*F+X*X),9*(F*q+Z*X),2*(q*q+Z*Z)+3*($*F+K*X),$*q+Z*K,j,W,O),j.sort()}}}},new function(){function a(q,$,X,Z,K,W,O){var j=!O&&X.getPrevious()===K,te=!O&&X!==K&&X.getNext()===K,se=1e-8,J=1-se;if(Z!==null&&Z>=(j?se:0)&&Z<=(te?J:1)&&W!==null&&W>=(te?se:0)&&W<=(j?J:1)){var de=new Zt(X,Z,null,O),me=new Zt(K,W,null,O);de._intersection=me,me._intersection=de,(!$||$(de))&&Zt.insert(q,de,!0)}}function h(q,$,X,Z,K,W,O,j,te,se,J,de,me){if(++te>=4096||++j>=40)return te;var be=1e-9,Se=$[0],ge=$[1],ve=$[6],Ce=$[7],Be=ae.getSignedDistance,Me=Be(Se,ge,ve,Ce,$[2],$[3]),We=Be(Se,ge,ve,Ce,$[4],$[5]),dt=Me*We>0?3/4:4/9,wt=dt*Math.min(0,Me,We),Dt=dt*Math.max(0,Me,We),Mt=Be(Se,ge,ve,Ce,q[0],q[1]),et=Be(Se,ge,ve,Ce,q[2],q[3]),st=Be(Se,ge,ve,Ce,q[4],q[5]),It=Be(Se,ge,ve,Ce,q[6],q[7]),qt=f(Mt,et,st,It),Ot=qt[0],Qt=qt[1],$t,si;if(Me===0&&We===0&&Mt===0&&et===0&&st===0&&It===0||($t=_(Ot,Qt,wt,Dt))==null||(si=_(Ot.reverse(),Qt.reverse(),wt,Dt))==null)return te;var gi=se+(J-se)*$t,oi=se+(J-se)*si;if(Math.max(me-de,oi-gi)<be){var Hs=(gi+oi)/2,xs=(de+me)/2;a(K,W,O?Z:X,O?xs:Hs,O?X:Z,O?Hs:xs)}else{q=Qe.getPart(q,$t,si);var Gs=me-de;if(si-$t>.8)if(oi-gi>Gs){var xt=Qe.subdivide(q,.5),Hs=(gi+oi)/2;te=h($,xt[0],Z,X,K,W,!O,j,te,de,me,gi,Hs),te=h($,xt[1],Z,X,K,W,!O,j,te,de,me,Hs,oi)}else{var xt=Qe.subdivide($,.5),xs=(de+me)/2;te=h(xt[0],q,Z,X,K,W,!O,j,te,de,xs,gi,oi),te=h(xt[1],q,Z,X,K,W,!O,j,te,xs,me,gi,oi)}else Gs===0||Gs>=be?te=h($,q,Z,X,K,W,!O,j,te,de,me,gi,oi):te=h(q,$,X,Z,K,W,O,j,te,gi,oi,de,me)}return te}function f(q,$,X,Z){var K=[0,q],W=[1/3,$],O=[2/3,X],j=[1,Z],te=$-(2*q+Z)/3,se=X-(q+2*Z)/3,J;if(te*se<0)J=[[K,W,j],[K,O,j]];else{var de=te/se;J=[de>=2?[K,W,j]:de<=.5?[K,O,j]:[K,W,O,j],[K,j]]}return(te||se)<0?J.reverse():J}function _(q,$,X,Z){return q[0][1]<X?b(q,!0,X):$[0][1]>Z?b($,!1,Z):q[0][0]}function b(q,$,X){for(var Z=q[0][0],K=q[0][1],W=1,O=q.length;W<O;W++){var j=q[W][0],te=q[W][1];if($?te>=X:te<=X)return te===X?j:Z+(X-K)*(j-Z)/(te-K);Z=j,K=te}return null}function w(q,$,X,Z,K){var W=T.isZero;if(W(Z)&&W(K)){var O=Qe.getTimeOf(q,new x($,X));return O===null?[]:[O]}for(var j=Math.atan2(-K,Z),te=Math.sin(j),se=Math.cos(j),J=[],de=[],me=0;me<8;me+=2){var be=q[me]-$,Se=q[me+1]-X;J.push(be*se-Se*te,be*te+Se*se)}return Qe.solveCubic(J,1,0,de,0,1),de}function I(q,$,X,Z,K,W,O){for(var j=$[0],te=$[1],se=$[6],J=$[7],de=w(q,j,te,se-j,J-te),me=0,be=de.length;me<be;me++){var Se=de[me],ge=Qe.getPoint(q,Se),ve=Qe.getTimeOf($,ge);ve!==null&&a(K,W,O?Z:X,O?ve:Se,O?X:Z,O?Se:ve)}}function D(q,$,X,Z,K,W){var O=ae.intersect(q[0],q[1],q[6],q[7],$[0],$[1],$[6],$[7]);O&&a(K,W,X,Qe.getTimeOf(q,O),Z,Qe.getTimeOf($,O))}function k(q,$,X,Z,K,W){var O=1e-12,j=Math.min,te=Math.max;if(te(q[0],q[2],q[4],q[6])+O>j($[0],$[2],$[4],$[6])&&j(q[0],q[2],q[4],q[6])-O<te($[0],$[2],$[4],$[6])&&te(q[1],q[3],q[5],q[7])+O>j($[1],$[3],$[5],$[7])&&j(q[1],q[3],q[5],q[7])-O<te($[1],$[3],$[5],$[7])){var se=U(q,$);if(se)for(var J=0;J<2;J++){var de=se[J];a(K,W,X,de[0],Z,de[1],!0)}else{var me=Qe.isStraight(q),be=Qe.isStraight($),Se=me&&be,ge=me&&!be,ve=K.length;if((Se?D:me||be?I:h)(ge?$:q,ge?q:$,ge?Z:X,ge?X:Z,K,W,ge,0,0,0,1,0,1),!Se||K.length===ve)for(var J=0;J<4;J++){var Ce=J>>1,Be=J&1,Me=Ce*6,We=Be*6,dt=new x(q[Me],q[Me+1]),wt=new x($[We],$[We+1]);dt.isClose(wt,O)&&a(K,W,X,Ce,Z,Be)}}}return K}function B(q,$,X,Z){var K=Qe.classify(q);if(K.type==="loop"){var W=K.roots;a(X,Z,$,W[0],$,W[1])}return X}function H(q,$,X,Z,K,W){var O=1e-7,j=!$;j&&($=q);for(var te=q.length,se=$.length,J=new Array(te),de=j?J:new Array(se),me=[],be=0;be<te;be++)J[be]=q[be].getValues(Z);if(!j)for(var be=0;be<se;be++)de[be]=$[be].getValues(K);for(var Se=y.findCurveBoundsCollisions(J,de,O),ge=0;ge<te;ge++){var ve=q[ge],Ce=J[ge];j&&B(Ce,ve,me,X);var Be=Se[ge];if(Be)for(var Me=0;Me<Be.length;Me++){if(W&&me.length)return me;var We=Be[Me];if(!j||We>ge){var dt=$[We],wt=de[We];k(Ce,wt,ve,dt,me,X)}}}return me}function U(q,$){function X(It){var qt=It[6]-It[0],Ot=It[7]-It[1];return qt*qt+Ot*Ot}var Z=Math.abs,K=ae.getDistance,W=1e-8,O=1e-7,j=Qe.isStraight(q),te=Qe.isStraight($),se=j&&te,J=X(q)<X($),de=J?$:q,me=J?q:$,be=de[0],Se=de[1],ge=de[6]-be,ve=de[7]-Se;if(K(be,Se,ge,ve,me[0],me[1],!0)<O&&K(be,Se,ge,ve,me[6],me[7],!0)<O)!se&&K(be,Se,ge,ve,de[2],de[3],!0)<O&&K(be,Se,ge,ve,de[4],de[5],!0)<O&&K(be,Se,ge,ve,me[2],me[3],!0)<O&&K(be,Se,ge,ve,me[4],me[5],!0)<O&&(j=te=se=!0);else if(se)return null;if(j^te)return null;for(var Ce=[q,$],Be=[],Me=0;Me<4&&Be.length<2;Me++){var We=Me&1,dt=We^1,wt=Me>>1,Dt=Qe.getTimeOf(Ce[We],new x(Ce[dt][wt?6:0],Ce[dt][wt?7:1]));if(Dt!=null){var Mt=We?[wt,Dt]:[Dt,wt];(!Be.length||Z(Mt[0]-Be[0][0])>W&&Z(Mt[1]-Be[0][1])>W)&&Be.push(Mt)}if(Me>2&&!Be.length)break}if(Be.length!==2)Be=null;else if(!se){var et=Qe.getPart(q,Be[0][0],Be[1][0]),st=Qe.getPart($,Be[0][1],Be[1][1]);(Z(st[2]-et[2])>O||Z(st[3]-et[3])>O||Z(st[4]-et[4])>O||Z(st[5]-et[5])>O)&&(Be=null)}return Be}function F(q,$){var X=q[0],Z=q[1],K=q[2],W=q[3],O=q[4],j=q[5],te=q[6],se=q[7],J=$.normalize(),de=J.x,me=J.y,be=3*te-9*O+9*K-3*X,Se=3*se-9*j+9*W-3*Z,ge=6*O-12*K+6*X,ve=6*j-12*W+6*Z,Ce=3*K-3*X,Be=3*W-3*Z,Me=2*be*me-2*Se*de,We=[];if(Math.abs(Me)<T.CURVETIME_EPSILON){var dt=be*Be-Se*Ce,Me=be*ve-Se*ge;if(Me!=0){var wt=-dt/Me;wt>=0&&wt<=1&&We.push(wt)}}else{var Dt=(ge*ge-4*be*Ce)*me*me+(-2*ge*ve+4*Se*Ce+4*be*Be)*de*me+(ve*ve-4*Se*Be)*de*de,Mt=ge*me-ve*de;if(Dt>=0&&Me!=0){var et=Math.sqrt(Dt),st=-(Mt+et)/Me,It=(-Mt+et)/Me;st>=0&&st<=1&&We.push(st),It>=0&&It<=1&&We.push(It)}}return We}return{getIntersections:function(q){var $=this.getValues(),X=q&&q!==this&&q.getValues();return X?k($,X,this,q,[]):B($,this,[])},statics:{getOverlaps:U,getIntersections:H,getCurveLineIntersections:w,getTimesWithTangent:F}}}),Zt=r.extend({_class:"CurveLocation",initialize:function(h,f,_,b,w){if(f>=.99999999){var I=h.getNext();I&&(f=0,h=I)}this._setCurve(h),this._time=f,this._point=_||h.getPointAtTime(f),this._overlap=b,this._distance=w,this._intersection=this._next=this._previous=null},_setPath:function(a){this._path=a,this._version=a?a._version:0},_setCurve:function(a){this._setPath(a._path),this._curve=a,this._segment=null,this._segment1=a._segment1,this._segment2=a._segment2},_setSegment:function(a){var h=a.getCurve();h?this._setCurve(h):(this._setPath(a._path),this._segment1=a,this._segment2=null),this._segment=a,this._time=a===this._segment1?0:1,this._point=a._point.clone()},getSegment:function(){var a=this._segment;if(!a){var h=this.getCurve(),f=this.getTime();f===0?a=h._segment1:f===1?a=h._segment2:f!=null&&(a=h.getPartLength(0,f)<h.getPartLength(f,1)?h._segment1:h._segment2),this._segment=a}return a},getCurve:function(){var a=this._path,h=this;a&&a._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function f(_){var b=_&&_.getCurve();if(b&&(h._time=b.getTimeOf(h._point))!=null)return h._setCurve(b),b}return this._curve||f(this._segment)||f(this._segment1)||f(this._segment2.getPrevious())},getPath:function(){var a=this.getCurve();return a&&a._path},getIndex:function(){var a=this.getCurve();return a&&a.getIndex()},getTime:function(){var a=this.getCurve(),h=this._time;return a&&h==null?this._time=a.getTimeOf(this._point):h},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var a=this._offset;if(a==null){a=0;var h=this.getPath(),f=this.getIndex();if(h&&f!=null)for(var _=h.getCurves(),b=0;b<f;b++)a+=_[b].getLength();this._offset=a+=this.getCurveOffset()}return a},getCurveOffset:function(){var a=this._curveOffset;if(a==null){var h=this.getCurve(),f=this.getTime();this._curveOffset=a=f!=null&&h&&h.getPartLength(0,f)}return a},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var a=this.getCurve(),h=a&&a.divideAtTime(this.getTime());return h&&this._setSegment(h._segment1),h},split:function(){var a=this.getCurve(),h=a._path,f=a&&a.splitAtTime(this.getTime());return f&&this._setSegment(h.getLastSegment()),f},equals:function(a,h){var f=this===a;if(!f&&a instanceof Zt){var _=this.getCurve(),b=a.getCurve(),w=_._path,I=b._path;if(w===I){var D=Math.abs,k=1e-7,B=D(this.getOffset()-a.getOffset()),H=!h&&this._intersection,U=!h&&a._intersection;f=(B<k||w&&D(w.getLength()-B)<k)&&(!H&&!U||H&&U&&H.equals(U,!0))}}return f},toString:function(){var a=[],h=this.getPoint(),f=S.instance;h&&a.push("point: "+h);var _=this.getIndex();_!=null&&a.push("index: "+_);var b=this.getTime();return b!=null&&a.push("time: "+f.number(b)),this._distance!=null&&a.push("distance: "+f.number(this._distance)),"{ "+a.join(", ")+" }"},isTouching:function(){var a=this._intersection;if(a&&this.getTangent().isCollinear(a.getTangent())){var h=this.getCurve(),f=a.getCurve();return!(h.isStraight()&&f.isStraight()&&h.getLine().intersect(f.getLine()))}return!1},isCrossing:function(){var a=this._intersection;if(!a)return!1;var h=this.getTime(),f=a.getTime(),_=1e-8,b=1-_,w=h>=_&&h<=b,I=f>=_&&f<=b;if(w&&I)return!this.isTouching();var D=this.getCurve(),k=D&&h<_?D.getPrevious():D,B=a.getCurve(),H=B&&f<_?B.getPrevious():B;if(h>b&&(D=D.getNext()),f>b&&(B=B.getNext()),!k||!D||!H||!B)return!1;var U=[];function F(de,me){var be=de.getValues(),Se=Qe.classify(be).roots||Qe.getPeaks(be),ge=Se.length,ve=Qe.getLength(be,me&&ge?Se[ge-1]:0,!me&&ge?Se[0]:1);U.push(ge?ve:ve/32)}function q(de,me,be){return me<be?de>me&&de<be:de>me||de<be}w||(F(k,!0),F(D,!1)),I||(F(H,!0),F(B,!1));var $=this.getPoint(),X=Math.min.apply(Math,U),Z=w?D.getTangentAtTime(h):D.getPointAt(X).subtract($),K=w?Z.negate():k.getPointAt(-X).subtract($),W=I?B.getTangentAtTime(f):B.getPointAt(X).subtract($),O=I?W.negate():H.getPointAt(-X).subtract($),j=K.getAngle(),te=Z.getAngle(),se=O.getAngle(),J=W.getAngle();return!!(w?q(j,se,J)^q(te,se,J)&&q(j,J,se)^q(te,J,se):q(se,j,te)^q(J,j,te)&&q(se,te,j)^q(J,te,j))},hasOverlap:function(){return!!this._overlap}},r.each(Qe._evaluateMethods,function(a){var h=a+"At";this[a]=function(){var f=this.getCurve(),_=this.getTime();return _!=null&&f&&f[h](_,!0)}},{preserve:!0}),new function(){function a(h,f,_){var b=h.length,w=0,I=b-1;function D($,X){for(var Z=$+X;Z>=-1&&Z<=b;Z+=X){var K=h[(Z%b+b)%b];if(!f.getPoint().isClose(K.getPoint(),1e-7))break;if(f.equals(K))return K}return null}for(;w<=I;){var k=w+I>>>1,B=h[k],H;if(_&&(H=f.equals(B)?B:D(k,-1)||D(k,1)))return f._overlap&&(H._overlap=H._intersection._overlap=!0),H;var U=f.getPath(),F=B.getPath(),q=U!==F?U._id-F._id:f.getIndex()+f.getTime()-(B.getIndex()+B.getTime());q<0?I=k-1:w=k+1}return h.splice(w,0,f),f}return{statics:{insert:a,expand:function(h){for(var f=h.slice(),_=h.length-1;_>=0;_--)a(f,h[_]._intersection,!1);return f}}}}),At=N.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(a){var h,f,_;if(r.isPlainObject(a)?(f=a.segments,h=a.pathData):Array.isArray(a)?f=a:typeof a=="string"&&(h=a),f){var b=f[0];_=b&&Array.isArray(b[0])}else h&&(_=(h.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(h));var w=_?at:Re;return new w(a)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(a){this.isClockwise()!=(a=!!a)&&this.reverse()},setPathData:function(a){var h=a&&a.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),f,_=!1,b,w,I=new x,D=new x;function k(O,j){var te=+f[O];return _&&(te+=I[j]),te}function B(O){return new x(k(O,"x"),k(O+1,"y"))}this.clear();for(var H=0,U=h&&h.length;H<U;H++){var F=h[H],q=F[0],$=q.toLowerCase();f=F.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var X=f&&f.length;switch(_=q===$,b==="z"&&!/[mz]/.test($)&&this.moveTo(I),$){case"m":case"l":for(var Z=$==="m",K=0;K<X;K+=2)this[Z?"moveTo":"lineTo"](I=B(K)),Z&&(D=I,Z=!1);w=I;break;case"h":case"v":var W=$==="h"?"x":"y";I=I.clone();for(var K=0;K<X;K++)I[W]=k(K,W),this.lineTo(I);w=I;break;case"c":for(var K=0;K<X;K+=6)this.cubicCurveTo(B(K),w=B(K+2),I=B(K+4));break;case"s":for(var K=0;K<X;K+=4)this.cubicCurveTo(/[cs]/.test(b)?I.multiply(2).subtract(w):I,w=B(K),I=B(K+2)),b=$;break;case"q":for(var K=0;K<X;K+=4)this.quadraticCurveTo(w=B(K),I=B(K+2));break;case"t":for(var K=0;K<X;K+=2)this.quadraticCurveTo(w=/[qt]/.test(b)?I.multiply(2).subtract(w):I,I=B(K)),b=$;break;case"a":for(var K=0;K<X;K+=7)this.arcTo(I=B(K+5),new Q(+f[K],+f[K+1]),+f[K+2],+f[K+4],+f[K+3]);break;case"z":this.closePath(1e-12),I=D;break}b=$}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(a){var h=a.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(a):{};return h.onPath||!!(this.getFillRule()==="evenodd"?h.windingL&1||h.windingR&1:h.winding)},getIntersections:function(a,h,f,_){var b=this===a||!a,w=this._matrix._orNullIfIdentity(),I=b?w:(f||a._matrix)._orNullIfIdentity();return b||this.getBounds(w).intersects(a.getBounds(I),1e-12)?Qe.getIntersections(this.getCurves(),!b&&a.getCurves(),h,w,I,_):[]},getCrossings:function(a){return this.getIntersections(a,function(h){return h.isCrossing()})},getNearestLocation:function(){for(var a=x.read(arguments),h=this.getCurves(),f=1/0,_=null,b=0,w=h.length;b<w;b++){var I=h[b].getNearestLocation(a);I._distance<f&&(f=I._distance,_=I)}return _},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a&&a.getPoint()},interpolate:function(a,h,f){var _=!this._children,b=_?"_segments":"_children",w=a[b],I=h[b],D=this[b];if(!w||!I||w.length!==I.length)throw new Error("Invalid operands in interpolate() call: "+a+", "+h);var k=D.length,B=I.length;if(k<B)for(var H=_?nt:Re,U=k;U<B;U++)this.add(new H);else k>B&&this[_?"removeSegments":"removeChildren"](B,k);for(var U=0;U<B;U++)D[U].interpolate(w[U],I[U],f);_&&(this.setClosed(a._closed),this._changed(9))},compare:function(a){var h=!1;if(a){var f=this._children||[this],_=a._children?a._children.slice():[a],b=f.length,w=_.length,I=[],D=0;h=!0;for(var k=y.findItemBoundsCollisions(f,_,T.GEOMETRIC_EPSILON),B=b-1;B>=0&&h;B--){var H=f[B];h=!1;var U=k[B];if(U)for(var F=U.length-1;F>=0&&!h;F--)H.compare(_[U[F]])&&(I[U[F]]||(I[U[F]]=!0,D++),h=!0)}h=h&&D===w}return h}}),Re=At.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(h){this._closed=!1,this._segments=[],this._version=0;var f=arguments,_=Array.isArray(h)?typeof h[0]=="object"?h:f:h&&h.size===t&&(h.x!==t||h.point!==t)?f:null;_&&_.length>0?this.setSegments(_):(this._curves=t,this._segmentSelection=0,!_&&typeof h=="string"&&(this.setPathData(h),h=null)),this._initialize(!_&&h)},_equals:function(a){return this._closed===a._closed&&r.equals(this._segments,a._segments)},copyContent:function(a){this.setSegments(a._segments),this._closed=a._closed},_changed:function a(h){if(a.base.call(this,h),h&8){if(this._length=this._area=t,h&32)this._version++;else if(this._curves)for(var f=0,_=this._curves.length;f<_;f++)this._curves[f]._changed()}else h&64&&(this._bounds=t)},getStyle:function(){var a=this._parent;return(a instanceof at?a:this)._style},getSegments:function(){return this._segments},setSegments:function(a){var h=this.isFullySelected(),f=a&&a.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=t,f){var _=a[f-1];typeof _=="boolean"&&(this.setClosed(_),f--),this._add(nt.readList(a,0,{},f))}h&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var a=this._curves,h=this._segments;if(!a){var f=this._countCurves();a=this._curves=new Array(f);for(var _=0;_<f;_++)a[_]=new Qe(this,h[_],h[_+1]||h[0])}return a},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var a=this.getCurves();return a[a.length-1]},isClosed:function(){return this._closed},setClosed:function(a){if(this._closed!=(a=!!a)){if(this._closed=a,this._curves){var h=this._curves.length=this._countCurves();a&&(this._curves[h-1]=new Qe(this,this._segments[h-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(a,h){var f=this._segments,_=f.length,b=new S(h),w=new Array(6),I=!0,D,k,B,H,U,F,q,$,X=[];function Z(W,O){if(W._transformCoordinates(a,w),D=w[0],k=w[1],I)X.push("M"+b.pair(D,k)),I=!1;else if(U=w[2],F=w[3],U===D&&F===k&&q===B&&$===H){if(!O){var j=D-B,te=k-H;X.push(j===0?"v"+b.number(te):te===0?"h"+b.number(j):"l"+b.pair(j,te))}}else X.push("c"+b.pair(q-B,$-H)+" "+b.pair(U-B,F-H)+" "+b.pair(D-B,k-H));B=D,H=k,q=w[4],$=w[5]}if(!_)return"";for(var K=0;K<_;K++)Z(f[K]);return this._closed&&_>0&&(Z(f[0],!0),X.push("z")),X.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(a){for(var h=this._segments,f=new Array(6),_=0,b=h.length;_<b;_++)h[_]._transformCoordinates(a,f,!0);return!0},_add:function(a,I){for(var f=this._segments,_=this._curves,b=a.length,w=I==null,I=w?f.length:I,D=0;D<b;D++){var k=a[D];k._path&&(k=a[D]=k.clone()),k._path=this,k._index=I+D,k._selection&&this._updateSelection(k,0,k._selection)}if(w)r.push(f,a);else{f.splice.apply(f,[I,0].concat(a));for(var D=I+b,B=f.length;D<B;D++)f[D]._index=D}if(_){var H=this._countCurves(),U=I>0&&I+b-1===H?I-1:I,F=U,q=Math.min(U+b,H);a._curves&&(_.splice.apply(_,[U,0].concat(a._curves)),F+=a._curves.length);for(var D=F;D<q;D++)_.splice(D,0,new Qe(this,null,null));this._adjustCurves(U,q)}return this._changed(41),a},_adjustCurves:function(a,h){for(var f=this._segments,_=this._curves,b,w=a;w<h;w++)b=_[w],b._path=this,b._segment1=f[w],b._segment2=f[w+1]||f[0],b._changed();(b=_[this._closed&&!a?f.length-1:a-1])&&(b._segment2=f[a]||f[0],b._changed()),(b=_[h])&&(b._segment1=f[h],b._changed())},_countCurves:function(){var a=this._segments.length;return!this._closed&&a>0?a-1:a},add:function(a){var h=arguments;return h.length>1&&typeof a!="number"?this._add(nt.readList(h)):this._add([nt.read(h)])[0]},insert:function(a,h){var f=arguments;return f.length>2&&typeof h!="number"?this._add(nt.readList(f,1),a):this._add([nt.read(f,1)],a)[0]},addSegment:function(){return this._add([nt.read(arguments)])[0]},insertSegment:function(a){return this._add([nt.read(arguments,1)],a)[0]},addSegments:function(a){return this._add(nt.readList(a))},insertSegments:function(a,h){return this._add(nt.readList(h),a)},removeSegment:function(a){return this.removeSegments(a,a+1)[0]||null},removeSegments:function(a,h,f){a=a||0,h=r.pick(h,this._segments.length);var _=this._segments,b=this._curves,w=_.length,I=_.splice(a,h-a),D=I.length;if(!D)return I;for(var k=0;k<D;k++){var B=I[k];B._selection&&this._updateSelection(B,B._selection,0),B._index=B._path=null}for(var k=a,H=_.length;k<H;k++)_[k]._index=k;if(b){for(var U=a>0&&h===w+(this._closed?1:0)?a-1:a,b=b.splice(U,D),k=b.length-1;k>=0;k--)b[k]._path=null;f&&(I._curves=b.slice(1)),this._adjustCurves(U,U)}return this._changed(41),I},clear:"#removeSegments",hasHandles:function(){for(var a=this._segments,h=0,f=a.length;h<f;h++)if(a[h].hasHandles())return!0;return!1},clearHandles:function(){for(var a=this._segments,h=0,f=a.length;h<f;h++)a[h].clearHandles()},getLength:function(){if(this._length==null){for(var a=this.getCurves(),h=0,f=0,_=a.length;f<_;f++)h+=a[f].getLength();this._length=h}return this._length},getArea:function(){var a=this._area;if(a==null){var h=this._segments,f=this._closed;a=0;for(var _=0,b=h.length;_<b;_++){var w=_+1===b;a+=Qe.getArea(Qe.getValues(h[_],h[w?0:_+1],null,w&&!f))}this._area=a}return a},isFullySelected:function(){var a=this._segments.length;return this.isSelected()&&a>0&&this._segmentSelection===a*7},setFullySelected:function(a){a&&this._selectSegments(!0),this.setSelected(a)},setSelection:function a(h){h&1||this._selectSegments(!1),a.base.call(this,h)},_selectSegments:function(a){var h=this._segments,f=h.length,_=a?7:0;this._segmentSelection=_*f;for(var b=0;b<f;b++)h[b]._selection=_},_updateSelection:function(a,h,f){a._selection=f;var _=this._segmentSelection+=f-h;_>0&&this.setSelected(!0)},divideAt:function(a){var h=this.getLocationAt(a),f;return h&&(f=h.getCurve().divideAt(h.getCurveOffset()))?f._segment1:null},splitAt:function(a){var h=this.getLocationAt(a),f=h&&h.index,_=h&&h.time,b=1e-8,w=1-b;_>w&&(f++,_=0);var I=this.getCurves();if(f>=0&&f<I.length){_>=b&&I[f++].divideAtTime(_);var D=this.removeSegments(f,this._segments.length,!0),k;return this._closed?(this.setClosed(!1),k=this):(k=new Re(N.NO_INSERT),k.insertAbove(this),k.copyAttributes(this)),k._add(D,0),this.addSegment(D[0]),k}return null},split:function(a,h){var f,_=h===t?a:(f=this.getCurves()[a])&&f.getLocationAtTime(h);return _!=null?this.splitAt(_):null},join:function(a,h){var f=h||0;if(a&&a!==this){var _=a._segments,b=this.getLastSegment(),w=a.getLastSegment();if(!w)return this;b&&b._point.isClose(w._point,f)&&a.reverse();var I=a.getFirstSegment();if(b&&b._point.isClose(I._point,f))b.setHandleOut(I._handleOut),this._add(_.slice(1));else{var D=this.getFirstSegment();D&&D._point.isClose(I._point,f)&&a.reverse(),w=a.getLastSegment(),D&&D._point.isClose(w._point,f)?(D.setHandleIn(w._handleIn),this._add(_.slice(0,_.length-1),0)):this._add(_.slice())}a._closed&&this._add([_[0]]),a.remove()}var k=this.getFirstSegment(),B=this.getLastSegment();return k!==B&&k._point.isClose(B._point,f)&&(k.setHandleIn(B._handleIn),B.remove(),this.setClosed(!0)),this},reduce:function(a){for(var h=this.getCurves(),f=a&&a.simplify,_=f?1e-7:0,b=h.length-1;b>=0;b--){var w=h[b];!w.hasHandles()&&(!w.hasLength(_)||f&&w.isCollinear(w.getNext()))&&w.remove()}return this},reverse:function(){this._segments.reverse();for(var a=0,h=this._segments.length;a<h;a++){var f=this._segments[a],_=f._handleIn;f._handleIn=f._handleOut,f._handleOut=_,f._index=a}this._curves=null,this._changed(9)},flatten:function(a){for(var h=new Et(this,a||.25,256,!0),f=h.parts,_=f.length,b=[],w=0;w<_;w++)b.push(new nt(f[w].curve.slice(0,2)));!this._closed&&_>0&&b.push(new nt(f[_-1].curve.slice(6))),this.setSegments(b)},simplify:function(a){var h=new Nt(this).fit(a||2.5);return h&&this.setSegments(h),!!h},smooth:function(a){var h=this,f=a||{},_=f.type||"asymmetric",b=this._segments,w=b.length,I=this._closed;function D(Ot,Qt){var $t=Ot&&Ot.index;if($t!=null){var si=Ot.path;if(si&&si!==h)throw new Error(Ot._class+" "+$t+" of "+si+" is not part of "+h);Qt&&Ot instanceof Qe&&$t++}else $t=typeof Ot=="number"?Ot:Qt;return Math.min($t<0&&I?$t%w:$t<0?$t+w:$t,w-1)}var k=I&&f.from===t&&f.to===t,B=D(f.from,0),H=D(f.to,w-1);if(B>H)if(I)B-=w;else{var U=B;B=H,H=U}if(/^(?:asymmetric|continuous)$/.test(_)){var F=_==="asymmetric",q=Math.min,$=H-B+1,X=$-1,Z=k?q($,4):1,K=Z,W=Z,O=[];if(I||(K=q(1,B),W=q(1,w-H-1)),X+=K+W,X<=1)return;for(var j=0,te=B-K;j<=X;j++,te++)O[j]=b[(te<0?te+w:te)%w]._point;for(var se=O[0]._x+2*O[1]._x,J=O[0]._y+2*O[1]._y,de=2,me=X-1,be=[se],Se=[J],ge=[de],ve=[],Ce=[],j=1;j<X;j++){var Be=j<me,Me=Be||F?1:2,We=Be?4:F?2:7,dt=Be?4:F?3:8,wt=Be?2:F?0:1,Dt=Me/de;de=ge[j]=We-Dt,se=be[j]=dt*O[j]._x+wt*O[j+1]._x-Dt*se,J=Se[j]=dt*O[j]._y+wt*O[j+1]._y-Dt*J}ve[me]=be[me]/ge[me],Ce[me]=Se[me]/ge[me];for(var j=X-2;j>=0;j--)ve[j]=(be[j]-ve[j+1])/ge[j],Ce[j]=(Se[j]-Ce[j+1])/ge[j];ve[X]=(3*O[X]._x-ve[me])/2,Ce[X]=(3*O[X]._y-Ce[me])/2;for(var j=K,Mt=X-W,te=B;j<=Mt;j++,te++){var et=b[te<0?te+w:te],st=et._point,It=ve[j]-st._x,qt=Ce[j]-st._y;(k||j<Mt)&&et.setHandleOut(It,qt),(k||j>K)&&et.setHandleIn(-It,-qt)}}else for(var j=B;j<=H;j++)b[j<0?j+w:j].smooth(f,!k&&j===B,!k&&j===H)},toShape:function(a){if(!this._closed)return null;var h=this._segments,f,_,b,w;function I(F,q){var $=h[F],X=$.getNext(),Z=h[q],K=Z.getNext();return $._handleOut.isZero()&&X._handleIn.isZero()&&Z._handleOut.isZero()&&K._handleIn.isZero()&&X._point.subtract($._point).isCollinear(K._point.subtract(Z._point))}function D(F){var q=h[F],$=q.getPrevious(),X=q.getNext();return $._handleOut.isZero()&&q._handleIn.isZero()&&q._handleOut.isZero()&&X._handleIn.isZero()&&q._point.subtract($._point).isOrthogonal(X._point.subtract(q._point))}function k(F){var q=h[F],$=q.getNext(),X=q._handleOut,Z=$._handleIn,K=.5522847498307936;if(X.isOrthogonal(Z)){var W=q._point,O=$._point,j=new ae(W,X,!0).intersect(new ae(O,Z,!0),!0);return j&&T.isZero(X.getLength()/j.subtract(W).getLength()-K)&&T.isZero(Z.getLength()/j.subtract(O).getLength()-K)}return!1}function B(F,q){return h[F]._point.getDistance(h[q]._point)}if(!this.hasHandles()&&h.length===4&&I(0,2)&&I(1,3)&&D(1)?(f=Ee.Rectangle,_=new Q(B(0,3),B(0,1)),w=h[1]._point.add(h[2]._point).divide(2)):h.length===8&&k(0)&&k(2)&&k(4)&&k(6)&&I(1,5)&&I(3,7)?(f=Ee.Rectangle,_=new Q(B(1,6),B(0,3)),b=_.subtract(new Q(B(0,7),B(1,2))).divide(2),w=h[3]._point.add(h[4]._point).divide(2)):h.length===4&&k(0)&&k(1)&&k(2)&&k(3)&&(T.isZero(B(0,2)-B(1,3))?(f=Ee.Circle,b=B(0,2)/2):(f=Ee.Ellipse,b=new Q(B(2,0)/2,B(3,1)/2)),w=h[1]._point),f){var H=this.getPosition(!0),U=new f({center:H,size:_,radius:b,insert:!1});return U.copyAttributes(this,!0),U._matrix.prepend(this._matrix),U.rotate(w.subtract(H).getAngle()+90),(a===t||a)&&U.insertAbove(this),U}return null},toPath:"#clone",compare:function a(h){if(!h||h instanceof at)return a.base.call(this,h);var f=this.getCurves(),_=h.getCurves(),b=f.length,w=_.length;if(!b||!w)return b==w;for(var I=f[0].getValues(),D=[],k=0,B,H=0,U,F=0;F<w;F++){var Z=_[F].getValues();D.push(Z);var q=Qe.getOverlaps(I,Z);if(q){B=!F&&q[0][0]>0?w-1:F,U=q[0][1];break}}for(var $=Math.abs,X=1e-8,Z=D[B],K;I&&Z;){var q=Qe.getOverlaps(I,Z);if(q){var W=q[0][0];if($(W-H)<X){H=q[1][0],H===1&&(I=++k<b?f[k].getValues():null,H=0);var O=q[0][1];if($(O-U)<X){if(K||(K=[B,O]),U=q[1][1],U===1&&(++B>=w&&(B=0),Z=D[B]||_[B].getValues(),U=0),!I)return K[0]===B&&K[1]===U;continue}}}break}return!1},_hitTestSelf:function(a,h,f,_){var b=this,w=this.getStyle(),I=this._segments,D=I.length,k=this._closed,B=h._tolerancePadding,H=B,U,F,q,$,X,Z,K=h.stroke&&w.hasStroke(),W=h.fill&&w.hasFill(),O=h.curves,j=K?w.getStrokeWidth()/2:W&&h.tolerance>0||O?0:null;j!==null&&(j>0?(U=w.getStrokeJoin(),F=w.getStrokeCap(),q=w.getMiterLimit(),H=H.add(Re._getStrokePadding(j,_))):U=F="round");function te(ve,Ce){return a.subtract(ve).divide(Ce).length<=1}function se(ve,Ce,Be){if(!h.selected||Ce.isSelected()){var Me=ve._point;if(Ce!==Me&&(Ce=Ce.add(Me)),te(Ce,H))return new it(Be,b,{segment:ve,point:Ce})}}function J(ve,Ce){return(Ce||h.segments)&&se(ve,ve._point,"segment")||!Ce&&h.handles&&(se(ve,ve._handleIn,"handle-in")||se(ve,ve._handleOut,"handle-out"))}function de(ve){$.add(ve)}function me(ve){var Ce=k||ve._index>0&&ve._index<D-1;if((Ce?U:F)==="round")return te(ve._point,H);if($=new Re({internal:!0,closed:!0}),Ce?ve.isSmooth()||Re._addBevelJoin(ve,U,j,q,null,_,de,!0):F==="square"&&Re._addSquareCap(ve,F,j,null,_,de,!0),!$.isEmpty()){var Be;return $.contains(a)||(Be=$.getNearestLocation(a))&&te(Be.getPoint(),B)}}if(h.ends&&!h.segments&&!k){if(Z=J(I[0],!0)||J(I[D-1],!0))return Z}else if(h.segments||h.handles){for(var be=0;be<D;be++)if(Z=J(I[be]))return Z}if(j!==null){if(X=this.getNearestLocation(a),X){var Se=X.getTime();Se===0||Se===1&&D>1?me(X.getSegment())||(X=null):te(X.getPoint(),H)||(X=null)}if(!X&&U==="miter"&&D>1)for(var be=0;be<D;be++){var ge=I[be];if(a.getDistance(ge._point)<=q*j&&me(ge)){X=ge.getLocation();break}}}return!X&&W&&this._contains(a)||X&&!K&&!O?new it("fill",this):X?new it(K?"stroke":"curve",this,{location:X,point:X.getPoint()}):null}},r.each(Qe._evaluateMethods,function(a){this[a+"At"]=function(h){var f=this.getLocationAt(h);return f&&f[a]()}},{beans:!1,getLocationOf:function(){for(var a=x.read(arguments),h=this.getCurves(),f=0,_=h.length;f<_;f++){var b=h[f].getLocationOf(a);if(b)return b}return null},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getLocationAt:function(a){if(typeof a=="number"){for(var h=this.getCurves(),f=0,_=0,b=h.length;_<b;_++){var w=f,I=h[_];if(f+=I.getLength(),f>a)return I.getLocationAt(a-w)}if(h.length>0&&a<=this.getLength())return new Zt(h[h.length-1],1)}else if(a&&a.getPath&&a.getPath()===this)return a;return null},getOffsetsWithTangent:function(){var a=x.read(arguments);if(a.isZero())return[];for(var h=[],f=0,_=this.getCurves(),b=0,w=_.length;b<w;b++){for(var I=_[b],D=I.getTimesWithTangent(a),k=0,B=D.length;k<B;k++){var H=f+I.getOffsetAtTime(D[k]);h.indexOf(H)<0&&h.push(H)}f+=I.length}return h}}),new function(){function a(f,_,b,w){if(w<=0)return;var I=w/2,D=w-2,k=I-1,B=new Array(6),H,U;function F(W){var O=B[W],j=B[W+1];(H!=O||U!=j)&&(f.beginPath(),f.moveTo(H,U),f.lineTo(O,j),f.stroke(),f.beginPath(),f.arc(O,j,I,0,Math.PI*2,!0),f.fill())}for(var q=0,$=_.length;q<$;q++){var X=_[q],Z=X._selection;if(X._transformCoordinates(b,B),H=B[0],U=B[1],Z&2&&F(2),Z&4&&F(4),f.fillRect(H-I,U-I,w,w),D>0&&!(Z&1)){var K=f.fillStyle;f.fillStyle="#ffffff",f.fillRect(H-k,U-k,D,D),f.fillStyle=K}}}function h(f,_,b){var w=_._segments,I=w.length,D=new Array(6),k=!0,B,H,U,F,q,$,X,Z;function K(O){if(b)O._transformCoordinates(b,D),B=D[0],H=D[1];else{var j=O._point;B=j._x,H=j._y}if(k)f.moveTo(B,H),k=!1;else{if(b)q=D[2],$=D[3];else{var te=O._handleIn;q=B+te._x,$=H+te._y}q===B&&$===H&&X===U&&Z===F?f.lineTo(B,H):f.bezierCurveTo(X,Z,q,$,B,H)}if(U=B,F=H,b)X=D[4],Z=D[5];else{var te=O._handleOut;X=U+te._x,Z=F+te._y}}for(var W=0;W<I;W++)K(w[W]);_._closed&&I>0&&K(w[0])}return{_draw:function(f,_,b,w){var I=_.dontStart,D=_.dontFinish||_.clip,k=this.getStyle(),B=k.hasFill(),H=k.hasStroke(),U=k.getDashArray(),F=!Jt.support.nativeDash&&H&&U&&U.length;I||f.beginPath(),(B||H&&!F||D)&&(h(f,this,w),this._closed&&f.closePath());function q(O){return U[(O%F+F)%F]}if(!D&&(B||H)&&(this._setStyles(f,_,b),B&&(f.fill(k.getFillRule()),f.shadowColor="rgba(0,0,0,0)"),H)){if(F){I||f.beginPath();for(var $=new Et(this,.25,32,!1,w),X=$.length,Z=-k.getDashOffset(),K,W=0;Z>0;)Z-=q(W--)+q(W--);for(;Z<X;)K=Z+q(W++),(Z>0||K>0)&&$.drawPart(f,Math.max(Z,0),Math.max(K,0)),Z=K+q(W++)}f.stroke()}},_drawSelected:function(f,_){f.beginPath(),h(f,this,_),f.stroke(),a(f,this._segments,_,Jt.settings.handleSize)}}},new function(){function a(h){var f=h._segments;if(!f.length)throw new Error("Use a moveTo() command first");return f[f.length-1]}return{moveTo:function(){var h=this._segments;h.length===1&&this.removeSegment(0),h.length||this._add([new nt(x.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new nt(x.read(arguments))])},cubicCurveTo:function(){var h=arguments,f=x.read(h),_=x.read(h),b=x.read(h),w=a(this);w.setHandleOut(f.subtract(w._point)),this._add([new nt(b,_.subtract(b))])},quadraticCurveTo:function(){var h=arguments,f=x.read(h),_=x.read(h),b=a(this)._point;this.cubicCurveTo(f.add(b.subtract(f).multiply(1/3)),f.add(_.subtract(f).multiply(1/3)),_)},curveTo:function(){var h=arguments,f=x.read(h),_=x.read(h),b=r.pick(r.read(h),.5),w=1-b,I=a(this)._point,D=f.subtract(I.multiply(w*w)).subtract(_.multiply(b*b)).divide(2*b*w);if(D.isNaN())throw new Error("Cannot put a curve through points with parameter = "+b);this.quadraticCurveTo(D,_)},arcTo:function(){var h=arguments,f=Math.abs,_=Math.sqrt,b=a(this),w=b._point,I=x.read(h),D,k=r.peek(h),B=r.pick(k,!0),H,U,F,q;if(typeof B=="boolean")var $=w.add(I).divide(2),D=$.add($.subtract(w).rotate(B?-90:90));else if(r.remain(h)<=2)D=I,I=x.read(h);else if(!w.equals(I)){var X=Q.read(h),Z=T.isZero;if(Z(X.width)||Z(X.height))return this.lineTo(I);var K=r.read(h),B=!!r.read(h),W=!!r.read(h),$=w.add(I).divide(2),O=w.subtract($).rotate(-K),j=O.x,te=O.y,se=f(X.width),J=f(X.height),de=se*se,me=J*J,be=j*j,Se=te*te,ge=_(be/de+Se/me);if(ge>1&&(se*=ge,J*=ge,de=se*se,me=J*J),ge=(de*me-de*Se-me*be)/(de*Se+me*be),f(ge)<1e-12&&(ge=0),ge<0)throw new Error("Cannot create an arc with the given arguments");H=new x(se*te/J,-J*j/se).multiply((W===B?-1:1)*_(ge)).rotate(K).add($),q=new ne().translate(H).rotate(K).scale(se,J),F=q._inverseTransform(w),U=F.getDirectedAngle(q._inverseTransform(I)),!B&&U>0?U-=360:B&&U<0&&(U+=360)}if(D){var ve=new ae(w.add(D).divide(2),D.subtract(w).rotate(90),!0),Ce=new ae(D.add(I).divide(2),I.subtract(D).rotate(90),!0),Be=new ae(w,I),Me=Be.getSide(D);if(H=ve.intersect(Ce,!0),!H){if(!Me)return this.lineTo(I);throw new Error("Cannot create an arc with the given arguments")}F=w.subtract(H),U=F.getDirectedAngle(I.subtract(H));var We=Be.getSide(H,!0);We===0?U=Me*f(U):Me===We&&(U+=U<0?360:-360)}if(U){for(var dt=1e-5,wt=f(U),Dt=wt>=360?4:Math.ceil((wt-dt)/90),Mt=U/Dt,et=Mt*Math.PI/360,st=4/3*Math.sin(et)/(1+Math.cos(et)),It=[],qt=0;qt<=Dt;qt++){var O=I,Ot=null;if(qt<Dt&&(Ot=F.rotate(90).multiply(st),q?(O=q._transformPoint(F),Ot=q._transformPoint(F.add(Ot)).subtract(O)):O=H.add(F)),!qt)b.setHandleOut(Ot);else{var Qt=F.rotate(-90).multiply(st);q&&(Qt=q._transformPoint(F.add(Qt)).subtract(O)),It.push(new nt(O,Qt,Ot))}F=F.rotate(Mt)}this._add(It)}},lineBy:function(){var h=x.read(arguments),f=a(this)._point;this.lineTo(f.add(h))},curveBy:function(){var h=arguments,f=x.read(h),_=x.read(h),b=r.read(h),w=a(this)._point;this.curveTo(w.add(f),w.add(_),b)},cubicCurveBy:function(){var h=arguments,f=x.read(h),_=x.read(h),b=x.read(h),w=a(this)._point;this.cubicCurveTo(w.add(f),w.add(_),w.add(b))},quadraticCurveBy:function(){var h=arguments,f=x.read(h),_=x.read(h),b=a(this)._point;this.quadraticCurveTo(b.add(f),b.add(_))},arcBy:function(){var h=arguments,f=a(this)._point,_=f.add(x.read(h)),b=r.pick(r.peek(h),!0);typeof b=="boolean"?this.arcTo(_,b):this.arcTo(_,f.add(x.read(h)))},closePath:function(h){this.setClosed(!0),this.join(this,h)}}},{_getBounds:function(a,h){var f=h.handle?"getHandleBounds":h.stroke?"getStrokeBounds":"getBounds";return Re[f](this._segments,this._closed,this,a,h)},statics:{getBounds:function(a,h,f,_,b,w){var I=a[0];if(!I)return new G;var D=new Array(6),k=I._transformCoordinates(_,new Array(6)),B=k.slice(0,2),H=B.slice(),U=new Array(2);function F(X){X._transformCoordinates(_,D);for(var Z=0;Z<2;Z++)Qe._addBounds(k[Z],k[Z+4],D[Z+2],D[Z],Z,w?w[Z]:0,B,H,U);var K=k;k=D,D=K}for(var q=1,$=a.length;q<$;q++)F(a[q]);return h&&F(I),new G(B[0],B[1],H[0]-B[0],H[1]-B[1])},getStrokeBounds:function(a,h,f,_,b){var w=f.getStyle(),I=w.hasStroke(),D=w.getStrokeWidth(),k=I&&f._getStrokeMatrix(_,b),B=I&&Re._getStrokePadding(D,k),H=Re.getBounds(a,h,f,_,b,B);if(!I)return H;var U=D/2,F=w.getStrokeJoin(),q=w.getStrokeCap(),$=w.getMiterLimit(),X=new G(new Q(B));function Z(se){H=H.include(se)}function K(se){H=H.unite(X.setCenter(se._point.transform(_)))}function W(se,J){J==="round"||se.isSmooth()?K(se):Re._addBevelJoin(se,J,U,$,_,k,Z)}function O(se,J){J==="round"?K(se):Re._addSquareCap(se,J,U,_,k,Z)}var j=a.length-(h?0:1);if(j>0){for(var te=1;te<j;te++)W(a[te],F);h?W(a[0],F):(O(a[0],q),O(a[a.length-1],q))}return H},_getStrokePadding:function(a,h){if(!h)return[a,a];var f=new x(a,0).transform(h),_=new x(0,a).transform(h),b=f.getAngleInRadians(),w=f.getLength(),I=_.getLength(),D=Math.sin(b),k=Math.cos(b),B=Math.tan(b),H=Math.atan2(I*B,w),U=Math.atan2(I,B*w);return[Math.abs(w*Math.cos(H)*k+I*Math.sin(H)*D),Math.abs(I*Math.sin(U)*k+w*Math.cos(U)*D)]},_addBevelJoin:function(a,h,f,_,b,w,I,D){var k=a.getCurve(),B=k.getPrevious(),H=k.getPoint1().transform(b),U=B.getNormalAtTime(1).multiply(f).transform(w),F=k.getNormalAtTime(0).multiply(f).transform(w),q=U.getDirectedAngle(F);if((q<0||q>=180)&&(U=U.negate(),F=F.negate()),D&&I(H),I(H.add(U)),h==="miter"){var $=new ae(H.add(U),new x(-U.y,U.x),!0).intersect(new ae(H.add(F),new x(-F.y,F.x),!0),!0);$&&H.getDistance($)<=_*f&&I($)}I(H.add(F))},_addSquareCap:function(a,h,f,_,b,w,I){var D=a._point.transform(_),k=a.getLocation(),B=k.getNormal().multiply(k.getTime()===0?f:-f).transform(b);h==="square"&&(I&&(w(D.subtract(B)),w(D.add(B))),D=D.add(B.rotate(-90))),w(D.add(B)),w(D.subtract(B))},getHandleBounds:function(a,h,f,_,b){var w=f.getStyle(),I=b.stroke&&w.hasStroke(),D,k;if(I){var B=f._getStrokeMatrix(_,b),H=w.getStrokeWidth()/2,U=H;w.getStrokeJoin()==="miter"&&(U=H*w.getMiterLimit()),w.getStrokeCap()==="square"&&(U=Math.max(U,H*Math.SQRT2)),D=Re._getStrokePadding(H,B),k=Re._getStrokePadding(U,B)}for(var F=new Array(6),q=1/0,$=-q,X=q,Z=$,K=0,W=a.length;K<W;K++){var O=a[K];O._transformCoordinates(_,F);for(var j=0;j<6;j+=2){var te=j?D:k,se=te?te[0]:0,J=te?te[1]:0,de=F[j],me=F[j+1],be=de-se,Se=de+se,ge=me-J,ve=me+J;be<q&&(q=be),Se>$&&($=Se),ge<X&&(X=ge),ve>Z&&(Z=ve)}}return new G(q,X,$-q,Z-X)}}});Re.inject({statics:new function(){var a=.5522847498307936,h=[new nt([-1,0],[0,a],[0,-.5522847498307936]),new nt([0,-1],[-.5522847498307936,0],[a,0]),new nt([1,0],[0,-.5522847498307936],[0,a]),new nt([0,1],[a,0],[-.5522847498307936,0])];function f(b,w,I){var D=r.getNamed(I),k=new Re(D&&(D.insert==!0?N.INSERT:D.insert==!1?N.NO_INSERT:null));return k._add(b),k._closed=w,k.set(D,N.INSERT)}function _(b,w,I){for(var D=new Array(4),k=0;k<4;k++){var B=h[k];D[k]=new nt(B._point.multiply(w).add(b),B._handleIn.multiply(w),B._handleOut.multiply(w))}return f(D,!0,I)}return{Line:function(){var b=arguments;return f([new nt(x.readNamed(b,"from")),new nt(x.readNamed(b,"to"))],!1,b)},Circle:function(){var b=arguments,w=x.readNamed(b,"center"),I=r.readNamed(b,"radius");return _(w,new Q(I),b)},Rectangle:function(){var b=arguments,w=G.readNamed(b,"rectangle"),I=Q.readNamed(b,"radius",0,{readNull:!0}),D=w.getBottomLeft(!0),k=w.getTopLeft(!0),B=w.getTopRight(!0),H=w.getBottomRight(!0),U;if(!I||I.isZero())U=[new nt(D),new nt(k),new nt(B),new nt(H)];else{I=Q.min(I,w.getSize(!0).divide(2));var F=I.width,q=I.height,$=F*a,X=q*a;U=[new nt(D.add(F,0),null,[-$,0]),new nt(D.subtract(0,q),[0,X]),new nt(k.add(0,q),null,[0,-X]),new nt(k.add(F,0),[-$,0],null),new nt(B.subtract(F,0),null,[$,0]),new nt(B.add(0,q),[0,-X],null),new nt(H.subtract(0,q),null,[0,X]),new nt(H.subtract(F,0),[$,0])]}return f(U,!0,b)},RoundRectangle:"#Rectangle",Ellipse:function(){var b=arguments,w=Ee._readEllipse(b);return _(w.center,w.radius,b)},Oval:"#Ellipse",Arc:function(){var b=arguments,w=x.readNamed(b,"from"),I=x.readNamed(b,"through"),D=x.readNamed(b,"to"),k=r.getNamed(b),B=new Re(k&&k.insert==!1&&N.NO_INSERT);return B.moveTo(w),B.arcTo(I,D),B.set(k)},RegularPolygon:function(){for(var b=arguments,w=x.readNamed(b,"center"),I=r.readNamed(b,"sides"),D=r.readNamed(b,"radius"),k=360/I,B=I%3===0,H=new x(0,B?-D:D),U=B?-1:.5,F=new Array(I),q=0;q<I;q++)F[q]=new nt(w.add(H.rotate((q+U)*k)));return f(F,!0,b)},Star:function(){for(var b=arguments,w=x.readNamed(b,"center"),I=r.readNamed(b,"points")*2,D=r.readNamed(b,"radius1"),k=r.readNamed(b,"radius2"),B=360/I,H=new x(0,-1),U=new Array(I),F=0;F<I;F++)U[F]=new nt(w.add(H.rotate(B*F).multiply(F%2?k:D)));return f(U,!0,b)}}}});var at=At.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(h){this._children=[],this._namedChildren={},this._initialize(h)||(typeof h=="string"?this.setPathData(h):this.addChildren(Array.isArray(h)?h:arguments))},insertChildren:function a(h,f){var _=f,b=_[0];b&&typeof b[0]=="number"&&(_=[_]);for(var w=f.length-1;w>=0;w--){var I=_[w];_===f&&!(I instanceof Re)&&(_=r.slice(_)),Array.isArray(I)?_[w]=new Re({segments:I,insert:!1}):I instanceof at&&(_.splice.apply(_,[w,1].concat(I.removeChildren())),I.remove())}return a.base.call(this,h,_)},reduce:function a(h){for(var f=this._children,_=f.length-1;_>=0;_--){var b=f[_].reduce(h);b.isEmpty()&&b.remove()}if(!f.length){var b=new Re(N.NO_INSERT);return b.copyAttributes(this),b.insertAbove(this),this.remove(),b}return a.base.call(this)},isClosed:function(){for(var a=this._children,h=0,f=a.length;h<f;h++)if(!a[h]._closed)return!1;return!0},setClosed:function(a){for(var h=this._children,f=0,_=h.length;f<_;f++)h[f].setClosed(a)},getFirstSegment:function(){var a=this.getFirstChild();return a&&a.getFirstSegment()},getLastSegment:function(){var a=this.getLastChild();return a&&a.getLastSegment()},getCurves:function(){for(var a=this._children,h=[],f=0,_=a.length;f<_;f++)r.push(h,a[f].getCurves());return h},getFirstCurve:function(){var a=this.getFirstChild();return a&&a.getFirstCurve()},getLastCurve:function(){var a=this.getLastChild();return a&&a.getLastCurve()},getArea:function(){for(var a=this._children,h=0,f=0,_=a.length;f<_;f++)h+=a[f].getArea();return h},getLength:function(){for(var a=this._children,h=0,f=0,_=a.length;f<_;f++)h+=a[f].getLength();return h},getPathData:function(a,h){for(var f=this._children,_=[],b=0,w=f.length;b<w;b++){var I=f[b],D=I._matrix;_.push(I.getPathData(a&&!D.isIdentity()?a.appended(D):a,h))}return _.join("")},_hitTestChildren:function a(h,f,_){return a.base.call(this,h,f.class===Re||f.type==="path"?f:r.set({},f,{fill:!1}),_)},_draw:function(a,h,f,_){var b=this._children;if(b.length){h=h.extend({dontStart:!0,dontFinish:!0}),a.beginPath();for(var w=0,I=b.length;w<I;w++)b[w].draw(a,h,_);if(!h.clip){this._setStyles(a,h,f);var D=this._style;D.hasFill()&&(a.fill(D.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),D.hasStroke()&&a.stroke()}}},_drawSelected:function(a,h,f){for(var _=this._children,b=0,w=_.length;b<w;b++){var I=_[b],D=I._matrix;f[I._id]||I._drawSelected(a,D.isIdentity()?h:h.appended(D))}}},new function(){function a(h,f){var _=h._children;if(f&&!_.length)throw new Error("Use a moveTo() command first");return _[_.length-1]}return r.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(h){this[h]=function(){var f=a(this,!0);f[h].apply(f,arguments)}},{moveTo:function(){var h=a(this),f=h&&h.isEmpty()?h:new Re(N.NO_INSERT);f!==h&&this.addChild(f),f.moveTo.apply(f,arguments)},moveBy:function(){var h=a(this,!0),f=h&&h.getLastSegment(),_=x.read(arguments);this.moveTo(f?_.add(f._point):_)},closePath:function(h){a(this,!0).closePath(h)}})},r.each(["reverse","flatten","simplify","smooth"],function(a){this[a]=function(h){for(var f=this._children,_,b=0,w=f.length;b<w;b++)_=f[b][a](h)||_;return _}},{}));At.inject(new function(){var a=Math.min,h=Math.max,f=Math.abs,_={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function b(K){return K._children||[K]}function w(K,W){var O=K.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(W){for(var j=b(O),te=0,se=j.length;te<se;te++){var K=j[te];!K._closed&&!K.isEmpty()&&(K.closePath(1e-12),K.getFirstSegment().setHandleIn(0,0),K.getLastSegment().setHandleOut(0,0))}O=O.resolveCrossings().reorient(O.getFillRule()==="nonzero",!0)}return O}function I(K,W,O,j,te){var se=new at(N.NO_INSERT);return se.addChildren(K,!0),se=se.reduce({simplify:W}),te&&te.insert==!1||se.insertAbove(j&&O.isSibling(j)&&O.getIndex()<j.getIndex()?j:O),se.copyAttributes(O,!0),se}function D(K){return K.hasOverlap()||K.isCrossing()}function k(K,W,O,j){if(j&&(j.trace==!1||j.stroke)&&/^(subtract|intersect)$/.test(O))return B(K,W,O);var te=w(K,!0),se=W&&K!==W&&w(W,!0),J=_[O];J[O]=!0,se&&(J.subtract||J.exclude)^(se.isClockwise()^te.isClockwise())&&se.reverse();var de=q(Zt.expand(te.getIntersections(se,D))),me=b(te),be=se&&b(se),Se=[],ge=[],ve;function Ce(Ot){for(var Qt=0,$t=Ot.length;Qt<$t;Qt++){var si=Ot[Qt];r.push(Se,si._segments),r.push(ge,si.getCurves()),si._overlapsOnly=!0}}function Be(Ot){for(var Qt=[],$t=0,si=Ot&&Ot.length;$t<si;$t++)Qt.push(ge[Ot[$t]]);return Qt}if(de.length){Ce(me),be&&Ce(be);for(var Me=new Array(ge.length),We=0,dt=ge.length;We<dt;We++)Me[We]=ge[We].getValues();for(var wt=y.findCurveBoundsCollisions(Me,Me,0,!0),Dt={},We=0;We<ge.length;We++){var Mt=ge[We],et=Mt._path._id,st=Dt[et]=Dt[et]||{};st[Mt.getIndex()]={hor:Be(wt[We].hor),ver:Be(wt[We].ver)}}for(var We=0,dt=de.length;We<dt;We++)X(de[We]._segment,te,se,Dt,J);for(var We=0,dt=Se.length;We<dt;We++){var It=Se[We],qt=It._intersection;It._winding||X(It,te,se,Dt,J),qt&&qt._overlap||(It._path._overlapsOnly=!1)}ve=Z(Se,J)}else ve=F(be?me.concat(be):me.slice(),function(Ot){return!!J[Ot]});return I(ve,!0,K,W,j)}function B(K,W,O){var j=w(K),te=w(W),se=j.getIntersections(te,D),J=O==="subtract",de=O==="divide",me={},be=[];function Se(Ce){if(!me[Ce._id]&&(de||te.contains(Ce.getPointAt(Ce.getLength()/2))^J))return be.unshift(Ce),me[Ce._id]=!0}for(var ge=se.length-1;ge>=0;ge--){var ve=se[ge].split();ve&&(Se(ve)&&ve.getFirstSegment().setHandleIn(0,0),j.getLastSegment().setHandleOut(0,0))}return Se(j),I(be,!1,K,W)}function H(K,W){for(var O=K;O;){if(O===W)return;O=O._previous}for(;K._next&&K._next!==W;)K=K._next;if(!K._next){for(;W._previous;)W=W._previous;K._next=W,W._previous=K}}function U(K){for(var W=K.length-1;W>=0;W--)K[W].clearHandles()}function F(K,W,O){var j=K&&K.length;if(j){var te=r.each(K,function(wt,Dt){this[wt._id]={container:null,winding:wt.isClockwise()?1:-1,index:Dt}},{}),se=K.slice().sort(function(wt,Dt){return f(Dt.getArea())-f(wt.getArea())}),J=se[0],de=y.findItemBoundsCollisions(se,null,T.GEOMETRIC_EPSILON);O==null&&(O=J.isClockwise());for(var me=0;me<j;me++){var be=se[me],Se=te[be._id],ge=0,ve=de[me];if(ve){for(var Ce=null,Be=ve.length-1;Be>=0;Be--)if(ve[Be]<me){Ce=Ce||be.getInteriorPoint();var Me=se[ve[Be]];if(Me.contains(Ce)){var We=te[Me._id];ge=We.winding,Se.winding+=ge,Se.container=We.exclude?We.container:Me;break}}}if(W(Se.winding)===W(ge))Se.exclude=!0,K[Se.index]=null;else{var dt=Se.container;be.setClockwise(dt?!dt.isClockwise():O)}}}return K}function q(K,W,O){var j=W&&[],te=1e-8,se=1-te,J=!1,de=O||[],me=O&&{},be,Se,ge;function ve(Qt){return Qt._path._id+"."+Qt._segment1._index}for(var Ce=(O&&O.length)-1;Ce>=0;Ce--){var Be=O[Ce];Be._path&&(me[ve(Be)]=!0)}for(var Ce=K.length-1;Ce>=0;Ce--){var Me=K[Ce],We=Me._time,dt=We,wt=W&&!W(Me),Be=Me._curve,Dt;if(Be&&(Be!==Se?(J=!Be.hasHandles()||me&&me[ve(Be)],be=[],ge=null,Se=Be):ge>=te&&(We/=ge)),wt){be&&be.push(Me);continue}else W&&j.unshift(Me);if(ge=dt,We<te)Dt=Be._segment1;else if(We>se)Dt=Be._segment2;else{var Mt=Be.divideAtTime(We,!0);J&&de.push(Be,Mt),Dt=Mt._segment1;for(var et=be.length-1;et>=0;et--){var st=be[et];st._time=(st._time-We)/(1-We)}}Me._setSegment(Dt);var It=Dt._intersection,qt=Me._intersection;if(It){H(It,qt);for(var Ot=It;Ot;)H(Ot._intersection,It),Ot=Ot._next}else Dt._intersection=qt}return O||U(de),j||K}function $(K,W,O,j,te){var se=Array.isArray(W)?W:W[O?"hor":"ver"],J=O?1:0,de=J^1,me=[K.x,K.y],be=me[J],Se=me[de],ge=1e-9,ve=1e-6,Ce=be-ge,Be=be+ge,Me=0,We=0,dt=0,wt=0,Dt=!1,Mt=!1,et=1,st=[],It,qt;function Ot(Ui){var rs=Ui[de+0],Nn=Ui[de+6];if(!(Se<a(rs,Nn)||Se>h(rs,Nn))){var Js=Ui[J+0],Bn=Ui[J+2],yr=Ui[J+4],Un=Ui[J+6];if(rs===Nn){(Js<Be&&Un>Ce||Un<Be&&Js>Ce)&&(Dt=!0);return}var bn=Se===rs?0:Se===Nn||Ce>h(Js,Bn,yr,Un)||Be<a(Js,Bn,yr,Un)?1:Qe.solveCubic(Ui,de,Se,st,0,1)>0?st[0]:1,Dn=bn===0?Js:bn===1?Un:Qe.getPoint(Ui,bn)[O?"y":"x"],ln=rs>Nn?1:-1,Cs=It[de]>It[de+6]?1:-1,Ps=It[J+6];return Se!==rs?(Dn<Ce?dt+=ln:Dn>Be?wt+=ln:Dt=!0,Dn>be-ve&&Dn<be+ve&&(et/=2)):(ln!==Cs?Js<Ce?dt+=ln:Js>Be&&(wt+=ln):Js!=Ps&&(Ps<Be&&Dn>Be?(wt+=ln,Dt=!0):Ps>Ce&&Dn<Ce&&(dt+=ln,Dt=!0)),et/=4),It=Ui,!te&&Dn>Ce&&Dn<Be&&Qe.getTangent(Ui,bn)[O?"x":"y"]===0&&$(K,W,!O,j,!0)}}function Qt(Ui){var rs=Ui[de+0],Nn=Ui[de+2],Js=Ui[de+4],Bn=Ui[de+6];if(Se<=h(rs,Nn,Js,Bn)&&Se>=a(rs,Nn,Js,Bn)){for(var yr=Ui[J+0],Un=Ui[J+2],bn=Ui[J+4],Dn=Ui[J+6],ln=Ce>h(yr,Un,bn,Dn)||Be<a(yr,Un,bn,Dn)?[Ui]:Qe.getMonoCurves(Ui,O),Cs,Ps=0,Ua=ln.length;Ps<Ua;Ps++)if(Cs=Ot(ln[Ps]))return Cs}}for(var $t=0,si=se.length;$t<si;$t++){var gi=se[$t],oi=gi._path,Hs=gi.getValues(),xs;if((!$t||se[$t-1]._path!==oi)&&(It=null,oi._closed||(qt=Qe.getValues(oi.getLastCurve().getSegment2(),gi.getSegment1(),null,!j),qt[de]!==qt[de+6]&&(It=qt)),!It)){It=Hs;for(var Gs=oi.getLastCurve();Gs&&Gs!==gi;){var xt=Gs.getValues();if(xt[de]!==xt[de+6]){It=xt;break}Gs=Gs.getPrevious()}}if(xs=Qt(Hs))return xs;if($t+1===si||se[$t+1]._path!==oi){if(qt&&(xs=Qt(qt)))return xs;Dt&&!dt&&!wt&&(dt=wt=oi.isClockwise(j)^O?1:-1),Me+=dt,We+=wt,dt=wt=0,Dt&&(Mt=!0,Dt=!1),qt=null}}return Me=f(Me),We=f(We),{winding:h(Me,We),windingL:Me,windingR:We,quality:et,onPath:Mt}}function X(K,W,O,j,te){var se=[],J=K,de=0,ge;do{var me=K.getCurve();if(me){var be=me.getLength();se.push({segment:K,curve:me,length:be}),de+=be}K=K.getNext()}while(K&&!K._intersection&&K!==J);for(var Se=[.5,.25,.75],ge={winding:0,quality:-1},ve=.001,Ce=1-ve,Be=0;Be<Se.length&&ge.quality<.5;Be++)for(var be=de*Se[Be],Me=0,We=se.length;Me<We;Me++){var dt=se[Me],wt=dt.length;if(be<=wt){var me=dt.curve,Dt=me._path,Mt=Dt._parent,et=Mt instanceof at?Mt:Dt,st=T.clamp(me.getTimeAt(be),ve,Ce),It=me.getPointAtTime(st),qt=f(me.getTangentAtTime(st).y)<Math.SQRT1_2,Ot=null;if(te.subtract&&O){var Qt=et===W?O:W,$t=Qt._getWinding(It,qt,!0);if(et===W&&$t.winding||et===O&&!$t.winding){if($t.quality<1)continue;Ot={winding:0,quality:1}}}Ot=Ot||$(It,j[Dt._id][me.getIndex()],qt,!0),Ot.quality>ge.quality&&(ge=Ot);break}be-=wt}for(var Me=se.length-1;Me>=0;Me--)se[Me].segment._winding=ge}function Z(K,W){var O=[],j;function te(si){var gi;return!!(si&&!si._visited&&(!W||W[(gi=si._winding||{}).winding]&&!(W.unite&&gi.winding===2&&gi.windingL&&gi.windingR)))}function se(si){if(si){for(var gi=0,oi=j.length;gi<oi;gi++)if(si===j[gi])return!0}return!1}function J(si){for(var gi=si._segments,oi=0,Hs=gi.length;oi<Hs;oi++)gi[oi]._visited=!0}function de(si,gi){var oi=si._intersection,Hs=oi,xs=[];gi&&(j=[si]);function Gs(xt,Ui){for(;xt&&xt!==Ui;){var rs=xt._segment,Nn=rs&&rs._path;if(Nn){var Js=rs.getNext()||Nn.getFirstSegment(),Bn=Js._intersection;rs!==si&&(se(rs)||se(Js)||Js&&te(rs)&&(te(Js)||Bn&&te(Bn._segment)))&&xs.push(rs),gi&&j.push(rs)}xt=xt._next}}if(oi){for(Gs(oi);oi&&oi._previous;)oi=oi._previous;Gs(oi,Hs)}return xs}K.sort(function(si,gi){var oi=si._intersection,Hs=gi._intersection,xs=!!(oi&&oi._overlap),Gs=!!(Hs&&Hs._overlap),xt=si._path,Ui=gi._path;return xs^Gs?xs?1:-1:!oi^!Hs?oi?1:-1:xt!==Ui?xt._id-Ui._id:si._index-gi._index});for(var me=0,be=K.length;me<be;me++){var Se=K[me],ge=te(Se),ve=null,Ce=!1,Be=!0,Me=[],We,dt,wt;if(ge&&Se._path._overlapsOnly){var Dt=Se._path,Mt=Se._intersection._segment._path;Dt.compare(Mt)&&(Dt.getArea()&&O.push(Dt.clone(!1)),J(Dt),J(Mt),ge=!1)}for(;ge;){var et=!ve,st=de(Se,et),It=st.shift(),Ce=!et&&(se(Se)||se(It)),qt=!Ce&&It;if(et&&(ve=new Re(N.NO_INSERT),We=null),Ce){(Se.isFirst()||Se.isLast())&&(Be=Se._path._closed),Se._visited=!0;break}if(qt&&We&&(Me.push(We),We=null),We||(qt&&st.push(Se),We={start:ve._segments.length,crossings:st,visited:dt=[],handleIn:wt}),qt&&(Se=It),!te(Se)){ve.removeSegments(We.start);for(var Ot=0,Qt=dt.length;Ot<Qt;Ot++)dt[Ot]._visited=!1;dt.length=0;do Se=We&&We.crossings.shift(),(!Se||!Se._path)&&(Se=null,We=Me.pop(),We&&(dt=We.visited,wt=We.handleIn));while(We&&!te(Se));if(!Se)break}var $t=Se.getNext();ve.add(new nt(Se._point,wt,$t&&Se._handleOut)),Se._visited=!0,dt.push(Se),Se=$t||Se._path.getFirstSegment(),wt=$t&&$t._handleIn}Ce&&(Be&&(ve.getFirstSegment().setHandleIn(wt),ve.setClosed(Be)),ve.getArea()!==0&&O.push(ve))}return O}return{_getWinding:function(K,W,O){return $(K,this.getCurves(),W,O)},unite:function(K,W){return k(this,K,"unite",W)},intersect:function(K,W){return k(this,K,"intersect",W)},subtract:function(K,W){return k(this,K,"subtract",W)},exclude:function(K,W){return k(this,K,"exclude",W)},divide:function(K,W){return W&&(W.trace==!1||W.stroke)?B(this,K,"divide"):I([this.subtract(K,W),this.intersect(K,W)],!0,this,K,W)},resolveCrossings:function(){var K=this._children,W=K||[this];function O(We,dt){var wt=We&&We._intersection;return wt&&wt._overlap&&wt._path===dt}var j=!1,te=!1,se=this.getIntersections(null,function(We){return We.hasOverlap()&&(j=!0)||We.isCrossing()&&(te=!0)}),J=j&&te&&[];if(se=Zt.expand(se),j)for(var de=q(se,function(We){return We.hasOverlap()},J),me=de.length-1;me>=0;me--){var be=de[me],Se=be._path,ge=be._segment,ve=ge.getPrevious(),Ce=ge.getNext();O(ve,Se)&&O(Ce,Se)&&(ge.remove(),ve._handleOut._set(0,0),Ce._handleIn._set(0,0),ve!==ge&&!ve.getCurve().hasLength()&&(Ce._handleIn.set(ve._handleIn),ve.remove()))}te&&(q(se,j&&function(We){var dt=We.getCurve(),wt=We.getSegment(),Dt=We._intersection,Mt=Dt._curve,et=Dt._segment;if(dt&&Mt&&dt._path&&Mt._path)return!0;wt&&(wt._intersection=null),et&&(et._intersection=null)},J),J&&U(J),W=Z(r.each(W,function(We){r.push(this,We._segments)},[])));var Be=W.length,Me;return Be>1&&K?(W!==K&&this.setChildren(W),Me=this):Be===1&&!K&&(W[0]!==this&&this.setSegments(W[0].removeSegments()),Me=this),Me||(Me=new at(N.NO_INSERT),Me.addChildren(W),Me=Me.reduce(),Me.copyAttributes(this),this.replaceWith(Me)),Me},reorient:function(K,W){var O=this._children;return O&&O.length?this.setChildren(F(this.removeChildren(),function(j){return!!(K?j:j&1)},W)):W!==t&&this.setClockwise(W),this},getInteriorPoint:function(){var K=this.getBounds(),W=K.getCenter(!0);if(!this.contains(W)){for(var O=this.getCurves(),j=W.y,te=[],se=[],J=0,de=O.length;J<de;J++){var me=O[J].getValues(),be=me[1],Se=me[3],ge=me[5],ve=me[7];if(j>=a(be,Se,ge,ve)&&j<=h(be,Se,ge,ve))for(var Ce=Qe.getMonoCurves(me),Be=0,Me=Ce.length;Be<Me;Be++){var We=Ce[Be],dt=We[1],wt=We[7];if(dt!==wt&&(j>=dt&&j<=wt||j>=wt&&j<=dt)){var Dt=j===dt?We[0]:j===wt?We[6]:Qe.solveCubic(We,1,j,se,0,1)===1?Qe.getPoint(We,se[0]).x:(We[0]+We[6])/2;te.push(Dt)}}}te.length>1&&(te.sort(function(Mt,et){return Mt-et}),W.x=(te[0]+te[1])/2)}return W}}});var Et=r.extend({_class:"PathFlattener",initialize:function(a,h,f,_,b){var w=[],I=[],D=0,k=1/(f||32),B=a._segments,H=B[0],U;function F(Z,K){var W=Qe.getValues(Z,K,b);w.push(W),q(W,Z._index,0,1)}function q(Z,K,W,O){if(O-W>k&&!(_&&Qe.isStraight(Z))&&!Qe.isFlatEnough(Z,h||.25)){var j=Qe.subdivide(Z,.5),te=(W+O)/2;q(j[0],K,W,te),q(j[1],K,te,O)}else{var se=Z[6]-Z[0],J=Z[7]-Z[1],de=Math.sqrt(se*se+J*J);de>0&&(D+=de,I.push({offset:D,curve:Z,index:K,time:O}))}}for(var $=1,X=B.length;$<X;$++)U=B[$],F(H,U),H=U;a._closed&&F(U||H,B[0]),this.curves=w,this.parts=I,this.length=D,this.index=0},_get:function(a){for(var h=this.parts,f=h.length,_,b=this.index;_=b,!(!b||h[--b].offset<a););for(;_<f;_++){var w=h[_];if(w.offset>=a){this.index=_;var I=h[_-1],D=I&&I.index===w.index?I.time:0,k=I?I.offset:0;return{index:w.index,time:D+(w.time-D)*(a-k)/(w.offset-k)}}}return{index:h[f-1].index,time:1}},drawPart:function(a,h,f){for(var _=this._get(h),b=this._get(f),w=_.index,I=b.index;w<=I;w++){var D=Qe.getPart(this.curves[w],w===_.index?_.time:0,w===b.index?b.time:1);w===_.index&&a.moveTo(D[0],D[1]),a.bezierCurveTo.apply(a,D.slice(2))}}},r.each(Qe._evaluateMethods,function(a){this[a+"At"]=function(h){var f=this._get(h);return Qe[a](this.curves[f.index],f.time)}},{})),Nt=r.extend({initialize:function(a){for(var h=this.points=[],f=a._segments,_=a._closed,b=0,w,I=f.length;b<I;b++){var D=f[b].point;(!w||!w.equals(D))&&h.push(w=D.clone())}_&&(h.unshift(h[h.length-1]),h.push(h[1])),this.closed=_},fit:function(a){var h=this.points,f=h.length,_=null;return f>0&&(_=[new nt(h[0])],f>1&&(this.fitCubic(_,a,0,f-1,h[1].subtract(h[0]),h[f-2].subtract(h[f-1])),this.closed&&(_.shift(),_.pop()))),_},fitCubic:function(a,h,f,_,b,w){var I=this.points;if(_-f===1){var D=I[f],k=I[_],B=D.getDistance(k)/3;this.addCurve(a,[D,D.add(b.normalize(B)),k.add(w.normalize(B)),k]);return}for(var H=this.chordLengthParameterize(f,_),U=Math.max(h,h*h),F,q=!0,$=0;$<=4;$++){var X=this.generateBezier(f,_,H,b,w),Z=this.findMaxError(f,_,X,H);if(Z.error<h&&q){this.addCurve(a,X);return}if(F=Z.index,Z.error>=U)break;q=this.reparameterize(f,_,H,X),U=Z.error}var K=I[F-1].subtract(I[F+1]);this.fitCubic(a,h,f,F,b,K),this.fitCubic(a,h,F,_,K.negate(),w)},addCurve:function(a,h){var f=a[a.length-1];f.setHandleOut(h[1].subtract(h[0])),a.push(new nt(h[3],h[2].subtract(h[3])))},generateBezier:function(a,h,f,_,b){for(var w=1e-12,I=Math.abs,D=this.points,k=D[a],B=D[h],H=[[0,0],[0,0]],U=[0,0],F=0,q=h-a+1;F<q;F++){var $=f[F],X=1-$,Z=3*$*X,K=X*X*X,W=Z*X,O=Z*$,j=$*$*$,te=_.normalize(W),se=b.normalize(O),J=D[a+F].subtract(k.multiply(K+W)).subtract(B.multiply(O+j));H[0][0]+=te.dot(te),H[0][1]+=te.dot(se),H[1][0]=H[0][1],H[1][1]+=se.dot(se),U[0]+=te.dot(J),U[1]+=se.dot(J)}var de=H[0][0]*H[1][1]-H[1][0]*H[0][1],me,be;if(I(de)>w){var Se=H[0][0]*U[1]-H[1][0]*U[0],ge=U[0]*H[1][1]-U[1]*H[0][1];me=ge/de,be=Se/de}else{var ve=H[0][0]+H[0][1],Ce=H[1][0]+H[1][1];me=be=I(ve)>w?U[0]/ve:I(Ce)>w?U[1]/Ce:0}var Be=B.getDistance(k),Me=w*Be,We,dt;if(me<Me||be<Me)me=be=Be/3;else{var wt=B.subtract(k);We=_.normalize(me),dt=b.normalize(be),We.dot(wt)-dt.dot(wt)>Be*Be&&(me=be=Be/3,We=dt=null)}return[k,k.add(We||_.normalize(me)),B.add(dt||b.normalize(be)),B]},reparameterize:function(a,h,f,_){for(var b=a;b<=h;b++)f[b-a]=this.findRoot(_,this.points[b],f[b-a]);for(var b=1,w=f.length;b<w;b++)if(f[b]<=f[b-1])return!1;return!0},findRoot:function(a,h,f){for(var _=[],b=[],w=0;w<=2;w++)_[w]=a[w+1].subtract(a[w]).multiply(3);for(var w=0;w<=1;w++)b[w]=_[w+1].subtract(_[w]).multiply(2);var I=this.evaluate(3,a,f),D=this.evaluate(2,_,f),k=this.evaluate(1,b,f),B=I.subtract(h),H=D.dot(D)+B.dot(k);return T.isMachineZero(H)?f:f-B.dot(D)/H},evaluate:function(a,h,f){for(var _=h.slice(),b=1;b<=a;b++)for(var w=0;w<=a-b;w++)_[w]=_[w].multiply(1-f).add(_[w+1].multiply(f));return _[0]},chordLengthParameterize:function(a,h){for(var f=[0],_=a+1;_<=h;_++)f[_-a]=f[_-a-1]+this.points[_].getDistance(this.points[_-1]);for(var _=1,b=h-a;_<=b;_++)f[_]/=f[b];return f},findMaxError:function(a,h,f,_){for(var b=Math.floor((h-a+1)/2),w=0,I=a+1;I<h;I++){var D=this.evaluate(3,f,_[I-a]),k=D.subtract(this.points[I]),B=k.x*k.x+k.y*k.y;B>=w&&(w=B,b=I)}return{error:w,index:b}}}),Ht=N.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(h){this._content="",this._lines=[];var f=h&&r.isPlainObject(h)&&h.x===t&&h.y===t;this._initialize(f&&h,!f&&x.read(arguments))},_equals:function(a){return this._content===a._content},copyContent:function(a){this.setContent(a._content)},getContent:function(){return this._content},setContent:function(a){this._content=""+a,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),cs=Ht.extend({_class:"PointText",initialize:function(){Ht.apply(this,arguments)},getPoint:function(){var a=this._matrix.getTranslation();return new A(a.x,a.y,this,"setPoint")},setPoint:function(){var a=x.read(arguments);this.translate(a.subtract(this._matrix.getTranslation()))},_draw:function(a,h,f){if(this._content){this._setStyles(a,h,f);var _=this._lines,b=this._style,w=b.hasFill(),I=b.hasStroke(),D=b.getLeading(),k=a.shadowColor;a.font=b.getFontStyle(),a.textAlign=b.getJustification();for(var B=0,H=_.length;B<H;B++){a.shadowColor=k;var U=_[B];w&&(a.fillText(U,0,0),a.shadowColor="rgba(0,0,0,0)"),I&&a.strokeText(U,0,0),a.translate(0,D)}}},_getBounds:function(a,h){var f=this._style,_=this._lines,b=_.length,w=f.getJustification(),I=f.getLeading(),D=this.getView().getTextWidth(f.getFontStyle(),_),k=0;w!=="left"&&(k-=D/(w==="center"?2:1));var B=new G(k,b?-.75*I:0,D,b*I);return a?a._transformBounds(B,B):B}}),hi=r.extend(new function(){var a={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},h={},f={transparent:[0,0,0,0]},_;function b(D){var k=D.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||D.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),B="rgb",H;if(k){var U=k[4]?4:3;H=new Array(U);for(var F=0;F<U;F++){var q=k[F+1];H[F]=parseInt(q.length==1?q+q:q,16)/255}}else if(k=D.match(/^(rgb|hsl)a?\((.*)\)$/)){B=k[1],H=k[2].trim().split(/[,\s]+/g);for(var $=B==="hsl",F=0,X=Math.min(H.length,4);F<X;F++){var Z=H[F],q=parseFloat(Z);if($)if(F===0){var K=Z.match(/([a-z]*)$/)[1];q*={turn:360,rad:180/Math.PI,grad:.9}[K]||1}else F<3&&(q/=100);else F<3&&(q/=/%$/.test(Z)?100:255);H[F]=q}}else{var W=f[D];if(!W)if(i){_||(_=yt.getContext(1,1,{willReadFrequently:!0}),_.globalCompositeOperation="copy"),_.fillStyle="rgba(0,0,0,0)",_.fillStyle=D,_.fillRect(0,0,1,1);var O=_.getImageData(0,0,1,1).data;W=f[D]=[O[0]/255,O[1]/255,O[2]/255]}else W=[0,0,0];H=W.slice()}return[B,H]}var w=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],I={"rgb-hsb":function(D,k,B){var H=Math.max(D,k,B),U=Math.min(D,k,B),F=H-U,q=F===0?0:(H==D?(k-B)/F+(k<B?6:0):H==k?(B-D)/F+2:(D-k)/F+4)*60;return[q,H===0?0:F/H,H]},"hsb-rgb":function(D,k,B){D=(D/60%6+6)%6;var U=Math.floor(D),H=D-U,U=w[U],F=[B,B*(1-k),B*(1-k*H),B*(1-k*(1-H))];return[F[U[0]],F[U[1]],F[U[2]]]},"rgb-hsl":function(D,k,B){var H=Math.max(D,k,B),U=Math.min(D,k,B),F=H-U,q=F===0,$=q?0:(H==D?(k-B)/F+(k<B?6:0):H==k?(B-D)/F+2:(D-k)/F+4)*60,X=(H+U)/2,Z=q?0:X<.5?F/(H+U):F/(2-H-U);return[$,Z,X]},"hsl-rgb":function(D,k,B){if(D=(D/360%1+1)%1,k===0)return[B,B,B];for(var H=[D+1/3,D,D-1/3],U=B<.5?B*(1+k):B+k-B*k,F=2*B-U,q=[],$=0;$<3;$++){var X=H[$];X<0&&(X+=1),X>1&&(X-=1),q[$]=6*X<1?F+(U-F)*6*X:2*X<1?U:3*X<2?F+(U-F)*(2/3-X)*6:F}return q},"rgb-gray":function(D,k,B){return[D*.2989+k*.587+B*.114]},"gray-rgb":function(D){return[D,D,D]},"gray-hsb":function(D){return[0,0,D]},"gray-hsl":function(D){return[0,0,D]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return r.each(a,function(D,k){h[k]=[],r.each(D,function(B,H){var U=r.capitalize(B),F=/^(hue|saturation)$/.test(B),q=h[k][H]=k==="gradient"?B==="gradient"?function($){var X=this._components[0];return $=zs.read(Array.isArray($)?$:arguments,0,{readNull:!0}),X!==$&&(X&&X._removeOwner(this),$&&$._addOwner(this)),$}:function(){return x.read(arguments,0,{readNull:B==="highlight",clone:!0})}:function($){return $==null||isNaN($)?0:+$};this["get"+U]=function(){return this._type===k||F&&/^hs[bl]$/.test(this._type)?this._components[H]:this._convert(k)[H]},this["set"+U]=function($){this._type!==k&&!(F&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(k),this._properties=a[k],this._type=k),this._components[H]=q.call(this,$),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function D(k){var B=arguments,H=this.__read,U=0,F,q,$,X;Array.isArray(k)&&(B=k,k=B[0]);var Z=k!=null&&typeof k;if(Z==="string"&&k in a&&(F=k,k=B[1],Array.isArray(k)?(q=k,$=B[2]):(H&&(U=1),B=r.slice(B,1),Z=typeof k)),!q){if(X=Z==="number"?B:Z==="object"&&k.length!=null?k:null,X){F||(F=X.length>=3?"rgb":"gray");var K=a[F].length;$=X[K],H&&(U+=X===arguments?K+($!=null?1:0):1),X.length>K&&(X=r.slice(X,0,K))}else if(Z==="string"){var W=b(k);F=W[0],q=W[1],q.length===4&&($=q[3],q.length--)}else if(Z==="object")if(k.constructor===D){if(F=k._type,q=k._components.slice(),$=k._alpha,F==="gradient")for(var O=1,j=q.length;O<j;O++){var te=q[O];te&&(q[O]=te.clone())}}else if(k.constructor===zs)F="gradient",X=B;else{F="hue"in k?"lightness"in k?"hsl":"hsb":"gradient"in k||"stops"in k||"radial"in k?"gradient":"gray"in k?"gray":"rgb";var se=a[F],J=h[F];this._components=q=[];for(var O=0,j=se.length;O<j;O++){var de=k[se[O]];de==null&&!O&&F==="gradient"&&"stops"in k&&(de={stops:k.stops,radial:k.radial}),de=J[O].call(this,de),de!=null&&(q[O]=de)}$=k.alpha}H&&F&&(U=1)}if(this._type=F||"rgb",!q){this._components=q=[];for(var J=h[this._type],O=0,j=J.length;O<j;O++){var de=J[O].call(this,X&&X[O]);de!=null&&(q[O]=de)}}return this._components=q,this._properties=a[this._type],this._alpha=$,H&&(this.__read=U),this},set:"#initialize",_serialize:function(D,k){var B=this.getComponents();return r.serialize(/^(gray|rgb)$/.test(this._type)?B:[this._type].concat(B),D,!0,k)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(D){var k;return this._type===D?this._components.slice():(k=I[this._type+"-"+D])?k.apply(this,this._components):I["rgb-"+D].apply(this,I[this._type+"-rgb"].apply(this,this._components))},convert:function(D){return new hi(D,this._convert(D),this._alpha)},getType:function(){return this._type},setType:function(D){this._components=this._convert(D),this._properties=a[D],this._type=D},getComponents:function(){var D=this._components.slice();return this._alpha!=null&&D.push(this._alpha),D},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(D){this._alpha=D==null?null:Math.min(Math.max(D,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(D){var k=r.isPlainValue(D,!0)?hi.read(arguments):D;return k===this||k&&this._class===k._class&&this._type===k._type&&this.getAlpha()===k.getAlpha()&&r.equals(this._components,k._components)||!1},toString:function(){for(var D=this._properties,k=[],B=this._type==="gradient",H=S.instance,U=0,F=D.length;U<F;U++){var q=this._components[U];q!=null&&k.push(D[U]+": "+(B?q:H.number(q)))}return this._alpha!=null&&k.push("alpha: "+H.number(this._alpha)),"{ "+k.join(", ")+" }"},toCSS:function(D){var k=this._convert("rgb"),B=D||this._alpha==null?1:this._alpha;function H(U){return Math.round((U<0?0:U>1?1:U)*255)}return k=[H(k[0]),H(k[1]),H(k[2])],B<1&&k.push(B<0?0:B),D?"#"+((1<<24)+(k[0]<<16)+(k[1]<<8)+k[2]).toString(16).slice(1):(k.length==4?"rgba(":"rgb(")+k.join(",")+")"},toCanvasStyle:function(D,k){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var B=this._components,H=B[0],U=H._stops,F=B[1],q=B[2],$=B[3],X=k&&k.inverted(),Z;if(X&&(F=X._transformPoint(F),q=X._transformPoint(q),$&&($=X._transformPoint($))),H._radial){var K=q.getDistance(F);if($){var W=$.subtract(F);W.getLength()>K&&($=F.add(W.normalize(K-.1)))}var O=$||F;Z=D.createRadialGradient(O.x,O.y,0,F.x,F.y,K)}else Z=D.createLinearGradient(F.x,F.y,q.x,q.y);for(var j=0,te=U.length;j<te;j++){var se=U[j],J=se._offset;Z.addColorStop(J??j/(te-1),se._color.toCanvasStyle())}return this._canvasStyle=Z},transform:function(D){if(this._type==="gradient"){for(var k=this._components,B=1,H=k.length;B<H;B++){var U=k[B];D._transformPoint(U,U,!0)}this._changed()}},statics:{_types:a,random:function(){var D=Math.random;return new hi(D(),D(),D())},_setOwner:function(D,k,B){return D&&(D._owner&&k&&D._owner!==k&&(D=D.clone()),!D._owner^!k&&(D._owner=k||null,D._setter=B||null)),D}}})},new function(){var a={add:function(h,f){return h+f},subtract:function(h,f){return h-f},multiply:function(h,f){return h*f},divide:function(h,f){return h/f}};return r.each(a,function(h,f){this[f]=function(_){_=hi.read(arguments);for(var b=this._type,w=this._components,I=_._convert(b),D=0,k=w.length;D<k;D++)I[D]=h(w[D],I[D]);return new hi(b,I,this._alpha!=null?h(this._alpha,_.getAlpha()):null)}},{})}),zs=r.extend({_class:"Gradient",initialize:function(h,f){this._id=L.get(),h&&r.isPlainObject(h)&&(this.set(h),h=f=null),this._stops==null&&this.setStops(h||["white","black"]),this._radial==null&&this.setRadial(typeof f=="string"&&f==="radial"||f||!1)},_serialize:function(a,h){return h.add(this,function(){return r.serialize([this._stops,this._radial],a,!0,h)})},_changed:function(){for(var a=0,h=this._owners&&this._owners.length;a<h;a++)this._owners[a]._changed()},_addOwner:function(a){this._owners||(this._owners=[]),this._owners.push(a)},_removeOwner:function(a){var h=this._owners?this._owners.indexOf(a):-1;h!=-1&&(this._owners.splice(h,1),this._owners.length||(this._owners=t))},clone:function(){for(var a=[],h=0,f=this._stops.length;h<f;h++)a[h]=this._stops[h].clone();return new zs(a,this._radial)},getStops:function(){return this._stops},setStops:function(a){if(a.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var h=this._stops;if(h)for(var f=0,_=h.length;f<_;f++)h[f]._owner=t;h=this._stops=Ji.readList(a,0,{clone:!0});for(var f=0,_=h.length;f<_;f++)h[f]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(a){this._radial=a,this._changed()},equals:function(a){if(a===this)return!0;if(a&&this._class===a._class){var h=this._stops,f=a._stops,_=h.length;if(_===f.length){for(var b=0;b<_;b++)if(!h[b].equals(f[b]))return!1;return!0}}return!1}}),Ji=r.extend({_class:"GradientStop",initialize:function(h,f){var _=h,b=f;typeof h=="object"&&f===t&&(Array.isArray(h)&&typeof h[0]!="number"?(_=h[0],b=h[1]):("color"in h||"offset"in h||"rampPoint"in h)&&(_=h.color,b=h.offset||h.rampPoint||0)),this.setColor(_),this.setOffset(b)},clone:function(){return new Ji(this._color.clone(),this._offset)},_serialize:function(a,h){var f=this._color,_=this._offset;return r.serialize(_==null?[f]:[f,_],a,!0,h)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(a){this._offset=a,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){hi._setOwner(this._color,null),this._color=hi._setOwner(hi.read(arguments,0),this,"setColor"),this._changed()},equals:function(a){return a===this||a&&this._class===a._class&&this._color.equals(a._color)&&this._offset==a._offset||!1}}),bs=r.extend(new function(){var a={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new x,selectedColor:null},h=r.set({},a,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),f=r.set({},h,{fillColor:new hi}),_={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},b={beans:!0},w={_class:"Style",beans:!0,initialize:function(D,k,B){this._values={},this._owner=k,this._project=k&&k._project||B||Jt.project,this._defaults=!k||k instanceof Ie?h:k instanceof Ht?f:a,D&&this.set(D)}};return r.each(h,function(I,D){var k=/Color$/.test(D),B=D==="shadowOffset",H=r.capitalize(D),U=_[D],F="set"+H,q="get"+H;w[F]=function($){var X=this._owner,Z=X&&X._children,K=Z&&Z.length>0&&!(X instanceof at);if(K)for(var W=0,O=Z.length;W<O;W++)Z[W]._style[F]($);if((D==="selectedColor"||!K)&&D in this._defaults){var j=this._values[D];j!==$&&(k&&(j&&(hi._setOwner(j,null),j._canvasStyle=null),$&&$.constructor===hi&&($=hi._setOwner($,X,K&&F))),this._values[D]=$,X&&X._changed(U||129))}},w[q]=function($){var X=this._owner,Z=X&&X._children,K=Z&&Z.length>0&&!(X instanceof at),W;if(K&&!$)for(var O=0,j=Z.length;O<j;O++){var te=Z[O]._style[q]();if(!O)W=te;else if(!r.equals(W,te))return t}else if(D in this._defaults){var W=this._values[D];if(W===t)W=this._defaults[D],W&&W.clone&&(W=W.clone());else{var se=k?hi:B?x:null;se&&!(W&&W.constructor===se)&&(this._values[D]=W=se.read([W],0,{readNull:!0,clone:!0}))}}return W&&k&&(W=hi._setOwner(W,X,K&&F)),W},b[q]=function($){return this._style[q]($)},b[F]=function($){this._style[F]($)}}),r.each({Font:"FontFamily",WindingRule:"FillRule"},function(I,D){var k="get"+D,B="set"+D;w[k]=b[k]="#get"+I,w[B]=b[B]="#set"+I}),N.inject(b),w},{set:function(a){var h=a instanceof bs,f=h?a._values:a;if(f){for(var _ in f)if(_ in this._defaults){var b=f[_];this[_]=b&&h&&b.clone?b.clone():b}}},equals:function(a){function h(f,_,b){var w=f._values,I=_._values,D=_._defaults;for(var k in w){var B=w[k],H=I[k];if(!(b&&k in I)&&!r.equals(B,H===t?D[k]:H))return!1}return!0}return a===this||a&&this._class===a._class&&h(this,a)&&h(a,this,!0)||!1},_dispose:function(){var a;a=this.getFillColor(),a&&(a._canvasStyle=null),a=this.getStrokeColor(),a&&(a._canvasStyle=null),a=this.getShadowColor(),a&&(a._canvasStyle=null)},hasFill:function(){var a=this.getFillColor();return!!a&&a.alpha>0},hasStroke:function(){var a=this.getStrokeColor();return!!a&&a.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var a=this.getShadowColor();return!!a&&a.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var a=this.getFontSize();return this.getFontWeight()+" "+a+(/[a-z]/i.test(a+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function a(){var h=a.base.call(this),f=this.getFontSize();return/pt|em|%|px/.test(f)&&(f=this.getView().getPixelSize(f)),h??f*1.2}}),ai=new function(){function a(h,f,_,b){for(var w=["","webkit","moz","Moz","ms","o"],I=f[0].toUpperCase()+f.substring(1),D=0;D<6;D++){var k=w[D],B=k?k+I:f;if(B in h){if(_)h[B]=b;else return h[B];break}}}return{getStyles:function(h){var f=h&&h.nodeType!==9?h.ownerDocument:h,_=f&&f.defaultView;return _&&_.getComputedStyle(h,"")},getBounds:function(h,f){var _=h.ownerDocument,b=_.body,w=_.documentElement,I;try{I=h.getBoundingClientRect()}catch{I={left:0,top:0,width:0,height:0}}var D=I.left-(w.clientLeft||b.clientLeft||0),k=I.top-(w.clientTop||b.clientTop||0);if(!f){var B=_.defaultView;D+=B.pageXOffset||w.scrollLeft||b.scrollLeft,k+=B.pageYOffset||w.scrollTop||b.scrollTop}return new G(D,k,I.width,I.height)},getViewportBounds:function(h){var f=h.ownerDocument,_=f.defaultView,b=f.documentElement;return new G(0,0,_.innerWidth||b.clientWidth,_.innerHeight||b.clientHeight)},getOffset:function(h,f){return ai.getBounds(h,f).getPoint()},getSize:function(h){return ai.getBounds(h,!0).getSize()},isInvisible:function(h){return ai.getSize(h).equals(new Q(0,0))},isInView:function(h){return!ai.isInvisible(h)&&ai.getViewportBounds(h).intersects(ai.getBounds(h,!0))},isInserted:function(h){return s.body.contains(h)},getPrefixed:function(h,f){return h&&a(h,f)},setPrefixed:function(h,f,_){if(typeof f=="object")for(var b in f)a(h,b,!0,f[b]);else a(h,f,!0,_)}}},Ei={add:function(a,h){if(a)for(var f in h)for(var _=h[f],b=f.split(/[\s,]+/g),w=0,I=b.length;w<I;w++){var D=b[w],k=a===s&&(D==="touchstart"||D==="touchmove")?{passive:!1}:!1;a.addEventListener(D,_,k)}},remove:function(a,h){if(a)for(var f in h)for(var _=h[f],b=f.split(/[\s,]+/g),w=0,I=b.length;w<I;w++)a.removeEventListener(b[w],_,!1)},getPoint:function(a){var h=a.targetTouches?a.targetTouches.length?a.targetTouches[0]:a.changedTouches[0]:a;return new x(h.pageX||h.clientX+s.documentElement.scrollLeft,h.pageY||h.clientY+s.documentElement.scrollTop)},getTarget:function(a){return a.target||a.srcElement},getRelatedTarget:function(a){return a.relatedTarget||a.toElement},getOffset:function(a,h){return Ei.getPoint(a).subtract(ai.getOffset(h||Ei.getTarget(a)))}};Ei.requestAnimationFrame=new function(){var a=ai.getPrefixed(i,"requestAnimationFrame"),h=!1,f=[],_;function b(){var w=f;f=[];for(var I=0,D=w.length;I<D;I++)w[I]();h=a&&f.length,h&&a(b)}return function(w){f.push(w),a?h||(a(b),h=!0):_||(_=setInterval(b,1e3/60))}};var Pt=r.extend(o,{_class:"View",initialize:function a(h,f){function _(U){return f[U]||parseInt(f.getAttribute(U),10)}function b(){var U=ai.getSize(f);return U.isNaN()||U.isZero()?new Q(_("width"),_("height")):U}var w;if(i&&f){this._id=f.getAttribute("id"),this._id==null&&f.setAttribute("id",this._id="paper-view-"+a._id++),Ei.add(f,this._viewEvents);var I="none";if(ai.setPrefixed(f.style,{userDrag:I,userSelect:I,touchCallout:I,contentZooming:I,tapHighlightColor:"rgba(0,0,0,0)"}),d.hasAttribute(f,"resize")){var D=this;Ei.add(i,this._windowEvents={resize:function(){D.setViewSize(b())}})}if(w=b(),d.hasAttribute(f,"stats")&&typeof Stats<"u"){this._stats=new Stats;var k=this._stats.domElement,B=k.style,H=ai.getOffset(f);B.position="absolute",B.left=H.x+"px",B.top=H.y+"px",s.body.appendChild(k)}}else w=new Q(f),f=null;this._project=h,this._scope=h._scope,this._element=f,this._pixelRatio||(this._pixelRatio=i&&i.devicePixelRatio||1),this._setElementSize(w.width,w.height),this._viewSize=w,a._views.push(this),a._viewsById[this._id]=this,(this._matrix=new ne)._owner=this,a._focused||(a._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Jt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Pt._focused===this&&(Pt._focused=null),Pt._views.splice(Pt._views.indexOf(this),1),delete Pt._viewsById[this._id];var a=this._project;return a._view===this&&(a._view=null),Ei.remove(this._element,this._viewEvents),Ei.remove(i,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:r.each(N._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(a){this[a]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(a){this._autoUpdate=a,a&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var a=this;Ei.requestAnimationFrame(function(){if(a._requested=!1,a._animate){a.requestUpdate();var h=a._element;(!ai.getPrefixed(s,"hidden")||d.getAttribute(h,"keepalive")==="true")&&ai.isInView(h)&&a._handleFrame()}a._autoUpdate&&a.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Jt=this._scope;var a=Date.now()/1e3,h=this._last?a-this._last:0;this._last=a,this.emit("frame",new r({delta:h,time:this._time+=h,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(a,h){var f=this._frameItems;h?(f[a._id]={item:a,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete f[a._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(a){for(var h in this._frameItems){var f=this._frameItems[h];f.item.emit("frame",new r(a,{time:f.time+=a.delta,count:f.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=t},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var a=this._viewSize;return new z(a.width,a.height,this,"setViewSize")},setViewSize:function(){var a=Q.read(arguments),h=a.subtract(this._viewSize);h.isZero()||(this._setElementSize(a.width,a.height),this._viewSize.set(a),this._changed(),this.emit("resize",{size:a,delta:h}),this._autoUpdate&&this.update())},_setElementSize:function(a,h){var f=this._element;f&&(f.width!==a&&(f.width=a),f.height!==h&&(f.height=h))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new G(new x,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return ai.isInView(this._element)},isInserted:function(){return ai.isInserted(this._element)},getPixelSize:function(a){var h=this._element,f;if(h){var _=h.parentNode,b=s.createElement("div");b.style.fontSize=a,_.appendChild(b),f=parseFloat(ai.getStyles(b).fontSize),_.removeChild(b)}else f=parseFloat(f);return f},getTextWidth:function(a,h){return 0}},r.each(["rotate","scale","shear","skew"],function(a){var h=a==="rotate";this[a]=function(){var f=arguments,_=(h?r:x).read(f),b=x.read(f,0,{readNull:!0});return this.transform(new ne()[a](_,b||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var a=new ne;return this.transform(a.translate.apply(a,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var a=x.read(arguments);this.translate(this.getCenter().subtract(a))},getZoom:function(){var a=this._decompose().scaling;return(a.x+a.y)/2},setZoom:function(a){this.transform(new ne().scale(a/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(a){var h=this.getRotation();h!=null&&a!=null&&this.rotate(a-h)},getScaling:function(){var a=this._decompose().scaling;return new A(a.x,a.y,this,"setScaling")},setScaling:function(){var a=this.getScaling(),h=x.read(arguments,0,{clone:!0,readNull:!0});a&&h&&this.scale(h.x/a.x,h.y/a.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.set.apply(a,arguments)},transform:function(a){this._matrix.append(a)},scrollBy:function(){this.translate(x.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(x.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(x.read(arguments))},getEventPoint:function(a){return this.viewToProject(Ei.getOffset(a,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(a,h){s&&typeof h=="string"&&(h=s.getElementById(h));var f=i?Hn:Pt;return new f(a,h)}}},new function(){if(!i)return;var a,h,f=!1,_=!1;function b(ge){var ve=Ei.getTarget(ge);return ve.getAttribute&&Pt._viewsById[ve.getAttribute("id")]}function w(){var ge=Pt._focused;if(!ge||!ge.isVisible()){for(var ve=0,Ce=Pt._views.length;ve<Ce;ve++)if((ge=Pt._views[ve]).isVisible()){Pt._focused=h=ge;break}}}function I(ge,ve,Ce){ge._handleMouseEvent("mousemove",ve,Ce)}var D=i.navigator,k,B,H;D.pointerEnabled||D.msPointerEnabled?(k="pointerdown MSPointerDown",B="pointermove MSPointerMove",H="pointerup pointercancel MSPointerUp MSPointerCancel"):(k="touchstart",B="touchmove",H="touchend touchcancel","ontouchstart"in i&&D.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(k+=" mousedown",B+=" mousemove",H+=" mouseup"));var U={},F={mouseout:function(ge){var ve=Pt._focused,Ce=Ei.getRelatedTarget(ge);if(ve&&(!Ce||Ce.nodeName==="HTML")){var Be=Ei.getOffset(ge,ve._element),Me=Be.x,We=Math.abs,dt=We(Me),wt=1<<25,Dt=dt-wt;Be.x=We(Dt)<dt?Dt*(Me<0?-1:1):Me,I(ve,ge,ve.viewToProject(Be))}},scroll:w};U[k]=function(ge){var ve=Pt._focused=b(ge);f||(f=!0,ve._handleMouseEvent("mousedown",ge))},F[B]=function(ge){var ve=Pt._focused;if(!_){var Ce=b(ge);Ce?ve!==Ce&&(ve&&I(ve,ge),a||(a=ve),ve=Pt._focused=h=Ce):h&&h===ve&&(a&&!a.isInserted()&&(a=null),ve=Pt._focused=a,a=null,w())}ve&&I(ve,ge)},F[k]=function(){_=!0},F[H]=function(ge){var ve=Pt._focused;ve&&f&&ve._handleMouseEvent("mouseup",ge),_=f=!1},Ei.add(s,F),Ei.add(i,{load:w});var q=!1,$=!1,X={doubleclick:"click",mousedrag:"mousemove"},Z=!1,K,W,O,j,te,se,J,de;function me(ge,ve,Ce,Be,Me,We,dt){var wt=!1,Dt;function Mt(et,st){if(et.responds(st)){if(Dt||(Dt=new P(st,Be,Me,ve||et,We?Me.subtract(We):null)),et.emit(st,Dt)&&(q=!0,Dt.prevented&&($=!0),Dt.stopped))return wt=!0}else{var It=X[st];if(It)return Mt(et,It)}}for(;ge&&ge!==dt&&!Mt(ge,Ce);)ge=ge._parent;return wt}function be(ge,ve,Ce,Be,Me,We){return ge._project.removeOn(Ce),$=q=!1,te&&me(te,null,Ce,Be,Me,We)||ve&&ve!==te&&!ve.isDescendant(te)&&me(ve,null,Ce==="mousedrag"?"mousemove":Ce,Be,Me,We,te)||me(ge,te||ve||ge,Ce,Be,Me,We)}var Se={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:U,_handleMouseEvent:function(ge,ve,Ce){var Be=this._itemEvents,Me=Be.native[ge],We=ge==="mousemove",dt=this._scope.tool,wt=this;function Dt(Qt){return Be.virtual[Qt]||wt.responds(Qt)||dt&&dt.responds(Qt)}We&&f&&Dt("mousedrag")&&(ge="mousedrag"),Ce||(Ce=this.getEventPoint(ve));var Mt=this.getBounds().contains(Ce),et=Me&&Mt&&wt._project.hitTest(Ce,{tolerance:0,fill:!0,stroke:!0}),st=et&&et.item||null,It=!1,qt={};if(qt[ge.substr(5)]=!0,Me&&st!==j&&(j&&me(j,null,"mouseleave",ve,Ce),st&&me(st,null,"mouseenter",ve,Ce),j=st),Z^Mt&&(me(this,null,Mt?"mouseenter":"mouseleave",ve,Ce),It=!0),(Mt||qt.drag)&&!Ce.equals(W)&&(be(this,st,We?ge:"mousemove",ve,Ce,W),It=!0),Z=Mt,qt.down&&Mt||qt.up&&K){if(be(this,st,ge,ve,Ce,K),qt.down){if(de=st===se&&Date.now()-J<300,O=se=st,!$&&st){for(var Ot=st;Ot&&!Ot.responds("mousedrag");)Ot=Ot._parent;Ot&&(te=st)}K=Ce}else qt.up&&(!$&&st===O&&(J=Date.now(),be(this,st,de?"doubleclick":"click",ve,Ce,K),de=!1),O=te=null);Z=!1,It=!0}W=Ce,It&&dt&&(q=dt._handleMouseEvent(ge,ve,Ce,qt)||q),ve.cancelable!==!1&&(q&&!qt.move||qt.down&&Dt("mouseup"))&&ve.preventDefault()},_handleKeyEvent:function(ge,ve,Ce,Be){var Me=this._scope,We=Me.tool,dt;function wt(Dt){Dt.responds(ge)&&(Jt=Me,Dt.emit(ge,dt=dt||new ns(ge,ve,Ce,Be)))}this.isVisible()&&(wt(this),We&&We.responds(ge)&&wt(We))},_countItemEvent:function(ge,ve){var Ce=this._itemEvents,Be=Ce.native,Me=Ce.virtual;for(var We in Se)Be[We]=(Be[We]||0)+(Se[We][ge]||0)*ve;Me[ge]=(Me[ge]||0)+ve},statics:{updateFocus:w,_resetState:function(){f=_=q=Z=!1,a=h=K=W=O=j=te=se=J=de=null}}}}),Hn=Pt.extend({_class:"CanvasView",initialize:function(h,f){if(!(f instanceof i.HTMLCanvasElement)){var _=Q.read(arguments,1);if(_.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+r.slice(arguments,1));f=yt.getCanvas(_)}var b=this._context=f.getContext("2d");if(b.save(),this._pixelRatio=1,!/^off|false$/.test(d.getAttribute(f,"hidpi"))){var w=i.devicePixelRatio||1,I=ai.getPrefixed(b,"backingStorePixelRatio")||1;this._pixelRatio=w/I}Pt.call(this,h,f),this._needsUpdate=!0},remove:function a(){return this._context.restore(),a.base.call(this)},_setElementSize:function a(h,f){var _=this._pixelRatio;if(a.base.call(this,h*_,f*_),_!==1){var b=this._element,w=this._context;if(!d.hasAttribute(b,"resize")){var I=b.style;I.width=h+"px",I.height=f+"px"}w.restore(),w.save(),w.scale(_,_)}},getContext:function(){return this._context},getPixelSize:function a(h){var f=Jt.agent,_;if(f&&f.firefox)_=a.base.call(this,h);else{var b=this._context,w=b.font;b.font=h+" serif",_=parseFloat(b.font),b.font=w}return _},getTextWidth:function(a,h){var f=this._context,_=f.font,b=0;f.font=a;for(var w=0,I=h.length;w<I;w++)b=Math.max(b,f.measureText(h[w]).width);return f.font=_,b},update:function(){if(!this._needsUpdate)return!1;var a=this._project,h=this._context,f=this._viewSize;return h.clearRect(0,0,f.width+1,f.height+1),a&&a.draw(h,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Zs=r.extend({_class:"Event",initialize:function(h){this.event=h,this.type=h&&h.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return on.modifiers}}),ns=Zs.extend({_class:"KeyEvent",initialize:function(h,f,_,b){this.type=h,this.event=f,this.key=_,this.character=b},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),on=new function(){var a={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},h={tab:"	",space:" ",enter:"\r"},f={},_={},b,w,I=new r({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var B=Jt&&Jt.agent;return B&&B.mac?this.meta:this.control}}});function D(B){var H=B.key||B.keyIdentifier;return H=/^U\+/.test(H)?String.fromCharCode(parseInt(H.substr(2),16)):/^Arrow[A-Z]/.test(H)?H.substr(5):H==="Unidentified"||H===t?String.fromCharCode(B.keyCode):H,a[H]||(H.length>1?r.hyphenate(H):H.toLowerCase())}function k(B,H,U,F){var q=Pt._focused,$;if(f[H]=B,B?_[H]=U:delete _[H],H.length>1&&($=r.camelize(H))in I){I[$]=B;var X=Jt&&Jt.agent;if($==="meta"&&X&&X.mac)if(B)b={};else{for(var Z in b)Z in _&&k(!1,Z,b[Z],F);b=null}}else B&&b&&(b[H]=U);q&&q._handleKeyEvent(B?"keydown":"keyup",F,H,U)}return Ei.add(s,{keydown:function(B){var H=D(B),U=Jt&&Jt.agent;H.length>1||U&&U.chrome&&(B.altKey||U.mac&&B.metaKey||!U.mac&&B.ctrlKey)?k(!0,H,h[H]||(H.length>1?"":H),B):w=H},keypress:function(B){if(w){var H=D(B),U=B.charCode,F=U>=32?String.fromCharCode(U):H.length>1?"":H;H!==w&&(H=F.toLowerCase()),k(!0,H,F,B),w=null}},keyup:function(B){var H=D(B);H in _&&k(!1,H,_[H],B)}}),Ei.add(i,{blur:function(B){for(var H in _)k(!1,H,_[H],B)}}),{modifiers:I,isDown:function(B){return!!f[B]}}},P=Zs.extend({_class:"MouseEvent",initialize:function(h,f,_,b,w){this.type=h,this.event=f,this.point=_,this.target=b,this.delta=w},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),fe=Zs.extend({_class:"ToolEvent",_item:null,initialize:function(h,f,_){this.tool=h,this.type=f,this.event=_},_choosePoint:function(a,h){return a||(h?h.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(a){this._point=a},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(a){this._lastPoint=a},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(a){this._downPoint=a},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(a){this._middlePoint=a},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(a){this._delta=a},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(a){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=a},getItem:function(){if(!this._item){var a=this.tool._scope.project.hitTest(this.getPoint());if(a){for(var h=a.item,f=h._parent;/^(Group|CompoundPath)$/.test(f._class);)h=f,f=f._parent;this._item=h}}return this._item},setItem:function(a){this._item=a},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ye=g.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(h){g.call(this),this._moveCount=-1,this._downCount=-1,this.set(h)},getMinDistance:function(){return this._minDistance},setMinDistance:function(a){this._minDistance=a,a!=null&&this._maxDistance!=null&&a>this._maxDistance&&(this._maxDistance=a)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(a){this._maxDistance=a,this._minDistance!=null&&a!=null&&a<this._minDistance&&(this._minDistance=a)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(a){this._minDistance=this._maxDistance=a},_handleMouseEvent:function(a,h,f,_){Jt=this._scope,_.drag&&!this.responds(a)&&(a="mousemove");var b=_.move||_.drag,w=this.responds(a),I=!1,D=this;function k(H,U){var F=f,q=b?D._point:D._downPoint||F;if(b){if(D._moveCount>=0&&F.equals(q))return!1;if(q&&(H!=null||U!=null)){var $=F.subtract(q),X=$.getLength();if(X<(H||0))return!1;U&&(F=q.add($.normalize(Math.min(X,U))))}D._moveCount++}return D._point=F,D._lastPoint=q||F,_.down&&(D._moveCount=-1,D._downPoint=F,D._downCount++),!0}function B(){w&&(I=D.emit(a,new fe(D,a,h))||I)}if(_.down)k(),B();else if(_.up)k(null,this._maxDistance),B();else if(w)for(;k(this._minDistance,this._maxDistance);)B();return I}}),we=r.extend(o,{_class:"Tween",statics:{easings:new r({linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return a<.5?2*a*a:-1+2*(2-a)*a},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return a<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return a<.5?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return a<.5?16*a*a*a*a*a:1+16*--a*a*a*a*a}})},initialize:function a(h,f,_,b,w,I){this.object=h;var D=typeof w,k=D==="function";this.type=k?D:D==="string"?w:"linear",this.easing=k?w:a.easings[this.type],this.duration=b,this.running=!1,this._then=null,this._startTime=null;var B=f||_;this._keys=B?Object.keys(B):[],this._parsedKeys=this._parseKeys(this._keys),this._from=B&&this._getState(f),this._to=B&&this._getState(_),I!==!1&&this.start()},then:function(a){return this._then=a,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(a){if(this.running){a>=1&&(a=1,this.running=!1);for(var h=this.easing(a),f=this._keys,_=function(H){return typeof H=="function"?H(h,a):H},b=0,w=f&&f.length;b<w;b++){var I=f[b],D=_(this._from[I]),k=_(this._to[I]),B=D&&k&&D.__add&&k.__add?k.__subtract(D).__multiply(h).__add(D):(k-D)*h+D;this._setProperty(this._parsedKeys[I],B)}this.responds("update")&&this.emit("update",new r({progress:a,factor:h})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(a){var h=this._startTime,f=h?(a-h)/this.duration:0;h||(this._startTime=a),this.update(f)},_getState:function(a){for(var h=this._keys,f={},_=0,b=h.length;_<b;_++){var w=h[_],I=this._parsedKeys[w],D=this._getProperty(I),k;if(a){var B=this._resolveValue(D,a[w]);this._setProperty(I,B),k=this._getProperty(I),k=k&&k.clone?k.clone():k,this._setProperty(I,D)}else k=D&&D.clone?D.clone():D;f[w]=k}return f},_resolveValue:function(a,h){if(h){if(Array.isArray(h)&&h.length===2){var f=h[0];return f&&f.match&&f.match(/^[+\-\*\/]=/)?this._calculate(a,f[0],h[1]):h}else if(typeof h=="string"){var _=h.match(/^[+\-*/]=(.*)/);if(_){var b=JSON.parse(_[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(a,h[0],b)}}}return h},_calculate:function(a,h,f){return Jt.PaperScript.calculateBinary(a,h,f)},_parseKeys:function(a){for(var h={},f=0,_=a.length;f<_;f++){var b=a[f],w=b.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");h[b]=w.split("/")}return h},_getProperty:function(a,h){for(var f=this.object,_=0,b=a.length-(h||0);_<b&&f;_++)f=f[a[_]];return f},_setProperty:function(a,h){var f=this._getProperty(a,1);f&&(f[a[a.length-1]]=h)}}),De={request:function(a){var h=new e.XMLHttpRequest;return h.open((a.method||"get").toUpperCase(),a.url,r.pick(a.async,!0)),a.mimeType&&h.overrideMimeType(a.mimeType),h.onload=function(){var f=h.status;f===0||f===200?a.onLoad&&a.onLoad.call(h,h.responseText):h.onerror()},h.onerror=function(){var f=h.status,_='Could not load "'+a.url+'" (Status: '+f+")";if(a.onError)a.onError(_,f);else throw new Error(_)},h.send(null)}},yt=r.exports.CanvasProvider={canvases:[],getCanvas:function(a,h,f){if(!i)return null;var _,b=!0;typeof a=="object"&&(h=a.height,a=a.width),this.canvases.length?_=this.canvases.pop():(_=s.createElement("canvas"),b=!1);var w=_.getContext("2d",f||{});if(!w)throw new Error("Canvas "+_+" is unable to provide a 2D context.");return _.width===a&&_.height===h?b&&w.clearRect(0,0,a+1,h+1):(_.width=a,_.height=h),w.save(),_},getContext:function(a,h,f){var _=this.getCanvas(a,h,f);return _?_.getContext("2d",f||{}):null},release:function(a){var h=a&&a.canvas?a.canvas:a;h&&h.getContext&&(h.getContext("2d").restore(),this.canvases.push(h))}},tt=new function(){var a=Math.min,h=Math.max,f=Math.abs,_,b,w,I,D,k,B,H,U,F,q;function $(te,se,J){return .2989*te+.587*se+.114*J}function X(te,se,J,be){var me=be-$(te,se,J);U=te+me,F=se+me,q=J+me;var be=$(U,F,q),Se=a(U,F,q),ge=h(U,F,q);if(Se<0){var ve=be-Se;U=be+(U-be)*be/ve,F=be+(F-be)*be/ve,q=be+(q-be)*be/ve}if(ge>255){var Ce=255-be,Be=ge-be;U=be+(U-be)*Ce/Be,F=be+(F-be)*Ce/Be,q=be+(q-be)*Ce/Be}}function Z(te,se,J){return h(te,se,J)-a(te,se,J)}function K(te,se,J,de){var me=[te,se,J],be=h(te,se,J),Se=a(te,se,J),ge;Se=Se===te?0:Se===se?1:2,be=be===te?0:be===se?1:2,ge=a(Se,be)===0?h(Se,be)===1?2:1:0,me[be]>me[Se]?(me[ge]=(me[ge]-me[Se])*de/(me[be]-me[Se]),me[be]=de):me[ge]=me[be]=0,me[Se]=0,U=me[0],F=me[1],q=me[2]}var W={multiply:function(){U=D*_/255,F=k*b/255,q=B*w/255},screen:function(){U=D+_-D*_/255,F=k+b-k*b/255,q=B+w-B*w/255},overlay:function(){U=D<128?2*D*_/255:255-2*(255-D)*(255-_)/255,F=k<128?2*k*b/255:255-2*(255-k)*(255-b)/255,q=B<128?2*B*w/255:255-2*(255-B)*(255-w)/255},"soft-light":function(){var te=_*D/255;U=te+D*(255-(255-D)*(255-_)/255-te)/255,te=b*k/255,F=te+k*(255-(255-k)*(255-b)/255-te)/255,te=w*B/255,q=te+B*(255-(255-B)*(255-w)/255-te)/255},"hard-light":function(){U=_<128?2*_*D/255:255-2*(255-_)*(255-D)/255,F=b<128?2*b*k/255:255-2*(255-b)*(255-k)/255,q=w<128?2*w*B/255:255-2*(255-w)*(255-B)/255},"color-dodge":function(){U=D===0?0:_===255?255:a(255,255*D/(255-_)),F=k===0?0:b===255?255:a(255,255*k/(255-b)),q=B===0?0:w===255?255:a(255,255*B/(255-w))},"color-burn":function(){U=D===255?255:_===0?0:h(0,255-(255-D)*255/_),F=k===255?255:b===0?0:h(0,255-(255-k)*255/b),q=B===255?255:w===0?0:h(0,255-(255-B)*255/w)},darken:function(){U=D<_?D:_,F=k<b?k:b,q=B<w?B:w},lighten:function(){U=D>_?D:_,F=k>b?k:b,q=B>w?B:w},difference:function(){U=D-_,U<0&&(U=-U),F=k-b,F<0&&(F=-F),q=B-w,q<0&&(q=-q)},exclusion:function(){U=D+_*(255-D-D)/255,F=k+b*(255-k-k)/255,q=B+w*(255-B-B)/255},hue:function(){K(_,b,w,Z(D,k,B)),X(U,F,q,$(D,k,B))},saturation:function(){K(D,k,B,Z(_,b,w)),X(U,F,q,$(D,k,B))},luminosity:function(){X(D,k,B,$(_,b,w))},color:function(){X(_,b,w,$(D,k,B))},add:function(){U=a(D+_,255),F=a(k+b,255),q=a(B+w,255)},subtract:function(){U=h(D-_,0),F=h(k-b,0),q=h(B-w,0)},average:function(){U=(D+_)/2,F=(k+b)/2,q=(B+w)/2},negation:function(){U=255-f(255-_-D),F=255-f(255-b-k),q=255-f(255-w-B)}},O=this.nativeModes=r.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(te){this[te]=!0},{}),j=yt.getContext(1,1,{willReadFrequently:!0});j&&(r.each(W,function(te,se){var J=se==="darken",de=!1;j.save();try{j.fillStyle=J?"#300":"#a00",j.fillRect(0,0,1,1),j.globalCompositeOperation=se,j.globalCompositeOperation===se&&(j.fillStyle=J?"#a00":"#300",j.fillRect(0,0,1,1),de=j.getImageData(0,0,1,1).data[0]!==J?170:51)}catch{}j.restore(),O[se]=de}),yt.release(j)),this.process=function(te,se,J,de,me){var be=se.canvas,Se=te==="normal";if(Se||O[te])J.save(),J.setTransform(1,0,0,1,0,0),J.globalAlpha=de,Se||(J.globalCompositeOperation=te),J.drawImage(be,me.x,me.y),J.restore();else{var ge=W[te];if(!ge)return;for(var ve=J.getImageData(me.x,me.y,be.width,be.height),Ce=ve.data,Be=se.getImageData(0,0,be.width,be.height).data,Me=0,We=Ce.length;Me<We;Me+=4){_=Be[Me],D=Ce[Me],b=Be[Me+1],k=Ce[Me+1],w=Be[Me+2],B=Ce[Me+2],I=Be[Me+3],H=Ce[Me+3],ge();var dt=I*de/255,wt=1-dt;Ce[Me]=dt*U+wt*D,Ce[Me+1]=dt*F+wt*k,Ce[Me+2]=dt*q+wt*B,Ce[Me+3]=I*de+wt*H}J.putImageData(ve,me.x,me.y)}}},lt=new function(){var a="http://www.w3.org/2000/svg",h="http://www.w3.org/2000/xmlns",f="http://www.w3.org/1999/xlink",_={href:f,xlink:h,xmlns:h+"/","xmlns:xlink":h+"/"};function b(D,k,B){return I(s.createElementNS(a,D),k,B)}function w(D,k){var B=_[k],H=B?D.getAttributeNS(B,k):D.getAttribute(k);return H==="null"?null:H}function I(D,k,B){for(var H in k){var U=k[H],F=_[H];typeof U=="number"&&B&&(U=B.number(U)),F?D.setAttributeNS(F,H,U):D.setAttribute(H,U)}return D}return{svg:a,xmlns:h,xlink:f,create:b,get:w,set:I}},Kn=r.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(a,h){return!h&&(a instanceof At||a instanceof Ee||a instanceof Ht)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(a,h){var f=r.capitalize(h),_=a[2];this[h]={type:a[1],property:h,attribute:a[0],toSVG:_,fromSVG:_&&r.each(_,function(b,w){this[b]=w},{}),exportFilter:a[3],get:"get"+f,set:"set"+f}},{});new function(){var a;function h(W,O,j){var te=new r,se=W.getTranslation();if(O){var J;W.isInvertible()?(W=W._shiftless(),J=W._inverseTransform(se),se=null):J=new x,te[j?"cx":"x"]=J.x,te[j?"cy":"y"]=J.y}if(!W.isIdentity()){var de=W.decompose();if(de){var me=[],be=de.rotation,Se=de.scaling,ge=de.skewing;se&&!se.isZero()&&me.push("translate("+a.point(se)+")"),be&&me.push("rotate("+a.number(be)+")"),(!T.isZero(Se.x-1)||!T.isZero(Se.y-1))&&me.push("scale("+a.point(Se)+")"),ge.x&&me.push("skewX("+a.number(ge.x)+")"),ge.y&&me.push("skewY("+a.number(ge.y)+")"),te.transform=me.join(" ")}else te.transform="matrix("+W.getValues().join(",")+")"}return te}function f(W,O){for(var j=h(W._matrix),te=W._children,se=lt.create("g",j,a),J=0,de=te.length;J<de;J++){var me=te[J],be=Z(me,O);if(be)if(me.isClipMask()){var Se=lt.create("clipPath");Se.appendChild(be),$(me,Se,"clip"),lt.set(se,{"clip-path":"url(#"+Se.id+")"})}else se.appendChild(be)}return se}function _(W,O){var j=h(W._matrix,!0),te=W.getSize(),se=W.getImage();return j.x-=te.width/2,j.y-=te.height/2,j.width=te.width,j.height=te.height,j.href=O.embedImages==!1&&se&&se.src||W.toDataURL(),lt.create("image",j,a)}function b(W,O){var j=O.matchShapes;if(j){var te=W.toShape(!1);if(te)return w(te)}var se=W._segments,J=se.length,de,me=h(W._matrix);if(j&&J>=2&&!W.hasHandles())if(J>2){de=W._closed?"polygon":"polyline";for(var be=[],Se=0;Se<J;Se++)be.push(a.point(se[Se]._point));me.points=be.join(" ")}else{de="line";var ge=se[0]._point,ve=se[1]._point;me.set({x1:ge.x,y1:ge.y,x2:ve.x,y2:ve.y})}else de="path",me.d=W.getPathData(null,O.precision);return lt.create(de,me,a)}function w(W){var O=W._type,j=W._radius,te=h(W._matrix,!0,O!=="rectangle");if(O==="rectangle"){O="rect";var se=W._size,J=se.width,de=se.height;te.x-=J/2,te.y-=de/2,te.width=J,te.height=de,j.isZero()&&(j=null)}return j&&(O==="circle"?te.r=j:(te.rx=j.width,te.ry=j.height)),lt.create(O,te,a)}function I(W,O){var j=h(W._matrix),te=W.getPathData(null,O.precision);return te&&(j.d=te),lt.create("path",j,a)}function D(W,O){var j=h(W._matrix,!0),te=W._definition,se=q(te,"symbol"),J=te._item,de=J.getStrokeBounds();return se||(se=lt.create("symbol",{viewBox:a.rectangle(de)}),se.appendChild(Z(J,O)),$(te,se,"symbol")),j.href="#"+se.id,j.x+=de.x,j.y+=de.y,j.width=de.width,j.height=de.height,j.overflow="visible",lt.create("use",j,a)}function k(W){var O=q(W,"color");if(!O){var j=W.getGradient(),te=j._radial,se=W.getOrigin(),J=W.getDestination(),de;if(te){de={cx:se.x,cy:se.y,r:se.getDistance(J)};var me=W.getHighlight();me&&(de.fx=me.x,de.fy=me.y)}else de={x1:se.x,y1:se.y,x2:J.x,y2:J.y};de.gradientUnits="userSpaceOnUse",O=lt.create((te?"radial":"linear")+"Gradient",de,a);for(var be=j._stops,Se=0,ge=be.length;Se<ge;Se++){var ve=be[Se],Ce=ve._color,Be=Ce.getAlpha(),Me=ve._offset;de={offset:Me??Se/(ge-1)},Ce&&(de["stop-color"]=Ce.toCSS(!0)),Be<1&&(de["stop-opacity"]=Be),O.appendChild(lt.create("stop",de,a))}$(W,O,"color")}return"url(#"+O.id+")"}function B(W){var O=lt.create("text",h(W._matrix,!0),a);return O.textContent=W._content,O}var H={Group:f,Layer:f,Raster:_,Path:b,Shape:w,CompoundPath:I,SymbolItem:D,PointText:B};function U(W,O,j,te){var se={},J=!te&&W.getParent(),de=[];return W._name!=null&&(se.id=W._name),r.each(Kn,function(me){var be=me.get,Se=me.type,ge=W[be]();if(me.exportFilter?me.exportFilter(W,ge):j.reduceAttributes==!1||!J||!r.equals(J[be](),ge)){if(Se==="color"&&ge!=null){var ve=ge.getAlpha();ve<1&&(se[me.attribute+"-opacity"]=ve)}Se==="style"?de.push(me.attribute+": "+ge):se[me.attribute]=ge==null?"none":Se==="color"?ge.gradient?k(ge):ge.toCSS(!0):Se==="array"?ge.join(","):Se==="lookup"?me.toSVG[ge]:ge}}),de.length&&(se.style=de.join(";")),se.opacity===1&&delete se.opacity,W._visible||(se.visibility="hidden"),lt.set(O,se,a)}var F;function q(W,O){return F||(F={ids:{},svgs:{}}),W&&F.svgs[O+"-"+(W._id||W.__id||(W.__id=L.get("svg")))]}function $(W,O,j){F||q();var te=F.ids[j]=(F.ids[j]||0)+1;O.id=j+"-"+te,F.svgs[j+"-"+(W._id||W.__id)]=O}function X(W,O){var j=W,te=null;if(F){j=W.nodeName.toLowerCase()==="svg"&&W;for(var se in F.svgs)te||(j||(j=lt.create("svg"),j.appendChild(W)),te=j.insertBefore(lt.create("defs"),j.firstChild)),te.appendChild(F.svgs[se]);F=null}return O.asString?new e.XMLSerializer().serializeToString(j):j}function Z(W,O,j){var te=H[W._class],se=te&&te(W,O);if(se){var J=O.onExport;J&&(se=J(W,se,O)||se);var de=JSON.stringify(W._data);de&&de!=="{}"&&de!=="null"&&se.setAttribute("data-paper-data",de)}return se&&U(W,se,O,j)}function K(W){return W||(W={}),a=new S(W.precision),W}N.inject({exportSVG:function(W){return W=K(W),X(Z(this,W,!0),W)}}),pe.inject({exportSVG:function(W){W=K(W);var O=this._children,j=this.getView(),te=r.pick(W.bounds,"view"),se=W.matrix||te==="view"&&j._matrix,J=se&&ne.read([se]),de=te==="view"?new G([0,0],j.getViewSize()):te==="content"?N._getBounds(O,J,{stroke:!0}).rect:G.read([te],0,{readNull:!0}),me={version:"1.1",xmlns:lt.svg,"xmlns:xlink":lt.xlink};de&&(me.width=de.width,me.height=de.height,(de.x||de.x===0||de.y||de.y===0)&&(me.viewBox=a.rectangle(de)));var be=lt.create("svg",me,a),Se=be;J&&!J.isIdentity()&&(Se=be.appendChild(lt.create("g",h(J),a)));for(var ge=0,ve=O.length;ge<ve;ge++)Se.appendChild(Z(O[ge],W,!0));return X(be,W)}})},new function(){var a={},h;function f(O,j,te,se,J,de){var me=lt.get(O,j)||de,be=me==null?se?null:te?"":0:te?me:parseFloat(me);return/%\s*$/.test(me)?be/100*(J?1:h[/x|^width/.test(j)?"width":"height"]):be}function _(O,j,te,se,J,de,me){return j=f(O,j||"x",!1,se,J,de),te=f(O,te||"y",!1,se,J,me),se&&(j==null||te==null)?null:new x(j,te)}function b(O,j,te,se,J){return j=f(O,j||"width",!1,se,J),te=f(O,te||"height",!1,se,J),se&&(j==null||te==null)?null:new Q(j,te)}function w(O,j,te){return O==="none"?null:j==="number"?parseFloat(O):j==="array"?O?O.split(/[\s,]+/g).map(parseFloat):[]:j==="color"?Z(O)||O:j==="lookup"?te[O]:O}function I(O,j,te,se){var J=O.childNodes,de=j==="clippath",me=j==="defs",be=new Ie,Se=be._project,ge=Se._currentStyle,ve=[];if(!de&&!me&&(be=X(be,O,se),Se._currentStyle=be._style.clone()),se)for(var Ce=O.querySelectorAll("defs"),Be=0,Me=Ce.length;Be<Me;Be++)K(Ce[Be],te,!1);for(var Be=0,Me=J.length;Be<Me;Be++){var We=J[Be],dt;We.nodeType===1&&!/^defs$/i.test(We.nodeName)&&(dt=K(We,te,!1))&&!(dt instanceof _t)&&ve.push(dt)}return be.addChildren(ve),de&&(be=X(be.reduce(),O,se)),Se._currentStyle=ge,(de||me)&&(be.remove(),be=null),be}function D(O,j){for(var te=O.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),se=[],J=0,de=te.length;J<de;J+=2)se.push(new x(parseFloat(te[J]),parseFloat(te[J+1])));var me=new Re(se);return j==="polygon"&&me.closePath(),me}function k(O){return At.create(O.getAttribute("d"))}function B(O,j){var te=(f(O,"href",!0)||"").substring(1),se=j==="radialgradient",J;if(te)J=a[te].getGradient(),J._radial^se&&(J=J.clone(),J._radial=se);else{for(var de=O.childNodes,me=[],be=0,Se=de.length;be<Se;be++){var ge=de[be];ge.nodeType===1&&me.push(X(new Ji,ge))}J=new zs(me,se)}var ve,Ce,Be,Me=f(O,"gradientUnits",!0)!=="userSpaceOnUse";se?(ve=_(O,"cx","cy",!1,Me,"50%","50%"),Ce=ve.add(f(O,"r",!1,!1,Me,"50%"),0),Be=_(O,"fx","fy",!0,Me)):(ve=_(O,"x1","y1",!1,Me,"0%","0%"),Ce=_(O,"x2","y2",!1,Me,"100%","0%"));var We=X(new hi(J,ve,Ce,Be),O);return We._scaleToBounds=Me,null}var H={"#document":function(O,j,te,se){for(var J=O.childNodes,de=0,me=J.length;de<me;de++){var be=J[de];if(be.nodeType===1)return K(be,te,se)}},g:I,svg:I,clippath:I,polygon:D,polyline:D,path:k,lineargradient:B,radialgradient:B,image:function(O){var j=new Je(f(O,"href",!0));return j.on("load",function(){var te=b(O);this.setSize(te);var se=_(O).add(te.divide(2));this._matrix.append(new ne().translate(se))}),j},symbol:function(O,j,te,se){return new _t(I(O,j,te,se),!0)},defs:I,use:function(O){var j=(f(O,"href",!0)||"").substring(1),te=a[j],se=_(O);return te?te instanceof _t?te.place(se):te.clone().translate(se):null},circle:function(O){return new Ee.Circle(_(O,"cx","cy"),f(O,"r"))},ellipse:function(O){return new Ee.Ellipse({center:_(O,"cx","cy"),radius:b(O,"rx","ry")})},rect:function(O){return new Ee.Rectangle(new G(_(O),b(O)),b(O,"rx","ry"))},line:function(O){return new Re.Line(_(O,"x1","y1"),_(O,"x2","y2"))},text:function(O){var j=new cs(_(O).add(_(O,"dx","dy")));return j.setContent(O.textContent.trim()||""),j},switch:I};function U(O,j,te,se){if(O.transform){for(var J=(se.getAttribute(te)||"").split(/\)\s*/g),de=new ne,me=0,be=J.length;me<be;me++){var Se=J[me];if(!Se)break;for(var ge=Se.split(/\(\s*/),ve=ge[0].trim(),Ce=ge[1].split(/[\s,]+/g),Be=0,Me=Ce.length;Be<Me;Be++)Ce[Be]=parseFloat(Ce[Be]);switch(ve){case"matrix":de.append(new ne(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]));break;case"rotate":de.rotate(Ce[0],Ce[1]||0,Ce[2]||0);break;case"translate":de.translate(Ce[0],Ce[1]||0);break;case"scale":de.scale(Ce);break;case"skewX":de.skew(Ce[0],0);break;case"skewY":de.skew(0,Ce[0]);break}}O.transform(de)}}function F(O,j,te){var se=te==="fill-opacity"?"getFillColor":"getStrokeColor",J=O[se]&&O[se]();J&&J.setAlpha(parseFloat(j))}var q=r.set(r.each(Kn,function(O){this[O.attribute]=function(j,te){if(j[O.set]&&(j[O.set](w(te,O.type,O.fromSVG)),O.type==="color")){var se=j[O.get]();if(se&&se._scaleToBounds){var J=j.getBounds();se.transform(new ne().translate(J.getPoint()).scale(J.getSize()))}}}},{}),{id:function(O,j){a[j]=O,O.setName&&O.setName(j)},"clip-path":function(O,j){var te=Z(j);if(te)if(te=te.clone(),te.setClipMask(!0),O instanceof Ie)O.insertChild(0,te);else return new Ie(te,O)},gradientTransform:U,transform:U,"fill-opacity":F,"stroke-opacity":F,visibility:function(O,j){O.setVisible&&O.setVisible(j==="visible")},display:function(O,j){O.setVisible&&O.setVisible(j!==null)},"stop-color":function(O,j){O.setColor&&O.setColor(j)},"stop-opacity":function(O,j){O._color&&O._color.setAlpha(parseFloat(j))},offset:function(O,j){if(O.setOffset){var te=j.match(/(.*)%$/);O.setOffset(te?te[1]/100:parseFloat(j))}},viewBox:function(O,j,te,se,J){var de=new G(w(j,"array")),me=b(se,null,null,!0),be,Se;if(O instanceof Ie){var ge=me?me.divide(de.getSize()):1,Se=new ne().scale(ge).translate(de.getPoint().negate());be=O}else O instanceof _t&&(me&&de.setSize(me),be=O._item);if(be){if($(se,"overflow",J)!=="visible"){var ve=new Ee.Rectangle(de);ve.setClipMask(!0),be.addChild(ve)}Se&&be.transform(Se)}}});function $(O,j,te){var se=O.attributes[j],J=se&&se.value;if(!J&&O.style){var de=r.camelize(j);J=O.style[de],!J&&te.node[de]!==te.parent[de]&&(J=te.node[de])}return J?J==="none"?null:J:t}function X(O,j,te){var se=j.parentNode,J={node:ai.getStyles(j)||{},parent:!te&&!/^defs$/i.test(se.tagName)&&ai.getStyles(se)||{}};return r.each(q,function(de,me){var be=$(j,me,J);O=be!==t&&de(O,be,me,j,J)||O}),O}function Z(O){var j=O&&O.match(/\((?:["'#]*)([^"')]+)/),te=j&&j[1],se=te&&a[i?te.replace(i.location.href.split("#")[0]+"#",""):te];return se&&se._scaleToBounds&&(se=se.clone(),se._scaleToBounds=!0),se}function K(O,j,te){var se=O.nodeName.toLowerCase(),J=se!=="#document",de=s.body,me,be,Se;te&&J&&(h=Jt.getView().getSize(),h=b(O,null,null,!0)||h,me=lt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),be=O.parentNode,Se=O.nextSibling,me.appendChild(O),de.appendChild(me));var ge=Jt.settings,ve=ge.applyMatrix,Ce=ge.insertItems;ge.applyMatrix=!1,ge.insertItems=!1;var Be=H[se],Me=Be&&Be(O,se,j,te)||null;if(ge.insertItems=Ce,ge.applyMatrix=ve,Me){J&&!(Me instanceof Ie)&&(Me=X(Me,O,te));var We=j.onImport,dt=J&&O.getAttribute("data-paper-data");We&&(Me=We(O,Me,j)||Me),j.expandShapes&&Me instanceof Ee&&(Me.remove(),Me=Me.toPath()),dt&&(Me._data=JSON.parse(dt))}return me&&(de.removeChild(me),be&&(Se?be.insertBefore(O,Se):be.appendChild(O))),te&&(a={},Me&&r.pick(j.applyMatrix,ve)&&Me.matrix.apply(!0,!0)),Me}function W(O,j,te){if(!O)return null;j=typeof j=="function"?{onLoad:j}:j||{};var se=Jt,J=null;function de(ge){try{var ve=typeof ge=="object"?ge:new e.DOMParser().parseFromString(ge.trim(),"image/svg+xml");if(!ve.nodeName)throw ve=null,new Error("Unsupported SVG source: "+O);Jt=se,J=K(ve,j,!0),(!j||j.insert!==!1)&&te._insertItem(t,J);var Ce=j.onLoad;Ce&&Ce(J,ge)}catch(Be){me(Be)}}function me(ge,ve){var Ce=j.onError;if(Ce)Ce(ge,ve);else throw new Error(ge)}if(typeof O=="string"&&!/^[\s\S]*</.test(O)){var be=s.getElementById(O);be?de(be):De.request({url:O,async:!0,onLoad:de,onError:me})}else if(typeof File<"u"&&O instanceof File){var Se=new FileReader;return Se.onload=function(){de(Se.result)},Se.onerror=function(){me(Se.error)},Se.readAsText(O)}else de(O);return J}N.inject({importSVG:function(O,j){return W(O,j,this)}}),pe.inject({importSVG:function(O,j){return this.activate(),W(O,j,this)}})},r.exports.PaperScript=(function(){var a=this,h=a.acorn;if(!h&&typeof tk<"u")try{h=ik()}catch{}if(!h){var f,_;h=f=_={},function(X,Z){if(typeof f=="object"&&typeof _=="object")return Z(f);if(typeof t=="function"&&t.amd)return t(["exports"],Z);Z(X.acorn||(X.acorn={}))}(this,function(X){X.version="0.5.0";var Z,K,W,O;X.parse=function(le,Ae){return K=String(le),W=K.length,te(Ae),On(),_h(Z.program)};var j=X.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function te(le){Z=le||{};for(var Ae in j)Object.prototype.hasOwnProperty.call(Z,Ae)||(Z[Ae]=j[Ae]);O=Z.sourceFile||null}var se=X.getLineInfo=function(le,Ae){for(var qe=1,Xe=0;;){Mn.lastIndex=Xe;var Bt=Mn.exec(le);if(Bt&&Bt.index<Ae)++qe,Xe=Bt.index+Bt[0].length;else break}return{line:qe,column:Ae-Xe}};X.tokenize=function(le,Ae){K=String(le),W=K.length,te(Ae),On();var qe={};function Xe(Bt){return dt=me,Wa(Bt),qe.start=de,qe.end=me,qe.startLoc=be,qe.endLoc=Se,qe.type=ge,qe.value=ve,qe}return Xe.jumpTo=function(Bt,ri){if(J=Bt,Z.locations){Be=1,Me=Mn.lastIndex=0;for(var vi;(vi=Mn.exec(K))&&vi.index<Bt;)++Be,Me=vi.index+vi[0].length}Ce=ri,Ya()},Xe};var J,de,me,be,Se,ge,ve,Ce,Be,Me,We,dt,wt,Dt,Mt,et;function st(le,Ae){var qe=se(K,le);Ae+=" ("+qe.line+":"+qe.column+")";var Xe=new SyntaxError(Ae);throw Xe.pos=le,Xe.loc=qe,Xe.raisedAt=J,Xe}var It=[],qt={type:"num"},Ot={type:"regexp"},Qt={type:"string"},$t={type:"name"},si={type:"eof"},gi={keyword:"break"},oi={keyword:"case",beforeExpr:!0},Hs={keyword:"catch"},xs={keyword:"continue"},Gs={keyword:"debugger"},xt={keyword:"default"},Ui={keyword:"do",isLoop:!0},rs={keyword:"else",beforeExpr:!0},Nn={keyword:"finally"},Js={keyword:"for",isLoop:!0},Bn={keyword:"function"},yr={keyword:"if"},Un={keyword:"return",beforeExpr:!0},bn={keyword:"switch"},Dn={keyword:"throw",beforeExpr:!0},ln={keyword:"try"},Cs={keyword:"var"},Ps={keyword:"while",isLoop:!0},Ua={keyword:"with"},Va={keyword:"new",beforeExpr:!0},ko={keyword:"this"},io={keyword:"null",atomValue:null},nl={keyword:"true",atomValue:!0},Lo={keyword:"false",atomValue:!1},_r={keyword:"in",binop:7,beforeExpr:!0},wa={break:gi,case:oi,catch:Hs,continue:xs,debugger:Gs,default:xt,do:Ui,else:rs,finally:Nn,for:Js,function:Bn,if:yr,return:Un,switch:bn,throw:Dn,try:ln,var:Cs,while:Ps,with:Ua,null:io,true:nl,false:Lo,new:Va,in:_r,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:ko,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Ar={type:"[",beforeExpr:!0},Kr={type:"]"},br={type:"{",beforeExpr:!0},di={type:"}"},ar={type:"(",beforeExpr:!0},hn={type:")"},Zn={type:",",beforeExpr:!0},Rn={type:";",beforeExpr:!0},la={type:":",beforeExpr:!0},so={type:"."},no={type:"?",beforeExpr:!0},c={binop:10,beforeExpr:!0},C={isAssign:!0,beforeExpr:!0},u={isAssign:!0,beforeExpr:!0},m={postfix:!0,prefix:!0,isUpdate:!0},v={prefix:!0,beforeExpr:!0},E={binop:1,beforeExpr:!0},R={binop:2,beforeExpr:!0},Y={binop:3,beforeExpr:!0},ee={binop:4,beforeExpr:!0},_e={binop:5,beforeExpr:!0},xe={binop:6,beforeExpr:!0},ze={binop:7,beforeExpr:!0},Fe={binop:8,beforeExpr:!0},bt={binop:9,prefix:!0,beforeExpr:!0},vt={binop:10,beforeExpr:!0};X.tokTypes={bracketL:Ar,bracketR:Kr,braceL:br,braceR:di,parenL:ar,parenR:hn,comma:Zn,semi:Rn,colon:la,dot:so,question:no,slash:c,eq:C,name:$t,eof:si,num:qt,regexp:Ot,string:Qt};for(var kt in wa)X.tokTypes["_"+kt]=wa[kt];function ui(le){le=le.split(" ");var Ae="",qe=[];e:for(var Xe=0;Xe<le.length;++Xe){for(var Bt=0;Bt<qe.length;++Bt)if(qe[Bt][0].length==le[Xe].length){qe[Bt].push(le[Xe]);continue e}qe.push([le[Xe]])}function ri(ki){if(ki.length==1)return Ae+="return str === "+JSON.stringify(ki[0])+";";Ae+="switch(str){";for(var Vr=0;Vr<ki.length;++Vr)Ae+="case "+JSON.stringify(ki[Vr])+":";Ae+="return true}return false;"}if(qe.length>3){qe.sort(function(ki,Vr){return Vr.length-ki.length}),Ae+="switch(str.length){";for(var Xe=0;Xe<qe.length;++Xe){var vi=qe[Xe];Ae+="case "+vi[0].length+":",ri(vi)}Ae+="}"}else ri(le);return new Function("str",Ae)}var ni=ui("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Di=ui("class enum extends super const export import"),Jn=ui("implements interface let package private protected public static yield"),un=ui("eval arguments"),Rs=ui("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ut=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ks="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ti="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Ms=new RegExp("["+Ks+"]"),cn=new RegExp("["+Ks+Ti+"]"),Sa=/[\n\r\u2028\u2029]/,Mn=/\r\n|[\n\r\u2028\u2029]/g,xr=X.isIdentifierStart=function(le){return le<65?le===36:le<91?!0:le<97?le===95:le<123?!0:le>=170&&Ms.test(String.fromCharCode(le))},Ur=X.isIdentifierChar=function(le){return le<48?le===36:le<58?!0:le<65?!1:le<91?!0:le<97?le===95:le<123?!0:le>=170&&cn.test(String.fromCharCode(le))};function Yn(){this.line=Be,this.column=J-Me}function On(){Be=1,J=Me=0,Ce=!0,Ya()}function xi(le,Ae){me=J,Z.locations&&(Se=new Yn),ge=le,Ya(),ve=Ae,Ce=le.beforeExpr}function Pu(){var le=Z.onComment&&Z.locations&&new Yn,Ae=J,qe=K.indexOf("*/",J+=2);if(qe===-1&&st(J-2,"Unterminated comment"),J=qe+2,Z.locations){Mn.lastIndex=Ae;for(var Xe;(Xe=Mn.exec(K))&&Xe.index<J;)++Be,Me=Xe.index+Xe[0].length}Z.onComment&&Z.onComment(!0,K.slice(Ae+2,qe),Ae,J,le,Z.locations&&new Yn)}function $s(){for(var le=J,Ae=Z.onComment&&Z.locations&&new Yn,qe=K.charCodeAt(J+=2);J<W&&qe!==10&&qe!==13&&qe!==8232&&qe!==8233;)++J,qe=K.charCodeAt(J);Z.onComment&&Z.onComment(!1,K.slice(le+2,J),le,J,Ae,Z.locations&&new Yn)}function Ya(){for(;J<W;){var le=K.charCodeAt(J);if(le===32)++J;else if(le===13){++J;var Ae=K.charCodeAt(J);Ae===10&&++J,Z.locations&&(++Be,Me=J)}else if(le===10||le===8232||le===8233)++J,Z.locations&&(++Be,Me=J);else if(le>8&&le<14)++J;else if(le===47){var Ae=K.charCodeAt(J+1);if(Ae===42)Pu();else if(Ae===47)$s();else break}else if(le===160)++J;else if(le>=5760&&Ut.test(String.fromCharCode(le)))++J;else break}}function Ca(){var le=K.charCodeAt(J+1);return le>=48&&le<=57?Wr(!0):(++J,xi(so))}function Yr(){var le=K.charCodeAt(J+1);return Ce?(++J,yh()):le===61?vn(u,2):vn(c,1)}function hs(){var le=K.charCodeAt(J+1);return le===61?vn(u,2):vn(vt,1)}function Pa(le){var Ae=K.charCodeAt(J+1);return Ae===le?vn(le===124?E:R,2):Ae===61?vn(u,2):vn(le===124?Y:_e,1)}function Is(){var le=K.charCodeAt(J+1);return le===61?vn(u,2):vn(ee,1)}function ha(le){var Ae=K.charCodeAt(J+1);return Ae===le?Ae==45&&K.charCodeAt(J+2)==62&&Sa.test(K.slice(dt,J))?(J+=3,$s(),Ya(),Wa()):vn(m,2):Ae===61?vn(u,2):vn(bt,1)}function No(le){var Ae=K.charCodeAt(J+1),qe=1;return Ae===le?(qe=le===62&&K.charCodeAt(J+2)===62?3:2,K.charCodeAt(J+qe)===61?vn(u,qe+1):vn(Fe,qe)):Ae==33&&le==60&&K.charCodeAt(J+2)==45&&K.charCodeAt(J+3)==45?(J+=4,$s(),Ya(),Wa()):(Ae===61&&(qe=K.charCodeAt(J+2)===61?3:2),vn(ze,qe))}function Eu(le){var Ae=K.charCodeAt(J+1);return Ae===61?vn(xe,K.charCodeAt(J+2)===61?3:2):vn(le===61?C:v,1)}function ro(le){switch(le){case 46:return Ca();case 40:return++J,xi(ar);case 41:return++J,xi(hn);case 59:return++J,xi(Rn);case 44:return++J,xi(Zn);case 91:return++J,xi(Ar);case 93:return++J,xi(Kr);case 123:return++J,xi(br);case 125:return++J,xi(di);case 58:return++J,xi(la);case 63:return++J,xi(no);case 48:var Ae=K.charCodeAt(J+1);if(Ae===120||Ae===88)return rl();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Wr(!1);case 34:case 39:return Du(le);case 47:return Yr();case 37:case 42:return hs();case 124:case 38:return Pa(le);case 94:return Is();case 43:case 45:return ha(le);case 60:case 62:return No(le);case 61:case 33:return Eu(le);case 126:return vn(v,1)}return!1}function Wa(le){if(le?J=de+1:de=J,Z.locations&&(be=new Yn),le)return yh();if(J>=W)return xi(si);var Ae=K.charCodeAt(J);if(xr(Ae)||Ae===92)return oo();var qe=ro(Ae);if(qe===!1){var Xe=String.fromCharCode(Ae);if(Xe==="\\"||Ms.test(Xe))return oo();st(J,"Unexpected character '"+Xe+"'")}return qe}function vn(le,Ae){var qe=K.slice(J,J+Ae);J+=Ae,xi(le,qe)}function yh(){for(var Bt="",le,Ae,qe=J;;){J>=W&&st(qe,"Unterminated regular expression");var Xe=K.charAt(J);if(Sa.test(Xe)&&st(qe,"Unterminated regular expression"),le)le=!1;else{if(Xe==="[")Ae=!0;else if(Xe==="]"&&Ae)Ae=!1;else if(Xe==="/"&&!Ae)break;le=Xe==="\\"}++J}var Bt=K.slice(qe,J);++J;var ri=al();ri&&!/^[gmsiy]*$/.test(ri)&&st(qe,"Invalid regexp flag");try{var vi=new RegExp(Bt,ri)}catch(ki){ki instanceof SyntaxError&&st(qe,ki.message),st(ki)}return xi(Ot,vi)}function ao(le,Ae){for(var qe=J,Xe=0,Bt=0,ri=Ae??1/0;Bt<ri;++Bt){var vi=K.charCodeAt(J),ki;if(vi>=97?ki=vi-97+10:vi>=65?ki=vi-65+10:vi>=48&&vi<=57?ki=vi-48:ki=1/0,ki>=le)break;++J,Xe=Xe*le+ki}return J===qe||Ae!=null&&J-qe!==Ae?null:Xe}function rl(){J+=2;var le=ao(16);return le==null&&st(de+2,"Expected hexadecimal number"),xr(K.charCodeAt(J))&&st(J,"Identifier directly after number"),xi(qt,le)}function Wr(le){var Ae=J,qe=!1,Xe=K.charCodeAt(J)===48;!le&&ao(10)===null&&st(Ae,"Invalid number"),K.charCodeAt(J)===46&&(++J,ao(10),qe=!0);var Bt=K.charCodeAt(J);(Bt===69||Bt===101)&&(Bt=K.charCodeAt(++J),(Bt===43||Bt===45)&&++J,ao(10)===null&&st(Ae,"Invalid number"),qe=!0),xr(K.charCodeAt(J))&&st(J,"Identifier directly after number");var ri=K.slice(Ae,J),vi;return qe?vi=parseFloat(ri):!Xe||ri.length===1?vi=parseInt(ri,10):/[89]/.test(ri)||et?st(Ae,"Invalid number"):vi=parseInt(ri,8),xi(qt,vi)}function Du(le){J++;for(var Ae="";;){J>=W&&st(de,"Unterminated string constant");var qe=K.charCodeAt(J);if(qe===le)return++J,xi(Qt,Ae);if(qe===92){qe=K.charCodeAt(++J);var Xe=/^[0-7]+/.exec(K.slice(J,J+3));for(Xe&&(Xe=Xe[0]);Xe&&parseInt(Xe,8)>255;)Xe=Xe.slice(0,-1);if(Xe==="0"&&(Xe=null),++J,Xe)et&&st(J-2,"Octal literal in strict mode"),Ae+=String.fromCharCode(parseInt(Xe,8)),J+=Xe.length-1;else switch(qe){case 110:Ae+=`
`;break;case 114:Ae+="\r";break;case 120:Ae+=String.fromCharCode(Bo(2));break;case 117:Ae+=String.fromCharCode(Bo(4));break;case 85:Ae+=String.fromCharCode(Bo(8));break;case 116:Ae+="	";break;case 98:Ae+="\b";break;case 118:Ae+="\v";break;case 102:Ae+="\f";break;case 48:Ae+="\0";break;case 13:K.charCodeAt(J)===10&&++J;case 10:Z.locations&&(Me=J,++Be);break;default:Ae+=String.fromCharCode(qe);break}}else(qe===13||qe===10||qe===8232||qe===8233)&&st(de,"Unterminated string constant"),Ae+=String.fromCharCode(qe),++J}}function Bo(le){var Ae=ao(16,le);return Ae===null&&st(de,"Bad character escape sequence"),Ae}var Ir;function al(){Ir=!1;for(var le,Ae=!0,qe=J;;){var Xe=K.charCodeAt(J);if(Ur(Xe))Ir&&(le+=K.charAt(J)),++J;else if(Xe===92){Ir||(le=K.slice(qe,J)),Ir=!0,K.charCodeAt(++J)!=117&&st(J,"Expecting Unicode escape sequence \\uXXXX"),++J;var Bt=Bo(4),ri=String.fromCharCode(Bt);ri||st(J-1,"Invalid Unicode escape"),(Ae?xr(Bt):Ur(Bt))||st(J-4,"Invalid Unicode escape"),le+=ri}else break;Ae=!1}return Ir?le:K.slice(qe,J)}function oo(){var le=al(),Ae=$t;return!Ir&&Rs(le)&&(Ae=wa[le]),xi(Ae,le)}function Gi(){We=de,dt=me,wt=Se,Wa()}function kr(le){if(et=le,J=de,Z.locations)for(;J<Me;)Me=K.lastIndexOf(`
`,Me-2)+1,--Be;Ya(),Wa()}function vr(){this.type=null,this.start=de,this.end=null}function Ro(){this.start=be,this.end=null,O!==null&&(this.source=O)}function Ci(){var le=new vr;return Z.locations&&(le.loc=new Ro),Z.directSourceFile&&(le.sourceFile=Z.directSourceFile),Z.ranges&&(le.range=[de,0]),le}function Lr(le){var Ae=new vr;return Ae.start=le.start,Z.locations&&(Ae.loc=new Ro,Ae.loc.start=le.loc.start),Z.ranges&&(Ae.range=[le.range[0],0]),Ae}function Yt(le,Ae){return le.type=Ae,le.end=dt,Z.locations&&(le.loc.end=wt),Z.ranges&&(le.range[1]=dt),le}function $n(le){return Z.ecmaVersion>=5&&le.type==="ExpressionStatement"&&le.expression.type==="Literal"&&le.expression.value==="use strict"}function ms(le){if(ge===le)return Gi(),!0}function lo(){return!Z.strictSemicolons&&(ge===si||ge===di||Sa.test(K.slice(dt,de)))}function Ea(){!ms(Rn)&&!lo()&&Wn()}function nn(le){ge===le?Gi():Wn()}function Wn(){st(de,"Unexpected token")}function ho(le){le.type!=="Identifier"&&le.type!=="MemberExpression"&&st(le.start,"Assigning to rvalue"),et&&le.type==="Identifier"&&un(le.name)&&st(le.start,"Assigning to "+le.name+" in strict mode")}function _h(le){We=dt=J,Z.locations&&(wt=new Yn),Dt=et=null,Mt=[],Wa();var Ae=le||Ci(),qe=!0;for(le||(Ae.body=[]);ge!==si;){var Xe=or();Ae.body.push(Xe),qe&&$n(Xe)&&kr(!0),qe=!1}return Yt(Ae,"Program")}var uo={kind:"loop"},Da={kind:"switch"};function or(){(ge===c||ge===u&&ve=="/=")&&Wa(!0);var le=ge,Ae=Ci();switch(le){case gi:case xs:Gi();var qe=le===gi;ms(Rn)||lo()?Ae.label=null:ge!==$t?Wn():(Ae.label=He(),Ea());for(var Xe=0;Xe<Mt.length;++Xe){var Bt=Mt[Xe];if((Ae.label==null||Bt.name===Ae.label.name)&&(Bt.kind!=null&&(qe||Bt.kind==="loop")||Ae.label&&qe))break}return Xe===Mt.length&&st(Ae.start,"Unsyntactic "+le.keyword),Yt(Ae,qe?"BreakStatement":"ContinueStatement");case Gs:return Gi(),Ea(),Yt(Ae,"DebuggerStatement");case Ui:return Gi(),Mt.push(uo),Ae.body=or(),Mt.pop(),nn(Ps),Ae.test=Mo(),Ea(),Yt(Ae,"DoWhileStatement");case Js:if(Gi(),Mt.push(uo),nn(ar),ge===Rn)return co(Ae,null);if(ge===Cs){var ri=Ci();return Gi(),Oo(ri,!0),Yt(ri,"VariableDeclaration"),ri.declarations.length===1&&ms(_r)?Nr(Ae,ri):co(Ae,ri)}var ri=ue(!1,!0);return ms(_r)?(ho(ri),Nr(Ae,ri)):co(Ae,ri);case Bn:return Gi(),Te(Ae,!0);case yr:return Gi(),Ae.test=Mo(),Ae.consequent=or(),Ae.alternate=ms(rs)?or():null,Yt(Ae,"IfStatement");case Un:return!Dt&&!Z.allowReturnOutsideFunction&&st(de,"'return' outside of function"),Gi(),ms(Rn)||lo()?Ae.argument=null:(Ae.argument=ue(),Ea()),Yt(Ae,"ReturnStatement");case bn:Gi(),Ae.discriminant=Mo(),Ae.cases=[],nn(br),Mt.push(Da);for(var vi,ki;ge!=di;)if(ge===oi||ge===xt){var Vr=ge===oi;vi&&Yt(vi,"SwitchCase"),Ae.cases.push(vi=Ci()),vi.consequent=[],Gi(),Vr?vi.test=ue():(ki&&st(We,"Multiple default clauses"),ki=!0,vi.test=null),nn(la)}else vi||Wn(),vi.consequent.push(or());return vi&&Yt(vi,"SwitchCase"),Gi(),Mt.pop(),Yt(Ae,"SwitchStatement");case Dn:return Gi(),Sa.test(K.slice(dt,de))&&st(dt,"Illegal newline after throw"),Ae.argument=ue(),Ea(),Yt(Ae,"ThrowStatement");case ln:if(Gi(),Ae.block=Gr(),Ae.handler=null,ge===Hs){var qo=Ci();Gi(),nn(ar),qo.param=He(),et&&un(qo.param.name)&&st(qo.param.start,"Binding "+qo.param.name+" in strict mode"),nn(hn),qo.guard=null,qo.body=Gr(),Ae.handler=Yt(qo,"CatchClause")}return Ae.guardedHandlers=It,Ae.finalizer=ms(Nn)?Gr():null,!Ae.handler&&!Ae.finalizer&&st(Ae.start,"Missing catch or finally clause"),Yt(Ae,"TryStatement");case Cs:return Gi(),Oo(Ae),Ea(),Yt(Ae,"VariableDeclaration");case Ps:return Gi(),Ae.test=Mo(),Mt.push(uo),Ae.body=or(),Mt.pop(),Yt(Ae,"WhileStatement");case Ua:return et&&st(de,"'with' in strict mode"),Gi(),Ae.object=Mo(),Ae.body=or(),Yt(Ae,"WithStatement");case br:return Gr();case Rn:return Gi(),Yt(Ae,"EmptyStatement");default:var fo=ve,Fo=ue();if(le===$t&&Fo.type==="Identifier"&&ms(la)){for(var Xe=0;Xe<Mt.length;++Xe)Mt[Xe].name===fo&&st(Fo.start,"Label '"+fo+"' is already declared");var Ah=ge.isLoop?"loop":ge===bn?"switch":null;return Mt.push({name:fo,kind:Ah}),Ae.body=or(),Mt.pop(),Ae.label=Fo,Yt(Ae,"LabeledStatement")}else return Ae.expression=Fo,Ea(),Yt(Ae,"ExpressionStatement")}}function Mo(){nn(ar);var le=ue();return nn(hn),le}function Gr(le){var Ae=Ci(),qe=!0,Xe=!1,Bt;for(Ae.body=[],nn(br);!ms(di);){var ri=or();Ae.body.push(ri),qe&&le&&$n(ri)&&(Bt=Xe,kr(Xe=!0)),qe=!1}return Xe&&!Bt&&kr(!1),Yt(Ae,"BlockStatement")}function co(le,Ae){return le.init=Ae,nn(Rn),le.test=ge===Rn?null:ue(),nn(Rn),le.update=ge===hn?null:ue(),nn(hn),le.body=or(),Mt.pop(),Yt(le,"ForStatement")}function Nr(le,Ae){return le.left=Ae,le.right=ue(),nn(hn),le.body=or(),Mt.pop(),Yt(le,"ForInStatement")}function Oo(le,Ae){for(le.declarations=[],le.kind="var";;){var qe=Ci();if(qe.id=He(),et&&un(qe.id.name)&&st(qe.id.start,"Binding "+qe.id.name+" in strict mode"),qe.init=ms(C)?ue(!0,Ae):null,le.declarations.push(Yt(qe,"VariableDeclarator")),!ms(Zn))break}return le}function ue(le,Ae){var qe=Pe(Ae);if(!le&&ge===Zn){var Xe=Lr(qe);for(Xe.expressions=[qe];ms(Zn);)Xe.expressions.push(Pe(Ae));return Yt(Xe,"SequenceExpression")}return qe}function Pe(le){var Ae=Oe(le);if(ge.isAssign){var qe=Lr(Ae);return qe.operator=ve,qe.left=Ae,Gi(),qe.right=Pe(le),ho(Ae),Yt(qe,"AssignmentExpression")}return Ae}function Oe(le){var Ae=Ze(le);if(ms(no)){var qe=Lr(Ae);return qe.test=Ae,qe.consequent=ue(!0),nn(la),qe.alternate=ue(!0,le),Yt(qe,"ConditionalExpression")}return Ae}function Ze(le){return Ue(ht(),-1,le)}function Ue(le,Ae,qe){var Xe=ge.binop;if(Xe!=null&&(!qe||ge!==_r)&&Xe>Ae){var Bt=Lr(le);Bt.left=le,Bt.operator=ve;var ri=ge;Gi(),Bt.right=Ue(ht(),Xe,qe);var vi=Yt(Bt,ri===E||ri===R?"LogicalExpression":"BinaryExpression");return Ue(vi,Ae,qe)}return le}function ht(){if(ge.prefix){var le=Ci(),Ae=ge.isUpdate;return le.operator=ve,le.prefix=!0,Ce=!0,Gi(),le.argument=ht(),Ae?ho(le.argument):et&&le.operator==="delete"&&le.argument.type==="Identifier"&&st(le.start,"Deleting local variable in strict mode"),Yt(le,Ae?"UpdateExpression":"UnaryExpression")}for(var qe=gt();ge.postfix&&!lo();){var le=Lr(qe);le.operator=ve,le.prefix=!1,le.argument=qe,ho(qe),Gi(),qe=Yt(le,"UpdateExpression")}return qe}function gt(){return Lt(Gt())}function Lt(le,Ae){if(ms(so)){var qe=Lr(le);return qe.object=le,qe.property=He(!0),qe.computed=!1,Lt(Yt(qe,"MemberExpression"),Ae)}else if(ms(Ar)){var qe=Lr(le);return qe.object=le,qe.property=ue(),qe.computed=!0,nn(Kr),Lt(Yt(qe,"MemberExpression"),Ae)}else if(!Ae&&ms(ar)){var qe=Lr(le);return qe.callee=le,qe.arguments=Ye(hn,!1),Lt(Yt(qe,"CallExpression"),Ae)}else return le}function Gt(){switch(ge){case ko:var Xe=Ci();return Gi(),Yt(Xe,"ThisExpression");case $t:return He();case qt:case Qt:case Ot:var Xe=Ci();return Xe.value=ve,Xe.raw=K.slice(de,me),Gi(),Yt(Xe,"Literal");case io:case nl:case Lo:var Xe=Ci();return Xe.value=ge.atomValue,Xe.raw=ge.keyword,Gi(),Yt(Xe,"Literal");case ar:var le=be,Ae=de;Gi();var qe=ue();return qe.start=Ae,qe.end=me,Z.locations&&(qe.loc.start=le,qe.loc.end=Se),Z.ranges&&(qe.range=[Ae,me]),nn(hn),qe;case Ar:var Xe=Ci();return Gi(),Xe.elements=Ye(Kr,!0,!0),Yt(Xe,"ArrayExpression");case br:return li();case Bn:var Xe=Ci();return Gi(),Te(Xe,!1);case Va:return wi();default:Wn()}}function wi(){var le=Ci();return Gi(),le.callee=Lt(Gt(),!0),ms(ar)?le.arguments=Ye(hn,!1):le.arguments=It,Yt(le,"NewExpression")}function li(){var le=Ci(),Ae=!0,qe=!1;for(le.properties=[],Gi();!ms(di);){if(Ae)Ae=!1;else if(nn(Zn),Z.allowTrailingCommas&&ms(di))break;var Xe={key:ei()},Bt=!1,ri;if(ms(la)?(Xe.value=ue(!0),ri=Xe.kind="init"):Z.ecmaVersion>=5&&Xe.key.type==="Identifier"&&(Xe.key.name==="get"||Xe.key.name==="set")?(Bt=qe=!0,ri=Xe.kind=Xe.key.name,Xe.key=ei(),ge!==ar&&Wn(),Xe.value=Te(Ci(),!1)):Wn(),Xe.key.type==="Identifier"&&(et||qe))for(var vi=0;vi<le.properties.length;++vi){var ki=le.properties[vi];if(ki.key.name===Xe.key.name){var Vr=ri==ki.kind||Bt&&ki.kind==="init"||ri==="init"&&(ki.kind==="get"||ki.kind==="set");Vr&&!et&&ri==="init"&&ki.kind==="init"&&(Vr=!1),Vr&&st(Xe.key.start,"Redefinition of property")}}le.properties.push(Xe)}return Yt(le,"ObjectExpression")}function ei(){return ge===qt||ge===Qt?Gt():He(!0)}function Te(le,Ae){ge===$t?le.id=He():Ae?Wn():le.id=null,le.params=[];var qe=!0;for(nn(ar);!ms(hn);)qe?qe=!1:nn(Zn),le.params.push(He());var Xe=Dt,Bt=Mt;if(Dt=!0,Mt=[],le.body=Gr(!0),Dt=Xe,Mt=Bt,et||le.body.body.length&&$n(le.body.body[0]))for(var ri=le.id?-1:0;ri<le.params.length;++ri){var vi=ri<0?le.id:le.params[ri];if((Jn(vi.name)||un(vi.name))&&st(vi.start,"Defining '"+vi.name+"' in strict mode"),ri>=0)for(var ki=0;ki<ri;++ki)vi.name===le.params[ki].name&&st(vi.start,"Argument name clash in strict mode")}return Yt(le,Ae?"FunctionDeclaration":"FunctionExpression")}function Ye(le,Ae,qe){for(var Xe=[],Bt=!0;!ms(le);){if(Bt)Bt=!1;else if(nn(Zn),Ae&&Z.allowTrailingCommas&&ms(le))break;qe&&ge===Zn?Xe.push(null):Xe.push(ue(!0))}return Xe}function He(le){var Ae=Ci();return le&&Z.forbidReserved=="everywhere"&&(le=!1),ge===$t?(!le&&(Z.forbidReserved&&(Z.ecmaVersion===3?ni:Di)(ve)||et&&Jn(ve))&&K.slice(de,me).indexOf("\\")==-1&&st(de,"The keyword '"+ve+"' is reserved"),Ae.name=ve):le&&ge.keyword?Ae.name=ge.keyword:Wn(),Ce=!1,Gi(),Yt(Ae,"Identifier")}}),h.version||(h=null)}function b(X,Z){return(a.acorn||h).parse(X,Z)}var w={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},I={"-":"__negate","+":"__self"},D=r.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(X){this["__"+X]="#"+X},{__self:function(){return this}});x.inject(D),Q.inject(D),hi.inject(D);function k(X,Z,K){var W=w[Z];if(X&&X[W]){var O=X[W](K);return Z==="!="?!O:O}switch(Z){case"+":return X+K;case"-":return X-K;case"*":return X*K;case"/":return X/K;case"%":return X%K;case"==":return X==K;case"!=":return X!=K}}function B(X,Z){var K=I[X];if(Z&&Z[K])return Z[K]();switch(X){case"+":return+Z;case"-":return-Z}}function H(X,Z){if(!X)return"";Z=Z||{};var K=[];function W(et){for(var st=0,It=K.length;st<It;st++){var qt=K[st];if(qt[0]>=et)break;et+=qt[1]}return et}function O(et){return X.substring(W(et.range[0]),W(et.range[1]))}function j(et,st){return X.substring(W(et.range[1]),W(st.range[0]))}function te(et,st){for(var It=W(et.range[0]),qt=W(et.range[1]),Ot=0,Qt=K.length-1;Qt>=0;Qt--)if(It>K[Qt][0]){Ot=Qt+1;break}K.splice(Ot,0,[It,st.length-qt+It]),X=X.substring(0,It)+st+X.substring(qt)}function se(et,st){switch(et.type){case"UnaryExpression":if(et.operator in I&&et.argument.type!=="Literal"){var It=O(et.argument);te(et,'$__("'+et.operator+'", '+It+")")}break;case"BinaryExpression":if(et.operator in w&&et.left.type!=="Literal"){var qt=O(et.left),Ot=O(et.right),Qt=j(et.left,et.right),$t=et.operator;te(et,"__$__("+qt+","+Qt.replace(new RegExp("\\"+$t),'"'+$t+'"')+", "+Ot+")")}break;case"UpdateExpression":case"AssignmentExpression":var si=st&&st.type;if(!(si==="ForStatement"||si==="BinaryExpression"&&/^[=!<>]/.test(st.operator)||si==="MemberExpression"&&st.computed)){if(et.type==="UpdateExpression"){var It=O(et.argument),gi="__$__("+It+', "'+et.operator[0]+'", 1)',oi=It+" = "+gi;et.prefix?oi="("+oi+")":(si==="AssignmentExpression"||si==="VariableDeclarator"||si==="BinaryExpression")&&(O(st.left||st.id)===It&&(oi=gi),oi=It+"; "+oi),te(et,oi)}else if(/^.=$/.test(et.operator)&&et.left.type!=="Literal"){var qt=O(et.left),Ot=O(et.right),gi=qt+" = __$__("+qt+', "'+et.operator[0]+'", '+Ot+")";te(et,/^\(.*\)$/.test(O(et))?"("+gi+")":gi)}}break}}function J(et){switch(et.type){case"ExportDefaultDeclaration":te({range:[et.start,et.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var st=et.declaration,It=et.specifiers;if(st){var qt=st.declarations;qt&&(qt.forEach(function(Qt){te(Qt,"module.exports."+O(Qt))}),te({range:[et.start,st.start+st.kind.length]},""))}else if(It){var Ot=It.map(function(Qt){var $t=O(Qt);return"module.exports."+$t+" = "+$t+"; "}).join("");Ot&&te(et,Ot)}break}}function de(et,st,It){if(et){for(var qt in et)if(qt!=="range"&&qt!=="loc"){var Ot=et[qt];if(Array.isArray(Ot))for(var Qt=0,$t=Ot.length;Qt<$t;Qt++)de(Ot[Qt],et,It);else Ot&&typeof Ot=="object"&&de(Ot,et,It)}It.operatorOverloading!==!1&&se(et,st),It.moduleExports!==!1&&J(et)}}function me(et){var st="",It="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(et=(Math.abs(et)<<1)+(et<0?1:0);et||!st;){var qt=et&31;et>>=5,et&&(qt|=32),st+=It[qt]}return st}var be=Z.url||"",Se=Z.sourceMaps,ge=Z.paperFeatures||{},ve=Z.source||X,Ce=Z.offset||0,Be=Jt.agent,Me=Be.versionNumber,We=!1,dt=/\r\n|\n|\r/mg,wt;if(Se&&(Be.chrome&&Me>=30||Be.webkit&&Me>=537.76||Be.firefox&&Me>=23||Be.node)){if(Be.node)Ce-=2;else if(i&&be&&!i.location.href.indexOf(be)){var Dt=s.getElementsByTagName("html")[0].innerHTML;Ce=Dt.substr(0,Dt.indexOf(X)+1).match(dt).length+1}We=Ce>0&&!(Be.chrome&&Me>=36||Be.safari&&Me>=600||Be.firefox&&Me>=40||Be.node);var Mt=["AA"+me(We?0:Ce)+"A"];Mt.length=(X.match(dt)||[]).length+1+(We?Ce:0),wt={version:3,file:be,names:[],mappings:Mt.join(";AACA"),sourceRoot:"",sources:[be],sourcesContent:[ve]}}return(ge.operatorOverloading!==!1||ge.moduleExports!==!1)&&de(b(X,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,ge),wt&&(We&&(X=new Array(Ce+1).join(`
`)+X),/^(inline|both)$/.test(Se)&&(X+=`
//# sourceMappingURL=data:application/json;base64,`+e.btoa(unescape(encodeURIComponent(JSON.stringify(wt))))),X+=`
//# sourceURL=`+(be||"paperscript")),{url:be,source:ve,code:X,map:wt}}function U(X,Z,K){Jt=Z;var W=Z.getView(),O=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(X)&&!/\bnew\s+Tool\b/.test(X)?new ye:null,j=O?O._events:[],te=["onFrame","onResize"].concat(j),se=[],J=[],de,me=typeof X=="object"?X:H(X,K);X=me.code;function be(Me,We){for(var dt in Me)(We||!/^_/.test(dt))&&new RegExp("([\\b\\s\\W]|^)"+dt.replace(/\$/g,"\\$")+"\\b").test(X)&&(se.push(dt),J.push(Me[dt]))}be({__$__:k,$__:B,paper:Z,tool:O},!0),be(Z),X="var module = { exports: {} }; "+X;var Ce=r.each(te,function(Me){new RegExp("\\s+"+Me+"\\b").test(X)&&(se.push(Me),this.push("module.exports."+Me+" = "+Me+";"))},[]).join(`
`);Ce&&(X+=`
`+Ce),X+=`
return module.exports;`;var Se=Jt.agent;if(s&&(Se.chrome||Se.firefox&&Se.versionNumber<40)){var ge=s.createElement("script"),ve=s.head||s.getElementsByTagName("head")[0];Se.firefox&&(X=`
`+X),ge.appendChild(s.createTextNode("document.__paperscript__ = function("+se+") {"+X+`
}`)),ve.appendChild(ge),de=s.__paperscript__,delete s.__paperscript__,ve.removeChild(ge)}else de=Function(se,X);var Ce=de&&de.apply(Z,J),Be=Ce||{};return r.each(j,function(Me){var We=Be[Me];We&&(O[Me]=We)}),W&&(Be.onResize&&W.setOnResize(Be.onResize),W.emit("resize",{size:W.size,delta:new x}),Be.onFrame&&W.setOnFrame(Be.onFrame),W.requestUpdate()),Ce}function F(X){if(/^text\/(?:x-|)paperscript$/.test(X.type)&&d.getAttribute(X,"ignore")!=="true"){var Z=d.getAttribute(X,"canvas"),K=s.getElementById(Z),W=X.src||X.getAttribute("data-src"),O=d.hasAttribute(X,"async"),j="data-paper-scope";if(!K)throw new Error('Unable to find canvas with id "'+Z+'"');var te=d.get(K.getAttribute(j))||new d().setup(K);return K.setAttribute(j,te._id),W?De.request({url:W,async:O,mimeType:"text/plain",onLoad:function(se){U(se,te,W)}}):U(X.innerHTML,te,X.baseURI),X.setAttribute("data-paper-ignore","true"),te}}function q(){r.each(s&&s.getElementsByTagName("script"),F)}function $(X){return X?F(X):q()}return i&&(s.readyState==="complete"?setTimeout(q):Ei.add(i,{load:q})),{compile:H,execute:U,load:$,parse:b,calculateBinary:k,calculateUnary:B}}).call(this);var Jt=new(d.inject(r.exports,{Base:r,Numerical:T,Key:on,DomEvent:Ei,DomElement:ai,document:s,window:i,Symbol:_t,PlacedSymbol:Ge}));return Jt.agent.node&&mm(Jt),typeof t=="function"&&t.amd?t("paper",Jt):n&&(n.exports=Jt),Jt}).call(pr,typeof self=="object"?self:null)})(d1);var sk=d1.exports;const jA=Mc(sk);class Ul{constructor(e,t,i,s,r){this.point=t,this.normal=i,this.distance=e,this.wind=s,this.t=qs(r,0,1)}}class Pr{constructor(e,t,i){this.point=e,this.aT=qs(t,0,1),this.bT=qs(i,0,1)}getSwapped(){return new Pr(this.point,this.bT,this.aT)}}class qn{constructor(e,t,i,s,r,o,d,g,y,S){this.initialize(e,t,i,s,r,o,d,g,y,S)}initialize(e,t,i,s,r,o,d,g,y,S){return this.a=e,this.b=t,this.atMin=i,this.atMax=s,this.btMin=r,this.btMax=o,this.aMin=d,this.aMax=g,this.bMin=y,this.bMax=S,this}pushSubdivisions(e){const t=this,i=(t.atMax+t.atMin)/2,s=(t.btMax+t.btMin)/2;if(i===this.atMin||i===this.atMax||s===this.btMin||s===this.btMax){e.push(this);return}const r=t.a.positionAt(i),o=t.b.positionAt(s);qn.boxIntersects(t.aMin,r,t.bMin,o)&&e.push(qn.pool.create(t.a,t.b,t.atMin,i,t.btMin,s,t.aMin,r,t.bMin,o)),qn.boxIntersects(r,t.aMax,t.bMin,o)&&e.push(qn.pool.create(t.a,t.b,i,t.atMax,t.btMin,s,r,t.aMax,t.bMin,o)),qn.boxIntersects(t.aMin,r,o,t.bMax)&&e.push(qn.pool.create(t.a,t.b,t.atMin,i,s,t.btMax,t.aMin,r,o,t.bMax)),qn.boxIntersects(r,t.aMax,o,t.bMax)&&e.push(qn.pool.create(t.a,t.b,i,t.atMax,s,t.btMax,r,t.aMax,o,t.bMax)),this.freeToPool()}distance(e){const t=this.atMin-e.atMin,i=this.atMax-e.atMax,s=this.btMin-e.btMin,r=this.btMax-e.btMax;return t*t+i*i+s*s+r*r}clean(){this.a=null,this.b=null,this.aMin=null,this.aMax=null,this.bMin=null,this.bMax=null}static intersect(e,t){if(!e.bounds.intersectsBounds(t.bounds))return[];const i=qn.getIntersectionRanges(e,t),s=[];for(let o=0;o<i.length;o++){const d=i[o];let g=!1;e:for(let y=0;y<s.length;y++){const S=s[y];for(let T=0;T<S.length;T++){const L=S[T];if(d.distance(L)<1e-13){S.push(d),g=!0;break e}}}g||s.push([d])}const r=[];for(let o=0;o<s.length;o++){const d=s[o];let g=0,y=0;for(let L=0;L<d.length;L++)g+=d[L].atMin+d[L].atMax,y+=d[L].btMin+d[L].btMax;g/=2*d.length,y/=2*d.length;const S=e.positionAt(g),T=t.positionAt(y);r.push(new Pr(S.average(T),g,y))}for(let o=0;o<i.length;o++)i[o].freeToPool();return qn.cleanPool(),r}static getIntersectionRanges(e,t){const i=e.getInteriorExtremaTs(),s=t.getInteriorExtremaTs(),r=he.zip([0].concat(i),i.concat([1])),o=he.zip([0].concat(s),s.concat([1]));let d=[];for(let g=0;g<r.length;g++)for(let y=0;y<o.length;y++){const S=r[g][0],T=r[g][1],L=o[y][0],x=o[y][1],A=e.positionAt(S),Q=e.positionAt(T),z=t.positionAt(L),G=t.positionAt(x);qn.boxIntersects(A,Q,z,G)&&d.push(qn.pool.create(e,t,S,T,L,x,A,Q,z,G))}for(let g=0;g<50;g++){const y=[];for(let S=d.length-1;S>=0;S--)d[S].pushSubdivisions(y);d=y}return d}static boxIntersects(e,t,i,s){const r=Math.max(Math.min(e.x,t.x),Math.min(i.x,s.x)),o=Math.max(Math.min(e.y,t.y),Math.min(i.y,s.y)),d=Math.min(Math.max(e.x,t.x),Math.max(i.x,s.x)),g=Math.min(Math.max(e.y,t.y),Math.max(i.y,s.y));return d-r>=0&&g-o>=0}static cleanPool(){qn.pool.forEach(e=>e.clean())}freeToPool(){qn.pool.freeToPool(this)}}qn.pool=new Fs(qn);const ip=new g0("kite");class Au{constructor(e,t){this.a=e,this.b=t;let i=0,s=1,r=this.apply(i),o=this.apply(s);r>1&&(r=1,i=this.applyInverse(r)),r<0&&(r=0,i=this.applyInverse(r)),o>1&&(o=1,s=this.applyInverse(o)),o<0&&(o=0,s=this.applyInverse(o)),this.t0=i,this.t1=s,e>0?(this.qt0=r,this.qt1=o):(this.qt0=o,this.qt1=r),this.t0<0&&this.t0>-1e-8&&(this.t0=0),this.t0>1&&this.t0<1+1e-8&&(this.t0=1),this.t1<0&&this.t1>-1e-8&&(this.t1=0),this.t1>1&&this.t1<1+1e-8&&(this.t1=1),this.qt0<0&&this.qt0>-1e-8&&(this.qt0=0),this.qt0>1&&this.qt0<1+1e-8&&(this.qt0=1),this.qt1<0&&this.qt1>-1e-8&&(this.qt1=0),this.qt1>1&&this.qt1<1+1e-8&&(this.qt1=1)}apply(e){return this.a*e+this.b}applyInverse(e){return(e-this.b)/this.a}static createLinear(e,t,i,s){const r=(s-t)/(i-e);return new Au(r,t-e*r)}}const Xi=n=>n.toFixed(20),Md=new Ne(0,0),Nm=new Ne(0,0),nk=new Ne(0,0);function cc(n){return n>=0&&n<=1}class wn{constructor(){this.invalidationEmitter=new Hi}areStrokedBoundsDilated(){return Math.abs(this.startTangent.x*this.startTangent.y)<1e-7&&Math.abs(this.endTangent.x*this.endTangent.y)<1e-7}getBoundsWithTransform(e){return this.transformed(e).getBounds()}slice(e,t){let i=this;return t<1&&(i=i.subdivided(t)[0]),e>0&&(i=i.subdivided(Dr(0,t,0,1,e))[1]),i}subdivisions(e){let t=this;const i=[];for(let s=0;s<e.length;s++){const r=e[s],o=t.subdivided(r);i.push(o[0]),t=o[1];for(let d=s+1;d<e.length;d++)e[d]=Dr(r,1,0,1,e[d])}return i.push(t),i}subdividedIntoMonotone(){return this.subdivisions(this.getInteriorExtremaTs())}isSufficientlyFlat(e,t){const i=this.start,s=this.positionAt(.5),r=this.end;return wn.isSufficientlyFlat(e,t,i,s,r)}getArcLength(e,t,i){if(e=e===void 0?1e-10:e,t=t===void 0?1e-8:t,i=i===void 0?15:i,i<=0||this.isSufficientlyFlat(e,t))return this.start.distance(this.end);{const s=this.subdivided(.5);return s[0].getArcLength(e,t,i-1)+s[1].getArcLength(e,t,i-1)}}getDashValues(e,t,i,s){const r=this,o=[];let d=0;const g=he.sum(e);t=t%g,t<0&&(t+=g);let y=0,S=0,T=!0;function L(){y=(y+1)%e.length,T=!T}for(;t>0;)t>=e[y]?(t-=e[y],L()):(S=t,t=0);const x=T;return function A(Q,z,G,re,ne){const ae=(Q+z)/2,pe=r.positionAt(ae);if(ne>14||wn.isSufficientlyFlat(i,s,G,pe,re)){const N=G.distance(pe)+pe.distance(re);d+=N;let Ie=N;for(;S+Ie>=e[y];){const $e=Dr(0,N,Q,z,N-Ie+e[y]-S);o.push($e),Ie-=e[y]-S,S=0,L()}S=S+Ie}else A(Q,ae,G,pe,ne+1),A(ae,z,pe,re,ne+1)}(0,1,this.start,this.end,0),{values:o,arcLength:d,initiallyInside:x}}toPiecewiseLinearSegments(e,t,i,s,r,o){t=t===void 0?e.minLevels:t,i=i===void 0?e.maxLevels:i,s=s||[];const d=e.pointMap||he.identity;r=r||d(this.start),o=o||d(this.end);const g=d(this.positionAt(.5));let y=i===0;if(!y&&t<=0&&(y=this.isSufficientlyFlat(e.distanceEpsilon===null||e.distanceEpsilon===void 0?Number.POSITIVE_INFINITY:e.distanceEpsilon,e.curveEpsilon===null||e.curveEpsilon===void 0?Number.POSITIVE_INFINITY:e.curveEpsilon)),y)s.push(new Pi(r,o));else{const S=this.subdivided(.5);S[0].toPiecewiseLinearSegments(e,t-1,i-1,s,r,g),S[1].toPiecewiseLinearSegments(e,t-1,i-1,s,g,o)}return s}toPiecewiseLinearOrArcSegments(e){const t=St()({minLevels:2,maxLevels:7,curvatureThreshold:.02,errorThreshold:10,errorPoints:[.25,.75]},e),i=[];return this.toPiecewiseLinearOrArcRecursion(t,t.minLevels,t.maxLevels,i,0,1,this.positionAt(0),this.positionAt(1),this.curvatureAt(0),this.curvatureAt(1)),i}toPiecewiseLinearOrArcRecursion(e,t,i,s,r,o,d,g,y,S){const T=(r+o)/2,L=this.positionAt(T),x=this.curvatureAt(T);if(i<=0||t<=0&&Math.abs(y-x)+Math.abs(x-S)<e.curvatureThreshold*2){const A=os.createFromPoints(d,L,g);let Q=!1;if(A instanceof os){const z=A.radius*A.radius;for(let G=0;G<e.errorPoints.length;G++){const re=e.errorPoints[G],ne=this.positionAt(r*(1-re)+o*re);if(Math.abs(ne.distanceSquared(A.center)-z)>e.errorThreshold){Q=!0;break}}}if(!Q){s.push(A);return}}this.toPiecewiseLinearOrArcRecursion(e,t-1,i-1,s,r,T,d,L,y,x),this.toPiecewiseLinearOrArcRecursion(e,t-1,i-1,s,T,o,L,g,x,S)}getClosestPoints(e){return wn.closestToPoint([this],e,1e-7)}static closestToPoint(e,t,i){const s=i*i;let r=[],o=[],d=Number.POSITIVE_INFINITY,g=!1;for(he.each(e,y=>{if(y instanceof Pi){const S=y.explicitClosestToPoint(t);he.each(S,T=>{T.distanceSquared<d?(o=[T],d=T.distanceSquared):T.distanceSquared===d&&o.push(T)})}else{const S=[0].concat(y.getInteriorExtremaTs()).concat([1]);for(let T=0;T<S.length-1;T++){const L=S[T],x=S[T+1],A=y.positionAt(L),Q=y.positionAt(x),z=ot.point(A).addPoint(Q),G=z.minimumDistanceToPointSquared(t);if(G<=d){const re=z.maximumDistanceToPointSquared(t);re<d&&(d=re,o=[]),r.push({ta:L,tb:x,pa:A,pb:Q,segment:y,bounds:z,min:G,max:re})}}}});r.length&&!g;){const y=r;r=[],g=!0;for(const S of y){if(S.min>d)continue;g&&S.pa.distanceSquared(S.pb)>s&&(g=!1);const T=(S.ta+S.tb)/2,L=S.segment.positionAt(T),x=ot.point(S.pa).addPoint(L),A=ot.point(S.pb).addPoint(L),Q=x.minimumDistanceToPointSquared(t),z=A.minimumDistanceToPointSquared(t);if(Q<=d){const G=x.maximumDistanceToPointSquared(t);G<d&&(d=G,o=[]),r.push({ta:S.ta,tb:T,pa:S.pa,pb:L,segment:S.segment,bounds:x,min:Q,max:G})}if(z<=d){const G=A.maximumDistanceToPointSquared(t);G<d&&(d=G,o=[]),r.push({ta:T,tb:S.tb,pa:L,pb:S.pb,segment:S.segment,bounds:A,min:z,max:G})}}}return he.each(r,y=>{const S=(y.ta+y.tb)/2,T=y.segment.positionAt(S);o.push({segment:y.segment,t:S,closestPoint:T,distanceSquared:t.distanceSquared(T)})}),o}static polynomialGetOverlapCubic(e,t,i,s,r,o,d,g){if(g===0)return wn.polynomialGetOverlapQuadratic(e,t,i,r,o,d);const y=Math.sign(s/g)*Math.pow(Math.abs(s/g),1/3);if(y===0)return null;const S=(i-y*y*d)/(3*y*y*g);return{a:y,b:S}}static polynomialGetOverlapQuadratic(e,t,i,s,r,o){if(o===0)return wn.polynomialGetOverlapLinear(e,t,s,r);if(i/o<0)return null;const g=Math.sqrt(i/o);if(g===0)return null;const y=(t-g*r)/(2*g*o);return{a:g,b:y}}static polynomialGetOverlapLinear(e,t,i,s){if(s===0)return e===i?!0:null;const r=t/s;if(r===0)return null;const o=(e-i)/s;return{a:r,b:o}}static intersect(e,t){if(Pi&&e instanceof Pi&&t instanceof Pi)return Pi.intersect(e,t);if(Pi&&e instanceof Pi)return Pi.intersectOther(e,t);if(Pi&&t instanceof Pi)return Pi.intersectOther(t,e).map(rk);if(os&&e instanceof os&&t instanceof os)return os.intersect(e,t);if(kn&&e instanceof kn&&t instanceof kn)return kn.intersect(e,t);if(gn&&Fn&&(e instanceof gn||e instanceof Fn)&&(t instanceof gn||t instanceof Fn)){const i=e instanceof Fn?e:e.degreeElevated(),s=t instanceof Fn?t:t.degreeElevated(),r=new jA.Curve(i.start.x,i.start.y,i.control1.x,i.control1.y,i.control2.x,i.control2.y,i.end.x,i.end.y),o=new jA.Curve(s.start.x,s.start.y,s.control1.x,s.control1.y,s.control2.x,s.control2.y,s.end.x,s.end.y);return r.getIntersections(o).map(g=>{const y=new Ne(g.point.x,g.point.y);return new Pr(y,g.time,g.intersection.time)})}else return qn.intersect(e,t)}static deserialize(e){return ip[e.type].deserialize(e)}static isSufficientlyFlat(e,t,i,s,r){return!(EA(s,i,r)/i.distanceSquared(r)>t||EA(s,i,r)>e)}static filterClosestToPointResult(e){if(e.length===0)return[];const t=he.minBy(e,i=>i.distanceSquared).distanceSquared;return he.uniqWith(e.filter(i=>Math.abs(i.distanceSquared-t)<1e-11),(i,s)=>i.closestPoint.distanceSquared(s.closestPoint)<1e-11)}}function rk(n){return n.getSwapped()}const Ll=Math.PI*2;class os extends wn{constructor(e,t,i,s,r){super(),this._center=e,this._radius=t,this._startAngle=i,this._endAngle=s,this._anticlockwise=r,this.invalidate()}setCenter(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this._center}setRadius(e){return this._radius!==e&&(this._radius=e,this.invalidate()),this}set radius(e){this.setRadius(e)}get radius(){return this.getRadius()}getRadius(){return this._radius}setStartAngle(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}set startAngle(e){this.setStartAngle(e)}get startAngle(){return this.getStartAngle()}getStartAngle(){return this._startAngle}setEndAngle(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}set endAngle(e){this.setEndAngle(e)}get endAngle(){return this.getEndAngle()}getEndAngle(){return this._endAngle}setAnticlockwise(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}set anticlockwise(e){this.setAnticlockwise(e)}get anticlockwise(){return this.getAnticlockwise()}getAnticlockwise(){return this._anticlockwise}positionAt(e){return this.positionAtAngle(this.angleAt(e))}tangentAt(e){return this.tangentAtAngle(this.angleAt(e))}curvatureAt(e){return(this._anticlockwise?-1:1)/this._radius}subdivided(e){if(e===0||e===1)return[this];const t=this.angleAt(0),i=this.angleAt(e),s=this.angleAt(1);return[new os(this._center,this._radius,t,i,this._anticlockwise),new os(this._center,this._radius,i,s,this._anticlockwise)]}invalidate(){this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._bounds=null,this._svgPathFragment=null,this._radius<0&&(this._radius=-this._radius,this._startAngle+=Math.PI,this._endAngle+=Math.PI),this.invalidationEmitter.emit()}getStart(){return this._start===null&&(this._start=this.positionAtAngle(this._startAngle)),this._start}get start(){return this.getStart()}getEnd(){return this._end===null&&(this._end=this.positionAtAngle(this._endAngle)),this._end}get end(){return this.getEnd()}getStartTangent(){return this._startTangent===null&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this._endTangent===null&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}get endTangent(){return this.getEndTangent()}getActualEndAngle(){return this._actualEndAngle===null&&(this._actualEndAngle=os.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}get actualEndAngle(){return this.getActualEndAngle()}getIsFullPerimeter(){return this._isFullPerimeter===null&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=Math.PI*2||this._anticlockwise&&this._startAngle-this._endAngle>=Math.PI*2),this._isFullPerimeter}get isFullPerimeter(){return this.getIsFullPerimeter()}getAngleDifference(){return this._angleDifference===null&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=Math.PI*2)),this._angleDifference}get angleDifference(){return this.getAngleDifference()}getBounds(){return this._bounds===null&&(this._bounds=ot.NOTHING.copy().withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle&&(this.includeBoundsAtAngle(0),this.includeBoundsAtAngle(Math.PI/2),this.includeBoundsAtAngle(Math.PI),this.includeBoundsAtAngle(3*Math.PI/2))),this._bounds}get bounds(){return this.getBounds()}getNondegenerateSegments(){return this._radius<=0||this._startAngle===this._endAngle?[]:[this]}includeBoundsAtAngle(e){this.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this._center.plus(Ne.createPolar(this._radius,e))))}mapAngle(e){return Math.abs(na(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(na(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?Pv(e,this._startAngle-2*Math.PI,this._startAngle):na(e,this._startAngle,this._startAngle+2*Math.PI)}tAtAngle(e){return(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle)}angleAt(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}positionAtAngle(e){return this._center.plus(Ne.createPolar(this._radius,e))}tangentAtAngle(e){const t=Ne.createPolar(1,e);return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}containsAngle(e){const t=this._anticlockwise?e-this._endAngle:e-this._startAngle;return na(t,0,Math.PI*2)<=this.angleDifference}getSVGPathFragment(){if(!this._svgPathFragment){const t=this._anticlockwise?"0":"1";let i;if(this.angleDifference<Math.PI*2-.01)i=this.angleDifference<Math.PI?"0":"1",this._svgPathFragment=`A ${Xi(this._radius)} ${Xi(this._radius)} 0 ${i} ${t} ${Xi(this.end.x)} ${Xi(this.end.y)}`;else{const s=(this._startAngle+this._endAngle)/2,r=this._center.plus(Ne.createPolar(this._radius,s));i="0";const o=`A ${Xi(this._radius)} ${Xi(this._radius)} 0 ${i} ${t} ${Xi(r.x)} ${Xi(r.y)}`,d=`A ${Xi(this._radius)} ${Xi(this._radius)} 0 ${i} ${t} ${Xi(this.end.x)} ${Xi(this.end.y)}`;this._svgPathFragment=`${o} ${d}`}}return this._svgPathFragment}strokeLeft(e){return[new os(this._center,this._radius+(this._anticlockwise?1:-1)*e/2,this._startAngle,this._endAngle,this._anticlockwise)]}strokeRight(e){return[new os(this._center,this._radius+(this._anticlockwise?-1:1)*e/2,this._endAngle,this._startAngle,!this._anticlockwise)]}getInteriorExtremaTs(){const e=[];return he.each([0,Math.PI/2,Math.PI,3*Math.PI/2],t=>{if(this.containsAngle(t)){const i=this.tAtAngle(t),s=1e-10;i>s&&i<1-s&&e.push(i)}}),e.sort()}intersection(e){const t=[],s=e.position.minus(this._center),r=e.direction.dot(s),o=s.magnitudeSquared,d=4*r*r-4*(o-this._radius*this._radius);if(d<0)return t;const g=e.direction.dot(this._center)-e.direction.dot(e.position),y=Math.sqrt(d)/2,S=g-y,T=g+y;if(T<0)return t;const L=e.pointAtDistance(T),x=L.minus(this._center).normalized(),A=x.angle;if(S<0)this.containsAngle(A)&&t.push(new Ul(T,L,x.negated(),this._anticlockwise?-1:1,this.tAtAngle(A)));else{const Q=e.pointAtDistance(S),z=Q.minus(this._center).normalized(),G=z.angle;this.containsAngle(G)&&t.push(new Ul(S,Q,z,this._anticlockwise?1:-1,this.tAtAngle(G))),this.containsAngle(A)&&t.push(new Ul(T,L,x.negated(),this._anticlockwise?-1:1,this.tAtAngle(A)))}return t}windingIntersection(e){let t=0;const i=this.intersection(e);return he.each(i,s=>{t+=s.wind}),t}writeToContext(e){e.arc(this._center.x,this._center.y,this._radius,this._startAngle,this._endAngle,this._anticlockwise)}transformed(e){const t=e.timesVector2(Ne.createPolar(1,this._startAngle)).minus(e.timesVector2(Ne.ZERO)).angle;let i=e.timesVector2(Ne.createPolar(1,this._endAngle)).minus(e.timesVector2(Ne.ZERO)).angle;const s=e.getDeterminant()>=0?this._anticlockwise:!this._anticlockwise;Math.abs(this._endAngle-this._startAngle)===Math.PI*2&&(i=s?t-Math.PI*2:t+Math.PI*2);const r=e.getScaleVector();if(r.x!==r.y){const o=r.x*this._radius,d=r.y*this._radius;return new kn(e.timesVector2(this._center),o,d,0,t,i,s)}else{const o=r.x*this._radius;return new os(e.timesVector2(this._center),o,t,i,s)}}getSignedAreaFragment(){const e=this._startAngle,t=this.getActualEndAngle();return .5*this._radius*(this._radius*(t-e)+this._center.x*(Math.sin(t)-Math.sin(e))-this._center.y*(Math.cos(t)-Math.cos(e)))}reversed(){return new os(this._center,this._radius,this._endAngle,this._startAngle,!this._anticlockwise)}getArcLength(){return this.getAngleDifference()*this._radius}toPiecewiseLinearOrArcSegments(){return[this]}serialize(){return{type:"Arc",centerX:this._center.x,centerY:this._center.y,radius:this._radius,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}getOverlaps(e,t=1e-6){return e instanceof os?os.getOverlaps(this,e):null}getConicMatrix(){const e=this.center.x,t=this.center.y,i=1,s=0,r=1,o=-2*e,d=-2*t,g=e*e+t*t-this.radius*this.radius;return mt.rowMajor(i,s/2,o/2,s/2,r,d/2,o/2,d/2,g)}static deserialize(e){return new os(new Ne(e.centerX,e.centerY),e.radius,e.startAngle,e.endAngle,e.anticlockwise)}static computeActualEndAngle(e,t,i){return i?e>t?t:e<t?t-2*Math.PI:e:e<t?t:e>t?t+Math.PI*2:e}static getPartialOverlap(e,t,i,s,r){const o=i<t,d=o?i:t,g=o?t:i,y=d,S=Math.min(e,g);return S<y+1e-8?[]:[Au.createLinear(qs(Dr(0,e,0,1,y),0,1),qs(Dr(t,i,s,r,y),0,1),qs(Dr(0,e,0,1,S),0,1),qs(Dr(t,i,s,r,S),0,1))]}static getAngularOverlaps(e,t,i,s){let r=t-e;const o=r<0?-1:1;r*=o;const d=na(o*(i-e),0,Ll),g=o*(s-i)+d;let y;return g<-1e-10?(y=-d/(g-d),os.getPartialOverlap(r,d,0,0,y).concat(os.getPartialOverlap(r,Ll,g+Ll,y,1))):g>Ll+1e-10?(y=(Ll-d)/(g-d),os.getPartialOverlap(r,d,Ll,0,y).concat(os.getPartialOverlap(r,0,g-Ll,y,1))):os.getPartialOverlap(r,d,g,0,1)}static getOverlaps(e,t){return e._center.distance(t._center)>1e-4||Math.abs(e._radius-t._radius)>1e-4?[]:os.getAngularOverlaps(e._startAngle,e.getActualEndAngle(),t._startAngle,t.getActualEndAngle())}static getCircleIntersectionPoint(e,t,i,s){const r=i.minus(e),o=r.magnitude;let d=[];if(!(o<1e-10||o>t+s+1e-10))if(o>t+s-1e-10)d=[e.blend(i,t/o)];else{const g=.5*(o*o-s*s+t*t)/o,y=o*o-s*s+t*t,S=4*o*o*t*t-y*y,T=e.blend(i,g/o);if(S>=1e-10){const L=Math.sqrt(S)/o/2,x=r.perpendicular.setMagnitude(L);d=[T.plus(x),T.minus(x)]}else S>-1e-10&&(d=[T])}return d}static intersect(e,t){const s=[];if(e._center.equalsEpsilon(t._center,1e-7)&&Math.abs(e._radius-t._radius)<1e-7){const r=e.positionAt(0),o=e.positionAt(1),d=t.positionAt(0),g=t.positionAt(1);r.equalsEpsilon(d,1e-7)&&s.push(new Pr(r.average(d),0,0)),r.equalsEpsilon(g,1e-7)&&s.push(new Pr(r.average(g),0,1)),o.equalsEpsilon(d,1e-7)&&s.push(new Pr(o.average(d),1,0)),o.equalsEpsilon(g,1e-7)&&s.push(new Pr(o.average(g),1,1))}else{const r=os.getCircleIntersectionPoint(e._center,e._radius,t._center,t._radius);for(let o=0;o<r.length;o++){const d=r[o],g=d.minus(e._center).angle,y=d.minus(t._center).angle;e.containsAngle(g)&&t.containsAngle(y)&&s.push(new Pr(d,e.tAtAngle(g),t.tAtAngle(y)))}}return s}static createFromPoints(e,t,i){const s=eI(e,t,i);if(s===null)return new Pi(e,i);{const r=e.minus(s),o=t.minus(s),d=i.minus(s),g=r.angle,y=o.angle,S=d.angle,T=(r.magnitude+o.magnitude+d.magnitude)/3,L=new os(s,T,g,S,!1);return L.containsAngle(y)?L:new os(s,T,g,S,!0)}}}const ak=mt.rowMajor(1,0,0,0,1,0,0,0,-1);class kn extends wn{constructor(e,t,i,s,r,o,d){super(),this._center=e,this._radiusX=t,this._radiusY=i,this._rotation=s,this._startAngle=r,this._endAngle=o,this._anticlockwise=d,this.invalidate()}setCenter(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this._center}setRadiusX(e){return this._radiusX!==e&&(this._radiusX=e,this.invalidate()),this}set radiusX(e){this.setRadiusX(e)}get radiusX(){return this.getRadiusX()}getRadiusX(){return this._radiusX}setRadiusY(e){return this._radiusY!==e&&(this._radiusY=e,this.invalidate()),this}set radiusY(e){this.setRadiusY(e)}get radiusY(){return this.getRadiusY()}getRadiusY(){return this._radiusY}setRotation(e){return this._rotation!==e&&(this._rotation=e,this.invalidate()),this}set rotation(e){this.setRotation(e)}get rotation(){return this.getRotation()}getRotation(){return this._rotation}setStartAngle(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}set startAngle(e){this.setStartAngle(e)}get startAngle(){return this.getStartAngle()}getStartAngle(){return this._startAngle}setEndAngle(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}set endAngle(e){this.setEndAngle(e)}get endAngle(){return this.getEndAngle()}getEndAngle(){return this._endAngle}setAnticlockwise(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}set anticlockwise(e){this.setAnticlockwise(e)}get anticlockwise(){return this.getAnticlockwise()}getAnticlockwise(){return this._anticlockwise}positionAt(e){return this.positionAtAngle(this.angleAt(e))}tangentAt(e){return this.tangentAtAngle(this.angleAt(e))}curvatureAt(e){const t=this.angleAt(e),i=this._radiusX*Math.sin(t),s=this._radiusY*Math.cos(t),r=Math.pow(s*s+i*i,3/2);return(this._anticlockwise?-1:1)*this._radiusX*this._radiusY/r}subdivided(e){if(e===0||e===1)return[this];const t=this.angleAt(0),i=this.angleAt(e),s=this.angleAt(1);return[new kn(this._center,this._radiusX,this._radiusY,this._rotation,t,i,this._anticlockwise),new kn(this._center,this._radiusX,this._radiusY,this._rotation,i,s,this._anticlockwise)]}invalidate(){if(this._unitTransform=null,this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._unitArcSegment=null,this._bounds=null,this._svgPathFragment=null,this._radiusX<0&&(this._radiusX=-this._radiusX,this._startAngle=Math.PI-this._startAngle,this._endAngle=Math.PI-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusY<0&&(this._radiusY=-this._radiusY,this._startAngle=-this._startAngle,this._endAngle=-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusX<this._radiusY){this._rotation+=Math.PI/2,this._startAngle-=Math.PI/2,this._endAngle-=Math.PI/2;const e=this._radiusX;this._radiusX=this._radiusY,this._radiusY=e}if(this._radiusX<this._radiusY)throw new Error("Not verified to work if radiusX < radiusY");this.invalidationEmitter.emit()}getUnitTransform(){return this._unitTransform===null&&(this._unitTransform=kn.computeUnitTransform(this._center,this._radiusX,this._radiusY,this._rotation)),this._unitTransform}get unitTransform(){return this.getUnitTransform()}getStart(){return this._start===null&&(this._start=this.positionAtAngle(this._startAngle)),this._start}get start(){return this.getStart()}getEnd(){return this._end===null&&(this._end=this.positionAtAngle(this._endAngle)),this._end}get end(){return this.getEnd()}getStartTangent(){return this._startTangent===null&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this._endTangent===null&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}get endTangent(){return this.getEndTangent()}getActualEndAngle(){return this._actualEndAngle===null&&(this._actualEndAngle=os.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}get actualEndAngle(){return this.getActualEndAngle()}getIsFullPerimeter(){return this._isFullPerimeter===null&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=Math.PI*2||this._anticlockwise&&this._startAngle-this._endAngle>=Math.PI*2),this._isFullPerimeter}get isFullPerimeter(){return this.getIsFullPerimeter()}getAngleDifference(){return this._angleDifference===null&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=Math.PI*2)),this._angleDifference}get angleDifference(){return this.getAngleDifference()}getUnitArcSegment(){return this._unitArcSegment===null&&(this._unitArcSegment=new os(Ne.ZERO,1,this._startAngle,this._endAngle,this._anticlockwise)),this._unitArcSegment}get unitArcSegment(){return this.getUnitArcSegment()}getBounds(){if(this._bounds===null&&(this._bounds=ot.NOTHING.withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle)){const e=Math.atan(-(this._radiusY/this._radiusX)*Math.tan(this._rotation)),t=Math.atan(this._radiusY/this._radiusX/Math.tan(this._rotation));this.possibleExtremaAngles=[e,e+Math.PI,t,t+Math.PI],he.each(this.possibleExtremaAngles,this.includeBoundsAtAngle.bind(this))}return this._bounds}get bounds(){return this.getBounds()}getNondegenerateSegments(){if(this._radiusX<=0||this._radiusY<=0||this._startAngle===this._endAngle)return[];if(this._radiusX===this._radiusY){const e=this._startAngle+this._rotation;let t=this._endAngle+this._rotation;return Math.abs(this._endAngle-this._startAngle)===Math.PI*2&&(t=this._anticlockwise?e-Math.PI*2:e+Math.PI*2),[new os(this._center,this._radiusX,e,t,this._anticlockwise)]}else return[this]}includeBoundsAtAngle(e){this.unitArcSegment.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this.positionAtAngle(e)))}mapAngle(e){return Math.abs(na(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(na(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?Pv(e,this._startAngle-2*Math.PI,this._startAngle):na(e,this._startAngle,this._startAngle+2*Math.PI)}tAtAngle(e){return(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle)}angleAt(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}positionAtAngle(e){return this.getUnitTransform().transformPosition2(Ne.createPolar(1,e))}tangentAtAngle(e){const t=this.getUnitTransform().transformNormal2(Ne.createPolar(1,e));return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}offsetTo(e,t){const s=[],r=[];for(let o=0;o<32;o++){let d=o/31;t&&(d=1-d);const g=this.angleAt(d);s.push(this.positionAtAngle(g).plus(this.tangentAtAngle(g).perpendicular.normalized().times(e))),o>0&&r.push(new Pi(s[o-1],s[o]))}return r}getSVGPathFragment(){if(!this._svgPathFragment){const t=this._anticlockwise?"0":"1";let i;const s=Dv(this._rotation);if(this.getAngleDifference()<Math.PI*2-.01)i=this.getAngleDifference()<Math.PI?"0":"1",this._svgPathFragment=`A ${Xi(this._radiusX)} ${Xi(this._radiusY)} ${s} ${i} ${t} ${Xi(this.getEnd().x)} ${Xi(this.getEnd().y)}`;else{const r=(this._startAngle+this._endAngle)/2,o=this.positionAtAngle(r);i="0";const d=`A ${Xi(this._radiusX)} ${Xi(this._radiusY)} ${s} ${i} ${t} ${Xi(o.x)} ${Xi(o.y)}`,g=`A ${Xi(this._radiusX)} ${Xi(this._radiusY)} ${s} ${i} ${t} ${Xi(this.getEnd().x)} ${Xi(this.getEnd().y)}`;this._svgPathFragment=`${d} ${g}`}}return this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=[];return he.each(this.possibleExtremaAngles,t=>{if(this.unitArcSegment.containsAngle(t)){const i=this.tAtAngle(t),s=1e-10;i>s&&i<1-s&&e.push(i)}}),e.sort()}intersection(e){const t=this.getUnitTransform(),i=t.inverseRay2(e),s=this.getUnitArcSegment().intersection(i);return he.map(s,r=>{const o=t.transformPosition2(r.point),d=e.position.distance(o),g=t.inverseNormal2(r.normal);return new Ul(d,o,g,r.wind,r.t)})}windingIntersection(e){const t=this.getUnitTransform().inverseRay2(e);return this.getUnitArcSegment().windingIntersection(t)}writeToContext(e){e.ellipse?e.ellipse(this._center.x,this._center.y,this._radiusX,this._radiusY,this._rotation,this._startAngle,this._endAngle,this._anticlockwise):(this.getUnitTransform().getMatrix().canvasAppendTransform(e),e.arc(0,0,1,this._startAngle,this._endAngle,this._anticlockwise),this.getUnitTransform().getInverse().canvasAppendTransform(e))}transformed(e){const t=e.timesVector2(Ne.createPolar(this._radiusX,this._rotation)).minus(e.timesVector2(Ne.ZERO)),i=e.timesVector2(Ne.createPolar(this._radiusY,this._rotation+Math.PI/2)).minus(e.timesVector2(Ne.ZERO)),s=t.angle,r=t.magnitude,o=i.magnitude,d=e.getDeterminant()<0,g=d?!this._anticlockwise:this._anticlockwise,y=d?-this._startAngle:this._startAngle;let S=d?-this._endAngle:this._endAngle;return Math.abs(this._endAngle-this._startAngle)===Math.PI*2&&(S=g?y-Math.PI*2:y+Math.PI*2),new kn(e.timesVector2(this._center),r,o,s,y,S,g)}getSignedAreaFragment(){const e=this._startAngle,t=this.getActualEndAngle(),i=Math.sin(e),s=Math.sin(t),r=Math.cos(e),o=Math.cos(t);return .5*(this._radiusX*this._radiusY*(t-e)+Math.cos(this._rotation)*(this._radiusX*this._center.y*(r-o)+this._radiusY*this._center.x*(s-i))+Math.sin(this._rotation)*(this._radiusX*this._center.x*(o-r)+this._radiusY*this._center.y*(s-i)))}reversed(){return new kn(this._center,this._radiusX,this._radiusY,this._rotation,this._endAngle,this._startAngle,!this._anticlockwise)}serialize(){return{type:"EllipticalArc",centerX:this._center.x,centerY:this._center.y,radiusX:this._radiusX,radiusY:this._radiusY,rotation:this._rotation,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}getOverlaps(e,t=1e-6){return e instanceof kn?kn.getOverlaps(this,e):null}getConicMatrix(){const t=kn.computeUnitMatrix(this._center,this._radiusX,this._radiusY,this._rotation).inverted();return t.transposed().multiplyMatrix(ak).multiplyMatrix(t)}static deserialize(e){return new kn(new Ne(e.centerX,e.centerY),e.radiusX,e.radiusY,e.rotation,e.startAngle,e.endAngle,e.anticlockwise)}static getOverlapType(e,t,i=1e-4){if(e._center.distance(t._center)<i){const s=Math.abs(e._radiusX-t._radiusX)<i&&Math.abs(e._radiusY-t._radiusY)<i,r=Math.abs(e._radiusX-t._radiusY)<i&&Math.abs(e._radiusY-t._radiusX)<i;if(s&&Math.abs(na(e._rotation-t._rotation+Math.PI/2,0,Math.PI)-Math.PI/2)<i)return ba.MATCHING_OVERLAP;if(r&&Math.abs(na(e._rotation-t._rotation,0,Math.PI)-Math.PI/2)<i)return ba.OPPOSITE_OVERLAP}return ba.NONE}static getOverlaps(e,t){return kn.getOverlapType(e,t)===ba.NONE?[]:os.getAngularOverlaps(e._startAngle+e._rotation,e.getActualEndAngle()+e._rotation,t._startAngle+t._rotation,t.getActualEndAngle()+t._rotation)}static intersect(e,t,i=1e-10){if(kn.getOverlapType(e,t,i)===ba.NONE)return qn.intersect(e,t);{const r=[],o=e.positionAt(0),d=e.positionAt(1),g=t.positionAt(0),y=t.positionAt(1);return o.equalsEpsilon(g,i)&&r.push(new Pr(o.average(g),0,0)),o.equalsEpsilon(y,i)&&r.push(new Pr(o.average(y),0,1)),d.equalsEpsilon(g,i)&&r.push(new Pr(d.average(g),1,0)),d.equalsEpsilon(y,i)&&r.push(new Pr(d.average(y),1,1)),r}}static computeUnitMatrix(e,t,i,s){return mt.translationFromVector(e).timesMatrix(mt.rotation2(s)).timesMatrix(mt.scaling(t,i))}static computeUnitTransform(e,t,i,s){return new ra(kn.computeUnitMatrix(e,t,i,s))}}class ba extends rr{}ba.MATCHING_OVERLAP=new ba;ba.OPPOSITE_OVERLAP=new ba;ba.NONE=new ba;ba.enumeration=new oa(ba);let Pi=class Ba extends wn{constructor(e,t){super(),this._start=e,this._end=t,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){return this._start.plus(this._end.minus(this._start).times(e))}tangentAt(e){return this.getStartTangent()}curvatureAt(e){return 0}subdivided(e){if(e===0||e===1)return[this];const t=this.positionAt(e);return[new Ba(this._start,t),new Ba(t,this._end)]}invalidate(){this._tangent=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){return this._tangent===null&&(this._tangent=this._end.minus(this._start).normalized()),this._tangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this.getStartTangent()}get endTangent(){return this.getEndTangent()}getBounds(){return this._bounds===null&&(this._bounds=ot.NOTHING.copy().addPoint(this._start).addPoint(this._end)),this._bounds}get bounds(){return this.getBounds()}getBoundsWithTransform(e){const t=ot.NOTHING.copy();return t.addPoint(e.multiplyVector2(Nm.set(this._start))),t.addPoint(e.multiplyVector2(Nm.set(this._end))),t}getNondegenerateSegments(){return this._start.equals(this._end)?[]:[this]}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`L ${Xi(this._end.x)} ${Xi(this._end.y)}`),this._svgPathFragment}strokeLeft(e){const t=this.getEndTangent().perpendicular.negated().times(e/2);return[new Ba(this._start.plus(t),this._end.plus(t))]}strokeRight(e){const t=this.getStartTangent().perpendicular.times(e/2);return[new Ba(this._end.plus(t),this._start.plus(t))]}getInteriorExtremaTs(){return[]}intersection(e){const t=[],i=this._start,r=this._end.minus(i);if(r.magnitudeSquared===0)return t;const o=e.direction.y*r.x-e.direction.x*r.y;if(o===0)return t;const d=(e.direction.x*(i.y-e.position.y)-e.direction.y*(i.x-e.position.x))/o;if(d<0||d>=1)return t;const g=(r.x*(i.y-e.position.y)-r.y*(i.x-e.position.x))/o;if(g<1e-8)return t;const y=r.perpendicular,S=i.plus(r.times(d)),T=(y.dot(e.direction)>0?y.negated():y).normalized(),L=e.direction.perpendicular.dot(r)<0?1:-1;return t.push(new Ul(g,S,T,L,d)),t}windingIntersection(e){const t=this.intersection(e);return t.length?t[0].wind:0}writeToContext(e){e.lineTo(this._end.x,this._end.y)}transformed(e){return new Ba(e.timesVector2(this._start),e.timesVector2(this._end))}explicitClosestToPoint(e){const t=this._end.minus(this._start);let i=e.minus(this._start).dot(t)/t.magnitudeSquared;i=qs(i,0,1);const s=this.positionAt(i);return[{segment:this,t:i,closestPoint:s,distanceSquared:e.distanceSquared(s)}]}getSignedAreaFragment(){return 1/2*(this._start.x*this._end.y-this._start.y*this._end.x)}reparameterized(e,t){return new Ba(this.positionAt(t),this.positionAt(e+t))}reversed(){return new Ba(this._end,this._start)}polarToCartesian(e){return this._start.x===this._end.x?[new Ba(Ne.createPolar(this._start.y,this._start.x),Ne.createPolar(this._end.y,this._end.x))]:this._start.y===this._end.y?[new os(Ne.ZERO,this._start.y,this._start.x,this._end.x,this._start.x>this._end.x)]:this.toPiecewiseLinearSegments(e)}getArcLength(){return this.start.distance(this.end)}toPiecewiseLinearOrArcSegments(){return[this]}serialize(){return{type:"Line",startX:this._start.x,startY:this._start.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e,t=1e-6){return e instanceof Ba?Ba.getOverlaps(this,e):null}getClosestPoints(e){const t=this._end.minus(this._start),i=t.normalized(),s=e.minus(this._start).dot(i),r=qs(s/t.magnitude,0,1),o=this.positionAt(r);return[{segment:this,t:r,closestPoint:o,distanceSquared:o.distanceSquared(e)}]}static deserialize(e){return new Ba(new Ne(e.startX,e.startY),new Ne(e.endX,e.endY))}static getOverlaps(e,t,i=1e-6){const s=[],r=e._start.x,o=-1*e._start.x+e._end.x,d=e._start.y,g=-1*e._start.y+e._end.y,y=t._start.x,S=-1*t._start.x+t._end.x,T=t._start.y,L=-1*t._start.y+t._end.y,x=Math.abs(Math.max(e._start.x,e._end.x,t._start.x,t._end.x)-Math.min(e._start.x,e._end.x,t._start.x,t._end.x)),A=Math.abs(Math.max(e._start.y,e._end.y,t._start.y,t._end.y)-Math.min(e._start.y,e._end.y,t._start.y,t._end.y)),Q=wn.polynomialGetOverlapLinear(r,o,y,S),z=wn.polynomialGetOverlapLinear(d,g,T,L);let G;if(x>A?G=Q===null||Q===!0?z:Q:G=z===null||z===!0?Q:z,G===null||G===!0)return s;const re=G.a,ne=G.b,ae=y+ne*S-r,pe=re*S-o,N=T+ne*L-d,Ie=re*L-g;if(Math.abs(ae)>i||Math.abs(pe+ae)>i||Math.abs(N)>i||Math.abs(Ie+N)>i)return s;const $e=ne,Ee=re+ne;return $e>1&&Ee>1||$e<0&&Ee<0?s:[new Au(re,ne)]}static intersect(e,t){const i=Wx(e.start.x,e.start.y,e.end.x,e.end.y,t.start.x,t.start.y,t.end.x,t.end.y);if(i!==null){const s=e.explicitClosestToPoint(i)[0].t,r=t.explicitClosestToPoint(i)[0].t;return[new Pr(i,s,r)]}else return[]}static intersectOther(e,t){const i=e.end.minus(e.start),s=i.magnitude,r=new Ma(e.start,i.normalize()),o=t.intersection(r),d=[];for(let g=0;g<o.length;g++){const y=o[g],S=y.distance/s;S>1e-8&&S<1-1e-8&&d.push(new Pr(y.point,S,y.t))}return d}};class gn extends wn{constructor(e,t,i){super(),this._start=e,this._control=t,this._end=i,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setControl(e){return this._control.equals(e)||(this._control=e,this.invalidate()),this}set control(e){this.setControl(e)}get control(){return this.getControl()}getControl(){return this._control}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){const t=1-e;return this._start.times(t*t).plus(this._control.times(2*t*e)).plus(this._end.times(e*e))}tangentAt(e){return this._control.minus(this._start).times(2*(1-e)).plus(this._end.minus(this._control).times(2*e))}curvatureAt(e){if(Math.abs(e-.5)>.5-1e-7){const i=e<.5,s=i?this._start:this._end,r=this._control,o=i?this._end:this._start,d=r.minus(s),g=d.magnitude;return(i?-1:1)*d.perpendicular.normalized().dot(o.minus(r))*(this.degree-1)/(this.degree*g*g)}else return this.subdivided(e)[0].curvatureAt(1)}subdivided(e){if(e===0||e===1)return[this];const t=this._start.blend(this._control,e),i=this._control.blend(this._end,e),s=t.blend(i,e);return[new gn(this._start,t,s),new gn(s,i,this._end)]}invalidate(){this._startTangent=null,this._endTangent=null,this._tCriticalX=null,this._tCriticalY=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){if(this._startTangent===null){const e=this._start.equals(this._control);this._startTangent=e?this._end.minus(this._start).normalized():this._control.minus(this._start).normalized()}return this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){if(this._endTangent===null){const e=this._end.equals(this._control);this._endTangent=e?this._end.minus(this._start).normalized():this._end.minus(this._control).normalized()}return this._endTangent}get endTangent(){return this.getEndTangent()}getTCriticalX(){return this._tCriticalX===null&&(this._tCriticalX=gn.extremaT(this._start.x,this._control.x,this._end.x)),this._tCriticalX}get tCriticalX(){return this.getTCriticalX()}getTCriticalY(){return this._tCriticalY===null&&(this._tCriticalY=gn.extremaT(this._start.y,this._control.y,this._end.y)),this._tCriticalY}get tCriticalY(){return this.getTCriticalY()}getNondegenerateSegments(){const e=this._start,t=this._control,i=this._end,s=e.equals(i),r=e.equals(t),o=e.equals(t);if(s&&r)return[];if(s){const d=this.positionAt(.5);return[new Pi(e,d),new Pi(d,i)]}else if(of(e,t,i)){if(r||o)return[new Pi(e,i)];const d=i.minus(e),g=t.minus(e).dot(d.normalized())/d.magnitude,y=gn.extremaT(0,g,1);if(!isNaN(y)&&y>0&&y<1){const S=this.positionAt(y);return he.flatten([new Pi(e,S).getNondegenerateSegments(),new Pi(S,i).getNondegenerateSegments()])}else return[new Pi(e,i)]}else return[this]}getBounds(){if(this._bounds===null){this._bounds=new ot(Math.min(this._start.x,this._end.x),Math.min(this._start.y,this._end.y),Math.max(this._start.x,this._end.x),Math.max(this._start.y,this._end.y));const e=this.getTCriticalX(),t=this.getTCriticalY();!isNaN(e)&&e>0&&e<1&&(this._bounds=this._bounds.withPoint(this.positionAt(e))),!isNaN(t)&&t>0&&t<1&&(this._bounds=this._bounds.withPoint(this.positionAt(t)))}return this._bounds}get bounds(){return this.getBounds()}offsetTo(e,t){let i=[this];const s=5;for(let o=0;o<s;o++)i=he.flatten(he.map(i,d=>d.subdivided(.5)));let r=he.map(i,o=>o.approximateOffset(e));return t&&(r.reverse(),r=he.map(r,o=>o.reversed())),r}degreeElevated(){return new Fn(this._start,this._start.plus(this._control.timesScalar(2)).dividedScalar(3),this._end.plus(this._control.timesScalar(2)).dividedScalar(3),this._end)}approximateOffset(e){return new gn(this._start.plus((this._start.equals(this._control)?this._end.minus(this._start):this._control.minus(this._start)).perpendicular.normalized().times(e)),this._control.plus(this._end.minus(this._start).perpendicular.normalized().times(e)),this._end.plus((this._end.equals(this._control)?this._end.minus(this._start):this._end.minus(this._control)).perpendicular.normalized().times(e)))}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`Q ${Xi(this._control.x)} ${Xi(this._control.y)} ${Xi(this._end.x)} ${Xi(this._end.y)}`),this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=[],i=this.getTCriticalX(),s=this.getTCriticalY();return!isNaN(i)&&i>1e-10&&i<1-1e-10&&e.push(this.tCriticalX),!isNaN(s)&&s>1e-10&&s<1-1e-10&&e.push(this.tCriticalY),e.sort()}intersection(e){const t=[],i=mt.rotation2(-e.direction.angle).timesMatrix(mt.translation(-e.position.x,-e.position.y)),s=i.timesVector2(this._start),r=i.timesVector2(this._control),o=i.timesVector2(this._end),d=s.y-2*r.y+o.y,g=-2*s.y+2*r.y,y=s.y,S=Kl(d,g,y);return he.each(S,T=>{if(T>=0&&T<=1){const L=this.positionAt(T),x=this.tangentAt(T).normalized(),A=x.perpendicular,Q=L.minus(e.position);if(Q.dot(e.direction)>0){const z=A.dot(e.direction)>0?A.negated():A,G=e.direction.perpendicular.dot(x)<0?1:-1;t.push(new Ul(Q.magnitude,L,z,G,T))}}}),t}windingIntersection(e){let t=0;const i=this.intersection(e);return he.each(i,s=>{t+=s.wind}),t}writeToContext(e){e.quadraticCurveTo(this._control.x,this._control.y,this._end.x,this._end.y)}transformed(e){return new gn(e.timesVector2(this._start),e.timesVector2(this._control),e.timesVector2(this._end))}getSignedAreaFragment(){return 1/6*(this._start.x*(2*this._control.y+this._end.y)+this._control.x*(-2*this._start.y+2*this._end.y)+this._end.x*(-this._start.y-2*this._control.y))}reparameterized(e,t){const i=this._start.plus(this._end.plus(this._control.timesScalar(-2))),s=this._control.minus(this._start).timesScalar(2),r=this._start,o=i.timesScalar(e*e),d=i.timesScalar(e*t).timesScalar(2).plus(s.timesScalar(e)),g=i.timesScalar(t*t).plus(s.timesScalar(t)).plus(r);return new gn(g,d.timesScalar(.5).plus(g),o.plus(d).plus(g))}reversed(){return new gn(this._end,this._control,this._start)}serialize(){return{type:"Quadratic",startX:this._start.x,startY:this._start.y,controlX:this._control.x,controlY:this._control.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e,t=1e-6){return e instanceof gn?gn.getOverlaps(this,e):null}static deserialize(e){return new gn(new Ne(e.startX,e.startY),new Ne(e.controlX,e.controlY),new Ne(e.endX,e.endY))}static extremaT(e,t,i){const s=2*(i-2*t+e);return s!==0?-2*(t-e)/s:NaN}static getOverlaps(e,t,i=1e-6){const s=[],r=e._start.x,o=-2*e._start.x+2*e._control.x,d=e._start.x-2*e._control.x+e._end.x,g=e._start.y,y=-2*e._start.y+2*e._control.y,S=e._start.y-2*e._control.y+e._end.y,T=t._start.x,L=-2*t._start.x+2*t._control.x,x=t._start.x-2*t._control.x+t._end.x,A=t._start.y,Q=-2*t._start.y+2*t._control.y,z=t._start.y-2*t._control.y+t._end.y,G=Math.abs(Math.max(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)-Math.min(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)),re=Math.abs(Math.max(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)-Math.min(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)),ne=wn.polynomialGetOverlapQuadratic(r,o,d,T,L,x),ae=wn.polynomialGetOverlapQuadratic(g,y,S,A,Q,z);let pe;if(G>re?pe=ne===null||ne===!0?ae:ne:pe=ae===null||ae===!0?ne:ae,pe===null||pe===!0)return s;const N=pe.a,Ie=pe.b,$e=N*N,Ee=Ie*Ie,Je=2*N*Ie,Ge=T+Ie*L+Ee*x-r,_t=N*L+Je*x-o,it=$e*x-d,nt=A+Ie*Q+Ee*z-g,Ct=N*Q+Je*z-y,Qe=$e*z-S,Zt=wm(2*it,_t),At=wm(2*Qe,Ct),Re=he.uniq([0,1].concat(Zt?Zt.filter(cc):[])),at=he.uniq([0,1].concat(At?At.filter(cc):[]));for(let Ht=0;Ht<Re.length;Ht++){const cs=Re[Ht];if(Math.abs((it*cs+_t)*cs+Ge)>i)return s}for(let Ht=0;Ht<at.length;Ht++){const cs=at[Ht];if(Math.abs((Qe*cs+Ct)*cs+nt)>i)return s}const Et=Ie,Nt=N+Ie;return Et>1&&Nt>1||Et<0&&Nt<0?s:[new Au(N,Ie)]}}gn.prototype.degree=2;class Fn extends wn{constructor(e,t,i,s){super(),this._start=e,this._control1=t,this._control2=i,this._end=s,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setControl1(e){return this._control1.equals(e)||(this._control1=e,this.invalidate()),this}set control1(e){this.setControl1(e)}get control1(){return this.getControl1()}getControl1(){return this._control1}setControl2(e){return this._control2.equals(e)||(this._control2=e,this.invalidate()),this}set control2(e){this.setControl2(e)}get control2(){return this.getControl2()}getControl2(){return this._control2}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){const t=1-e,i=t*t*t,s=3*t*t*e,r=3*t*e*e,o=e*e*e;return new Ne(this._start.x*i+this._control1.x*s+this._control2.x*r+this._end.x*o,this._start.y*i+this._control1.y*s+this._control2.y*r+this._end.y*o)}tangentAt(e){const t=1-e;return new Ne(0,0).set(this._start).multiplyScalar(-3*t*t).add(Md.set(this._control1).multiplyScalar(3*t*t-6*t*e)).add(Md.set(this._control2).multiplyScalar(6*t*e-3*e*e)).add(Md.set(this._end).multiplyScalar(3*e*e))}curvatureAt(e){if(Math.abs(e-.5)>.5-1e-7){const i=e<.5,s=i?this._start:this._end,r=i?this._control1:this._control2,o=i?this._control2:this._control1,d=r.minus(s),g=d.magnitude;return(i?-1:1)*d.perpendicular.normalized().dot(o.minus(r))*(this.degree-1)/(this.degree*g*g)}else return this.subdivided(e)[0].curvatureAt(1)}subdivided(e){if(e===0||e===1)return[this];const t=this._start.blend(this._control1,e),i=this._control2.blend(this._end,e),s=this._control1.blend(this._control2,e),r=t.blend(s,e),o=s.blend(i,e),d=r.blend(o,e);return[new Fn(this._start,t,r,d),new Fn(d,o,i,this._end)]}invalidate(){this._startTangent=null,this._endTangent=null,this._r=null,this._s=null,this._tCusp=null,this._tDeterminant=null,this._tInflection1=null,this._tInflection2=null,this._quadratics=null,this._xExtremaT=null,this._yExtremaT=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){return this._startTangent===null&&(this._startTangent=this.tangentAt(0).normalized()),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this._endTangent===null&&(this._endTangent=this.tangentAt(1).normalized()),this._endTangent}get endTangent(){return this.getEndTangent()}getR(){return this._r===null&&(this._r=this._control1.minus(this._start).normalized()),this._r}get r(){return this.getR()}getS(){return this._s===null&&(this._s=this.getR().perpendicular),this._s}get s(){return this.getS()}getTCusp(){return this._tCusp===null&&this.computeCuspInfo(),this._tCusp}get tCusp(){return this.getTCusp()}getTDeterminant(){return this._tDeterminant===null&&this.computeCuspInfo(),this._tDeterminant}get tDeterminant(){return this.getTDeterminant()}getTInflection1(){return this._tInflection1===null&&this.computeCuspInfo(),this._tInflection1}get tInflection1(){return this.getTInflection1()}getTInflection2(){return this._tInflection2===null&&this.computeCuspInfo(),this._tInflection2}get tInflection2(){return this.getTInflection2()}getQuadratics(){return this._quadratics===null&&this.computeCuspSegments(),this._quadratics}getXExtremaT(){return this._xExtremaT===null&&(this._xExtremaT=Fn.extremaT(this._start.x,this._control1.x,this._control2.x,this._end.x)),this._xExtremaT}get xExtremaT(){return this.getXExtremaT()}getYExtremaT(){return this._yExtremaT===null&&(this._yExtremaT=Fn.extremaT(this._start.y,this._control1.y,this._control2.y,this._end.y)),this._yExtremaT}get yExtremaT(){return this.getYExtremaT()}getBounds(){return this._bounds===null&&(this._bounds=ot.NOTHING,this._bounds=this._bounds.withPoint(this._start),this._bounds=this._bounds.withPoint(this._end),he.each(this.getXExtremaT(),e=>{e>=0&&e<=1&&(this._bounds=this._bounds.withPoint(this.positionAt(e)))}),he.each(this.getYExtremaT(),e=>{e>=0&&e<=1&&(this._bounds=this._bounds.withPoint(this.positionAt(e)))}),this.hasCusp()&&(this._bounds=this._bounds.withPoint(this.positionAt(this.getTCusp())))),this._bounds}get bounds(){return this.getBounds()}computeCuspInfo(){const e=this._start.times(-1).plus(this._control1.times(3)).plus(this._control2.times(-3)).plus(this._end),t=this._start.times(3).plus(this._control1.times(-6)).plus(this._control2.times(3)),i=this._start.times(-3).plus(this._control1.times(3)),s=e.perpendicular,r=t.perpendicular,o=s.dot(t);if(this._tCusp=-.5*(s.dot(i)/o),this._tDeterminant=this._tCusp*this._tCusp-1/3*(r.dot(i)/o),this._tDeterminant>=0){const d=Math.sqrt(this._tDeterminant);this._tInflection1=this._tCusp-d,this._tInflection2=this._tCusp+d}else this._tInflection1=NaN,this._tInflection2=NaN}computeCuspSegments(){if(this.hasCusp()){this._quadratics=[];const e=this.getTCusp();if(e===0)this._quadratics.push(new gn(this.start,this.control2,this.end));else if(e===1)this._quadratics.push(new gn(this.start,this.control1,this.end));else{const t=this.subdivided(e);this._quadratics.push(new gn(t[0].start,t[0].control1,t[0].end)),this._quadratics.push(new gn(t[1].start,t[1].control2,t[1].end))}}else this._quadratics=null}getNondegenerateSegments(){const e=this._start,t=this._control1,i=this._control2,s=this._end,r=this.degreeReduced(1e-9);if(e.equals(s)&&e.equals(t)&&e.equals(i))return[];if(this.hasCusp())return he.flatten(this.getQuadratics().map(o=>o.getNondegenerateSegments()));if(r)return r.getNondegenerateSegments();if(of(e,t,s)&&of(e,i,s)&&!e.equalsEpsilon(s,1e-7)){const o=this.getXExtremaT().concat(this.getYExtremaT()).sort().map(y=>this.positionAt(y)),d=[];let g=e;o.length&&(d.push(new Pi(e,o[0])),g=o[0]);for(let y=1;y<o.length;y++)d.push(new Pi(o[y-1],o[y])),g=o[y];return d.push(new Pi(g,s)),he.flatten(d.map(y=>y.getNondegenerateSegments()))}else return[this]}hasCusp(){const e=this.getTCusp();return e>=0&&e<=1&&this.tangentAt(e).magnitude<1e-7}toRS(e){const t=e.minus(this._start);return new Ne(t.dot(this.getR()),t.dot(this.getS()))}offsetTo(e,t){const s=[],r=[];for(let o=0;o<32;o++){let d=o/31;t&&(d=1-d),s.push(this.positionAt(d).plus(this.tangentAt(d).perpendicular.normalized().times(e))),o>0&&r.push(new Pi(s[o-1],s[o]))}return r}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`C ${Xi(this._control1.x)} ${Xi(this._control1.y)} ${Xi(this._control2.x)} ${Xi(this._control2.y)} ${Xi(this._end.x)} ${Xi(this._end.y)}`),this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=this.getXExtremaT().concat(this.getYExtremaT()),t=[];return he.each(e,i=>{i>1e-10&&i<1-1e-10&&he.every(t,r=>Math.abs(i-r)>1e-10)&&t.push(i)}),t.sort()}intersection(e){const t=[],i=mt.rotation2(-e.direction.angle).timesMatrix(mt.translation(-e.position.x,-e.position.y)),s=i.timesVector2(this._start),r=i.timesVector2(this._control1),o=i.timesVector2(this._control2),d=i.timesVector2(this._end),g=-s.y+3*r.y-3*o.y+d.y,y=3*s.y-6*r.y+3*o.y,S=-3*s.y+3*r.y,T=s.y,L=iI(g,y,S,T);return he.each(L,x=>{if(x>=0&&x<=1){const A=this.positionAt(x),Q=this.tangentAt(x).normalized(),z=Q.perpendicular,G=A.minus(e.position);if(G.dot(e.direction)>0){const re=z.dot(e.direction)>0?z.negated():z,ne=e.direction.perpendicular.dot(Q)<0?1:-1;t.push(new Ul(G.magnitude,A,re,ne,x))}}}),t}windingIntersection(e){let t=0;const i=this.intersection(e);return he.each(i,s=>{t+=s.wind}),t}writeToContext(e){e.bezierCurveTo(this._control1.x,this._control1.y,this._control2.x,this._control2.y,this._end.x,this._end.y)}transformed(e){return new Fn(e.timesVector2(this._start),e.timesVector2(this._control1),e.timesVector2(this._control2),e.timesVector2(this._end))}degreeReduced(e){e=e||0;const t=Md.set(this._control1).multiplyScalar(3).subtract(this._start).divideScalar(2),i=Nm.set(this._control2).multiplyScalar(3).subtract(this._end).divideScalar(2);return nk.set(t).subtract(i).magnitude<=e?new gn(this._start,t.average(i),this._end):null}getSignedAreaFragment(){return 1/20*(this._start.x*(6*this._control1.y+3*this._control2.y+this._end.y)+this._control1.x*(-6*this._start.y+3*this._control2.y+3*this._end.y)+this._control2.x*(-3*this._start.y-3*this._control1.y+6*this._end.y)+this._end.x*(-this._start.y-3*this._control1.y-6*this._control2.y))}reversed(){return new Fn(this._end,this._control2,this._control1,this._start)}getSelfIntersection(){const e=this.getInteriorExtremaTs(),t=[0].concat(e).concat([1]),i=this.subdivisions(e);if(i.length<3)return null;for(let s=0;s<i.length;s++){const r=i[s];for(let o=s+1;o<i.length;o++){const d=i[o],g=qn.intersect(r,d);if(g.length){const y=g[0];if(y.aT>1e-7&&y.aT<1-1e-7&&y.bT>1e-7&&y.bT<1-1e-7){const S=t[s]+y.aT*(t[s+1]-t[s]),T=t[o]+y.bT*(t[o+1]-t[o]);return new Pr(y.point,S,T)}}}}return null}serialize(){return{type:"Cubic",startX:this._start.x,startY:this._start.y,control1X:this._control1.x,control1Y:this._control1.y,control2X:this._control2.x,control2Y:this._control2.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e,t=1e-6){return e instanceof Fn?Fn.getOverlaps(this,e):null}static deserialize(e){return new Fn(new Ne(e.startX,e.startY),new Ne(e.control1X,e.control1Y),new Ne(e.control2X,e.control2Y),new Ne(e.endX,e.endY))}static extremaT(e,t,i,s){if(e===t&&e===i&&e===s)return[];const r=-3*e+9*t-9*i+3*s,o=6*e-12*t+6*i,d=-3*e+3*t;return he.filter(Kl(r,o,d),cc)}static getOverlaps(e,t,i=1e-6){const s=[],r=e._start.x,o=-3*e._start.x+3*e._control1.x,d=3*e._start.x-6*e._control1.x+3*e._control2.x,g=-1*e._start.x+3*e._control1.x-3*e._control2.x+e._end.x,y=e._start.y,S=-3*e._start.y+3*e._control1.y,T=3*e._start.y-6*e._control1.y+3*e._control2.y,L=-1*e._start.y+3*e._control1.y-3*e._control2.y+e._end.y,x=t._start.x,A=-3*t._start.x+3*t._control1.x,Q=3*t._start.x-6*t._control1.x+3*t._control2.x,z=-1*t._start.x+3*t._control1.x-3*t._control2.x+t._end.x,G=t._start.y,re=-3*t._start.y+3*t._control1.y,ne=3*t._start.y-6*t._control1.y+3*t._control2.y,ae=-1*t._start.y+3*t._control1.y-3*t._control2.y+t._end.y,pe=Math.abs(Math.max(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)-Math.min(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)),N=Math.abs(Math.max(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)-Math.min(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)),Ie=wn.polynomialGetOverlapCubic(r,o,d,g,x,A,Q,z),$e=wn.polynomialGetOverlapCubic(y,S,T,L,G,re,ne,ae);let Ee;if(pe>N?Ee=Ie===null||Ie===!0?$e:Ie:Ee=$e===null||$e===!0?Ie:$e,Ee===null||Ee===!0)return s;const Je=Ee.a,Ge=Ee.b,_t=Je*Je,it=Je*Je*Je,nt=Ge*Ge,Ct=Ge*Ge*Ge,Qe=2*Je*Ge,Zt=3*Je*nt,At=3*_t*Ge,Re=x+Ge*A+nt*Q+Ct*z-r,at=Je*A+Qe*Q+Zt*z-o,Et=_t*Q+At*z-d,Nt=it*z-g,Ht=G+Ge*re+nt*ne+Ct*ae-y,cs=Je*re+Qe*ne+Zt*ae-S,hi=_t*ne+At*ae-T,zs=it*ae-L,Ji=Kl(3*Nt,2*Et,at),bs=Kl(3*zs,2*hi,cs),ai=he.uniq([0,1].concat(Ji!==null?Ji.filter(cc):[])),Ei=he.uniq([0,1].concat(bs!==null?bs.filter(cc):[]));for(let Zs=0;Zs<ai.length;Zs++){const ns=ai[Zs];if(Math.abs(((Nt*ns+Et)*ns+at)*ns+Re)>i)return s}for(let Zs=0;Zs<Ei.length;Zs++){const ns=Ei[Zs];if(Math.abs(((zs*ns+hi)*ns+cs)*ns+Ht)>i)return s}const Pt=Ge,Hn=Je+Ge;return Pt>1&&Hn>1||Pt<0&&Hn<0?s:[new Au(Je,Ge)]}}Fn.prototype.degree=3;const qh={lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:[],lineDashOffset:0,miterLimit:10};class bc{constructor(e){const t=jn({},qh,e);this.lineWidth=t.lineWidth,this.lineCap=t.lineCap,this.lineJoin=t.lineJoin,this.lineDash=t.lineDash,this.lineDashOffset=t.lineDashOffset,this.miterLimit=t.miterLimit}equals(e){if(!(this.lineWidth===e.lineWidth&&this.lineCap===e.lineCap&&this.lineJoin===e.lineJoin&&this.miterLimit===e.miterLimit&&this.lineDashOffset===e.lineDashOffset))return!1;if(this.lineDash.length===e.lineDash.length){for(let i=0;i<this.lineDash.length;i++)if(this.lineDash[i]!==e.lineDash[i])return!1}else return!1;return!0}copy(){return new bc({lineWidth:this.lineWidth,lineCap:this.lineCap,lineJoin:this.lineJoin,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,miterLimit:this.miterLimit})}leftJoin(e,t,i){t=t.normalized(),i=i.normalized();const s=e.plus(t.perpendicular.negated().times(this.lineWidth/2)),r=e.plus(i.perpendicular.negated().times(this.lineWidth/2)),o=s.equals(r)?[]:[new Pi(s,r)];let d,g,y;if(t.perpendicular.dot(i)>1e-12)switch(this.lineJoin){case"round":return d=t.angle+Math.PI/2,g=i.angle+Math.PI/2,[new os(e,this.lineWidth/2,d,g,!0)];case"miter":if(y=t.angleBetween(i.negated()),1/Math.sin(y/2)<=this.miterLimit&&y<Math.PI-1e-5){const S=C0(s,s.plus(t),r,r.plus(i));return S?[new Pi(s,S),new Pi(S,r)]:[new Pi(s,r)]}else return o;case"bevel":return o;default:throw new Error(`invalid lineJoin: ${this.lineJoin}`)}else return o}rightJoin(e,t,i){return this.leftJoin(e,i.negated(),t.negated())}cap(e,t){t=t.normalized();const i=e.plus(t.perpendicular.times(-this.lineWidth/2)),s=e.plus(t.perpendicular.times(this.lineWidth/2));let r,o,d,g,y,S;switch(this.lineCap){case"butt":return[new Pi(i,s)];case"round":return r=t.angle,[new os(e,this.lineWidth/2,r+Math.PI/2,r-Math.PI/2,!0)];case"square":return o=t.perpendicular.negated().times(this.lineWidth/2),d=t.perpendicular.times(this.lineWidth/2),g=t.times(this.lineWidth/2),y=e.plus(o).plus(g),S=e.plus(d).plus(g),[new Pi(i,y),new Pi(y,S),new Pi(S,s)];default:throw new Error(`invalid lineCap: ${this.lineCap}`)}}}class _s{constructor(e,t,i){if(this.segments=[],this.invalidatedEmitter=new Hi,this._bounds=null,this._strokedSubpaths=null,this._strokedSubpathsComputed=!1,this._strokedStyles=null,this._invalidatingPoints=!1,this.points=t||(e&&e.length?he.map(e,s=>s.start).concat(e[e.length-1].end):[]),this.closed=!!i,this._invalidateListener=this.invalidate.bind(this),e)for(let s=0;s<e.length;s++)he.each(e[s].getNondegenerateSegments(),r=>{this.addSegmentDirectly(r)})}getBounds(){if(this._bounds===null){const e=ot.NOTHING.copy();he.each(this.segments,t=>{e.includeBounds(t.getBounds())}),this._bounds=e}return this._bounds}get bounds(){return this.getBounds()}getArcLength(e,t,i){let s=0;for(let r=0;r<this.segments.length;r++)s+=this.segments[r].getArcLength(e,t,i);return s}copy(){return new _s(this.segments.slice(0),this.points.slice(0),this.closed)}invalidatePoints(){this._invalidatingPoints=!0;const e=this.segments.length;for(let t=0;t<e;t++)this.segments[t].invalidate();this._invalidatingPoints=!1,this.invalidate()}invalidate(){this._invalidatingPoints||(this._bounds=null,this._strokedSubpathsComputed=!1,this.invalidatedEmitter.emit())}addPoint(e){return this.points.push(e),this}addSegmentDirectly(e){return this.segments.push(e),e.invalidationEmitter.addListener(this._invalidateListener),this}addSegment(e){const i=e.getNondegenerateSegments().length;for(let s=0;s<i;s++)this.addSegmentDirectly(e);return this.invalidate(),this}addClosingSegment(){if(this.hasClosingSegment()){const e=this.getClosingSegment();this.addSegmentDirectly(e),this.invalidate(),this.addPoint(this.getFirstPoint()),this.closed=!0}}close(){this.closed=!0,this.addClosingSegment()}getLength(){return this.points.length}getFirstPoint(){return he.first(this.points)}getLastPoint(){return he.last(this.points)}getFirstSegment(){return he.first(this.segments)}getLastSegment(){return he.last(this.segments)}getFillSegments(){const e=this.segments.slice();return this.hasClosingSegment()&&e.push(this.getClosingSegment()),e}isDrawable(){return this.segments.length>0}isClosed(){return this.closed}hasClosingSegment(){return!this.getFirstPoint().equalsEpsilon(this.getLastPoint(),1e-9)}getClosingSegment(){return new Pi(this.getLastPoint(),this.getFirstPoint())}getClosestPoints(e){return wn.filterClosestToPointResult(he.flatten(this.segments.map(t=>t.getClosestPoints(e))))}writeToContext(e){if(this.isDrawable()){const t=this.getFirstSegment().start;e.moveTo(t.x,t.y);let i=this.segments.length;this.closed&&i>=2&&this.segments[i-1]instanceof Pi&&i--;for(let s=0;s<i;s++)this.segments[s].writeToContext(e);this.closed&&e.closePath()}}toPiecewiseLinear(e){return new _s(he.flatten(he.map(this.segments,t=>t.toPiecewiseLinearSegments(e))),void 0,this.closed)}transformed(e){return new _s(he.map(this.segments,t=>t.transformed(e)),he.map(this.points,t=>e.timesVector2(t)),this.closed)}nonlinearTransformed(e){return new _s(he.flatten(he.map(this.segments,t=>e.methodName&&t[e.methodName]?t[e.methodName](e):t.toPiecewiseLinearSegments(e))),void 0,this.closed)}getBoundsWithTransform(e){const t=ot.NOTHING.copy(),i=this.segments.length;for(let s=0;s<i;s++)t.includeBounds(this.segments[s].getBoundsWithTransform(e));return t}offset(e){if(!this.isDrawable())return new _s([],void 0,this.closed);if(e===0)return new _s(this.segments.slice(),void 0,this.closed);let t;const i=this.segments.slice(),s=[];for(t=0;t<i.length;t++)s.push(i[t].strokeLeft(2*e));let r=[];for(t=0;t<i.length;t++){if(this.closed||t>0){const o=(t>0?t:i.length)-1,d=i[t].start,g=i[o].endTangent,y=i[t].startTangent,S=g.perpendicular.negated().times(e).angle,T=y.perpendicular.negated().times(e).angle,L=g.perpendicular.dot(y)>0;r.push(new os(d,Math.abs(e),S,T,L))}r=r.concat(s[t])}return new _s(r,void 0,this.closed)}stroked(e){if(!this.isDrawable())return[];if(e===void 0&&(e=new bc),this._strokedSubpathsComputed&&this._strokedStyles.equals(e))return this._strokedSubpaths;const t=e.lineWidth;let i,s=[],r=[];const o=this.getFirstSegment(),d=this.getLastSegment(),g=x=>{s=s.concat(x)},y=x=>{r=r.concat(x)},S=d.end.equals(o.start),T=S?null:new Pi(this.segments[this.segments.length-1].end,this.segments[0].start);for(i=0;i<this.segments.length;i++)i>0&&g(e.leftJoin(this.segments[i].start,this.segments[i-1].endTangent,this.segments[i].startTangent)),g(this.segments[i].strokeLeft(t));for(i=this.segments.length-1;i>=0;i--)i<this.segments.length-1&&y(e.rightJoin(this.segments[i].end,this.segments[i].endTangent,this.segments[i+1].startTangent)),y(this.segments[i].strokeRight(t));let L;return this.closed?(S?(g(e.leftJoin(d.end,d.endTangent,o.startTangent)),y(e.rightJoin(d.end,d.endTangent,o.startTangent))):(g(e.leftJoin(T.start,d.endTangent,T.startTangent)),g(T.strokeLeft(t)),g(e.leftJoin(T.end,T.endTangent,o.startTangent)),y(e.rightJoin(T.end,T.endTangent,o.startTangent)),y(T.strokeRight(t)),y(e.rightJoin(T.start,d.endTangent,T.startTangent))),L=[new _s(s,void 0,!0),new _s(r,void 0,!0)]):L=[new _s(s.concat(e.cap(d.end,d.endTangent)).concat(r).concat(e.cap(o.start,o.startTangent.negated())),void 0,!0)],this._strokedSubpaths=L,this._strokedSubpathsComputed=!0,this._strokedStyles=e.copy(),L}dashed(e,t,i,s){const r=(g,y)=>{const S=g[g.length-1].concat(y[0]);return g.slice(0,g.length-1).concat([S]).concat(y.slice(1))},o=(g,y)=>{if(!g.hasRightFilled||!y.hasLeftFilled)return!1;const S=he.last(he.last(g.segmentArrays)),T=y.segmentArrays[0][0];return S.end.distance(T.start)<1e-5},d=[];for(let g=0;g<this.segments.length;g++){const y=this.segments[g],S=y.getDashValues(e,t,i,s);d.push(S),t+=S.arcLength;const T=[0].concat(S.values).concat([1]),L=S.initiallyInside;S.hasLeftFilled=L,S.hasRightFilled=T.length%2===0?L:!L,S.segmentArrays=[];for(let x=L?0:1;x<T.length-1;x+=2)T[x]!==T[x+1]&&S.segmentArrays.push([y.slice(T[x],T[x+1])])}for(let g=d.length-1;g>=1;g--){const y=d[g-1],S=d[g];o(y,S)&&d.splice(g-1,2,{segmentArrays:r(y.segmentArrays,S.segmentArrays),hasLeftFilled:y.hasLeftFilled,hasRightFilled:S.hasRightFilled})}if(d.length>1&&o(d[d.length-1],d[0])){const g=d.pop(),y=d.shift();d.push({segmentArrays:r(g.segmentArrays,y.segmentArrays),hasLeftFilled:g.hasLeftFilled,hasRightFilled:y.hasRightFilled})}return this.closed&&d.length===1&&d[0].segmentArrays.length===1&&d[0].hasLeftFilled&&d[0].hasRightFilled?[new _s(d[0].segmentArrays[0],void 0,!0)]:he.flatten(d.map(g=>g.segmentArrays)).map(g=>new _s(g))}static fromBoundary(e){const t=[];for(let i=0;i<e.halfEdges.length;i++)t.push(e.halfEdges[i].getDirectionalSegment());return new _s(t,void 0,!0)}static fromLoop(e){const t=[];for(let i=0;i<e.halfEdges.length;i++)t.push(e.halfEdges[i].getDirectionalSegment());return new _s(t,void 0,e.closed)}serialize(){return{type:"Subpath",segments:this.segments.map(e=>e.serialize()),points:this.points.map(e=>({x:e.x,y:e.y})),closed:this.closed}}static deserialize(e){return new _s(e.segments.map(wn.deserialize),e.points.map(t=>new Ne(t.x,t.y)),e.closed)}}function f1(n){return'"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}const z0={parse:function(n,e){const t={svgPath:d,movetoDrawtoCommandGroups:g,movetoDrawtoCommandGroup:y,drawtoCommands:S,drawtoCommand:T,moveto:L,movetoArgumentSequence:x,closepath:A,lineto:Q,linetoArgumentSequence:z,horizontalLineto:G,horizontalLinetoArgumentSequence:re,verticalLineto:ne,verticalLinetoArgumentSequence:ae,curveto:pe,curvetoArgumentSequence:N,curvetoArgument:Ie,smoothCurveto:$e,smoothCurvetoArgumentSequence:Ee,smoothCurvetoArgument:Je,quadraticBezierCurveto:Ge,quadraticBezierCurvetoArgumentSequence:_t,quadraticBezierCurvetoArgument:it,smoothQuadraticBezierCurveto:nt,smoothQuadraticBezierCurvetoArgumentSequence:Ct,ellipticalArc:Qe,ellipticalArcArgumentSequence:Zt,ellipticalArcArgument:At,coordinatePair:Re,nonnegativeNumber:at,number:Et,flag:Nt,commaWsp:Ht,comma:cs,floatingPointConstant:hi,fractionalConstant:zs,exponent:Ji,sign:bs,digitSequence:ai,digit:Ei,wsp:Pt};if(e!==void 0){if(t[e]===void 0)throw new Error("Invalid rule name: "+f1(e)+".")}else e="svgPath";let i=0,s=0,r=[];function o(P){i<s||(i>s&&(s=i,r=[]),r.push(P))}function d(){let P,fe,ye,we,De,yt;for(De=i,yt=i,P=[],fe=Pt();fe!==null;)P.push(fe),fe=Pt();if(P!==null)if(fe=g(),fe=fe!==null?fe:"",fe!==null){for(ye=[],we=Pt();we!==null;)ye.push(we),we=Pt();ye!==null?P=[P,fe,ye]:(P=null,i=yt)}else P=null,i=yt;else P=null,i=yt;return P!==null&&(P=function(tt,lt){return lt||[]}(De,P[1])),P===null&&(i=De),P}function g(){let P,fe,ye,we,De;if(we=i,De=i,P=y(),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=g(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;return P!==null&&(P=function(yt,tt,lt){return tt.concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=y(),P!==null&&(P=function(yt,tt){return tt}(we,P)),P===null&&(i=we)),P}function y(){let P,fe,ye,we,De;if(we=i,De=i,P=L(),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=S(),ye=ye!==null?ye:"",ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;return P!==null&&(P=function(yt,tt,lt){return lt.length?tt.concat(lt):tt}(we,P[0],P[2])),P===null&&(i=we),P}function S(){let P,fe,ye,we,De;if(we=i,De=i,P=T(),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=S(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;return P!==null&&(P=function(yt,tt,lt){return tt.concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=T(),P!==null&&(P=function(yt,tt){return tt}(we,P)),P===null&&(i=we)),P}function T(){let P;return P=A(),P===null&&(P=Q(),P===null&&(P=G(),P===null&&(P=ne(),P===null&&(P=pe(),P===null&&(P=$e(),P===null&&(P=Ge(),P===null&&(P=nt(),P===null&&(P=Qe())))))))),P}function L(){let P,fe,ye,we,De;if(we=i,De=i,n.charCodeAt(i)===77?(P="M",i++):(P=null,o('"M"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=x(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;if(P!==null&&(P=function(yt,tt){return ns(tt,!1)}(we,P[2])),P===null&&(i=we),P===null){if(we=i,De=i,n.charCodeAt(i)===109?(P="m",i++):(P=null,o('"m"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=x(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;P!==null&&(P=function(yt,tt){return ns(tt,!0)}(we,P[2])),P===null&&(i=we)}return P}function x(){let P,fe,ye,we,De;return we=i,De=i,P=Re(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=z(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt].concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=Re(),P!==null&&(P=function(yt,tt){return[tt]}(we,P)),P===null&&(i=we)),P}function A(){let P,fe;return fe=i,n.charCodeAt(i)===90?(P="Z",i++):(P=null,o('"Z"')),P===null&&(n.charCodeAt(i)===122?(P="z",i++):(P=null,o('"z"'))),P!==null&&(P=function(ye,we){return{cmd:"close"}}()),P===null&&(i=fe),P}function Q(){let P,fe,ye,we,De;if(we=i,De=i,n.charCodeAt(i)===76?(P="L",i++):(P=null,o('"L"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=z(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;if(P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"lineTo",args:[lt.x,lt.y]}))}(we,P[2])),P===null&&(i=we),P===null){if(we=i,De=i,n.charCodeAt(i)===108?(P="l",i++):(P=null,o('"l"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=z(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"lineToRelative",args:[lt.x,lt.y]}))}(we,P[2])),P===null&&(i=we)}return P}function z(){let P,fe,ye,we,De;return we=i,De=i,P=Re(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=z(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt].concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=Re(),P!==null&&(P=function(yt,tt){return[tt]}(we,P)),P===null&&(i=we)),P}function G(){let P,fe,ye,we,De;if(we=i,De=i,n.charCodeAt(i)===72?(P="H",i++):(P=null,o('"H"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=re(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;if(P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"horizontalLineTo",args:[lt]}))}(we,P[2])),P===null&&(i=we),P===null){if(we=i,De=i,n.charCodeAt(i)===104?(P="h",i++):(P=null,o('"h"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=re(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"horizontalLineToRelative",args:[lt]}))}(we,P[2])),P===null&&(i=we)}return P}function re(){let P,fe,ye,we,De;return we=i,De=i,P=Et(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=re(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt].concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=Et(),P!==null&&(P=function(yt,tt){return[tt]}(we,P)),P===null&&(i=we)),P}function ne(){let P,fe,ye,we,De;if(we=i,De=i,n.charCodeAt(i)===86?(P="V",i++):(P=null,o('"V"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=ae(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;if(P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"verticalLineTo",args:[lt]}))}(we,P[2])),P===null&&(i=we),P===null){if(we=i,De=i,n.charCodeAt(i)===118?(P="v",i++):(P=null,o('"v"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=ae(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"verticalLineToRelative",args:[lt]}))}(we,P[2])),P===null&&(i=we)}return P}function ae(){let P,fe,ye,we,De;return we=i,De=i,P=Et(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=ae(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt].concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=Et(),P!==null&&(P=function(yt,tt){return[tt]}(we,P)),P===null&&(i=we)),P}function pe(){let P,fe,ye,we,De;if(we=i,De=i,n.charCodeAt(i)===67?(P="C",i++):(P=null,o('"C"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=N(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;if(P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"cubicCurveTo",args:lt}))}(we,P[2])),P===null&&(i=we),P===null){if(we=i,De=i,n.charCodeAt(i)===99?(P="c",i++):(P=null,o('"c"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=N(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"cubicCurveToRelative",args:lt}))}(we,P[2])),P===null&&(i=we)}return P}function N(){let P,fe,ye,we,De;return we=i,De=i,P=Ie(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=N(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt].concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=Ie(),P!==null&&(P=function(yt,tt){return[tt]}(we,P)),P===null&&(i=we)),P}function Ie(){let P,fe,ye,we,De,yt,tt;return yt=i,tt=i,P=Re(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=Re(),ye!==null?(we=Ht(),we=we!==null?we:"",we!==null?(De=Re(),De!==null?P=[P,fe,ye,we,De]:(P=null,i=tt)):(P=null,i=tt)):(P=null,i=tt)):(P=null,i=tt)):(P=null,i=tt),P!==null&&(P=function(lt,Kn,Jt,a){return[Kn.x,Kn.y,Jt.x,Jt.y,a.x,a.y]}(yt,P[0],P[2],P[4])),P===null&&(i=yt),P}function $e(){let P,fe,ye,we,De;if(we=i,De=i,n.charCodeAt(i)===83?(P="S",i++):(P=null,o('"S"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=Ee(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;if(P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"smoothCubicCurveTo",args:lt}))}(we,P[2])),P===null&&(i=we),P===null){if(we=i,De=i,n.charCodeAt(i)===115?(P="s",i++):(P=null,o('"s"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=Ee(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"smoothCubicCurveToRelative",args:lt}))}(we,P[2])),P===null&&(i=we)}return P}function Ee(){let P,fe,ye,we,De;return we=i,De=i,P=Je(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=Ee(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt].concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=Je(),P!==null&&(P=function(yt,tt){return[tt]}(we,P)),P===null&&(i=we)),P}function Je(){let P,fe,ye,we,De;return we=i,De=i,P=Re(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=Re(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt.x,tt.y,lt.x,lt.y]}(we,P[0],P[2])),P===null&&(i=we),P}function Ge(){let P,fe,ye,we,De;if(we=i,De=i,n.charCodeAt(i)===81?(P="Q",i++):(P=null,o('"Q"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=_t(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;if(P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"quadraticCurveTo",args:lt}))}(we,P[2])),P===null&&(i=we),P===null){if(we=i,De=i,n.charCodeAt(i)===113?(P="q",i++):(P=null,o('"q"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=_t(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"quadraticCurveToRelative",args:lt}))}(we,P[2])),P===null&&(i=we)}return P}function _t(){let P,fe,ye,we,De;return we=i,De=i,P=it(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=_t(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt].concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=it(),P!==null&&(P=function(yt,tt){return[tt]}(we,P)),P===null&&(i=we)),P}function it(){let P,fe,ye,we,De;return we=i,De=i,P=Re(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=Re(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt.x,tt.y,lt.x,lt.y]}(we,P[0],P[2])),P===null&&(i=we),P}function nt(){let P,fe,ye,we,De;if(we=i,De=i,n.charCodeAt(i)===84?(P="T",i++):(P=null,o('"T"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=Ct(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;if(P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"smoothQuadraticCurveTo",args:[lt.x,lt.y]}))}(we,P[2])),P===null&&(i=we),P===null){if(we=i,De=i,n.charCodeAt(i)===116?(P="t",i++):(P=null,o('"t"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=Ct(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;P!==null&&(P=function(yt,tt){return tt.map(lt=>({cmd:"smoothQuadraticCurveToRelative",args:[lt.x,lt.y]}))}(we,P[2])),P===null&&(i=we)}return P}function Ct(){let P,fe,ye,we,De;return we=i,De=i,P=Re(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=Ct(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt].concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=Re(),P!==null&&(P=function(yt,tt){return[tt]}(we,P)),P===null&&(i=we)),P}function Qe(){let P,fe,ye,we,De;if(we=i,De=i,n.charCodeAt(i)===65?(P="A",i++):(P=null,o('"A"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=Zt(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;if(P!==null&&(P=function(yt,tt){return tt.map(lt=>(lt[2]*=Math.PI/180,{cmd:"ellipticalArcTo",args:lt}))}(we,P[2])),P===null&&(i=we),P===null){if(we=i,De=i,n.charCodeAt(i)===97?(P="a",i++):(P=null,o('"a"')),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?(ye=Zt(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)}else P=null,i=De;P!==null&&(P=function(yt,tt){return tt.map(lt=>(lt[2]*=Math.PI/180,{cmd:"ellipticalArcToRelative",args:lt}))}(we,P[2])),P===null&&(i=we)}return P}function Zt(){let P,fe,ye,we,De;return we=i,De=i,P=At(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=Zt(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return[tt].concat(lt)}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,P=At(),P!==null&&(P=function(yt,tt){return[tt]}(we,P)),P===null&&(i=we)),P}function At(){let P,fe,ye,we,De,yt,tt,lt,Kn,Jt,a,h,f;return h=i,f=i,P=at(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=at(),ye!==null?(we=Ht(),we=we!==null?we:"",we!==null?(De=Et(),De!==null?(yt=Ht(),yt!==null?(tt=Nt(),tt!==null?(lt=Ht(),lt=lt!==null?lt:"",lt!==null?(Kn=Nt(),Kn!==null?(Jt=Ht(),Jt=Jt!==null?Jt:"",Jt!==null?(a=Re(),a!==null?P=[P,fe,ye,we,De,yt,tt,lt,Kn,Jt,a]:(P=null,i=f)):(P=null,i=f)):(P=null,i=f)):(P=null,i=f)):(P=null,i=f)):(P=null,i=f)):(P=null,i=f)):(P=null,i=f)):(P=null,i=f)):(P=null,i=f)):(P=null,i=f),P!==null&&(P=function(_,b,w,I,D,k,B){return[b,w,I,D,k,B.x,B.y]}(h,P[0],P[2],P[4],P[6],P[8],P[10])),P===null&&(i=h),P}function Re(){let P,fe,ye,we,De;return we=i,De=i,P=Et(),P!==null?(fe=Ht(),fe=fe!==null?fe:"",fe!==null?(ye=Et(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return{x:tt,y:lt}}(we,P[0],P[2])),P===null&&(i=we),P}function at(){let P,fe;return fe=i,P=hi(),P!==null&&(P=function(ye,we){return parseFloat(we)}(fe,P)),P===null&&(i=fe),P===null&&(fe=i,P=ai(),P!==null&&(P=function(ye,we){return Number(we)}(fe,P)),P===null&&(i=fe)),P}function Et(){let P,fe,ye,we;return ye=i,we=i,P=bs(),P=P!==null?P:"",P!==null?(fe=hi(),fe!==null?P=[P,fe]:(P=null,i=we)):(P=null,i=we),P!==null&&(P=function(De,yt,tt){return parseFloat(yt+tt)}(ye,P[0],P[1])),P===null&&(i=ye),P===null&&(ye=i,we=i,P=bs(),P=P!==null?P:"",P!==null?(fe=ai(),fe!==null?P=[P,fe]:(P=null,i=we)):(P=null,i=we),P!==null&&(P=function(De,yt,tt){return Number(yt+tt)}(ye,P[0],P[1])),P===null&&(i=ye)),P}function Nt(){let P,fe;return fe=i,n.charCodeAt(i)===48?(P="0",i++):(P=null,o('"0"')),P!==null&&(P=function(ye){return!1}()),P===null&&(i=fe),P===null&&(fe=i,n.charCodeAt(i)===49?(P="1",i++):(P=null,o('"1"')),P!==null&&(P=function(ye){return!0}()),P===null&&(i=fe)),P}function Ht(){let P,fe,ye,we,De;if(De=i,fe=Pt(),fe!==null)for(P=[];fe!==null;)P.push(fe),fe=Pt();else P=null;if(P!==null)if(fe=cs(),fe=fe!==null?fe:"",fe!==null){for(ye=[],we=Pt();we!==null;)ye.push(we),we=Pt();ye!==null?P=[P,fe,ye]:(P=null,i=De)}else P=null,i=De;else P=null,i=De;if(P===null)if(De=i,P=cs(),P!==null){for(fe=[],ye=Pt();ye!==null;)fe.push(ye),ye=Pt();fe!==null?P=[P,fe]:(P=null,i=De)}else P=null,i=De;return P}function cs(){let P;return n.charCodeAt(i)===44?(P=",",i++):(P=null,o('","')),P}function hi(){let P,fe,ye,we;return ye=i,we=i,P=zs(),P!==null?(fe=Ji(),fe=fe!==null?fe:"",fe!==null?P=[P,fe]:(P=null,i=we)):(P=null,i=we),P!==null&&(P=function(De,yt,tt){return yt+tt}(ye,P[0],P[1])),P===null&&(i=ye),P===null&&(ye=i,we=i,P=ai(),P!==null?(fe=Ji(),fe!==null?P=[P,fe]:(P=null,i=we)):(P=null,i=we),P!==null&&(P=function(De,yt,tt){return yt+tt}(ye,P[0],P[1])),P===null&&(i=ye)),P}function zs(){let P,fe,ye,we,De;return we=i,De=i,P=ai(),P=P!==null?P:"",P!==null?(n.charCodeAt(i)===46?(fe=".",i++):(fe=null,o('"."')),fe!==null?(ye=ai(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt){return tt+"."+lt}(we,P[0],P[2])),P===null&&(i=we),P===null&&(we=i,De=i,P=ai(),P!==null?(n.charCodeAt(i)===46?(fe=".",i++):(fe=null,o('"."')),fe!==null?P=[P,fe]:(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt){return tt}(we,P[0])),P===null&&(i=we)),P}function Ji(){let P,fe,ye,we,De;return we=i,De=i,n.charCodeAt(i)===101?(P="e",i++):(P=null,o('"e"')),P===null&&(n.charCodeAt(i)===69?(P="E",i++):(P=null,o('"E"'))),P!==null?(fe=bs(),fe=fe!==null?fe:"",fe!==null?(ye=ai(),ye!==null?P=[P,fe,ye]:(P=null,i=De)):(P=null,i=De)):(P=null,i=De),P!==null&&(P=function(yt,tt,lt,Kn){return tt+lt+Kn}(we,P[0],P[1],P[2])),P===null&&(i=we),P}function bs(){let P;return n.charCodeAt(i)===43?(P="+",i++):(P=null,o('"+"')),P===null&&(n.charCodeAt(i)===45?(P="-",i++):(P=null,o('"-"'))),P}function ai(){let P,fe,ye,we;return ye=i,we=i,P=Ei(),P!==null?(fe=ai(),fe!==null?P=[P,fe]:(P=null,i=we)):(P=null,i=we),P!==null&&(P=function(De,yt,tt){return yt+tt}(ye,P[0],P[1])),P===null&&(i=ye),P===null&&(P=Ei()),P}function Ei(){let P;return/^[0-9]/.test(n.charAt(i))?(P=n.charAt(i),i++):(P=null,o("[0-9]")),P}function Pt(){let P;return n.charCodeAt(i)===32?(P=" ",i++):(P=null,o('" "')),P===null&&(n.charCodeAt(i)===9?(P="	",i++):(P=null,o('"\\t"')),P===null&&(n.charCodeAt(i)===13?(P="\r",i++):(P=null,o('"\\r"')),P===null&&(n.charCodeAt(i)===10?(P=`
`,i++):(P=null,o('"\\n"'))))),P}function Hn(P){P.sort();let fe=null;const ye=[];for(let we=0;we<P.length;we++)P[we]!==fe&&(ye.push(P[we]),fe=P[we]);return ye}function Zs(){let P=1,fe=1,ye=!1;for(let we=0;we<Math.max(i,s);we++){const De=n.charAt(we);De===`
`?(ye||P++,fe=1,ye=!1):De==="\r"||De==="\u2028"||De==="\u2029"?(P++,fe=1,ye=!0):(fe++,ye=!1)}return{line:P,column:fe}}function ns(P,fe){const ye=[{cmd:fe?"moveToRelative":"moveTo",args:[P[0].x,P[0].y]}];if(P.length>1)for(let we=1;we<P.length;we++)ye.push({cmd:fe?"lineToRelative":"lineTo",args:[P[we].x,P[we].y]});return ye}const on=t[e]();if(on===null||i!==n.length){const P=Math.max(i,s),fe=P<n.length?n.charAt(P):null,ye=Zs();throw new this.SyntaxError(Hn(r),fe,P,ye.line,ye.column)}return on},toSource:function(){return this._source}};z0.SyntaxError=function(n,e,t,i,s){function r(o,d){let g,y;switch(o.length){case 0:g="end of input";break;case 1:g=o[0];break;default:g=o.slice(0,o.length-1).join(", ")+" or "+o[o.length-1]}return y=d?f1(d):"end of input","Expected "+g+" but "+y+" found."}this.name="SyntaxError",this.expected=n,this.found=e,this.message=r(n,e),this.offset=t,this.line=i,this.column=s};z0.SyntaxError.prototype=Error.prototype;ip.register("svgPath",z0);const ok=ip.svgPath;let lk=0;class Yl{constructor(e){this.id=++lk,this.halfEdges=[],this.signedArea=0,this.bounds=ot.NOTHING,this.childBoundaries=[],this.initialize(e)}initialize(e){return this.halfEdges=e,this.signedArea=this.computeSignedArea(),this.bounds=this.computeBounds(),this.childBoundaries=bi(this.childBoundaries),this}serialize(){return{type:"Boundary",id:this.id,halfEdges:this.halfEdges.map(e=>e.id),signedArea:this.signedArea,bounds:ot.Bounds2IO.toStateObject(this.bounds),childBoundaries:this.childBoundaries.map(e=>e.id)}}dispose(){this.halfEdges=[],bi(this.childBoundaries),this.freeToPool()}isInner(){return this.signedArea>0}computeSignedArea(){let e=0;for(let t=0;t<this.halfEdges.length;t++)e+=this.halfEdges[t].signedAreaFragment;return e}computeBounds(){const e=ot.NOTHING.copy();for(let t=0;t<this.halfEdges.length;t++)e.includeBounds(this.halfEdges[t].edge.segment.getBounds());return e}computeExtremePoint(e){const t=[];for(let s=0;s<this.halfEdges.length;s++)t.push(this.halfEdges[s].edge.segment.transformed(e.getMatrix()));const i=ot.NOTHING.copy();for(let s=0;s<t.length;s++)i.includeBounds(t[s].getBounds());for(let s=0;s<t.length;s++){const r=t[s];if(r.getBounds().top===i.top){let o=new Ne(0,Number.POSITIVE_INFINITY);const d=[0,1].concat(r.getInteriorExtremaTs());for(let g=0;g<d.length;g++){const y=r.positionAt(d[g]);y.y<o.y&&(o=y)}return e.inversePosition2(o)}}throw new Error("Should not reach here if we have segments")}computeExtremeRay(e){const t=this.computeExtremePoint(e),i=e.inverseDelta2(new Ne(0,-1)).normalized();return new Ma(t.plus(i.timesScalar(1e-4)),i)}hasHalfEdge(e){for(let t=0;t<this.halfEdges.length;t++)if(this.halfEdges[t]===e)return!0;return!1}freeToPool(){Yl.pool.freeToPool(this)}}Yl.pool=new Fs(Yl,{initialize:Yl.prototype.initialize});let hk=0;class Wl{constructor(e,t){this.id=++hk,this.edge=null,this.face=null,this.isReversed=!1,this.signedAreaFragment=0,this.startVertex=null,this.endVertex=null,this.sortVector=new Ne(0,0),this.data=null,this.initialize(e,t)}initialize(e,t){return this.edge=e,this.face=null,this.isReversed=t,this.signedAreaFragment=e.signedAreaFragment*(t?-1:1),this.startVertex=null,this.endVertex=null,this.data=null,this.updateReferences(),this}serialize(){return{type:"HalfEdge",id:this.id,edge:this.edge.id,face:this.face===null?null:this.face.id,isReversed:this.isReversed,signedAreaFragment:this.signedAreaFragment,startVertex:this.startVertex===null?null:this.startVertex.id,endVertex:this.endVertex===null?null:this.endVertex.id,sortVector:Ne.Vector2IO.toStateObject(this.sortVector),data:this.data}}dispose(){this.edge=null,this.face=null,this.startVertex=null,this.endVertex=null,this.data=null,this.freeToPool()}getNext(e){for(let t=1;;t++){let i=this.endVertex.incidentHalfEdges.indexOf(this)-t;i<0&&(i+=this.endVertex.incidentHalfEdges.length);const s=this.endVertex.incidentHalfEdges[i].getReversed();if(!(e&&!e(s.edge)))return s}}updateReferences(){this.startVertex=this.isReversed?this.edge.endVertex:this.edge.startVertex,this.endVertex=this.isReversed?this.edge.startVertex:this.edge.endVertex}getEndTangent(){return this.isReversed?this.edge.segment.startTangent:this.edge.segment.endTangent.negated()}getEndCurvature(){return this.isReversed?-this.edge.segment.curvatureAt(0):this.edge.segment.curvatureAt(1)}getReversed(){return this.isReversed?this.edge.forwardHalf:this.edge.reversedHalf}getDirectionalSegment(){return this.isReversed?this.edge.segment.reversed():this.edge.segment}freeToPool(){Wl.pool.freeToPool(this)}}Wl.pool=new Fs(Wl,{initialize:Wl.prototype.initialize});let uk=0;class In{constructor(e,t,i){this.id=++uk,this.segment=null,this.startVertex=null,this.endVertex=null,this.signedAreaFragment=0,this.forwardHalf=null,this.reversedHalf=null,this.visited=!1,this.data=null,this.internalData=null,this.initialize(e,t,i)}initialize(e,t,i){return this.segment=e,this.startVertex=t,this.endVertex=i,this.signedAreaFragment=e.getSignedAreaFragment(),this.forwardHalf=Wl.pool.create(this,!1),this.reversedHalf=Wl.pool.create(this,!0),this.visited=!1,this.data=null,this.internalData={},this}serialize(){return{type:"Edge",id:this.id,segment:this.segment.serialize(),startVertex:this.startVertex===null?null:this.startVertex.id,endVertex:this.endVertex===null?null:this.endVertex.id,signedAreaFragment:this.signedAreaFragment,forwardHalf:this.forwardHalf.serialize(),reversedHalf:this.reversedHalf.serialize(),visited:this.visited,data:this.data}}dispose(){this.segment=null,this.startVertex=null,this.endVertex=null,this.forwardHalf.dispose(),this.reversedHalf.dispose(),this.forwardHalf=null,this.reversedHalf=null,this.data=null,this.freeToPool()}getOtherVertex(e){return this.startVertex===e?this.endVertex:this.startVertex}updateReferences(){this.forwardHalf.updateReferences(),this.reversedHalf.updateReferences()}freeToPool(){In.pool.freeToPool(this)}}In.pool=new Fs(In,{initialize:In.prototype.initialize});ip.register("Edge",In);let ck=1;const QA=[];class p1{constructor(e=1e-6){this.rootNode=Gl.pool.create(this,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this.rootNode.isBlack=!0,this.epsilon=e,this.items=new Set}query(e,t){const i=ck++;return this.rootNode?this.rootNode.query(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon),i,t):!1}addItem(e){const t=this.getMinX(e,this.epsilon),i=this.getMaxX(e,this.epsilon);this.rootNode.split(t,this),this.rootNode.split(i,this),this.rootNode.addItem(e,t,i),this.items.add(e)}removeItem(e){this.rootNode.removeItem(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon)),this.items.delete(e)}audit(){this.rootNode.audit(this.epsilon,this.items,[])}toString(){let e=0,t="";return function i(s){t+=`${he.repeat("  ",e)}${s.toString()}
`,e++,s.hasChildren()&&(i(s.left),i(s.right)),e--}(this.rootNode),t}}class Gl{constructor(e,t,i){this.items=[],this.initialize(e,t,i)}initialize(e,t,i){return this.min=t,this.max=i,this.splitValue=null,this.left=null,this.right=null,this.parent=null,this.tree=e,this.isBlack=!1,bi(this.items),this}contains(e){return e>=this.min&&e<=this.max}hasChildren(){return this.splitValue!==null}query(e,t,i,s,r){var d,g;let o=!1;if(this.min<=i&&this.max>=t){for(let y=0;y<this.items.length;y++){const S=this.items[y];if((!((d=S.internalData)!=null&&d.segmentId)||((g=S.internalData)==null?void 0:g.segmentId)<s)&&(S.internalData.segmentId=s,o=r(S),o))return!0}this.hasChildren()&&(o||(o=this.left.query(e,t,i,s,r)),o||(o=this.right.query(e,t,i,s,r)))}return o}swapChild(e,t){this.left===e?this.left=t:this.right=t}hasChild(e){return this.left===e||this.right===e}otherChild(e){return this.left===e?this.right:this.left}leftRotate(e){if(this.right.hasChildren()){const t=this.right,i=this.left,s=t.left,r=t.right;t.parent=this.parent,this.parent?this.parent.swapChild(this,t):e.rootNode=t,this.parent=t,s.parent=this,t.left=this,this.left=i,this.right=s,this.max=s.max,this.splitValue=i.max,t.min=this.min,t.splitValue=this.max;const o=bi(QA);o.push(...this.items),bi(this.items);for(let d=i.items.length-1;d>=0;d--){const g=i.items[d],y=s.items.indexOf(g);y>=0&&(i.items.splice(d,1),s.items.splice(y,1),this.items.push(g))}s.items.push(...t.items),r.items.push(...t.items),bi(t.items),t.items.push(...o)}}rightRotate(e){const t=this.left,i=this.right,s=t.left,r=t.right;t.parent=this.parent,this.parent?this.parent.swapChild(this,t):e.rootNode=t,this.parent=t,r.parent=this,t.right=this,this.left=r,this.right=i,this.min=r.min,this.splitValue=i.min,t.max=this.max,t.splitValue=this.min;const o=bi(QA);o.push(...this.items),bi(this.items);for(let d=i.items.length-1;d>=0;d--){const g=i.items[d],y=r.items.indexOf(g);y>=0&&(i.items.splice(d,1),r.items.splice(y,1),this.items.push(g))}s.items.push(...t.items),r.items.push(...t.items),bi(t.items),t.items.push(...o)}fixRedBlack(e){if(!this.parent)this.isBlack=!0;else{const t=this.parent;if(!t.isBlack){const i=t.parent,s=i.otherChild(t);s.isBlack?t===i.left?this===t.right?(t.leftRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.rightRotate(e)):(t.isBlack=!0,i.isBlack=!1,i.rightRotate(e)):this===t.left?(t.rightRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.leftRotate(e)):(t.isBlack=!0,i.isBlack=!1,i.leftRotate(e)):(t.isBlack=!0,s.isBlack=!0,i.isBlack=!1,i.fixRedBlack(e))}}}split(e,t){if(!(e===this.min||e===this.max))if(this.hasChildren())this.splitValue!==e&&(e>this.splitValue?this.right:this.left).split(e,t);else{this.splitValue=e;const i=Gl.pool.create(this.tree,this.min,e);i.parent=this,this.left=i;const s=Gl.pool.create(this.tree,e,this.max);if(s.parent=this,this.right=s,!this.isBlack&&this.parent){const r=this.parent,o=r.otherChild(this);o.isBlack?(this===r.left?(r.rightRotate(t),i.isBlack=!0):(r.leftRotate(t),s.isBlack=!0),this.fixRedBlack(t)):(this.isBlack=!0,o.isBlack=!0,r.isBlack=!1,r.fixRedBlack(t))}}}addItem(e,t,i){this.min>i||this.max<t||(this.min>=t&&this.max<=i?this.items.push(e):this.hasChildren()&&(this.left.addItem(e,t,i),this.right.addItem(e,t,i)))}removeItem(e,t,i){this.min>i||this.max<t||(this.min>=t&&this.max<=i?mn(this.items,e):this.hasChildren()&&(this.left.removeItem(e,t,i),this.right.removeItem(e,t,i)))}audit(e,t,i=[]){}toString(){return`[${this.min} ${this.max}] split:${this.splitValue} ${this.isBlack?"black":"red"} ${this.items}`}freeToPool(){Gl.pool.freeToPool(this)}}Gl.pool=new Fs(Gl);class ZA extends p1{getMinX(e,t){return e.segment.bounds.left-t}getMaxX(e,t){return e.segment.bounds.right+t}}let dk=0;class _l{constructor(e){this.id=++dk,this.boundary=null,this.holes=[],this.windingMap=null,this.filled=null,this.initialize(e)}initialize(e){return this.boundary=e,bi(this.holes),this.windingMap=null,this.filled=null,e&&this.addBoundaryFaceReferences(e),this}serialize(){return{type:"Face",id:this.id,boundary:this.boundary===null?null:this.boundary.id,holes:this.holes.map(e=>e.id),windingMap:this.windingMap,filled:this.filled}}dispose(){this.boundary=null,bi(this.holes),this.windingMap=null,this.filled=null,this.freeToPool()}addBoundaryFaceReferences(e){for(let t=0;t<e.halfEdges.length;t++)e.halfEdges[t].face=this}recursivelyAddHoles(e){this.holes.push(e),this.addBoundaryFaceReferences(e);for(let t=0;t<e.childBoundaries.length;t++)this.recursivelyAddHoles(e.childBoundaries[t])}freeToPool(){_l.pool.freeToPool(this)}}_l.pool=new Fs(_l,{initialize:_l.prototype.initialize});let fk=0;class Xl{constructor(e,t){this.id=++fk,this.shapeId=0,this.closed=!1,this.halfEdges=[],this.initialize(e,t)}initialize(e,t){return this.shapeId=e,this.closed=t,bi(this.halfEdges),this}serialize(){return{type:"Loop",id:this.id,shapeId:this.shapeId,closed:this.closed,halfEdges:this.halfEdges.map(e=>e.id)}}dispose(){bi(this.halfEdges),this.freeToPool()}freeToPool(){Xl.pool.freeToPool(this)}}Xl.pool=new Fs(Xl,{initialize:Xl.prototype.initialize});let pk=0;class cr{constructor(e){this.id=++pk,this.point=Ne.ZERO,this.incidentHalfEdges=[],this.visited=!1,this.visitIndex=0,this.lowIndex=0,this.data=null,this.internalData=null,this.initialize(e)}initialize(e){return this.point=e,bi(this.incidentHalfEdges),this.visited=!1,this.visitIndex=0,this.lowIndex=0,this.data=null,this.internalData={},this}serialize(){return{type:"Vertex",id:this.id,point:Ne.Vector2IO.toStateObject(this.point),incidentHalfEdges:this.incidentHalfEdges.map(e=>e.id),visited:this.visited,visitIndex:this.visitIndex,lowIndex:this.lowIndex}}dispose(){this.point=Ne.ZERO,bi(this.incidentHalfEdges),this.freeToPool()}sortEdges(){const e=[];for(let s=0;s<this.incidentHalfEdges.length;s++){const r=this.incidentHalfEdges[s];e.push(r.sortVector.setXY(r.getEndTangent().angle,r.getEndCurvature()))}const t=-Math.PI+1e-4;let i=!1;for(;!i;){i=!0;for(let s=0;s<e.length;s++)e[s].x<t&&(i=!1);if(!i)for(let s=0;s<e.length;s++){const r=e[s];r.x-=1.62594024516,r.x<-Math.PI-1e-4&&(r.x+=Math.PI*2)}}this.incidentHalfEdges.sort(cr.edgeComparison)}static edgeComparison(e,t){const i=e.sortVector.x,s=t.sortVector.x;if(Math.abs(i-s)>1e-5||i!==s&&e.edge.segment instanceof Pi&&t.edge.segment instanceof Pi)return i<s?-1:1;{const r=e.sortVector.y,o=t.sortVector.y;if(Math.abs(r-o)>1e-5)return r<o?1:-1;{const g=e.getDirectionalSegment().subdivided(.999)[1].curvatureAt(0),y=t.getDirectionalSegment().subdivided(.999)[1].curvatureAt(0);return g<y?1:-1}}}freeToPool(){cr.pool.freeToPool(this)}}cr.pool=new Fs(cr,{initialize:cr.prototype.initialize});class gk extends p1{getMinX(e,t){return e.point.x-t}getMaxX(e,t){return e.point.x+t}}const Od=Math.random,Ls=(n,e)=>new Ne(n,e),JA=(n,e,t,i)=>t.copy().subtract(n).multiplyScalar((1-i)/6).add(e);class Wt{constructor(e,t){if(this.subpaths=[],this._invalidatingPoints=!1,this._immutable=!1,this.invalidatedEmitter=new Hi,this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=null,this._bounds=t?t.copy():null,this.resetControlPoints(),this._invalidateListener=this.invalidate.bind(this),typeof e=="object")for(let i=0;i<e.length;i++)this.addSubpath(e[i]);e&&typeof e!="object"&&he.each(ok.parse(e),i=>{this[i.cmd].apply(this,i.args)}),this.invalidate()}resetControlPoints(){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=null}setQuadraticControlPoint(e){this.lastQuadraticControlPoint=e,this.lastCubicControlPoint=null}setCubicControlPoint(e){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=e}moveTo(e,t){return this.moveToPoint(Ls(e,t))}moveToRelative(e,t){return this.moveToPointRelative(Ls(e,t))}moveToPointRelative(e){return this.moveToPoint(this.getRelativePoint().plus(e))}moveToPoint(e){return this.addSubpath(new _s().addPoint(e)),this.resetControlPoints(),this}lineTo(e,t){return this.lineToPoint(Ls(e,t))}lineToRelative(e,t){return this.lineToPointRelative(Ls(e,t))}lineToPointRelative(e){return this.lineToPoint(this.getRelativePoint().plus(e))}lineToPoint(e){if(this.hasSubpaths()){const t=this.getLastSubpath().getLastPoint(),i=e,s=new Pi(t,i);this.getLastSubpath().addPoint(i),this.addSegmentAndBounds(s)}else this.ensure(e);return this.resetControlPoints(),this}horizontalLineTo(e){return this.lineTo(e,this.getRelativePoint().y)}horizontalLineToRelative(e){return this.lineToRelative(e,0)}verticalLineTo(e){return this.lineTo(this.getRelativePoint().x,e)}verticalLineToRelative(e){return this.lineToRelative(0,e)}zigZagTo(e,t,i,s,r){return this.zigZagToPoint(new Ne(e,t),i,s,r)}zigZagToPoint(e,t,i,s){this.ensure(e);const r=this.getLastPoint(),o=e.minus(r),d=o.normalized(),g=d.perpendicular.times(t);let y;s?y=o.magnitude/(i+.5):y=o.magnitude/i;for(let S=0;S<i;S++){const T=d.times(S*y).plus(r),L=T.plus(d.times(y/4)).plus(g),x=T.plus(d.times(3*y/4)).minus(g);this.lineToPoint(L),this.lineToPoint(x)}if(s){const T=d.times(i*y).plus(r).plus(d.times(y/4)).plus(g);this.lineToPoint(T)}return this.lineToPoint(e)}quadraticCurveTo(e,t,i,s){return this.quadraticCurveToPoint(Ls(e,t),Ls(i,s))}quadraticCurveToRelative(e,t,i,s){return this.quadraticCurveToPointRelative(Ls(e,t),Ls(i,s))}quadraticCurveToPointRelative(e,t){const i=this.getRelativePoint();return this.quadraticCurveToPoint(i.plus(e),i.plus(t))}smoothQuadraticCurveTo(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),Ls(e,t))}smoothQuadraticCurveToRelative(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),Ls(e,t).plus(this.getRelativePoint()))}quadraticCurveToPoint(e,t){this.ensure(e);const i=this.getLastSubpath().getLastPoint(),s=new gn(i,e,t);this.getLastSubpath().addPoint(t);const r=s.getNondegenerateSegments();return he.each(r,o=>{this.addSegmentAndBounds(o)}),this.setQuadraticControlPoint(e),this}cubicCurveTo(e,t,i,s,r,o){return this.cubicCurveToPoint(Ls(e,t),Ls(i,s),Ls(r,o))}cubicCurveToRelative(e,t,i,s,r,o){return this.cubicCurveToPointRelative(Ls(e,t),Ls(i,s),Ls(r,o))}cubicCurveToPointRelative(e,t,i){const s=this.getRelativePoint();return this.cubicCurveToPoint(s.plus(e),s.plus(t),s.plus(i))}smoothCubicCurveTo(e,t,i,s){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),Ls(e,t),Ls(i,s))}smoothCubicCurveToRelative(e,t,i,s){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),Ls(e,t).plus(this.getRelativePoint()),Ls(i,s).plus(this.getRelativePoint()))}cubicCurveToPoint(e,t,i){this.ensure(e);const s=this.getLastSubpath().getLastPoint(),o=new Fn(s,e,t,i).getNondegenerateSegments();return he.each(o,d=>{this.addSegmentAndBounds(d)}),this.getLastSubpath().addPoint(i),this.setCubicControlPoint(t),this}arc(e,t,i,s,r,o){return this.arcPoint(Ls(e,t),i,s,r,o)}arcPoint(e,t,i,s,r){r===void 0&&(r=!1);const o=new os(e,t,i,s,r),d=o.getStart(),g=o.getEnd();return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!d.equals(this.getLastSubpath().getLastPoint())&&this.addSegmentAndBounds(new Pi(this.getLastSubpath().getLastPoint(),d)),this.hasSubpaths()||this.addSubpath(new _s),this.getLastSubpath().addPoint(d),this.getLastSubpath().addPoint(g),this.addSegmentAndBounds(o),this.resetControlPoints(),this}ellipticalArc(e,t,i,s,r,o,d,g){return this.ellipticalArcPoint(Ls(e,t),i,s,r,o,d,g)}ellipticalArcPoint(e,t,i,s,r,o,d){d===void 0&&(d=!1);const g=new kn(e,t,i,s,r,o,d),y=g.start,S=g.end;return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!y.equals(this.getLastSubpath().getLastPoint())&&this.addSegmentAndBounds(new Pi(this.getLastSubpath().getLastPoint(),y)),this.hasSubpaths()||this.addSubpath(new _s),this.getLastSubpath().addPoint(y),this.getLastSubpath().addPoint(S),this.addSegmentAndBounds(g),this.resetControlPoints(),this}close(){if(this.hasSubpaths()){const e=this.getLastSubpath(),t=new _s;e.close(),this.addSubpath(t),t.addPoint(e.getFirstPoint())}return this.resetControlPoints(),this}newSubpath(){return this.addSubpath(new _s),this.resetControlPoints(),this}makeImmutable(){return this._immutable=!0,this.notifyInvalidationListeners(),this}isImmutable(){return this._immutable}ellipticalArcToRelative(e,t,i,s,r,o,d){const g=this.getRelativePoint();return this.ellipticalArcTo(e,t,i,s,r,o+g.x,d+g.y)}ellipticalArcTo(e,t,i,s,r,o,d){const g=new Ne(o,d);this.ensure(g);const y=this.getLastSubpath().getLastPoint();this.getLastSubpath().addPoint(g),e<0&&(e*=-1),t<0&&(t*=-1);let S=e*e,T=t*t;const L=y.minus(g).dividedScalar(2).rotated(-i),x=L.x*L.x,A=L.y*L.y;let Q=new Ne(e*L.y/t,-t*L.x/e);const z=x/S+A/T;z>1&&(e*=Math.sqrt(z),t*=Math.sqrt(z),S=e*e,T=t*t,Q=new Ne(e*L.y/t,-t*L.x/e)),Q.multiplyScalar(Math.sqrt(Math.max(0,(S*T-S*A-T*x)/(S*A+T*x)))),s===r&&Q.multiplyScalar(-1);const G=y.blend(g,.5).plus(Q.rotated(i)),re=(Ee,Je)=>(Ee.x*Je.y-Ee.y*Je.x>0?1:-1)*Ee.angleBetween(Je),ne=new Ne((L.x-Q.x)/e,(L.y-Q.y)/t),ae=new Ne((-L.x-Q.x)/e,(-L.y-Q.y)/t),pe=re(Ne.X_UNIT,ne);let N=re(ne,ae)%(Math.PI*2);!r&&N>0&&(N-=Math.PI*2),r&&N<0&&(N+=Math.PI*2);const $e=new kn(G,e,t,i,pe,pe+N,!r).getNondegenerateSegments();return he.each($e,Ee=>{this.addSegmentAndBounds(Ee)}),this}circle(e,t,i){if(typeof e=="object"){const s=e;return i=t,this.arcPoint(s,i,0,Math.PI*2,!1).close()}else return this.arcPoint(Ls(e,t),i,0,Math.PI*2,!1).close()}ellipse(e,t,i,s,r){if(typeof e=="object"){const o=e;return r=s,s=i,i=t,this.ellipticalArcPoint(o,i,s,r||0,0,Math.PI*2,!1).close()}else return this.ellipticalArcPoint(Ls(e,t),i,s,r||0,0,Math.PI*2,!1).close()}rect(e,t,i,s){const r=new _s;return this.addSubpath(r),r.addPoint(Ls(e,t)),r.addPoint(Ls(e+i,t)),r.addPoint(Ls(e+i,t+s)),r.addPoint(Ls(e,t+s)),this.addSegmentAndBounds(new Pi(r.points[0],r.points[1])),this.addSegmentAndBounds(new Pi(r.points[1],r.points[2])),this.addSegmentAndBounds(new Pi(r.points[2],r.points[3])),r.close(),this.addSubpath(new _s),this.getLastSubpath().addPoint(Ls(e,t)),this.resetControlPoints(),this}roundRect(e,t,i,s,r,o){const d=e+r,g=e+i-r,y=t+o,S=t+s-o;return r===o?this.arc(g,y,r,-Math.PI/2,0,!1).arc(g,S,r,0,Math.PI/2,!1).arc(d,S,r,Math.PI/2,Math.PI,!1).arc(d,y,r,Math.PI,Math.PI*3/2,!1).close():this.ellipticalArc(g,y,r,o,0,-Math.PI/2,0,!1).ellipticalArc(g,S,r,o,0,0,Math.PI/2,!1).ellipticalArc(d,S,r,o,0,Math.PI/2,Math.PI,!1).ellipticalArc(d,y,r,o,0,Math.PI,Math.PI*3/2,!1).close(),this}polygon(e){const t=e.length;if(t>0){this.moveToPoint(e[0]);for(let i=1;i<t;i++)this.lineToPoint(e[i])}return this.close()}cardinalSpline(e,t){const i=St()({tension:0,isClosedLineSegments:!1},t),s=e.length,r=i.isClosedLineSegments?s:s-1;for(let o=0;o<r;o++){let d;o===0&&!i.isClosedLineSegments?d=[e[0],e[0],e[1],e[2]]:o===r-1&&!i.isClosedLineSegments?d=[e[o-1],e[o],e[o+1],e[o+1]]:d=[e[(o-1+s)%s],e[o%s],e[(o+1)%s],e[(o+2)%s]];const g=[d[1],JA(d[0],d[1],d[2],i.tension),JA(d[3],d[2],d[1],i.tension),d[2]];o===0&&(this.ensure(g[0]),this.getLastSubpath().addPoint(g[0])),this.cubicCurveToPoint(g[1],g[2],g[3])}return this}copy(){return new Wt(he.map(this.subpaths,e=>e.copy()),this.bounds)}writeToContext(e){const t=this.subpaths.length;for(let i=0;i<t;i++)this.subpaths[i].writeToContext(e)}getSVGPath(){let e="";const t=this.subpaths.length;for(let i=0;i<t;i++){const s=this.subpaths[i];if(s.isDrawable()){const r=s.segments[0].start;e+=`M ${Xi(r.x)} ${Xi(r.y)} `;for(let o=0;o<s.segments.length;o++)e+=`${s.segments[o].getSVGPathFragment()} `;s.isClosed()&&(e+="Z ")}}return e}transformed(e){const t=he.map(this.subpaths,s=>s.transformed(e)),i=he.reduce(t,(s,r)=>s.union(r.bounds),ot.NOTHING);return new Wt(t,i)}nonlinearTransformed(e){const t=Qi({minLevels:0,maxLevels:7,distanceEpsilon:.16,curveEpsilon:e&&e.includeCurvature?.002:null},e),i=he.map(this.subpaths,r=>r.nonlinearTransformed(t)),s=he.reduce(i,(r,o)=>r.union(o.bounds),ot.NOTHING);return new Wt(i,s)}polarToCartesian(e){return this.nonlinearTransformed(Qi({pointMap:t=>Ne.createPolar(t.y,t.x),methodName:"polarToCartesian"},e))}toPiecewiseLinear(e){return this.nonlinearTransformed(e)}containsPoint(e){const t=Ne.X_UNIT.copy();let i=0;for(;i<5&&(i++,he.some(this.subpaths,r=>he.some(r.segments,o=>{const d=o.start.minus(e),g=d.magnitude;return g!==0?(d.divideScalar(g),d.subtract(t),d.magnitudeSquared<1e-9):!1})));)t.rotate(Fl.nextDouble());return this.windingIntersection(new Ma(e,t))!==0}intersection(e){let t=[];const i=this.subpaths.length;for(let s=0;s<i;s++){const r=this.subpaths[s];if(r.isDrawable()){const o=r.segments.length;for(let d=0;d<o;d++){const g=r.segments[d];t=t.concat(g.intersection(e))}r.hasClosingSegment()&&(t=t.concat(r.getClosingSegment().intersection(e)))}}return he.sortBy(t,s=>s.distance)}interiorIntersectsLineSegment(e,t){const i=e.blend(t,.5);if(this.containsPoint(i))return!0;const s=t.minus(e),r=s.magnitude;if(r===0)return!1;s.normalize();const o=this.intersection(new Ma(e,s));for(let d=0;d<o.length;d++)if(o[d].distance<=r)return!0;return!1}windingIntersection(e){let t=0;const i=this.subpaths.length;for(let s=0;s<i;s++){const r=this.subpaths[s];if(r.isDrawable()){const o=r.segments.length;for(let d=0;d<o;d++)t+=r.segments[d].windingIntersection(e);r.hasClosingSegment()&&(t+=r.getClosingSegment().windingIntersection(e))}}return t}intersectsBounds(e){if(this.bounds.intersection(e).equals(this.bounds))return!0;const t=new Ma(new Ne(e.minX,e.minY),new Ne(1,0)),i=new Ma(new Ne(e.minX,e.minY),new Ne(0,1)),s=new Ma(new Ne(e.maxX,e.maxY),new Ne(-1,0)),r=new Ma(new Ne(e.maxX,e.maxY),new Ne(0,-1));let o,d;const g=this.intersection(t).concat(this.intersection(s));for(d=0;d<g.length;d++)if(o=g[d].point,o.x>=e.minX&&o.x<=e.maxX)return!0;const y=this.intersection(i).concat(this.intersection(r));for(d=0;d<y.length;d++)if(o=y[d].point,o.y>=e.minY&&o.y<=e.maxY)return!0;return!1}getStrokedShape(e){let t=[];const i=ot.NOTHING.copy();let s=this.subpaths.length;for(let r=0;r<s;r++){const d=this.subpaths[r].stroked(e);t=t.concat(d)}s=t.length;for(let r=0;r<s;r++)i.includeBounds(t[r].bounds);return new Wt(t,i)}getOffsetShape(e){const t=[],i=ot.NOTHING.copy();let s=this.subpaths.length;for(let r=0;r<s;r++)t.push(this.subpaths[r].offset(e));s=t.length;for(let r=0;r<s;r++)i.includeBounds(t[r].bounds);return new Wt(t,i)}getDashedShape(e,t,i){const s=St()({distanceEpsilon:1e-10,curveEpsilon:1e-8},i);return new Wt(he.flatten(this.subpaths.map(r=>r.dashed(e,t,s.distanceEpsilon,s.curveEpsilon))))}getBounds(){if(this._bounds===null){const e=ot.NOTHING.copy();he.each(this.subpaths,t=>{e.includeBounds(t.getBounds())}),this._bounds=e}return this._bounds}get bounds(){return this.getBounds()}getStrokedBounds(e){let t=!0;for(let i=0;i<this.subpaths.length;i++){const s=this.subpaths[i];if(s.isDrawable()&&!s.isClosed()){t=!1;break}for(let r=0;r<s.segments.length;r++)if(!s.segments[r].areStrokedBoundsDilated()){t=!1;break}}if(t)return this.bounds.dilated(e.lineWidth/2);{const i=this.bounds.copy();for(let s=0;s<this.subpaths.length;s++){const r=this.subpaths[s].stroked(e);for(let o=0;o<r.length;o++)i.includeBounds(r[o].bounds)}return i}}getSimplifiedAreaShape(){return Ys.simplifyNonZero(this)}getBoundsWithTransform(e,t){const i=ot.NOTHING.copy(),s=this.subpaths.length;for(let r=0;r<s;r++){const o=this.subpaths[r];i.includeBounds(o.getBoundsWithTransform(e))}return t&&i.includeBounds(this.getStrokedShape(t).getBoundsWithTransform(e)),i}getApproximateArea(e){const t=this.bounds.minX,i=this.bounds.minY,s=this.bounds.width,r=this.bounds.height,o=s*r;let d=0;const g=new Ne(0,0);for(let y=0;y<e;y++)g.x=t+Od()*s,g.y=i+Od()*r,this.containsPoint(g)&&d++;return o*d/e}getNonoverlappingArea(){return Math.abs(he.sum(this.subpaths.map(e=>he.sum(e.getFillSegments().map(t=>t.getSignedAreaFragment())))))}getArea(){return this.getSimplifiedAreaShape().getNonoverlappingArea()}getApproximateCentroid(e){const t=this.bounds.minX,i=this.bounds.minY,s=this.bounds.width,r=this.bounds.height;let o=0;const d=new Ne(0,0),g=new Ne(0,0);for(let y=0;y<e;y++)g.x=t+Od()*s,g.y=i+Od()*r,this.containsPoint(g)&&(d.add(g),o++);return d.dividedScalar(o)}getClosestPoints(e){return wn.filterClosestToPointResult(he.flatten(this.subpaths.map(t=>t.getClosestPoints(e))))}getClosestPoint(e){return this.getClosestPoints(e)[0].closestPoint}invalidatePoints(){this._invalidatingPoints=!0;const e=this.subpaths.length;for(let t=0;t<e;t++)this.subpaths[t].invalidatePoints();this._invalidatingPoints=!1,this.invalidate()}toString(){return`new phet.kite.Shape( '${this.getSVGPath().trim()}' )`}invalidate(){this._invalidatingPoints||(this._bounds=null,this.notifyInvalidationListeners())}notifyInvalidationListeners(){this.invalidatedEmitter.emit()}addSegmentAndBounds(e){this.getLastSubpath().addSegment(e),this.invalidate()}ensure(e){this.hasSubpaths()||(this.addSubpath(new _s),this.getLastSubpath().addPoint(e))}addSubpath(e){return this.subpaths.push(e),e.invalidatedEmitter.addListener(this._invalidateListener),this.invalidate(),this}hasSubpaths(){return this.subpaths.length>0}getLastSubpath(){return he.last(this.subpaths)}getLastPoint(){return this.getLastSubpath().getLastPoint()}getLastSegment(){if(!this.hasSubpaths())return null;const e=this.getLastSubpath();return e.isDrawable()?e.getLastSegment():null}getSmoothQuadraticControlPoint(){const e=this.getLastPoint();return this.lastQuadraticControlPoint?e.plus(e.minus(this.lastQuadraticControlPoint)):e}getSmoothCubicControlPoint(){const e=this.getLastPoint();return this.lastCubicControlPoint?e.plus(e.minus(this.lastCubicControlPoint)):e}getRelativePoint(){let e=Ne.ZERO;if(this.hasSubpaths()){const t=this.getLastSubpath();t.points.length&&(e=t.getLastPoint())}return e}shapeUnion(e){return Ys.binaryResult(this,e,Ys.BINARY_NONZERO_UNION)}shapeIntersection(e){return Ys.binaryResult(this,e,Ys.BINARY_NONZERO_INTERSECTION)}shapeDifference(e){return Ys.binaryResult(this,e,Ys.BINARY_NONZERO_DIFFERENCE)}shapeXor(e){return Ys.binaryResult(this,e,Ys.BINARY_NONZERO_XOR)}shapeClip(e,t){return Ys.clipShape(e,this,t)}getArcLength(e,t,i){let s=0;for(let r=0;r<this.subpaths.length;r++)s+=this.subpaths[r].getArcLength(e,t,i);return s}serialize(){return{type:"Shape",subpaths:this.subpaths.map(e=>e.serialize())}}static deserialize(e){return new Wt(e.subpaths.map(_s.deserialize))}static rectangle(e,t,i,s){return new Wt().rect(e,t,i,s)}static roundRect(e,t,i,s,r,o){return new Wt().roundRect(e,t,i,s,r,o)}static roundedRectangleWithRadii(e,t,i,s,r){let o=r&&r.topLeft||0,d=r&&r.topRight||0,g=r&&r.bottomLeft||0,y=r&&r.bottomRight||0;const S=o+d;S>i&&S>0&&(o=o/S*i,d=d/S*i);const T=g+y;T>i&&T>0&&(g=g/T*i,y=y/T*i);const L=o+g;L>s&&L>0&&(o=o/L*s,g=g/L*s);const x=d+y;x>s&&x>0&&(d=d/x*s,y=y/x*s);const A=new Wt,Q=e+i,z=t+s;return y>0?A.arc(Q-y,z-y,y,0,Math.PI/2,!1):A.moveTo(Q,z),g>0?A.arc(e+g,z-g,g,Math.PI/2,Math.PI,!1):A.lineTo(e,z),o>0?A.arc(e+o,t+o,o,Math.PI,3*Math.PI/2,!1):A.lineTo(e,t),d>0?A.arc(Q-d,t+d,d,3*Math.PI/2,2*Math.PI,!1):A.lineTo(Q,t),A.close(),A}static boundsOffsetWithRadii(e,t,i){const s=e.withOffsets(t.left,t.top,t.right,t.bottom);return Wt.roundedRectangleWithRadii(s.minX,s.minY,s.width,s.height,i)}static polygon(e){return new Wt().polygon(e)}static bounds(e){return new Wt().rect(e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY)}static lineSegment(e,t,i,s){return typeof e=="number"?new Wt().moveTo(e,t).lineTo(i,s):new Wt().moveToPoint(e).lineToPoint(t)}static regularPolygon(e,t){const i=new Wt;return he.each(he.range(e),s=>{const r=Ne.createPolar(t,2*Math.PI*s/e);s===0?i.moveToPoint(r):i.lineToPoint(r)}),i.close()}static circle(e,t,i){return t===void 0?new Wt().circle(0,0,e):new Wt().circle(e,t,i)}static ellipse(e,t,i,s,r){return s===void 0?new Wt().ellipse(0,0,e,t,i):new Wt().ellipse(e,t,i,s,r)}static arc(e,t,i,s,r,o){return new Wt().arc(e,t,i,s,r,o)}static union(e){return Ys.unionNonZero(e)}static intersection(e){return Ys.intersectionNonZero(e)}static xor(e){return Ys.xorNonZero(e)}static segments(e,t){return new Wt([new _s(e,void 0,!!t)])}static fromGraph(e){const t=[];for(let i=0;i<e.faces.length;i++){const s=e.faces[i];if(s.filled){t.push(_s.fromBoundary(s.boundary));for(let r=0;r<s.holes.length;r++)t.push(_s.fromBoundary(s.holes[r]))}}return new Wt(t)}static fromSegment(e){return new Wt([new _s([e])])}}Wt.rect=Wt.rectangle;Wt.roundRectangle=Wt.roundRect;let mk=0,Hg=0;const cf=1e-5,$A=.1*cf,eb=.01*cf,qd=1e-6;class Ys{constructor(){this.vertices=[],this.edges=[],this.innerBoundaries=[],this.outerBoundaries=[],this.boundaries=[],this.shapeIds=[],this.loops=[],this.unboundedFace=_l.pool.create(null),this.faces=[this.unboundedFace]}serialize(){return{type:"Graph",vertices:this.vertices.map(e=>e.serialize()),edges:this.edges.map(e=>e.serialize()),boundaries:this.boundaries.map(e=>e.serialize()),innerBoundaries:this.innerBoundaries.map(e=>e.id),outerBoundaries:this.outerBoundaries.map(e=>e.id),shapeIds:this.shapeIds,loops:this.loops.map(e=>e.serialize()),unboundedFace:this.unboundedFace.id,faces:this.faces.map(e=>e.serialize())}}static deserialize(e){const t=new Ys,i={},s={},r={},o={},d={},g={};return t.vertices=e.vertices.map(y=>{const S=new cr(Ne.Vector2IO.fromStateObject(y.point));return i[y.id]=S,S.visited=y.visited,S.visitIndex=y.visitIndex,S.lowIndex=y.lowIndex,S}),t.edges=e.edges.map(y=>{const S=new In(wn.deserialize(y.segment),i[y.startVertex],i[y.endVertex]);s[y.id]=S,S.signedAreaFragment=y.signedAreaFragment;const T=(L,x)=>{r[x.id]=L,L.isReversed=x.isReversed,L.signedAreaFragment=x.signedAreaFragment,L.startVertex=i[x.startVertex.id],L.endVertex=i[x.endVertex.id],L.sortVector=Ne.Vector2IO.fromStateObject(x.sortVector),L.data=x.data};return T(S.forwardHalf,y.forwardHalf),T(S.reversedHalf,y.reversedHalf),S.visited=y.visited,S.data=y.data,S}),e.vertices.forEach((y,S)=>{const T=t.vertices[S];T.incidentHalfEdges=y.incidentHalfEdges.map(L=>r[L])}),t.boundaries=e.boundaries.map(y=>{const S=Yl.pool.create(y.halfEdges.map(T=>r[T]));return o[y.id]=S,S.signedArea=y.signedArea,S.bounds=ot.Bounds2IO.fromStateObject(y.bounds),S}),e.boundaries.forEach((y,S)=>{const T=t.boundaries[S];T.childBoundaries=y.childBoundaries.map(L=>o[L])}),t.innerBoundaries=e.innerBoundaries.map(y=>o[y]),t.outerBoundaries=e.outerBoundaries.map(y=>o[y]),t.shapeIds=e.shapeIds,t.loops=e.loops.map(y=>{const S=new Xl(y.shapeId,y.closed);return d[y.id]=S,S.halfEdges=y.halfEdges.map(T=>r[T]),S}),t.faces=e.faces.map((y,S)=>{const T=S===0?t.unboundedFace:new _l(o[y.boundary]);return g[y.id]=T,T.holes=y.holes.map(L=>o[L]),T.windingMap=y.windingMap,T.filled=y.filled,T}),e.edges.forEach((y,S)=>{const T=t.edges[S];T.forwardHalf.face=y.forwardHalf.face===null?null:g[y.forwardHalf.face],T.reversedHalf.face=y.reversedHalf.face===null?null:g[y.reversedHalf.face]}),t}addShape(e,t,i){for(let s=0;s<t.subpaths.length;s++)this.addSubpath(e,t.subpaths[s],i)}addSubpath(e,t,i){const s=St()({ensureClosed:!0},i);if(this.shapeIds.includes(e)||this.shapeIds.push(e),t.segments.length===0)return;const r=t.closed||s.ensureClosed,o=s.ensureClosed?t.getFillSegments():t.segments;let d;const g=[];for(d=0;d<o.length;d++){let S=d-1;S<0&&(S=o.length-1);let T=o[S].end;const L=o[d].start;!r&&d===0&&(T=L),L.equals(T)?g.push(cr.pool.create(L)):g.push(cr.pool.create(L.average(T)))}r||g.push(cr.pool.create(o[o.length-1].end));const y=Xl.pool.create(e,r);for(d=0;d<o.length;d++){let S=d+1;r&&S===o.length&&(S=0);const T=In.pool.create(o[d],g[d],g[S]);y.halfEdges.push(T.forwardHalf),this.addEdge(T)}this.loops.push(y),this.vertices.push(...g)}computeSimplifiedFaces(){this.eliminateOverlap(),this.eliminateSelfIntersection(),this.eliminateIntersection(),this.collapseVertices(),this.removeBridges(),this.removeLowOrderVertices(),this.orderVertexEdges(),this.extractFaces(),this.computeBoundaryTree(),this.computeWindingMap()}computeFaceInclusion(e){for(let t=0;t<this.faces.length;t++){const i=this.faces[t];i.filled=e(i.windingMap)}}createFilledSubGraph(){const e=new Ys,t={};for(let i=0;i<this.edges.length;i++){const s=this.edges[i];if(s.forwardHalf.face.filled!==s.reversedHalf.face.filled){if(!t[s.startVertex.id]){const d=cr.pool.create(s.startVertex.point);e.vertices.push(d),t[s.startVertex.id]=d}if(!t[s.endVertex.id]){const d=cr.pool.create(s.endVertex.point);e.vertices.push(d),t[s.endVertex.id]=d}const r=t[s.startVertex.id],o=t[s.endVertex.id];e.addEdge(In.pool.create(s.segment,r,o))}}return e.collapseAdjacentEdges(),e.orderVertexEdges(),e.extractFaces(),e.computeBoundaryTree(),e.fillAlternatingFaces(),e}facesToShape(){const e=[];for(let t=0;t<this.faces.length;t++){const i=this.faces[t];if(i.filled){e.push(_s.fromBoundary(i.boundary));for(let s=0;s<i.holes.length;s++)e.push(_s.fromBoundary(i.holes[s]))}}return new Wt(e)}dispose(){for(;this.boundaries.length;)this.boundaries.pop().dispose();for(bi(this.innerBoundaries),bi(this.outerBoundaries);this.loops.length;)this.loops.pop().dispose();for(;this.faces.length;)this.faces.pop().dispose();for(;this.vertices.length;)this.vertices.pop().dispose();for(;this.edges.length;)this.edges.pop().dispose()}addEdge(e){this.edges.push(e),e.startVertex.incidentHalfEdges.push(e.reversedHalf),e.endVertex.incidentHalfEdges.push(e.forwardHalf)}removeEdge(e){mn(this.edges,e),mn(e.startVertex.incidentHalfEdges,e.reversedHalf),mn(e.endVertex.incidentHalfEdges,e.forwardHalf)}replaceEdgeInLoops(e,t){const i=[];for(let s=0;s<t.length;s++)i.push(t[t.length-1-s].getReversed());for(let s=0;s<this.loops.length;s++){const r=this.loops[s];for(let o=r.halfEdges.length-1;o>=0;o--){const d=r.halfEdges[o];if(d.edge===e){const g=d===e.forwardHalf?t:i;r.halfEdges.splice(o,1,...g)}}}}collapseAdjacentEdges(){let e=!0;for(;e;){e=!1;for(let t=0;t<this.vertices.length;t++){const i=this.vertices[t];if(i.incidentHalfEdges.length===2){const s=i.incidentHalfEdges[0].edge,r=i.incidentHalfEdges[1].edge;let o=s.segment,d=r.segment;const g=s.getOtherVertex(i),y=r.getOtherVertex(i);if(s.startVertex===i&&(o=o.reversed()),r.endVertex===i&&(d=d.reversed()),o instanceof Pi&&d instanceof Pi&&o.tangentAt(0).normalized().distance(d.tangentAt(0).normalized())<1e-6){this.removeEdge(s),this.removeEdge(r),s.dispose(),r.dispose(),mn(this.vertices,i),i.dispose();const S=new Pi(g.point,y.point);this.addEdge(new In(S,g,y)),e=!0;break}}}}}eliminateOverlap(){const t=new zg,i=new ZA(1e-4),s=Hg++,r=g=>{const y=g.segment.bounds;t.push({start:!0,edge:g},y.minY-1e-4),t.push({start:!1,edge:g},y.maxY+1e-4)},o=g=>{g.internalData.removedId=s};for(let g=0;g<this.edges.length;g++)r(this.edges[g]);const d=[];for(;t.length;){const g=t.pop(),y=g.edge;if(y.internalData.removedId!==s)if(g.start){let S=!1,T,L;if(i.query(y,x=>{const A=y.segment.getOverlaps(x.segment);if(A!==null&&A.length)for(let Q=0;Q<A.length;Q++){const z=A[Q];if(Math.abs(z.t1-z.t0)>1e-5&&Math.abs(z.qt1-z.qt0)>1e-5)return L=this.splitOverlap(y,x,z),S=!0,T=x,!0}return!1}),S){i.removeItem(T),o(T),o(y);for(let x=0;x<L.length;x++)r(L[x]);d.push(y),d.push(T)}else i.addItem(y)}else i.removeItem(y)}for(let g=0;g<d.length;g++)d[g].dispose()}splitOverlap(e,t,i){const s=[],r=e.segment,o=t.segment;this.removeEdge(e),this.removeEdge(t);let d=i.t0,g=i.t1,y=i.qt0,S=i.qt1;d<1e-5&&(d=0),g>1-1e-5&&(g=1),y<1e-5&&(y=0),S>1-1e-5&&(S=1);const T=d>0?r.subdivided(d)[0]:null,L=y>0?o.subdivided(y)[0]:null,x=g<1?r.subdivided(g)[1]:null,A=S<1?o.subdivided(S)[1]:null;let Q=r;d>0&&(Q=Q.subdivided(d)[1]),g<1&&(Q=Q.subdivided(Dr(d,1,0,1,g))[0]);let z;T&&L?(z=cr.pool.create(Q.start),this.vertices.push(z)):T?z=i.a>0?t.startVertex:t.endVertex:z=e.startVertex;let G;x&&A?(G=cr.pool.create(Q.end),this.vertices.push(G)):x?G=i.a>0?t.endVertex:t.startVertex:G=e.endVertex;const re=In.pool.create(Q,z,G);s.push(re);let ne,ae,pe,N;T&&(ne=In.pool.create(T,e.startVertex,z),s.push(ne)),x&&(ae=In.pool.create(x,G,e.endVertex),s.push(ae)),L&&(pe=In.pool.create(L,t.startVertex,i.a>0?z:G),s.push(pe)),A&&(N=In.pool.create(A,i.a>0?G:z,t.endVertex),s.push(N));for(let Ge=0;Ge<s.length;Ge++)this.addEdge(s[Ge]);const Ie=(T?[ne]:[]).concat([re]).concat(x?[ae]:[]),$e=(L?[pe]:[]).concat([re]).concat(A?[N]:[]),Ee=[],Je=[];for(let Ge=0;Ge<Ie.length;Ge++)Ee.push(Ie[Ge].forwardHalf);for(let Ge=0;Ge<$e.length;Ge++){const _t=$e[Ge]!==re||i.a>0;Je.push(_t?$e[Ge].forwardHalf:$e[Ge].reversedHalf)}return this.replaceEdgeInLoops(e,Ee),this.replaceEdgeInLoops(t,Je),s}eliminateSelfIntersection(){for(let e=this.edges.length-1;e>=0;e--){const t=this.edges[e],i=t.segment;if(i instanceof Fn){const s=i.getSelfIntersection();if(s){const r=i.subdivisions([s.aT,s.bT]),o=cr.pool.create(s.point);this.vertices.push(o);const d=In.pool.create(r[0],t.startVertex,o),g=In.pool.create(r[1],o,o),y=In.pool.create(r[2],o,t.endVertex);this.removeEdge(t),this.addEdge(d),this.addEdge(g),this.addEdge(y),this.replaceEdgeInLoops(t,[d.forwardHalf,g.forwardHalf,y.forwardHalf]),t.dispose()}}}}eliminateIntersection(){const t=new zg,i=new ZA(1e-4),s=Hg++,r=g=>{const y=g.segment.bounds;t.push({start:!0,edge:g},y.minY-1e-4),t.push({start:!1,edge:g},y.maxY+1e-4)},o=g=>{g.internalData.removedId=s};for(let g=0;g<this.edges.length;g++)r(this.edges[g]);const d=[];for(;t.length;){const g=t.pop(),y=g.edge;if(y.internalData.removedId!==s)if(g.start){let S=!1,T,L,x;if(i.query(y,A=>{const Q=y.segment,z=A.segment;let G=wn.intersect(Q,z);if(G=G.filter(re=>{const ne=re.point;return Ys.isInternal(ne,re.aT,Q,$A,qd)||Ys.isInternal(ne,re.bT,z,$A,qd)}),G.length){const re=G[0],ne=this.simpleSplit(y,A,re.aT,re.bT,re.point);if(ne)return S=!0,T=A,L=ne.addedEdges,x=ne.removedEdges,!0}return!1}),S){x.includes(y)?(o(y),d.push(y)):i.addItem(y),x.includes(T)&&(i.removeItem(T),o(T),d.push(T));for(let A=0;A<L.length;A++)r(L[A])}else i.addItem(y)}else i.removeItem(y)}for(let g=0;g<d.length;g++)d[g].dispose()}simpleSplit(e,t,i,s,r){const o=Ys.isInternal(r,i,e.segment,eb,qd),d=Ys.isInternal(r,s,t.segment,eb,qd);let g=null;o?d?(g=cr.pool.create(r),this.vertices.push(g)):g=s<.5?t.startVertex:t.endVertex:g=i<.5?e.startVertex:e.endVertex;let y=!1;const S=[],T=[];return o&&g!==e.startVertex&&g!==e.endVertex&&(S.push(...this.splitEdge(e,i,g)),T.push(e),y=!0),d&&g!==t.startVertex&&g!==t.endVertex&&(S.push(...this.splitEdge(t,s,g)),T.push(t),y=!0),y?{addedEdges:S,removedEdges:T}:null}splitEdge(e,t,i){const s=e.segment.subdivided(t),r=In.pool.create(s[0],e.startVertex,i),o=In.pool.create(s[1],i,e.endVertex);return this.removeEdge(e),this.addEdge(r),this.addEdge(o),this.replaceEdgeInLoops(e,[r.forwardHalf,o.forwardHalf]),[r,o]}collapseVertices(){const e=10*cf,t=new zg,i=new gk(e),s=Hg++,r=g=>{t.push({start:!0,vertex:g},g.point.y-e),t.push({start:!1,vertex:g},g.point.y+e)},o=g=>{g.internalData.removedId=s};for(let g=0;g<this.vertices.length;g++)r(this.vertices[g]);const d=[];for(;t.length;){const g=t.pop(),y=g.vertex;if(y.internalData.removedId!==s)if(g.start){let S=!1,T,L;if(i.query(y,x=>{const A=y.point.distance(x.point);if(A<cf){const Q=cr.pool.create(A===0?y.point:y.point.average(x.point));this.vertices.push(Q),mn(this.vertices,y),mn(this.vertices,x);for(let z=this.edges.length-1;z>=0;z--){const G=this.edges[z],re=G.startVertex===y||G.startVertex===x,ne=G.endVertex===y||G.endVertex===x;if(re&&ne){if((G.segment.bounds.width>1e-5||G.segment.bounds.height>1e-5)&&(G.segment instanceof Fn||G.segment instanceof os||G.segment instanceof kn)){const ae=In.pool.create(G.segment,Q,Q);this.addEdge(ae),this.replaceEdgeInLoops(G,[ae.forwardHalf])}else this.replaceEdgeInLoops(G,[]);this.removeEdge(G),G.dispose()}else re?(G.startVertex=Q,Q.incidentHalfEdges.push(G.reversedHalf),G.updateReferences()):ne&&(G.endVertex=Q,Q.incidentHalfEdges.push(G.forwardHalf),G.updateReferences())}return L=[Q],S=!0,T=x,!0}return!1}),S){i.removeItem(T),o(T),o(y);for(let x=0;x<L.length;x++)r(L[x]);d.push(y),d.push(T)}else i.addItem(y)}else i.removeItem(y)}for(let g=0;g<d.length;g++)d[g].dispose()}markBridges(e,t){t.visited=!0,t.visitIndex=t.lowIndex=mk++;for(let i=0;i<t.incidentHalfEdges.length;i++){const s=t.incidentHalfEdges[i].edge,r=t.incidentHalfEdges[i].startVertex;r.visited?s.visited||(t.lowIndex=Math.min(t.lowIndex,r.visitIndex)):(s.visited=!0,this.markBridges(e,r),t.lowIndex=Math.min(t.lowIndex,r.lowIndex),r.lowIndex>t.visitIndex&&e.push(s))}}removeBridges(){const e=[];for(let t=0;t<this.vertices.length;t++){const i=this.vertices[t];i.visited||this.markBridges(e,i)}for(let t=0;t<e.length;t++){const i=e[t];this.removeEdge(i),this.replaceEdgeInLoops(i,[]),i.dispose()}}removeLowOrderVertices(){let e=!0;for(;e;){e=!1;for(let t=this.vertices.length-1;t>=0;t--){const i=this.vertices[t];if(i.incidentHalfEdges.length<2){for(let s=0;s<i.incidentHalfEdges.length;s++){const r=i.incidentHalfEdges[s].edge;this.removeEdge(r),this.replaceEdgeInLoops(r,[]),r.dispose()}this.vertices.splice(t,1),i.dispose(),e=!0;break}}}}orderVertexEdges(){for(let e=0;e<this.vertices.length;e++)this.vertices[e].sortEdges()}extractFaces(){const e=[];for(let t=0;t<this.edges.length;t++)e.push(this.edges[t].forwardHalf),e.push(this.edges[t].reversedHalf);for(;e.length;){const t=[];let i=e[0];const s=i;for(;i&&(mn(e,i),t.push(i),i=i.getNext(),i!==s););const r=Yl.pool.create(t);(r.signedArea>0?this.innerBoundaries:this.outerBoundaries).push(r),this.boundaries.push(r)}for(let t=0;t<this.innerBoundaries.length;t++)this.faces.push(_l.pool.create(this.innerBoundaries[t]))}computeBoundaryTree(){const e=[],t=new ra(mt.rotation2(1.5729657));for(let i=0;i<this.outerBoundaries.length;i++){const s=this.outerBoundaries[i],r=s.computeExtremeRay(t);let o=null,d=Number.POSITIVE_INFINITY,g;for(let y=0;y<this.edges.length;y++){const S=this.edges[y],T=S.segment.intersection(r);for(let L=0;L<T.length;L++){const x=T[L];x.distance<d&&(o=S,d=x.distance,g=x.wind)}}if(o===null)e.push(s);else{const S=g<0?o.reversedHalf:o.forwardHalf;this.getBoundaryOfHalfEdge(S).childBoundaries.push(s)}}e.forEach(this.unboundedFace.recursivelyAddHoles.bind(this.unboundedFace));for(let i=0;i<this.faces.length;i++){const s=this.faces[i];s.boundary!==null&&s.boundary.childBoundaries.forEach(s.recursivelyAddHoles.bind(s))}}computeWindingMap(){const e=this.edges.slice(),t={};for(let i=0;i<this.shapeIds.length;i++)t[this.shapeIds[i]]=0;for(this.unboundedFace.windingMap=t;e.length;)for(let i=e.length-1;i>=0;i--){const s=e[i],r=s.forwardHalf,o=s.reversedHalf,d=r.face,g=o.face,y=d.windingMap!==null,S=g.windingMap!==null;if(y&&S)e.splice(i,1);else{if(!y&&!S)continue;{const T=y?d:g,L=y?g:d,x={};for(let A=0;A<this.shapeIds.length;A++){const Q=this.shapeIds[A],z=this.computeDifferential(s,Q);x[Q]=T.windingMap[Q]+z*(y?-1:1)}L.windingMap=x}}}}computeDifferential(e,t){let i=0;for(let s=0;s<this.loops.length;s++){const r=this.loops[s];if(r.shapeId===t)for(let o=0;o<r.halfEdges.length;o++){const d=r.halfEdges[o];d===e.forwardHalf?i++:d===e.reversedHalf&&i--}}return i}fillAlternatingFaces(){let e=0;for(let t=0;t<this.faces.length;t++)this.faces[t].filled=null,e++;for(this.unboundedFace.filled=!1,e--;e;)for(let t=0;t<this.edges.length;t++){const i=this.edges[t],s=i.forwardHalf.face,r=i.reversedHalf.face,o=s.filled===null,d=r.filled===null;o&&!d?(s.filled=!r.filled,e--):!o&&d&&(r.filled=!s.filled,e--)}}getBoundaryOfHalfEdge(e){for(let t=0;t<this.boundaries.length;t++){const i=this.boundaries[t];if(i.hasHalfEdge(e))return i}throw new Error("Could not find boundary")}static isInternal(e,t,i,s,r){return t>r&&t<1-r&&e.distance(i.start)>s&&e.distance(i.end)>s}static BINARY_NONZERO_UNION(e){return e[0]!==0||e[1]!==0}static BINARY_NONZERO_INTERSECTION(e){return e[0]!==0&&e[1]!==0}static BINARY_NONZERO_DIFFERENCE(e){return e[0]!==0&&e[1]===0}static BINARY_NONZERO_XOR(e){return e[0]!==0!=(e[1]!==0)}static binaryResult(e,t,i){const s=new Ys;s.addShape(0,e),s.addShape(1,t),s.computeSimplifiedFaces(),s.computeFaceInclusion(i);const r=s.createFilledSubGraph(),o=r.facesToShape();return s.dispose(),r.dispose(),o}static unionNonZero(e){const t=new Ys;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>{for(let o=0;o<e.length;o++)if(r[o]!==0)return!0;return!1});const i=t.createFilledSubGraph(),s=i.facesToShape();return t.dispose(),i.dispose(),s}static intersectionNonZero(e){const t=new Ys;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>{for(let o=0;o<e.length;o++)if(r[o]===0)return!1;return!0});const i=t.createFilledSubGraph(),s=i.facesToShape();return t.dispose(),i.dispose(),s}static xorNonZero(e){const t=new Ys;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>{let o=!1;for(let d=0;d<e.length;d++)r[d]!==0&&(o=!o);return o});const i=t.createFilledSubGraph(),s=i.facesToShape();return t.dispose(),i.dispose(),s}static simplifyNonZero(e){const t=new Ys;t.addShape(0,e),t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>r[0]!==0);const i=t.createFilledSubGraph(),s=i.facesToShape();return t.dispose(),i.dispose(),s}static clipShape(e,t,i){let s,r,o;const y=St()({includeExterior:!1,includeBoundary:!0,includeInterior:!0},i),S=Ys.simplifyNonZero(e),T=new Ys;for(T.addShape(0,t,{ensureClosed:!1}),T.addShape(1,S),T.eliminateOverlap(),T.eliminateSelfIntersection(),T.eliminateIntersection(),T.collapseVertices(),s=0;s<T.loops.length;s++)if(o=T.loops[s],o.shapeId===1)for(r=0;r<o.halfEdges.length;r++)o.halfEdges[r].edge.data=!0;const L=[];for(s=0;s<T.loops.length;s++)if(o=T.loops[s],o.shapeId===0){let x=[];for(r=0;r<o.halfEdges.length;r++){const A=o.halfEdges[r];(A.edge.data?y.includeBoundary:S.containsPoint(A.edge.segment.positionAt(.5))?y.includeInterior:y.includeExterior)?x.push(A.getDirectionalSegment()):x.length&&(L.push(new _s(x,void 0,o.closed)),x=[])}x.length&&L.push(new _s(x,void 0,o.closed))}return T.dispose(),new Wt(L)}}const yk=new Ni(!1),Fc=yk;class fr extends rr{}fr.DRAG=new fr;fr.KEYBOARD_DRAG=new fr;fr.enumeration=new oa(fr,{phetioDocumentation:"entries when signifying Intent of the pointer"});class eh{constructor(e,t){this.point=e,this.type=t,this.trail=null,this.inputEnabledTrail=null,this.isDownProperty=new Ri(!1),this.attachedProperty=new Ri(!1),this._listeners=[],this._attachedListener=null,this._cursor=null,this.lastEventContext=null,this._intents=[],this._pointerCaptured=!1,this._listenerForDragReserve=null,this._listenerForKeyboardDragReserve=null}setCursor(e){return this._cursor=e,this}set cursor(e){this.setCursor(e)}get cursor(){return this.getCursor()}getCursor(){return this._cursor}getListeners(){return this._listeners.slice()}get listeners(){return this.getListeners()}addInputListener(e,t){this._listeners.push(e),t&&this.attach(e)}removeInputListener(e){const t=he.indexOf(this._listeners,e);this.isAttached()&&e===this._attachedListener&&this.detach(e),this._listeners.splice(t,1)}getAttachedListener(){return this._attachedListener}get attachedListener(){return this.getAttachedListener()}isAttached(){return this.attachedProperty.value}isTouchLike(){return!1}set isDown(e){this.isDownProperty.value=e}get isDown(){return this.isDownProperty.value}interruptAttached(){this.isAttached()&&this._attachedListener.interrupt()}interruptAll(){const e=this._listeners.slice();for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}}attach(e){this.attachedProperty.value=!0,this._attachedListener=e}updatePoint(e,t="event"){const i=this.hasPointChanged(e);return this.point=e,i}down(e){this.isDown=!0}up(e,t){return this.isDown=!1,this.updatePoint(e,"up")}cancel(e){return this.isDown=!1,this.updatePoint(e,"cancel")}detach(e){this.attachedProperty.value=!1,this._attachedListener=null}hasPointChanged(e){return this.point!==e&&(!e||!this.point||!this.point.equals(e))}addIntent(e){this._intents.includes(e)||this._intents.push(e)}removeIntent(e){if(this._intents.includes(e)){const t=this._intents.indexOf(e);this._intents.splice(t,1)}}hasIntent(e){return this._intents.includes(e)}reserveForDrag(){if(!this._intents.includes(fr.DRAG)){this.addIntent(fr.DRAG);const e={up:t=>{this.removeIntent(fr.DRAG),this.removeInputListener(this._listenerForDragReserve),this._listenerForDragReserve=null}};this._listenerForDragReserve=e,this.addInputListener(this._listenerForDragReserve)}}reserveForKeyboardDrag(){if(!this._intents.includes(fr.KEYBOARD_DRAG)){this.addIntent(fr.KEYBOARD_DRAG);const e={keyup:i=>t(),blur:i=>t()},t=()=>{this.removeIntent(fr.KEYBOARD_DRAG),this.removeInputListener(this._listenerForKeyboardDragReserve),this._listenerForKeyboardDragReserve=null};this._listenerForKeyboardDragReserve=e,this.addInputListener(this._listenerForKeyboardDragReserve)}}onGotPointerCapture(){this._pointerCaptured=!0}onLostPointerCapture(){this._pointerCaptured&&this.interruptAll(),this._pointerCaptured=!1}hasPointerCaptured(){return this._pointerCaptured}dispose(){this._listenerForDragReserve&&this._listeners.includes(this._listenerForDragReserve)&&this.removeInputListener(this._listenerForDragReserve),this._listenerForKeyboardDragReserve&&this._listeners.includes(this._listenerForKeyboardDragReserve)&&this.removeInputListener(this._listenerForKeyboardDragReserve)}toString(){return`Pointer#${this.type}_at_${this.point}`}}eh.PointerIO=new pi("PointerIO",{valueType:eh,toStateObject:n=>({point:n.point.toStateObject(),type:n.type}),stateSchema:{point:Ne.Vector2IO,type:gs}});const Fd="?";class H0{constructor(e){const t=St()({modifierKeys:[],ignoredModifierKeys:[]},e);this.key=t.key,this.modifierKeys=t.modifierKeys,this.ignoredModifierKeys=t.ignoredModifierKeys}getHotkeyString(){return[...this.modifierKeys,this.key].join("+")}static keyStrokeToKeyDescriptor(e){const t=e.split("+");t.forEach(d=>{d.length>1&&d.includes(Fd)});const i=[],s=[];t.forEach(d=>{if(d.includes(Fd)){const g=d.replace(Fd,"");if(d.startsWith(Fd)){const y=Yv.filter(S=>S!==g);s.push(...y),i.push(g)}else s.push(g)}else i.push(d)});const r=i.pop(),o=i.filter(d=>!s.includes(d));return new H0({key:r,modifierKeys:o,ignoredModifierKeys:s})}}class tr{constructor(e){const t=St()({keyboardHelpDialogPDOMLabelStringProperty:null,keyboardHelpDialogLabelStringProperty:null,global:!1,binderName:""},e);this.keyStringProperties=t.keyStringProperties,this.keyboardHelpDialogLabelStringProperty=t.keyboardHelpDialogLabelStringProperty,this.keyboardHelpDialogPDOMLabelStringProperty=t.keyboardHelpDialogPDOMLabelStringProperty,this.repoName=t.repoName,this.global=t.global,this.binderName=t.binderName,this.keyDescriptorsProperty=ps.deriveAny(this.keyStringProperties,()=>this.keyStringProperties.map(i=>H0.keyStrokeToKeyDescriptor(i.value)))}hasKeyStroke(e){return this.keyStringProperties.some(t=>t.value===e)}serialize(){var e;return{keyStrings:this.keyStringProperties.map(t=>t.value),binderName:this.binderName||((e=this.keyboardHelpDialogLabelStringProperty)==null?void 0:e.value),repoName:this.repoName,global:this.global}}dispose(){this.keyDescriptorsProperty.dispose()}static combineKeyStringProperties(e){return e.reduce((t,i)=>t.concat(i.keyStringProperties),[])}static anyHaveKeyStroke(e,t){return e.some(i=>i.hasKeyStroke(t))}}const Gh={isPlatformMac:()=>he.includes(self.navigator.platform,"Mac"),getPlatformZoomMetaKey:()=>Gh.isPlatformMac()?"metaKey":"ctrlKey",isZoomCommand:(n,e)=>{const t=e?je.KEY_EQUALS:je.KEY_MINUS,i=Gh.getPlatformZoomMetaKey();return n[i]&&je.isKeyEvent(n,t)},isZoomResetCommand:n=>{const e=Gh.getPlatformZoomMetaKey();return n[e]&&je.isKeyEvent(n,je.KEY_0)},ZOOM_IN_HOTKEY_DATA:new tr({keyStringProperties:[new Li("ctrl+equals"),new Li("meta+equals")],binderName:"Zoom in",repoName:"scenery",global:!0}),ZOOM_OUT_HOTKEY_DATA:new tr({keyStringProperties:[new Li("ctrl+minus"),new Li("meta+minus")],binderName:"Zoom in",repoName:"scenery",global:!0}),RESET_ZOOM_HOTKEY_DATA:new tr({keyStringProperties:[new Li("ctrl+0"),new Li("meta+0")],binderName:"Reset zoom",repoName:"scenery",global:!0})};class vc extends eh{constructor(e){super(e,"mouse"),this.id=null,this.leftDown=!1,this.middleDown=!1,this.rightDown=!1,this.wheelDelta=new ls(0,0,0),this.wheelDeltaMode=0}down(e){switch(e.button){case 0:this.leftDown=!0;break;case 1:this.middleDown=!0;break;case 2:this.rightDown=!0;break}return super.down(e)}up(e,t){switch(t.button){case 0:this.leftDown=!1;break;case 1:this.middleDown=!1;break;case 2:this.rightDown=!1;break}return super.up(e,t)}move(e){const t=this.hasPointChanged(e);return this.point=e,t}over(e){const t=this.hasPointChanged(e);return this.point=e,t}out(e){return this.hasPointChanged(e)}wheel(e){const t=e;this.wheelDelta.setXYZ(t.deltaX,t.deltaY,t.deltaZ),this.wheelDeltaMode=t.deltaMode}toString(){return"Mouse"}}class Ao extends ra{modelToViewPosition(e){return this.transformPosition2(e)}modelToViewXY(e,t){return new Ne(this.modelToViewX(e),this.modelToViewY(t))}modelToViewX(e){return this.matrix.m00()*e+this.matrix.m02()}modelToViewY(e){return this.matrix.m11()*e+this.matrix.m12()}modelToViewDelta(e){return this.transformDelta2(e)}modelToViewNormal(e){return this.transformNormal2(e)}modelToViewDeltaX(e){return this.transformDeltaX(e)}modelToViewDeltaY(e){return this.transformDeltaY(e)}modelToViewBounds(e){return this.transformBounds2(e)}modelToViewShape(e){return this.transformShape(e)}modelToViewRay(e){return this.transformRay2(e)}viewToModelPosition(e){return this.inversePosition2(e)}viewToModelXY(e,t){return new Ne(this.viewToModelX(e),this.viewToModelY(t))}viewToModelX(e){const t=this.getInverse();return t.m00()*e+t.m02()}viewToModelY(e){const t=this.getInverse();return t.m11()*e+t.m12()}viewToModelDelta(e){return this.inverseDelta2(e)}viewToModelDeltaXY(e,t){return new Ne(this.viewToModelDeltaX(e),this.viewToModelDeltaY(t))}viewToModelNormal(e){return this.inverseNormal2(e)}viewToModelDeltaX(e){return this.inverseDeltaX(e)}viewToModelDeltaY(e){return this.inverseDeltaY(e)}viewToModelBounds(e){return this.inverseBounds2(e)}viewToModelShape(e){return this.inverseShape(e)}viewToModelRay(e){return this.inverseRay2(e)}validateMatrix(e){super.validateMatrix(e)}setToRectangleMapping(e,t){const i=t.width/e.width,s=t.x-i*e.x,r=t.height/e.height,o=t.y-r*e.y;return this.setMatrix(mt.affine(i,0,s,0,r,o)),this}setToRectangleInvertedYMapping(e,t){const i=t.width/e.width,s=t.x-i*e.x,r=-t.height/e.height,o=t.y-r*e.getMaxY();return this.setMatrix(mt.affine(i,0,s,0,r,o)),this}static createIdentity(){return new Ao(mt.IDENTITY)}static createOffsetScaleMapping(e,t){return new Ao(mt.affine(t,0,e.x,0,t,e.y))}static createOffsetXYScaleMapping(e,t,i){return new Ao(mt.affine(t,0,e.x,0,i,e.y))}static createSinglePointXYScaleMapping(e,t,i,s){const r=t.x-e.x*i,o=t.y-e.y*s;return Ao.createOffsetXYScaleMapping(new Ne(r,o),i,s)}static createSinglePointScaleMapping(e,t,i){return Ao.createSinglePointXYScaleMapping(e,t,i,i)}static createSinglePointScaleInvertedYMapping(e,t,i){return Ao.createSinglePointXYScaleMapping(e,t,i,-i)}static createRectangleMapping(e,t){return new Ao().setToRectangleMapping(e,t)}static createRectangleInvertedYMapping(e,t){return new Ao().setToRectangleInvertedYMapping(e,t)}}class _k{constructor(e,t){this.pointer=e,this.trail=t,this.interrupted=!1,this.initialPoint=e.point,this.localPoint=null,this.recomputeLocalPoint()}recomputeLocalPoint(){this.localPoint=this.trail.globalToLocalPoint(this.pointer.point)}get targetPoint(){return this.trail.globalToParentPoint(this.pointer.point)}}const Ak=25;class bk{constructor(e,t){const i=St()({mouseButton:0,pressCursor:"pointer",allowScale:!0,allowRotation:!0,allowMultitouchInterruption:!1,allowMoveInterruption:!0,minScale:1,maxScale:4,tandem:rt.REQUIRED},t);this._targetNode=e,this._minScale=i.minScale,this._maxScale=i.maxScale,this._mouseButton=i.mouseButton,this._pressCursor=i.pressCursor,this._allowScale=i.allowScale,this._allowRotation=i.allowRotation,this._allowMultitouchInterruption=i.allowMultitouchInterruption,this._allowMoveInterruption=i.allowMoveInterruption,this._presses=[],this._backgroundPresses=[],this.matrixProperty=new Li(e.matrix.copy(),{phetioValueType:mt.Matrix3IO,tandem:i.tandem.createTandem("matrixProperty"),phetioReadOnly:!0}),this.matrixProperty.link(s=>{this._targetNode.matrix=s}),this._interrupted=!1,this._pressListener={move:s=>{const r=this.findPress(s.pointer);this.movePress(r)},up:s=>{const r=this.findPress(s.pointer);this.removePress(r)},cancel:s=>{const r=this.findPress(s.pointer);r.interrupted=!0,this.removePress(r)},interrupt:()=>{this.interrupt()}},this._backgroundListener={up:s=>{if(!this._interrupted){const r=this.findBackgroundPress(s.pointer);this.removeBackgroundPress(r)}},move:s=>{const r=this._backgroundPresses.filter(o=>!o.pointer.hasIntent(fr.DRAG)&&o.initialPoint.distance(o.pointer.point)>Ak);(this.getCurrentScale()!==1||r.length>=2)&&r.forEach(o=>{this.removeBackgroundPress(o),this.interruptOtherListeners(o.pointer),this.addPress(o)})},cancel:s=>{if(!this._interrupted){const r=this.findBackgroundPress(s.pointer);this.removeBackgroundPress(r)}},interrupt:()=>{this.interrupt()}}}findPress(e){for(let t=0;t<this._presses.length;t++)if(this._presses[t].pointer===e)return this._presses[t];return null}findBackgroundPress(e){for(let t=0;t<this._backgroundPresses.length;t++)if(this._backgroundPresses[t].pointer===e)return this._backgroundPresses[t];return null}hasPress(e){return he.some(this._presses.concat(this._backgroundPresses),t=>t.pointer===e.pointer)}interruptOtherListeners(e){const t=e.getListeners();for(let i=0;i<t.length;i++){const s=t[i];s!==this._backgroundListener&&s.interrupt&&s.interrupt()}}down(e){if(e.pointer instanceof vc&&e.domEvent instanceof MouseEvent&&e.domEvent.button!==this._mouseButton)return;this._interrupted=!1;let t;he.includes(e.trail.nodes,this._targetNode)?t=e.trail.subtrailTo(this._targetNode,!1):t=this._targetNode.getUniqueTrailTo(e.target);const i=new _k(e.pointer,t);!this._allowMoveInterruption&&!this._allowMultitouchInterruption?e.pointer.isAttached()||this.addPress(i):this.addBackgroundPress(i)}addPress(e){this.hasPress(e)||(this._presses.push(e),e.pointer.cursor=this._pressCursor,e.pointer.addInputListener(this._pressListener,!0),this.recomputeLocals(),this.reposition())}movePress(e){this.reposition()}removePress(e){e.pointer.removeInputListener(this._pressListener),e.pointer.cursor=null,mn(this._presses,e),this.recomputeLocals(),this.reposition()}addBackgroundPress(e){this.hasPress(e)||(this._backgroundPresses.push(e),e.pointer.addInputListener(this._backgroundListener,!1))}removeBackgroundPress(e){e.pointer.removeInputListener(this._backgroundListener),mn(this._backgroundPresses,e)}reposition(){this.matrixProperty.set(this.computeMatrix())}recomputeLocals(){for(let e=0;e<this._presses.length;e++)this._presses[e].recomputeLocalPoint()}interrupt(){for(;this._presses.length;)this.removePress(this._presses[this._presses.length-1]);for(;this._backgroundPresses.length;)this.removeBackgroundPress(this._backgroundPresses[this._backgroundPresses.length-1]);this._interrupted=!0}computeMatrix(){return this._presses.length===0?this._targetNode.getMatrix():this._presses.length===1?this.computeSinglePressMatrix():this._allowScale&&this._allowRotation?this.computeTranslationRotationScaleMatrix():this._allowScale?this.computeTranslationScaleMatrix():this._allowRotation?this.computeTranslationRotationMatrix():this.computeTranslationMatrix()}computeSinglePressMatrix(){const e=this._presses[0].targetPoint,t=this._presses[0].localPoint,i=this._targetNode.localToParentPoint(t),s=e.minus(i);return mt.translationFromVector(s).timesMatrix(this._targetNode.getMatrix())}computeTranslationMatrix(){const e=new Ne(0,0);for(let t=0;t<this._presses.length;t++){e.add(this._presses[t].targetPoint);const i=this._presses[t].localPoint;e.subtract(i)}return mt.translationFromVector(e.dividedScalar(this._presses.length))}computeTranslationScaleMatrix(){const e=this._presses.map(S=>S.localPoint),t=this._presses.map(S=>S.targetPoint),i=new Ne(0,0),s=new Ne(0,0);e.forEach(S=>{i.add(S)}),t.forEach(S=>{s.add(S)}),i.divideScalar(this._presses.length),s.divideScalar(this._presses.length);let r=0,o=0;e.forEach(S=>{r+=S.distanceSquared(i)}),t.forEach(S=>{o+=S.distanceSquared(s)});let d=this.getCurrentScale();o!==0&&(d=this.limitScale(Math.sqrt(o/r)));const g=mt.translation(s.x,s.y),y=mt.translation(-i.x,-i.y);return g.timesMatrix(mt.scaling(d)).timesMatrix(y)}limitScale(e){let t=Math.max(e,this._minScale);return t=Math.min(t,this._maxScale),t}computeTranslationRotationMatrix(){let e;const t=new _i(2,this._presses.length),i=new _i(2,this._presses.length),s=new Ne(0,0),r=new Ne(0,0);for(e=0;e<this._presses.length;e++){const T=this._presses[e].localPoint,L=this._presses[e].targetPoint;s.add(T),r.add(L),t.set(0,e,T.x),t.set(1,e,T.y),i.set(0,e,L.x),i.set(1,e,L.y)}for(s.divideScalar(this._presses.length),r.divideScalar(this._presses.length),e=0;e<this._presses.length;e++)t.set(0,e,t.get(0,e)-s.x),t.set(1,e,t.get(1,e)-s.y),i.set(0,e,i.get(0,e)-r.x),i.set(1,e,i.get(1,e)-r.y);const o=t.times(i.transpose()),d=new Hl(o);let g=d.getV().times(d.getU().transpose());g.det()<0&&(g=d.getV().times(_i.diagonalMatrix([1,-1])).times(d.getU().transpose()));const y=new mt().rowMajor(g.get(0,0),g.get(0,1),0,g.get(1,0),g.get(1,1),0,0,0,1),S=r.minus(y.timesVector2(s));return y.set02(S.x),y.set12(S.y),y}computeTranslationRotationScaleMatrix(){let e;const t=new _i(this._presses.length*2,4);for(e=0;e<this._presses.length;e++){const y=this._presses[e].localPoint;t.set(2*e+0,0,y.x),t.set(2*e+0,1,y.y),t.set(2*e+0,2,1),t.set(2*e+1,0,y.y),t.set(2*e+1,1,-y.x),t.set(2*e+1,3,1)}const i=new _i(this._presses.length*2,1);for(e=0;e<this._presses.length;e++){const y=this._presses[e].targetPoint;i.set(2*e+0,0,y.x),i.set(2*e+1,0,y.y)}const s=Hl.pseudoinverse(t).times(i),r=s.get(0,0),o=s.get(1,0),d=s.get(2,0),g=s.get(3,0);return new mt().rowMajor(r,o,d,-o,r,g,0,0,1)}getCurrentScale(){return this._targetNode.getScaleVector().x}resetTransform(){this._targetNode.resetTransform(),this.matrixProperty.set(this._targetNode.matrix.copy())}}const tb=new mt;class vk extends bk{constructor(e,t){var s;const i=St()({panBounds:ot.NOTHING,targetBounds:null,targetScale:1,allowRotation:!1},t);super(e,i),this._panBounds=i.panBounds,this._targetBounds=i.targetBounds||e.globalBounds.copy(),this._targetScale=i.targetScale,this.sourceFramePanBoundsProperty=new Li(this._panBounds,{tandem:(s=i.tandem)==null?void 0:s.createTandem("sourceFramePanBoundsProperty"),phetioReadOnly:!0,phetioValueType:ot.Bounds2IO}),this.sourceFramePanBoundsProperty.lazyLink(()=>{if(Fc.value){const r=Ao.createRectangleMapping(this.sourceFramePanBoundsProperty.get(),this._panBounds),o=this._targetNode.matrix.translation.componentMultiply(r.matrix.getScaleVector()),d=this.matrixProperty.get().getScaleVector();this.matrixProperty.set(mt.translationFromVector(o).timesMatrix(mt.scaling(d.x,d.y)))}},{phetioDependencies:[this.matrixProperty]})}correctReposition(){tb.set(this._targetNode.matrix);const e=this._targetBounds.transformed(this._targetNode.getMatrix());e.left>this._panBounds.left&&(this._targetNode.left=this._panBounds.left-(e.left-this._targetNode.left)),e.top>this._panBounds.top&&(this._targetNode.top=this._panBounds.top-(e.top-this._targetNode.top)),e.right<this._panBounds.right&&(this._targetNode.right=this._panBounds.right+(this._targetNode.right-e.right)),e.bottom<this._panBounds.bottom&&(this._targetNode.bottom=this._panBounds.bottom+(this._targetNode.bottom-e.bottom)),tb.equals(this._targetNode.matrix)||this.matrixProperty.set(this._targetNode.matrix.copy())}addPress(e){super.addPress(e);const i=this._targetBounds.transformed(this._targetNode.getMatrix()).equalsEpsilon(this._panBounds,1e-8);e.pointer.cursor=i?null:this._pressCursor}reposition(){super.reposition(),this.correctReposition()}resetTransform(){super.resetTransform(),this.correctReposition()}setPanBounds(e){this._panBounds=e,this.sourceFramePanBoundsProperty.set(this._panBounds),this.correctReposition()}setTargetBounds(e){this._targetBounds=e,this.correctReposition()}setTargetScale(e){this._targetScale=e}getTargetBounds(){return this._targetBounds}}class df extends eh{constructor(e){super(Ne.ZERO,"pdom"),this.display=e,this.initializeListeners(),this.blockTrustedEvents=!1,this.keydownTargetNode=null}initializeListeners(){this.addInputListener({focus:e=>{const t=this.trail.lastNode();if(t.focusable){const i=_c(this.trail,this.display.rootNode);this.point=i.parentToGlobalPoint(t.center),isNaN(this.point.x)&&this.point.setXY(0,0)}},blur:e=>{this.trail=null,this.keydownTargetNode=null},keydown:e=>{this.blockTrustedEvents&&e.domEvent.isTrusted||(this.keydownTargetNode=e.target)},keyup:e=>{this.blockTrustedEvents&&e.domEvent.isTrusted||this.keydownTargetNode!==e.target&&e.abort()}})}updateTrail(e){return this.trail&&this.trail.equals(e)||(this.trail=e),this.trail}}class jl{constructor(e,t){this._matrices=null,this._dirtyIndex=0,this._listeners=[],this._nodeTransformListeners=[];const i=St()({isStatic:!1},t);this._isStatic=i.isStatic,this.trail=e,this._nodeTransformListeners=[];for(let s=1;s<this.trail.length;s++){const r=(o=>()=>{this.onTransformChange(o)})(s-1);this._nodeTransformListeners.push(r),e.nodes[s].transformEmitter.addListener(r)}}dispose(){for(let e=1;e<this.trail.length;e++){const t=this._nodeTransformListeners[e-1];this.trail.nodes[e].transformEmitter.hasListener(t)&&this.trail.nodes[e].transformEmitter.removeListener(t)}}addListener(e){this._listeners.push(e)}removeListener(e){const t=he.indexOf(this._listeners,e);this._listeners.splice(t,1)}notifyListeners(){let e=this._listeners;this._isStatic||(e=e.slice());const t=e.length;for(let i=0;i<t;i++)e[i]()}onTransformChange(e){this._dirtyIndex=Math.min(this._dirtyIndex,e),this.notifyListeners()}getMatrix(){if(this._matrices===null){this._matrices=[];for(let t=1;t<this.trail.length;t++)this._matrices.push(new mt)}if(this._matrices.length<=0)return mt.IDENTITY;const e=this._matrices.length;for(let t=this._dirtyIndex;t<e;t++){const i=this.trail.nodes[t+1].matrix;t===0?this._matrices[t].set(i):(this._matrices[t].set(this._matrices[t-1]),this._matrices[t].multiplyMatrix(i))}return this._dirtyIndex=e,this._matrices[e-1]}get matrix(){return this.getMatrix()}}const ib="all-scroll",Vk=150,wk=1e3,nc=new Ne(0,0),zd=new Ne(0,0),sb=new Ne(0,0),nb=new ot(0,0,0,0);class K0 extends vk{constructor(e,t){const i=St()({tandem:rt.REQUIRED,stepEmitter:Qn},t);super(e,i),this.trackpadGestureStartScale=1,this.animatingProperty=new Ri(!1),this._transformTracker=null,this._focusBoundsListener=null,this.sourcePosition=null,this.destinationPosition=null,this.sourceScale=this.getCurrentScale(),this.destinationScale=this.getCurrentScale(),this.scaleGestureTargetPosition=null,this.discreteScales=Pk(this._minScale,this._maxScale),this.middlePress=null,this._dragBounds=null,this._transformedPanBounds=this._panBounds.transformed(this._targetNode.matrix.inverted()),this._draggingInDragBounds=!1,this._attachedPointers=[],this.boundsFinite=!1;let s=null,r=null;this.gestureStartAction=new ts(g=>{g.preventDefault(),this.trackpadGestureStartScale=g.scale,this.scaleGestureTargetPosition=new Ne(g.pageX,g.pageY)},{phetioPlayback:!0,tandem:i.tandem.createTandem("gestureStartAction"),parameters:[{name:"event",phetioType:$l}],phetioEventType:Si.USER,phetioDocumentation:"Action that executes whenever a gesture starts on a trackpad in macOS Safari."}),this.gestureChangeAction=new ts(g=>{g.preventDefault();const y=this.sourceScale+g.scale-this.trackpadGestureStartScale;this.setDestinationScale(y)},{phetioPlayback:!0,tandem:i.tandem.createTandem("gestureChangeAction"),parameters:[{name:"event",phetioType:$l}],phetioEventType:Si.USER,phetioDocumentation:"Action that executes whenever a gesture changes on a trackpad in macOS Safari."}),An.safari&&!An.mobileSafari&&(s=this.handleGestureStartEvent.bind(this),r=this.handleGestureChangeEvent.bind(this),this.trackpadGestureStartScale=this.getCurrentScale(),self.addEventListener("gesturestart",s),self.addEventListener("gesturechange",r)),Fa.keydownEmitter.addListener(this.windowKeydown.bind(this));const o=this.handleFocusChange.bind(this);gr.link(o),this.sourceFramePanBoundsProperty.lazyLink(()=>{Fc.value&&(this.initializePositions(),this.sourceScale=this.getCurrentScale(),this.setDestinationScale(this.sourceScale))},{phetioDependencies:[this.matrixProperty]});const d=this.step.bind(this);i.stepEmitter&&i.stepEmitter.addListener(d),this.disposeAnimatedPanZoomListener=()=>{s&&self.removeEventListener("gesturestart",s),r&&self.removeEventListener("gestureChange",r),i.stepEmitter&&i.stepEmitter.removeListener(d),this.animatingProperty.dispose(),this._transformTracker&&this._transformTracker.dispose(),gr.unlink(o)}}step(e){this.middlePress&&this.handleMiddlePress(e),this._attachedPointers.length>0&&this.getCurrentScale()>1&&(this._attachedPointers.length>0&&(this._attachedPointers=this._attachedPointers.filter(t=>t.attachedListener)),(this._draggingInDragBounds||this._attachedPointers.some(t=>t instanceof df))&&this.repositionDuringDrag()),this.animateToTargets(e)}down(e){super.down(e),this._dragBounds!==null&&e.pointer.hasIntent(fr.DRAG)&&(this._attachedPointers.length===0&&(this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point)),e.pointer.attachedListener&&(this._attachedPointers.includes(e.pointer)||this._attachedPointers.push(e.pointer))),e.pointer.type==="mouse"&&e.pointer instanceof vc&&e.pointer.middleDown&&!this.middlePress?(this.middlePress=new Ck(e.pointer,e.trail),e.pointer.cursor=ib):this.cancelMiddlePress()}cancelMiddlePress(){this.middlePress&&(this.middlePress.pointer.cursor=null,this.middlePress=null,this.stopInProgressAnimation())}movePress(e){this.middlePress||super.movePress(e)}move(e){if(this._attachedPointers.length>0&&this.getCurrentScale()>1)if(this._draggingInDragBounds){if(!this._attachedPointers.includes(e.pointer)){const t=this.hasDragIntent(e.pointer);e.currentTarget!==null&&t&&e.pointer.attachedListener&&this._attachedPointers.push(e.pointer)}}else this._dragBounds&&(this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point))}getTargetNodeDuringDrag(){if(this._attachedPointers.length>0){const e=this._attachedPointers[0].attachedListener;if(rb(e.listener)){const t=e.listener;if(t.isPressed)return t.getCurrentTarget()}}return null}getGlobalBoundsToViewDuringDrag(){let e=null;if(this._attachedPointers.length>0){const t=this._attachedPointers[0].attachedListener;if(t.createPanTargetBounds)e=t.createPanTargetBounds();else if(rb(t.listener)){const i=t.listener;if(i.isPressed){const s=i.getCurrentTarget();s.instances.length===1&&(e=s.instances[0].trail.parentToGlobalBounds(s.visibleBounds))}}}return e}repositionDuringDrag(){const e=this.getGlobalBoundsToViewDuringDrag(),t=this.getTargetNodeDuringDrag();e&&this.keepBoundsInView(e,this._attachedPointers.some(i=>i instanceof df),t==null?void 0:t.limitPanDirection)}cancelPanningDuringDrag(e){if(e){const t=this._attachedPointers.indexOf(e.pointer);t>-1&&this._attachedPointers.splice(t,1)}else this._attachedPointers=[];this._draggingInDragBounds=!1}up(e){this.cancelPanningDuringDrag(e)}wheel(e){if(!this.middlePress){const t=new Sk(e,this._targetScale);this.repositionFromWheel(t,e)}}windowKeydown(e){this.cancelMiddlePress();const t=he.get(self,"phet.joist.sim",null);if((!t||!t.display._accessible||!t.display.pdomRootElement.contains(e.target))&&(this.handleZoomCommands(e),je.isArrowKey(e))){const i=new Kg(Fa,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(i)}}keydown(e){const t=e.domEvent;this.cancelMiddlePress(),this.handleZoomCommands(t);const i=e.pointer.hasIntent(fr.KEYBOARD_DRAG);if(je.isArrowKey(t)&&!i){const s=new Kg(Fa,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(s)}}handleFocusChange(e,t){if(this._transformTracker&&(this._transformTracker.dispose(),this._transformTracker=null),t&&t.trail.lastNode()&&t.trail.lastNode().focusPanTargetBoundsProperty&&(t.trail.lastNode().focusPanTargetBoundsProperty.unlink(this._focusBoundsListener),this._focusBoundsListener=null),e){const i=e.trail.lastNode();let s=e.trail;if(e.trail.containsNode(this._targetNode)){const o=e.trail.nodes.indexOf(this._targetNode),d=e.trail.nodes.length;s=e.trail.slice(o,d)}this._transformTracker=new jl(s);const r=()=>{if(this.getCurrentScale()>1){let o;if(i.focusPanTargetBoundsProperty){const d=i.focusPanTargetBoundsProperty.value;o=e.trail.localToGlobalBounds(d)}else o=e.trail.localToGlobalBounds(e.trail.lastNode().localBounds);this.keepBoundsInView(o,!0,i.limitPanDirection)}};this._transformTracker.addListener(r),i.focusPanTargetBoundsProperty&&(this._focusBoundsListener=r,i.focusPanTargetBoundsProperty.link(this._focusBoundsListener)),this.keepTrailInView(e.trail,i.limitPanDirection)}}handleZoomCommands(e){const t=Gh.isZoomCommand(e,!0),i=Gh.isZoomCommand(e,!1);if(t||i){e.preventDefault();const s=this.getNextDiscreteScale(t),r=new Kg(Fa,s,this._targetScale);this.repositionFromKeys(r)}else Gh.isZoomResetCommand(e)&&(e.preventDefault(),this.resetTransform())}handleGestureStartEvent(e){this.gestureStartAction.execute(e)}handleGestureChangeEvent(e){this.gestureChangeAction.execute(e)}handleMiddlePress(e){const t=this.middlePress,i=this.sourcePosition;if(e>0){const r=t.pointer.point.minus(t.initialPoint),o=r.magnitude/100;o>0&&(r.setMagnitude(Math.min(o/e,Vk*this._targetScale)),this.setDestinationPosition(i.plus(r)))}}translateScaleToTarget(e,t){const i=this._targetNode.globalToLocalPoint(e),s=this._targetNode.globalToParentPoint(e),r=mt.translation(-i.x,-i.y),o=mt.translation(s.x,s.y),d=this.limitScale(this.getCurrentScale()+t),g=o.timesMatrix(mt.scaling(d)).timesMatrix(r);this.matrixProperty.set(g),this.correctReposition()}setTranslationScaleToTarget(e,t){const i=this._targetNode.globalToLocalPoint(e),s=this._targetNode.globalToParentPoint(e),r=mt.translation(-i.x,-i.y),o=mt.translation(s.x,s.y),d=this.limitScale(t),g=o.timesMatrix(mt.scaling(d)).timesMatrix(r);this.matrixProperty.set(g),this.correctReposition()}translateDelta(e){const t=this._targetNode.globalToParentPoint(this._panBounds.center),i=t.plus(e);this.translateToTarget(i,t)}translateToTarget(e,t){const i=this._targetNode.globalToParentPoint(e),r=this._targetNode.globalToParentPoint(t).minus(i);this.matrixProperty.set(mt.translationFromVector(r).timesMatrix(this._targetNode.getMatrix())),this.correctReposition()}repositionFromKeys(e){const t=this.sourcePosition,i=e.scale,s=this.getCurrentScale();i!==s?(this.setDestinationScale(i),this.scaleGestureTargetPosition=e.computeScaleTargetFromKeyPress()):e.translationVector.equals(Ne.ZERO)||this.setDestinationPosition(t.plus(e.translationVector)),this.correctReposition()}repositionFromWheel(e,t){const i=t.domEvent,s=this.sourcePosition;if(i.preventDefault(),e.isCtrlKeyDown){const r=this.limitScale(this.getCurrentScale()+e.scaleDelta);this.scaleGestureTargetPosition=e.targetPoint,this.setDestinationScale(r)}else this.setDestinationPosition(s.plus(e.translationVector));this.correctReposition()}correctReposition(){super.correctReposition(),this._panBounds.isFinite()&&(this._transformedPanBounds=this._panBounds.transformed(this._targetNode.matrix.inverted()),this.sourcePosition=this._transformedPanBounds.center,this.sourceScale=this.getCurrentScale())}addPress(e){super.addPress(e),this.stopInProgressAnimation()}removePress(e){super.removePress(e),this.middlePress&&(e.pointer.cursor=ib),this._presses.length===0&&this.stopInProgressAnimation()}interrupt(){this.cancelPanningDuringDrag(),this.cancelMiddlePress(),super.interrupt()}cancel(){this.interrupt()}hasDragIntent(e){return e.hasIntent(fr.KEYBOARD_DRAG)||e.hasIntent(fr.DRAG)}panToNode(e,t,i){this.keepBoundsInView(e.globalBounds,t,i)}keepBoundsInView(e,t,i){const s=this.sourcePosition,r=this._targetNode.globalToLocalBounds(e),o=new Ne(0,0);let d=0,g=0,y=0,S=0;if(t)d=this._transformedPanBounds.centerX-r.centerX,g=this._transformedPanBounds.centerX-r.centerX,y=this._transformedPanBounds.centerY-r.centerY,S=this._transformedPanBounds.centerY-r.centerY;else if((i==="vertical"||r.width<this._transformedPanBounds.width)&&(i==="horizontal"||r.height<this._transformedPanBounds.height)){const x=150/this.getCurrentScale();d=this._transformedPanBounds.left-r.left+x,g=this._transformedPanBounds.right-r.right-x,y=this._transformedPanBounds.top-r.top+x,S=this._transformedPanBounds.bottom-r.bottom-x}i!=="vertical"&&(g<0&&(o.x=-g),d>0&&(o.x=-d)),i!=="horizontal"&&(S<0&&(o.y=-S),y>0&&(o.y=-y)),this.setDestinationPosition(s.plus(o))}keepTrailInView(e,t){if(this._panBounds.isFinite()&&e.lastNode().bounds.isFinite()){const i=e.localToGlobalBounds(e.lastNode().localBounds);this._panBounds.containsBounds(i)||this.keepBoundsInView(i,!0,t)}}animateToTargets(e){const t=this.sourcePosition,i=this.destinationPosition,s=!i.equalsEpsilon(t,.1),r=!Cv(this.sourceScale,this.destinationScale,.001);if(this.animatingProperty.value=s||r,this._presses.length===0||this.middlePress!==null){if(s){const o=i.minus(t);let d=o;o.magnitude!==0&&(d=o.normalized());const g=this.getTranslationSpeed(o.magnitude);sb.setXY(g,g);const y=sb.multiplyScalar(e),S=d.componentTimes(y);S.magnitude>o.magnitude&&S.set(o),this.translateDelta(S)}if(r){const o=this.destinationScale-this.sourceScale;let d=o*e*6;Math.abs(d)>Math.abs(o)&&(d=o),this.translateScaleToTarget(this.scaleGestureTargetPosition,d),this.setDestinationPosition(t)}else this.destinationScale!==this.sourceScale&&(this.setTranslationScaleToTarget(this.scaleGestureTargetPosition,this.destinationScale),this.setDestinationPosition(t))}}stopInProgressAnimation(){this.boundsFinite&&this.sourcePosition&&(this.setDestinationScale(this.sourceScale),this.setDestinationPosition(this.sourcePosition))}initializePositions(){this.boundsFinite=this._transformedPanBounds.isFinite(),this.boundsFinite?(this.sourcePosition=this._transformedPanBounds.center,this.setDestinationPosition(this.sourcePosition)):(this.sourcePosition=null,this.destinationPosition=null)}setPanBounds(e){super.setPanBounds(e),this.initializePositions(),this._dragBounds=e.erodedXY(e.width*.1,e.height*.1)}setTargetBounds(e){super.setTargetBounds(e),this.initializePositions()}setDestinationPosition(e){const t=this.sourcePosition;nb.setMinMax(t.x-this._transformedPanBounds.left-this._panBounds.left,t.y-this._transformedPanBounds.top-this._panBounds.top,t.x+this._panBounds.right-this._transformedPanBounds.right,t.y+this._panBounds.bottom-this._transformedPanBounds.bottom),this.destinationPosition=nb.closestPointTo(e)}setDestinationScale(e){this.destinationScale=this.limitScale(e)}getTranslationSpeed(e){const t=e*this.getCurrentScale(),i=5,s=t*(1/(Math.pow(t,2)-Math.pow(i,2))+i);return Math.min(Math.abs(s),wk*this.getCurrentScale())}resetTransform(){super.resetTransform(),this.stopInProgressAnimation()}getNextDiscreteScale(e){const t=this.getCurrentScale();let i=null,s=Number.POSITIVE_INFINITY;for(let o=0;o<this.discreteScales.length;o++){const d=Math.abs(this.discreteScales[o]-t);d<s&&(s=d,i=o)}i=i;let r=e?i+1:i-1;return r=qs(r,0,this.discreteScales.length-1),this.discreteScales[r]}dispose(){this.disposeAnimatedPanZoomListener()}}class Kg{constructor(e,t,i,s){const r=St()({translationMagnitude:80},s);let o=0;o+=e.isKeyDown(je.KEY_RIGHT_ARROW)?1:0,o-=e.isKeyDown(je.KEY_LEFT_ARROW)?1:0;let d=0;if(d+=e.isKeyDown(je.KEY_DOWN_ARROW)?1:0,d-=e.isKeyDown(je.KEY_UP_ARROW)?1:0,nc.setXY(o,d),!nc.equals(Ne.ZERO)){const g=r.translationMagnitude*i;nc.setMagnitude(g)}this.translationVector=nc,this.scale=t}computeScaleTargetFromKeyPress(){zd.setXY(0,0);const e=gr.value;if(e){const t=e.trail,i=t.lastNode();i.bounds.isFinite()&&zd.set(t.parentToGlobalPoint(i.center))}else{const t=Vi.getNextFocusable();if(t!==document.body){const i=t.offsetLeft+t.offsetWidth/2,s=t.offsetTop+t.offsetHeight/2;zd.setXY(i,s)}}return zd}}class Sk{constructor(e,t){const i=e.domEvent;this.isCtrlKeyDown=i.ctrlKey,this.scaleDelta=i.deltaY>0?-.5:.5,this.targetPoint=e.pointer.point;let s=i.deltaX*.5,r=i.deltaY*.5;i.deltaMode===self.WheelEvent.DOM_DELTA_LINE&&(s=s*25,r=r*25),i.shiftKey&&([s,r]=[r,-s]),this.translationVector=nc.setXY(s*t,r*t)}}class Ck{constructor(e,t){this.pointer=e,this.trail=t,this.initialPoint=e.point.copy()}}const Pk=(n,e)=>{const i=[];for(let r=0;r<8;r++)i[r]=(e-n)/8*(r*r);const s=i[7];for(let r=0;r<i.length;r++)i[r]=n+i[r]*(e-n)/s;return i},rb=n=>typeof n=="object"&&(n._isPressListener||n._isKeyboardDragListener);class Ek{constructor(){this._listener=null}initialize(e,t){this._listener=new K0(e,t)}dispose(){this._listener.dispose(),this._listener=null}get listener(){return this._listener}get initialized(){return!!this._listener}}const ff=new Ek,Th="(-?\\d{1,3}%?)",ab="(\\d+|\\d*\\.\\d+)",xh="(\\d{1,3})";function Ih(n){let e=1;return n.endsWith("%")&&(e=2.55,n=n.slice(0,n.length-1)),Xn(Number(n)*e)}class ct{constructor(e,t,i,s){this.changeEmitter=new Hi,this.set(e,t,i,s)}copy(){return new ct(this.r,this.g,this.b,this.a)}set(e,t,i,s){if(e===null)this.setRGBA(0,0,0,0);else if(typeof e=="string")this.setCSS(e);else if(e instanceof ct)this.setRGBA(e.r,e.g,e.b,e.a);else if(i===void 0){const r=e>>16&255,o=e>>8&255,d=e>>0&255,g=t===void 0?1:t;this.setRGBA(r,o,d,g)}else this.setRGBA(e,t,i,s===void 0?1:s);return this}getRed(){return this.r}get red(){return this.getRed()}set red(e){this.setRed(e)}setRed(e){return this.setRGBA(e,this.g,this.b,this.a)}getGreen(){return this.g}get green(){return this.getGreen()}set green(e){this.setGreen(e)}setGreen(e){return this.setRGBA(this.r,e,this.b,this.a)}getBlue(){return this.b}get blue(){return this.getBlue()}set blue(e){this.setBlue(e)}setBlue(e){return this.setRGBA(this.r,this.g,e,this.a)}getAlpha(){return this.a}get alpha(){return this.getAlpha()}set alpha(e){this.setAlpha(e)}setAlpha(e){return this.setRGBA(this.r,this.g,this.b,e)}setRGBA(e,t,i,s){return this.r=Xn(qs(e,0,255)),this.g=Xn(qs(t,0,255)),this.b=Xn(qs(i,0,255)),this.a=qs(s,0,1),this.updateColor(),this}blend(e,t){const s=Math.pow(this.r,2.4),r=Math.pow(e.r,2.4),o=Math.pow(this.g,2.4),d=Math.pow(e.g,2.4),g=Math.pow(this.b,2.4),y=Math.pow(e.b,2.4),S=Math.pow(s+(r-s)*t,1/2.4),T=Math.pow(o+(d-o)*t,1/2.4),L=Math.pow(g+(y-g)*t,1/2.4),x=this.a+(e.a-this.a)*t;return new ct(S,T,L,x)}computeCSS(){if(this.a===1)return`rgb(${this.r},${this.g},${this.b})`;{let e=this.a.toFixed(20);for(;e.length>=2&&e.endsWith("0")&&e[e.length-2]!==".";)e=e.slice(0,e.length-1);const t=this.a===0||this.a===1?this.a:e;return`rgba(${this.r},${this.g},${this.b},${t})`}}toCSS(){return this._css}setCSS(e){let t=!1;const i=ct.preprocessCSS(e);for(let s=0;s<ct.formatParsers.length;s++){const r=ct.formatParsers[s],o=r.regexp.exec(i);if(o){r.apply(this,o),t=!0;break}}if(!t)throw new Error(`Color unable to parse color string: ${e}`);return this.updateColor(),this}toNumber(){return(this.r<<16)+(this.g<<8)+this.b}updateColor(){const e=this._css;this._css=this.computeCSS(),e!==this._css&&this.changeEmitter.emit()}setImmutable(){return this}getCanvasStyle(){return this.toCSS()}setHSLA(e,t,i,s){e=e%360/360,t=qs(t/100,0,1),i=qs(i/100,0,1);let r;i<.5?r=i*(t+1):r=i+t-i*t;const o=i*2-r;return this.r=Xn(ct.hueToRGB(o,r,e+1/3)*255),this.g=Xn(ct.hueToRGB(o,r,e)*255),this.b=Xn(ct.hueToRGB(o,r,e-1/3)*255),this.a=qs(s,0,1),this.updateColor(),this}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}withAlpha(e){return new ct(this.r,this.g,this.b,e)}checkFactor(e){return e===void 0?.7:e}brighterColor(e){e=this.checkFactor(e);const t=Math.min(255,Math.floor(this.r/e)),i=Math.min(255,Math.floor(this.g/e)),s=Math.min(255,Math.floor(this.b/e));return new ct(t,i,s,this.a)}colorUtilsBrighter(e){e=this.checkFactor(e);const t=Math.min(255,this.getRed()+Math.floor(e*(255-this.getRed()))),i=Math.min(255,this.getGreen()+Math.floor(e*(255-this.getGreen()))),s=Math.min(255,this.getBlue()+Math.floor(e*(255-this.getBlue())));return new ct(t,i,s,this.getAlpha())}darkerColor(e){e=this.checkFactor(e);const t=Math.max(0,Math.floor(e*this.r)),i=Math.max(0,Math.floor(e*this.g)),s=Math.max(0,Math.floor(e*this.b));return new ct(t,i,s,this.a)}colorUtilsDarker(e){e=this.checkFactor(e);const t=Math.max(0,this.getRed()-Math.floor(e*this.getRed())),i=Math.max(0,this.getGreen()-Math.floor(e*this.getGreen())),s=Math.max(0,this.getBlue()-Math.floor(e*this.getBlue()));return new ct(t,i,s,this.getAlpha())}colorUtilsBrightness(e){return e===0?this:e>0?this.colorUtilsBrighter(e):this.colorUtilsDarker(-e)}toString(){return`${this.constructor.name}[r:${this.r} g:${this.g} b:${this.b} a:${this.a}]`}toHexString(){let e=this.toNumber().toString(16);for(;e.length<6;)e=`0${e}`;return`#${e}`}toStateObject(){return{r:this.r,g:this.g,b:this.b,a:this.a}}static hueToRGB(e,t,i){return i<0&&(i=i+1),i>1&&(i=i-1),i*6<1?e+(t-e)*i*6:i*2<1?t:i*3<2?e+(t-e)*(2/3-i)*6:e}static toColor(e){return e===null?ct.TRANSPARENT:e instanceof ct?e:typeof e=="string"?new ct(e):ct.toColor(e.value)}static interpolateRGBA(e,t,i){if(i<0||i>1)throw new Error(`distance must be between 0 and 1: ${i}`);const s=Math.floor(Dr(0,1,e.r,t.r,i)),r=Math.floor(Dr(0,1,e.g,t.g,i)),o=Math.floor(Dr(0,1,e.b,t.b,i)),d=Dr(0,1,e.a,t.a,i);return new ct(s,r,o,d)}static supersampleBlend(e){const i=e.map(L=>Math.pow(L.r/255,2.2)),s=e.map(L=>Math.pow(L.g/255,2.2)),r=e.map(L=>Math.pow(L.b/255,2.2)),o=e.map(L=>Math.pow(L.a,2.2)),d=he.sum(o);if(d===0)return new ct(0,0,0,0);const g=he.sum(he.range(0,e.length).map(L=>i[L]*o[L]))/d,y=he.sum(he.range(0,e.length).map(L=>s[L]*o[L]))/d,S=he.sum(he.range(0,e.length).map(L=>r[L]*o[L]))/d,T=d/e.length;return new ct(Math.floor(Math.pow(g,1/2.2)*255),Math.floor(Math.pow(y,1/2.2)*255),Math.floor(Math.pow(S,1/2.2)*255),Math.pow(T,1/2.2))}static fromStateObject(e){return new ct(e.r,e.g,e.b,e.a)}static hsla(e,t,i,s){return new ct(0,0,0,1).setHSLA(e,t,i,s)}static checkPaintString(e){}static checkPaint(e){typeof e=="string"?ct.checkPaintString(e):ii(e)&&typeof e.value=="string"&&ct.checkPaintString(e.value)}static getLuminance(e){const t=ct.toColor(e);return t.red*.2126+t.green*.7152+t.blue*.0722}static toGrayscale(e){const t=ct.getLuminance(e);return new ct(t,t,t)}static isDarkColor(e,t=186){return ct.getLuminance(e)<t}static isLightColor(e,t){return!ct.isDarkColor(e,t)}static grayColor(e,t){return new ct(e,e,e,t)}static preprocessCSS(e){let t=e.replace(/ /g,"").toLowerCase();const i=ct.colorKeywords[t];return i&&(t=`#${i}`),t}static isCSSColorString(e){const t=ct.preprocessCSS(e);for(let i=0;i<ct.formatParsers.length;i++)if(ct.formatParsers[i].regexp.exec(t))return!0;return!1}}ct.formatParsers=[{regexp:/^transparent$/,apply:(n,e)=>{n.setRGBA(0,0,0,0)}},{regexp:/^#(\w{1})(\w{1})(\w{1})$/,apply:(n,e)=>{n.setRGBA(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1)}},{regexp:/^#(\w{2})(\w{2})(\w{2})$/,apply:(n,e)=>{n.setRGBA(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1)}},{regexp:new RegExp(`^rgb\\(${Th},${Th},${Th}\\)$`),apply:(n,e)=>{n.setRGBA(Ih(e[1]),Ih(e[2]),Ih(e[3]),1)}},{regexp:new RegExp(`^rgba\\(${Th},${Th},${Th},${ab}\\)$`),apply:(n,e)=>{n.setRGBA(Ih(e[1]),Ih(e[2]),Ih(e[3]),Number(e[4]))}},{regexp:new RegExp(`^hsl\\(${xh},${xh}%,${xh}%\\)$`),apply:(n,e)=>{n.setHSLA(Number(e[1]),Number(e[2]),Number(e[3]),1)}},{regexp:new RegExp(`^hsla\\(${xh},${xh}%,${xh}%,${ab}\\)$`),apply:(n,e)=>{n.setHSLA(Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4]))}}];ct.basicColorKeywords={aqua:"00ffff",black:"000000",blue:"0000ff",fuchsia:"ff00ff",gray:"808080",green:"008000",lime:"00ff00",maroon:"800000",navy:"000080",olive:"808000",purple:"800080",red:"ff0000",silver:"c0c0c0",teal:"008080",white:"ffffff",yellow:"ffff00"};ct.colorKeywords={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};ct.BLACK=ct.black=new ct(0,0,0).setImmutable();ct.BLUE=ct.blue=new ct(0,0,255).setImmutable();ct.CYAN=ct.cyan=new ct(0,255,255).setImmutable();ct.DARK_GRAY=ct.darkGray=new ct(64,64,64).setImmutable();ct.GRAY=ct.gray=new ct(128,128,128).setImmutable();ct.GREEN=ct.green=new ct(0,255,0).setImmutable();ct.LIGHT_GRAY=ct.lightGray=new ct(192,192,192).setImmutable();ct.MAGENTA=ct.magenta=new ct(255,0,255).setImmutable();ct.ORANGE=ct.orange=new ct(255,200,0).setImmutable();ct.PINK=ct.pink=new ct(255,175,175).setImmutable();ct.RED=ct.red=new ct(255,0,0).setImmutable();ct.WHITE=ct.white=new ct(255,255,255).setImmutable();ct.YELLOW=ct.yellow=new ct(255,255,0).setImmutable();ct.TRANSPARENT=ct.transparent=new ct(0,0,0,0).setImmutable();new ct("blue");ct.ColorIO=new pi("ColorIO",{valueType:ct,documentation:"A color, with rgba",toStateObject:n=>n.toStateObject(),fromStateObject:n=>new ct(n.r,n.g,n.b,n.a),stateSchema:{r:Fi,g:Fi,b:Fi,a:Fi}});const Le={};Le.numActiveRenderers=4;Le.bitsPerRenderer=5;Le.bitmaskRendererArea=255;Le.bitmaskCurrentRendererArea=15;Le.bitmaskLacksOffset=65536;Le.bitmaskLacksShift=16;Le.bitmaskNodeDefault=Le.bitmaskRendererArea;Le.bitmaskCanvas=1;Le.bitmaskSVG=2;Le.bitmaskDOM=4;Le.bitmaskWebGL=8;Le.bitmaskSingleCanvas=256;Le.bitmaskSingleSVG=512;Le.bitmaskNotPainted=4096;Le.bitmaskBoundsValid=8192;Le.bitmaskNoPDOM=16384;Le.bitmaskLacksCanvas=Le.bitmaskCanvas<<Le.bitmaskLacksShift;Le.bitmaskLacksSVG=Le.bitmaskSVG<<Le.bitmaskLacksShift;Le.bitmaskLacksDOM=Le.bitmaskDOM<<Le.bitmaskLacksShift;Le.bitmaskLacksWebGL=Le.bitmaskWebGL<<Le.bitmaskLacksShift;Le.isCanvas=function(n){return(n&Le.bitmaskCanvas)!==0};Le.isSVG=function(n){return(n&Le.bitmaskSVG)!==0};Le.isDOM=function(n){return(n&Le.bitmaskDOM)!==0};Le.isWebGL=function(n){return(n&Le.bitmaskWebGL)!==0};const Dk={canvas:Le.bitmaskCanvas,svg:Le.bitmaskSVG,dom:Le.bitmaskDOM,webgl:Le.bitmaskWebGL};Le.fromName=function(n){return Dk[n]};Le.stripBitmask=function(n){return n&Le.bitmaskRendererArea};Le.createOrderBitmask=function(n,e,t,i){return n=n||0,e=e||0,t=t||0,i=i||0,n|e<<5|t<<10|i<<15};Le.bitmaskOrder=function(n,e){return e>0&&(n=n>>5*e),n&Le.bitmaskCurrentRendererArea};Le.bitmaskOrderFirst=function(n){return n&Le.bitmaskCurrentRendererArea};Le.bitmaskOrderSecond=function(n){return n>>5&Le.bitmaskCurrentRendererArea};Le.bitmaskOrderThird=function(n){return n>>10&Le.bitmaskCurrentRendererArea};Le.bitmaskOrderFourth=function(n){return n>>15&Le.bitmaskCurrentRendererArea};Le.pushOrderBitmask=function(n,e){let t=e;const i=Le.bitsPerRenderer*Le.numActiveRenderers;for(let s=0;s<=i;s+=Le.bitsPerRenderer){const r=n>>s&Le.bitmaskCurrentRendererArea;if(r===t)return n;if(r===0)return n=n|t<<s,n;if(n=n&~(Le.bitmaskCurrentRendererArea<<s),n=n|t<<s,t=r,t===e)return n}throw new Error("pushOrderBitmask overflow")};Le.createSelfDrawable=function(n,e,t,i){let s;if(Le.isCanvas(t))s=e.createCanvasDrawable(t,n);else if(Le.isSVG(t))s=e.createSVGDrawable(t,n);else if(Le.isDOM(t))s=e.createDOMDrawable(t,n);else if(Le.isWebGL(t))s=e.createWebGLDrawable(t,n);else throw new Error(`Unrecognized renderer: ${t}`);return s.setFittable(i),s};Le.webglCustom=1;Le.webglTexturedTriangles=2;Le.webglVertexColorPolygons=3;let Tk=1;class va{initialize(e){return this.id=this.id||Tk++,this.clean(),this.renderer=e,this.dirty=!0,this.isDisposed=!1,this.linksDirty=!1,this.visibleProperty=new Ni(!0),this.fittableProperty=new Ni(!0),this}clean(){this.parentDrawable=null,this.backbone=null,this.pendingParentDrawable=null,this.pendingBackbone=null,this.pendingAddition=!1,this.pendingRemoval=!1,this.previousDrawable=null,this.nextDrawable=null,this.oldPreviousDrawable=null,this.oldNextDrawable=null,this.visibleProperty&&this.visibleProperty.removeAllListeners(),this.fittableProperty&&this.fittableProperty.removeAllListeners()}update(){let e=!1;return this.dirty&&!this.isDisposed&&(this.dirty=!1,e=!0),e}setVisible(e){this.visibleProperty.value=e}set visible(e){this.setVisible(e)}isVisible(){return this.visibleProperty.value}get visible(){return this.isVisible()}setFittable(e){this.fittableProperty.value=e}set fittable(e){this.setFittable(e)}isFittable(){return this.fittableProperty.value}get fittable(){return this.isFittable()}setBlockBackbone(e){this.parentDrawable=e,this.backbone=e,this.pendingParentDrawable=e,this.pendingBackbone=e,this.pendingAddition=!1,this.pendingRemoval=!1}notePendingAddition(e,t,i){this.pendingParentDrawable=t,this.pendingBackbone=i,this.pendingAddition=!0,this.pendingRemoval||e.markDrawableChangedBlock(this)}notePendingRemoval(e){this.pendingRemoval=!0,this.pendingAddition||e.markDrawableChangedBlock(this)}notePendingMove(e,t){this.pendingParentDrawable=t,(!this.pendingRemoval||!this.pendingAddition)&&e.markDrawableChangedBlock(this),this.pendingAddition=!0,this.pendingRemoval=!0}updateBlock(){let e=!1;return(this.pendingRemoval||this.pendingAddition)&&(e=!this.pendingRemoval||!this.pendingAddition||this.parentDrawable!==this.pendingParentDrawable||this.backbone!==this.pendingBackbone,e?(this.pendingRemoval&&(this.parentDrawable.removeDrawable(this),this.pendingAddition||(this.pendingParentDrawable=null,this.pendingBackbone=null)),this.parentDrawable=this.pendingParentDrawable,this.backbone=this.pendingBackbone,this.pendingAddition&&this.parentDrawable.addDrawable(this)):this.pendingAddition&&Le.isCanvas(this.renderer)&&this.parentDrawable.onPotentiallyMovedDrawable(this),this.pendingAddition=!1,this.pendingRemoval=!1),e}updateLinks(){this.oldNextDrawable=this.nextDrawable,this.oldPreviousDrawable=this.previousDrawable,this.linksDirty=!1}markDirty(){this.dirty||(this.dirty=!0,this.parentDrawable&&this.parentDrawable.markDirtyDrawable(this))}markLinksDirty(e){this.linksDirty||(this.linksDirty=!0,e.markDrawableForLinksUpdate(this))}markForDisposal(e){va.disconnectBefore(this,e),va.disconnectAfter(this,e),e.markDrawableForDisposal(this)}disposeImmediately(e){va.disconnectBefore(this,e),va.disconnectAfter(this,e),this.dispose()}dispose(){this.clean(),this.isDisposed=!0,this.freeToPool()}audit(e,t,i){}toString(){return`${this.constructor.name}#${this.id}`}toDetailedString(){return this.toString()}static connectDrawables(e,t,i){e.nextDrawable!==t&&(e.nextDrawable&&(e.nextDrawable.markLinksDirty(i),e.nextDrawable.previousDrawable=null),t.previousDrawable&&(t.previousDrawable.markLinksDirty(i),t.previousDrawable.nextDrawable=null),e.nextDrawable=t,t.previousDrawable=e,e.markLinksDirty(i),t.markLinksDirty(i))}static disconnectBefore(e,t){e.previousDrawable&&(e.markLinksDirty(t),e.previousDrawable.markLinksDirty(t),e.previousDrawable.nextDrawable=null,e.previousDrawable=null)}static disconnectAfter(e,t){e.nextDrawable&&(e.markLinksDirty(t),e.nextDrawable.markLinksDirty(t),e.nextDrawable.previousDrawable=null,e.nextDrawable=null)}static listToArray(e,t){const i=[];for(let s=e;i.push(s),s!==t;s=s.nextDrawable);return i}static oldListToArray(e,t){const i=[];for(let s=e;i.push(s),s!==t;s=s.oldNextDrawable);return i}}class sp extends va{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return super.initialize(e),this.drawableVisibilityListener=this.drawableVisibilityListener||this.updateSelfVisibility.bind(this),this.instance=t,this.node=t.trail.lastNode(),this.node.attachDrawable(this),this.instance.selfVisibleEmitter.addListener(this.drawableVisibilityListener),this.updateSelfVisibility(),this}dispose(){this.instance.selfVisibleEmitter.removeListener(this.drawableVisibilityListener),this.node.detachDrawable(this),this.instance=null,this.node=null,super.dispose()}updateSelfVisibility(){this.visible=this.instance.selfVisible}toDetailedString(){return`${this.toString()} (${this.instance.trail.toPathString()})`}}class fh extends sp{initialize(e,t){super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute()}markTransformDirty(){this.markDirty()}markPaintDirty(){this.markDirty()}updateSelfVisibility(){super.updateSelfVisibility(),this.markDirty()}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}let xk=1;class Al{constructor(){this.id=`paint${xk++}`,this.transformMatrix=null}setTransformMatrix(e){return this.transformMatrix!==e&&(this.transformMatrix=e),this}toString(){return this.id}}Al.prototype.isPaint=!0;class Do extends Al{constructor(){super(),this.stops=[],this.lastStopRatio=0,this.canvasGradient=null,this.colorStopsDirty=!1,this.lastColorStopValues=[]}addColorStop(e,t){if(this.lastStopRatio>e)throw new Error("Color stops not specified in the order of increasing ratios");return this.lastStopRatio=e,this.stops.push({ratio:e,color:t}),this.lastColorStopValues.push(""),this}getSVGStops(){return this.stops}invalidateCanvasGradient(){this.colorStopsDirty=!0}haveCanvasColorStopsChanged(){if(this.lastColorStopValues===null)return!0;for(let e=0;e<this.stops.length;e++)if(Do.colorToString(this.stops[e].color)!==this.lastColorStopValues[e])return!0;return!1}getCanvasStyle(){if(!this.canvasGradient||this.colorStopsDirty&&this.haveCanvasColorStopsChanged()){this.colorStopsDirty=!1,bi(this.lastColorStopValues),this.canvasGradient=this.createCanvasGradient();for(let e=0;e<this.stops.length;e++){const t=this.stops[e],i=Do.colorToString(t.color);this.canvasGradient.addColorStop(t.ratio,i),this.lastColorStopValues.push(i)}}return this.canvasGradient}static colorToString(e){return ii(e)&&(e=e.value),e===null&&(e="transparent"),e instanceof ct&&(e=e.toCSS()),e}}Do.prototype.isGradient=!0;class Vc{constructor(e){this.primary=null,this.changeCallback=e,this.notifyChangeCallback=this.notifyChanged.bind(this),this.updateSecondaryListener=this.updateSecondary.bind(this),this.secondaryPropertyCountsMap={}}setPrimary(e){e!==this.primary&&(this.detachPrimary(this.primary),this.primary=e,this.attachPrimary(e),this.notifyChangeCallback())}clean(){this.detachPrimary(this.primary),this.primary=null}updateSecondary(e,t,i){const s=this.secondaryPropertyCountsMap[i.id];for(let r=0;r<s;r++)this.attachSecondary(e);this.notifyChangeCallback()}attachPrimary(e){if(ii(e))this.secondaryLazyLinkProperty(e),this.attachSecondary(e.get());else if(e instanceof ct)e.setImmutable();else if(e instanceof Do)for(let t=0;t<e.stops.length;t++)this.attachPrimary(e.stops[t].color)}detachPrimary(e){if(ii(e))this.secondaryUnlinkProperty(e);else if(e instanceof Do)for(let t=0;t<e.stops.length;t++)this.detachPrimary(e.stops[t].color)}attachSecondary(e){e instanceof ct&&e.setImmutable()}notifyChanged(){this.primary instanceof Do&&this.primary.invalidateCanvasGradient(),this.changeCallback()}secondaryLazyLinkProperty(e){const t=e.id;this.secondaryPropertyCountsMap[t]?this.secondaryPropertyCountsMap[t]++:(this.secondaryPropertyCountsMap[t]=1,e.lazyLink(this.updateSecondaryListener))}secondaryUnlinkProperty(e){const t=e.id;--this.secondaryPropertyCountsMap[t]===0&&(delete this.secondaryPropertyCountsMap[t],e.isDisposed||e.unlink(this.updateSecondaryListener))}}const zc=mr(n=>class extends n{initialize(e,t,...i){super.initialize(e,t,...i),this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new Vc(this.fillCallback),this.strokeObserver=this.strokeObserver||new Vc(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}dispose(){this.fillObserver.clean(),this.strokeObserver.clean(),super.dispose()}markDirtyFill(){this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}markDirtyStroke(){this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}markDirtyLineWidth(){this.markPaintDirty()}markDirtyLineOptions(){this.markPaintDirty()}markDirtyCachedPaints(){this.markPaintDirty()}});class Bm extends zc(fh){paintCanvas(e,t,i){const s=e.context;t.hasShape()&&(s.beginPath(),t._shape.writeToContext(s),t.hasFill()&&(t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e)))}markDirtyShape(){this.markPaintDirty()}}Ts.mixInto(Bm);const Hc=mr(n=>class extends n{initialize(e,t,...i){super.initialize(e,t,...i),this.dirtyFill=!0,this.hadStroke=!1,this.dirtyStroke=!0,this.dirtyLineWidth=!0,this.dirtyLineOptions=!0,this.dirtyCachedPaints=!0,this.lastCachedPaints=[],this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new Vc(this.fillCallback),this.strokeObserver=this.strokeObserver||new Vc(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}cleanPaintableState(){this.dirtyFill=!1,this.dirtyStroke=!1,this.dirtyLineWidth=!1,this.dirtyLineOptions=!1,this.dirtyCachedPaints=!1,this.hadStroke=this.node.getStroke()!==null}dispose(){super.dispose(),this.fillObserver.clean(),this.strokeObserver.clean()}markDirtyFill(){this.dirtyFill=!0,this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}markDirtyStroke(){this.dirtyStroke=!0,this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}markDirtyLineWidth(){this.dirtyLineWidth=!0,this.markPaintDirty()}markDirtyLineOptions(){this.dirtyLineOptions=!0,this.markPaintDirty()}markDirtyCachedPaints(){this.dirtyCachedPaints=!0,this.markPaintDirty()}}),Ik=mr(n=>class extends Hc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyShape=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyShape(){this.dirtyShape=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyShape=!1}}),ws="http://www.w3.org/2000/svg";class kk{constructor(){this.initialize()}initialize(){this.svgBlock=null,this.fillStyle="none",this.strokeStyle="none",this.fillPaint=null,this.strokePaint=null,this.updateBaseStyle(),this.strokeDetailStyle=""}dispose(){this.releaseFillPaint(),this.releaseStrokePaint()}releaseFillPaint(){this.fillPaint&&(this.svgBlock.decrementPaint(this.fillPaint),this.fillPaint=null)}releaseStrokePaint(){this.strokePaint&&(this.svgBlock.decrementPaint(this.strokePaint),this.strokePaint=null)}updateFill(e,t){const i=ob(t,e);t!==this.fillPaint&&(this.releaseFillPaint(),t&&t.isPaint&&(this.fillPaint=t,e.incrementPaint(t))),i!==this.fillStyle&&(this.fillStyle=i,this.updateBaseStyle())}updateStroke(e,t){const i=ob(t,e);t!==this.strokePaint&&(this.releaseStrokePaint(),t&&t.isPaint&&(this.strokePaint=t,e.incrementPaint(t))),i!==this.strokeStyle&&(this.strokeStyle=i,this.updateBaseStyle())}updateBaseStyle(){this.baseStyle=`fill: ${this.fillStyle}; stroke: ${this.strokeStyle};`}updateStrokeDetailStyle(e){let t="";const i=e.getLineWidth();i!==1&&(t+=`stroke-width: ${i};`);const s=e.getLineCap();s!=="butt"&&(t+=`stroke-linecap: ${s};`);const r=e.getLineJoin();r!=="miter"&&(t+=`stroke-linejoin: ${r};`);const o=e.getMiterLimit();t+=`stroke-miterlimit: ${o};`,e.hasLineDash()&&(t+=`stroke-dasharray: ${e.getLineDash().join(",")};`,t+=`stroke-dashoffset: ${e.getLineDashOffset()};`),this.strokeDetailStyle=t}updateSVGBlock(e){const t=this.svgBlock;t&&(this.fillPaint&&t.decrementPaint(this.fillPaint),this.strokePaint&&t.decrementPaint(this.strokePaint)),this.svgBlock=e,this.fillPaint&&e.incrementPaint(this.fillPaint),this.strokePaint&&e.incrementPaint(this.strokePaint)}}function ob(n,e){return n?n.toCSS?n.toCSS():n.isPaint?`url(#${n.id}-${e?e.id:"noblock"})`:n:"none"}const Hd=[],Kd=[],lb=[],Lk=[];class bu extends sp{initialize(e,t,i,s){return super.initialize(e,t),this.usesPaint=i,this.keepElements=s,this.svgElement=null,this.svgBlock=null,this.usesPaint&&(this.paintState?this.paintState.initialize():this.paintState=new kk),this}update(){return super.update()?(this.updateSVG(),!0):!1}setCachedPaints(e){Wh(this.lastCachedPaints,e,Hd,Kd,lb);for(let t=0;t<Kd.length;t++)this.svgBlock.incrementPaint(Kd[t]);for(let t=0;t<Hd.length;t++)this.svgBlock.decrementPaint(Hd[t]);Hd.length=0,Kd.length=0,lb.length=0,this.lastCachedPaints.length=0,this.lastCachedPaints.push(...e)}updateSVG(){this.usesPaint&&this.dirtyCachedPaints&&this.setCachedPaints(this.node._cachedPaints),this.paintDirty&&this.updateSVGSelf(this.node,this.svgElement),this.setToCleanState()}updateFillStrokeStyle(e){if(!this.usesPaint)return;this.dirtyFill&&this.paintState.updateFill(this.svgBlock,this.node.getFillValue()),this.dirtyStroke&&this.paintState.updateStroke(this.svgBlock,this.node.getStrokeValue());const t=this.dirtyLineWidth||this.dirtyLineOptions;t&&this.paintState.updateStrokeDetailStyle(this.node),(this.dirtyFill||this.dirtyStroke||t)&&e.setAttribute("style",this.paintState.baseStyle+this.paintState.strokeDetailStyle),this.cleanPaintableState()}updateSVGBlock(e){const t=this.svgBlock;if(this.usesPaint&&t)for(let i=0;i<this.lastCachedPaints.length;i++)t.decrementPaint(this.lastCachedPaints[i]);if(this.svgBlock=e,this.usesPaint)for(let i=0;i<this.lastCachedPaints.length;i++)e.incrementPaint(this.lastCachedPaints[i]);this.updateDefsSelf&&this.updateDefsSelf(e),this.usesPaint&&this.paintState.updateSVGBlock(e),this.usesPaint&&this.markDirtyFill(),this.usesPaint&&this.markDirtyStroke()}dispose(){this.keepElements||(this.svgElement=null),this.updateDefsSelf&&this.updateDefsSelf(null),this.usesPaint&&(this.setCachedPaints(Lk),this.paintState.dispose()),this.defs=null,this.svgBlock=null,super.dispose()}}const Nk=!0;class g1 extends Ik(bu){initialize(e,t){super.initialize(e,t,!0,Nk),this.svgElement=this.svgElement||document.createElementNS(ws,"path")}updateSVGSelf(){const e=this.svgElement;if(this.dirtyShape){let t=this.node.hasShape()?this.node._shape.getSVGPath():"";t||(t="M0 0"),e.setAttribute("d",`${t}${An.safari?" M0 0":""}`)}this.updateFillStrokeStyle(e)}}Ts.mixInto(g1);class Bk{constructor(e){this.node=e,this.pdomDisplays=[]}onAddChild(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.addPDOMDisplays(this.pdomDisplays)}onRemoveChild(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.removePDOMDisplays(this.pdomDisplays)}onSummaryChange(e,t){if(this.node.visible&&this.node.pdomVisible){const i=!(Le.bitmaskNoPDOM&e),s=!(Le.bitmaskNoPDOM&t);s&&!i&&this.addAllPDOMDisplays(),!s&&i&&this.removeAllPDOMDisplays()}}onVisibilityChange(e){this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}onPDOMVisibilityChange(e){this.node.visible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}onAddedRootedDisplay(e){e._accessible&&this.canHavePDOMDisplays()&&this.addPDOMDisplays([e])}onRemovedRootedDisplay(e){e._accessible&&this.canHavePDOMDisplays()&&this.removePDOMDisplays([e])}canHavePDOMDisplays(){return this.node.visible&&this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()}addAllPDOMDisplays(){let e;const t=[];for(e=0;e<this.node._parents.length;e++)Array.prototype.push.apply(t,this.node._parents[e]._pdomDisplaysInfo.pdomDisplays);for(e=0;e<this.node._rootedDisplays.length;e++){const i=this.node._rootedDisplays[e];i._accessible&&t.push(i)}this.addPDOMDisplays(t)}removeAllPDOMDisplays(){this.removePDOMDisplays(this.pdomDisplays.slice())}addPDOMDisplays(e){if(e.length!==0){Array.prototype.push.apply(this.pdomDisplays,e);for(let t=0;t<this.node._children.length;t++)this.node._children[t]._pdomDisplaysInfo.canHavePDOMDisplays()&&this.node._children[t]._pdomDisplaysInfo.addPDOMDisplays(e);this.node.pdomDisplaysEmitter.emit()}}removePDOMDisplays(e){if(e.length!==0){let t;for(t=e.length-1;t>=0;t--)this.pdomDisplays.lastIndexOf(e[t]),this.pdomDisplays.splice(t,1);for(t=0;t<this.node._children.length;t++){const i=this.node._children[t];i._pdomDisplaysInfo.canHavePDOMDisplays()&&!i._isGettingRemovedFromParent&&i._pdomDisplaysInfo.removePDOMDisplays(e)}this.node.pdomDisplaysEmitter.emit()}}}const Rk=n=>n.pointerType===self.MSPointerEvent.MSPOINTER_TYPE_TOUCH?"touch":n.pointerType===self.MSPointerEvent.MSPOINTER_TYPE_PEN?"pen":n.pointerType===self.MSPointerEvent.MSPOINTER_TYPE_MOUSE?"mouse":n.pointerType;class ci extends rr{}ci.POINTER_TYPE=new ci;ci.MS_POINTER_TYPE=new ci;ci.TOUCH_TYPE=new ci;ci.MOUSE_TYPE=new ci;ci.WHEEL_TYPE=new ci;ci.ALT_TYPE=new ci;ci.enumeration=new oa(ci,{phetioDocumentation:"The type of batched event"});class wc{constructor(e,t,i){this.initialize(e,t,i)}initialize(e,t,i){return this.eventContext=e,this.type=t,this.callback=i,this}run(e){const t=this.callback;if(e.validatePointers(),this.type===ci.POINTER_TYPE){const i=this.eventContext,s=i.domEvent;t.call(e,s.pointerId,s.pointerType,e.pointFromEvent(s),i)}else if(this.type===ci.MS_POINTER_TYPE){const i=this.eventContext,s=i.domEvent;t.call(e,s.pointerId,Rk(s),e.pointFromEvent(s),i)}else if(this.type===ci.TOUCH_TYPE){const i=this.eventContext,s=i.domEvent;for(let r=0;r<s.changedTouches.length;r++){const o=s.changedTouches.item(r);t.call(e,o.identifier,e.pointFromEvent(o),i)}}else if(this.type===ci.MOUSE_TYPE){const i=this.eventContext,s=e.pointFromEvent(i.domEvent);t===e.mouseDown?t.call(e,null,s,i):t.call(e,s,i)}else if(this.type===ci.WHEEL_TYPE||this.type===ci.ALT_TYPE)t.call(e,this.eventContext);else throw new Error(`bad type value: ${this.type}`)}dispose(){this.eventContext=null,this.callback=null,this.freeToPool()}freeToPool(){wc.pool.freeToPool(this)}}wc.pool=new Fs(wc);class es{constructor(e){this.domEvent=e,this.activeElement=document.activeElement}static createSynthetic(){return new es(new self.Event("synthetic"))}allowsDOMInput(){var t,i;const e=(t=this.domEvent)==null?void 0:t.target;if(e instanceof Element){let s=e;for(;s;){if(s instanceof HTMLElement&&((i=s.dataset)==null?void 0:i.sceneryAllowInput)==="true")return!0;s=s.parentNode}}return!1}}const pn=new pi("EventContextIO",{valueType:es,documentation:"A DOM event and its context",toStateObject:n=>({domEvent:u1(n.domEvent)}),fromStateObject:n=>new es(c1(n.domEvent)),stateSchema:()=>({domEvent:$l})}),Xt={};function np(n){try{const e=document.createElement("canvas");e.width=1,e.height=1;const t=e.getContext("2d");t.fillStyle="black",t.fillRect(0,0,1,1);const i=e.toDataURL([n]),s=`data:${n}`;return i.slice(0,s.length)===s}catch{return!1}}function rp(n,e){const t=document.createElement("canvas");t.width=1,t.height=1;const i=t.getContext("2d"),s=document.createElement("img");s.crossOrigin="Anonymous";const r=()=>{try{i.drawImage(s,0,0),t.toDataURL(),Xt[n]=!0}catch{Xt[n]=!1}};s.onload=r;try{s.src=e,s.complete&&r()}catch{Xt[n]=!1}}Xt.canvasPNGOutput=np("image/png");Xt.canvasJPEGOutput=np("image/jpeg");Xt.canvasGIFOutput=np("image/gif");Xt.canvasICONOutput=np("image/x-icon");rp("canvasPNGInput","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg==");rp("canvasJPEGInput","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8qqKKKAP/2Q==");rp("canvasSVGInput","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3cG9ydD0iMCAwIDEgMSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgPg0KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiByeD0iMCIgcnk9IjAiIHN0eWxlPSJmaWxsOiBibGFjazsgc3Ryb2tlOiBub25lOyI+PC9yZWN0Pg0KPC9zdmc+DQo=");rp("canvasGIFInput","data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICRAEAOw==");const m1=document.createElement("canvas"),Kc=m1.getContext("2d");Xt.toDataURLHD=Bs(m1,"toDataURLHD");Xt.createImageDataHD=Bs(Kc,"createImageDataHD");Xt.getImageDataHD=Bs(Kc,"getImageDataHD");Xt.putImageDataHD=Bs(Kc,"putImageDataHD");Xt.currentTransform=Bs(Kc,"currentTransform");Xt.canvasFilter=Bs(Kc,"filter");const U0=document.createElement("span"),Io=document.createElement("div");Xt.textStroke=Bs(U0.style,"textStroke");Xt.textStrokeColor=Bs(U0.style,"textStrokeColor");Xt.textStrokeWidth=Bs(U0.style,"textStrokeWidth");Xt.transform=Bs(Io.style,"transform");Xt.transformOrigin=Bs(Io.style,"transformOrigin");Xt.backfaceVisibility=Bs(Io.style,"backfaceVisibility");Xt.borderRadius=Bs(Io.style,"borderRadius");Xt.userSelect=Bs(Io.style,"userSelect");Xt.touchAction=Bs(Io.style,"touchAction");Xt.touchCallout=Bs(Io.style,"touchCallout");Xt.userDrag=Bs(Io.style,"userDrag");Xt.tapHighlightColor=Bs(Io.style,"tapHighlightColor");Xt.fontSmoothing=Bs(Io.style,"fontSmoothing");Xt.requestAnimationFrame=Bs(self,"requestAnimationFrame");Xt.cancelAnimationFrame=Bs(self,"cancelAnimationFrame");Xt.setStyle=(n,e,t)=>{e!==void 0&&(n.style[e]=t)};Xt.passive=!1;window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{Xt.passive=!0}}));class Ln{}Ln.userGestureEmitter=new _n;Ln.inputListeners=[];const Mk=()=>{};let hb=!1;class zt{static addDisplay(e,t,i){hb||(hb=!0,Fa.attachToWindow(),ys.attachToWindow()),zt.attachedDisplays.push(e),t?zt.attachedDisplays.length===1&&zt.connectWindowListeners(i):zt.addOrRemoveListeners(e.domElement,!0,i),e.domElement.addEventListener("wheel",zt.onwheel,zt.getEventOptions(i,!0))}static removeDisplay(e,t,i){mn(zt.attachedDisplays,e),t?zt.attachedDisplays.length===0&&zt.disconnectWindowListeners(i):zt.addOrRemoveListeners(e.domElement,!1,i),e.domElement.removeEventListener("wheel",zt.onwheel,zt.getEventOptions(i,!0))}static getEventOptions(e,t){if(Xt.passive&&e!==null){const s={passive:e};return t&&(s.capture=!1),s}else return!1}static getNonWheelUsedTypes(e){let t;return!!(self.navigator&&self.navigator.pointerEnabled||self.PointerEvent)?t=this.pointerListenerTypes:this.canUseMSPointerEvents?t=this.msPointerListenerTypes:t=this.touchListenerTypes.concat(this.mouseListenerTypes),t=t.concat(this.altListenerTypes),t}static connectWindowListeners(e){this.addOrRemoveListeners(self,!0,e)}static disconnectWindowListeners(e){this.addOrRemoveListeners(self,!1,e)}static addOrRemoveListeners(e,t,i){const s=e===window,r=t?1:-1;s?zt.listenersAttachedToWindow+=r:zt.listenersAttachedToElement+=r;const o=t?"addEventListener":"removeEventListener",d=this.getNonWheelUsedTypes(e===self);for(let g=0;g<d.length;g++){const y=d[g];s&&document[o](y,Mk,zt.getEventOptions(i,!1));const S=zt[`on${y}`];e[o](y,S,zt.getEventOptions(i,!0))}}static batchWindowEvent(e,t,i,s){for(let r=0;r<zt.attachedDisplays.length;r++){const o=zt.attachedDisplays[r],d=o._input;e.domEvent.currentTarget&&e.domEvent.currentTarget!==self&&e.domEvent.currentTarget!==o.domElement||(!zt.blockFocusCallbacks||i!=="focusIn"&&i!=="focusOut")&&d.batchEvent(e,t,d[i],s)}}static onpointerdown(e){const t=new es(e);e.pointerType==="mouse"&&Ln.userGestureEmitter.emit(),zt.batchWindowEvent(t,ci.POINTER_TYPE,"pointerDown",!1)}static onpointerup(e){const t=new es(e);Ln.userGestureEmitter.emit(),zt.batchWindowEvent(t,ci.POINTER_TYPE,"pointerUp",!0)}static onpointermove(e){zt.batchWindowEvent(new es(e),ci.POINTER_TYPE,"pointerMove",!1)}static onpointerover(e){zt.batchWindowEvent(new es(e),ci.POINTER_TYPE,"pointerOver",!1)}static onpointerout(e){zt.batchWindowEvent(new es(e),ci.POINTER_TYPE,"pointerOut",!1)}static onpointercancel(e){zt.batchWindowEvent(new es(e),ci.POINTER_TYPE,"pointerCancel",!1)}static ongotpointercapture(e){zt.batchWindowEvent(new es(e),ci.POINTER_TYPE,"gotPointerCapture",!1)}static onlostpointercapture(e){zt.batchWindowEvent(new es(e),ci.POINTER_TYPE,"lostPointerCapture",!1)}static onMSPointerDown(e){zt.batchWindowEvent(new es(e),ci.MS_POINTER_TYPE,"pointerDown",!1)}static onMSPointerUp(e){zt.batchWindowEvent(new es(e),ci.MS_POINTER_TYPE,"pointerUp",!0)}static onMSPointerMove(e){zt.batchWindowEvent(new es(e),ci.MS_POINTER_TYPE,"pointerMove",!1)}static onMSPointerOver(e){zt.batchWindowEvent(new es(e),ci.MS_POINTER_TYPE,"pointerOver",!1)}static onMSPointerOut(e){zt.batchWindowEvent(new es(e),ci.MS_POINTER_TYPE,"pointerOut",!1)}static onMSPointerCancel(e){zt.batchWindowEvent(new es(e),ci.MS_POINTER_TYPE,"pointerCancel",!1)}static ontouchstart(e){zt.batchWindowEvent(new es(e),ci.TOUCH_TYPE,"touchStart",!1)}static ontouchend(e){const t=new es(e);Ln.userGestureEmitter.emit(),zt.batchWindowEvent(t,ci.TOUCH_TYPE,"touchEnd",!0)}static ontouchmove(e){zt.batchWindowEvent(new es(e),ci.TOUCH_TYPE,"touchMove",!1)}static ontouchcancel(e){zt.batchWindowEvent(new es(e),ci.TOUCH_TYPE,"touchCancel",!1)}static onmousedown(e){const t=new es(e);Ln.userGestureEmitter.emit(),zt.batchWindowEvent(t,ci.MOUSE_TYPE,"mouseDown",!1)}static onmouseup(e){const t=new es(e);Ln.userGestureEmitter.emit(),zt.batchWindowEvent(t,ci.MOUSE_TYPE,"mouseUp",!0)}static onmousemove(e){zt.batchWindowEvent(new es(e),ci.MOUSE_TYPE,"mouseMove",!1)}static onmouseover(e){zt.batchWindowEvent(new es(e),ci.MOUSE_TYPE,"mouseOver",!1)}static onmouseout(e){zt.batchWindowEvent(new es(e),ci.MOUSE_TYPE,"mouseOut",!1)}static onwheel(e){zt.batchWindowEvent(new es(e),ci.WHEEL_TYPE,"wheel",!1)}static onfocusin(e){zt.dispatchingFocusEvents=!0,ys.updatePDOMFocusFromEvent(zt.attachedDisplays,e,!0),zt.batchWindowEvent(new es(e),ci.ALT_TYPE,"focusIn",!0),zt.dispatchingFocusEvents=!1}static onfocusout(e){zt.dispatchingFocusEvents=!0,ys.updatePDOMFocusFromEvent(zt.attachedDisplays,e,!1),zt.batchWindowEvent(new es(e),ci.ALT_TYPE,"focusOut",!0),zt.dispatchingFocusEvents=!1}static oninput(e){zt.batchWindowEvent(new es(e),ci.ALT_TYPE,"input",!0)}static onchange(e){zt.batchWindowEvent(new es(e),ci.ALT_TYPE,"change",!0)}static onclick(e){zt.batchWindowEvent(new es(e),ci.ALT_TYPE,"click",!0)}static onkeydown(e){zt.batchWindowEvent(new es(e),ci.ALT_TYPE,"keyDown",!0)}static onkeyup(e){zt.batchWindowEvent(new es(e),ci.ALT_TYPE,"keyUp",!0)}}zt.blockFocusCallbacks=!1;zt.dispatchingFocusEvents=!1;zt.listenersAttachedToWindow=0;zt.listenersAttachedToElement=0;zt.attachedDisplays=[];zt.canUseMSPointerEvents=self.navigator&&self.navigator.msPointerEnabled;zt.pointerListenerTypes=["pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"];zt.msPointerListenerTypes=["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerCancel"];zt.touchListenerTypes=["touchstart","touchend","touchmove","touchcancel"];zt.mouseListenerTypes=["mousedown","mouseup","mousemove","mouseover","mouseout"];zt.wheelListenerTypes=["wheel"];zt.altListenerTypes=Vi.DOM_EVENTS;class ub{constructor(e,t,i){this.pdomInstance=e,this.trail=t,this.isRoot=i,this.isRoot=i,this.fullTrail=this.pdomInstance.trail.copy();for(let s=this.isRoot?0:1;s<this.trail.length;s++)this.fullTrail.addDescendant(this.trail.nodes[s])}}const Ok="PARAGRAPH_SIBLING",Rm="CONTAINER_PARENT",qk="DESCRIPTION_SIBLING",Fk="LABEL_SIBLING",Fh="PRIMARY_SIBLING",rc=Fh,zk=Fk,Hk=qk,Kk=Ok,Uk=Rm,Yk=Vi.TAGS.LABEL,Wk=Vi.TAGS.INPUT,cb="disabled",Gk={attributes:!1,childList:!0,characterData:!0};let Xk=1;const Nl=new ot(0,0,0,0),Qo=new ot(0,0,0,0),db=new mt,fb=new mt,jk=new mt;class ir{constructor(e,t){this.initializePDOMPeer(e,t)}initializePDOMPeer(e,t){return t=jn({primarySibling:null},t),this.id=this.id||Xk++,this.pdomInstance=e,this.node=this.pdomInstance.node,this.display=e.display,this.trail=e.trail,this.visible=null,this.focusable=null,this._labelSibling=null,this._descriptionSibling=null,this._accessibleParagraphSibling=null,this._containerParent=null,this.topLevelElements=[],this.positionDirty=!1,this.forceReflowWorkaround=!1,this.childPositionDirty=!1,this.positionInPDOM=!1,this.mutationObserver=this.mutationObserver||new MutationObserver(this.invalidateCSSPositioning.bind(this,!1)),this.transformListener=this.transformListener||this.invalidateCSSPositioning.bind(this,!1),this.pdomInstance.transformTracker.addListener(this.transformListener),this._preservedDisabledValue=null,this.isDisposed=!1,this.pdomInstance.isRootInstance&&(this._primarySibling=t.primarySibling,this._primarySibling.classList.add(F0.ROOT_CLASS_NAME),Vi.BLOCKED_DOM_EVENTS.forEach(i=>{this._primarySibling.addEventListener(i,s=>{s.stopPropagation()})})),this}update(e){let t=this.node.getBaseOptions();const i=[];this.mutationObserver.disconnect(),(this.node.accessibleName!==null||this.node._accessibleNameDirty)&&(this.node.accessibleName===null?this.node.accessibleNameBehavior(this.node,{},this.node.accessibleName,i):t=this.node.accessibleNameBehavior(this.node,t,this.node.accessibleName,i),this.node._accessibleNameDirty=!1),this.node.pdomHeading!==null&&(t=this.node.pdomHeadingBehavior(this.node,t,this.node.pdomHeading,i)),(this.node.accessibleHelpText!==null||this.node._accessibleHelpTextDirty)&&(this.node.accessibleHelpText===null?this.node.accessibleHelpTextBehavior(this.node,{},this.node.accessibleHelpText,i):t=this.node.accessibleHelpTextBehavior(this.node,t,this.node.accessibleHelpText,i),this.node._accessibleHelpTextDirty=!1),t.accessibleParagraph&&(this._accessibleParagraphSibling=Uu("p",!1),this.setAccessibleParagraphContent(t.accessibleParagraph)),t.tagName&&(this._primarySibling=Uu(t.tagName,this.node.focusable,{namespace:t.pdomNamespace}),t.containerTagName&&(this._containerParent=Uu(t.containerTagName,!1)),t.labelTagName&&(this._labelSibling=Uu(t.labelTagName,!1,{excludeFromInput:this.node.excludeLabelSiblingFromInput})),t.descriptionTagName&&(this._descriptionSibling=Uu(t.descriptionTagName,!1))),e&&this.updateIndicesStringAndElementIds(),this.orderElements(t),this._primarySibling&&(this.mutationObserver.observe(this._primarySibling,Gk),t.labelContent&&t.labelTagName!==null&&this.setLabelSiblingContent(t.labelContent),t.innerContent&&t.tagName!==null&&this.setPrimarySiblingContent(t.innerContent),t.descriptionContent&&t.descriptionTagName!==null&&this.setDescriptionSiblingContent(t.descriptionContent),t.tagName.toUpperCase()===Wk&&t.inputType&&this.setAttributeToElement("type",t.inputType),t.labelTagName&&t.labelTagName.toUpperCase()===Yk&&this.setAttributeToElement("for",this._primarySibling.id,{elementName:ir.LABEL_SIBLING}),this.setFocusable(this.node.focusable),this.setPositionInPDOM(this.node.positionInPDOM),this.onAriaLabelledbyAssociationChange(),this.onAriaDescribedbyAssociationChange(),this.onActiveDescendantAssociationChange(),this.onAttributeChange(t),this.onClassChange(),this.onInputValueChange(),this.node.updateOtherNodesAriaLabelledby(),this.node.updateOtherNodesAriaDescribedby(),this.node.updateOtherNodesActiveDescendant()),i.forEach(s=>{s()})}orderElements(e){this._containerParent?(this._containerParent.insertBefore(this._primarySibling,this._containerParent.children[0]||null),this.topLevelElements=[this._containerParent]):this.topLevelElements=[this._labelSibling,this._descriptionSibling,this._primarySibling,this._accessibleParagraphSibling].filter(he.identity),this._labelSibling&&this.arrangeContentElement(this._labelSibling,e.appendLabel),this._descriptionSibling&&this.arrangeContentElement(this._descriptionSibling,e.appendDescription),this._accessibleParagraphSibling&&this.arrangeContentElement(this._accessibleParagraphSibling,!0)}getPlaceableSibling(){return this._primarySibling||this._accessibleParagraphSibling}getPrimarySibling(){return this._primarySibling}get primarySibling(){return this.getPrimarySibling()}getLabelSibling(){return this._labelSibling}get labelSibling(){return this.getLabelSibling()}getDescriptionSibling(){return this._descriptionSibling}get descriptionSibling(){return this.getDescriptionSibling()}getContainerParent(){return this._containerParent}get containerParent(){return this.getContainerParent()}getTopLevelElementContainingPrimarySibling(){return this._containerParent||this._primarySibling}onAriaLabelledbyAssociationChange(){this.removeAttributeFromAllElements("aria-labelledby");for(let e=0;e<this.node.ariaLabelledbyAssociations.length;e++){const t=this.node.ariaLabelledbyAssociations[e];this.setAssociationAttribute("aria-labelledby",t)}}onAriaDescribedbyAssociationChange(){this.removeAttributeFromAllElements("aria-describedby");for(let e=0;e<this.node.ariaDescribedbyAssociations.length;e++){const t=this.node.ariaDescribedbyAssociations[e];this.setAssociationAttribute("aria-describedby",t)}}onActiveDescendantAssociationChange(){this.removeAttributeFromAllElements("aria-activedescendant");for(let e=0;e<this.node.activeDescendantAssociations.length;e++){const t=this.node.activeDescendantAssociations[e];this.setAssociationAttribute("aria-activedescendant",t)}}handleAttributeWithPDOMOption(e,t){typeof t=="string"?this.setAttributeToElement(e,t):this.removeAttributeFromElement(e)}onAttributeChange(e){for(let t=0;t<this.node.pdomAttributes.length;t++){const i=this.node.pdomAttributes[t];this.setAttributeToElement(i.attribute,i.value,i.options)}this.handleAttributeWithPDOMOption("aria-label",e.ariaLabel),this.handleAttributeWithPDOMOption("role",e.ariaRole)}onClassChange(){for(let e=0;e<this.node.pdomClasses.length;e++){const t=this.node.pdomClasses[e];this.setClassToElement(t.className,t.options)}}onInputValueChange(){if(this.node.inputValue===null)this.removeAttributeFromElement("value");else{const e=`${this.node.inputValue}`;this.setAttributeToElement("value",e,{type:"property"})}}getElementByName(e){if(e===ir.PRIMARY_SIBLING)return this._primarySibling;if(e===ir.LABEL_SIBLING)return this._labelSibling;if(e===ir.DESCRIPTION_SIBLING)return this._descriptionSibling;if(e===ir.CONTAINER_PARENT)return this._containerParent;if(e===Kk)return this._accessibleParagraphSibling;throw new Error(`invalid elementName name: ${e}`)}setAttributeToElement(e,t,i){i=jn({namespace:null,type:"attribute",elementName:rc,element:null},i);const s=i.element||this.getElementByName(i.elementName),r=Vi.unwrapProperty(t);let o=r;typeof r=="string"&&(o=D0(r)),e===cb&&!this.display.interactive&&(this._preservedDisabledValue=i.type==="property"?o:!0),i.namespace?s.setAttributeNS(i.namespace,e,o):i.type==="property"?s[e]=o:s.setAttribute(e,o)}removeAttributeFromElement(e,t){t=jn({namespace:null,elementName:rc,element:null},t);const i=t.element||this.getElementByName(t.elementName);t.namespace?i.removeAttributeNS(t.namespace,e):e===cb&&!this.display.interactive?this._preservedDisabledValue=!1:i.removeAttribute(e)}removeAttributeFromAllElements(e){this._primarySibling&&this._primarySibling.removeAttribute(e),this._labelSibling&&this._labelSibling.removeAttribute(e),this._descriptionSibling&&this._descriptionSibling.removeAttribute(e),this._accessibleParagraphSibling&&this._accessibleParagraphSibling.removeAttribute(e),this._containerParent&&this._containerParent.removeAttribute(e)}setClassToElement(e,t){t=jn({elementName:rc},t),this.getElementByName(t.elementName).classList.add(e)}removeClassFromElement(e,t){t=jn({elementName:rc},t),this.getElementByName(t.elementName).classList.remove(e)}setAssociationAttribute(e,t){const i=t.otherNode.getPDOMInstances();if(i.length>0){const s=i[0];s===this.pdomInstance&&(s.peer=this);const r=s.peer.getElementByName(t.otherElementName),o=this.getElementByName(t.thisElementName);if(o&&r){const g=[(o.getAttribute(e)||"").trim(),r.id].join(" ").trim();this.setAttributeToElement(e,g,{elementName:t.thisElementName})}}}arrangeContentElement(e,t){if(this.topLevelElements[0]===this._containerParent)t?this._containerParent.appendChild(e):this._containerParent.insertBefore(e,this._primarySibling);else{mn(this.topLevelElements,e);const i=this.topLevelElements.indexOf(this._primarySibling),s=t?this.topLevelElements.length:i;this.topLevelElements.splice(s,0,e)}}isVisible(){return this.visible===null?!0:this.visible}setVisible(e){if(this.visible!==e){this.visible=e;for(let t=0;t<this.topLevelElements.length;t++){const i=this.topLevelElements[t];e?this.removeAttributeFromElement("hidden",{element:i}):this.setAttributeToElement("hidden","",{element:i})}this.invalidateCSSPositioning(An.safari)}}isFocused(){const e=_c(this.trail,this.display.rootNode);return gr.value&&gr.value.trail.equals(e)}focus(){ys.windowHasFocusProperty.value&&this._primarySibling.focus()}blur(){this._primarySibling.blur()}setFocusable(e){const t=this.isFocused();this.focusable!==e&&(this.focusable=e,Vi.overrideFocusWithTabIndex(this.primarySibling,e),t&&!e&&this.blur(),this.invalidateCSSPositioning())}setLabelSiblingContent(e){this._labelSibling&&Vi.setTextContent(this._labelSibling,e)}setDescriptionSiblingContent(e){this._descriptionSibling&&Vi.setTextContent(this._descriptionSibling,e)}setAccessibleParagraphContent(e){this._accessibleParagraphSibling&&Vi.setTextContent(this._accessibleParagraphSibling,e)}setPrimarySiblingContent(e){this._primarySibling&&Vi.setTextContent(this._primarySibling,e)}setPDOMTransformSourceNode(e){this.pdomInstance.transformTracker.removeListener(this.transformListener),this.pdomInstance.updateTransformTracker(e),this.pdomInstance.transformTracker.addListener(this.transformListener),this.invalidateCSSPositioning()}setPositionInPDOM(e){this.positionInPDOM=e,this.invalidateCSSPositioning()}getElementId(e,t){return`display${this.display.id}-${e}-${t}`}updateIndicesStringAndElementIds(){const e=this.pdomInstance.getPDOMInstanceUniqueId();this._primarySibling&&(this._primarySibling.setAttribute(Vi.DATA_PDOM_UNIQUE_ID,e),this._primarySibling.id=this.getElementId("primary",e)),this._labelSibling&&(this._labelSibling.setAttribute(Vi.DATA_PDOM_UNIQUE_ID,e),this._labelSibling.id=this.getElementId("label",e)),this._descriptionSibling&&(this._descriptionSibling.setAttribute(Vi.DATA_PDOM_UNIQUE_ID,e),this._descriptionSibling.id=this.getElementId("description",e)),this._accessibleParagraphSibling&&(this._accessibleParagraphSibling.setAttribute(Vi.DATA_PDOM_UNIQUE_ID,e),this._accessibleParagraphSibling.id=this.getElementId("paragraph",e)),this._containerParent&&(this._containerParent.setAttribute(Vi.DATA_PDOM_UNIQUE_ID,e),this._containerParent.id=this.getElementId("container",e))}invalidateCSSPositioning(e=!1){if(!this.positionDirty){if(this.positionDirty=!0,e){this.forceReflowWorkaround=!0;for(let i=0;i<this.topLevelElements.length;i++)this.topLevelElements[i].style.transform="scale(1)"}let t=this.pdomInstance.parent;for(;t;)t.peer.childPositionDirty=!0,t=t.parent}}positionElements(e){const t=this.getPlaceableSibling();if(e){const i=this.node.pdomTransformSourceNode||this.node;if(Nl.set(i.localBounds),Nl.isFinite()){Nl.transform(this.pdomInstance.transformTracker.getMatrix());const s=this.display.bounds;if(s.intersectsBounds(Nl)){Nl.constrainBounds(s);let r=gb(t),o=r.width,d=r.height;o>0&&d>0&&(Qo.setMinMax(0,0,o,d),Qo.transform(pb(o,d,Nl)),Ud(t,Qo)),this.labelSibling&&(r=gb(this._labelSibling),o=r.width,d=r.height,d>0&&o>0&&(Qo.setMinMax(0,0,o,d),Qo.transform(pb(o,d,Nl)),Ud(this._labelSibling,Qo)))}}}else Qo.set(ir.OFFSCREEN_SIBLING_BOUNDS),Ud(t,Qo),this._labelSibling&&Ud(this._labelSibling,Qo);this.forceReflowWorkaround&&this.topLevelElements.forEach(i=>{i.style.transform="",i.style.offsetHeight}),this.positionDirty=!1,this.forceReflowWorkaround=!1}updateSubtreePositioning(e=!1){this.childPositionDirty=!1;const t=this.positionInPDOM||e;this.positionDirty&&this.positionElements(t);for(let i=0;i<this.pdomInstance.children.length;i++){const s=this.pdomInstance.children[i].peer;(s.positionDirty||s.childPositionDirty)&&this.pdomInstance.children[i].peer.updateSubtreePositioning(t)}}recursiveDisable(e){e?(this._preservedDisabledValue=this._primarySibling.disabled,this._primarySibling.disabled=!0):this._primarySibling.disabled=this._preservedDisabledValue;for(let t=0;t<this.pdomInstance.children.length;t++)this.pdomInstance.children[t].peer.recursiveDisable(e)}dispose(){this.isDisposed=!0,this._primarySibling&&(this.blur(),this._primarySibling.removeEventListener("blur",this.blurEventListener),this._primarySibling.removeEventListener("focus",this.focusEventListener)),this.pdomInstance.transformTracker.removeListener(this.transformListener),this.mutationObserver.disconnect(),this.pdomInstance=null,this.node=null,this.display=null,this.trail=null,this._primarySibling=null,this._labelSibling=null,this._descriptionSibling=null,this._accessibleParagraphSibling=null,this._containerParent=null,this.focusable=null,this.freeToPool()}}ir.PRIMARY_SIBLING=rc;ir.LABEL_SIBLING=zk;ir.DESCRIPTION_SIBLING=Hk;ir.CONTAINER_PARENT=Uk;ir.OFFSCREEN_SIBLING_BOUNDS=new ot(0,0,1,1);Ts.mixInto(ir,{initialize:ir.prototype.initializePDOMPeer});function Uu(n,e,t){t=jn({siblingName:null,excludeFromInput:!1},t);const i=Vi.createElement(n,e,t);return t.excludeFromInput&&i.setAttribute(Vi.DATA_EXCLUDE_FROM_INPUT,!0),i}function pb(n,e,t){return db.setToTranslation(t.minX,t.minY),fb.setToScale(t.width/n,t.height/e),db.multiplyMatrix(fb).multiplyMatrix(jk)}function gb(n){let e=n.clientWidth,t=n.clientHeight;if(e===0&&t===0){const i=n.getBoundingClientRect();e=i.width,t=i.height}return{width:e,height:t}}function Ud(n,e){n.style.top=`${e.top}px`,n.style.left=`${e.left}px`,n.style.width=`${e.width}px`,n.style.height=`${e.height}px`}let Qk=1;class bl{constructor(e,t,i){this.relativeNodes=[],this.relativeVisibilities=[],this.relativeListeners=[],this.transformTracker=null,this.initializePDOMInstance(e,t,i)}initializePDOMInstance(e,t,i){if(this.id=this.id||Qk++,this.parent=e,this.display=t,this.trail=i,this.isRootInstance=e===null,this.node=this.isRootInstance?null:i.lastNode(),this.children=bi(this.children),this.node&&this.node.addPDOMInstance(this),this.invisibleCount=0,this.relativeNodes=[],this.relativeVisibilities=[],this.relativeListeners=[],this.transformTracker=null,this.updateTransformTracker(this.node?this.node.pdomTransformSourceNode:null),this.isDisposed=!1,this.isRootInstance){const s=document.createElement("div");this.peer=ir.createFromPool(this,{primarySibling:s})}else{this.peer=ir.createFromPool(this),this.peer.update(sc===za.TRAIL_ID);const s=this.parent.trail;for(let r=s.length;r<i.length;r++){const o=i.nodes[r];this.relativeNodes.push(o);const d=o._pdomDisplaysInfo.pdomDisplays,g=he.includes(d,t);this.relativeVisibilities.push(g),g||this.invisibleCount++;const y=this.checkAccessibleDisplayVisibility.bind(this,r-s.length);o.pdomDisplaysEmitter.addListener(y),this.relativeListeners.push(y)}this.updateVisibility()}return this}addConsecutiveInstances(e){const t=this.children.length>0;Array.prototype.push.apply(this.children,e);for(let i=0;i<e.length;i++){const s=this.peer.getPlaceableSibling();Vi.insertElements(s,e[i].peer.topLevelElements)}t&&this.sortChildren(),sc===za.INDICES&&this.updateDescendantPeerIds(e)}removeInstancesForTrail(e){for(let t=0;t<this.children.length;t++){const i=this.children[t],s=i.trail;let r=s.length<e.length;if(!r){for(let o=this.trail.length;o<e.length;o++)if(e.nodes[o]!==s.nodes[o]){r=!0;break}}r||(this.children.splice(t,1),i.dispose(),t-=1)}}removeAllChildren(){for(;this.children.length;)this.children.pop().dispose()}findChildWithTrail(e){for(let t=0;t<this.children.length;t++){const i=this.children[t];if(i.trail.equals(e))return i}return null}removeSubtree(e){for(let t=this.children.length-1;t>=0;t--){const i=this.children[t];i.trail.isExtensionOf(e,!0)&&(this.children.splice(t,1),i.dispose())}}checkAccessibleDisplayVisibility(e){const t=he.includes(this.relativeNodes[e]._pdomDisplaysInfo.pdomDisplays,this.display),i=this.relativeVisibilities[e];if(t!==i){this.relativeVisibilities[e]=t;const s=this.invisibleCount===0;this.invisibleCount+=t?-1:1,this.invisibleCount===0!==s&&this.updateVisibility()}}updateVisibility(){var e,t;this.peer.setVisible(this.invisibleCount<=0),!this.peer.isVisible()&&((t=(e=Ac())==null?void 0:e.pdomInstances[0])!=null&&t.trail.containsNode(this.node))&&(ys.pdomFocus=null)}isGloballyVisible(){return this.peer.isVisible()?this.parent?this.parent.isGloballyVisible():!0:!1}getChildOrdering(e){const t=e.lastNode(),i=t.getEffectiveChildren();let s;const r=[];if(t.hasPDOMContent&&t!==this.node){const o=t.pdomInstances;e:for(s=0;s<o.length;s++){const d=o[s];if(d.parent===this){for(let g=0;g<e.length;g++)if(e.nodes[g]!==d.trail.nodes[g+d.trail.length-e.length])continue e;r.push(d)}}}else for(s=0;s<i.length;s++)e.addDescendant(i[s],s),Array.prototype.push.apply(r,this.getChildOrdering(e)),e.removeDescendant();return r}sortChildren(){var d,g;let e;this.isRootInstance?e=this.display.rootNode:e=this.node;const t=this.getChildOrdering(new Ki(e));this.children=t;const i=this.peer.getPlaceableSibling(),s=((g=(d=Ac())==null?void 0:d.pdomInstances[0])==null?void 0:g.trail)||null;let r=i.childNodes.length-1;const o=s&&he.find(this.children,y=>s.containsNode(y.peer.node));if(o){const y=he.flatten(this.children.map(T=>T.peer.topLevelElements));if(!he.every(y,(T,L)=>i.children[L]===T)){const T=o.peer.getTopLevelElementContainingPrimarySibling(),L=y.indexOf(T);for(let x=0;x<L;x++)i.insertBefore(y[x],T);for(let x=L+1;x<y.length;x++)i.appendChild(y[x])}}else for(let y=this.children.length-1;y>=0;y--){const S=this.children[y].peer;for(let T=S.topLevelElements.length-1;T>=0;T--){const L=S.topLevelElements[T];i.childNodes[r]!==L&&i.insertBefore(L,i.childNodes[r+1]),r--}}sc===za.INDICES&&this.updateDescendantPeerIds(this.children)}updateTransformTracker(e){this.transformTracker&&this.transformTracker.dispose();let t=null;e?t=e.getUniqueTrail():t=_c(this.trail,this.display.rootNode),this.transformTracker=new jl(t)}getPDOMInstanceUniqueId(){if(sc===za.INDICES){const e=[];let t=this;for(;t.parent;){const i=t.parent.children.indexOf(t);if(i===-1)return"STILL_BEING_CREATED"+Fl.nextDouble();e.unshift(i),t=t.parent}return e.join(tp)}else return this.trail.getUniqueId()}updateDescendantPeerIds(e){const t=Array.from(e);for(;t.length>0;){const i=t.shift();i.peer.updateIndicesStringAndElementIds(),t.push(...i.children)}}dispose(){const e=this.peer;if(!this.isRootInstance){Vi.removeElements(this.parent.peer.getPlaceableSibling(),e.topLevelElements);for(let t=0;t<this.relativeNodes.length;t++)this.relativeNodes[t].pdomDisplaysEmitter.removeListener(this.relativeListeners[t])}for(;this.children.length;)this.children.pop().dispose();e.dispose(),this.transformTracker.dispose(),this.transformTracker=null,this.node&&this.node.removePDOMInstance(this),this.relativeNodes=null,this.display=null,this.trail=null,this.node=null,this.peer=null,this.isDisposed=!0,this.freeToPool()}toString(){return`${this.id}#{${this.trail.toString()}}`}auditRoot(){if(!assert)return;const e=this.display.rootNode;assert(this.trail.length===0,"Should only call auditRoot() on the root PDOMInstance for a display");function t(i,s){for(let r=0;r<s.children.length;r++)t(i.children[r],s.children[r]);s.isGloballyVisible();for(let r=0;r<s.trail.length&&s.trail.nodes[r].getTrailsTo(e).filter(g=>g.isPDOMVisible()).length!==0;r++);}t(bl.createFakePDOMTree(e),this)}static createFakePDOMTree(e){function t(i){let s=he.flatten(i.getEffectiveChildren().map(t));return i.hasPDOMContent&&(s=[{node:i,children:s}]),s}return{node:null,children:t(e)}}freeToPool(){bl.pool.freeToPool(this)}}bl.pool=new Fs(bl,{initialize:bl.prototype.initializePDOMInstance});class Wi{static addChild(e,t){const i=Wi.beforeOp();t._pdomParent||Wi.addTree(e,t),Wi.afterOp(i)}static removeChild(e,t){const i=Wi.beforeOp();t._pdomParent||Wi.removeTree(e,t),Wi.afterOp(i)}static childrenOrderChange(e){const t=Wi.beforeOp();Wi.reorder(e),Wi.afterOp(t)}static pdomOrderChange(e,t,i){const s=Wi.beforeOp(),r=[],o=[];Wh(t||[],i||[],r,o);let d,g;const y=Wi.findPDOMTrails(e);for(d=0;d<r.length;d++){const S=r[d];S&&(Wi.removeTree(e,S,y),S._pdomParent=null,S.pdomParentChangedEmitter.emit())}for(d=0;d<o.length;d++){const S=o[d];if(S){const T=S._parents;for(g=0;g<T.length;g++)Wi.removeTree(T[g],S);S._pdomParent=e,S.pdomParentChangedEmitter.emit()}}for(d=0;d<r.length;d++){const S=r[d];if(S){const T=S._parents;for(g=0;g<T.length;g++)Wi.addTree(T[g],S)}}for(d=0;d<o.length;d++){const S=o[d];S&&Wi.addTree(e,S,y)}Wi.reorder(e,y),Wi.afterOp(s)}static pdomContentChange(e){const t=Wi.beforeOp();let i;const s=e._pdomParent?[e._pdomParent]:e._parents,r=[];for(i=0;i<s.length;i++){const o=s[i],d=Wi.findPDOMTrails(o);r.push(d),Wi.removeTree(o,e,d)}for(i=0;i<s.length;i++)Wi.addTree(s[i],e,r[i]);for(i=0;i<e._rootedDisplays.length;i++){const o=e._rootedDisplays[i];o._accessible&&Wi.rebuildInstanceTree(o._rootPDOMInstance)}Wi.afterOp(t)}static rebuildInstanceTree(e){const t=e.display.rootNode;e.removeAllChildren(),e.addConsecutiveInstances(Wi.createTree(new Ki(t),e.display,e))}static addTree(e,t,i){i=i||Wi.findPDOMTrails(e);for(let s=0;s<i.length;s++){const r=i[s],o=r.pdomInstance;r.fullTrail.addDescendant(t);const d=Wi.createTree(r.fullTrail,o.display,o);r.fullTrail.removeDescendant(),o.addConsecutiveInstances(d)}}static removeTree(e,t,i){i=i||Wi.findPDOMTrails(e);for(let s=0;s<i.length;s++){const r=i[s];r.fullTrail.addDescendant(t),r.pdomInstance.removeInstancesForTrail(r.fullTrail),r.fullTrail.removeDescendant()}}static reorder(e,t){t=t||Wi.findPDOMTrails(e);for(let i=0;i<t.length;i++)t[i].pdomInstance.sortChildren()}static createTree(e,t,i){const s=e.lastNode(),r=s.getEffectiveChildren();let o,d=!1;s.hasPDOMContent&&(o=i.findChildWithTrail(e),o?d=!0:o=bl.pool.create(i,t,e.copy()),i=o);const g=[];for(let y=0;y<r.length;y++)e.addDescendant(r[y],y),Array.prototype.push.apply(g,Wi.createTree(e,t,i)),e.removeDescendant();return o?(o.addConsecutiveInstances(g),d?[]:[o]):g}static beforeOp(){return zt.blockFocusCallbacks=!0,Ac()}static afterOp(e){zt.dispatchingFocusEvents||e&&e.focusable&&e.focus(),zt.blockFocusCallbacks=!1}static findPDOMTrails(e){const t=[];return Wi.recursivePDOMTrailSearch(t,new Ki(e)),t}static recursivePDOMTrailSearch(e,t){const i=t.rootNode();let s;if(i.hasPDOMContent){const d=i.pdomInstances;for(s=0;s<d.length;s++)e.push(new ub(d[s],t.copy(),!1));return}else{const d=i.rootedDisplays;for(s=0;s<d.length;s++){const g=d[s];g._accessible&&e.push(new ub(g._rootPDOMInstance,t.copy(),!0))}}const r=i._pdomParent?[i._pdomParent]:i._parents,o=r.length;for(s=0;s<o;s++){const d=r[s];t.addAncestor(d),Wi.recursivePDOMTrailSearch(e,t),t.removeAncestor()}}static auditPDOMDisplays(e){}static auditNodeForPDOMCycles(e){}static debugOrder(e){return e===null?"null":`[${e.map(t=>t===null?"null":t._id).join(",")}]`}}const Yd=Vi.TAGS.INPUT,y1=Vi.TAGS.P,Zk=Vi.TAGS.DIV,Jk=Zk,$k=y1,eL=y1,mb=(n,e,t)=>(e.labelTagName=`h${n.headingLevel}`,e.labelContent=t,e),Yu=n=>n===null?null:typeof n=="string"?n:n.value,tL=Vi.INPUT_TYPES_THAT_SUPPORT_CHECKED,Mm=["focusable","tagName","accessibleName","accessibleNameBehavior","accessibleHelpText","accessibleHelpTextBehavior","accessibleParagraph","pdomHeading","pdomHeadingBehavior","containerTagName","containerAriaRole","innerContent","inputType","inputValue","pdomChecked","pdomNamespace","ariaLabel","ariaRole","ariaValueText","labelTagName","labelContent","appendLabel","descriptionTagName","descriptionContent","appendDescription","focusHighlight","focusHighlightLayerable","groupFocusHighlight","pdomVisibleProperty","pdomVisible","pdomOrder","pdomAttributes","ariaLabelledbyAssociations","ariaDescribedbyAssociations","activeDescendantAssociations","focusPanTargetBoundsProperty","limitPanDirection","positionInPDOM","pdomTransformSourceNode"];class _a extends As{constructor(e){super(e),this._inputValue=null,this._labelContent=null,this._innerContent=null,this._descriptionContent=null,this._ariaLabel=null,this._hasAppliedAriaLabel=!1,this._ariaValueText=null,this._hasAppliedAriaValueText=!1,this._accessibleName=null,this._accessibleParagraph=null,this._accessibleHelpText=null,this._accessibleNameDirty=!1,this._helpTextDirty=!1,this._accessibleHelpTextDirty=!1,this._pdomHeading=null,this.focusHighlightChangedEmitter=new Hi,this.pdomParentChangedEmitter=new Hi,this.pdomDisplaysEmitter=new Hi,this._onPDOMContentChangeListener=this.onPDOMContentChange.bind(this),this._onInputValueChangeListener=this.invalidatePeerInputValue.bind(this),this._onAriaLabelChangeListener=this.onAriaLabelChange.bind(this),this._onAriaValueTextChangeListener=this.onAriaValueTextChange.bind(this),this._onLabelContentChangeListener=this.invalidatePeerLabelSiblingContent.bind(this),this._onDescriptionContentChangeListener=this.invalidatePeerDescriptionSiblingContent.bind(this),this._onAccessibleParagraphContentChangeListener=this.invalidatePeerParagraphSiblingContent.bind(this),this._onInnerContentChangeListener=this.onInnerContentPropertyChange.bind(this),this._tagName=null,this._containerTagName=null,this._labelTagName=null,this._descriptionTagName=null,this._inputType=null,this._pdomChecked=!1,this._appendLabel=!1,this._appendDescription=!1,this._pdomAttributes=[],this._pdomClasses=[],this._pdomNamespace=null,this._ariaRole=null,this._containerAriaRole=null,this._ariaLabelledbyAssociations=[],this._nodesThatAreAriaLabelledbyThisNode=[],this._ariaDescribedbyAssociations=[],this._nodesThatAreAriaDescribedbyThisNode=[],this._activeDescendantAssociations=[],this._nodesThatAreActiveDescendantToThisNode=[],this._focusableOverride=null,this._focusHighlight=null,this._focusHighlightLayerable=!1,this._groupFocusHighlight=!1,this._pdomOrder=null,this._pdomParent=null,this._pdomTransformSourceNode=null,this._focusPanTargetBoundsProperty=null,this._limitPanDirection=null,this._pdomDisplaysInfo=new Bk(this),this._pdomInstances=[],this._positionInPDOM=!1,this.excludeLabelSiblingFromInput=!1,this._pdomVisibleProperty=new Po(!0,!1,this.onPdomVisiblePropertyChange.bind(this)),this._accessibleNameBehavior=_a.BASIC_ACCESSIBLE_NAME_BEHAVIOR,this._accessibleHelpTextBehavior=_a.HELP_TEXT_AFTER_CONTENT,this._headingLevel=null,this._pdomHeadingBehavior=mb,this.pdomBoundInputEnabledListener=this.pdomInputEnabledListener.bind(this)}disposeParallelDOM(){if(ii(this._accessibleName)&&!this._accessibleName.isDisposed&&(this._accessibleName.unlink(this._onPDOMContentChangeListener),this._accessibleName=null),ii(this._accessibleHelpText)&&!this._accessibleHelpText.isDisposed&&(this._accessibleHelpText.unlink(this._onPDOMContentChangeListener),this._accessibleHelpText=null),ii(this._pdomHeading)&&!this._pdomHeading.isDisposed&&(this._pdomHeading.unlink(this._onPDOMContentChangeListener),this._pdomHeading=null),ii(this._inputValue)&&!this._inputValue.isDisposed&&(this._inputValue.unlink(this._onPDOMContentChangeListener),this._inputValue=null),ii(this._ariaLabel)&&!this._ariaLabel.isDisposed&&this._ariaLabel.unlink(this._onAriaLabelChangeListener),ii(this._ariaValueText)&&!this._ariaValueText.isDisposed&&this._ariaValueText.unlink(this._onAriaValueTextChangeListener),ii(this._innerContent)&&!this._innerContent.isDisposed&&this._innerContent.unlink(this._onInnerContentChangeListener),ii(this._labelContent)&&!this._labelContent.isDisposed&&this._labelContent.unlink(this._onLabelContentChangeListener),ii(this._descriptionContent)&&!this._descriptionContent.isDisposed&&this._descriptionContent.unlink(this._onDescriptionContentChangeListener),ii(this._accessibleParagraph)&&!this._accessibleParagraph.isDisposed&&this._accessibleParagraph.unlink(this._onAccessibleParagraphContentChangeListener),this.inputEnabledProperty.unlink(this.pdomBoundInputEnabledListener),this.pdomOrder=null,this._pdomParent){const e=this._pdomParent._pdomOrder.slice();mn(e,this),this._pdomParent.pdomOrder=e}this.setPDOMTransformSourceNode(null),this._accessibleNameBehavior=_a.BASIC_ACCESSIBLE_NAME_BEHAVIOR,this._accessibleHelpTextBehavior=_a.HELP_TEXT_AFTER_CONTENT,this._pdomHeadingBehavior=mb,this.setAriaLabelledbyAssociations([]),this.setAriaDescribedbyAssociations([]),this.setActiveDescendantAssociations([]),this.removePDOMAttributes(),this._pdomVisibleProperty.dispose()}pdomInputEnabledListener(e){this.setPDOMAttribute("aria-disabled",!e),this.setPDOMAttribute("onclick",e?"":"return false")}isFocused(){for(let e=0;e<this._pdomInstances.length;e++)if(this._pdomInstances[e].peer.isFocused())return!0;return!1}get focused(){return this.isFocused()}focus(){this._pdomInstances.length>0&&this._pdomInstances[0].peer.focus()}blur(){this._pdomInstances.length>0&&this._pdomInstances[0].peer.blur()}pdomAudit(){this.hasPDOMContent&&assert&&(this._tagName&&(this._inputType&&assert(this._tagName.toUpperCase()===Yd,"tagName must be INPUT to support inputType"),this._pdomChecked&&assert(this._tagName.toUpperCase()===Yd,"tagName must be INPUT to support pdomChecked."),this._inputValue&&assert(this._tagName.toUpperCase()===Yd,"tagName must be INPUT to support inputValue"),this._pdomChecked&&assert(tL.includes(this._inputType.toUpperCase()),`inputType does not support checked attribute: ${this._inputType}`),this._focusHighlightLayerable&&assert(this.focusHighlight instanceof _a,"focusHighlight must be Node if highlight is layerable"),this._tagName.toUpperCase()===Yd&&assert(typeof this._inputType=="string"," inputType expected for input")),this.ariaRole==="application"&&assert(this.innerContent||this.accessibleName,"must have some innerContent or element will never be focusable in VoiceOver"));for(let e=0;e<this.children.length;e++)this.children[e].pdomAudit()}setAccessibleName(e){e!==this._accessibleName&&(ii(this._accessibleName)&&!this._accessibleName.isDisposed&&this._accessibleName.unlink(this._onPDOMContentChangeListener),this._accessibleName=e,ii(e)&&e.lazyLink(this._onPDOMContentChangeListener),this._accessibleNameDirty=!0,this.onPDOMContentChange())}set accessibleName(e){this.setAccessibleName(e)}get accessibleName(){return this.getAccessibleName()}getAccessibleName(){return ii(this._accessibleName)?this._accessibleName.value:this._accessibleName}invalidatePeerParagraphSiblingContent(){for(let e=0;e<this._pdomInstances.length;e++)this._pdomInstances[e].peer.setAccessibleParagraphContent(this.accessibleParagraph)}setAccessibleParagraph(e){if(e!==this._accessibleParagraph){const t=!!this._accessibleParagraph!=!!e;ii(this._accessibleParagraph)&&!this._accessibleParagraph.isDisposed&&this._accessibleParagraph.unlink(this._onAccessibleParagraphContentChangeListener),this._accessibleParagraph=e,ii(e)&&e.lazyLink(this._onAccessibleParagraphContentChangeListener),t&&this.onPDOMContentChange()}}set accessibleParagraph(e){this.setAccessibleParagraph(e)}get accessibleParagraph(){return this.getAccessibleParagraph()}getAccessibleParagraph(){return ii(this._accessibleParagraph)?this._accessibleParagraph.value:this._accessibleParagraph}removeFromPDOM(){this.tagName=null}setAccessibleNameBehavior(e){this._accessibleNameBehavior!==e&&(this._accessibleNameBehavior=e,this.onPDOMContentChange())}set accessibleNameBehavior(e){this.setAccessibleNameBehavior(e)}get accessibleNameBehavior(){return this.getAccessibleNameBehavior()}getAccessibleNameBehavior(){return this._accessibleNameBehavior}setPDOMHeading(e){e!==this._pdomHeading&&(ii(this._pdomHeading)&&!this._pdomHeading.isDisposed&&this._pdomHeading.unlink(this._onPDOMContentChangeListener),this._pdomHeading=e,ii(e)&&e.lazyLink(this._onPDOMContentChangeListener),this.onPDOMContentChange())}set pdomHeading(e){this.setPDOMHeading(e)}get pdomHeading(){return this.getPDOMHeading()}getPDOMHeading(){return ii(this._pdomHeading)?this._pdomHeading.value:this._pdomHeading}setPDOMHeadingBehavior(e){this._pdomHeadingBehavior!==e&&(this._pdomHeadingBehavior=e,this.onPDOMContentChange())}set pdomHeadingBehavior(e){this.setPDOMHeadingBehavior(e)}get pdomHeadingBehavior(){return this.getPDOMHeadingBehavior()}getPDOMHeadingBehavior(){return this._pdomHeadingBehavior}getHeadingLevel(){return this._headingLevel}get headingLevel(){return this.getHeadingLevel()}computeHeadingLevel(){if(!this._pdomParent)return this.pdomHeading?(this._headingLevel=1,1):0;if(this.pdomHeading){const e=this._pdomParent.computeHeadingLevel()+1;return this._headingLevel=e,e}else return this._pdomParent.computeHeadingLevel()}setAccessibleHelpText(e){e!==this._accessibleHelpText&&(ii(this._accessibleHelpText)&&!this._accessibleHelpText.isDisposed&&this._accessibleHelpText.unlink(this._onPDOMContentChangeListener),this._accessibleHelpText=e,ii(e)&&e.lazyLink(this._onPDOMContentChangeListener),this._accessibleHelpTextDirty=!0,this.onPDOMContentChange())}set accessibleHelpText(e){this.setAccessibleHelpText(e)}get accessibleHelpText(){return this.getAccessibleHelpText()}getAccessibleHelpText(){return ii(this._accessibleHelpText)?this._accessibleHelpText.value:this._accessibleHelpText}setAccessibleHelpTextBehavior(e){this._accessibleHelpTextBehavior!==e&&(this._accessibleHelpTextBehavior=e,this.onPDOMContentChange())}set accessibleHelpTextBehavior(e){this.setAccessibleHelpTextBehavior(e)}get accessibleHelpTextBehavior(){return this.getAccessibleHelpTextBehavior()}getAccessibleHelpTextBehavior(){return this._accessibleHelpTextBehavior}setTagName(e){e!==this._tagName&&(this._tagName=e,this.onPDOMContentChange())}set tagName(e){this.setTagName(e)}get tagName(){return this.getTagName()}getTagName(){return this._tagName}setLabelTagName(e){e!==this._labelTagName&&(this._labelTagName=e,this.onPDOMContentChange())}set labelTagName(e){this.setLabelTagName(e)}get labelTagName(){return this.getLabelTagName()}getLabelTagName(){return this._labelTagName}setDescriptionTagName(e){e!==this._descriptionTagName&&(this._descriptionTagName=e,this.onPDOMContentChange())}set descriptionTagName(e){this.setDescriptionTagName(e)}get descriptionTagName(){return this.getDescriptionTagName()}getDescriptionTagName(){return this._descriptionTagName}setInputType(e){if(e!==this._inputType){this._inputType=e;for(let t=0;t<this._pdomInstances.length;t++){const i=this._pdomInstances[t].peer;e===null?i.removeAttributeFromElement("type"):i.setAttributeToElement("type",e)}}}set inputType(e){this.setInputType(e)}get inputType(){return this.getInputType()}getInputType(){return this._inputType}setAppendLabel(e){this._appendLabel!==e&&(this._appendLabel=e,this.onPDOMContentChange())}set appendLabel(e){this.setAppendLabel(e)}get appendLabel(){return this.getAppendLabel()}getAppendLabel(){return this._appendLabel}setAppendDescription(e){this._appendDescription!==e&&(this._appendDescription=e,this.onPDOMContentChange())}set appendDescription(e){this.setAppendDescription(e)}get appendDescription(){return this.getAppendDescription()}getAppendDescription(){return this._appendDescription}setContainerTagName(e){this._containerTagName!==e&&(this._containerTagName=e,this.onPDOMContentChange())}set containerTagName(e){this.setContainerTagName(e)}get containerTagName(){return this.getContainerTagName()}getContainerTagName(){return this._containerTagName}invalidatePeerLabelSiblingContent(){const e=this.labelContent;e&&!this._labelTagName&&this.setLabelTagName(eL);for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setLabelSiblingContent(e)}setLabelContent(e){e!==this._labelContent&&(ii(this._labelContent)&&!this._labelContent.isDisposed&&this._labelContent.unlink(this._onLabelContentChangeListener),this._labelContent=e,ii(e)&&e.lazyLink(this._onLabelContentChangeListener),this.invalidatePeerLabelSiblingContent())}set labelContent(e){this.setLabelContent(e)}get labelContent(){return this.getLabelContent()}getLabelContent(){return Yu(this._labelContent)}onInnerContentPropertyChange(){const e=this.innerContent;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPrimarySiblingContent(e)}setInnerContent(e){e!==this._innerContent&&(ii(this._innerContent)&&!this._innerContent.isDisposed&&this._innerContent.unlink(this._onInnerContentChangeListener),this._innerContent=e,ii(e)&&e.lazyLink(this._onInnerContentChangeListener),this.onInnerContentPropertyChange())}set innerContent(e){this.setInnerContent(e)}get innerContent(){return this.getInnerContent()}getInnerContent(){return Yu(this._innerContent)}invalidatePeerDescriptionSiblingContent(){const e=this.descriptionContent;e&&!this._descriptionTagName&&this.setDescriptionTagName($k);for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setDescriptionSiblingContent(e)}setDescriptionContent(e){e!==this._descriptionContent&&(ii(this._descriptionContent)&&!this._descriptionContent.isDisposed&&this._descriptionContent.unlink(this._onDescriptionContentChangeListener),this._descriptionContent=e,ii(e)&&e.lazyLink(this._onDescriptionContentChangeListener),this.invalidatePeerDescriptionSiblingContent())}set descriptionContent(e){this.setDescriptionContent(e)}get descriptionContent(){return this.getDescriptionContent()}getDescriptionContent(){return Yu(this._descriptionContent)}setAriaRole(e){this._ariaRole!==e&&(this._ariaRole=e,e!==null?this.setPDOMAttribute("role",e):this.removePDOMAttribute("role"))}set ariaRole(e){this.setAriaRole(e)}get ariaRole(){return this.getAriaRole()}getAriaRole(){return this._ariaRole}setContainerAriaRole(e){this._containerAriaRole!==e&&(this._containerAriaRole=e,e===null?this.removePDOMAttribute("role",{elementName:Rm}):this.setPDOMAttribute("role",e,{elementName:Rm}))}set containerAriaRole(e){this.setContainerAriaRole(e)}get containerAriaRole(){return this.getContainerAriaRole()}getContainerAriaRole(){return this._containerAriaRole}onAriaValueTextChange(){const e=this.ariaValueText;e===null?this._hasAppliedAriaLabel&&(this.removePDOMAttribute("aria-valuetext"),this._hasAppliedAriaLabel=!1):(this.setPDOMAttribute("aria-valuetext",e),this._hasAppliedAriaLabel=!0)}setAriaValueText(e){this._ariaValueText!==e&&(ii(this._ariaValueText)&&!this._ariaValueText.isDisposed&&this._ariaValueText.unlink(this._onAriaValueTextChangeListener),this._ariaValueText=e,ii(e)&&e.lazyLink(this._onAriaValueTextChangeListener),this.onAriaValueTextChange())}set ariaValueText(e){this.setAriaValueText(e)}get ariaValueText(){return this.getAriaValueText()}getAriaValueText(){return Yu(this._ariaValueText)}setPDOMNamespace(e){return this._pdomNamespace!==e&&(this._pdomNamespace=e,this.onPDOMContentChange()),this}set pdomNamespace(e){this.setPDOMNamespace(e)}get pdomNamespace(){return this.getPDOMNamespace()}getPDOMNamespace(){return this._pdomNamespace}onAriaLabelChange(){const e=this.ariaLabel;e===null?this._hasAppliedAriaLabel&&(this.removePDOMAttribute("aria-label"),this._hasAppliedAriaLabel=!1):(this.setPDOMAttribute("aria-label",e),this._hasAppliedAriaLabel=!0)}setAriaLabel(e){this._ariaLabel!==e&&(ii(this._ariaLabel)&&!this._ariaLabel.isDisposed&&this._ariaLabel.unlink(this._onAriaLabelChangeListener),this._ariaLabel=e,ii(e)&&e.lazyLink(this._onAriaLabelChangeListener),this.onAriaLabelChange())}set ariaLabel(e){this.setAriaLabel(e)}get ariaLabel(){return this.getAriaLabel()}getAriaLabel(){return Yu(this._ariaLabel)}setFocusHighlight(e){this._focusHighlight!==e&&(this._focusHighlight=e,this._focusHighlightLayerable&&(e.visible=!1),this.focusHighlightChangedEmitter.emit())}set focusHighlight(e){this.setFocusHighlight(e)}get focusHighlight(){return this.getFocusHighlight()}getFocusHighlight(){return this._focusHighlight}setFocusHighlightLayerable(e){this._focusHighlightLayerable!==e&&(this._focusHighlightLayerable=e,this._focusHighlight&&(this._focusHighlight.visible=!1,this.focusHighlightChangedEmitter.emit()))}set focusHighlightLayerable(e){this.setFocusHighlightLayerable(e)}get focusHighlightLayerable(){return this.getFocusHighlightLayerable()}getFocusHighlightLayerable(){return this._focusHighlightLayerable}setGroupFocusHighlight(e){this._groupFocusHighlight=e}set groupFocusHighlight(e){this.setGroupFocusHighlight(e)}get groupFocusHighlight(){return this.getGroupFocusHighlight()}getGroupFocusHighlight(){return this._groupFocusHighlight}setAriaLabelledbyAssociations(e){let t,i;if(e.length===0&&this._ariaLabelledbyAssociations.length===0)return;const s=[],r=[],o=[];for(Wh(e,this._ariaLabelledbyAssociations,r,s,o),i=0;i<s.length;i++)t=s[i],this.removeAriaLabelledbyAssociation(t);for(i=0;i<r.length;i++){const d=e[i];this.addAriaLabelledbyAssociation(d)}}set ariaLabelledbyAssociations(e){this.setAriaLabelledbyAssociations(e)}get ariaLabelledbyAssociations(){return this.getAriaLabelledbyAssociations()}getAriaLabelledbyAssociations(){return this._ariaLabelledbyAssociations}addAriaLabelledbyAssociation(e){this._ariaLabelledbyAssociations.push(e),e.otherNode._nodesThatAreAriaLabelledbyThisNode.push(this),this.updateAriaLabelledbyAssociationsInPeers()}removeAriaLabelledbyAssociation(e){this._ariaLabelledbyAssociations.splice(he.indexOf(this._ariaLabelledbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaLabelledByThisNode(this),this.updateAriaLabelledbyAssociationsInPeers()}removeNodeThatIsAriaLabelledByThisNode(e){const t=he.indexOf(this._nodesThatAreAriaLabelledbyThisNode,e);this._nodesThatAreAriaLabelledbyThisNode.splice(t,1)}updateAriaLabelledbyAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onAriaLabelledbyAssociationChange()}updateOtherNodesAriaLabelledby(){for(let e=0;e<this._nodesThatAreAriaLabelledbyThisNode.length;e++)this._nodesThatAreAriaLabelledbyThisNode[e].updateAriaLabelledbyAssociationsInPeers()}getNodesThatAreAriaLabelledbyThisNode(){return this._nodesThatAreAriaLabelledbyThisNode}get nodesThatAreAriaLabelledbyThisNode(){return this.getNodesThatAreAriaLabelledbyThisNode()}setAriaDescribedbyAssociations(e){let t;if(e.length===0&&this._ariaDescribedbyAssociations.length===0)return;const i=[],s=[],r=[];let o;for(Wh(e,this._ariaDescribedbyAssociations,s,i,r),o=0;o<i.length;o++)t=i[o],this.removeAriaDescribedbyAssociation(t);for(o=0;o<s.length;o++){const d=e[o];this.addAriaDescribedbyAssociation(d)}}set ariaDescribedbyAssociations(e){this.setAriaDescribedbyAssociations(e)}get ariaDescribedbyAssociations(){return this.getAriaDescribedbyAssociations()}getAriaDescribedbyAssociations(){return this._ariaDescribedbyAssociations}addAriaDescribedbyAssociation(e){this._ariaDescribedbyAssociations.push(e),e.otherNode._nodesThatAreAriaDescribedbyThisNode.push(this),this.updateAriaDescribedbyAssociationsInPeers()}hasAriaDescribedbyAssociation(e){return he.includes(this._ariaDescribedbyAssociations,e)}removeAriaDescribedbyAssociation(e){this._ariaDescribedbyAssociations.splice(he.indexOf(this._ariaDescribedbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaDescribedByThisNode(this),this.updateAriaDescribedbyAssociationsInPeers()}removeNodeThatIsAriaDescribedByThisNode(e){const t=he.indexOf(this._nodesThatAreAriaDescribedbyThisNode,e);this._nodesThatAreAriaDescribedbyThisNode.splice(t,1)}updateAriaDescribedbyAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onAriaDescribedbyAssociationChange()}updateOtherNodesAriaDescribedby(){for(let e=0;e<this._nodesThatAreAriaDescribedbyThisNode.length;e++)this._nodesThatAreAriaDescribedbyThisNode[e].updateAriaDescribedbyAssociationsInPeers()}getNodesThatAreAriaDescribedbyThisNode(){return this._nodesThatAreAriaDescribedbyThisNode}get nodesThatAreAriaDescribedbyThisNode(){return this.getNodesThatAreAriaDescribedbyThisNode()}setActiveDescendantAssociations(e){let t;if(e.length===0&&this._activeDescendantAssociations.length===0)return;const i=[],s=[],r=[];let o;for(Wh(e,this._activeDescendantAssociations,s,i,r),o=0;o<i.length;o++)t=i[o],this.removeActiveDescendantAssociation(t);for(o=0;o<s.length;o++){const d=e[o];this.addActiveDescendantAssociation(d)}}set activeDescendantAssociations(e){this.setActiveDescendantAssociations(e)}get activeDescendantAssociations(){return this.getActiveDescendantAssociations()}getActiveDescendantAssociations(){return this._activeDescendantAssociations}addActiveDescendantAssociation(e){this._activeDescendantAssociations.push(e),e.otherNode._nodesThatAreActiveDescendantToThisNode.push(this),this.updateActiveDescendantAssociationsInPeers()}removeActiveDescendantAssociation(e){this._activeDescendantAssociations.splice(he.indexOf(this._activeDescendantAssociations,e),1)[0].otherNode.removeNodeThatIsActiveDescendantThisNode(this),this.updateActiveDescendantAssociationsInPeers()}removeNodeThatIsActiveDescendantThisNode(e){const t=he.indexOf(this._nodesThatAreActiveDescendantToThisNode,e);this._nodesThatAreActiveDescendantToThisNode.splice(t,1)}updateActiveDescendantAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onActiveDescendantAssociationChange()}updateOtherNodesActiveDescendant(){for(let e=0;e<this._nodesThatAreActiveDescendantToThisNode.length;e++)this._nodesThatAreActiveDescendantToThisNode[e].updateActiveDescendantAssociationsInPeers()}getNodesThatAreActiveDescendantToThisNode(){return this._nodesThatAreActiveDescendantToThisNode}get nodesThatAreActiveDescendantToThisNode(){return this.getNodesThatAreActiveDescendantToThisNode()}setPDOMOrder(e){let t=this._pdomOrder===null&&e!==null||this._pdomOrder!==null&&e===null;if(!t&&e&&this._pdomOrder&&(t=e.length!==this._pdomOrder.length,!t)){for(let i=0;i<e.length;i++)if(e[i]!==this._pdomOrder[i]){t=!0;break}}if(t){const i=this._pdomOrder;this._pdomOrder=e===null?null:e.slice(),Wi.pdomOrderChange(this,i,e),this.rendererSummaryRefreshEmitter.emit()}}set pdomOrder(e){this.setPDOMOrder(e)}get pdomOrder(){return this.getPDOMOrder()}getPDOMOrder(){return this._pdomOrder?this._pdomOrder.slice(0):this._pdomOrder}hasPDOMOrder(){return this._pdomOrder!==null&&this._pdomOrder.length!==0&&(this._pdomOrder.length>1||this._pdomOrder[0]!==null)}getPDOMParent(){return this._pdomParent}get pdomParent(){return this.getPDOMParent()}getEffectiveChildren(){const e=[];for(let t=0;t<this._children.length;t++){const i=this._children[t];i._pdomParent||e.push(i)}if(this.hasPDOMOrder()){const t=this.pdomOrder.slice(),i=t.indexOf(null);return i>=0?(e.unshift(i,1),Array.prototype.splice.apply(t,e)):Array.prototype.push.apply(t,e),t}else return e}onPdomVisiblePropertyChange(e){this._pdomDisplaysInfo.onPDOMVisibilityChange(e)}setPdomVisibleProperty(e){return this._pdomVisibleProperty.setTargetProperty(e),this}set pdomVisibleProperty(e){this.setPdomVisibleProperty(e)}get pdomVisibleProperty(){return this.getPdomVisibleProperty()}getPdomVisibleProperty(){return this._pdomVisibleProperty}setPDOMVisible(e){this.pdomVisibleProperty.value=e}set pdomVisible(e){this.setPDOMVisible(e)}get pdomVisible(){return this.isPDOMVisible()}isPDOMVisible(){return this.pdomVisibleProperty.value}isPDOMDisplayed(){for(let e=0;e<this._pdomInstances.length;e++)if(this._pdomInstances[e].isGloballyVisible())return!0;return!1}get pdomDisplayed(){return this.isPDOMDisplayed()}invalidatePeerInputValue(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onInputValueChange()}setInputValue(e){e!==this._inputValue&&(ii(this._inputValue)&&!this._inputValue.isDisposed&&this._inputValue.unlink(this._onPDOMContentChangeListener),this._inputValue=e,ii(e)&&e.lazyLink(this._onPDOMContentChangeListener),this.invalidatePeerInputValue())}set inputValue(e){this.setInputValue(e)}get inputValue(){return this.getInputValue()}getInputValue(){let e;return ii(this._inputValue)?e=this._inputValue.value:e=this._inputValue,e===null?null:""+e}setPDOMChecked(e){this._tagName,this._inputType,this._pdomChecked!==e&&(this._pdomChecked=e,this.setPDOMAttribute("checked",e,{type:"property"}))}set pdomChecked(e){this.setPDOMChecked(e)}get pdomChecked(){return this.getPDOMChecked()}getPDOMChecked(){return this._pdomChecked}getPDOMAttributes(){return this._pdomAttributes.slice(0)}setPDOMAttributes(e){this.removePDOMAttributes();for(let t=0;t<e.length;t++){const i=e[t];this.setPDOMAttribute(i.attribute,i.value,i.options)}}get pdomAttributes(){return this.getPDOMAttributes()}set pdomAttributes(e){this.setPDOMAttributes(e)}setPDOMAttribute(e,t,i){var o,d;const s=St()({namespace:null,type:"attribute",elementName:Fh},i);for(let g=0;g<this._pdomAttributes.length;g++){const y=this._pdomAttributes[g];y.attribute===e&&((o=y.options)==null?void 0:o.namespace)===s.namespace&&((d=y.options)==null?void 0:d.elementName)===s.elementName&&(!ii(y.value)&&y.options.type===s.type?this._pdomAttributes.splice(g,1):this.removePDOMAttribute(y.attribute,y.options))}let r=g=>{for(let y=0;y<this._pdomInstances.length;y++)this._pdomInstances[y].peer.setAttributeToElement(e,g,s)};ii(t)?t.link(r):(r(t),r=null),this._pdomAttributes.push({attribute:e,value:t,listener:r,options:s})}removePDOMAttribute(e,t){var s,r;const i=St()({namespace:null,elementName:Fh},t);for(let o=0;o<this._pdomAttributes.length;o++)if(this._pdomAttributes[o].attribute===e&&((s=this._pdomAttributes[o].options)==null?void 0:s.namespace)===i.namespace&&((r=this._pdomAttributes[o].options)==null?void 0:r.elementName)===i.elementName){const d=this._pdomAttributes[o];d.listener&&ii(d.value)&&!d.value.isDisposed&&d.value.unlink(d.listener),this._pdomAttributes.splice(o,1)}for(let o=0;o<this._pdomInstances.length;o++)this._pdomInstances[o].peer.removeAttributeFromElement(e,i)}removePDOMAttributes(){const e=this.getPDOMAttributes();for(let t=0;t<e.length;t++){const i=e[t].attribute;this.removePDOMAttribute(i)}}hasPDOMAttribute(e,t){var r,o;const i=St()({namespace:null,elementName:Fh},t);let s=!1;for(let d=0;d<this._pdomAttributes.length;d++)this._pdomAttributes[d].attribute===e&&((r=this._pdomAttributes[d].options)==null?void 0:r.namespace)===i.namespace&&((o=this._pdomAttributes[d].options)==null?void 0:o.elementName)===i.elementName&&(s=!0);return s}setPDOMClass(e,t){const i=St()({elementName:Fh},t);for(let s=0;s<this._pdomClasses.length;s++){const r=this._pdomClasses[s];if(r.className===e&&r.options.elementName===i.elementName)return}this._pdomClasses.push({className:e,options:i});for(let s=0;s<this._pdomInstances.length;s++)this._pdomInstances[s].peer.setClassToElement(e,i)}removePDOMClass(e,t){const i=St()({elementName:Fh},t);for(let s=0;s<this._pdomClasses.length;s++)this._pdomClasses[s].className===e&&this._pdomClasses[s].options.elementName===i.elementName&&this._pdomClasses.splice(s,1);for(let s=0;s<this._pdomClasses.length;s++)this.pdomInstances[s].peer.removeClassFromElement(e,i)}getPDOMClasses(){return this._pdomClasses.slice(0)}get pdomClasses(){return this.getPDOMClasses()}setFocusable(e){if(this._focusableOverride!==e){this._focusableOverride=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setFocusable(this.focusable)}}set focusable(e){this.setFocusable(e)}get focusable(){return this.isFocusable()}isFocusable(){return this._focusableOverride!==null?this._focusableOverride:this._tagName===null?!1:Vi.tagIsDefaultFocusable(this._tagName)}setPDOMTransformSourceNode(e){this._pdomTransformSourceNode=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPDOMTransformSourceNode(this._pdomTransformSourceNode)}set pdomTransformSourceNode(e){this.setPDOMTransformSourceNode(e)}get pdomTransformSourceNode(){return this.getPDOMTransformSourceNode()}getPDOMTransformSourceNode(){return this._pdomTransformSourceNode}setFocusPanTargetBoundsProperty(e){e!==this._focusPanTargetBoundsProperty&&(this._focusPanTargetBoundsProperty=e)}getFocusPanTargetBoundsProperty(){return this._focusPanTargetBoundsProperty}set focusPanTargetBoundsProperty(e){this.setFocusPanTargetBoundsProperty(e)}get focusPanTargetBoundsProperty(){return this.getFocusPanTargetBoundsProperty()}setLimitPanDirection(e){this._limitPanDirection=e}getLimitPanDirection(){return this._limitPanDirection}set limitPanDirection(e){this.setLimitPanDirection(e)}get limitPanDirection(){return this.getLimitPanDirection()}setPositionInPDOM(e){this._positionInPDOM=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPositionInPDOM(e)}set positionInPDOM(e){this.setPositionInPDOM(e)}get positionInPDOM(){return this.getPositionInPDOM()}getPositionInPDOM(){return this._positionInPDOM}setExcludeLabelSiblingFromInput(){this.excludeLabelSiblingFromInput=!0,this.onPDOMContentChange()}isInsidePhetioArchetype(e=this){if(e.isPhetioInstrumented())return e.phetioIsArchetype;for(let t=0;t<e.parents.length;t++)if(this.isInsidePhetioArchetype(e.parents[t]))return!0;return!1}alertDescriptionUtterance(e){if(Fc.value||rt.PHET_IO_ENABLED&&this.isInsidePhetioArchetype())return;const t=this.getConnectedDisplays();for(let i=0;i<t.length;i++){const s=t[i];s.isAccessible()&&s.descriptionUtteranceQueue.addToBack(e)}}forEachUtteranceQueue(e){const t=this.getConnectedDisplays();for(let i=0;i<t.length;i++){const s=t[i];s.isAccessible()&&e(s.descriptionUtteranceQueue)}}getBaseOptions(){const e={};for(let t=0;t<Mm.length;t++){const i=Mm[t];e[i]=this[i]}return e}getNestedPDOMOrder(){const e=new Ki(this);let t=[];const i=[],s=[i];function r(o,d){let g=0;if(he.each(t,T=>{o===T&&g++}),g>1||g===1&&!d)return;if(o.hasPDOMContent){const T={trail:e.copy(),children:[]};s[s.length-1].push(T),s.push(T.children)}const y=o._pdomOrder===null?[]:o._pdomOrder;t=t.concat(y),he.each(y,T=>{he.each(o.getLeafTrailsTo(T),L=>{L.removeAncestor(),e.addDescendantTrail(L),r(T,!0),e.removeDescendantTrail(L)})});const S=o._children.length;for(let T=0;T<S;T++){const L=o._children[T];e.addDescendant(L,T),r(L,!1),e.removeDescendant()}he.each(y,()=>{t.pop()}),o.hasPDOMContent&&s.pop()}return r(this,!1),i}onPDOMContentChange(){Wi.pdomContentChange(this),this.pdomHeading&&this.computeHeadingLevel(),this.rendererSummaryRefreshEmitter.emit()}get hasPDOMContent(){return!!this._tagName||!!this._accessibleParagraph}onPDOMAddChild(e){this._pdomDisplaysInfo.onAddChild(e),Wi.addChild(this,e)}onPDOMRemoveChild(e){this._pdomDisplaysInfo.onRemoveChild(e),Wi.removeChild(this,e),e.updateOtherNodesAriaLabelledby(),e.updateOtherNodesAriaDescribedby(),e.updateOtherNodesActiveDescendant()}onPDOMReorderedChildren(){Wi.childrenOrderChange(this)}updateLinkedElementForProperty(e,t,i){if(this.isPhetioInstrumented()){t&&t instanceof rn&&t.isPhetioInstrumented()&&t instanceof As&&this.removeLinkedElements(t);const s=this.tandem.createTandem(e);i&&i instanceof rn&&i.isPhetioInstrumented()&&i instanceof As&&s!==i.tandem&&this.addLinkedElement(i,{tandemName:e})}}getPDOMInstances(){return this._pdomInstances}get pdomInstances(){return this.getPDOMInstances()}addPDOMInstance(e){this._pdomInstances.push(e)}removePDOMInstance(e){const t=he.indexOf(this._pdomInstances,e);this._pdomInstances.splice(t,1)}static BASIC_ACCESSIBLE_NAME_BEHAVIOR(e,t,i){return e.labelTagName&&Vi.tagNameSupportsContent(e.labelTagName)?t.labelContent=i:e.tagName==="input"?(t.labelTagName="label",t.labelContent=i):Vi.tagNameSupportsContent(e.tagName)?t.innerContent=i:t.ariaLabel=i,t}static forwardAccessibleName(e,t){_a.useDefaultTagName(e),e.accessibleNameBehavior=(i,s,r,o)=>(o.push(()=>{t.accessibleName=r}),s)}static forwardHelpText(e,t){_a.useDefaultTagName(e),e.accessibleHelpTextBehavior=(i,s,r,o)=>(o.push(()=>{t.accessibleHelpText=r}),s)}static HELP_TEXT_BEFORE_CONTENT(e,t,i){return t.descriptionTagName=Vi.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=i,t.appendDescription=!1,t}static HELP_TEXT_AFTER_CONTENT(e,t,i){return t.descriptionTagName=Vi.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=i,t.appendDescription=!0,t}static useDefaultTagName(e){e.tagName||(e.tagName=Jk)}}class iL{constructor(){this.hotkeysProperty=new Ni(new Set)}add(e){this.hotkeysProperty.value=new Set([...this.hotkeysProperty.value,e])}remove(e){this.hotkeysProperty.value=new Set([...this.hotkeysProperty.value].filter(t=>t!==e))}}const sL=new iL,nL=(n,e)=>n.length===e.length&&n.every((t,i)=>t===e[i]),rL=(n,e)=>n.size===e.size&&[...n].every(t=>e.has(t));class aL{constructor(){this.enabledHotkeysProperty=new Ni([]),this.englishKeysDown=new Set,this.modifierKeys=[],this.activeHotkeys=new Set,this.availableHotkeysProperty=new ps([sL.hotkeysProperty,gr],(s,r)=>{const o=[];if(r)for(const d of r.trail.nodes.slice().reverse()){if(!d.isInputEnabled())break;d.inputListeners.forEach(g=>{var y;(y=g.hotkeys)==null||y.forEach(S=>{o.push(S)})})}return o.push(...s),he.uniq(o)},{valueComparisonStrategy:nL});const e=()=>{this.availableHotkeysProperty.recomputeDerivation()};gr.link((s,r)=>{r&&r.trail.nodes.forEach(o=>{o.inputEnabledProperty.unlink(e)}),s&&s.trail.nodes.forEach(o=>{o.inputEnabledProperty.lazyLink(e)})});const t=()=>{const s=new Set,r=[];for(const o of this.availableHotkeysProperty.value)if(o.enabledProperty.value){const d=o.keyDescriptorProperty.value.modifierKeys,g=o.keyDescriptorProperty.value.key,y=[...d.slice().sort(),g].join("+");s.has(y)||(r.push(o),o.override&&s.add(y))}this.enabledHotkeysProperty.value=r},i=new Map;this.availableHotkeysProperty.link((s,r)=>{let o=!1;if(r){for(const d of r)if(!s.includes(d)){const g=i.get(d);i.delete(d),d.enabledProperty.unlink(g),d.keyDescriptorProperty.unlink(g),o=!0}}for(const d of s)if(!r||!r.includes(d)){const g=()=>t();i.set(d,g),d.enabledProperty.lazyLink(g),d.keyDescriptorProperty.lazyLink(g),o=!0}o&&t()}),this.enabledHotkeysProperty.link((s,r)=>{if(this.modifierKeys=he.uniq([...Yv,...[...s].flatMap(o=>o.keyDescriptorProperty.value.modifierKeys)]),r)for(const o of r)!s.includes(o)&&this.activeHotkeys.has(o)&&this.removeActiveHotkey(o,null,!1);this.updateHotkeyStatus(null)}),Fa.keyDownStateChangedEmitter.addListener(s=>{const r=Fa.getEnglishKeysDown();if(!rL(this.englishKeysDown,r))this.englishKeysDown=r,this.updateHotkeyStatus(s);else for(const d of[...this.activeHotkeys])d.fireOnHold&&d.fireOnHoldTiming==="browser"&&d.fire(s)})}updateHotkeysFromInputListenerChange(e){gr.value&&gr.value.trail.nodes.includes(e)&&this.availableHotkeysProperty.recomputeDerivation()}getHotkeysForMainKey(e){return this.englishKeysDown.has(e)?[...this.enabledHotkeysProperty.value].filter(i=>i.keyDescriptorProperty.value.key!==e?!1:this.modifierKeys.every(r=>{const o=i.keyDescriptorProperty.value.ignoredModifierKeys;return this.englishKeysDown.has(r)===i.keysProperty.value.includes(r)||o.includes(r)})):[]}updateHotkeyStatus(e){const t=je.getEventCode(e),i=t?lf(t):null;for(const s of this.enabledHotkeysProperty.value){const r=s.keyDescriptorProperty.value.key,o=this.getHotkeysForMainKey(r).includes(s),d=!s.interrupted||e&&e.type==="keydown",g=o&&d,y=this.activeHotkeys.has(s),S=s.keyDescriptorProperty.value.key;g&&!y?this.addActiveHotkey(s,e,S===i):!g&&y&&this.removeActiveHotkey(s,e,S===i)}}addActiveHotkey(e,t,i){this.activeHotkeys.add(e);const s=i&&e.fireOnDown;e.onPress(t,s)}removeActiveHotkey(e,t,i){this.activeHotkeys.delete(e);const s=i&&!e.fireOnDown,r=!i;e.onRelease(t,r,s)}interruptHotkey(e){this.removeActiveHotkey(e,null,!1)}}const yb=new aL;class Xh{constructor(e,t){this.canvas=e,this.context=t,this.resetStyles()}resetStyles(){this.fillStyle=void 0,this.strokeStyle=void 0,this.lineWidth=void 0,this.lineCap=void 0,this.lineJoin=void 0,this.lineDash=void 0,this.lineDashOffset=void 0,this.miterLimit=void 0,this.font=void 0,this.direction=void 0}setDimensions(e,t){this.canvas.width=e,this.canvas.height=t,this.resetStyles()}setFillStyle(e){e&&ii(e)&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.fillStyle!==e&&(this.fillStyle=e,this.context.fillStyle=e)}setStrokeStyle(e){e&&ii(e)&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.strokeStyle!==e&&(this.strokeStyle=e,this.context.strokeStyle=e)}setLineWidth(e){this.lineWidth!==e&&(this.lineWidth=e,this.context.lineWidth=e)}setLineCap(e){this.lineCap!==e&&(this.lineCap=e,this.context.lineCap=e)}setLineJoin(e){this.lineJoin!==e&&(this.lineJoin=e,this.context.lineJoin=e)}setMiterLimit(e){this.miterLimit!==e&&(this.miterLimit=e,this.context.miterLimit=e)}setLineDash(e){this.lineDash!==e&&(this.lineDash=e,this.context.setLineDash?this.context.setLineDash(e===null?[]:e):this.context.mozDash!==void 0?this.context.mozDash=e:this.context.webkitLineDash!==void 0&&(this.context.webkitLineDash=e||[]))}setLineDashOffset(e){this.lineDashOffset!==e&&(this.lineDashOffset=e,this.context.lineDashOffset!==void 0?this.context.lineDashOffset=e:this.context.webkitLineDashOffset!==void 0&&(this.context.webkitLineDashOffset=e))}setFont(e){this.font!==e&&(this.font=e,this.context.font=e)}setDirection(e){this.direction!==e&&(this.direction=e,this.context.direction=e)}}class oL{constructor(e){this.node=e,this.selfPruned=!1,this.selfInclusive=!1,this.subtreePrunable=!0,this.subtreePickableCount=0,this.mouseInclusiveBounds=ot.NOTHING.copy(),this.mouseExclusiveBounds=ot.NOTHING.copy(),this.touchInclusiveBounds=ot.NOTHING.copy(),this.touchExclusiveBounds=ot.NOTHING.copy(),this.mouseInclusiveDirty=!0,this.mouseExclusiveDirty=!0,this.touchInclusiveDirty=!0,this.touchExclusiveDirty=!0,this.scratchVector=new Ne(0,0)}hitTest(e,t,i){const s=this.selfInclusive;return t?s?this.validateMouseInclusive():this.validateMouseExclusive():i?s?this.validateTouchInclusive():this.validateTouchExclusive():this.node.validateBounds(),this.recursiveHitTest(e,t,i,!1)}recursiveHitTest(e,t,i,s){if(s=s||this.selfInclusive,this.selfPruned||!s&&this.subtreePrunable)return null;let r;if(t?r=s?this.mouseInclusiveBounds:this.mouseExclusiveBounds:i?r=s?this.touchInclusiveBounds:this.touchExclusiveBounds:r=this.node.bounds,!r.containsPoint(e))return null;const o=this.node._transform.getInverse().multiplyVector2(this.scratchVector.set(e)),d=this.node.clipArea;if(d!==null&&!d.containsPoint(o))return null;for(let g=this.node._children.length-1;g>=0;g--){const S=this.node._children[g]._picker.recursiveHitTest(o,t,i,s);if(S)return S.addAncestor(this.node,g)}return t&&this.node._mouseArea?this.node._mouseArea.containsPoint(o)?new Ki(this.node):null:i&&this.node._touchArea?this.node._touchArea.containsPoint(o)?new Ki(this.node):null:this.node.selfBounds.containsPoint(o)&&this.node.containsPointSelf(o)?new Ki(this.node):null}invalidate(e,t){let i=!!t||!this.mouseInclusiveDirty||!this.touchInclusiveDirty;if(this.mouseInclusiveDirty=!0,this.touchInclusiveDirty=!0,e&&(i=i||!this.mouseExclusiveDirty||!this.touchExclusiveDirty,this.mouseExclusiveDirty=!0,this.touchExclusiveDirty=!0),!this.selfPruned&&i){const s=this.node._parents;for(let r=0;r<s.length;r++)s[r]._picker.invalidate(e||this.selfInclusive,!1)}}validateMouseInclusive(){if(!this.mouseInclusiveDirty)return;this.mouseInclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.selfPruned||(i.validateMouseInclusive(),this.mouseInclusiveBounds.includeBounds(i.mouseInclusiveBounds))}this.applyAreasAndTransform(this.mouseInclusiveBounds,this.node._mouseArea),this.mouseInclusiveDirty=!1}validateMouseExclusive(){if(!this.mouseExclusiveDirty)return;this.mouseExclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.subtreePrunable||(i.selfInclusive?(i.validateMouseInclusive(),this.mouseExclusiveBounds.includeBounds(i.mouseInclusiveBounds)):(i.validateMouseExclusive(),this.mouseExclusiveBounds.includeBounds(i.mouseExclusiveBounds)))}this.applyAreasAndTransform(this.mouseExclusiveBounds,this.node._mouseArea),this.mouseExclusiveDirty=!1}validateTouchInclusive(){if(!this.touchInclusiveDirty)return;this.touchInclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.selfPruned||(i.validateTouchInclusive(),this.touchInclusiveBounds.includeBounds(i.touchInclusiveBounds))}this.applyAreasAndTransform(this.touchInclusiveBounds,this.node._touchArea),this.touchInclusiveDirty=!1}validateTouchExclusive(){if(!this.touchExclusiveDirty)return;this.touchExclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.subtreePrunable||(i.selfInclusive?(i.validateTouchInclusive(),this.touchExclusiveBounds.includeBounds(i.touchInclusiveBounds)):(i.validateTouchExclusive(),this.touchExclusiveBounds.includeBounds(i.touchExclusiveBounds)))}this.applyAreasAndTransform(this.touchExclusiveBounds,this.node._touchArea),this.touchExclusiveDirty=!1}applyAreasAndTransform(e,t){t&&e.includeBounds(t instanceof ot?t:t.bounds);const i=this.node.clipArea;if(i){const s=i.bounds;e.minX=Math.max(e.minX,s.minX),e.minY=Math.max(e.minY,s.minY),e.maxX=Math.min(e.maxX,s.maxX),e.maxY=Math.min(e.maxY,s.maxY)}this.node.transformBoundsFromLocalToParent(e)}onInsertChild(e){if(!e._picker.selfPruned){const t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(1),this.invalidate(t,!0)}}onRemoveChild(e){if(!e._picker.selfPruned){const t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(-1),this.invalidate(t,!0)}}onAddInputListener(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(1)}onRemoveInputListener(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(-1)}onPickableChange(e,t){this.checkSelfPruned(),this.checkSelfInclusive(),this.checkSubtreePrunable();const i=(e===!0?-1:0)+(t===!0?1:0);i&&this.changePickableCount(i)}onVisibilityChange(){this.checkSelfPruned(),this.checkSubtreePrunable()}onMouseAreaChange(){this.invalidate(!0)}onTouchAreaChange(){this.invalidate(!0)}onTransformChange(){this.invalidate(!0)}onSelfBoundsDirty(){this.invalidate(!0)}onClipAreaChange(){this.invalidate(!0)}checkSelfPruned(){const e=this.node.pickableProperty.value===!1||!this.node.isVisible();if(this.selfPruned!==e){this.selfPruned=e;const t=this.node._parents;for(let i=0;i<t.length;i++){const s=t[i]._picker;this.subtreePickableCount>0?(s.invalidate(!0,!0),s.changePickableCount(this.selfPruned?-1:1)):s.invalidate(!1,!0)}}}checkSelfInclusive(){const e=this.node.pickableProperty.value===!0||this.node._inputListeners.length>0;this.selfInclusive!==e&&(this.selfInclusive=e,this.invalidate(!0,!0))}checkSubtreePrunable(){const e=this.node.pickableProperty.value===!1||!this.node.isVisible()||this.node.pickableProperty.value!==!0&&this.subtreePickableCount===0;this.subtreePrunable!==e&&(this.subtreePrunable=e,this.invalidate(!0,!0))}changePickableCount(e){if(e===0)return;const t=this.subtreePickableCount===0;this.subtreePickableCount+=e;const i=this.subtreePickableCount===0;if(this.checkSubtreePrunable(),!this.selfPruned&&t!==i){const s=this.node._parents.length;for(let r=0;r<s;r++)this.node._parents[r]._picker.changePickableCount(t?1:-1)}}isPotentiallyPickable(){return!this.subtreePrunable&&this.node.inputEnabled}audit(){}}const gl=[Le.bitmaskCanvas,Le.bitmaskSVG,Le.bitmaskDOM,Le.bitmaskWebGL,Le.bitmaskSingleCanvas,Le.bitmaskSingleSVG,Le.bitmaskNotPainted,Le.bitmaskBoundsValid,Le.bitmaskNoPDOM,Le.bitmaskLacksCanvas,Le.bitmaskLacksSVG,Le.bitmaskLacksDOM,Le.bitmaskLacksWebGL],_1={};gl.forEach((n,e)=>{_1[n]=e});const Ml=gl.length;let Y0=0;for(let n=0;n<Ml;n++)Y0|=gl[n];class wo{constructor(e){this.node=e,this._counts=new Int16Array(Ml),this.bitmask=Y0,this.selfBitmask=wo.summaryBitmaskForNodeSelf(e),this.summaryChange(this.bitmask,this.selfBitmask);const t=this.selfChange.bind(this);this.node.filterChangeEmitter.addListener(t),this.node.clipAreaProperty.lazyLink(t),this.node.rendererSummaryRefreshEmitter.addListener(t)}summaryChange(e,t){const i=e^t;let s=0,r=0;for(let o=0;o<Ml;o++){const d=gl[o],g=_1[d];d&i&&(d&t?(this._counts[g]--,this._counts[g]===0&&(r|=d)):(this._counts[g]++,this._counts[g]===1&&(s|=d)))}if(s||r){const o=this.bitmask;for(let g=0;g<Ml;g++){const y=gl[g];r&y&&(this.bitmask|=y),s&y&&(this.bitmask^=y)}this.node.instanceRefreshEmitter.emit(),this.node.onSummaryChange(o,this.bitmask);const d=this.node._parents.length;for(let g=0;g<d;g++)this.node._parents[g]._rendererSummary.summaryChange(s,r)}}selfChange(){const e=this.selfBitmask,t=wo.summaryBitmaskForNodeSelf(this.node);e!==t&&(this.summaryChange(e,t),this.selfBitmask=t)}computeBitmask(){let e=0;for(let t=0;t<Ml;t++)this._counts[t]===0&&(e|=gl[t]);return e}isSubtreeFullyCompatible(e){return!!(e&this.bitmask)}isSubtreeContainingCompatible(e){return!(e<<Le.bitmaskLacksShift&this.bitmask)}isSingleCanvasSupported(){return!!(Le.bitmaskSingleCanvas&this.bitmask)}isSingleSVGSupported(){return!!(Le.bitmaskSingleSVG&this.bitmask)}isNotPainted(){return!!(Le.bitmaskNotPainted&this.bitmask)}hasNoPDOM(){return!!(Le.bitmaskNoPDOM&this.bitmask)}areBoundsValid(){return!!(Le.bitmaskBoundsValid&this.bitmask)}isSubtreeRenderedExclusivelySVG(e){if(!this.isSingleSVGSupported())return!1;for(let t=0;t<Le.numActiveRenderers;t++){const i=Le.bitmaskOrder(e,t);if(Le.bitmaskSVG&i)return!0;if(this.isSubtreeContainingCompatible(i))return!1}return!1}isSubtreeRenderedExclusivelyCanvas(e){if(!this.isSingleCanvasSupported())return!1;for(let t=0;t<Le.numActiveRenderers;t++){const i=Le.bitmaskOrder(e,t);if(Le.bitmaskCanvas&i)return!0;if(this.isSubtreeContainingCompatible(i))return!1}return!1}audit(){}toString(){let e=wo.bitmaskToString(this.bitmask);for(let t=0;t<Ml;t++){const i=gl[t],s=this._counts[t];s!==0&&(e+=` ${wo.bitToString(i)}:${s}`)}return e}static summaryBitmaskForNodeSelf(e){let t=e._rendererBitmask;e.isPainted()?t|=(e._rendererBitmask&Le.bitmaskCurrentRendererArea^Le.bitmaskCurrentRendererArea)<<Le.bitmaskLacksShift:t|=Le.bitmaskCurrentRendererArea<<Le.bitmaskLacksShift;const i=e._cssTransform||e._layerSplit,s=e._renderer;return!i&&Le.isSVG(e._rendererBitmask)&&(!s||Le.isSVG(s))&&(t|=Le.bitmaskSingleSVG),!i&&Le.isCanvas(e._rendererBitmask)&&(!s||Le.isCanvas(s))&&(t|=Le.bitmaskSingleCanvas),e.isPainted()||(t|=Le.bitmaskNotPainted),e.areSelfBoundsValid()&&(t|=Le.bitmaskBoundsValid),!e.hasPDOMContent&&!e.hasPDOMOrder()&&(t|=Le.bitmaskNoPDOM),t}static bitToString(e){return e===Le.bitmaskCanvas?"Canvas":e===Le.bitmaskSVG?"SVG":e===Le.bitmaskDOM?"DOM":e===Le.bitmaskWebGL?"WebGL":e===Le.bitmaskLacksCanvas?"(-Canvas)":e===Le.bitmaskLacksSVG?"(-SVG)":e===Le.bitmaskLacksDOM?"(-DOM)":e===Le.bitmaskLacksWebGL?"(-WebGL)":e===Le.bitmaskSingleCanvas?"SingleCanvas":e===Le.bitmaskSingleSVG?"SingleSVG":e===Le.bitmaskNotPainted?"NotPainted":e===Le.bitmaskBoundsValid?"BoundsValid":e===Le.bitmaskNoPDOM?"NotAccessible":"?"}static bitmaskToString(e){let t="";for(let i=0;i<Ml;i++){const s=gl[i];e&s&&(t+=`${wo.bitToString(s)} `)}return t}}wo.bitmaskAll=Y0;let lL=1;const Wu=ot.NOTHING.copy(),hL=ot.NOTHING.copy(),Ug=new mt,Yg=af.TANDEM_NAME,Wg="visibleProperty",Gg="inputEnabledProperty",A1=!1,th=["leftTop","centerTop","rightTop","leftCenter","center","rightCenter","leftBottom","centerBottom","rightBottom","left","right","top","bottom","centerX","centerY"],uL=["children","cursor","phetioVisiblePropertyInstrumented","visibleProperty","visible","pickableProperty","pickable","phetioEnabledPropertyInstrumented","enabledProperty","enabled","phetioInputEnabledPropertyInstrumented","inputEnabledProperty","inputEnabled","inputListeners","opacity","disabledOpacity","filters","matrix","translation","x","y","rotation","scale","excludeInvisibleChildrenFromBounds","interruptSubtreeOnInvisible","layoutOptions","localBounds","maxWidth","maxHeight","renderer","layerSplit","usesOpacity","cssTransform","excludeInvisible","webglScale","preventFit","mouseArea","touchArea","clipArea","transformBounds",...th],en={phetioVisiblePropertyInstrumented:!0,visible:!0,opacity:1,disabledOpacity:1,pickable:null,enabled:!0,phetioEnabledPropertyInstrumented:!1,inputEnabled:!0,phetioInputEnabledPropertyInstrumented:!1,clipArea:null,mouseArea:null,touchArea:null,cursor:null,transformBounds:!1,maxWidth:null,maxHeight:null,renderer:null,usesOpacity:!1,layerSplit:!1,cssTransform:!1,excludeInvisible:!1,webglScale:null,preventFit:!1},cL=en.renderer===null?0:Le.fromName(en.renderer);let Rt=class sf extends _a{constructor(e){super(),this._localBoundsOverridden=!1,this._excludeInvisibleChildrenFromBounds=!1,this._interruptSubtreeOnInvisible=!0,this._layoutOptions=null,this._boundsDirty=!0,this._localBoundsDirty=!0,this._selfBoundsDirty=!0,this._childBoundsDirty=!0,this.childrenChangedEmitter=new Hi,this.childInsertedEmitter=new Hi,this.childRemovedEmitter=new Hi,this.childrenReorderedEmitter=new Hi,this.parentAddedEmitter=new Hi,this.parentRemovedEmitter=new Hi,this.transformEmitter=new Hi,this.instanceRefreshEmitter=new Hi,this.rendererSummaryRefreshEmitter=new Hi,this.filterChangeEmitter=new Hi,this.changedInstanceEmitter=new Hi,this.rootedDisplayChangedEmitter=new Hi,this.layoutOptionsChangedEmitter=new Hi,this._activeParentLayoutConstraint=null,this._isNode=!0,this._id=lL++,this._instances=[],this._rootedDisplays=[],this._drawables=[],this._visibleProperty=new Po(en.visible,en.phetioVisiblePropertyInstrumented,this.onVisiblePropertyChange.bind(this)),this.opacityProperty=new Ni(en.opacity,this.onOpacityPropertyChange.bind(this)),this.disabledOpacityProperty=new Ni(en.disabledOpacity,this.onDisabledOpacityPropertyChange.bind(this)),this._pickableProperty=new Po(en.pickable,!1,this.onPickablePropertyChange.bind(this)),this._enabledProperty=new Po(en.enabled,en.phetioEnabledPropertyInstrumented,this.onEnabledPropertyChange.bind(this)),this._inputEnabledProperty=new Po(en.inputEnabled,en.phetioInputEnabledPropertyInstrumented),this.clipAreaProperty=new Ni(en.clipArea),this.voicingVisibleProperty=new Ni(!0),this._mouseArea=en.mouseArea,this._touchArea=en.touchArea,this._cursor=en.cursor,this._children=[],this._parents=[],this._transformBounds=en.transformBounds,this._transform=new ra,this._transformListener=this.onTransformChange.bind(this),this._transform.changeEmitter.addListener(this._transformListener),this._maxWidth=en.maxWidth,this._maxHeight=en.maxHeight,this._appliedScaleFactor=1,this._inputListeners=[],this._renderer=cL,this._usesOpacity=en.usesOpacity,this._layerSplit=en.layerSplit,this._cssTransform=en.cssTransform,this._excludeInvisible=en.excludeInvisible,this._webglScale=en.webglScale,this._preventFit=en.preventFit,this.inputEnabledProperty.lazyLink(this.pdomBoundInputEnabledListener);const t=this.onBoundsListenersAddedOrRemoved.bind(this),i=this.validateBounds.bind(this),s=this.validateSelfBounds.bind(this);this.boundsProperty=new kd(ot.NOTHING.copy(),i),this.boundsProperty.changeCount=t,this.localBoundsProperty=new kd(ot.NOTHING.copy(),i),this.localBoundsProperty.changeCount=t,this.childBoundsProperty=new kd(ot.NOTHING.copy(),i),this.childBoundsProperty.changeCount=t,this.selfBoundsProperty=new kd(ot.NOTHING.copy(),s),this._filters=[],this._rendererBitmask=Le.bitmaskNodeDefault,this._rendererSummary=new wo(this),this._boundsEventCount=0,this._boundsEventSelfCount=0,this._picker=new oL(this),this._isGettingRemovedFromParent=!1,e&&this.mutate(e)}insertChild(e,t,i){return this._picker.onInsertChild(t),this.changeBoundsEventCount(t._boundsEventCount>0?1:0),this._rendererSummary.summaryChange(wo.bitmaskAll,t._rendererSummary.bitmask),t._parents.push(this),this._children.splice(e,0,t),t._rendererSummary.hasNoPDOM()||this.onPDOMAddChild(t),t.invalidateBounds(),this._boundsDirty=!0,this.childInsertedEmitter.emit(t,e),t.parentAddedEmitter.emit(this),!i&&this.childrenChangedEmitter.emit(),this}addChild(e,t){return this.insertChild(this._children.length,e,t),this}removeChild(e,t){const i=he.indexOf(this._children,e);return this.removeChildWithIndex(e,i,t),this}removeChildAt(e,t){const i=this._children[e];return this.removeChildWithIndex(i,e,t),this}removeChildWithIndex(e,t,i){const s=he.indexOf(e._parents,this);e._isGettingRemovedFromParent=!0,e._rendererSummary.hasNoPDOM()||this.onPDOMRemoveChild(e),this._picker.onRemoveChild(e),this.changeBoundsEventCount(e._boundsEventCount>0?-1:0),this._rendererSummary.summaryChange(e._rendererSummary.bitmask,wo.bitmaskAll),e._parents.splice(s,1),this._children.splice(t,1),e._isGettingRemovedFromParent=!1,this.invalidateBounds(),this._childBoundsDirty=!0,this.childRemovedEmitter.emit(e,t),e.parentRemovedEmitter.emit(this),!i&&this.childrenChangedEmitter.emit()}moveChildToIndex(e,t){const i=this.indexOfChild(e);return this._children[t]!==e&&(this._children.splice(i,1),this._children.splice(t,0,e),this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(Math.min(i,t),Math.max(i,t)),this.childrenChangedEmitter.emit()),this}removeAllChildren(){return this.setChildren([]),this}setChildren(e){const t=[],i=[],s=[];let r;for(Wh(e,this._children,i,t,s),r=t.length-1;r>=0;r--)this.removeChild(t[r],!0);let o=-1,d=-1;for(r=0;r<s.length;r++){const y=s[r];this._children[r]!==y&&(this._children[r]=y,o===-1&&(o=r),d=r)}const g=o!==-1;if(g&&(this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(o,d)),i.length){let y=0,S=i[y];for(r=0;r<e.length;r++)e[r]===S&&(this.insertChild(r,S,!0),S=i[++y])}return(t.length!==0||i.length!==0||g)&&this.childrenChangedEmitter.emit(),this}set children(e){this.setChildren(e)}get children(){return this.getChildren()}getChildren(){return this._children.slice(0)}getChildrenCount(){return this._children.length}getParents(){return this._parents.slice(0)}get parents(){return this.getParents()}getParent(){return this._parents.length?this._parents[0]:null}get parent(){return this.getParent()}getChildAt(e){return this._children[e]}indexOfParent(e){return he.indexOf(this._parents,e)}indexOfChild(e){return he.indexOf(this._children,e)}moveToFront(){return he.each(this.parents,e=>e.moveChildToFront(this)),this}moveChildToFront(e){return this.moveChildToIndex(e,this._children.length-1)}moveForward(){return this.parents.forEach(e=>e.moveChildForward(this)),this}moveChildForward(e){const t=this.indexOfChild(e);return t<this.getChildrenCount()-1&&this.moveChildToIndex(e,t+1),this}moveBackward(){return this.parents.forEach(e=>e.moveChildBackward(this)),this}moveChildBackward(e){const t=this.indexOfChild(e);return t>0&&this.moveChildToIndex(e,t-1),this}moveToBack(){return he.each(this.parents,e=>e.moveChildToBack(this)),this}moveChildToBack(e){return this.moveChildToIndex(e,0)}replaceChild(e,t){const i=this.indexOfChild(e),s=e.focused;return this.removeChild(e,!0),this.insertChild(i,t,!0),this.childrenChangedEmitter.emit(),s&&t.focusable&&t.focus(),this}detach(){return he.each(this._parents.slice(0),e=>e.removeChild(this)),this}changeBoundsEventCount(e){if(e!==0){const t=this._boundsEventCount===0;this._boundsEventCount+=e;const i=this._boundsEventCount===0;if(t!==i){const s=t?1:-1,r=this._parents.length;for(let o=0;o<r;o++)this._parents[o].changeBoundsEventCount(s)}}}validateSelfBounds(){if(this._selfBoundsDirty){const e=Wu.set(this.selfBoundsProperty._value),t=this.updateSelfBounds();return this._selfBoundsDirty=!1,t&&this.selfBoundsProperty.notifyListeners(e),!0}return!1}validateBounds(){let e,i=this.validateSelfBounds();const s=this.childBoundsProperty._value,r=this.localBoundsProperty._value,o=this.selfBoundsProperty._value,d=this.boundsProperty._value;if(this._childBoundsDirty){i=!0;let g=!0;for(;g;)for(g=!1,e=this._children.length;e--;){const S=this._children[e];S&&(g=S.validateBounds()||g)}const y=Wu.set(s);for(s.set(ot.NOTHING),e=this._children.length;e--;){const S=this._children[e];(S&&!this._excludeInvisibleChildrenFromBounds||S.isVisible())&&s.includeBounds(S.bounds)}this._childBoundsDirty=!1,s.equals(y)||s.equalsEpsilon(y,1e-13)||this.childBoundsProperty.notifyListeners(y)}if(this._localBoundsDirty){i=!0,this._localBoundsDirty=!1;const g=Wu.set(r);if(!this._localBoundsOverridden){r.set(o).includeBounds(s);const y=this.clipArea;y&&r.constrainBounds(y.bounds)}(this._maxWidth!==null||this._maxHeight!==null)&&this.updateMaxDimension(r),r.equals(g)||(this._boundsDirty=!0,r.equalsEpsilon(g,1e-13)||this.localBoundsProperty.notifyListeners(g))}if(this._boundsDirty){i=!0,this._boundsDirty=!1;const g=Wu.set(d);if(this._transformBounds&&!this._transform.getMatrix().isAxisAligned()){const y=Ug.set(this.getMatrix());d.set(ot.NOTHING),this._includeTransformedSubtreeBounds(y,d);const S=this.clipArea;S&&d.constrainBounds(S.getBoundsWithTransform(y))}else d.set(r),this.transformBoundsFromLocalToParent(d);if(!d.equals(g)){for(e=this._parents.length;e--;)this._parents[e].invalidateBounds();d.equalsEpsilon(g,1e-13)||this.boundsProperty.notifyListeners(g)}}return(this._childBoundsDirty||this._boundsDirty)&&this.validateBounds(),i}_includeTransformedSubtreeBounds(e,t){this.selfBounds.isEmpty()||t.includeBounds(this.getTransformedSelfBounds(e));const i=this._children.length;for(let s=0;s<i;s++){const r=this._children[s];e.multiplyMatrix(r._transform.getMatrix()),r._includeTransformedSubtreeBounds(e,t),e.multiplyMatrix(r._transform.getInverse())}return t}validateWatchedBounds(){for(;this.watchedBoundsScan(););}watchedBoundsScan(){if(this._boundsEventSelfCount!==0)return this.validateBounds();if(this._boundsEventCount>0&&this._childBoundsDirty){let e=!1;const t=this._children.length;for(let i=0;i<t;i++)e=this._children[i].watchedBoundsScan()||e;return e}else return!1}invalidateBounds(){this._boundsDirty=!0,this._localBoundsDirty=!0;let e=this._parents.length;for(;e--;)this._parents[e].invalidateChildBounds()}invalidateChildBounds(){if(!this._childBoundsDirty){this._childBoundsDirty=!0,this._localBoundsDirty=!0;let e=this._parents.length;for(;e--;)this._parents[e].invalidateChildBounds()}}invalidateSelf(e){const t=this.selfBoundsProperty._value;if(!e)this._selfBoundsDirty=!0,this.invalidateBounds(),this._picker.onSelfBoundsDirty();else if(this._selfBoundsDirty=!1,!t.equals(e)){const i=Wu.set(t);this.invalidateBounds(),this._picker.onSelfBoundsDirty(),t.set(e),this.selfBoundsProperty.notifyListeners(i)}}updateSelfBounds(){return!1}hasChild(e){return he.includes(this._children,e)}getSelfShape(){return this.selfBounds.isEmpty()?new Wt:Wt.bounds(this.selfBounds)}getSelfBounds(){return this.selfBoundsProperty.value}get selfBounds(){return this.getSelfBounds()}getSafeSelfBounds(){return this.selfBoundsProperty.value}get safeSelfBounds(){return this.getSafeSelfBounds()}getChildBounds(){return this.childBoundsProperty.value}get childBounds(){return this.getChildBounds()}getLocalBounds(){return this.localBoundsProperty.value}get localBounds(){return this.getLocalBounds()}set localBounds(e){this.setLocalBounds(e)}get localBoundsOverridden(){return this._localBoundsOverridden}setLocalBounds(e){const t=this.localBoundsProperty._value,i=t.copy();if(e===null)this._localBoundsOverridden&&(this._localBoundsOverridden=!1,this.localBoundsProperty.notifyListeners(i),this.invalidateBounds());else{const s=!e.equals(t)||!this._localBoundsOverridden;s&&t.set(e),this._localBoundsOverridden||(this._localBoundsOverridden=!0),s&&(this.localBoundsProperty.notifyListeners(i),this.invalidateBounds())}return this}getTransformedSelfBounds(e){return this.selfBounds.transformed(e)}getTransformedSafeSelfBounds(e){return this.safeSelfBounds.transformed(e)}getSafeTransformedVisibleBounds(e){const t=(e||mt.IDENTITY).timesMatrix(this.matrix),i=ot.NOTHING.copy();if(this.visibleProperty.value&&(this.selfBounds.isEmpty()||i.includeBounds(this.getTransformedSafeSelfBounds(t)),this._children.length))for(let s=0;s<this._children.length;s++)i.includeBounds(this._children[s].getSafeTransformedVisibleBounds(t));return i}get safeTransformedVisibleBounds(){return this.getSafeTransformedVisibleBounds()}setTransformBounds(e){return this._transformBounds!==e&&(this._transformBounds=e,this.invalidateBounds()),this}set transformBounds(e){this.setTransformBounds(e)}get transformBounds(){return this.getTransformBounds()}getTransformBounds(){return this._transformBounds}getBounds(){return this.boundsProperty.value}get bounds(){return this.getBounds()}getVisibleLocalBounds(){const e=this.selfBounds.copy();let t=this._children.length;for(;t--;)e.includeBounds(this._children[t].getVisibleBounds());const i=this.clipArea;return i&&e.constrainBounds(i.bounds),e}get visibleLocalBounds(){return this.getVisibleLocalBounds()}getVisibleBounds(){return this.isVisible()?this.getVisibleLocalBounds().transform(this.getMatrix()):ot.NOTHING}get visibleBounds(){return this.getVisibleBounds()}hitTest(e,t,i){return this._picker.hitTest(e,!!t,!!i)}trailUnderPointer(e){return e.point===null?null:this.hitTest(e.point,e.type==="mouse",e.isTouchLike())}containsPoint(e){return this.hitTest(e)!==null}containsPointSelf(e){return this.selfBounds.containsPoint(e)}intersectsBoundsSelf(e){return this.selfBounds.intersectsBounds(e)}isPhetioMouseHittable(e){return this.pickable===!1&&!this.isAnyDescendantAPhetioMouseHitTarget()?!1:this.visible&&(this.clipArea===null||this.clipArea.containsPoint(this._transform.getInverse().timesVector2(e)))}isAnyDescendantAPhetioMouseHitTarget(){return this.getPhetioMouseHitTarget()!=="phetioNotSelectable"||he.some(this.children,e=>e.isAnyDescendantAPhetioMouseHitTarget())}getPhetioMouseHit(e){if(!this.isPhetioMouseHittable(e))return null;const t=this._transform.getInverse().timesVector2(e);let i=null;for(let s=this._children.length-1;s>=0;s--){const r=this._children[s].getPhetioMouseHit(t);if(r instanceof As)return r;r==="phetioNotSelectable"&&(i=!0)}return i?this.getPhetioMouseHitTarget():this._mouseArea?this._mouseArea.containsPoint(t)?this.getPhetioMouseHitTarget():null:this.selfBounds.containsPoint(t)&&this.containsPointSelf(t)?this.getPhetioMouseHitTarget():null}isPainted(){return!1}areSelfBoundsValid(){return!0}hasParent(){return this._parents.length!==0}hasChildren(){return this._children.length>0}isChildIncludedInLayout(e){return e.bounds.isValid()&&(!this._excludeInvisibleChildrenFromBounds||e.visible)}walkDepthFirst(e){e(this);const t=this._children.length;for(let i=0;i<t;i++)this._children[i].walkDepthFirst(e)}addInputListener(e,t){return he.includes(this._inputListeners,e)||(this._inputListeners.push(e),this._picker.onAddInputListener(),e.hotkeys&&yb.updateHotkeysFromInputListenerChange(this),t!=null&&t.disposer&&this.addDisposerAction("inputListener",e,t.disposer,()=>this.removeInputListener(e))),this}removeInputListener(e){const t=he.indexOf(this._inputListeners,e);return t>=0&&(this._inputListeners.splice(t,1),this._picker.onRemoveInputListener(),e.hotkeys&&yb.updateHotkeysFromInputListenerChange(this),this.removeDisposerAction("inputListener",e)),this}hasInputListener(e){for(let t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}interruptInput(){const e=this.inputListeners;for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}return this}interruptSubtreeInput(){this.interruptInput();const e=this._children.slice();for(let t=0;t<e.length;t++){const i=e[t];i._picker.isPotentiallyPickable()&&i.interruptSubtreeInput()}return this}translate(e,t,i){if(typeof e=="number"){if(Math.abs(e)<1e-12&&Math.abs(t)<1e-12)return;i?this.prependTranslation(e,t):this.appendMatrix(Ug.setToTranslation(e,t))}else{const s=e;if(!s.x&&!s.y)return;this.translate(s.x,s.y,t)}}scale(e,t,i){if(typeof e=="number")if(t===void 0||typeof t=="boolean")this.scale(e,e,t);else{if(e===1&&t===1)return;i?this.prependMatrix(mt.scaling(e,t)):this.appendMatrix(mt.scaling(e,t))}else{const s=e;this.scale(s.x,s.y,t)}}rotate(e,t){e%(2*Math.PI)!==0&&(t?this.prependMatrix(mt.rotation2(e)):this.appendMatrix(mt.rotation2(e)))}rotateAround(e,t){let i=mt.translation(-e.x,-e.y);return i=mt.rotation2(t).timesMatrix(i),i=mt.translation(e.x,e.y).timesMatrix(i),this.prependMatrix(i),this}setX(e){return this.translate(e-this.getX(),0,!0),this}set x(e){this.setX(e)}get x(){return this.getX()}getX(){return this._transform.getMatrix().m02()}setY(e){return this.translate(0,e-this.getY(),!0),this}set y(e){this.setY(e)}get y(){return this.getY()}getY(){return this._transform.getMatrix().m12()}setScaleMagnitude(e,t){const i=this.getScaleVector();return typeof e=="number"?(t===void 0&&(t=e),this.appendMatrix(mt.scaling(e/i.x,t/i.y))):this.appendMatrix(mt.scaling(e.x/i.x,e.y/i.y)),this}getScaleVector(){return this._transform.getMatrix().getScaleVector()}setRotation(e){return this.appendMatrix(Ug.setToRotationZ(e-this.getRotation())),this}set rotation(e){this.setRotation(e)}get rotation(){return this.getRotation()}getRotation(){return this._transform.getMatrix().getRotation()}setTranslation(e,t){const i=this._transform.getMatrix(),s=i.m02(),r=i.m12();let o,d;return typeof e=="number"?(o=e-s,d=t-r):(o=e.x-s,d=e.y-r),this.translate(o,d,!0),this}set translation(e){this.setTranslation(e)}get translation(){return this.getTranslation()}getTranslation(){const e=this._transform.getMatrix();return new Ne(e.m02(),e.m12())}appendMatrix(e){this._transform.append(e)}prependMatrix(e){this._transform.prepend(e)}prependTranslation(e,t){!e&&!t||this._transform.prependTranslation(e,t)}setMatrix(e){this._transform.setMatrix(e)}set matrix(e){this.setMatrix(e)}get matrix(){return this.getMatrix()}getMatrix(){return this._transform.getMatrix()}getTransform(){return this._transform}get transform(){return this.getTransform()}resetTransform(){this.setMatrix(mt.IDENTITY)}onTransformChange(){this.invalidateBounds(),this._picker.onTransformChange(),this.transformEmitter.emit()}onSummaryChange(e,t){this._pdomDisplaysInfo.onSummaryChange(e,t)}updateMaxDimension(e){const t=this._appliedScaleFactor;let i=1;if(this._maxWidth!==null){const r=e.width;r>this._maxWidth&&(i=Math.min(i,this._maxWidth/r))}if(this._maxHeight!==null){const r=e.height;r>this._maxHeight&&(i=Math.min(i,this._maxHeight/r))}const s=i/t;s!==1&&(this._appliedScaleFactor=i,this.scale(s))}auditMaxDimensions(){}onMaxDimensionChange(e,t){e===null&&t!==null?(this.changeBoundsEventCount(1),this._boundsEventSelfCount++):e!==null&&t===null&&(this.changeBoundsEventCount(-1),this._boundsEventSelfCount--)}setMaxWidth(e){this._maxWidth!==e&&(this.onMaxDimensionChange(this._maxWidth,e),this._maxWidth=e,this.updateMaxDimension(this.localBoundsProperty.value))}set maxWidth(e){this.setMaxWidth(e)}get maxWidth(){return this.getMaxWidth()}getMaxWidth(){return this._maxWidth}setMaxHeight(e){this._maxHeight!==e&&(this.onMaxDimensionChange(this._maxHeight,e),this._maxHeight=e,this.updateMaxDimension(this.localBoundsProperty.value))}set maxHeight(e){this.setMaxHeight(e)}get maxHeight(){return this.getMaxHeight()}getMaxHeight(){return this._maxHeight}setLeft(e){const t=this.getLeft();return isFinite(t)&&this.translate(e-t,0,!0),this}set left(e){this.setLeft(e)}get left(){return this.getLeft()}getLeft(){return this.getBounds().minX}setRight(e){const t=this.getRight();return isFinite(t)&&this.translate(e-t,0,!0),this}set right(e){this.setRight(e)}get right(){return this.getRight()}getRight(){return this.getBounds().maxX}setCenterX(e){const t=this.getCenterX();return isFinite(t)&&this.translate(e-t,0,!0),this}set centerX(e){this.setCenterX(e)}get centerX(){return this.getCenterX()}getCenterX(){return this.getBounds().getCenterX()}setCenterY(e){const t=this.getCenterY();return isFinite(t)&&this.translate(0,e-t,!0),this}set centerY(e){this.setCenterY(e)}get centerY(){return this.getCenterY()}getCenterY(){return this.getBounds().getCenterY()}setTop(e){const t=this.getTop();return isFinite(t)&&this.translate(0,e-t,!0),this}set top(e){this.setTop(e)}get top(){return this.getTop()}getTop(){return this.getBounds().minY}setBottom(e){const t=this.getBottom();return isFinite(t)&&this.translate(0,e-t,!0),this}set bottom(e){this.setBottom(e)}get bottom(){return this.getBottom()}getBottom(){return this.getBounds().maxY}setLeftTop(e){const t=this.getLeftTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftTop(e){this.setLeftTop(e)}get leftTop(){return this.getLeftTop()}getLeftTop(){return this.getBounds().getLeftTop()}setCenterTop(e){const t=this.getCenterTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set centerTop(e){this.setCenterTop(e)}get centerTop(){return this.getCenterTop()}getCenterTop(){return this.getBounds().getCenterTop()}setRightTop(e){const t=this.getRightTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightTop(e){this.setRightTop(e)}get rightTop(){return this.getRightTop()}getRightTop(){return this.getBounds().getRightTop()}setLeftCenter(e){const t=this.getLeftCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftCenter(e){this.setLeftCenter(e)}get leftCenter(){return this.getLeftCenter()}getLeftCenter(){return this.getBounds().getLeftCenter()}setCenter(e){const t=this.getCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this.getBounds().getCenter()}setRightCenter(e){const t=this.getRightCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightCenter(e){this.setRightCenter(e)}get rightCenter(){return this.getRightCenter()}getRightCenter(){return this.getBounds().getRightCenter()}setLeftBottom(e){const t=this.getLeftBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftBottom(e){this.setLeftBottom(e)}get leftBottom(){return this.getLeftBottom()}getLeftBottom(){return this.getBounds().getLeftBottom()}setCenterBottom(e){const t=this.getCenterBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set centerBottom(e){this.setCenterBottom(e)}get centerBottom(){return this.getCenterBottom()}getCenterBottom(){return this.getBounds().getCenterBottom()}setRightBottom(e){const t=this.getRightBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightBottom(e){this.setRightBottom(e)}get rightBottom(){return this.getRightBottom()}getRightBottom(){return this.getBounds().getRightBottom()}getWidth(){return this.getBounds().getWidth()}get width(){return this.getWidth()}getHeight(){return this.getBounds().getHeight()}get height(){return this.getHeight()}getLocalWidth(){return this.getLocalBounds().getWidth()}get localWidth(){return this.getLocalWidth()}getLocalHeight(){return this.getLocalBounds().getHeight()}get localHeight(){return this.getLocalHeight()}getLocalLeft(){return this.getLocalBounds().minX}get localLeft(){return this.getLocalLeft()}getLocalRight(){return this.getLocalBounds().maxX}get localRight(){return this.getLocalRight()}getLocalCenterX(){return this.getLocalBounds().getCenterX()}get localCenterX(){return this.getLocalCenterX()}getLocalCenterY(){return this.getLocalBounds().getCenterY()}get localCenterY(){return this.getLocalCenterY()}getLocalTop(){return this.getLocalBounds().minY}get localTop(){return this.getLocalTop()}getLocalBottom(){return this.getLocalBounds().maxY}get localBottom(){return this.getLocalBottom()}getLocalLeftTop(){return this.getLocalBounds().getLeftTop()}get localLeftTop(){return this.getLocalLeftTop()}getLocalCenterTop(){return this.getLocalBounds().getCenterTop()}get localCenterTop(){return this.getLocalCenterTop()}getLocalRightTop(){return this.getLocalBounds().getRightTop()}get localRightTop(){return this.getLocalRightTop()}getLocalLeftCenter(){return this.getLocalBounds().getLeftCenter()}get localLeftCenter(){return this.getLocalLeftCenter()}getLocalCenter(){return this.getLocalBounds().getCenter()}get localCenter(){return this.getLocalCenter()}getLocalRightCenter(){return this.getLocalBounds().getRightCenter()}get localRightCenter(){return this.getLocalRightCenter()}getLocalLeftBottom(){return this.getLocalBounds().getLeftBottom()}get localLeftBottom(){return this.getLocalLeftBottom()}getLocalCenterBottom(){return this.getLocalBounds().getCenterBottom()}get localCenterBottom(){return this.getLocalCenterBottom()}getLocalRightBottom(){return this.getLocalBounds().getRightBottom()}get localRightBottom(){return this.getLocalRightBottom()}getId(){return this._id}get id(){return this.getId()}onVisiblePropertyChange(e){!e&&this._interruptSubtreeOnInvisible&&this.interruptSubtreeInput(),this._picker.onVisibilityChange(),this._pdomDisplaysInfo.onVisibilityChange(e);for(let t=0;t<this._parents.length;t++){const i=this._parents[t];i._excludeInvisibleChildrenFromBounds&&i.invalidateChildBounds()}}setVisibleProperty(e){return this._visibleProperty.setTargetProperty(e,this,Wg)}set visibleProperty(e){this.setVisibleProperty(e)}get visibleProperty(){return this.getVisibleProperty()}getVisibleProperty(){return this._visibleProperty}setVisible(e){return this.visibleProperty.set(e),this}set visible(e){this.setVisible(e)}get visible(){return this.isVisible()}isVisible(){return this.visibleProperty.value}setPhetioVisiblePropertyInstrumented(e){return this._visibleProperty.setTargetPropertyInstrumented(e,this)}set phetioVisiblePropertyInstrumented(e){this.setPhetioVisiblePropertyInstrumented(e)}get phetioVisiblePropertyInstrumented(){return this.getPhetioVisiblePropertyInstrumented()}getPhetioVisiblePropertyInstrumented(){return this._visibleProperty.getTargetPropertyInstrumented()}swapVisibility(e){const t=this.visible?this:e,i=this.visible?e:this,s=t.focused;return t.visible=!1,i.visible=!0,s&&i.focusable&&i.focus(),this}setOpacity(e){if(e<0||e>1)throw new Error(`opacity out of range: ${e}`);this.opacityProperty.value=e}set opacity(e){this.setOpacity(e)}get opacity(){return this.getOpacity()}getOpacity(){return this.opacityProperty.value}setDisabledOpacity(e){if(e<0||e>1)throw new Error(`disabledOpacity out of range: ${e}`);return this.disabledOpacityProperty.value=e,this}set disabledOpacity(e){this.setDisabledOpacity(e)}get disabledOpacity(){return this.getDisabledOpacity()}getDisabledOpacity(){return this.disabledOpacityProperty.value}getEffectiveOpacity(){return this.opacityProperty.value*(this.enabledProperty.value?1:this.disabledOpacityProperty.value)}get effectiveOpacity(){return this.getEffectiveOpacity()}onOpacityPropertyChange(){this.filterChangeEmitter.emit()}onDisabledOpacityPropertyChange(){this._enabledProperty.value||this.filterChangeEmitter.emit()}setFilters(e){this._filters.length=0,this._filters.push(...e),this.invalidateHint(),this.filterChangeEmitter.emit()}set filters(e){this.setFilters(e)}get filters(){return this.getFilters()}getFilters(){return this._filters.slice()}setPickableProperty(e){return this._pickableProperty.setTargetProperty(e,this,null)}set pickableProperty(e){this.setPickableProperty(e)}get pickableProperty(){return this.getPickableProperty()}getPickableProperty(){return this._pickableProperty}setPickable(e){return this._pickableProperty.set(e),this}set pickable(e){this.setPickable(e)}get pickable(){return this.isPickable()}isPickable(){return this._pickableProperty.value}onPickablePropertyChange(e,t){this._picker.onPickableChange(t,e)}setEnabledProperty(e){return this._enabledProperty.setTargetProperty(e,this,Yg)}set enabledProperty(e){this.setEnabledProperty(e)}get enabledProperty(){return this.getEnabledProperty()}getEnabledProperty(){return this._enabledProperty}setPhetioEnabledPropertyInstrumented(e){return this._enabledProperty.setTargetPropertyInstrumented(e,this)}set phetioEnabledPropertyInstrumented(e){this.setPhetioEnabledPropertyInstrumented(e)}get phetioEnabledPropertyInstrumented(){return this.getPhetioEnabledPropertyInstrumented()}getPhetioEnabledPropertyInstrumented(){return this._enabledProperty.getTargetPropertyInstrumented()}setEnabled(e){return this._enabledProperty.set(e),this}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabledProperty.value}onEnabledPropertyChange(e){!e&&this.interruptSubtreeInput(),this.inputEnabledProperty.isSettable()&&(this.inputEnabled=e),this.disabledOpacityProperty.value!==1&&this.filterChangeEmitter.emit()}setInputEnabledProperty(e){return this._inputEnabledProperty.setTargetProperty(e,this,Gg)}set inputEnabledProperty(e){this.setInputEnabledProperty(e)}get inputEnabledProperty(){return this.getInputEnabledProperty()}getInputEnabledProperty(){return this._inputEnabledProperty}setPhetioInputEnabledPropertyInstrumented(e){return this._inputEnabledProperty.setTargetPropertyInstrumented(e,this)}set phetioInputEnabledPropertyInstrumented(e){this.setPhetioInputEnabledPropertyInstrumented(e)}get phetioInputEnabledPropertyInstrumented(){return this.getPhetioInputEnabledPropertyInstrumented()}getPhetioInputEnabledPropertyInstrumented(){return this._inputEnabledProperty.getTargetPropertyInstrumented()}setInputEnabled(e){this.inputEnabledProperty.value=e}set inputEnabled(e){this.setInputEnabled(e)}get inputEnabled(){return this.isInputEnabled()}isInputEnabled(){return this.inputEnabledProperty.value}setInputListeners(e){for(;this._inputListeners.length;)this.removeInputListener(this._inputListeners[0]);for(let t=0;t<e.length;t++)this.addInputListener(e[t]);return this}set inputListeners(e){this.setInputListeners(e)}get inputListeners(){return this.getInputListeners()}getInputListeners(){return this._inputListeners.slice(0)}setCursor(e){this._cursor=e==="auto"?null:e}set cursor(e){this.setCursor(e)}get cursor(){return this.getCursor()}getCursor(){return this._cursor}getEffectiveCursor(){if(this._cursor)return this._cursor;for(let e=0;e<this._inputListeners.length;e++){const t=this._inputListeners[e];if(t.cursor)return t.cursor}return null}setMouseArea(e){return this._mouseArea!==e&&(this._mouseArea=e,this._picker.onMouseAreaChange()),this}set mouseArea(e){this.setMouseArea(e)}get mouseArea(){return this.getMouseArea()}getMouseArea(){return this._mouseArea}setTouchArea(e){return this._touchArea!==e&&(this._touchArea=e,this._picker.onTouchAreaChange()),this}set touchArea(e){this.setTouchArea(e)}get touchArea(){return this.getTouchArea()}getTouchArea(){return this._touchArea}setClipArea(e){this.clipArea!==e&&(this.clipAreaProperty.value=e,this.invalidateBounds(),this._picker.onClipAreaChange())}set clipArea(e){this.setClipArea(e)}get clipArea(){return this.getClipArea()}getClipArea(){return this.clipAreaProperty.value}hasClipArea(){return this.clipArea!==null}setRendererBitmask(e){e!==this._rendererBitmask&&(this._rendererBitmask=e,this._rendererSummary.selfChange(),this.instanceRefreshEmitter.emit())}invalidateSupportedRenderers(){}invalidateHint(){this.rendererSummaryRefreshEmitter.emit(),this.instanceRefreshEmitter.emit()}setRenderer(e){let t=0;e==="canvas"?t=Le.bitmaskCanvas:e==="svg"?t=Le.bitmaskSVG:e==="dom"?t=Le.bitmaskDOM:e==="webgl"&&(t=Le.bitmaskWebGL),this._renderer!==t&&(this._renderer=t,this.invalidateHint())}set renderer(e){this.setRenderer(e)}get renderer(){return this.getRenderer()}getRenderer(){return this._renderer===0?null:this._renderer===Le.bitmaskCanvas?"canvas":this._renderer===Le.bitmaskSVG?"svg":this._renderer===Le.bitmaskDOM?"dom":this._renderer===Le.bitmaskWebGL?"webgl":null}setLayerSplit(e){e!==this._layerSplit&&(this._layerSplit=e,this.invalidateHint())}set layerSplit(e){this.setLayerSplit(e)}get layerSplit(){return this.isLayerSplit()}isLayerSplit(){return this._layerSplit}setUsesOpacity(e){e!==this._usesOpacity&&(this._usesOpacity=e,this.invalidateHint())}set usesOpacity(e){this.setUsesOpacity(e)}get usesOpacity(){return this.getUsesOpacity()}getUsesOpacity(){return this._usesOpacity}setCSSTransform(e){e!==this._cssTransform&&(this._cssTransform=e,this.invalidateHint())}set cssTransform(e){this.setCSSTransform(e)}get cssTransform(){return this.isCSSTransformed()}isCSSTransformed(){return this._cssTransform}setExcludeInvisible(e){e!==this._excludeInvisible&&(this._excludeInvisible=e,this.invalidateHint())}set excludeInvisible(e){this.setExcludeInvisible(e)}get excludeInvisible(){return this.isExcludeInvisible()}isExcludeInvisible(){return this._excludeInvisible}setExcludeInvisibleChildrenFromBounds(e){e!==this._excludeInvisibleChildrenFromBounds&&(this._excludeInvisibleChildrenFromBounds=e,this.invalidateBounds())}set excludeInvisibleChildrenFromBounds(e){this.setExcludeInvisibleChildrenFromBounds(e)}get excludeInvisibleChildrenFromBounds(){return this.isExcludeInvisibleChildrenFromBounds()}isExcludeInvisibleChildrenFromBounds(){return this._excludeInvisibleChildrenFromBounds}setInterruptSubtreeOnInvisible(e){e!==this._interruptSubtreeOnInvisible&&(this._interruptSubtreeOnInvisible=e)}set interruptSubtreeOnInvisible(e){this.setInterruptSubtreeOnInvisible(e)}get interruptSubtreeOnInvisible(){return this.isInterruptSubtreeOnInvisible()}isInterruptSubtreeOnInvisible(){return this._interruptSubtreeOnInvisible}setLayoutOptions(e){e!==this._layoutOptions&&(this._layoutOptions=e,this.layoutOptionsChangedEmitter.emit())}set layoutOptions(e){this.setLayoutOptions(e)}get layoutOptions(){return this.getLayoutOptions()}getLayoutOptions(){return this._layoutOptions}mutateLayoutOptions(e){this.layoutOptions=Vl()({},this.layoutOptions||{},e)}get widthSizable(){return!1}get heightSizable(){return!1}get extendsWidthSizable(){return!1}get extendsHeightSizable(){return!1}get extendsSizable(){return!1}setPreventFit(e){e!==this._preventFit&&(this._preventFit=e,this.invalidateHint())}set preventFit(e){this.setPreventFit(e)}get preventFit(){return this.isPreventFit()}isPreventFit(){return this._preventFit}setWebGLScale(e){e!==this._webglScale&&(this._webglScale=e,this.invalidateHint())}set webglScale(e){this.setWebGLScale(e)}get webglScale(){return this.getWebGLScale()}getWebGLScale(){return this._webglScale}getUniqueTrail(e){if(e)return this.getTrails(e)[0];{const t=new Ki;let i=this;for(;i;)t.addAncestor(i),i=i._parents[0];return t}}getUniqueTrailTo(e){return this.getUniqueTrail(t=>e===t)}getTrails(e){e=e||sf.defaultTrailPredicate;const t=[],i=new Ki(this);return Ki.appendAncestorTrailsWithPredicate(t,i,e),t}getTrailsTo(e){return this.getTrails(t=>t===e)}getLeafTrails(e){e=e||sf.defaultLeafTrailPredicate;const t=[],i=new Ki(this);return Ki.appendDescendantTrailsWithPredicate(t,i,e),t}getLeafTrailsTo(e){return this.getLeafTrails(t=>t===e)}getUniqueLeafTrail(e){return this.getLeafTrails(e)[0]}getUniqueLeafTrailTo(e){return this.getUniqueLeafTrail(t=>t===e)}getConnectedNodes(){const e=[];let t=this._children.concat(this._parents).concat(this);for(;t.length;){const i=t.pop();he.includes(e,i)||(e.push(i),t=t.concat(i._children,i._parents))}return e}getSubtreeNodes(){const e=[];let t=this._children.concat(this);for(;t.length;){const i=t.pop();he.includes(e,i)||(e.push(i),t=t.concat(i._children))}return e}getTopologicallySortedNodes(){const e={},t=[],i=[];let s;he.each(this.getConnectedNodes(),o=>{e[o.id]={},he.each(o._children,d=>{e[o.id][d.id]=!0}),o.parents.length||t.push(o)});function r(o){delete e[s.id][o.id],he.every(e,d=>!d[o.id])&&t.push(o)}for(;t.length;)s=t.pop(),i.push(s),he.each(s._children,r);return i}canAddChild(e){if(this===e||he.includes(this._children,e))return!1;const t={},i=[];let s;he.each(this.getConnectedNodes().concat(e.getConnectedNodes()),o=>{t[o.id]={},he.each(o._children,d=>{t[o.id][d.id]=!0}),!o.parents.length&&o!==e&&i.push(o)}),t[this.id][e.id]=!0;function r(o){delete t[s.id][o.id],he.every(t,d=>!d[o.id])&&i.push(o)}for(;i.length;)s=i.pop(),he.each(s._children,r),s===this&&r(e);return he.every(t,o=>he.every(o,d=>!1))}canvasPaintSelf(e,t){}renderToCanvasSelf(e,t){this.isPainted()&&this._rendererBitmask&Le.bitmaskCanvas&&this.canvasPaintSelf(e,t)}renderToCanvasSubtree(e,t){t=t||mt.identity(),e.resetStyles(),this.renderToCanvasSelf(e,t);for(let i=0;i<this._children.length;i++){const s=this._children[i];if(s.isVisible()&&s.bounds.isValid()){const r=s.effectiveOpacity!==1||s.clipArea||s._filters.length;if(e.context.save(),t.multiplyMatrix(s._transform.getMatrix()),t.canvasSetTransform(e.context),r){const o=s.localBounds.transformed(t).dilate(4).roundOut().constrainBounds(hL.setMinMax(0,0,e.canvas.width,e.canvas.height));if(o.width>0&&o.height>0){const d=document.createElement("canvas");d.width=o.width,d.height=o.height;const g=d.getContext("2d"),y=new Xh(d,g),S=t.copy().prependTranslation(-o.minX,-o.minY);S.canvasSetTransform(g),s.renderToCanvasSubtree(y,S),e.context.save(),s.clipArea&&(e.context.beginPath(),s.clipArea.writeToContext(e.context),e.context.clip()),e.context.setTransform(1,0,0,1,0,0),e.context.globalAlpha=s.effectiveOpacity;let T=!1;s._filters.length&&(Xt.canvasFilter&&he.every(s._filters,L=>L.isDOMCompatible())?(e.context.filter=s._filters.map(L=>L.getCSSFilterString()).join(" "),T=!0):s._filters.forEach(L=>L.applyCanvasFilter(y))),e.context.drawImage(d,o.minX,o.minY),e.context.restore(),T&&(e.context.filter="none")}}else s.renderToCanvasSubtree(e,t);t.multiplyMatrix(s._transform.getInverse()),e.context.restore()}}}renderToCanvas(e,t,i,s){e.width=e.width,s&&(t.fillStyle=s,t.fillRect(0,0,e.width,e.height));const r=new Xh(e,t);this.renderToCanvasSubtree(r,mt.identity()),i&&i()}toCanvas(e,t,i,s,r){const d=this.getBounds().union(this.localToParentBounds(this.getSafeSelfBounds()));t=t!==void 0?t:Math.ceil(2-d.minX),i=i!==void 0?i:Math.ceil(2-d.minY),s=s!==void 0?s:Math.ceil(d.getWidth()+2*2),r=r!==void 0?r:Math.ceil(d.getHeight()+2*2);const g=document.createElement("canvas");g.width=s,g.height=r;const y=g.getContext("2d");y.translate(t,i),this._transform.getMatrix().canvasAppendTransform(y);const S=new Xh(g,y);this.renderToCanvasSubtree(S,mt.translation(t,i).timesMatrix(this._transform.getMatrix())),e(g,t,i,s,r)}toDataURL(e,t,i,s,r){this.toCanvas((o,d,g,y,S)=>{e(o.toDataURL(),d,g,y,S)},t,i,s,r)}toImage(e,t,i,s,r){this.toDataURL((o,d,g)=>{const y=document.createElement("img");y.onload=()=>{e(y,d,g);try{delete y.onload}catch{}},y.src=o},t,i,s,r)}createDOMDrawable(e,t){throw new Error("createDOMDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createSVGDrawable(e,t){throw new Error("createSVGDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createCanvasDrawable(e,t){throw new Error("createCanvasDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createWebGLDrawable(e,t){throw new Error("createWebGLDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}getInstances(){return this._instances}get instances(){return this.getInstances()}addInstance(e){this._instances.push(e),this.changedInstanceEmitter.emit(e,!0)}removeInstance(e){const t=he.indexOf(this._instances,e);this._instances.splice(t,1),this.changedInstanceEmitter.emit(e,!1)}wasVisuallyDisplayed(e){for(let t=0;t<this._instances.length;t++){const i=this._instances[t];if(i.visible&&(!e||i.display===e))return!0}return!1}getRootedDisplays(){return this._rootedDisplays}get rootedDisplays(){return this.getRootedDisplays()}addRootedDisplay(e){this._rootedDisplays.push(e),this._pdomDisplaysInfo.onAddedRootedDisplay(e),this.rootedDisplayChangedEmitter.emit(e)}removeRootedDisplay(e){const t=he.indexOf(this._rootedDisplays,e);this._rootedDisplays.splice(t,1),this._pdomDisplaysInfo.onRemovedRootedDisplay(e),this.rootedDisplayChangedEmitter.emit(e)}getRecursiveConnectedDisplays(e){this.rootedDisplays.length&&e.push(...this.rootedDisplays);for(let t=0;t<this._parents.length;t++)e.push(...this._parents[t].getRecursiveConnectedDisplays(e));return he.uniq(e)}getConnectedDisplays(){return he.uniq(this.getRecursiveConnectedDisplays([]))}localToParentPoint(e){return this._transform.transformPosition2(e)}localToParentBounds(e){return this._transform.transformBounds2(e)}parentToLocalPoint(e){return this._transform.inversePosition2(e)}parentToLocalBounds(e){return this._transform.inverseBounds2(e)}transformBoundsFromLocalToParent(e){return e.transform(this._transform.getMatrix())}transformBoundsFromParentToLocal(e){return e.transform(this._transform.getInverse())}getLocalToGlobalMatrix(){let e=this;const t=[];for(;e;)t.push(e._transform.getMatrix()),e=e._parents[0];const i=mt.identity();for(let s=t.length-1;s>=0;s--)i.multiplyMatrix(t[s]);return i}getUniqueTransform(){return new ra(this.getLocalToGlobalMatrix())}getGlobalToLocalMatrix(){return this.getLocalToGlobalMatrix().invert()}localToGlobalPoint(e){let t=this;const i=e.copy();for(;t;)t._transform.getMatrix().multiplyVector2(i),t=t._parents[0];return i}globalToLocalPoint(e){let t=this;const i=[];for(;t;)i.push(t._transform),t=t._parents[0];const s=e.copy();for(let r=i.length-1;r>=0;r--)i[r].getInverse().multiplyVector2(s);return s}localToGlobalBounds(e){return e.transformed(this.getLocalToGlobalMatrix())}globalToLocalBounds(e){return e.transformed(this.getGlobalToLocalMatrix())}parentToGlobalPoint(e){return this.parents.length?this.parents[0].localToGlobalPoint(e):e}parentToGlobalBounds(e){return this.parents.length?this.parents[0].localToGlobalBounds(e):e}globalToParentPoint(e){return this.parents.length?this.parents[0].globalToLocalPoint(e):e}globalToParentBounds(e){return this.parents.length?this.parents[0].globalToLocalBounds(e):e}getGlobalBounds(){return this.parentToGlobalBounds(this.getBounds())}get globalBounds(){return this.getGlobalBounds()}boundsOf(e){return this.globalToLocalBounds(e.getGlobalBounds())}boundsTo(e){return e.globalToLocalBounds(this.getGlobalBounds())}attachDrawable(e){return this._drawables.push(e),this}detachDrawable(e){const t=he.indexOf(this._drawables,e);return this._drawables.splice(t,1),this}mutate(e){if(!e)return this;const t=this._mutatorKeys;for(let i=0;i<t.length;i++){const s=t[i];if(e[s]!==void 0){const r=Object.getOwnPropertyDescriptor(sf.prototype,s);r&&typeof r.value=="function"?this[s](e[s]):this[s]=e[s]}}return this.initializePhetioObject(dL,e),this}initializePhetioObject(e,t){const i=this.isPhetioInstrumented();super.initializePhetioObject(e,t),rt.PHET_IO_ENABLED&&!i&&this.isPhetioInstrumented()&&(this._visibleProperty.initializePhetio(this,Wg,()=>new Ri(this.visible,Qi({phetioReadOnly:this.phetioReadOnly,tandem:this.tandem.createTandem(Wg),phetioDocumentation:"Controls whether the Node will be visible (and interactive)."},t.visiblePropertyOptions))),this._enabledProperty.initializePhetio(this,Yg,()=>new af(this.enabled,Qi({phetioReadOnly:this.phetioReadOnly,phetioDocumentation:'Sets whether the node is enabled. This will set whether input is enabled for this Node and most often children as well. It will also control and toggle the "disabled look" of the node.',tandem:this.tandem.createTandem(Yg)},t.enabledPropertyOptions))),this._inputEnabledProperty.initializePhetio(this,Gg,()=>new Li(this.inputEnabled,Qi({phetioReadOnly:this.phetioReadOnly,tandem:this.tandem.createTandem(Gg),phetioValueType:zh,phetioFeatured:!0,phetioDocumentation:"Sets whether the element will have input enabled, and hence be interactive."},t.inputEnabledPropertyOptions))))}setVoicingVisible(e){this.voicingVisibleProperty.value!==e&&(this.voicingVisibleProperty.value=e)}set voicingVisible(e){this.setVoicingVisible(e)}get voicingVisible(){return this.isVoicingVisible()}isVoicingVisible(){return this.voicingVisibleProperty.value}getDebugHTMLExtras(){return""}toString(){return`${this.constructor.name}#${this.id}`}auditInstanceSubtreeForDisplay(e){}onBoundsListenersAddedOrRemoved(e){this.changeBoundsEventCount(e),this._boundsEventSelfCount+=e}dispose(){this.disposeParallelDOM(),this.removeAllChildren(),this.detach(),this._inputEnabledProperty.dispose(),this._enabledProperty.dispose(),this._pickableProperty.dispose(),this._visibleProperty.dispose(),super.dispose()}disposeSubtree(){if(!this.isDisposed){const e=this.children;this.dispose();for(let t=0;t<e.length;t++)e[t].disposeSubtree()}}static defaultTrailPredicate(e){return e._parents.length===0}static defaultLeafTrailPredicate(e){return e._children.length===0}};Rt.REQUIRES_BOUNDS_OPTION_KEYS=th;Rt.DEFAULT_NODE_OPTIONS=en;Rt.prototype._mutatorKeys=Mm.concat(uL);Rt.prototype.drawableMarkFlags=[];Rt.NodeIO=new pi("NodeIO",{valueType:Rt,documentation:"The base type for graphical and potentially interactive objects.",metadataDefaults:{phetioState:A1}});const dL={phetioType:Rt.NodeIO,phetioState:A1},fL=An.safari5,b1=["fill","fillPickable","stroke","strokePickable","lineWidth","lineCap","lineJoin","miterLimit","lineDash","lineDashOffset","cachedPaints"],ac={fill:null,fillPickable:!0,stroke:null,strokePickable:!1,lineWidth:qh.lineWidth,lineCap:qh.lineCap,lineJoin:qh.lineJoin,lineDashOffset:qh.lineDashOffset,miterLimit:qh.miterLimit},v1=["fill","stroke","lineWidth","lineOptions","cachedPaints"],W0=mr(n=>class extends n{constructor(...t){super(...t),E0(this,["_drawables"]),this._fill=ac.fill,this._fillPickable=ac.fillPickable,this._stroke=ac.stroke,this._strokePickable=ac.strokePickable,this._cachedPaints=[],this._lineDrawingStyles=new bc}setFill(t){return this._fill!==t&&(this._fill=t,this.invalidateFill()),this}set fill(t){this.setFill(t)}get fill(){return this.getFill()}getFill(){return this._fill}hasFill(){return this.getFillValue()!==null}getFillValue(){const t=this.getFill();return ii(t)?t.get():t}get fillValue(){return this.getFillValue()}setStroke(t){return this._stroke!==t&&(this._stroke=t,this.invalidateStroke()),this}set stroke(t){this.setStroke(t)}get stroke(){return this.getStroke()}getStroke(){return this._stroke}hasStroke(){return this.getStrokeValue()!==null}hasPaintableStroke(){return this.hasStroke()&&this.getLineWidth()>0}getStrokeValue(){const t=this.getStroke();return ii(t)?t.get():t}get strokeValue(){return this.getStrokeValue()}setFillPickable(t){return this._fillPickable!==t&&(this._fillPickable=t,this.invalidateFill()),this}set fillPickable(t){this.setFillPickable(t)}get fillPickable(){return this.isFillPickable()}isFillPickable(){return this._fillPickable}setStrokePickable(t){return this._strokePickable!==t&&(this._strokePickable=t,this.invalidateStroke()),this}set strokePickable(t){this.setStrokePickable(t)}get strokePickable(){return this.isStrokePickable()}isStrokePickable(){return this._strokePickable}setLineWidth(t){if(this.getLineWidth()!==t){this._lineDrawingStyles.lineWidth=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineWidth()}return this}set lineWidth(t){this.setLineWidth(t)}get lineWidth(){return this.getLineWidth()}getLineWidth(){return this._lineDrawingStyles.lineWidth}setLineCap(t){if(this._lineDrawingStyles.lineCap!==t){this._lineDrawingStyles.lineCap=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineCap(t){this.setLineCap(t)}get lineCap(){return this.getLineCap()}getLineCap(){return this._lineDrawingStyles.lineCap}setLineJoin(t){if(this._lineDrawingStyles.lineJoin!==t){this._lineDrawingStyles.lineJoin=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineJoin(t){this.setLineJoin(t)}get lineJoin(){return this.getLineJoin()}getLineJoin(){return this._lineDrawingStyles.lineJoin}setMiterLimit(t){if(this._lineDrawingStyles.miterLimit!==t){this._lineDrawingStyles.miterLimit=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set miterLimit(t){this.setMiterLimit(t)}get miterLimit(){return this.getMiterLimit()}getMiterLimit(){return this._lineDrawingStyles.miterLimit}setLineDash(t){if(this._lineDrawingStyles.lineDash!==t){this._lineDrawingStyles.lineDash=t||[],this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineDash(t){this.setLineDash(t)}get lineDash(){return this.getLineDash()}getLineDash(){return this._lineDrawingStyles.lineDash}hasLineDash(){return!!this._lineDrawingStyles.lineDash.length}setLineDashOffset(t){if(this._lineDrawingStyles.lineDashOffset!==t){this._lineDrawingStyles.lineDashOffset=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineDashOffset(t){this.setLineDashOffset(t)}get lineDashOffset(){return this.getLineDashOffset()}getLineDashOffset(){return this._lineDrawingStyles.lineDashOffset}setLineStyles(t){return this._lineDrawingStyles=t,this.invalidateStroke(),this}set lineStyles(t){this.setLineStyles(t)}get lineStyles(){return this.getLineStyles()}getLineStyles(){return this._lineDrawingStyles}setCachedPaints(t){this._cachedPaints=t.filter(s=>s instanceof Al);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyCachedPaints();return this}set cachedPaints(t){this.setCachedPaints(t)}get cachedPaints(){return this.getCachedPaints()}getCachedPaints(){return this._cachedPaints}addCachedPaint(t){if(t instanceof Al){this._cachedPaints.push(t);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyCachedPaints()}}removeCachedPaint(t){if(t instanceof Al){mn(this._cachedPaints,t);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyCachedPaints()}}beforeCanvasFill(t){const i=this.getFillValue();t.setFillStyle(i),i.transformMatrix&&(t.context.save(),i.transformMatrix.canvasAppendTransform(t.context))}afterCanvasFill(t){this.getFillValue().transformMatrix&&t.context.restore()}beforeCanvasStroke(t){const i=this.getStrokeValue();if(t.setStrokeStyle(this._stroke),t.setLineCap(this.getLineCap()),t.setLineJoin(this.getLineJoin()),i.transformMatrix){const r=1/i.transformMatrix.getScaleVector().x;t.context.save(),i.transformMatrix.canvasAppendTransform(t.context),t.setLineWidth(this.getLineWidth()*r),t.setMiterLimit(this.getMiterLimit()*r),t.setLineDash(this.getLineDash().map(o=>o*r)),t.setLineDashOffset(this.getLineDashOffset()*r)}else t.setLineWidth(this.getLineWidth()),t.setMiterLimit(this.getMiterLimit()),t.setLineDash(this.getLineDash()),t.setLineDashOffset(this.getLineDashOffset())}afterCanvasStroke(t){this.getStrokeValue().transformMatrix&&t.context.restore()}getCSSFill(){const t=this.getFillValue();return t?t.toCSS?t.toCSS():t:"transparent"}getSimpleCSSStroke(){const t=this.getStrokeValue();return t?t.toCSS?t.toCSS():t:"transparent"}appendFillablePropString(t,i){return this._fill&&(i&&(i+=`,
`),typeof this.getFillValue()=="string"?i+=`${t}fill: '${this.getFillValue()}'`:i+=`${t}fill: ${this.getFillValue()}`),i}appendStrokablePropString(t,i){function s(r,o,d){i&&(i+=`,
`),!d&&typeof o=="string"?i+=`${t+r}: '${o}'`:i+=`${t+r}: ${o}`}if(this._stroke){const r=new bc,o=this.getStrokeValue();typeof o=="string"?s("stroke",o):s("stroke",o?o.toString():"null",!0),he.each(["lineWidth","lineCap","miterLimit","lineJoin","lineDashOffset"],d=>{this[d]!==r[d]&&s(d,this[d])}),this.lineDash.length&&s("lineDash",JSON.stringify(this.lineDash),!0)}return i}getFillRendererBitmask(){let t=0;return fL&&this._fill&&this._fill.isGradient||(t|=Le.bitmaskSVG),t|=Le.bitmaskCanvas,this.hasFill()&&(this._fill&&this._fill.isPattern||this._fill&&this._fill.isGradient)||(t|=Le.bitmaskDOM,t|=Le.bitmaskWebGL),t}getStrokeRendererBitmask(){let t=0;return t|=Le.bitmaskCanvas,t|=Le.bitmaskSVG,this.hasStroke()||(t|=Le.bitmaskDOM,t|=Le.bitmaskWebGL),t}invalidateFill(){this.invalidateSupportedRenderers();const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyFill()}invalidateStroke(){this.invalidateSupportedRenderers();const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyStroke()}});W0.DEFAULT_OPTIONS=ac;const pL=["boundsMethod","shape","shapeProperty"],nf={shape:null,boundsMethod:"accurate"};class Cn extends W0(Rt){constructor(e,t){e||t!=null&&t.shape;const i={boundsMethod:nf.boundsMethod};ii(e)?i.shapeProperty=e:i.shape=e;const s=St()(i,t);super(),this._shapeProperty=new Po(null,!1,this.onShapePropertyChange.bind(this)),this._shape=nf.shape,this._strokedShape=null,this._boundsMethod=nf.boundsMethod,this._invalidShapeListener=this.invalidateShape.bind(this),this._invalidShapeListenerAttached=!1,this.invalidateSupportedRenderers(),this.mutate(s)}setShape(e){return this._shapeProperty.value=e,this}set shape(e){this.setShape(e)}get shape(){return this.getShape()}getShape(){return this._shape}onShapePropertyChange(e){this._shape!==e&&(this._invalidShapeListenerAttached&&this.detachShapeListener(),typeof e=="string"&&(e=new Wt(e)),this._shape=e,this.invalidateShape(),this._shape&&!this._shape.isImmutable()&&this.attachShapeListener())}setShapeProperty(e){return this._shapeProperty.setTargetProperty(e)}set shapeProperty(e){this.setShapeProperty(e)}get shapeProperty(){return this.getShapeProperty()}getShapeProperty(){return this._shapeProperty}getStrokedShape(){return this._strokedShape||(this._strokedShape=this.getShape().getStrokedShape(this._lineDrawingStyles)),this._strokedShape}getPathRendererBitmask(){return Le.bitmaskCanvas|Le.bitmaskSVG}invalidateSupportedRenderers(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getPathRendererBitmask())}invalidateShape(){this.invalidatePath();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyShape();this._invalidShapeListenerAttached&&this._shape&&this._shape.isImmutable()&&this.detachShapeListener()}invalidatePath(){this._strokedShape=null,this.invalidateSelf()}attachShapeListener(){this.isDisposed||(this._shape.invalidatedEmitter.addListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!0)}detachShapeListener(){this._shape.invalidatedEmitter.removeListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!1}updateSelfBounds(){const e=this.hasShape()?this.computeShapeBounds():ot.NOTHING,t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}setBoundsMethod(e){return this._boundsMethod!==e&&(this._boundsMethod=e,this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit()),this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}computeShapeBounds(){const e=this.getShape();if(this._boundsMethod==="none"||!e)return ot.NOTHING;if(!this.hasPaintableStroke()||this._boundsMethod==="unstroked")return e.bounds;if(this._boundsMethod==="accurate")return e.getStrokedBounds(this.getLineStyles());{let t;return this._boundsMethod==="safePadding"&&this.getLineJoin()==="miter"?t=this.getMiterLimit():this.getLineCap()==="square"?t=Math.SQRT2:t=1,e.bounds.dilated(t*this.getLineWidth()/2)}}areSelfBoundsValid(){return this._boundsMethod==="accurate"||this._boundsMethod==="safePadding"?!0:this._boundsMethod==="none"?!1:!this.hasStroke()}getTransformedSelfBounds(e){return(this._stroke?this.getStrokedShape():this.getShape()).getBoundsWithTransform(e)}getTransformedSafeSelfBounds(e){return this.getTransformedSelfBounds(e)}invalidateStroke(){this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit(),super.invalidateStroke()}hasShape(){return!!this._shape}canvasPaintSelf(e,t){Bm.prototype.paintCanvas(e,this,t)}createSVGDrawable(e,t){return g1.createFromPool(e,t)}createCanvasDrawable(e,t){return Bm.createFromPool(e,t)}isPainted(){return!0}containsPointSelf(e){let t=!1;return this.hasShape()&&(this._fillPickable&&(t=this.getShape().containsPoint(e)),!t&&this._strokePickable&&(t=this.getStrokedShape().containsPoint(e))),t}getSelfShape(){return Wt.union([...this.hasShape()&&this._fillPickable?[this.getShape()]:[],...this.hasShape()&&this._strokePickable?[this.getStrokedShape()]:[]])}intersectsBoundsSelf(e){return this._shape?this._shape.intersectsBounds(e):!1}requiresSVGBoundsWorkaround(){if(!this._stroke||!(this._stroke instanceof Al)||!this.hasShape())return!1;const e=this.computeShapeBounds();return e.width*e.height===0}getDebugHTMLExtras(){return this._shape?` (<span style="color: #88f" onclick="window.open( 'data:text/plain;charset=utf-8,' + encodeURIComponent( '${this._shape.getSVGPath()}' ) );">path</span>)`:""}dispose(){this._invalidShapeListenerAttached&&this.detachShapeListener(),this._shapeProperty.dispose(),super.dispose()}mutate(e){return super.mutate(e)}}Cn.DEFAULT_PATH_OPTIONS=Qi({},Rt.DEFAULT_NODE_OPTIONS,nf);Cn.prototype._mutatorKeys=[...b1,...pL,...Rt.prototype._mutatorKeys];Cn.prototype.drawableMarkFlags=[...Rt.prototype.drawableMarkFlags,...v1,"shape"];const V1=new ct("rgba(212,19,106,0.5)"),w1=new ct("rgba(250,40,135,0.9)"),gL=new ct("rgba(233,113,166,1.0)"),mL=new ct("rgba(233,113,166,1.0)"),yL=new ct("rgba(159,15,80,1.0)"),_L=new ct("rgba(159,15,80,1.0)"),AL=2.5,_b=4,bL=2,vL=2;class ji extends Cn{constructor(e,t){const i=St()({outerStroke:V1,innerStroke:w1,outerLineWidth:null,innerLineWidth:null,dashed:!1,transformSourceNode:null},t);super(e),this.highlightChangedEmitter=new _n,this._innerHighlightColor=i.innerStroke,this._outerHighlightColor=i.outerStroke;const s=he.pick(i,Object.keys(Cn.DEFAULT_PATH_OPTIONS));this.innerLineWidth=i.innerLineWidth,this.outerLineWidth=i.outerLineWidth,this.transformSourceNode=i.transformSourceNode,i.stroke=i.outerStroke,this.mutate(i);const r=Qi({},s,{stroke:i.innerStroke});this.innerHighlightPath=new Cn(e,r),this.addChild(this.innerHighlightPath),i.dashed&&this.setDashed(!0)}mutateWithInnerHighlight(e){super.mutate(e),this.innerHighlightPath&&this.innerHighlightPath.mutate(e),this.highlightChangedEmitter.emit()}setDashed(e){const t=e?[7,7]:[];this.mutateWithInnerHighlight({lineDash:t})}setShape(e){return super.setShape(e),this.innerHighlightPath&&this.innerHighlightPath.setShape(e),this.highlightChangedEmitter&&this.highlightChangedEmitter.emit(),this}updateLineWidth(e){this.lineWidth=this.getOuterLineWidth(e),this.innerHighlightPath.lineWidth=this.getInnerLineWidth(e),this.highlightChangedEmitter.emit()}getOuterLineWidth(e){return this.outerLineWidth?this.outerLineWidth:ji.getOuterLineWidthFromMatrix(e)}getInnerLineWidth(e){return this.innerLineWidth?this.innerLineWidth:ji.getInnerLineWidthFromMatrix(e)}setInnerHighlightColor(e){this._innerHighlightColor=e,this.innerHighlightPath.setStroke(e),this.highlightChangedEmitter.emit()}set innerHighlightColor(e){this.setInnerHighlightColor(e)}get innerHighlightColor(){return this.getInnerHighlightColor()}getInnerHighlightColor(){return this._innerHighlightColor}setOuterHighlightColor(e){this._outerHighlightColor=e,this.setStroke(e),this.highlightChangedEmitter.emit()}set outerHighlightColor(e){this.setOuterHighlightColor(e)}get outerHighlightColor(){return this.getOuterHighlightColor()}getOuterHighlightColor(){return this._outerHighlightColor}getUniqueHighlightTrail(e){const t=this.transformSourceNode;let i=null;return t.instances.length<=1?i=t.getUniqueTrail():i=t.getTrails().filter(r=>r.isExtensionOf(e,!0))[0],i}static getInnerLineWidthFromMatrix(e){return AL/ji.localToGlobalScaleFromMatrix(e)}static getOuterLineWidthFromMatrix(e){return _b/ji.localToGlobalScaleFromMatrix(e)}static localToGlobalScaleFromMatrix(e){return Math.sqrt(e.m00()*e.m00()+e.m10()*e.m10())}static getDilationCoefficient(e){return ji.getOuterLineWidthFromMatrix(e)*(.5+.25)}static getDefaultDilationCoefficient(){return ji.getDilationCoefficient(mt.IDENTITY)}static getDefaultGroupDilationCoefficient(){return ji.getGroupDilationCoefficient(mt.IDENTITY)}static getDefaultHighlightLineWidth(){return _b}static getGroupDilationCoefficient(e){return ji.getOuterLineWidthFromMatrix(e)*(.5+1.4)}static getPanZoomCorrectingMatrix(){return ff.initialized?ff.listener.matrixProperty.value.inverted():mt.IDENTITY}static getLayoutCorrectingMatrix(){return mt.scaling(1/ji.layoutScale,1/ji.layoutScale)}static getCorrectiveScalingMatrix(){return ji.getPanZoomCorrectingMatrix().timesMatrix(ji.getLayoutCorrectingMatrix())}}ji.OUTER_FOCUS_COLOR=V1;ji.INNER_FOCUS_COLOR=w1;ji.INNER_LIGHT_GROUP_FOCUS_COLOR=gL;ji.OUTER_LIGHT_GROUP_FOCUS_COLOR=mL;ji.INNER_DARK_GROUP_FOCUS_COLOR=yL;ji.OUTER_DARK_GROUP_FOCUS_COLOR=_L;ji.GROUP_OUTER_LINE_WIDTH=bL;ji.GROUP_INNER_LINE_WIDTH=vL;ji.layoutScale=1;class pf extends ji{constructor(e,t){const i=St()({useLocalBounds:!0,dilationCoefficient:null,useGroupDilation:!1},t);i.transformSourceNode=e,super(null,i),this.observedBoundsProperty=null,this.boundsListener=null,this.useLocalBounds=i.useLocalBounds,this.useGroupDilation=i.useGroupDilation,this.dilationCoefficient=i.dilationCoefficient,e&&this.setShapeFromNode(e)}setShapeFromNode(e,t){this.observedBoundsProperty&&this.observedBoundsProperty.unlink(this.boundsListener),this.observedBoundsProperty=e.localBoundsProperty,this.boundsListener=i=>{if(!i.isFinite())return;let s=this.dilationCoefficient;const o=(t||e.getUniqueTrail()).getMatrix().timesMatrix(ji.getCorrectiveScalingMatrix());this.dilationCoefficient===null&&(s=this.useGroupDilation?ji.getGroupDilationCoefficient(o):ji.getDilationCoefficient(o));const g=(this.useLocalBounds?e.getVisibleLocalBounds():e.getVisibleBounds()).dilated(s);this.setShape(Wt.bounds(g))},this.observedBoundsProperty.link(this.boundsListener)}dispose(){this.observedBoundsProperty&&this.observedBoundsProperty.unlink(this.boundsListener),super.dispose()}}const VL=100;class wL{constructor(e,t){this.initialPointerPoint=null,this.relativePointerDistance=0;const i=St()({interactiveHighlightsEnabledProperty:new Li(!1)},t);this.display=e;const s={move:this.handleMove.bind(this)},r=()=>{this.display.focusManager.pdomFocusHighlightsVisibleProperty.value=!0},o={};["click","input","change","keydown","keyup"].forEach(x=>{o[x]=r}),this.display.addInputListener(o);const d=x=>{je.isKeyEvent(x,je.KEY_TAB)&&r()};Fa.keyupEmitter.addListener(d);const g=x=>{this.display.focusManager.interactiveHighlightsVisibleProperty.value=x};i.interactiveHighlightsEnabledProperty.link(g);const y=i.interactiveHighlightsEnabledProperty,S=this.display.focusManager.pdomFocusHighlightsVisibleProperty,T=new sr([y,S],(x,A)=>{x&&A?(this.display.addInputListener(s),this.initialPointerPoint=null,this.relativePointerDistance=0):this.display.hasInputListener(s)&&this.display.removeInputListener(s)}),L={down:x=>{if(this.display.bounds.containsPoint(x.pointer.point)){this.display.focusManager.pdomFocusHighlightsVisibleProperty.value=!1;const A=Ac();A&&(x.trail.nodes.includes(A)||(ys.pdomFocus=null))}}};this.display.addInputListener(L),this.disposeHighlightVisibilityController=()=>{this.display.removeInputListener(o),Fa.keyupEmitter.removeListener(d),this.display.removeInputListener(L),g&&i.interactiveHighlightsEnabledProperty.unlink(g),T&&T.dispose()}}handleMove(e){this.initialPointerPoint===null?this.initialPointerPoint=e.pointer.point:(this.relativePointerDistance=e.pointer.point.distance(this.initialPointerPoint),this.relativePointerDistance>VL&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.value=!1,this.display.focusManager.interactiveHighlightsVisibleProperty.value=!0))}dispose(){this.disposeHighlightVisibilityController()}}var S1={exports:{}};(function(n){function e(){}function t(){}(function(){function i(o,d){d=d||1/0;for(var g,y=o.length,S=null,T=[],L=0;L<y;L++){if(g=o.charCodeAt(L),g>55295&&g<57344)if(S)if(g<56320){(d-=3)>-1&&T.push(239,191,189),S=g;continue}else g=S-55296<<10|g-56320|65536,S=null;else if(g>56319){(d-=3)>-1&&T.push(239,191,189);continue}else if(L+1===y){(d-=3)>-1&&T.push(239,191,189);continue}else{S=g;continue}else S&&((d-=3)>-1&&T.push(239,191,189),S=null);if(g<128){if((d-=1)<0)break;T.push(g)}else if(g<2048){if((d-=2)<0)break;T.push(g>>6|192,g&63|128)}else if(g<65536){if((d-=3)<0)break;T.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<2097152){if((d-=4)<0)break;T.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return T}function s(o,d,g){var y="",S="";g=Math.min(o.length,g||1/0),d=d||0;for(var T=d;T<g;T++)o[T]<=127?(y+=r(S)+String.fromCharCode(o[T]),S=""):S+="%"+o[T].toString(16);return y+r(S)}function r(o){try{return decodeURIComponent(o)}catch{return"�"}}e.prototype.encode=function(o){var d;return typeof Uint8Array>"u"?d=i(o):d=new Uint8Array(i(o)),d},t.prototype.decode=function(o){return s(o,0,o.length)}})(),n&&(n.exports.TextDecoderLite=t,n.exports.TextEncoderLite=e)})(S1);var SL=S1.exports;const CL=Mc(SL);var ap={};ap.byteLength=DL;ap.toByteArray=xL;ap.fromByteArray=LL;var So=[],Ra=[],PL=typeof Uint8Array<"u"?Uint8Array:Array,Xg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var kh=0,EL=Xg.length;kh<EL;++kh)So[kh]=Xg[kh],Ra[Xg.charCodeAt(kh)]=kh;Ra[45]=62;Ra[95]=63;function C1(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function DL(n){var e=C1(n),t=e[0],i=e[1];return(t+i)*3/4-i}function TL(n,e,t){return(e+t)*3/4-t}function xL(n){var e,t=C1(n),i=t[0],s=t[1],r=new PL(TL(n,i,s)),o=0,d=s>0?i-4:i,g;for(g=0;g<d;g+=4)e=Ra[n.charCodeAt(g)]<<18|Ra[n.charCodeAt(g+1)]<<12|Ra[n.charCodeAt(g+2)]<<6|Ra[n.charCodeAt(g+3)],r[o++]=e>>16&255,r[o++]=e>>8&255,r[o++]=e&255;return s===2&&(e=Ra[n.charCodeAt(g)]<<2|Ra[n.charCodeAt(g+1)]>>4,r[o++]=e&255),s===1&&(e=Ra[n.charCodeAt(g)]<<10|Ra[n.charCodeAt(g+1)]<<4|Ra[n.charCodeAt(g+2)]>>2,r[o++]=e>>8&255,r[o++]=e&255),r}function IL(n){return So[n>>18&63]+So[n>>12&63]+So[n>>6&63]+So[n&63]}function kL(n,e,t){for(var i,s=[],r=e;r<t;r+=3)i=(n[r]<<16&16711680)+(n[r+1]<<8&65280)+(n[r+2]&255),s.push(IL(i));return s.join("")}function LL(n){for(var e,t=n.length,i=t%3,s=[],r=16383,o=0,d=t-i;o<d;o+=r)s.push(kL(n,o,o+r>d?d:o+r));return i===1?(e=n[t-1],s.push(So[e>>2]+So[e<<4&63]+"==")):i===2&&(e=(n[t-2]<<8)+n[t-1],s.push(So[e>>10]+So[e>>4&63]+So[e<<2&63]+"=")),s.join("")}const NL=4;let Om=1;class qa extends rr{constructor(e){super(),this.attributeString=e}}qa.POLITE=new qa("polite");qa.ASSERTIVE=new qa("assertive");qa.enumeration=new oa(qa);function Ab(n){const e=n.attributeString,t=document.createElement("div");for(let i=1;i<=NL;i++){const s=document.createElement("p");s.setAttribute("id",`elements-${Om}-${e}-${i}`),s.setAttribute("aria-live",e),t.appendChild(s)}return t}class vu extends Zh{constructor(e){const t=St()({respectResponseCollectorProperties:!1,lang:"en"},e);super(t),this.politeElementIndex=0,this.assertiveElementIndex=0,this.ariaLiveContainer=document.createElement("div"),this.ariaLiveContainer.setAttribute("lang",t.lang),this.ariaLiveContainer.setAttribute("id",`aria-live-elements-${Om}`),this.ariaLiveContainer.setAttribute("style","position: absolute; left: 0px; top: 0px; width: 0px; height: 0px; clip: rect(0px 0px 0px 0px); pointer-events: none;");const i=Ab(qa.POLITE),s=Ab(qa.ASSERTIVE);this.ariaLiveContainer.appendChild(i),this.ariaLiveContainer.appendChild(s),this.politeElements=Array.from(i.children),this.assertiveElements=Array.from(s.children),Om++}announce(e,t,i){const s=St()({ariaLivePriority:qa.POLITE},i);if(this.hasSpoken=!0,e){if(ii(e)&&(e=e.value),s.ariaLivePriority===qa.POLITE){const r=this.politeElements[this.politeElementIndex];this.updateLiveElement(r,e,t),this.politeElementIndex=(this.politeElementIndex+1)%this.politeElements.length}else if(s.ariaLivePriority===qa.ASSERTIVE){const r=this.assertiveElements[this.assertiveElementIndex];this.updateLiveElement(r,e,t),this.assertiveElementIndex=(this.assertiveElementIndex+1)%this.assertiveElements.length}}this.announcementCompleteEmitter.emit(t,e)}cancel(){}cancelUtterance(e){}updateLiveElement(e,t,i){e.textContent="",e.hidden=!1,this.readyToAnnounce=!1,Qn.setTimeout(()=>{i.predicate()?(Vi.setTextContent(e,t),Qn.setTimeout(()=>{An.safari&&!An.mobileSafari?e.hidden=!0:e.textContent="",this.readyToAnnounce=!0},vu.ARIA_LIVE_DELAY)):this.readyToAnnounce=!0},0)}}vu.ARIA_LIVE_DELAY=200;vu.AriaLive=qa;class BL extends hh{constructor(e){super(),this.utterance=e,this.timeInQueue=0,this.stableTime=0,this.utterancePriorityListener=null}dispose(){this.utterancePriorityListener&&(this.utterance.priorityProperty.unlink(this.utterancePriorityListener),this.utterancePriorityListener=null),super.dispose()}}class op extends As{constructor(e,t){const i=St()({debug:!1,initialize:!0,featureSpecificAnnouncingControlPropertyName:null},t);super(i),this.announcer=e,this._initialized=i.initialize,this.featureSpecificAnnouncingControlPropertyName=i.featureSpecificAnnouncingControlPropertyName,this.queue=[],this._muted=!1,this._enabled=!0,this.announcingUtteranceWrapper=null,this.debug=i.debug,this.announcer.announcementCompleteEmitter.addListener(s=>{this.announcingUtteranceWrapper&&s===this.announcingUtteranceWrapper.utterance&&(!this.announcingUtteranceWrapper.isDisposed&&this.announcingUtteranceWrapper.dispose(),this.announcingUtteranceWrapper=null)}),this.stepQueueListener=null,this._initialized&&(this.stepQueueListener=this.stepQueue.bind(this),Qn.addListener(this.stepQueueListener))}get length(){return this.queue.length}addToBack(e){if(this.initializedAndEnabled)if(!this.announcer.hasSpoken)this.announceImmediately(e);else{const t=this.prepareUtterance(e);this.queue.push(t),this.debug&&console.log("addToBack"),this.addPriorityListenerAndPrioritizeQueue(t)}}addToFront(e){if(iv("`addToFront()` has been deprecated because it is confusing, and most of the time doesn't do what is expected, because Utterances are announced based on time-in-queue first, and then position in the queue. It is recommended to use addToBack, and then timing variables on Utterances, or instead call queue.clear() before adding a more important alert to the queue."),!this.initializedAndEnabled)return;const t=this.prepareUtterance(e);this.queue.unshift(t)}addPriorityListenerAndPrioritizeQueue(e){e.utterancePriorityListener=()=>{this.prioritizeUtterances(e)},e.utterance.priorityProperty.link(e.utterancePriorityListener)}prepareUtterance(e){e instanceof Sn||(e=new Sn({alert:e}));const t=new BL(e);return this.removeOthersAndUpdateUtteranceWrapper(t),t.stableTime=0,t}removeUtterance(e){const t=i=>i.utterance===e;he.remove(this.queue,t).forEach(i=>i.dispose())}prioritizeUtterances(e){let t=this.queue.indexOf(e);const i=t>=0;let s;i?s=t-1:s=-1;for(let r=s;r>=0;r--){const o=this.queue[r];this.shouldUtteranceCancelOther(e.utterance,o.utterance)&&this.removeUtterance(o.utterance)}if(i){t=this.queue.indexOf(e);const r=this.queue[t+1];r&&this.shouldUtteranceCancelOther(r.utterance,e.utterance)&&this.removeUtterance(e.utterance)}this.queue.length>0&&this.announcer.onUtterancePriorityChange(this.queue[0].utterance)}shouldUtteranceCancelOther(e,t){return this.announcer.shouldUtteranceCancelOther(e,t)}removeOthersAndUpdateUtteranceWrapper(e){const t=[];for(let i=0;i<this.queue.length;i++){const s=this.queue[i];s.utterance===e.utterance&&t.push(s.timeInQueue)}t.length>=1&&(e.timeInQueue=Math.max(...t)),he.remove(this.queue,i=>i.utterance===e.utterance).forEach(i=>i.dispose())}get initializedAndEnabled(){return this._enabled&&this._initialized}pruneDisposedUtterances(){const e=this.queue.slice();this.queue.length=0;for(let t=0;t<e.length;t++){const i=e[t];i.utterance.isDisposed?i.dispose():this.queue.push(i)}}getNextUtterance(){let e=null;for(let t=0;t<this.queue.length;t++){const i=this.queue[t];if(i.stableTime>i.utterance.alertStableDelay||i.timeInQueue>i.utterance.alertMaximumDelay){e=i;break}}return e}hasUtterance(e){for(let t=0;t<this.queue.length;t++){const i=this.queue[t];if(e===i.utterance)return!0}return!1}clear(){this.debug&&console.log("UtteranceQueue.clear()"),this.queue.forEach(e=>e.dispose()),this.queue.length=0}cancelUtterance(e){this.announcer.cancelUtterance(e),this.hasUtterance(e)&&this.removeUtterance(e)}cancel(){this.debug&&console.log("UtteranceQueue.cancel()"),this.clear(),this.announcer.cancel()}setMuted(e){this._muted=e}set muted(e){this.setMuted(e)}get muted(){return this.getMuted()}getMuted(){return this._muted}setEnabled(e){this._enabled=e}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabled}stepQueue(e){if(this._enabled&&(e*=1e3,this.queue.length>0)){this.pruneDisposedUtterances();for(let i=0;i<this.queue.length;i++){const s=this.queue[i];s.timeInQueue+=e,s.stableTime+=e}const t=this.getNextUtterance();t&&this.attemptToAnnounce(t)}}announceImmediately(e){if(this.initializedAndEnabled&&(this.debug&&console.log("announceImmediately"),e instanceof Sn||(e=new Sn({alert:e})),this.announcingUtteranceWrapper===null||this.announcer.shouldUtteranceCancelOther(e,this.announcingUtteranceWrapper.utterance))){const t=this.prepareUtterance(e);t.stableTime=Number.POSITIVE_INFINITY,t.timeInQueue=Number.POSITIVE_INFINITY,this.queue.unshift(t),this.addPriorityListenerAndPrioritizeQueue(t),this.queue.includes(t)&&this.attemptToAnnounce(t)}}attemptToAnnounce(e){const t=e.utterance;if(this.announcer.readyToAnnounce){const i=t.getAlertText(this.announcer.respectResponseCollectorProperties);this.debug&&console.log("ready to announce in attemptToAnnounce(): ",i);const s=!this.featureSpecificAnnouncingControlPropertyName||t[this.featureSpecificAnnouncingControlPropertyName].value,r=t.canAnnounceProperty.value&&t.predicate()&&s;!this._muted&&r&&i!==""?(this.announcingUtteranceWrapper=e,this.debug&&console.log("announcing: ",i),this.announcer.announce(i,t,t.announcerOptions)):this.debug&&console.log("announcer readyToAnnounce but utterance cannot announce, will not be spoken: ",i),this.queue.includes(e)&&(he.remove(this.queue,e),!e.isDisposed&&this.announcingUtteranceWrapper!==e&&e.dispose())}else this.debug&&console.log("announcer not readyToAnnounce")}dispose(){this._initialized&&Qn.removeListener(this.stepQueueListener),super.dispose()}static fromFactory(){const e=new vu,t=new op(e),i=e.ariaLiveContainer;document.body?document.body.appendChild(i):document.children[0].appendChild(i);let s=0;const r=o=>{const d=o-s;s=o,Qn.emit(d/1e3),self.requestAnimationFrame(r)};return self.requestAnimationFrame(r),t}}class G0 extends va{initialize(e,t){super.initialize(t),this.display=e,this.drawableCount=0,this.used=!0,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,this.zIndex=0}dispose(){this.display=null,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,super.dispose()}addDrawable(e){this.drawableCount++,this.markDirtyDrawable(e)}removeDrawable(e){this.drawableCount--,this.markDirty()}onIntervalChange(e,t){}updateInterval(){(this.pendingFirstDrawable!==this.firstDrawable||this.pendingLastDrawable!==this.lastDrawable)&&(this.onIntervalChange(this.pendingFirstDrawable,this.pendingLastDrawable),this.firstDrawable=this.pendingFirstDrawable,this.lastDrawable=this.pendingLastDrawable)}notifyInterval(e,t){this.pendingFirstDrawable=e,this.pendingLastDrawable=t,this.updateInterval()}audit(e,t,i){}}class $a{constructor(e,t){this.initialize(e,t)}initialize(e,t){this.nextChangeInterval=null,this.drawableBefore=e,this.drawableAfter=t,this.collapsedEmpty=!1}dispose(){this.nextChangeInterval=null,this.drawableBefore=null,this.drawableAfter=null,this.freeToPool()}constrict(){let e=!1;if(this.isEmpty())return!0;for(;this.drawableBefore&&this.drawableBefore.nextDrawable===this.drawableBefore.oldNextDrawable;)if(this.drawableBefore=this.drawableBefore.nextDrawable,e=!0,this.drawableBefore||(this.collapsedEmpty=!0),this.isEmpty())return!0;for(;this.drawableAfter&&this.drawableAfter.previousDrawable===this.drawableAfter.oldPreviousDrawable;)if(this.drawableAfter=this.drawableAfter.previousDrawable,e=!0,this.drawableAfter||(this.collapsedEmpty=!0),this.isEmpty())return!0;return e}isEmpty(){return this.collapsedEmpty||this.drawableBefore!==null&&this.drawableBefore===this.drawableAfter}getOldInternalDrawableCount(e,t){const i=this.drawableBefore?this.drawableBefore.oldNextDrawable:e,s=this.drawableAfter;let r=0;for(let o=i;o!==s;o=o.oldNextDrawable)r++;return r}getNewInternalDrawableCount(e,t){const i=this.drawableBefore?this.drawableBefore.nextDrawable:e,s=this.drawableAfter;let r=0;for(let o=i;o!==s;o=o.nextDrawable)r++;return r}static newForDisplay(e,t,i){const s=$a.createFromPool(e,t);return i.markChangeIntervalToDispose(s),s}}Ts.mixInto($a);const bb=ot.NOTHING.copy();class sn extends G0{initialize(e,t,i,s){return super.initialize(e,t),this.transformRootInstance=i,this.canBeFullDisplay=i.isDisplayRoot,this.preferredFit=s,this.fit=s,this.dirtyFit=!0,this.commonFitInstance=null,this.fitBounds=ot.NOTHING.copy(),this.oldFitBounds=ot.NOTHING.copy(),this.unfittableDrawableCount=0,this.dirtyFitListener=this.dirtyFitListener||this.markDirtyFit.bind(this),this.fittableListener=this.fittableListener||this.onFittabilityChange.bind(this),this.display.sizeProperty.lazyLink(this.dirtyFitListener),this}setFit(e){!this.canBeFullDisplay&&e===sn.FULL_DISPLAY&&(e=sn.COMMON_ANCESTOR),this.fit!==e&&(this.fit=e,this.markDirtyFit(),this.oldFitBounds.set(ot.NOTHING),e===sn.COMMON_ANCESTOR&&this.removeCommonFitInstance())}markDirtyFit(){this.dirtyFit=!0,this.markDirty()}updateFit(){if(!(!this.dirtyFit&&this.fit===sn.FULL_DISPLAY))if(this.dirtyFit=!1,this.fit===sn.COMMON_ANCESTOR&&this.commonFitInstance===null&&this.addCommonFitInstance(this.computeCommonAncestorInstance()),this.fit===sn.COMMON_ANCESTOR&&this.commonFitInstance.fittability.subtreeUnfittableCount>0&&this.canBeFullDisplay&&(this.oldFitBounds.set(ot.NOTHING),this.fit=sn.FULL_DISPLAY),this.fit===sn.FULL_DISPLAY)this.fitBounds.set(ot.NOTHING),this.setSizeFullDisplay();else if(this.fit===sn.COMMON_ANCESTOR){this.fitBounds.set(this.commonFitInstance.node.getLocalBounds());let e=this.commonFitInstance;for(;e!==this.transformRootInstance;)this.fitBounds.transform(e.node.getMatrix()),e=e.parent;this.fitBounds.roundOut(),this.fitBounds.dilate(4),this.transformRootInstance.isDisplayRoot&&(bb.setMinMax(0,0,this.display.width,this.display.height),this.fitBounds.constrainBounds(bb)),this.fitBounds.isValid()||this.fitBounds.setMinMax(0,0,0,0),this.fitBounds.equals(this.oldFitBounds)||(this.oldFitBounds.set(this.fitBounds),this.setSizeFitBounds())}else throw new Error("unknown fit")}setSizeFullDisplay(){}setSizeFitBounds(){}addCommonFitInstance(e){e&&(this.commonFitInstance=e,this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.addListener(this.dirtyFitListener))}removeCommonFitInstance(){this.commonFitInstance&&(this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.removeListener(this.dirtyFitListener),this.commonFitInstance=null)}dispose(){this.display.sizeProperty.unlink(this.dirtyFitListener),this.removeCommonFitInstance(),this.transformRootInstance=null,super.dispose()}addDrawable(e){super.addDrawable(e),e.fittableProperty.lazyLink(this.fittableListener),e.fittable||this.incrementUnfittable()}removeDrawable(e){super.removeDrawable(e),e.fittableProperty.unlink(this.fittableListener),e.fittable||this.decrementUnfittable()}onFittabilityChange(e){e?this.decrementUnfittable():this.incrementUnfittable()}incrementUnfittable(){this.unfittableDrawableCount++,this.unfittableDrawableCount===1&&this.checkFitConstraints()}decrementUnfittable(){this.unfittableDrawableCount--,this.unfittableDrawableCount===0&&this.checkFitConstraints()}checkFitConstraints(){this.unfittableDrawableCount>0&&this.canBeFullDisplay?this.setFit(sn.FULL_DISPLAY):this.setFit(this.preferredFit)}computeCommonAncestorInstance(){let e=this.firstDrawable.instance,t=this.lastDrawable.instance;const i=Math.min(e.trail.length,t.trail.length);for(;e.trail.length>i;)e=e.parent;for(;t.trail.length>i;)t=t.parent;for(;e!==t;)e=e.parent,t=t.parent;return e}onIntervalChange(e,t){super.onIntervalChange(e,t),this.fit===sn.COMMON_ANCESTOR&&(this.removeCommonFitInstance(),this.markDirtyFit())}}sn.FULL_DISPLAY=1;sn.COMMON_ANCESTOR=2;sn.fitString={1:"fullDisplay",2:"commonAncestor"};var P1={exports:{}};/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */(function(n){(function(e,t){n.exports=e.document?t(e,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return t(i)}})(typeof window<"u"?window:pr,function(e,t){var i=[],s=i.slice,r=i.concat,o=i.push,d=i.indexOf,g={},y=g.toString,S=g.hasOwnProperty,T={},L=e.document,x="2.1.4",A=function(u,m){return new A.fn.init(u,m)},Q=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,z=/^-ms-/,G=/-([\da-z])/gi,re=function(u,m){return m.toUpperCase()};A.fn=A.prototype={jquery:x,constructor:A,selector:"",length:0,toArray:function(){return s.call(this)},get:function(u){return u!=null?u<0?this[u+this.length]:this[u]:s.call(this)},pushStack:function(u){var m=A.merge(this.constructor(),u);return m.prevObject=this,m.context=this.context,m},each:function(u,m){return A.each(this,u,m)},map:function(u){return this.pushStack(A.map(this,function(m,v){return u.call(m,v,m)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(u){var m=this.length,v=+u+(u<0?m:0);return this.pushStack(v>=0&&v<m?[this[v]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:o,sort:i.sort,splice:i.splice},A.extend=A.fn.extend=function(){var u,m,v,E,R,Y,ee=arguments[0]||{},_e=1,xe=arguments.length,ze=!1;for(typeof ee=="boolean"&&(ze=ee,ee=arguments[_e]||{},_e++),typeof ee!="object"&&!A.isFunction(ee)&&(ee={}),_e===xe&&(ee=this,_e--);_e<xe;_e++)if((u=arguments[_e])!=null)for(m in u)v=ee[m],E=u[m],ee!==E&&(ze&&E&&(A.isPlainObject(E)||(R=A.isArray(E)))?(R?(R=!1,Y=v&&A.isArray(v)?v:[]):Y=v&&A.isPlainObject(v)?v:{},ee[m]=A.extend(ze,Y,E)):E!==void 0&&(ee[m]=E));return ee},A.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isFunction:function(u){return A.type(u)==="function"},isArray:Array.isArray,isWindow:function(u){return u!=null&&u===u.window},isNumeric:function(u){return!A.isArray(u)&&u-parseFloat(u)+1>=0},isPlainObject:function(u){return!(A.type(u)!=="object"||u.nodeType||A.isWindow(u)||u.constructor&&!S.call(u.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(u){var m;for(m in u)return!1;return!0},type:function(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?g[y.call(u)]||"object":typeof u},globalEval:function(u){var m,v=eval;u=A.trim(u),u&&(u.indexOf("use strict")===1?(m=L.createElement("script"),m.text=u,L.head.appendChild(m).parentNode.removeChild(m)):v(u))},camelCase:function(u){return u.replace(z,"ms-").replace(G,re)},nodeName:function(u,m){return u.nodeName&&u.nodeName.toLowerCase()===m.toLowerCase()},each:function(u,m,v){var E,R=0,Y=u.length,ee=ne(u);if(v){if(ee)for(;R<Y&&(E=m.apply(u[R],v),E!==!1);R++);else for(R in u)if(E=m.apply(u[R],v),E===!1)break}else if(ee)for(;R<Y&&(E=m.call(u[R],R,u[R]),E!==!1);R++);else for(R in u)if(E=m.call(u[R],R,u[R]),E===!1)break;return u},trim:function(u){return u==null?"":(u+"").replace(Q,"")},makeArray:function(u,m){var v=m||[];return u!=null&&(ne(Object(u))?A.merge(v,typeof u=="string"?[u]:u):o.call(v,u)),v},inArray:function(u,m,v){return m==null?-1:d.call(m,u,v)},merge:function(u,m){for(var v=+m.length,E=0,R=u.length;E<v;E++)u[R++]=m[E];return u.length=R,u},grep:function(u,m,v){for(var E,R=[],Y=0,ee=u.length,_e=!v;Y<ee;Y++)E=!m(u[Y],Y),E!==_e&&R.push(u[Y]);return R},map:function(u,m,v){var E,R=0,Y=u.length,ee=ne(u),_e=[];if(ee)for(;R<Y;R++)E=m(u[R],R,v),E!=null&&_e.push(E);else for(R in u)E=m(u[R],R,v),E!=null&&_e.push(E);return r.apply([],_e)},guid:1,proxy:function(u,m){var v,E,R;if(typeof m=="string"&&(v=u[m],m=u,u=v),!!A.isFunction(u))return E=s.call(arguments,2),R=function(){return u.apply(m||this,E.concat(s.call(arguments)))},R.guid=u.guid=u.guid||A.guid++,R},now:Date.now,support:T}),A.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(u,m){g["[object "+m+"]"]=m.toLowerCase()});function ne(u){var m="length"in u&&u.length,v=A.type(u);return v==="function"||A.isWindow(u)?!1:u.nodeType===1&&m?!0:v==="array"||m===0||typeof m=="number"&&m>0&&m-1 in u}var ae=function(u){var m,v,E,R,Y,ee,_e,xe,ze,Fe,bt,vt,kt,ui,ni,Di,Jn,un,Rs,Ut="sizzle"+1*new Date,Ks=u.document,Ti=0,Ms=0,cn=Lr(),Sa=Lr(),Mn=Lr(),xr=function(ue,Pe){return ue===Pe&&(bt=!0),0},Ur=1<<31,Yn={}.hasOwnProperty,On=[],xi=On.pop,Pu=On.push,$s=On.push,Ya=On.slice,Ca=function(ue,Pe){for(var Oe=0,Ze=ue.length;Oe<Ze;Oe++)if(ue[Oe]===Pe)return Oe;return-1},Yr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",hs="[\\x20\\t\\r\\n\\f]",Pa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Is=Pa.replace("w","w#"),ha="\\["+hs+"*("+Pa+")(?:"+hs+"*([*^$|!~]?=)"+hs+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Is+"))|)"+hs+"*\\]",No=":("+Pa+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ha+")*)|.*)\\)|)",Eu=new RegExp(hs+"+","g"),ro=new RegExp("^"+hs+"+|((?:^|[^\\\\])(?:\\\\.)*)"+hs+"+$","g"),Wa=new RegExp("^"+hs+"*,"+hs+"*"),vn=new RegExp("^"+hs+"*([>+~]|"+hs+")"+hs+"*"),yh=new RegExp("="+hs+`*([^\\]'"]*?)`+hs+"*\\]","g"),ao=new RegExp(No),rl=new RegExp("^"+Is+"$"),Wr={ID:new RegExp("^#("+Pa+")"),CLASS:new RegExp("^\\.("+Pa+")"),TAG:new RegExp("^("+Pa.replace("w","w*")+")"),ATTR:new RegExp("^"+ha),PSEUDO:new RegExp("^"+No),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+hs+"*(even|odd|(([+-]|)(\\d*)n|)"+hs+"*(?:([+-]|)"+hs+"*(\\d+)|))"+hs+"*\\)|)","i"),bool:new RegExp("^(?:"+Yr+")$","i"),needsContext:new RegExp("^"+hs+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+hs+"*((?:-\\d)?\\d*)"+hs+"*\\)|)(?=[^-]|$)","i")},Du=/^(?:input|select|textarea|button)$/i,Bo=/^h\d$/i,Ir=/^[^{]+\{\s*\[native \w/,al=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oo=/[+~]/,Gi=/'|\\/g,kr=new RegExp("\\\\([\\da-f]{1,6}"+hs+"?|("+hs+")|.)","ig"),vr=function(ue,Pe,Oe){var Ze="0x"+Pe-65536;return Ze!==Ze||Oe?Pe:Ze<0?String.fromCharCode(Ze+65536):String.fromCharCode(Ze>>10|55296,Ze&1023|56320)},Ro=function(){vt()};try{$s.apply(On=Ya.call(Ks.childNodes),Ks.childNodes),On[Ks.childNodes.length].nodeType}catch{$s={apply:On.length?function(Pe,Oe){Pu.apply(Pe,Ya.call(Oe))}:function(Pe,Oe){for(var Ze=Pe.length,Ue=0;Pe[Ze++]=Oe[Ue++];);Pe.length=Ze-1}}}function Ci(ue,Pe,Oe,Ze){var Ue,ht,gt,Lt,Gt,wi,li,ei,Te,Ye;if((Pe?Pe.ownerDocument||Pe:Ks)!==kt&&vt(Pe),Pe=Pe||kt,Oe=Oe||[],Lt=Pe.nodeType,typeof ue!="string"||!ue||Lt!==1&&Lt!==9&&Lt!==11)return Oe;if(!Ze&&ni){if(Lt!==11&&(Ue=al.exec(ue)))if(gt=Ue[1]){if(Lt===9)if(ht=Pe.getElementById(gt),ht&&ht.parentNode){if(ht.id===gt)return Oe.push(ht),Oe}else return Oe;else if(Pe.ownerDocument&&(ht=Pe.ownerDocument.getElementById(gt))&&Rs(Pe,ht)&&ht.id===gt)return Oe.push(ht),Oe}else{if(Ue[2])return $s.apply(Oe,Pe.getElementsByTagName(ue)),Oe;if((gt=Ue[3])&&v.getElementsByClassName)return $s.apply(Oe,Pe.getElementsByClassName(gt)),Oe}if(v.qsa&&(!Di||!Di.test(ue))){if(ei=li=Ut,Te=Pe,Ye=Lt!==1&&ue,Lt===1&&Pe.nodeName.toLowerCase()!=="object"){for(wi=ee(ue),(li=Pe.getAttribute("id"))?ei=li.replace(Gi,"\\$&"):Pe.setAttribute("id",ei),ei="[id='"+ei+"'] ",Gt=wi.length;Gt--;)wi[Gt]=ei+uo(wi[Gt]);Te=oo.test(ue)&&ho(Pe.parentNode)||Pe,Ye=wi.join(",")}if(Ye)try{return $s.apply(Oe,Te.querySelectorAll(Ye)),Oe}catch{}finally{li||Pe.removeAttribute("id")}}}return xe(ue.replace(ro,"$1"),Pe,Oe,Ze)}function Lr(){var ue=[];function Pe(Oe,Ze){return ue.push(Oe+" ")>E.cacheLength&&delete Pe[ue.shift()],Pe[Oe+" "]=Ze}return Pe}function Yt(ue){return ue[Ut]=!0,ue}function $n(ue){var Pe=kt.createElement("div");try{return!!ue(Pe)}catch{return!1}finally{Pe.parentNode&&Pe.parentNode.removeChild(Pe),Pe=null}}function ms(ue,Pe){for(var Oe=ue.split("|"),Ze=ue.length;Ze--;)E.attrHandle[Oe[Ze]]=Pe}function lo(ue,Pe){var Oe=Pe&&ue,Ze=Oe&&ue.nodeType===1&&Pe.nodeType===1&&(~Pe.sourceIndex||Ur)-(~ue.sourceIndex||Ur);if(Ze)return Ze;if(Oe){for(;Oe=Oe.nextSibling;)if(Oe===Pe)return-1}return ue?1:-1}function Ea(ue){return function(Pe){var Oe=Pe.nodeName.toLowerCase();return Oe==="input"&&Pe.type===ue}}function nn(ue){return function(Pe){var Oe=Pe.nodeName.toLowerCase();return(Oe==="input"||Oe==="button")&&Pe.type===ue}}function Wn(ue){return Yt(function(Pe){return Pe=+Pe,Yt(function(Oe,Ze){for(var Ue,ht=ue([],Oe.length,Pe),gt=ht.length;gt--;)Oe[Ue=ht[gt]]&&(Oe[Ue]=!(Ze[Ue]=Oe[Ue]))})})}function ho(ue){return ue&&typeof ue.getElementsByTagName<"u"&&ue}v=Ci.support={},Y=Ci.isXML=function(ue){var Pe=ue&&(ue.ownerDocument||ue).documentElement;return Pe?Pe.nodeName!=="HTML":!1},vt=Ci.setDocument=function(ue){var Pe,Oe,Ze=ue?ue.ownerDocument||ue:Ks;return Ze===kt||Ze.nodeType!==9||!Ze.documentElement?kt:(kt=Ze,ui=Ze.documentElement,Oe=Ze.defaultView,Oe&&Oe!==Oe.top&&(Oe.addEventListener?Oe.addEventListener("unload",Ro,!1):Oe.attachEvent&&Oe.attachEvent("onunload",Ro)),ni=!Y(Ze),v.attributes=$n(function(Ue){return Ue.className="i",!Ue.getAttribute("className")}),v.getElementsByTagName=$n(function(Ue){return Ue.appendChild(Ze.createComment("")),!Ue.getElementsByTagName("*").length}),v.getElementsByClassName=Ir.test(Ze.getElementsByClassName),v.getById=$n(function(Ue){return ui.appendChild(Ue).id=Ut,!Ze.getElementsByName||!Ze.getElementsByName(Ut).length}),v.getById?(E.find.ID=function(Ue,ht){if(typeof ht.getElementById<"u"&&ni){var gt=ht.getElementById(Ue);return gt&&gt.parentNode?[gt]:[]}},E.filter.ID=function(Ue){var ht=Ue.replace(kr,vr);return function(gt){return gt.getAttribute("id")===ht}}):(delete E.find.ID,E.filter.ID=function(Ue){var ht=Ue.replace(kr,vr);return function(gt){var Lt=typeof gt.getAttributeNode<"u"&&gt.getAttributeNode("id");return Lt&&Lt.value===ht}}),E.find.TAG=v.getElementsByTagName?function(Ue,ht){if(typeof ht.getElementsByTagName<"u")return ht.getElementsByTagName(Ue);if(v.qsa)return ht.querySelectorAll(Ue)}:function(Ue,ht){var gt,Lt=[],Gt=0,wi=ht.getElementsByTagName(Ue);if(Ue==="*"){for(;gt=wi[Gt++];)gt.nodeType===1&&Lt.push(gt);return Lt}return wi},E.find.CLASS=v.getElementsByClassName&&function(Ue,ht){if(ni)return ht.getElementsByClassName(Ue)},Jn=[],Di=[],(v.qsa=Ir.test(Ze.querySelectorAll))&&($n(function(Ue){ui.appendChild(Ue).innerHTML="<a id='"+Ut+"'></a><select id='"+Ut+"-\f]' msallowcapture=''><option selected=''></option></select>",Ue.querySelectorAll("[msallowcapture^='']").length&&Di.push("[*^$]="+hs+`*(?:''|"")`),Ue.querySelectorAll("[selected]").length||Di.push("\\["+hs+"*(?:value|"+Yr+")"),Ue.querySelectorAll("[id~="+Ut+"-]").length||Di.push("~="),Ue.querySelectorAll(":checked").length||Di.push(":checked"),Ue.querySelectorAll("a#"+Ut+"+*").length||Di.push(".#.+[+~]")}),$n(function(Ue){var ht=Ze.createElement("input");ht.setAttribute("type","hidden"),Ue.appendChild(ht).setAttribute("name","D"),Ue.querySelectorAll("[name=d]").length&&Di.push("name"+hs+"*[*^$|!~]?="),Ue.querySelectorAll(":enabled").length||Di.push(":enabled",":disabled"),Ue.querySelectorAll("*,:x"),Di.push(",.*:")})),(v.matchesSelector=Ir.test(un=ui.matches||ui.webkitMatchesSelector||ui.mozMatchesSelector||ui.oMatchesSelector||ui.msMatchesSelector))&&$n(function(Ue){v.disconnectedMatch=un.call(Ue,"div"),un.call(Ue,"[s!='']:x"),Jn.push("!=",No)}),Di=Di.length&&new RegExp(Di.join("|")),Jn=Jn.length&&new RegExp(Jn.join("|")),Pe=Ir.test(ui.compareDocumentPosition),Rs=Pe||Ir.test(ui.contains)?function(Ue,ht){var gt=Ue.nodeType===9?Ue.documentElement:Ue,Lt=ht&&ht.parentNode;return Ue===Lt||!!(Lt&&Lt.nodeType===1&&(gt.contains?gt.contains(Lt):Ue.compareDocumentPosition&&Ue.compareDocumentPosition(Lt)&16))}:function(Ue,ht){if(ht){for(;ht=ht.parentNode;)if(ht===Ue)return!0}return!1},xr=Pe?function(Ue,ht){if(Ue===ht)return bt=!0,0;var gt=!Ue.compareDocumentPosition-!ht.compareDocumentPosition;return gt||(gt=(Ue.ownerDocument||Ue)===(ht.ownerDocument||ht)?Ue.compareDocumentPosition(ht):1,gt&1||!v.sortDetached&&ht.compareDocumentPosition(Ue)===gt?Ue===Ze||Ue.ownerDocument===Ks&&Rs(Ks,Ue)?-1:ht===Ze||ht.ownerDocument===Ks&&Rs(Ks,ht)?1:Fe?Ca(Fe,Ue)-Ca(Fe,ht):0:gt&4?-1:1)}:function(Ue,ht){if(Ue===ht)return bt=!0,0;var gt,Lt=0,Gt=Ue.parentNode,wi=ht.parentNode,li=[Ue],ei=[ht];if(!Gt||!wi)return Ue===Ze?-1:ht===Ze?1:Gt?-1:wi?1:Fe?Ca(Fe,Ue)-Ca(Fe,ht):0;if(Gt===wi)return lo(Ue,ht);for(gt=Ue;gt=gt.parentNode;)li.unshift(gt);for(gt=ht;gt=gt.parentNode;)ei.unshift(gt);for(;li[Lt]===ei[Lt];)Lt++;return Lt?lo(li[Lt],ei[Lt]):li[Lt]===Ks?-1:ei[Lt]===Ks?1:0},Ze)},Ci.matches=function(ue,Pe){return Ci(ue,null,null,Pe)},Ci.matchesSelector=function(ue,Pe){if((ue.ownerDocument||ue)!==kt&&vt(ue),Pe=Pe.replace(yh,"='$1']"),v.matchesSelector&&ni&&(!Jn||!Jn.test(Pe))&&(!Di||!Di.test(Pe)))try{var Oe=un.call(ue,Pe);if(Oe||v.disconnectedMatch||ue.document&&ue.document.nodeType!==11)return Oe}catch{}return Ci(Pe,kt,null,[ue]).length>0},Ci.contains=function(ue,Pe){return(ue.ownerDocument||ue)!==kt&&vt(ue),Rs(ue,Pe)},Ci.attr=function(ue,Pe){(ue.ownerDocument||ue)!==kt&&vt(ue);var Oe=E.attrHandle[Pe.toLowerCase()],Ze=Oe&&Yn.call(E.attrHandle,Pe.toLowerCase())?Oe(ue,Pe,!ni):void 0;return Ze!==void 0?Ze:v.attributes||!ni?ue.getAttribute(Pe):(Ze=ue.getAttributeNode(Pe))&&Ze.specified?Ze.value:null},Ci.error=function(ue){throw new Error("Syntax error, unrecognized expression: "+ue)},Ci.uniqueSort=function(ue){var Pe,Oe=[],Ze=0,Ue=0;if(bt=!v.detectDuplicates,Fe=!v.sortStable&&ue.slice(0),ue.sort(xr),bt){for(;Pe=ue[Ue++];)Pe===ue[Ue]&&(Ze=Oe.push(Ue));for(;Ze--;)ue.splice(Oe[Ze],1)}return Fe=null,ue},R=Ci.getText=function(ue){var Pe,Oe="",Ze=0,Ue=ue.nodeType;if(Ue){if(Ue===1||Ue===9||Ue===11){if(typeof ue.textContent=="string")return ue.textContent;for(ue=ue.firstChild;ue;ue=ue.nextSibling)Oe+=R(ue)}else if(Ue===3||Ue===4)return ue.nodeValue}else for(;Pe=ue[Ze++];)Oe+=R(Pe);return Oe},E=Ci.selectors={cacheLength:50,createPseudo:Yt,match:Wr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ue){return ue[1]=ue[1].replace(kr,vr),ue[3]=(ue[3]||ue[4]||ue[5]||"").replace(kr,vr),ue[2]==="~="&&(ue[3]=" "+ue[3]+" "),ue.slice(0,4)},CHILD:function(ue){return ue[1]=ue[1].toLowerCase(),ue[1].slice(0,3)==="nth"?(ue[3]||Ci.error(ue[0]),ue[4]=+(ue[4]?ue[5]+(ue[6]||1):2*(ue[3]==="even"||ue[3]==="odd")),ue[5]=+(ue[7]+ue[8]||ue[3]==="odd")):ue[3]&&Ci.error(ue[0]),ue},PSEUDO:function(ue){var Pe,Oe=!ue[6]&&ue[2];return Wr.CHILD.test(ue[0])?null:(ue[3]?ue[2]=ue[4]||ue[5]||"":Oe&&ao.test(Oe)&&(Pe=ee(Oe,!0))&&(Pe=Oe.indexOf(")",Oe.length-Pe)-Oe.length)&&(ue[0]=ue[0].slice(0,Pe),ue[2]=Oe.slice(0,Pe)),ue.slice(0,3))}},filter:{TAG:function(ue){var Pe=ue.replace(kr,vr).toLowerCase();return ue==="*"?function(){return!0}:function(Oe){return Oe.nodeName&&Oe.nodeName.toLowerCase()===Pe}},CLASS:function(ue){var Pe=cn[ue+" "];return Pe||(Pe=new RegExp("(^|"+hs+")"+ue+"("+hs+"|$)"))&&cn(ue,function(Oe){return Pe.test(typeof Oe.className=="string"&&Oe.className||typeof Oe.getAttribute<"u"&&Oe.getAttribute("class")||"")})},ATTR:function(ue,Pe,Oe){return function(Ze){var Ue=Ci.attr(Ze,ue);return Ue==null?Pe==="!=":Pe?(Ue+="",Pe==="="?Ue===Oe:Pe==="!="?Ue!==Oe:Pe==="^="?Oe&&Ue.indexOf(Oe)===0:Pe==="*="?Oe&&Ue.indexOf(Oe)>-1:Pe==="$="?Oe&&Ue.slice(-Oe.length)===Oe:Pe==="~="?(" "+Ue.replace(Eu," ")+" ").indexOf(Oe)>-1:Pe==="|="?Ue===Oe||Ue.slice(0,Oe.length+1)===Oe+"-":!1):!0}},CHILD:function(ue,Pe,Oe,Ze,Ue){var ht=ue.slice(0,3)!=="nth",gt=ue.slice(-4)!=="last",Lt=Pe==="of-type";return Ze===1&&Ue===0?function(Gt){return!!Gt.parentNode}:function(Gt,wi,li){var ei,Te,Ye,He,le,Ae,qe=ht!==gt?"nextSibling":"previousSibling",Xe=Gt.parentNode,Bt=Lt&&Gt.nodeName.toLowerCase(),ri=!li&&!Lt;if(Xe){if(ht){for(;qe;){for(Ye=Gt;Ye=Ye[qe];)if(Lt?Ye.nodeName.toLowerCase()===Bt:Ye.nodeType===1)return!1;Ae=qe=ue==="only"&&!Ae&&"nextSibling"}return!0}if(Ae=[gt?Xe.firstChild:Xe.lastChild],gt&&ri){for(Te=Xe[Ut]||(Xe[Ut]={}),ei=Te[ue]||[],le=ei[0]===Ti&&ei[1],He=ei[0]===Ti&&ei[2],Ye=le&&Xe.childNodes[le];Ye=++le&&Ye&&Ye[qe]||(He=le=0)||Ae.pop();)if(Ye.nodeType===1&&++He&&Ye===Gt){Te[ue]=[Ti,le,He];break}}else if(ri&&(ei=(Gt[Ut]||(Gt[Ut]={}))[ue])&&ei[0]===Ti)He=ei[1];else for(;(Ye=++le&&Ye&&Ye[qe]||(He=le=0)||Ae.pop())&&!((Lt?Ye.nodeName.toLowerCase()===Bt:Ye.nodeType===1)&&++He&&(ri&&((Ye[Ut]||(Ye[Ut]={}))[ue]=[Ti,He]),Ye===Gt)););return He-=Ue,He===Ze||He%Ze===0&&He/Ze>=0}}},PSEUDO:function(ue,Pe){var Oe,Ze=E.pseudos[ue]||E.setFilters[ue.toLowerCase()]||Ci.error("unsupported pseudo: "+ue);return Ze[Ut]?Ze(Pe):Ze.length>1?(Oe=[ue,ue,"",Pe],E.setFilters.hasOwnProperty(ue.toLowerCase())?Yt(function(Ue,ht){for(var gt,Lt=Ze(Ue,Pe),Gt=Lt.length;Gt--;)gt=Ca(Ue,Lt[Gt]),Ue[gt]=!(ht[gt]=Lt[Gt])}):function(Ue){return Ze(Ue,0,Oe)}):Ze}},pseudos:{not:Yt(function(ue){var Pe=[],Oe=[],Ze=_e(ue.replace(ro,"$1"));return Ze[Ut]?Yt(function(Ue,ht,gt,Lt){for(var Gt,wi=Ze(Ue,null,Lt,[]),li=Ue.length;li--;)(Gt=wi[li])&&(Ue[li]=!(ht[li]=Gt))}):function(Ue,ht,gt){return Pe[0]=Ue,Ze(Pe,null,gt,Oe),Pe[0]=null,!Oe.pop()}}),has:Yt(function(ue){return function(Pe){return Ci(ue,Pe).length>0}}),contains:Yt(function(ue){return ue=ue.replace(kr,vr),function(Pe){return(Pe.textContent||Pe.innerText||R(Pe)).indexOf(ue)>-1}}),lang:Yt(function(ue){return rl.test(ue||"")||Ci.error("unsupported lang: "+ue),ue=ue.replace(kr,vr).toLowerCase(),function(Pe){var Oe;do if(Oe=ni?Pe.lang:Pe.getAttribute("xml:lang")||Pe.getAttribute("lang"))return Oe=Oe.toLowerCase(),Oe===ue||Oe.indexOf(ue+"-")===0;while((Pe=Pe.parentNode)&&Pe.nodeType===1);return!1}}),target:function(ue){var Pe=u.location&&u.location.hash;return Pe&&Pe.slice(1)===ue.id},root:function(ue){return ue===ui},focus:function(ue){return ue===kt.activeElement&&(!kt.hasFocus||kt.hasFocus())&&!!(ue.type||ue.href||~ue.tabIndex)},enabled:function(ue){return ue.disabled===!1},disabled:function(ue){return ue.disabled===!0},checked:function(ue){var Pe=ue.nodeName.toLowerCase();return Pe==="input"&&!!ue.checked||Pe==="option"&&!!ue.selected},selected:function(ue){return ue.parentNode&&ue.parentNode.selectedIndex,ue.selected===!0},empty:function(ue){for(ue=ue.firstChild;ue;ue=ue.nextSibling)if(ue.nodeType<6)return!1;return!0},parent:function(ue){return!E.pseudos.empty(ue)},header:function(ue){return Bo.test(ue.nodeName)},input:function(ue){return Du.test(ue.nodeName)},button:function(ue){var Pe=ue.nodeName.toLowerCase();return Pe==="input"&&ue.type==="button"||Pe==="button"},text:function(ue){var Pe;return ue.nodeName.toLowerCase()==="input"&&ue.type==="text"&&((Pe=ue.getAttribute("type"))==null||Pe.toLowerCase()==="text")},first:Wn(function(){return[0]}),last:Wn(function(ue,Pe){return[Pe-1]}),eq:Wn(function(ue,Pe,Oe){return[Oe<0?Oe+Pe:Oe]}),even:Wn(function(ue,Pe){for(var Oe=0;Oe<Pe;Oe+=2)ue.push(Oe);return ue}),odd:Wn(function(ue,Pe){for(var Oe=1;Oe<Pe;Oe+=2)ue.push(Oe);return ue}),lt:Wn(function(ue,Pe,Oe){for(var Ze=Oe<0?Oe+Pe:Oe;--Ze>=0;)ue.push(Ze);return ue}),gt:Wn(function(ue,Pe,Oe){for(var Ze=Oe<0?Oe+Pe:Oe;++Ze<Pe;)ue.push(Ze);return ue})}},E.pseudos.nth=E.pseudos.eq;for(m in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[m]=Ea(m);for(m in{submit:!0,reset:!0})E.pseudos[m]=nn(m);function _h(){}_h.prototype=E.filters=E.pseudos,E.setFilters=new _h,ee=Ci.tokenize=function(ue,Pe){var Oe,Ze,Ue,ht,gt,Lt,Gt,wi=Sa[ue+" "];if(wi)return Pe?0:wi.slice(0);for(gt=ue,Lt=[],Gt=E.preFilter;gt;){(!Oe||(Ze=Wa.exec(gt)))&&(Ze&&(gt=gt.slice(Ze[0].length)||gt),Lt.push(Ue=[])),Oe=!1,(Ze=vn.exec(gt))&&(Oe=Ze.shift(),Ue.push({value:Oe,type:Ze[0].replace(ro," ")}),gt=gt.slice(Oe.length));for(ht in E.filter)(Ze=Wr[ht].exec(gt))&&(!Gt[ht]||(Ze=Gt[ht](Ze)))&&(Oe=Ze.shift(),Ue.push({value:Oe,type:ht,matches:Ze}),gt=gt.slice(Oe.length));if(!Oe)break}return Pe?gt.length:gt?Ci.error(ue):Sa(ue,Lt).slice(0)};function uo(ue){for(var Pe=0,Oe=ue.length,Ze="";Pe<Oe;Pe++)Ze+=ue[Pe].value;return Ze}function Da(ue,Pe,Oe){var Ze=Pe.dir,Ue=Oe&&Ze==="parentNode",ht=Ms++;return Pe.first?function(gt,Lt,Gt){for(;gt=gt[Ze];)if(gt.nodeType===1||Ue)return ue(gt,Lt,Gt)}:function(gt,Lt,Gt){var wi,li,ei=[Ti,ht];if(Gt){for(;gt=gt[Ze];)if((gt.nodeType===1||Ue)&&ue(gt,Lt,Gt))return!0}else for(;gt=gt[Ze];)if(gt.nodeType===1||Ue){if(li=gt[Ut]||(gt[Ut]={}),(wi=li[Ze])&&wi[0]===Ti&&wi[1]===ht)return ei[2]=wi[2];if(li[Ze]=ei,ei[2]=ue(gt,Lt,Gt))return!0}}}function or(ue){return ue.length>1?function(Pe,Oe,Ze){for(var Ue=ue.length;Ue--;)if(!ue[Ue](Pe,Oe,Ze))return!1;return!0}:ue[0]}function Mo(ue,Pe,Oe){for(var Ze=0,Ue=Pe.length;Ze<Ue;Ze++)Ci(ue,Pe[Ze],Oe);return Oe}function Gr(ue,Pe,Oe,Ze,Ue){for(var ht,gt=[],Lt=0,Gt=ue.length,wi=Pe!=null;Lt<Gt;Lt++)(ht=ue[Lt])&&(!Oe||Oe(ht,Ze,Ue))&&(gt.push(ht),wi&&Pe.push(Lt));return gt}function co(ue,Pe,Oe,Ze,Ue,ht){return Ze&&!Ze[Ut]&&(Ze=co(Ze)),Ue&&!Ue[Ut]&&(Ue=co(Ue,ht)),Yt(function(gt,Lt,Gt,wi){var li,ei,Te,Ye=[],He=[],le=Lt.length,Ae=gt||Mo(Pe||"*",Gt.nodeType?[Gt]:Gt,[]),qe=ue&&(gt||!Pe)?Gr(Ae,Ye,ue,Gt,wi):Ae,Xe=Oe?Ue||(gt?ue:le||Ze)?[]:Lt:qe;if(Oe&&Oe(qe,Xe,Gt,wi),Ze)for(li=Gr(Xe,He),Ze(li,[],Gt,wi),ei=li.length;ei--;)(Te=li[ei])&&(Xe[He[ei]]=!(qe[He[ei]]=Te));if(gt){if(Ue||ue){if(Ue){for(li=[],ei=Xe.length;ei--;)(Te=Xe[ei])&&li.push(qe[ei]=Te);Ue(null,Xe=[],li,wi)}for(ei=Xe.length;ei--;)(Te=Xe[ei])&&(li=Ue?Ca(gt,Te):Ye[ei])>-1&&(gt[li]=!(Lt[li]=Te))}}else Xe=Gr(Xe===Lt?Xe.splice(le,Xe.length):Xe),Ue?Ue(null,Lt,Xe,wi):$s.apply(Lt,Xe)})}function Nr(ue){for(var Pe,Oe,Ze,Ue=ue.length,ht=E.relative[ue[0].type],gt=ht||E.relative[" "],Lt=ht?1:0,Gt=Da(function(ei){return ei===Pe},gt,!0),wi=Da(function(ei){return Ca(Pe,ei)>-1},gt,!0),li=[function(ei,Te,Ye){var He=!ht&&(Ye||Te!==ze)||((Pe=Te).nodeType?Gt(ei,Te,Ye):wi(ei,Te,Ye));return Pe=null,He}];Lt<Ue;Lt++)if(Oe=E.relative[ue[Lt].type])li=[Da(or(li),Oe)];else{if(Oe=E.filter[ue[Lt].type].apply(null,ue[Lt].matches),Oe[Ut]){for(Ze=++Lt;Ze<Ue&&!E.relative[ue[Ze].type];Ze++);return co(Lt>1&&or(li),Lt>1&&uo(ue.slice(0,Lt-1).concat({value:ue[Lt-2].type===" "?"*":""})).replace(ro,"$1"),Oe,Lt<Ze&&Nr(ue.slice(Lt,Ze)),Ze<Ue&&Nr(ue=ue.slice(Ze)),Ze<Ue&&uo(ue))}li.push(Oe)}return or(li)}function Oo(ue,Pe){var Oe=Pe.length>0,Ze=ue.length>0,Ue=function(ht,gt,Lt,Gt,wi){var li,ei,Te,Ye=0,He="0",le=ht&&[],Ae=[],qe=ze,Xe=ht||Ze&&E.find.TAG("*",wi),Bt=Ti+=qe==null?1:Math.random()||.1,ri=Xe.length;for(wi&&(ze=gt!==kt&&gt);He!==ri&&(li=Xe[He])!=null;He++){if(Ze&&li){for(ei=0;Te=ue[ei++];)if(Te(li,gt,Lt)){Gt.push(li);break}wi&&(Ti=Bt)}Oe&&((li=!Te&&li)&&Ye--,ht&&le.push(li))}if(Ye+=He,Oe&&He!==Ye){for(ei=0;Te=Pe[ei++];)Te(le,Ae,gt,Lt);if(ht){if(Ye>0)for(;He--;)le[He]||Ae[He]||(Ae[He]=xi.call(Gt));Ae=Gr(Ae)}$s.apply(Gt,Ae),wi&&!ht&&Ae.length>0&&Ye+Pe.length>1&&Ci.uniqueSort(Gt)}return wi&&(Ti=Bt,ze=qe),le};return Oe?Yt(Ue):Ue}return _e=Ci.compile=function(ue,Pe){var Oe,Ze=[],Ue=[],ht=Mn[ue+" "];if(!ht){for(Pe||(Pe=ee(ue)),Oe=Pe.length;Oe--;)ht=Nr(Pe[Oe]),ht[Ut]?Ze.push(ht):Ue.push(ht);ht=Mn(ue,Oo(Ue,Ze)),ht.selector=ue}return ht},xe=Ci.select=function(ue,Pe,Oe,Ze){var Ue,ht,gt,Lt,Gt,wi=typeof ue=="function"&&ue,li=!Ze&&ee(ue=wi.selector||ue);if(Oe=Oe||[],li.length===1){if(ht=li[0]=li[0].slice(0),ht.length>2&&(gt=ht[0]).type==="ID"&&v.getById&&Pe.nodeType===9&&ni&&E.relative[ht[1].type]){if(Pe=(E.find.ID(gt.matches[0].replace(kr,vr),Pe)||[])[0],Pe)wi&&(Pe=Pe.parentNode);else return Oe;ue=ue.slice(ht.shift().value.length)}for(Ue=Wr.needsContext.test(ue)?0:ht.length;Ue--&&(gt=ht[Ue],!E.relative[Lt=gt.type]);)if((Gt=E.find[Lt])&&(Ze=Gt(gt.matches[0].replace(kr,vr),oo.test(ht[0].type)&&ho(Pe.parentNode)||Pe))){if(ht.splice(Ue,1),ue=Ze.length&&uo(ht),!ue)return $s.apply(Oe,Ze),Oe;break}}return(wi||_e(ue,li))(Ze,Pe,!ni,Oe,oo.test(ue)&&ho(Pe.parentNode)||Pe),Oe},v.sortStable=Ut.split("").sort(xr).join("")===Ut,v.detectDuplicates=!!bt,vt(),v.sortDetached=$n(function(ue){return ue.compareDocumentPosition(kt.createElement("div"))&1}),$n(function(ue){return ue.innerHTML="<a href='#'></a>",ue.firstChild.getAttribute("href")==="#"})||ms("type|href|height|width",function(ue,Pe,Oe){if(!Oe)return ue.getAttribute(Pe,Pe.toLowerCase()==="type"?1:2)}),(!v.attributes||!$n(function(ue){return ue.innerHTML="<input/>",ue.firstChild.setAttribute("value",""),ue.firstChild.getAttribute("value")===""}))&&ms("value",function(ue,Pe,Oe){if(!Oe&&ue.nodeName.toLowerCase()==="input")return ue.defaultValue}),$n(function(ue){return ue.getAttribute("disabled")==null})||ms(Yr,function(ue,Pe,Oe){var Ze;if(!Oe)return ue[Pe]===!0?Pe.toLowerCase():(Ze=ue.getAttributeNode(Pe))&&Ze.specified?Ze.value:null}),Ci}(e);A.find=ae,A.expr=ae.selectors,A.expr[":"]=A.expr.pseudos,A.unique=ae.uniqueSort,A.text=ae.getText,A.isXMLDoc=ae.isXML,A.contains=ae.contains;var pe=A.expr.match.needsContext,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ie=/^.[^:#\[\.,]*$/;function $e(u,m,v){if(A.isFunction(m))return A.grep(u,function(E,R){return!!m.call(E,R,E)!==v});if(m.nodeType)return A.grep(u,function(E){return E===m!==v});if(typeof m=="string"){if(Ie.test(m))return A.filter(m,u,v);m=A.filter(m,u)}return A.grep(u,function(E){return d.call(m,E)>=0!==v})}A.filter=function(u,m,v){var E=m[0];return v&&(u=":not("+u+")"),m.length===1&&E.nodeType===1?A.find.matchesSelector(E,u)?[E]:[]:A.find.matches(u,A.grep(m,function(R){return R.nodeType===1}))},A.fn.extend({find:function(u){var m,v=this.length,E=[],R=this;if(typeof u!="string")return this.pushStack(A(u).filter(function(){for(m=0;m<v;m++)if(A.contains(R[m],this))return!0}));for(m=0;m<v;m++)A.find(u,R[m],E);return E=this.pushStack(v>1?A.unique(E):E),E.selector=this.selector?this.selector+" "+u:u,E},filter:function(u){return this.pushStack($e(this,u||[],!1))},not:function(u){return this.pushStack($e(this,u||[],!0))},is:function(u){return!!$e(this,typeof u=="string"&&pe.test(u)?A(u):u||[],!1).length}});var Ee,Je=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Ge=A.fn.init=function(u,m){var v,E;if(!u)return this;if(typeof u=="string")if(u[0]==="<"&&u[u.length-1]===">"&&u.length>=3?v=[null,u,null]:v=Je.exec(u),v&&(v[1]||!m))if(v[1]){if(m=m instanceof A?m[0]:m,A.merge(this,A.parseHTML(v[1],m&&m.nodeType?m.ownerDocument||m:L,!0)),N.test(v[1])&&A.isPlainObject(m))for(v in m)A.isFunction(this[v])?this[v](m[v]):this.attr(v,m[v]);return this}else return E=L.getElementById(v[2]),E&&E.parentNode&&(this.length=1,this[0]=E),this.context=L,this.selector=u,this;else return!m||m.jquery?(m||Ee).find(u):this.constructor(m).find(u);else{if(u.nodeType)return this.context=this[0]=u,this.length=1,this;if(A.isFunction(u))return typeof Ee.ready<"u"?Ee.ready(u):u(A)}return u.selector!==void 0&&(this.selector=u.selector,this.context=u.context),A.makeArray(u,this)};Ge.prototype=A.fn,Ee=A(L);var _t=/^(?:parents|prev(?:Until|All))/,it={children:!0,contents:!0,next:!0,prev:!0};A.extend({dir:function(u,m,v){for(var E=[],R=v!==void 0;(u=u[m])&&u.nodeType!==9;)if(u.nodeType===1){if(R&&A(u).is(v))break;E.push(u)}return E},sibling:function(u,m){for(var v=[];u;u=u.nextSibling)u.nodeType===1&&u!==m&&v.push(u);return v}}),A.fn.extend({has:function(u){var m=A(u,this),v=m.length;return this.filter(function(){for(var E=0;E<v;E++)if(A.contains(this,m[E]))return!0})},closest:function(u,m){for(var v,E=0,R=this.length,Y=[],ee=pe.test(u)||typeof u!="string"?A(u,m||this.context):0;E<R;E++)for(v=this[E];v&&v!==m;v=v.parentNode)if(v.nodeType<11&&(ee?ee.index(v)>-1:v.nodeType===1&&A.find.matchesSelector(v,u))){Y.push(v);break}return this.pushStack(Y.length>1?A.unique(Y):Y)},index:function(u){return u?typeof u=="string"?d.call(A(u),this[0]):d.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,m){return this.pushStack(A.unique(A.merge(this.get(),A(u,m))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}});function nt(u,m){for(;(u=u[m])&&u.nodeType!==1;);return u}A.each({parent:function(u){var m=u.parentNode;return m&&m.nodeType!==11?m:null},parents:function(u){return A.dir(u,"parentNode")},parentsUntil:function(u,m,v){return A.dir(u,"parentNode",v)},next:function(u){return nt(u,"nextSibling")},prev:function(u){return nt(u,"previousSibling")},nextAll:function(u){return A.dir(u,"nextSibling")},prevAll:function(u){return A.dir(u,"previousSibling")},nextUntil:function(u,m,v){return A.dir(u,"nextSibling",v)},prevUntil:function(u,m,v){return A.dir(u,"previousSibling",v)},siblings:function(u){return A.sibling((u.parentNode||{}).firstChild,u)},children:function(u){return A.sibling(u.firstChild)},contents:function(u){return u.contentDocument||A.merge([],u.childNodes)}},function(u,m){A.fn[u]=function(v,E){var R=A.map(this,m,v);return u.slice(-5)!=="Until"&&(E=v),E&&typeof E=="string"&&(R=A.filter(E,R)),this.length>1&&(it[u]||A.unique(R),_t.test(u)&&R.reverse()),this.pushStack(R)}});var Ct=/\S+/g,Qe={};function Zt(u){var m=Qe[u]={};return A.each(u.match(Ct)||[],function(v,E){m[E]=!0}),m}A.Callbacks=function(u){u=typeof u=="string"?Qe[u]||Zt(u):A.extend({},u);var m,v,E,R,Y,ee,_e=[],xe=!u.once&&[],ze=function(bt){for(m=u.memory&&bt,v=!0,ee=R||0,R=0,Y=_e.length,E=!0;_e&&ee<Y;ee++)if(_e[ee].apply(bt[0],bt[1])===!1&&u.stopOnFalse){m=!1;break}E=!1,_e&&(xe?xe.length&&ze(xe.shift()):m?_e=[]:Fe.disable())},Fe={add:function(){if(_e){var bt=_e.length;(function vt(kt){A.each(kt,function(ui,ni){var Di=A.type(ni);Di==="function"?(!u.unique||!Fe.has(ni))&&_e.push(ni):ni&&ni.length&&Di!=="string"&&vt(ni)})})(arguments),E?Y=_e.length:m&&(R=bt,ze(m))}return this},remove:function(){return _e&&A.each(arguments,function(bt,vt){for(var kt;(kt=A.inArray(vt,_e,kt))>-1;)_e.splice(kt,1),E&&(kt<=Y&&Y--,kt<=ee&&ee--)}),this},has:function(bt){return bt?A.inArray(bt,_e)>-1:!!(_e&&_e.length)},empty:function(){return _e=[],Y=0,this},disable:function(){return _e=xe=m=void 0,this},disabled:function(){return!_e},lock:function(){return xe=void 0,m||Fe.disable(),this},locked:function(){return!xe},fireWith:function(bt,vt){return _e&&(!v||xe)&&(vt=vt||[],vt=[bt,vt.slice?vt.slice():vt],E?xe.push(vt):ze(vt)),this},fire:function(){return Fe.fireWith(this,arguments),this},fired:function(){return!!v}};return Fe},A.extend({Deferred:function(u){var m=[["resolve","done",A.Callbacks("once memory"),"resolved"],["reject","fail",A.Callbacks("once memory"),"rejected"],["notify","progress",A.Callbacks("memory")]],v="pending",E={state:function(){return v},always:function(){return R.done(arguments).fail(arguments),this},then:function(){var Y=arguments;return A.Deferred(function(ee){A.each(m,function(_e,xe){var ze=A.isFunction(Y[_e])&&Y[_e];R[xe[1]](function(){var Fe=ze&&ze.apply(this,arguments);Fe&&A.isFunction(Fe.promise)?Fe.promise().done(ee.resolve).fail(ee.reject).progress(ee.notify):ee[xe[0]+"With"](this===E?ee.promise():this,ze?[Fe]:arguments)})}),Y=null}).promise()},promise:function(Y){return Y!=null?A.extend(Y,E):E}},R={};return E.pipe=E.then,A.each(m,function(Y,ee){var _e=ee[2],xe=ee[3];E[ee[1]]=_e.add,xe&&_e.add(function(){v=xe},m[Y^1][2].disable,m[2][2].lock),R[ee[0]]=function(){return R[ee[0]+"With"](this===R?E:this,arguments),this},R[ee[0]+"With"]=_e.fireWith}),E.promise(R),u&&u.call(R,R),R},when:function(u){var m=0,v=s.call(arguments),E=v.length,R=E!==1||u&&A.isFunction(u.promise)?E:0,Y=R===1?u:A.Deferred(),ee=function(Fe,bt,vt){return function(kt){bt[Fe]=this,vt[Fe]=arguments.length>1?s.call(arguments):kt,vt===_e?Y.notifyWith(bt,vt):--R||Y.resolveWith(bt,vt)}},_e,xe,ze;if(E>1)for(_e=new Array(E),xe=new Array(E),ze=new Array(E);m<E;m++)v[m]&&A.isFunction(v[m].promise)?v[m].promise().done(ee(m,ze,v)).fail(Y.reject).progress(ee(m,xe,_e)):--R;return R||Y.resolveWith(ze,v),Y.promise()}});var At;A.fn.ready=function(u){return A.ready.promise().done(u),this},A.extend({isReady:!1,readyWait:1,holdReady:function(u){u?A.readyWait++:A.ready(!0)},ready:function(u){(u===!0?--A.readyWait:A.isReady)||(A.isReady=!0,!(u!==!0&&--A.readyWait>0)&&(At.resolveWith(L,[A]),A.fn.triggerHandler&&(A(L).triggerHandler("ready"),A(L).off("ready"))))}});function Re(){L.removeEventListener("DOMContentLoaded",Re,!1),e.removeEventListener("load",Re,!1),A.ready()}A.ready.promise=function(u){return At||(At=A.Deferred(),L.readyState==="complete"?setTimeout(A.ready):(L.addEventListener("DOMContentLoaded",Re,!1),e.addEventListener("load",Re,!1))),At.promise(u)},A.ready.promise();var at=A.access=function(u,m,v,E,R,Y,ee){var _e=0,xe=u.length,ze=v==null;if(A.type(v)==="object"){R=!0;for(_e in v)A.access(u,m,_e,v[_e],!0,Y,ee)}else if(E!==void 0&&(R=!0,A.isFunction(E)||(ee=!0),ze&&(ee?(m.call(u,E),m=null):(ze=m,m=function(Fe,bt,vt){return ze.call(A(Fe),vt)})),m))for(;_e<xe;_e++)m(u[_e],v,ee?E:E.call(u[_e],_e,m(u[_e],v)));return R?u:ze?m.call(u):xe?m(u[0],v):Y};A.acceptData=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function Et(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=A.expando+Et.uid++}Et.uid=1,Et.accepts=A.acceptData,Et.prototype={key:function(u){if(!Et.accepts(u))return 0;var m={},v=u[this.expando];if(!v){v=Et.uid++;try{m[this.expando]={value:v},Object.defineProperties(u,m)}catch{m[this.expando]=v,A.extend(u,m)}}return this.cache[v]||(this.cache[v]={}),v},set:function(u,m,v){var E,R=this.key(u),Y=this.cache[R];if(typeof m=="string")Y[m]=v;else if(A.isEmptyObject(Y))A.extend(this.cache[R],m);else for(E in m)Y[E]=m[E];return Y},get:function(u,m){var v=this.cache[this.key(u)];return m===void 0?v:v[m]},access:function(u,m,v){var E;return m===void 0||m&&typeof m=="string"&&v===void 0?(E=this.get(u,m),E!==void 0?E:this.get(u,A.camelCase(m))):(this.set(u,m,v),v!==void 0?v:m)},remove:function(u,m){var v,E,R,Y=this.key(u),ee=this.cache[Y];if(m===void 0)this.cache[Y]={};else for(A.isArray(m)?E=m.concat(m.map(A.camelCase)):(R=A.camelCase(m),m in ee?E=[m,R]:(E=R,E=E in ee?[E]:E.match(Ct)||[])),v=E.length;v--;)delete ee[E[v]]},hasData:function(u){return!A.isEmptyObject(this.cache[u[this.expando]]||{})},discard:function(u){u[this.expando]&&delete this.cache[u[this.expando]]}};var Nt=new Et,Ht=new Et,cs=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,hi=/([A-Z])/g;function zs(u,m,v){var E;if(v===void 0&&u.nodeType===1)if(E="data-"+m.replace(hi,"-$1").toLowerCase(),v=u.getAttribute(E),typeof v=="string"){try{v=v==="true"?!0:v==="false"?!1:v==="null"?null:+v+""===v?+v:cs.test(v)?A.parseJSON(v):v}catch{}Ht.set(u,m,v)}else v=void 0;return v}A.extend({hasData:function(u){return Ht.hasData(u)||Nt.hasData(u)},data:function(u,m,v){return Ht.access(u,m,v)},removeData:function(u,m){Ht.remove(u,m)},_data:function(u,m,v){return Nt.access(u,m,v)},_removeData:function(u,m){Nt.remove(u,m)}}),A.fn.extend({data:function(u,m){var v,E,R,Y=this[0],ee=Y&&Y.attributes;if(u===void 0){if(this.length&&(R=Ht.get(Y),Y.nodeType===1&&!Nt.get(Y,"hasDataAttrs"))){for(v=ee.length;v--;)ee[v]&&(E=ee[v].name,E.indexOf("data-")===0&&(E=A.camelCase(E.slice(5)),zs(Y,E,R[E])));Nt.set(Y,"hasDataAttrs",!0)}return R}return typeof u=="object"?this.each(function(){Ht.set(this,u)}):at(this,function(_e){var xe,ze=A.camelCase(u);if(Y&&_e===void 0)return xe=Ht.get(Y,u),xe!==void 0||(xe=Ht.get(Y,ze),xe!==void 0)||(xe=zs(Y,ze,void 0),xe!==void 0)?xe:void 0;this.each(function(){var Fe=Ht.get(this,ze);Ht.set(this,ze,_e),u.indexOf("-")!==-1&&Fe!==void 0&&Ht.set(this,u,_e)})},null,m,arguments.length>1,null,!0)},removeData:function(u){return this.each(function(){Ht.remove(this,u)})}}),A.extend({queue:function(u,m,v){var E;if(u)return m=(m||"fx")+"queue",E=Nt.get(u,m),v&&(!E||A.isArray(v)?E=Nt.access(u,m,A.makeArray(v)):E.push(v)),E||[]},dequeue:function(u,m){m=m||"fx";var v=A.queue(u,m),E=v.length,R=v.shift(),Y=A._queueHooks(u,m),ee=function(){A.dequeue(u,m)};R==="inprogress"&&(R=v.shift(),E--),R&&(m==="fx"&&v.unshift("inprogress"),delete Y.stop,R.call(u,ee,Y)),!E&&Y&&Y.empty.fire()},_queueHooks:function(u,m){var v=m+"queueHooks";return Nt.get(u,v)||Nt.access(u,v,{empty:A.Callbacks("once memory").add(function(){Nt.remove(u,[m+"queue",v])})})}}),A.fn.extend({queue:function(u,m){var v=2;return typeof u!="string"&&(m=u,u="fx",v--),arguments.length<v?A.queue(this[0],u):m===void 0?this:this.each(function(){var E=A.queue(this,u,m);A._queueHooks(this,u),u==="fx"&&E[0]!=="inprogress"&&A.dequeue(this,u)})},dequeue:function(u){return this.each(function(){A.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,m){var v,E=1,R=A.Deferred(),Y=this,ee=this.length,_e=function(){--E||R.resolveWith(Y,[Y])};for(typeof u!="string"&&(m=u,u=void 0),u=u||"fx";ee--;)v=Nt.get(Y[ee],u+"queueHooks"),v&&v.empty&&(E++,v.empty.add(_e));return _e(),R.promise(m)}});var Ji=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,bs=["Top","Right","Bottom","Left"],ai=function(u,m){return u=m||u,A.css(u,"display")==="none"||!A.contains(u.ownerDocument,u)},Ei=/^(?:checkbox|radio)$/i;(function(){var u=L.createDocumentFragment(),m=u.appendChild(L.createElement("div")),v=L.createElement("input");v.setAttribute("type","radio"),v.setAttribute("checked","checked"),v.setAttribute("name","t"),m.appendChild(v),T.checkClone=m.cloneNode(!0).cloneNode(!0).lastChild.checked,m.innerHTML="<textarea>x</textarea>",T.noCloneChecked=!!m.cloneNode(!0).lastChild.defaultValue})();var Pt="undefined";T.focusinBubbles="onfocusin"in e;var Hn=/^key/,Zs=/^(?:mouse|pointer|contextmenu)|click/,ns=/^(?:focusinfocus|focusoutblur)$/,on=/^([^.]*)(?:\.(.+)|)$/;function P(){return!0}function fe(){return!1}function ye(){try{return L.activeElement}catch{}}A.event={global:{},add:function(u,m,v,E,R){var Y,ee,_e,xe,ze,Fe,bt,vt,kt,ui,ni,Di=Nt.get(u);if(Di)for(v.handler&&(Y=v,v=Y.handler,R=Y.selector),v.guid||(v.guid=A.guid++),(xe=Di.events)||(xe=Di.events={}),(ee=Di.handle)||(ee=Di.handle=function(Jn){return typeof A!==Pt&&A.event.triggered!==Jn.type?A.event.dispatch.apply(u,arguments):void 0}),m=(m||"").match(Ct)||[""],ze=m.length;ze--;)_e=on.exec(m[ze])||[],kt=ni=_e[1],ui=(_e[2]||"").split(".").sort(),kt&&(bt=A.event.special[kt]||{},kt=(R?bt.delegateType:bt.bindType)||kt,bt=A.event.special[kt]||{},Fe=A.extend({type:kt,origType:ni,data:E,handler:v,guid:v.guid,selector:R,needsContext:R&&A.expr.match.needsContext.test(R),namespace:ui.join(".")},Y),(vt=xe[kt])||(vt=xe[kt]=[],vt.delegateCount=0,(!bt.setup||bt.setup.call(u,E,ui,ee)===!1)&&u.addEventListener&&u.addEventListener(kt,ee,!1)),bt.add&&(bt.add.call(u,Fe),Fe.handler.guid||(Fe.handler.guid=v.guid)),R?vt.splice(vt.delegateCount++,0,Fe):vt.push(Fe),A.event.global[kt]=!0)},remove:function(u,m,v,E,R){var Y,ee,_e,xe,ze,Fe,bt,vt,kt,ui,ni,Di=Nt.hasData(u)&&Nt.get(u);if(!(!Di||!(xe=Di.events))){for(m=(m||"").match(Ct)||[""],ze=m.length;ze--;){if(_e=on.exec(m[ze])||[],kt=ni=_e[1],ui=(_e[2]||"").split(".").sort(),!kt){for(kt in xe)A.event.remove(u,kt+m[ze],v,E,!0);continue}for(bt=A.event.special[kt]||{},kt=(E?bt.delegateType:bt.bindType)||kt,vt=xe[kt]||[],_e=_e[2]&&new RegExp("(^|\\.)"+ui.join("\\.(?:.*\\.|)")+"(\\.|$)"),ee=Y=vt.length;Y--;)Fe=vt[Y],(R||ni===Fe.origType)&&(!v||v.guid===Fe.guid)&&(!_e||_e.test(Fe.namespace))&&(!E||E===Fe.selector||E==="**"&&Fe.selector)&&(vt.splice(Y,1),Fe.selector&&vt.delegateCount--,bt.remove&&bt.remove.call(u,Fe));ee&&!vt.length&&((!bt.teardown||bt.teardown.call(u,ui,Di.handle)===!1)&&A.removeEvent(u,kt,Di.handle),delete xe[kt])}A.isEmptyObject(xe)&&(delete Di.handle,Nt.remove(u,"events"))}},trigger:function(u,m,v,E){var R,Y,ee,_e,xe,ze,Fe,bt=[v||L],vt=S.call(u,"type")?u.type:u,kt=S.call(u,"namespace")?u.namespace.split("."):[];if(Y=ee=v=v||L,!(v.nodeType===3||v.nodeType===8)&&!ns.test(vt+A.event.triggered)&&(vt.indexOf(".")>=0&&(kt=vt.split("."),vt=kt.shift(),kt.sort()),xe=vt.indexOf(":")<0&&"on"+vt,u=u[A.expando]?u:new A.Event(vt,typeof u=="object"&&u),u.isTrigger=E?2:3,u.namespace=kt.join("."),u.namespace_re=u.namespace?new RegExp("(^|\\.)"+kt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=v),m=m==null?[u]:A.makeArray(m,[u]),Fe=A.event.special[vt]||{},!(!E&&Fe.trigger&&Fe.trigger.apply(v,m)===!1))){if(!E&&!Fe.noBubble&&!A.isWindow(v)){for(_e=Fe.delegateType||vt,ns.test(_e+vt)||(Y=Y.parentNode);Y;Y=Y.parentNode)bt.push(Y),ee=Y;ee===(v.ownerDocument||L)&&bt.push(ee.defaultView||ee.parentWindow||e)}for(R=0;(Y=bt[R++])&&!u.isPropagationStopped();)u.type=R>1?_e:Fe.bindType||vt,ze=(Nt.get(Y,"events")||{})[u.type]&&Nt.get(Y,"handle"),ze&&ze.apply(Y,m),ze=xe&&Y[xe],ze&&ze.apply&&A.acceptData(Y)&&(u.result=ze.apply(Y,m),u.result===!1&&u.preventDefault());return u.type=vt,!E&&!u.isDefaultPrevented()&&(!Fe._default||Fe._default.apply(bt.pop(),m)===!1)&&A.acceptData(v)&&xe&&A.isFunction(v[vt])&&!A.isWindow(v)&&(ee=v[xe],ee&&(v[xe]=null),A.event.triggered=vt,v[vt](),A.event.triggered=void 0,ee&&(v[xe]=ee)),u.result}},dispatch:function(u){u=A.event.fix(u);var m,v,E,R,Y,ee=[],_e=s.call(arguments),xe=(Nt.get(this,"events")||{})[u.type]||[],ze=A.event.special[u.type]||{};if(_e[0]=u,u.delegateTarget=this,!(ze.preDispatch&&ze.preDispatch.call(this,u)===!1)){for(ee=A.event.handlers.call(this,u,xe),m=0;(R=ee[m++])&&!u.isPropagationStopped();)for(u.currentTarget=R.elem,v=0;(Y=R.handlers[v++])&&!u.isImmediatePropagationStopped();)(!u.namespace_re||u.namespace_re.test(Y.namespace))&&(u.handleObj=Y,u.data=Y.data,E=((A.event.special[Y.origType]||{}).handle||Y.handler).apply(R.elem,_e),E!==void 0&&(u.result=E)===!1&&(u.preventDefault(),u.stopPropagation()));return ze.postDispatch&&ze.postDispatch.call(this,u),u.result}},handlers:function(u,m){var v,E,R,Y,ee=[],_e=m.delegateCount,xe=u.target;if(_e&&xe.nodeType&&(!u.button||u.type!=="click")){for(;xe!==this;xe=xe.parentNode||this)if(xe.disabled!==!0||u.type!=="click"){for(E=[],v=0;v<_e;v++)Y=m[v],R=Y.selector+" ",E[R]===void 0&&(E[R]=Y.needsContext?A(R,this).index(xe)>=0:A.find(R,this,null,[xe]).length),E[R]&&E.push(Y);E.length&&ee.push({elem:xe,handlers:E})}}return _e<m.length&&ee.push({elem:this,handlers:m.slice(_e)}),ee},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(u,m){return u.which==null&&(u.which=m.charCode!=null?m.charCode:m.keyCode),u}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(u,m){var v,E,R,Y=m.button;return u.pageX==null&&m.clientX!=null&&(v=u.target.ownerDocument||L,E=v.documentElement,R=v.body,u.pageX=m.clientX+(E&&E.scrollLeft||R&&R.scrollLeft||0)-(E&&E.clientLeft||R&&R.clientLeft||0),u.pageY=m.clientY+(E&&E.scrollTop||R&&R.scrollTop||0)-(E&&E.clientTop||R&&R.clientTop||0)),!u.which&&Y!==void 0&&(u.which=Y&1?1:Y&2?3:Y&4?2:0),u}},fix:function(u){if(u[A.expando])return u;var m,v,E,R=u.type,Y=u,ee=this.fixHooks[R];for(ee||(this.fixHooks[R]=ee=Zs.test(R)?this.mouseHooks:Hn.test(R)?this.keyHooks:{}),E=ee.props?this.props.concat(ee.props):this.props,u=new A.Event(Y),m=E.length;m--;)v=E[m],u[v]=Y[v];return u.target||(u.target=L),u.target.nodeType===3&&(u.target=u.target.parentNode),ee.filter?ee.filter(u,Y):u},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ye()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ye()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&A.nodeName(this,"input"))return this.click(),!1},_default:function(u){return A.nodeName(u.target,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}},simulate:function(u,m,v,E){var R=A.extend(new A.Event,v,{type:u,isSimulated:!0,originalEvent:{}});E?A.event.trigger(R,null,m):A.event.dispatch.call(m,R),R.isDefaultPrevented()&&v.preventDefault()}},A.removeEvent=function(u,m,v){u.removeEventListener&&u.removeEventListener(m,v,!1)},A.Event=function(u,m){if(!(this instanceof A.Event))return new A.Event(u,m);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?P:fe):this.type=u,m&&A.extend(this,m),this.timeStamp=u&&u.timeStamp||A.now(),this[A.expando]=!0},A.Event.prototype={isDefaultPrevented:fe,isPropagationStopped:fe,isImmediatePropagationStopped:fe,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=P,u&&u.preventDefault&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=P,u&&u.stopPropagation&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=P,u&&u.stopImmediatePropagation&&u.stopImmediatePropagation(),this.stopPropagation()}},A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,m){A.event.special[u]={delegateType:m,bindType:m,handle:function(v){var E,R=this,Y=v.relatedTarget,ee=v.handleObj;return(!Y||Y!==R&&!A.contains(R,Y))&&(v.type=ee.origType,E=ee.handler.apply(this,arguments),v.type=m),E}}}),T.focusinBubbles||A.each({focus:"focusin",blur:"focusout"},function(u,m){var v=function(E){A.event.simulate(m,E.target,A.event.fix(E),!0)};A.event.special[m]={setup:function(){var E=this.ownerDocument||this,R=Nt.access(E,m);R||E.addEventListener(u,v,!0),Nt.access(E,m,(R||0)+1)},teardown:function(){var E=this.ownerDocument||this,R=Nt.access(E,m)-1;R?Nt.access(E,m,R):(E.removeEventListener(u,v,!0),Nt.remove(E,m))}}}),A.fn.extend({on:function(u,m,v,E,R){var Y,ee;if(typeof u=="object"){typeof m!="string"&&(v=v||m,m=void 0);for(ee in u)this.on(ee,m,v,u[ee],R);return this}if(v==null&&E==null?(E=m,v=m=void 0):E==null&&(typeof m=="string"?(E=v,v=void 0):(E=v,v=m,m=void 0)),E===!1)E=fe;else if(!E)return this;return R===1&&(Y=E,E=function(_e){return A().off(_e),Y.apply(this,arguments)},E.guid=Y.guid||(Y.guid=A.guid++)),this.each(function(){A.event.add(this,u,E,v,m)})},one:function(u,m,v,E){return this.on(u,m,v,E,1)},off:function(u,m,v){var E,R;if(u&&u.preventDefault&&u.handleObj)return E=u.handleObj,A(u.delegateTarget).off(E.namespace?E.origType+"."+E.namespace:E.origType,E.selector,E.handler),this;if(typeof u=="object"){for(R in u)this.off(R,m,u[R]);return this}return(m===!1||typeof m=="function")&&(v=m,m=void 0),v===!1&&(v=fe),this.each(function(){A.event.remove(this,u,v,m)})},trigger:function(u,m){return this.each(function(){A.event.trigger(u,m,this)})},triggerHandler:function(u,m){var v=this[0];if(v)return A.event.trigger(u,m,v,!0)}});var we=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,De=/<([\w:]+)/,yt=/<|&#?\w+;/,tt=/<(?:script|style|link)/i,lt=/checked\s*(?:[^=]|=\s*.checked.)/i,Kn=/^$|\/(?:java|ecma)script/i,Jt=/^true\/(.*)/,a=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,h={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};h.optgroup=h.option,h.tbody=h.tfoot=h.colgroup=h.caption=h.thead,h.th=h.td;function f(u,m){return A.nodeName(u,"table")&&A.nodeName(m.nodeType!==11?m:m.firstChild,"tr")?u.getElementsByTagName("tbody")[0]||u.appendChild(u.ownerDocument.createElement("tbody")):u}function _(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function b(u){var m=Jt.exec(u.type);return m?u.type=m[1]:u.removeAttribute("type"),u}function w(u,m){for(var v=0,E=u.length;v<E;v++)Nt.set(u[v],"globalEval",!m||Nt.get(m[v],"globalEval"))}function I(u,m){var v,E,R,Y,ee,_e,xe,ze;if(m.nodeType===1){if(Nt.hasData(u)&&(Y=Nt.access(u),ee=Nt.set(m,Y),ze=Y.events,ze)){delete ee.handle,ee.events={};for(R in ze)for(v=0,E=ze[R].length;v<E;v++)A.event.add(m,R,ze[R][v])}Ht.hasData(u)&&(_e=Ht.access(u),xe=A.extend({},_e),Ht.set(m,xe))}}function D(u,m){var v=u.getElementsByTagName?u.getElementsByTagName(m||"*"):u.querySelectorAll?u.querySelectorAll(m||"*"):[];return m===void 0||m&&A.nodeName(u,m)?A.merge([u],v):v}function k(u,m){var v=m.nodeName.toLowerCase();v==="input"&&Ei.test(u.type)?m.checked=u.checked:(v==="input"||v==="textarea")&&(m.defaultValue=u.defaultValue)}A.extend({clone:function(u,m,v){var E,R,Y,ee,_e=u.cloneNode(!0),xe=A.contains(u.ownerDocument,u);if(!T.noCloneChecked&&(u.nodeType===1||u.nodeType===11)&&!A.isXMLDoc(u))for(ee=D(_e),Y=D(u),E=0,R=Y.length;E<R;E++)k(Y[E],ee[E]);if(m)if(v)for(Y=Y||D(u),ee=ee||D(_e),E=0,R=Y.length;E<R;E++)I(Y[E],ee[E]);else I(u,_e);return ee=D(_e,"script"),ee.length>0&&w(ee,!xe&&D(u,"script")),_e},buildFragment:function(u,m,v,E){for(var R,Y,ee,_e,xe,ze,Fe=m.createDocumentFragment(),bt=[],vt=0,kt=u.length;vt<kt;vt++)if(R=u[vt],R||R===0)if(A.type(R)==="object")A.merge(bt,R.nodeType?[R]:R);else if(!yt.test(R))bt.push(m.createTextNode(R));else{for(Y=Y||Fe.appendChild(m.createElement("div")),ee=(De.exec(R)||["",""])[1].toLowerCase(),_e=h[ee]||h._default,Y.innerHTML=_e[1]+R.replace(we,"<$1></$2>")+_e[2],ze=_e[0];ze--;)Y=Y.lastChild;A.merge(bt,Y.childNodes),Y=Fe.firstChild,Y.textContent=""}for(Fe.textContent="",vt=0;R=bt[vt++];)if(!(E&&A.inArray(R,E)!==-1)&&(xe=A.contains(R.ownerDocument,R),Y=D(Fe.appendChild(R),"script"),xe&&w(Y),v))for(ze=0;R=Y[ze++];)Kn.test(R.type||"")&&v.push(R);return Fe},cleanData:function(u){for(var m,v,E,R,Y=A.event.special,ee=0;(v=u[ee])!==void 0;ee++){if(A.acceptData(v)&&(R=v[Nt.expando],R&&(m=Nt.cache[R]))){if(m.events)for(E in m.events)Y[E]?A.event.remove(v,E):A.removeEvent(v,E,m.handle);Nt.cache[R]&&delete Nt.cache[R]}delete Ht.cache[v[Ht.expando]]}}}),A.fn.extend({text:function(u){return at(this,function(m){return m===void 0?A.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=m)})},null,u,arguments.length)},append:function(){return this.domManip(arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var m=f(this,u);m.appendChild(u)}})},prepend:function(){return this.domManip(arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var m=f(this,u);m.insertBefore(u,m.firstChild)}})},before:function(){return this.domManip(arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return this.domManip(arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},remove:function(u,m){for(var v,E=u?A.filter(u,this):this,R=0;(v=E[R])!=null;R++)!m&&v.nodeType===1&&A.cleanData(D(v)),v.parentNode&&(m&&A.contains(v.ownerDocument,v)&&w(D(v,"script")),v.parentNode.removeChild(v));return this},empty:function(){for(var u,m=0;(u=this[m])!=null;m++)u.nodeType===1&&(A.cleanData(D(u,!1)),u.textContent="");return this},clone:function(u,m){return u=u??!1,m=m??u,this.map(function(){return A.clone(this,u,m)})},html:function(u){return at(this,function(m){var v=this[0]||{},E=0,R=this.length;if(m===void 0&&v.nodeType===1)return v.innerHTML;if(typeof m=="string"&&!tt.test(m)&&!h[(De.exec(m)||["",""])[1].toLowerCase()]){m=m.replace(we,"<$1></$2>");try{for(;E<R;E++)v=this[E]||{},v.nodeType===1&&(A.cleanData(D(v,!1)),v.innerHTML=m);v=0}catch{}}v&&this.empty().append(m)},null,u,arguments.length)},replaceWith:function(){var u=arguments[0];return this.domManip(arguments,function(m){u=this.parentNode,A.cleanData(D(this)),u&&u.replaceChild(m,this)}),u&&(u.length||u.nodeType)?this:this.remove()},detach:function(u){return this.remove(u,!0)},domManip:function(u,m){u=r.apply([],u);var v,E,R,Y,ee,_e,xe=0,ze=this.length,Fe=this,bt=ze-1,vt=u[0],kt=A.isFunction(vt);if(kt||ze>1&&typeof vt=="string"&&!T.checkClone&&lt.test(vt))return this.each(function(ui){var ni=Fe.eq(ui);kt&&(u[0]=vt.call(this,ui,ni.html())),ni.domManip(u,m)});if(ze&&(v=A.buildFragment(u,this[0].ownerDocument,!1,this),E=v.firstChild,v.childNodes.length===1&&(v=E),E)){for(R=A.map(D(v,"script"),_),Y=R.length;xe<ze;xe++)ee=v,xe!==bt&&(ee=A.clone(ee,!0,!0),Y&&A.merge(R,D(ee,"script"))),m.call(this[xe],ee,xe);if(Y)for(_e=R[R.length-1].ownerDocument,A.map(R,b),xe=0;xe<Y;xe++)ee=R[xe],Kn.test(ee.type||"")&&!Nt.access(ee,"globalEval")&&A.contains(_e,ee)&&(ee.src?A._evalUrl&&A._evalUrl(ee.src):A.globalEval(ee.textContent.replace(a,"")))}return this}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,m){A.fn[u]=function(v){for(var E,R=[],Y=A(v),ee=Y.length-1,_e=0;_e<=ee;_e++)E=_e===ee?this:this.clone(!0),A(Y[_e])[m](E),o.apply(R,E.get());return this.pushStack(R)}});var B,H={};function U(u,m){var v,E=A(m.createElement(u)).appendTo(m.body),R=e.getDefaultComputedStyle&&(v=e.getDefaultComputedStyle(E[0]))?v.display:A.css(E[0],"display");return E.detach(),R}function F(u){var m=L,v=H[u];return v||(v=U(u,m),(v==="none"||!v)&&(B=(B||A("<iframe frameborder='0' width='0' height='0'/>")).appendTo(m.documentElement),m=B[0].contentDocument,m.write(),m.close(),v=U(u,m),B.detach()),H[u]=v),v}var q=/^margin/,$=new RegExp("^("+Ji+")(?!px)[a-z%]+$","i"),X=function(u){return u.ownerDocument.defaultView.opener?u.ownerDocument.defaultView.getComputedStyle(u,null):e.getComputedStyle(u,null)};function Z(u,m,v){var E,R,Y,ee,_e=u.style;return v=v||X(u),v&&(ee=v.getPropertyValue(m)||v[m]),v&&(ee===""&&!A.contains(u.ownerDocument,u)&&(ee=A.style(u,m)),$.test(ee)&&q.test(m)&&(E=_e.width,R=_e.minWidth,Y=_e.maxWidth,_e.minWidth=_e.maxWidth=_e.width=ee,ee=v.width,_e.width=E,_e.minWidth=R,_e.maxWidth=Y)),ee!==void 0?ee+"":ee}function K(u,m){return{get:function(){if(u()){delete this.get;return}return(this.get=m).apply(this,arguments)}}}(function(){var u,m,v=L.documentElement,E=L.createElement("div"),R=L.createElement("div");if(!R.style)return;R.style.backgroundClip="content-box",R.cloneNode(!0).style.backgroundClip="",T.clearCloneStyle=R.style.backgroundClip==="content-box",E.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",E.appendChild(R);function Y(){R.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",R.innerHTML="",v.appendChild(E);var ee=e.getComputedStyle(R,null);u=ee.top!=="1%",m=ee.width==="4px",v.removeChild(E)}e.getComputedStyle&&A.extend(T,{pixelPosition:function(){return Y(),u},boxSizingReliable:function(){return m==null&&Y(),m},reliableMarginRight:function(){var ee,_e=R.appendChild(L.createElement("div"));return _e.style.cssText=R.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",_e.style.marginRight=_e.style.width="0",R.style.width="1px",v.appendChild(E),ee=!parseFloat(e.getComputedStyle(_e,null).marginRight),v.removeChild(E),R.removeChild(_e),ee}})})(),A.swap=function(u,m,v,E){var R,Y,ee={};for(Y in m)ee[Y]=u.style[Y],u.style[Y]=m[Y];R=v.apply(u,E||[]);for(Y in m)u.style[Y]=ee[Y];return R};var W=/^(none|table(?!-c[ea]).+)/,O=new RegExp("^("+Ji+")(.*)$","i"),j=new RegExp("^([+-])=("+Ji+")","i"),te={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"},J=["Webkit","O","Moz","ms"];function de(u,m){if(m in u)return m;for(var v=m[0].toUpperCase()+m.slice(1),E=m,R=J.length;R--;)if(m=J[R]+v,m in u)return m;return E}function me(u,m,v){var E=O.exec(m);return E?Math.max(0,E[1]-(v||0))+(E[2]||"px"):m}function be(u,m,v,E,R){for(var Y=v===(E?"border":"content")?4:m==="width"?1:0,ee=0;Y<4;Y+=2)v==="margin"&&(ee+=A.css(u,v+bs[Y],!0,R)),E?(v==="content"&&(ee-=A.css(u,"padding"+bs[Y],!0,R)),v!=="margin"&&(ee-=A.css(u,"border"+bs[Y]+"Width",!0,R))):(ee+=A.css(u,"padding"+bs[Y],!0,R),v!=="padding"&&(ee+=A.css(u,"border"+bs[Y]+"Width",!0,R)));return ee}function Se(u,m,v){var E=!0,R=m==="width"?u.offsetWidth:u.offsetHeight,Y=X(u),ee=A.css(u,"boxSizing",!1,Y)==="border-box";if(R<=0||R==null){if(R=Z(u,m,Y),(R<0||R==null)&&(R=u.style[m]),$.test(R))return R;E=ee&&(T.boxSizingReliable()||R===u.style[m]),R=parseFloat(R)||0}return R+be(u,m,v||(ee?"border":"content"),E,Y)+"px"}function ge(u,m){for(var v,E,R,Y=[],ee=0,_e=u.length;ee<_e;ee++)E=u[ee],E.style&&(Y[ee]=Nt.get(E,"olddisplay"),v=E.style.display,m?(!Y[ee]&&v==="none"&&(E.style.display=""),E.style.display===""&&ai(E)&&(Y[ee]=Nt.access(E,"olddisplay",F(E.nodeName)))):(R=ai(E),(v!=="none"||!R)&&Nt.set(E,"olddisplay",R?v:A.css(E,"display"))));for(ee=0;ee<_e;ee++)E=u[ee],E.style&&(!m||E.style.display==="none"||E.style.display==="")&&(E.style.display=m?Y[ee]||"":"none");return u}A.extend({cssHooks:{opacity:{get:function(u,m){if(m){var v=Z(u,"opacity");return v===""?"1":v}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(u,m,v,E){if(!(!u||u.nodeType===3||u.nodeType===8||!u.style)){var R,Y,ee,_e=A.camelCase(m),xe=u.style;if(m=A.cssProps[_e]||(A.cssProps[_e]=de(xe,_e)),ee=A.cssHooks[m]||A.cssHooks[_e],v!==void 0){if(Y=typeof v,Y==="string"&&(R=j.exec(v))&&(v=(R[1]+1)*R[2]+parseFloat(A.css(u,m)),Y="number"),v==null||v!==v)return;Y==="number"&&!A.cssNumber[_e]&&(v+="px"),!T.clearCloneStyle&&v===""&&m.indexOf("background")===0&&(xe[m]="inherit"),(!ee||!("set"in ee)||(v=ee.set(u,v,E))!==void 0)&&(xe[m]=v)}else return ee&&"get"in ee&&(R=ee.get(u,!1,E))!==void 0?R:xe[m]}},css:function(u,m,v,E){var R,Y,ee,_e=A.camelCase(m);return m=A.cssProps[_e]||(A.cssProps[_e]=de(u.style,_e)),ee=A.cssHooks[m]||A.cssHooks[_e],ee&&"get"in ee&&(R=ee.get(u,!0,v)),R===void 0&&(R=Z(u,m,E)),R==="normal"&&m in se&&(R=se[m]),v===""||v?(Y=parseFloat(R),v===!0||A.isNumeric(Y)?Y||0:R):R}}),A.each(["height","width"],function(u,m){A.cssHooks[m]={get:function(v,E,R){if(E)return W.test(A.css(v,"display"))&&v.offsetWidth===0?A.swap(v,te,function(){return Se(v,m,R)}):Se(v,m,R)},set:function(v,E,R){var Y=R&&X(v);return me(v,E,R?be(v,m,R,A.css(v,"boxSizing",!1,Y)==="border-box",Y):0)}}}),A.cssHooks.marginRight=K(T.reliableMarginRight,function(u,m){if(m)return A.swap(u,{display:"inline-block"},Z,[u,"marginRight"])}),A.each({margin:"",padding:"",border:"Width"},function(u,m){A.cssHooks[u+m]={expand:function(v){for(var E=0,R={},Y=typeof v=="string"?v.split(" "):[v];E<4;E++)R[u+bs[E]+m]=Y[E]||Y[E-2]||Y[0];return R}},q.test(u)||(A.cssHooks[u+m].set=me)}),A.fn.extend({css:function(u,m){return at(this,function(v,E,R){var Y,ee,_e={},xe=0;if(A.isArray(E)){for(Y=X(v),ee=E.length;xe<ee;xe++)_e[E[xe]]=A.css(v,E[xe],!1,Y);return _e}return R!==void 0?A.style(v,E,R):A.css(v,E)},u,m,arguments.length>1)},show:function(){return ge(this,!0)},hide:function(){return ge(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){ai(this)?A(this).show():A(this).hide()})}});function ve(u,m,v,E,R){return new ve.prototype.init(u,m,v,E,R)}A.Tween=ve,ve.prototype={constructor:ve,init:function(u,m,v,E,R,Y){this.elem=u,this.prop=v,this.easing=R||"swing",this.options=m,this.start=this.now=this.cur(),this.end=E,this.unit=Y||(A.cssNumber[v]?"":"px")},cur:function(){var u=ve.propHooks[this.prop];return u&&u.get?u.get(this):ve.propHooks._default.get(this)},run:function(u){var m,v=ve.propHooks[this.prop];return this.options.duration?this.pos=m=A.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=m=u,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),v&&v.set?v.set(this):ve.propHooks._default.set(this),this}},ve.prototype.init.prototype=ve.prototype,ve.propHooks={_default:{get:function(u){var m;return u.elem[u.prop]!=null&&(!u.elem.style||u.elem.style[u.prop]==null)?u.elem[u.prop]:(m=A.css(u.elem,u.prop,""),!m||m==="auto"?0:m)},set:function(u){A.fx.step[u.prop]?A.fx.step[u.prop](u):u.elem.style&&(u.elem.style[A.cssProps[u.prop]]!=null||A.cssHooks[u.prop])?A.style(u.elem,u.prop,u.now+u.unit):u.elem[u.prop]=u.now}}},ve.propHooks.scrollTop=ve.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},A.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2}},A.fx=ve.prototype.init,A.fx.step={};var Ce,Be,Me=/^(?:toggle|show|hide)$/,We=new RegExp("^(?:([+-])=|)("+Ji+")([a-z%]*)$","i"),dt=/queueHooks$/,wt=[It],Dt={"*":[function(u,m){var v=this.createTween(u,m),E=v.cur(),R=We.exec(m),Y=R&&R[3]||(A.cssNumber[u]?"":"px"),ee=(A.cssNumber[u]||Y!=="px"&&+E)&&We.exec(A.css(v.elem,u)),_e=1,xe=20;if(ee&&ee[3]!==Y){Y=Y||ee[3],R=R||[],ee=+E||1;do _e=_e||".5",ee=ee/_e,A.style(v.elem,u,ee+Y);while(_e!==(_e=v.cur()/E)&&_e!==1&&--xe)}return R&&(ee=v.start=+ee||+E||0,v.unit=Y,v.end=R[1]?ee+(R[1]+1)*R[2]:+R[2]),v}]};function Mt(){return setTimeout(function(){Ce=void 0}),Ce=A.now()}function et(u,m){var v,E=0,R={height:u};for(m=m?1:0;E<4;E+=2-m)v=bs[E],R["margin"+v]=R["padding"+v]=u;return m&&(R.opacity=R.width=u),R}function st(u,m,v){for(var E,R=(Dt[m]||[]).concat(Dt["*"]),Y=0,ee=R.length;Y<ee;Y++)if(E=R[Y].call(v,m,u))return E}function It(u,m,v){var E,R,Y,ee,_e,xe,ze,Fe,bt=this,vt={},kt=u.style,ui=u.nodeType&&ai(u),ni=Nt.get(u,"fxshow");v.queue||(_e=A._queueHooks(u,"fx"),_e.unqueued==null&&(_e.unqueued=0,xe=_e.empty.fire,_e.empty.fire=function(){_e.unqueued||xe()}),_e.unqueued++,bt.always(function(){bt.always(function(){_e.unqueued--,A.queue(u,"fx").length||_e.empty.fire()})})),u.nodeType===1&&("height"in m||"width"in m)&&(v.overflow=[kt.overflow,kt.overflowX,kt.overflowY],ze=A.css(u,"display"),Fe=ze==="none"?Nt.get(u,"olddisplay")||F(u.nodeName):ze,Fe==="inline"&&A.css(u,"float")==="none"&&(kt.display="inline-block")),v.overflow&&(kt.overflow="hidden",bt.always(function(){kt.overflow=v.overflow[0],kt.overflowX=v.overflow[1],kt.overflowY=v.overflow[2]}));for(E in m)if(R=m[E],Me.exec(R)){if(delete m[E],Y=Y||R==="toggle",R===(ui?"hide":"show"))if(R==="show"&&ni&&ni[E]!==void 0)ui=!0;else continue;vt[E]=ni&&ni[E]||A.style(u,E)}else ze=void 0;if(A.isEmptyObject(vt))(ze==="none"?F(u.nodeName):ze)==="inline"&&(kt.display=ze);else{ni?"hidden"in ni&&(ui=ni.hidden):ni=Nt.access(u,"fxshow",{}),Y&&(ni.hidden=!ui),ui?A(u).show():bt.done(function(){A(u).hide()}),bt.done(function(){var Di;Nt.remove(u,"fxshow");for(Di in vt)A.style(u,Di,vt[Di])});for(E in vt)ee=st(ui?ni[E]:0,E,bt),E in ni||(ni[E]=ee.start,ui&&(ee.end=ee.start,ee.start=E==="width"||E==="height"?1:0))}}function qt(u,m){var v,E,R,Y,ee;for(v in u)if(E=A.camelCase(v),R=m[E],Y=u[v],A.isArray(Y)&&(R=Y[1],Y=u[v]=Y[0]),v!==E&&(u[E]=Y,delete u[v]),ee=A.cssHooks[E],ee&&"expand"in ee){Y=ee.expand(Y),delete u[E];for(v in Y)v in u||(u[v]=Y[v],m[v]=R)}else m[E]=R}function Ot(u,m,v){var E,R,Y=0,ee=wt.length,_e=A.Deferred().always(function(){delete xe.elem}),xe=function(){if(R)return!1;for(var bt=Ce||Mt(),vt=Math.max(0,ze.startTime+ze.duration-bt),kt=vt/ze.duration||0,ui=1-kt,ni=0,Di=ze.tweens.length;ni<Di;ni++)ze.tweens[ni].run(ui);return _e.notifyWith(u,[ze,ui,vt]),ui<1&&Di?vt:(_e.resolveWith(u,[ze]),!1)},ze=_e.promise({elem:u,props:A.extend({},m),opts:A.extend(!0,{specialEasing:{}},v),originalProperties:m,originalOptions:v,startTime:Ce||Mt(),duration:v.duration,tweens:[],createTween:function(bt,vt){var kt=A.Tween(u,ze.opts,bt,vt,ze.opts.specialEasing[bt]||ze.opts.easing);return ze.tweens.push(kt),kt},stop:function(bt){var vt=0,kt=bt?ze.tweens.length:0;if(R)return this;for(R=!0;vt<kt;vt++)ze.tweens[vt].run(1);return bt?_e.resolveWith(u,[ze,bt]):_e.rejectWith(u,[ze,bt]),this}}),Fe=ze.props;for(qt(Fe,ze.opts.specialEasing);Y<ee;Y++)if(E=wt[Y].call(ze,u,Fe,ze.opts),E)return E;return A.map(Fe,st,ze),A.isFunction(ze.opts.start)&&ze.opts.start.call(u,ze),A.fx.timer(A.extend(xe,{elem:u,anim:ze,queue:ze.opts.queue})),ze.progress(ze.opts.progress).done(ze.opts.done,ze.opts.complete).fail(ze.opts.fail).always(ze.opts.always)}A.Animation=A.extend(Ot,{tweener:function(u,m){A.isFunction(u)?(m=u,u=["*"]):u=u.split(" ");for(var v,E=0,R=u.length;E<R;E++)v=u[E],Dt[v]=Dt[v]||[],Dt[v].unshift(m)},prefilter:function(u,m){m?wt.unshift(u):wt.push(u)}}),A.speed=function(u,m,v){var E=u&&typeof u=="object"?A.extend({},u):{complete:v||!v&&m||A.isFunction(u)&&u,duration:u,easing:v&&m||m&&!A.isFunction(m)&&m};return E.duration=A.fx.off?0:typeof E.duration=="number"?E.duration:E.duration in A.fx.speeds?A.fx.speeds[E.duration]:A.fx.speeds._default,(E.queue==null||E.queue===!0)&&(E.queue="fx"),E.old=E.complete,E.complete=function(){A.isFunction(E.old)&&E.old.call(this),E.queue&&A.dequeue(this,E.queue)},E},A.fn.extend({fadeTo:function(u,m,v,E){return this.filter(ai).css("opacity",0).show().end().animate({opacity:m},u,v,E)},animate:function(u,m,v,E){var R=A.isEmptyObject(u),Y=A.speed(m,v,E),ee=function(){var _e=Ot(this,A.extend({},u),Y);(R||Nt.get(this,"finish"))&&_e.stop(!0)};return ee.finish=ee,R||Y.queue===!1?this.each(ee):this.queue(Y.queue,ee)},stop:function(u,m,v){var E=function(R){var Y=R.stop;delete R.stop,Y(v)};return typeof u!="string"&&(v=m,m=u,u=void 0),m&&u!==!1&&this.queue(u||"fx",[]),this.each(function(){var R=!0,Y=u!=null&&u+"queueHooks",ee=A.timers,_e=Nt.get(this);if(Y)_e[Y]&&_e[Y].stop&&E(_e[Y]);else for(Y in _e)_e[Y]&&_e[Y].stop&&dt.test(Y)&&E(_e[Y]);for(Y=ee.length;Y--;)ee[Y].elem===this&&(u==null||ee[Y].queue===u)&&(ee[Y].anim.stop(v),R=!1,ee.splice(Y,1));(R||!v)&&A.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var m,v=Nt.get(this),E=v[u+"queue"],R=v[u+"queueHooks"],Y=A.timers,ee=E?E.length:0;for(v.finish=!0,A.queue(this,u,[]),R&&R.stop&&R.stop.call(this,!0),m=Y.length;m--;)Y[m].elem===this&&Y[m].queue===u&&(Y[m].anim.stop(!0),Y.splice(m,1));for(m=0;m<ee;m++)E[m]&&E[m].finish&&E[m].finish.call(this);delete v.finish})}}),A.each(["toggle","show","hide"],function(u,m){var v=A.fn[m];A.fn[m]=function(E,R,Y){return E==null||typeof E=="boolean"?v.apply(this,arguments):this.animate(et(m,!0),E,R,Y)}}),A.each({slideDown:et("show"),slideUp:et("hide"),slideToggle:et("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,m){A.fn[u]=function(v,E,R){return this.animate(m,v,E,R)}}),A.timers=[],A.fx.tick=function(){var u,m=0,v=A.timers;for(Ce=A.now();m<v.length;m++)u=v[m],!u()&&v[m]===u&&v.splice(m--,1);v.length||A.fx.stop(),Ce=void 0},A.fx.timer=function(u){A.timers.push(u),u()?A.fx.start():A.timers.pop()},A.fx.interval=13,A.fx.start=function(){Be||(Be=setInterval(A.fx.tick,A.fx.interval))},A.fx.stop=function(){clearInterval(Be),Be=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(u,m){return u=A.fx&&A.fx.speeds[u]||u,m=m||"fx",this.queue(m,function(v,E){var R=setTimeout(v,u);E.stop=function(){clearTimeout(R)}})},function(){var u=L.createElement("input"),m=L.createElement("select"),v=m.appendChild(L.createElement("option"));u.type="checkbox",T.checkOn=u.value!=="",T.optSelected=v.selected,m.disabled=!0,T.optDisabled=!v.disabled,u=L.createElement("input"),u.value="t",u.type="radio",T.radioValue=u.value==="t"}();var Qt,$t,si=A.expr.attrHandle;A.fn.extend({attr:function(u,m){return at(this,A.attr,u,m,arguments.length>1)},removeAttr:function(u){return this.each(function(){A.removeAttr(this,u)})}}),A.extend({attr:function(u,m,v){var E,R,Y=u.nodeType;if(!(!u||Y===3||Y===8||Y===2)){if(typeof u.getAttribute===Pt)return A.prop(u,m,v);if((Y!==1||!A.isXMLDoc(u))&&(m=m.toLowerCase(),E=A.attrHooks[m]||(A.expr.match.bool.test(m)?$t:Qt)),v!==void 0)if(v===null)A.removeAttr(u,m);else return E&&"set"in E&&(R=E.set(u,v,m))!==void 0?R:(u.setAttribute(m,v+""),v);else return E&&"get"in E&&(R=E.get(u,m))!==null?R:(R=A.find.attr(u,m),R??void 0)}},removeAttr:function(u,m){var v,E,R=0,Y=m&&m.match(Ct);if(Y&&u.nodeType===1)for(;v=Y[R++];)E=A.propFix[v]||v,A.expr.match.bool.test(v)&&(u[E]=!1),u.removeAttribute(v)},attrHooks:{type:{set:function(u,m){if(!T.radioValue&&m==="radio"&&A.nodeName(u,"input")){var v=u.value;return u.setAttribute("type",m),v&&(u.value=v),m}}}}}),$t={set:function(u,m,v){return m===!1?A.removeAttr(u,v):u.setAttribute(v,v),v}},A.each(A.expr.match.bool.source.match(/\w+/g),function(u,m){var v=si[m]||A.find.attr;si[m]=function(E,R,Y){var ee,_e;return Y||(_e=si[R],si[R]=ee,ee=v(E,R,Y)!=null?R.toLowerCase():null,si[R]=_e),ee}});var gi=/^(?:input|select|textarea|button)$/i;A.fn.extend({prop:function(u,m){return at(this,A.prop,u,m,arguments.length>1)},removeProp:function(u){return this.each(function(){delete this[A.propFix[u]||u]})}}),A.extend({propFix:{for:"htmlFor",class:"className"},prop:function(u,m,v){var E,R,Y,ee=u.nodeType;if(!(!u||ee===3||ee===8||ee===2))return Y=ee!==1||!A.isXMLDoc(u),Y&&(m=A.propFix[m]||m,R=A.propHooks[m]),v!==void 0?R&&"set"in R&&(E=R.set(u,v,m))!==void 0?E:u[m]=v:R&&"get"in R&&(E=R.get(u,m))!==null?E:u[m]},propHooks:{tabIndex:{get:function(u){return u.hasAttribute("tabindex")||gi.test(u.nodeName)||u.href?u.tabIndex:-1}}}}),T.optSelected||(A.propHooks.selected={get:function(u){var m=u.parentNode;return m&&m.parentNode&&m.parentNode.selectedIndex,null}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){A.propFix[this.toLowerCase()]=this});var oi=/[\t\r\n\f]/g;A.fn.extend({addClass:function(u){var m,v,E,R,Y,ee,_e=typeof u=="string"&&u,xe=0,ze=this.length;if(A.isFunction(u))return this.each(function(Fe){A(this).addClass(u.call(this,Fe,this.className))});if(_e){for(m=(u||"").match(Ct)||[];xe<ze;xe++)if(v=this[xe],E=v.nodeType===1&&(v.className?(" "+v.className+" ").replace(oi," "):" "),E){for(Y=0;R=m[Y++];)E.indexOf(" "+R+" ")<0&&(E+=R+" ");ee=A.trim(E),v.className!==ee&&(v.className=ee)}}return this},removeClass:function(u){var m,v,E,R,Y,ee,_e=arguments.length===0||typeof u=="string"&&u,xe=0,ze=this.length;if(A.isFunction(u))return this.each(function(Fe){A(this).removeClass(u.call(this,Fe,this.className))});if(_e){for(m=(u||"").match(Ct)||[];xe<ze;xe++)if(v=this[xe],E=v.nodeType===1&&(v.className?(" "+v.className+" ").replace(oi," "):""),E){for(Y=0;R=m[Y++];)for(;E.indexOf(" "+R+" ")>=0;)E=E.replace(" "+R+" "," ");ee=u?A.trim(E):"",v.className!==ee&&(v.className=ee)}}return this},toggleClass:function(u,m){var v=typeof u;return typeof m=="boolean"&&v==="string"?m?this.addClass(u):this.removeClass(u):A.isFunction(u)?this.each(function(E){A(this).toggleClass(u.call(this,E,this.className,m),m)}):this.each(function(){if(v==="string")for(var E,R=0,Y=A(this),ee=u.match(Ct)||[];E=ee[R++];)Y.hasClass(E)?Y.removeClass(E):Y.addClass(E);else(v===Pt||v==="boolean")&&(this.className&&Nt.set(this,"__className__",this.className),this.className=this.className||u===!1?"":Nt.get(this,"__className__")||"")})},hasClass:function(u){for(var m=" "+u+" ",v=0,E=this.length;v<E;v++)if(this[v].nodeType===1&&(" "+this[v].className+" ").replace(oi," ").indexOf(m)>=0)return!0;return!1}});var Hs=/\r/g;A.fn.extend({val:function(u){var m,v,E,R=this[0];return arguments.length?(E=A.isFunction(u),this.each(function(Y){var ee;this.nodeType===1&&(E?ee=u.call(this,Y,A(this).val()):ee=u,ee==null?ee="":typeof ee=="number"?ee+="":A.isArray(ee)&&(ee=A.map(ee,function(_e){return _e==null?"":_e+""})),m=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()],(!m||!("set"in m)||m.set(this,ee,"value")===void 0)&&(this.value=ee))})):R?(m=A.valHooks[R.type]||A.valHooks[R.nodeName.toLowerCase()],m&&"get"in m&&(v=m.get(R,"value"))!==void 0?v:(v=R.value,typeof v=="string"?v.replace(Hs,""):v??"")):void 0}}),A.extend({valHooks:{option:{get:function(u){var m=A.find.attr(u,"value");return m??A.trim(A.text(u))}},select:{get:function(u){for(var m,v,E=u.options,R=u.selectedIndex,Y=u.type==="select-one"||R<0,ee=Y?null:[],_e=Y?R+1:E.length,xe=R<0?_e:Y?R:0;xe<_e;xe++)if(v=E[xe],(v.selected||xe===R)&&(T.optDisabled?!v.disabled:v.getAttribute("disabled")===null)&&(!v.parentNode.disabled||!A.nodeName(v.parentNode,"optgroup"))){if(m=A(v).val(),Y)return m;ee.push(m)}return ee},set:function(u,m){for(var v,E,R=u.options,Y=A.makeArray(m),ee=R.length;ee--;)E=R[ee],(E.selected=A.inArray(E.value,Y)>=0)&&(v=!0);return v||(u.selectedIndex=-1),Y}}}}),A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(u,m){if(A.isArray(m))return u.checked=A.inArray(A(u).val(),m)>=0}},T.checkOn||(A.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})}),A.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(u,m){A.fn[m]=function(v,E){return arguments.length>0?this.on(m,null,v,E):this.trigger(m)}}),A.fn.extend({hover:function(u,m){return this.mouseenter(u).mouseleave(m||u)},bind:function(u,m,v){return this.on(u,null,m,v)},unbind:function(u,m){return this.off(u,null,m)},delegate:function(u,m,v,E){return this.on(m,u,v,E)},undelegate:function(u,m,v){return arguments.length===1?this.off(u,"**"):this.off(m,u||"**",v)}});var xs=A.now(),Gs=/\?/;A.parseJSON=function(u){return JSON.parse(u+"")},A.parseXML=function(u){var m,v;if(!u||typeof u!="string")return null;try{v=new DOMParser,m=v.parseFromString(u,"text/xml")}catch{m=void 0}return(!m||m.getElementsByTagName("parsererror").length)&&A.error("Invalid XML: "+u),m};var xt=/#.*$/,Ui=/([?&])_=[^&]*/,rs=/^(.*?):[ \t]*([^\r\n]*)$/mg,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Js=/^(?:GET|HEAD)$/,Bn=/^\/\//,yr=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Un={},bn={},Dn="*/".concat("*"),ln=e.location.href,Cs=yr.exec(ln.toLowerCase())||[];function Ps(u){return function(m,v){typeof m!="string"&&(v=m,m="*");var E,R=0,Y=m.toLowerCase().match(Ct)||[];if(A.isFunction(v))for(;E=Y[R++];)E[0]==="+"?(E=E.slice(1)||"*",(u[E]=u[E]||[]).unshift(v)):(u[E]=u[E]||[]).push(v)}}function Ua(u,m,v,E){var R={},Y=u===bn;function ee(_e){var xe;return R[_e]=!0,A.each(u[_e]||[],function(ze,Fe){var bt=Fe(m,v,E);if(typeof bt=="string"&&!Y&&!R[bt])return m.dataTypes.unshift(bt),ee(bt),!1;if(Y)return!(xe=bt)}),xe}return ee(m.dataTypes[0])||!R["*"]&&ee("*")}function Va(u,m){var v,E,R=A.ajaxSettings.flatOptions||{};for(v in m)m[v]!==void 0&&((R[v]?u:E||(E={}))[v]=m[v]);return E&&A.extend(!0,u,E),u}function ko(u,m,v){for(var E,R,Y,ee,_e=u.contents,xe=u.dataTypes;xe[0]==="*";)xe.shift(),E===void 0&&(E=u.mimeType||m.getResponseHeader("Content-Type"));if(E){for(R in _e)if(_e[R]&&_e[R].test(E)){xe.unshift(R);break}}if(xe[0]in v)Y=xe[0];else{for(R in v){if(!xe[0]||u.converters[R+" "+xe[0]]){Y=R;break}ee||(ee=R)}Y=Y||ee}if(Y)return Y!==xe[0]&&xe.unshift(Y),v[Y]}function io(u,m,v,E){var R,Y,ee,_e,xe,ze={},Fe=u.dataTypes.slice();if(Fe[1])for(ee in u.converters)ze[ee.toLowerCase()]=u.converters[ee];for(Y=Fe.shift();Y;)if(u.responseFields[Y]&&(v[u.responseFields[Y]]=m),!xe&&E&&u.dataFilter&&(m=u.dataFilter(m,u.dataType)),xe=Y,Y=Fe.shift(),Y){if(Y==="*")Y=xe;else if(xe!=="*"&&xe!==Y){if(ee=ze[xe+" "+Y]||ze["* "+Y],!ee){for(R in ze)if(_e=R.split(" "),_e[1]===Y&&(ee=ze[xe+" "+_e[0]]||ze["* "+_e[0]],ee)){ee===!0?ee=ze[R]:ze[R]!==!0&&(Y=_e[0],Fe.unshift(_e[1]));break}}if(ee!==!0)if(ee&&u.throws)m=ee(m);else try{m=ee(m)}catch(bt){return{state:"parsererror",error:ee?bt:"No conversion from "+xe+" to "+Y}}}}return{state:"success",data:m}}A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ln,type:"GET",isLocal:Nn.test(Cs[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":A.parseJSON,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,m){return m?Va(Va(u,A.ajaxSettings),m):Va(A.ajaxSettings,u)},ajaxPrefilter:Ps(Un),ajaxTransport:Ps(bn),ajax:function(u,m){typeof u=="object"&&(m=u,u=void 0),m=m||{};var v,E,R,Y,ee,_e,xe,ze,Fe=A.ajaxSetup({},m),bt=Fe.context||Fe,vt=Fe.context&&(bt.nodeType||bt.jquery)?A(bt):A.event,kt=A.Deferred(),ui=A.Callbacks("once memory"),ni=Fe.statusCode||{},Di={},Jn={},un=0,Rs="canceled",Ut={readyState:0,getResponseHeader:function(Ti){var Ms;if(un===2){if(!Y)for(Y={};Ms=rs.exec(R);)Y[Ms[1].toLowerCase()]=Ms[2];Ms=Y[Ti.toLowerCase()]}return Ms??null},getAllResponseHeaders:function(){return un===2?R:null},setRequestHeader:function(Ti,Ms){var cn=Ti.toLowerCase();return un||(Ti=Jn[cn]=Jn[cn]||Ti,Di[Ti]=Ms),this},overrideMimeType:function(Ti){return un||(Fe.mimeType=Ti),this},statusCode:function(Ti){var Ms;if(Ti)if(un<2)for(Ms in Ti)ni[Ms]=[ni[Ms],Ti[Ms]];else Ut.always(Ti[Ut.status]);return this},abort:function(Ti){var Ms=Ti||Rs;return v&&v.abort(Ms),Ks(0,Ms),this}};if(kt.promise(Ut).complete=ui.add,Ut.success=Ut.done,Ut.error=Ut.fail,Fe.url=((u||Fe.url||ln)+"").replace(xt,"").replace(Bn,Cs[1]+"//"),Fe.type=m.method||m.type||Fe.method||Fe.type,Fe.dataTypes=A.trim(Fe.dataType||"*").toLowerCase().match(Ct)||[""],Fe.crossDomain==null&&(_e=yr.exec(Fe.url.toLowerCase()),Fe.crossDomain=!!(_e&&(_e[1]!==Cs[1]||_e[2]!==Cs[2]||(_e[3]||(_e[1]==="http:"?"80":"443"))!==(Cs[3]||(Cs[1]==="http:"?"80":"443"))))),Fe.data&&Fe.processData&&typeof Fe.data!="string"&&(Fe.data=A.param(Fe.data,Fe.traditional)),Ua(Un,Fe,m,Ut),un===2)return Ut;xe=A.event&&Fe.global,xe&&A.active++===0&&A.event.trigger("ajaxStart"),Fe.type=Fe.type.toUpperCase(),Fe.hasContent=!Js.test(Fe.type),E=Fe.url,Fe.hasContent||(Fe.data&&(E=Fe.url+=(Gs.test(E)?"&":"?")+Fe.data,delete Fe.data),Fe.cache===!1&&(Fe.url=Ui.test(E)?E.replace(Ui,"$1_="+xs++):E+(Gs.test(E)?"&":"?")+"_="+xs++)),Fe.ifModified&&(A.lastModified[E]&&Ut.setRequestHeader("If-Modified-Since",A.lastModified[E]),A.etag[E]&&Ut.setRequestHeader("If-None-Match",A.etag[E])),(Fe.data&&Fe.hasContent&&Fe.contentType!==!1||m.contentType)&&Ut.setRequestHeader("Content-Type",Fe.contentType),Ut.setRequestHeader("Accept",Fe.dataTypes[0]&&Fe.accepts[Fe.dataTypes[0]]?Fe.accepts[Fe.dataTypes[0]]+(Fe.dataTypes[0]!=="*"?", "+Dn+"; q=0.01":""):Fe.accepts["*"]);for(ze in Fe.headers)Ut.setRequestHeader(ze,Fe.headers[ze]);if(Fe.beforeSend&&(Fe.beforeSend.call(bt,Ut,Fe)===!1||un===2))return Ut.abort();Rs="abort";for(ze in{success:1,error:1,complete:1})Ut[ze](Fe[ze]);if(v=Ua(bn,Fe,m,Ut),!v)Ks(-1,"No Transport");else{Ut.readyState=1,xe&&vt.trigger("ajaxSend",[Ut,Fe]),Fe.async&&Fe.timeout>0&&(ee=setTimeout(function(){Ut.abort("timeout")},Fe.timeout));try{un=1,v.send(Di,Ks)}catch(Ti){if(un<2)Ks(-1,Ti);else throw Ti}}function Ks(Ti,Ms,cn,Sa){var Mn,xr,Ur,Yn,On,xi=Ms;un!==2&&(un=2,ee&&clearTimeout(ee),v=void 0,R=Sa||"",Ut.readyState=Ti>0?4:0,Mn=Ti>=200&&Ti<300||Ti===304,cn&&(Yn=ko(Fe,Ut,cn)),Yn=io(Fe,Yn,Ut,Mn),Mn?(Fe.ifModified&&(On=Ut.getResponseHeader("Last-Modified"),On&&(A.lastModified[E]=On),On=Ut.getResponseHeader("etag"),On&&(A.etag[E]=On)),Ti===204||Fe.type==="HEAD"?xi="nocontent":Ti===304?xi="notmodified":(xi=Yn.state,xr=Yn.data,Ur=Yn.error,Mn=!Ur)):(Ur=xi,(Ti||!xi)&&(xi="error",Ti<0&&(Ti=0))),Ut.status=Ti,Ut.statusText=(Ms||xi)+"",Mn?kt.resolveWith(bt,[xr,xi,Ut]):kt.rejectWith(bt,[Ut,xi,Ur]),Ut.statusCode(ni),ni=void 0,xe&&vt.trigger(Mn?"ajaxSuccess":"ajaxError",[Ut,Fe,Mn?xr:Ur]),ui.fireWith(bt,[Ut,xi]),xe&&(vt.trigger("ajaxComplete",[Ut,Fe]),--A.active||A.event.trigger("ajaxStop")))}return Ut},getJSON:function(u,m,v){return A.get(u,m,v,"json")},getScript:function(u,m){return A.get(u,void 0,m,"script")}}),A.each(["get","post"],function(u,m){A[m]=function(v,E,R,Y){return A.isFunction(E)&&(Y=Y||R,R=E,E=void 0),A.ajax({url:v,type:m,dataType:Y,data:E,success:R})}}),A._evalUrl=function(u){return A.ajax({url:u,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},A.fn.extend({wrapAll:function(u){var m;return A.isFunction(u)?this.each(function(v){A(this).wrapAll(u.call(this,v))}):(this[0]&&(m=A(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var v=this;v.firstElementChild;)v=v.firstElementChild;return v}).append(this)),this)},wrapInner:function(u){return A.isFunction(u)?this.each(function(m){A(this).wrapInner(u.call(this,m))}):this.each(function(){var m=A(this),v=m.contents();v.length?v.wrapAll(u):m.append(u)})},wrap:function(u){var m=A.isFunction(u);return this.each(function(v){A(this).wrapAll(m?u.call(this,v):u)})},unwrap:function(){return this.parent().each(function(){A.nodeName(this,"body")||A(this).replaceWith(this.childNodes)}).end()}}),A.expr.filters.hidden=function(u){return u.offsetWidth<=0&&u.offsetHeight<=0},A.expr.filters.visible=function(u){return!A.expr.filters.hidden(u)};var nl=/%20/g,Lo=/\[\]$/,_r=/\r?\n/g,wa=/^(?:submit|button|image|reset|file)$/i,Ar=/^(?:input|select|textarea|keygen)/i;function Kr(u,m,v,E){var R;if(A.isArray(m))A.each(m,function(Y,ee){v||Lo.test(u)?E(u,ee):Kr(u+"["+(typeof ee=="object"?Y:"")+"]",ee,v,E)});else if(!v&&A.type(m)==="object")for(R in m)Kr(u+"["+R+"]",m[R],v,E);else E(u,m)}A.param=function(u,m){var v,E=[],R=function(Y,ee){ee=A.isFunction(ee)?ee():ee??"",E[E.length]=encodeURIComponent(Y)+"="+encodeURIComponent(ee)};if(m===void 0&&(m=A.ajaxSettings&&A.ajaxSettings.traditional),A.isArray(u)||u.jquery&&!A.isPlainObject(u))A.each(u,function(){R(this.name,this.value)});else for(v in u)Kr(v,u[v],m,R);return E.join("&").replace(nl,"+")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=A.prop(this,"elements");return u?A.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!A(this).is(":disabled")&&Ar.test(this.nodeName)&&!wa.test(u)&&(this.checked||!Ei.test(u))}).map(function(u,m){var v=A(this).val();return v==null?null:A.isArray(v)?A.map(v,function(E){return{name:m.name,value:E.replace(_r,`\r
`)}}):{name:m.name,value:v.replace(_r,`\r
`)}}).get()}}),A.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch{}};var br=0,di={},ar={0:200,1223:204},hn=A.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var u in di)di[u]()}),T.cors=!!hn&&"withCredentials"in hn,T.ajax=hn=!!hn,A.ajaxTransport(function(u){var m;if(T.cors||hn&&!u.crossDomain)return{send:function(v,E){var R,Y=u.xhr(),ee=++br;if(Y.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(R in u.xhrFields)Y[R]=u.xhrFields[R];u.mimeType&&Y.overrideMimeType&&Y.overrideMimeType(u.mimeType),!u.crossDomain&&!v["X-Requested-With"]&&(v["X-Requested-With"]="XMLHttpRequest");for(R in v)Y.setRequestHeader(R,v[R]);m=function(_e){return function(){m&&(delete di[ee],m=Y.onload=Y.onerror=null,_e==="abort"?Y.abort():_e==="error"?E(Y.status,Y.statusText):E(ar[Y.status]||Y.status,Y.statusText,typeof Y.responseText=="string"?{text:Y.responseText}:void 0,Y.getAllResponseHeaders()))}},Y.onload=m(),Y.onerror=m("error"),m=di[ee]=m("abort");try{Y.send(u.hasContent&&u.data||null)}catch(_e){if(m)throw _e}},abort:function(){m&&m()}}}),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(u){return A.globalEval(u),u}}}),A.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),A.ajaxTransport("script",function(u){if(u.crossDomain){var m,v;return{send:function(E,R){m=A("<script>").prop({async:!0,charset:u.scriptCharset,src:u.url}).on("load error",v=function(Y){m.remove(),v=null,Y&&R(Y.type==="error"?404:200,Y.type)}),L.head.appendChild(m[0])},abort:function(){v&&v()}}}});var Zn=[],Rn=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=Zn.pop()||A.expando+"_"+xs++;return this[u]=!0,u}}),A.ajaxPrefilter("json jsonp",function(u,m,v){var E,R,Y,ee=u.jsonp!==!1&&(Rn.test(u.url)?"url":typeof u.data=="string"&&!(u.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rn.test(u.data)&&"data");if(ee||u.dataTypes[0]==="jsonp")return E=u.jsonpCallback=A.isFunction(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,ee?u[ee]=u[ee].replace(Rn,"$1"+E):u.jsonp!==!1&&(u.url+=(Gs.test(u.url)?"&":"?")+u.jsonp+"="+E),u.converters["script json"]=function(){return Y||A.error(E+" was not called"),Y[0]},u.dataTypes[0]="json",R=e[E],e[E]=function(){Y=arguments},v.always(function(){e[E]=R,u[E]&&(u.jsonpCallback=m.jsonpCallback,Zn.push(E)),Y&&A.isFunction(R)&&R(Y[0]),Y=R=void 0}),"script"}),A.parseHTML=function(u,m,v){if(!u||typeof u!="string")return null;typeof m=="boolean"&&(v=m,m=!1),m=m||L;var E=N.exec(u),R=!v&&[];return E?[m.createElement(E[1])]:(E=A.buildFragment([u],m,R),R&&R.length&&A(R).remove(),A.merge([],E.childNodes))};var la=A.fn.load;A.fn.load=function(u,m,v){if(typeof u!="string"&&la)return la.apply(this,arguments);var E,R,Y,ee=this,_e=u.indexOf(" ");return _e>=0&&(E=A.trim(u.slice(_e)),u=u.slice(0,_e)),A.isFunction(m)?(v=m,m=void 0):m&&typeof m=="object"&&(R="POST"),ee.length>0&&A.ajax({url:u,type:R,dataType:"html",data:m}).done(function(xe){Y=arguments,ee.html(E?A("<div>").append(A.parseHTML(xe)).find(E):xe)}).complete(v&&function(xe,ze){ee.each(v,Y||[xe.responseText,ze,xe])}),this},A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,m){A.fn[m]=function(v){return this.on(m,v)}}),A.expr.filters.animated=function(u){return A.grep(A.timers,function(m){return u===m.elem}).length};var so=e.document.documentElement;function no(u){return A.isWindow(u)?u:u.nodeType===9&&u.defaultView}A.offset={setOffset:function(u,m,v){var E,R,Y,ee,_e,xe,ze,Fe=A.css(u,"position"),bt=A(u),vt={};Fe==="static"&&(u.style.position="relative"),_e=bt.offset(),Y=A.css(u,"top"),xe=A.css(u,"left"),ze=(Fe==="absolute"||Fe==="fixed")&&(Y+xe).indexOf("auto")>-1,ze?(E=bt.position(),ee=E.top,R=E.left):(ee=parseFloat(Y)||0,R=parseFloat(xe)||0),A.isFunction(m)&&(m=m.call(u,v,_e)),m.top!=null&&(vt.top=m.top-_e.top+ee),m.left!=null&&(vt.left=m.left-_e.left+R),"using"in m?m.using.call(u,vt):bt.css(vt)}},A.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(ee){A.offset.setOffset(this,u,ee)});var m,v,E=this[0],R={top:0,left:0},Y=E&&E.ownerDocument;if(Y)return m=Y.documentElement,A.contains(m,E)?(typeof E.getBoundingClientRect!==Pt&&(R=E.getBoundingClientRect()),v=no(Y),{top:R.top+v.pageYOffset-m.clientTop,left:R.left+v.pageXOffset-m.clientLeft}):R},position:function(){if(this[0]){var u,m,v=this[0],E={top:0,left:0};return A.css(v,"position")==="fixed"?m=v.getBoundingClientRect():(u=this.offsetParent(),m=this.offset(),A.nodeName(u[0],"html")||(E=u.offset()),E.top+=A.css(u[0],"borderTopWidth",!0),E.left+=A.css(u[0],"borderLeftWidth",!0)),{top:m.top-E.top-A.css(v,"marginTop",!0),left:m.left-E.left-A.css(v,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent||so;u&&!A.nodeName(u,"html")&&A.css(u,"position")==="static";)u=u.offsetParent;return u||so})}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,m){var v=m==="pageYOffset";A.fn[u]=function(E){return at(this,function(R,Y,ee){var _e=no(R);if(ee===void 0)return _e?_e[m]:R[Y];_e?_e.scrollTo(v?e.pageXOffset:ee,v?ee:e.pageYOffset):R[Y]=ee},u,E,arguments.length,null)}}),A.each(["top","left"],function(u,m){A.cssHooks[m]=K(T.pixelPosition,function(v,E){if(E)return E=Z(v,m),$.test(E)?A(v).position()[m]+"px":E})}),A.each({Height:"height",Width:"width"},function(u,m){A.each({padding:"inner"+u,content:m,"":"outer"+u},function(v,E){A.fn[E]=function(R,Y){var ee=arguments.length&&(v||typeof R!="boolean"),_e=v||(R===!0||Y===!0?"margin":"border");return at(this,function(xe,ze,Fe){var bt;return A.isWindow(xe)?xe.document.documentElement["client"+u]:xe.nodeType===9?(bt=xe.documentElement,Math.max(xe.body["scroll"+u],bt["scroll"+u],xe.body["offset"+u],bt["offset"+u],bt["client"+u])):Fe===void 0?A.css(xe,ze,_e):A.style(xe,ze,Fe,_e)},m,ee?R:void 0,ee,null)}})}),A.fn.size=function(){return this.length},A.fn.andSelf=A.fn.addBack;var c=e.jQuery,C=e.$;return A.noConflict=function(u){return e.$===A&&(e.$=C),u&&e.jQuery===A&&(e.jQuery=c),A},typeof t===Pt&&(e.jQuery=e.$=A),A})})(P1);var RL=P1.exports;const jg=Mc(RL),ML=document.createElement("canvas"),Sc=ML.getContext("2d");function fl(n,e){return new Ne(n,e)}const Qg=Xt.transform,OL=Xt.transformOrigin||"transformOrigin";let vb=!0,Zg;const Zi={prepareForTransform(n){n.style[OL]="top left"},applyPreparedTransform(n,e){e.style[Qg]=n.getCSSTransform()},setTransform(n,e){e.style[Qg]=n},unsetTransform(n){n.style[Qg]=""},polyfillRequestAnimationFrame(){(!self.requestAnimationFrame||!self.cancelAnimationFrame)&&(!Xt.requestAnimationFrame||!Xt.cancelAnimationFrame?(self.requestAnimationFrame=n=>{const e=Date.now();return self.setTimeout(()=>{n(Date.now()-e)},16)},self.cancelAnimationFrame=clearTimeout):(self.requestAnimationFrame=window[Xt.requestAnimationFrame],self.cancelAnimationFrame=window[Xt.cancelAnimationFrame]))},backingStorePixelRatio(n){return n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1},backingScale(n){if("devicePixelRatio"in self){const e=Zi.backingStorePixelRatio(n);return self.devicePixelRatio/e}return 1},supportsNativeCanvasFilter(){return!!Xt.canvasFilter},supportsImageDataCanvasFilter(){return Zi.backingStorePixelRatio(Sc)===1},scanBounds(n,e,t){const i=he.map(he.range(e),()=>!1),s=he.map(he.range(e),()=>!1);for(let S=0;S<e;S++)for(let T=0;T<e;T++){const L=4*(T*e+S);(n.data[L]!==0||n.data[L+1]!==0||n.data[L+2]!==0||n.data[L+3]!==0)&&(i[S]=!0,s[T]=!0)}const r=he.indexOf(i,!0),o=he.lastIndexOf(i,!0),d=he.indexOf(s,!0),g=he.lastIndexOf(s,!0),y=e/16;return{minBounds:new ot(r<1||r>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(fl(r+1+y,0)).x,d<1||d>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(fl(0,d+1+y)).y,o<1||o>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(fl(o-y,0)).x,g<1||g>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(fl(0,g-y)).y),maxBounds:new ot(r<1||r>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(fl(r-1-y,0)).x,d<1||d>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(fl(0,d-1-y)).y,o<1||o>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(fl(o+2+y,0)).x,g<1||g>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(fl(0,g+2+y)).y)}},canvasAccurateBounds(n,e){const t=e&&e.precision?e.precision:.001,i=e&&e.resolution?e.resolution:128,s=e&&e.initialScale?e.initialScale:1/16;let r=ot.NOTHING,o=ot.EVERYTHING;const d=document.createElement("canvas");d.width=i,d.height=i;const g=d.getContext("2d");function y(G){g.save(),G.matrix.canvasSetTransform(g),n(g),g.restore();const re=g.getImageData(0,0,i,i),ne=Zi.scanBounds(re,i,G);return g.clearRect(0,0,i,i),ne}function S(G){const ne=(i-4)/(G.maxX-G.minX),ae=(i-2*2)/(G.maxY-G.minY),pe=-ne*G.minX+2,N=-ae*G.minY+2;return new ra(mt.translation(pe,N).timesMatrix(mt.scaling(ne,ae)))}const T=new ra;T.append(mt.translation(i/2,i/2)),T.append(mt.scaling(s));const L=y(T);r=r.union(L.minBounds),o=o.intersection(L.maxBounds);let x,A,Q;for(x=o.minY,A=o.maxY;isFinite(r.minX)&&isFinite(o.minX)&&Math.abs(r.minX-o.minX)>t&&(Q=y(S(new ot(o.minX,x,r.minX,A))),!(r.minX<=Q.minBounds.minX&&o.minX>=Q.maxBounds.minX));)r=r.withMinX(Math.min(r.minX,Q.minBounds.minX)),o=o.withMinX(Math.max(o.minX,Q.maxBounds.minX)),x=Math.max(x,Q.maxBounds.minY),A=Math.min(A,Q.maxBounds.maxY);for(x=o.minY,A=o.maxY;isFinite(r.maxX)&&isFinite(o.maxX)&&Math.abs(r.maxX-o.maxX)>t&&(Q=y(S(new ot(r.maxX,x,o.maxX,A))),!(r.maxX>=Q.minBounds.maxX&&o.maxX<=Q.maxBounds.maxX));)r=r.withMaxX(Math.max(r.maxX,Q.minBounds.maxX)),o=o.withMaxX(Math.min(o.maxX,Q.maxBounds.maxX)),x=Math.max(x,Q.maxBounds.minY),A=Math.min(A,Q.maxBounds.maxY);for(x=o.minX,A=o.maxX;isFinite(r.minY)&&isFinite(o.minY)&&Math.abs(r.minY-o.minY)>t&&(Q=y(S(new ot(x,o.minY,A,r.minY))),!(r.minY<=Q.minBounds.minY&&o.minY>=Q.maxBounds.minY));)r=r.withMinY(Math.min(r.minY,Q.minBounds.minY)),o=o.withMinY(Math.max(o.minY,Q.maxBounds.minY)),x=Math.max(x,Q.maxBounds.minX),A=Math.min(A,Q.maxBounds.maxX);for(x=o.minX,A=o.maxX;isFinite(r.maxY)&&isFinite(o.maxY)&&Math.abs(r.maxY-o.maxY)>t&&(Q=y(S(new ot(x,r.maxY,A,o.maxY))),!(r.maxY>=Q.minBounds.maxY&&o.maxY<=Q.maxBounds.maxY));)r=r.withMaxY(Math.max(r.maxY,Q.minBounds.maxY)),o=o.withMaxY(Math.min(o.maxY,Q.maxBounds.maxY)),x=Math.max(x,Q.maxBounds.minX),A=Math.min(A,Q.maxBounds.maxX);const z=new ot(isFinite(r.minX)&&isFinite(o.minX)?(r.minX+o.minX)/2:Number.POSITIVE_INFINITY,isFinite(r.minY)&&isFinite(o.minY)?(r.minY+o.minY)/2:Number.POSITIVE_INFINITY,isFinite(r.maxX)&&isFinite(o.maxX)?(r.maxX+o.maxX)/2:Number.NEGATIVE_INFINITY,isFinite(r.maxY)&&isFinite(o.maxY)?(r.maxY+o.maxY)/2:Number.NEGATIVE_INFINITY);return z.minBounds=r,z.maxBounds=o,z.isConsistent=o.containsBounds(r),z.precision=Math.max(Math.abs(r.minX-o.minX),Math.abs(r.minY-o.minY),Math.abs(r.maxX-o.maxX),Math.abs(r.maxY-o.maxY)),z},toPowerOf2(n){let e=1;for(;e<n;)e*=2;return e},createShader(n,e,t){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)||(console.log("GLSL compile error:"),console.log(n.getShaderInfoLog(i)),console.log(e)),i},applyWebGLContextDefaults(n){n.clearColor(0,0,0,0),n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA)},setWebGLEnabled(n){vb=n},checkWebGLSupport(n){if(!vb)return!1;const e=document.createElement("canvas"),t={failIfMajorPerformanceCaveat:!0};try{const i=!!self.WebGLRenderingContext&&(e.getContext("webgl",t)||e.getContext("experimental-webgl",t));if(!i)return!1;if(n){for(let s=0;s<n.length;s++)if(i.getExtension(n[s])===null)return!1}return!0}catch{return!1}},checkIE11StencilSupport(){const n=document.createElement("canvas");try{const e=!!self.WebGLRenderingContext&&(n.getContext("webgl")||n.getContext("experimental-webgl"));return e?(e.clearStencil(0),e.getError()===0):!1}catch{return!1}},get isWebGLSupported(){return Zg===void 0&&(Zg=Zi.checkWebGLSupport()),Zg},loseContext(n){const e=n.getExtension("WEBGL_lose_context");e&&(e.loseContext(),setTimeout(()=>{e.restoreContext()},1e3))},safariEmbeddingMarkWorkaround(n){if(An.safari){const e=n.split("");let t="",i=!1;for(let s=0;s<e.length;s++){const r=e[s],o=r==="‪"||r==="‫"||r==="‬";i&&o&&(t+="​"),t+=r,i=o}return t}else return n}},Vb=new mt,wb=new mt;class lp extends sn{constructor(e,t,i,s){super(),this.initialize(e,t,i,s)}initialize(e,t,i,s){super.initialize(e,t,i,sn.COMMON_ANCESTOR),this.filterRootInstance=s,this.dirtyDrawables=bi(this.dirtyDrawables),this.domElement||(this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id=`scenery-canvas${this.id}`,this.context=this.canvas.getContext("2d"),this.context.save(),this.context.miterLimit=20,this.context.miterLimit=10,this.wrapper=new Xh(this.canvas,this.context),this.domElement=this.canvas,this.wrapperStack=[this.wrapper]),this.wrapperStackIndex=0,this.filterListenerCountMap=this.filterListenerCountMap||{},Zi.prepareForTransform(this.canvas),Zi.unsetTransform(this.canvas),this.canvasDrawOffset=new Ne(0,0),this.currentDrawable=null,this.clipDirty=!0,this.clipCount=0,this.backingScale=t&Le.bitmaskCanvasLowResolution?1:Zi.backingScale(this.context),this.clipDirtyListener=this.markDirty.bind(this),this.opacityDirtyListener=this.markDirty.bind(this)}setSizeFullDisplay(){const e=this.display.getSize();this.canvas.width=e.width*this.backingScale,this.canvas.height=e.height*this.backingScale,this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`,this.wrapper.resetStyles(),this.canvasDrawOffset.setXY(0,0),Zi.unsetTransform(this.canvas)}setSizeFitBounds(){const e=this.fitBounds.minX,t=this.fitBounds.minY;this.canvasDrawOffset.setXY(-e,-t),Zi.setTransform(`matrix(1,0,0,1,${e},${t})`,this.canvas),this.canvas.width=this.fitBounds.width*this.backingScale,this.canvas.height=this.fitBounds.height*this.backingScale,this.canvas.style.width=`${this.fitBounds.width}px`,this.canvas.style.height=`${this.fitBounds.height}px`,this.wrapper.resetStyles()}update(){if(!super.update())return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();this.updateFit(),this.context.restore(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.wrapper.resetStyles(),this.currentDrawable=null;for(let e=this.firstDrawable;e!==null&&(this.renderDrawable(e),e!==this.lastDrawable);e=e.nextDrawable);return this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,0),!0}applyClip(e){this.clipDirty=!1;const t=this.wrapperStack[this.wrapperStackIndex],i=t.context;if(i.restore(),i.save(),t.resetStyles(),this.clipCount){const r=e.instance.trail;Vb.rowMajor(this.backingScale,0,this.canvasDrawOffset.x*this.backingScale,0,this.backingScale,this.canvasDrawOffset.y*this.backingScale,0,0,1),wb.set(this.transformRootInstance.trail.getMatrix()).invert(),wb.multiplyMatrix(Vb).canvasSetTransform(i);for(let o=0;o<r.length;o++){const d=r.nodes[o];d.getMatrix().canvasAppendTransform(i),d.hasClipArea()&&(i.beginPath(),d.clipArea.writeToContext(i),i.clip())}}}pushWrapper(){if(this.wrapperStackIndex++,this.clipDirty=!0,this.wrapperStackIndex===this.wrapperStack.length){const i=document.createElement("canvas"),s=i.getContext("2d");s.save(),this.wrapperStack.push(new Xh(i,s))}const e=this.wrapperStack[this.wrapperStackIndex],t=e.context;e.setDimensions(this.canvas.width,this.canvas.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width,this.canvas.height)}popWrapper(){this.wrapperStackIndex--,this.clipDirty=!0}walkDown(e,t){const i=this.filterRootInstance.trail.length-1;for(let s=e.length-1;s>=t;s--){const r=e.nodes[s];if(r.hasClipArea()&&(this.clipCount--,this.clipDirty=!0),s>i){if(r._filters.length){const o=this.wrapperStack[this.wrapperStackIndex],d=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),d.context.setTransform(1,0,0,1,0,0);const g=r._filters;let y=Xt.canvasFilter;for(let S=0;S<g.length;S++)y=y&&g[S].isDOMCompatible();if(y){let S="";for(let T=0;T<g.length;T++)S+=`${S?" ":""}${g[T].getCSSFilterString()}`;d.context.filter=S,d.context.drawImage(o.canvas,0,0),d.context.filter="none"}else{for(let S=0;S<g.length;S++)g[S].applyCanvasFilter(o);d.context.drawImage(o.canvas,0,0)}}if(r.getEffectiveOpacity()!==1){const o=this.wrapperStack[this.wrapperStackIndex],d=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),d.context.setTransform(1,0,0,1,0,0),d.context.globalAlpha=r.getEffectiveOpacity(),d.context.drawImage(o.canvas,0,0),d.context.globalAlpha=1}}}}walkUp(e,t){const i=this.filterRootInstance.trail.length-1;for(let s=t;s<e.length;s++){const r=e.nodes[s];s>i&&(r.getEffectiveOpacity()!==1&&this.pushWrapper(),r._filters.length&&this.pushWrapper()),r.hasClipArea()&&(this.clipCount++,this.clipDirty=!0)}}renderDrawable(e){if(!e.visible||this.canvas.width===0||this.canvas.height===0)return;const t=this.currentDrawable?e.instance.getBranchIndexTo(this.currentDrawable.instance):0;this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,t),this.walkUp(e.instance.trail,t);const i=this.wrapperStack[this.wrapperStackIndex],s=i.context;this.clipDirty&&this.applyClip(e);const r=e.instance.relativeTransform.matrix;s.setTransform(this.backingScale,0,0,this.backingScale,this.canvasDrawOffset.x*this.backingScale,this.canvasDrawOffset.y*this.backingScale),e.instance!==this.transformRootInstance&&r.canvasAppendTransform(s),e.paintCanvas(i,e.instance.node,e.instance.relativeTransform.matrix),this.currentDrawable=e}dispose(){this.transformRootInstance=null,bi(this.dirtyDrawables),this.canvas.width=0,this.canvas.height=0,super.dispose()}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}addDrawable(e){super.addDrawable(e);for(let t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){const i=t.node;this.filterListenerCountMap[i.id]?this.filterListenerCountMap[i.id]++:(this.filterListenerCountMap[i.id]=1,i.filterChangeEmitter.addListener(this.opacityDirtyListener),i.clipAreaProperty.lazyLink(this.clipDirtyListener))}}removeDrawable(e){for(let t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){const i=t.node;this.filterListenerCountMap[i.id]--,this.filterListenerCountMap[i.id]===0&&(delete this.filterListenerCountMap[i.id],i.clipAreaProperty.unlink(this.clipDirtyListener),i.filterChangeEmitter.removeListener(this.opacityDirtyListener))}super.removeDrawable(e)}onIntervalChange(e,t){super.onIntervalChange(e,t),this.markDirty()}onPotentiallyMovedDrawable(e){e.markDirty()}toString(){return`CanvasBlock#${this.id}-${sn.fitString[this.fit]}`}}Ts.mixInto(lp);class X0 extends G0{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return super.initialize(e,t.renderer),this.domDrawable=t,this.domElement=t.domElement,this}update(){return super.update()?(this.domDrawable.update(),!0):!1}dispose(){this.domDrawable=null,this.domElement=null,super.dispose()}markDirtyDrawable(e){this.markDirty()}addDrawable(e){super.addDrawable(e)}removeDrawable(e){super.removeDrawable(e)}}Ts.mixInto(X0);class qL{constructor(e,t){this.create=e,this.destroy=t,this.map=new Map}increment(e,t=1){if(this.map.has(e))this.map.get(e).count+=t;else{const i=this.create(e),s=qm.createFromPool(t,e,i);this.map.set(e,s)}}decrement(e,t=1){const i=this.map.get(e);i&&(i.count-=t,i.count<1&&(this.destroy(e,i.value),this.map.delete(e),i.dispose()))}get(e){return this.map.get(e).value}clear(){this.map.clear()}}class qm{constructor(e,t,i){this.initialize(e,t,i)}initialize(e,t,i){this.count=e,this.key=t,this.value=i}dispose(){this.key=null,this.value=null,this.freeToPool()}}Ts.mixInto(qm,{initialize:qm.prototype.initialize});let FL=1,zL=1;class Co{constructor(e,t,i){this.id=`group${FL++}`,this.initialize(e,t,i)}initialize(e,t,i){this.block=e,this.instance=t,this.node=t.trail.lastNode(),this.parent=i,this.children=bi(this.children),this.hasSelfDrawable=!1,this.selfDrawable=null,this.dirty=!0,this.willApplyTransforms=this.block.transformRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.willApplyFilters=this.block.filterRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.transformDirty=!0,this.hasTransform=this.hasTransform!==void 0?this.hasTransform:!1,this.transformDirtyListener=this.transformDirtyListener||this.markTransformDirty.bind(this),this.willApplyTransforms&&this.node.transformEmitter.addListener(this.transformDirtyListener),this.filterDirty=!0,this.visibilityDirty=!0,this.clipDirty=!0,this.filterElement=this.filterElement||null,this.hasOpacity=this.hasOpacity!==void 0?this.hasOpacity:!1,this.hasFilter=!1,this.clipDefinition=this.clipDefinition!==void 0?this.clipDefinition:null,this.clipPath=this.clipPath!==void 0?this.clipPath:null,this.filterChangeListener=this.filterChangeListener||this.onFilterChange.bind(this),this.visibilityDirtyListener=this.visibilityDirtyListener||this.onVisibleChange.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipChange.bind(this),this.node.visibleProperty.lazyLink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.addListener(this.filterChangeListener),this.node.clipAreaProperty.lazyLink(this.clipDirtyListener),this.orderDirty=!0,this.orderDirtyListener=this.orderDirtyListener||this.markOrderDirty.bind(this),this.node.childrenChangedEmitter.addListener(this.orderDirtyListener),this.svgGroup||(this.svgGroup=document.createElementNS(ws,"g")),this.instance.addSVGGroup(this),this.block.markDirtyGroup(this)}addSelfDrawable(e){this.selfDrawable=e,this.svgGroup.insertBefore(e.svgElement,this.children.length?this.children[0].svgGroup:null),this.hasSelfDrawable=!0}removeSelfDrawable(e){this.hasSelfDrawable=!1,this.svgGroup.removeChild(e.svgElement),this.selfDrawable=null}addChildGroup(e){this.markOrderDirty(),e.parent=this,this.children.push(e),this.svgGroup.appendChild(e.svgGroup)}removeChildGroup(e){this.markOrderDirty(),e.parent=null,this.children.splice(he.indexOf(this.children,e),1),this.svgGroup.removeChild(e.svgGroup)}markDirty(){this.dirty||(this.dirty=!0,this.block.markDirtyGroup(this))}markOrderDirty(){this.orderDirty||(this.orderDirty=!0,this.markDirty())}markTransformDirty(){this.transformDirty||(this.transformDirty=!0,this.markDirty())}onFilterChange(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}onVisibleChange(){this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}onClipChange(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}update(){if(!this.block)return;const e=this.svgGroup;if(this.dirty=!1,this.transformDirty&&(this.transformDirty=!1,this.willApplyTransforms?this.node.transform.isIdentity()?this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform")):(this.hasTransform=!0,e.setAttribute("transform",this.node.transform.getMatrix().getSVGTransform())):this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform"))),this.visibilityDirty&&(this.visibilityDirty=!1,e.style.display=this.node.isVisible()?"":"none"),this.filterDirty){this.filterDirty=!1;const t=this.node.effectiveOpacity;this.willApplyFilters&&t!==1?(this.hasOpacity=!0,e.setAttribute("opacity",t)):this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity"));const i=this.willApplyFilters&&this.node._filters.length,s=`filter-${this.id}`;if(i){for(this.filterElement||(this.filterElement=document.createElementNS(ws,"filter"),this.filterElement.setAttribute("id",s));this.filterElement.firstChild;)this.filterElement.removeChild(this.filterElement.lastChild);let r=50,o="SourceGraphic";const d=this.node._filters.length;for(let S=0;S<d;S++){const T=this.node._filters[S],L=S===d-1?void 0:`e${S}`;T.applySVGFilter(this.filterElement,o,L),r+=T.filterRegionPercentageIncrease,o=L}const g=`-${is(r)}%`,y=`${is(2*r+100)}%`;this.filterElement.setAttribute("x",g),this.filterElement.setAttribute("y",g),this.filterElement.setAttribute("width",y),this.filterElement.setAttribute("height",y)}i&&(this.hasFilter||this.block.defs.appendChild(this.filterElement),e.setAttribute("filter",`url(#${s})`),this.hasFilter=!0),this.hasFilter&&!i&&(e.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement))}if(this.clipDirty)if(this.clipDirty=!1,this.node.clipArea){if(!this.clipDefinition){const t=`clip${zL++}`;this.clipDefinition=document.createElementNS(ws,"clipPath"),this.clipDefinition.setAttribute("id",t),this.clipDefinition.setAttribute("clipPathUnits","userSpaceOnUse"),this.block.defs.appendChild(this.clipDefinition),this.clipPath=document.createElementNS(ws,"path"),this.clipDefinition.appendChild(this.clipPath),e.setAttribute("clip-path",`url(#${t})`)}this.clipPath.setAttribute("d",this.node.clipArea.getSVGPath())}else this.clipDefinition&&(e.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null);if(this.orderDirty){this.orderDirty=!1;let t=this.children.length-1;const i=this.instance.children;for(let s=i.length-1;s>=0;s--){const r=i[s].lookupSVGGroup(this.block);if(r){if(this.children[t]!==r){e.insertBefore(r.svgGroup,t+1>=this.children.length?null:this.children[t+1].svgGroup);const o=he.indexOf(this.children,r);this.children.splice(o,1),this.children.splice(t,0,r)}t--}}}}isReleasable(){return!this.hasSelfDrawable&&!this.children.length&&this.parent}dispose(){this.hasFilter&&(this.svgGroup.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement)),this.willApplyTransforms&&this.node.transformEmitter.removeListener(this.transformDirtyListener),this.node.visibleProperty.unlink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.removeListener(this.filterChangeListener),this.node.clipAreaProperty.unlink(this.clipDirtyListener),this.node.childrenChangedEmitter.removeListener(this.orderDirtyListener),this.instance.active&&this.instance.removeSVGGroup(this),this.clipDefinition&&(this.svgGroup.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null),this.parent=null,this.block=null,this.instance=null,this.node=null,bi(this.children),this.selfDrawable=null,this.freeToPool()}toString(){return`SVGGroup:${this.block.toString()}_${this.instance.toString()}`}static addDrawable(e,t){Co.ensureGroupsToInstance(e,t.instance).addSelfDrawable(t)}static removeDrawable(e,t){t.instance.lookupSVGGroup(e).removeSelfDrawable(t),Co.releaseGroupsToInstance(e,t.instance)}static ensureGroupsToInstance(e,t){let i=t.lookupSVGGroup(e);if(!i){const s=Co.ensureGroupsToInstance(e,t.parent);i=Co.createFromPool(e,t,s),s.addChildGroup(i)}return i}static releaseGroupsToInstance(e,t){const i=t.lookupSVGGroup(e);if(i.isReleasable()){const s=i.parent;s.removeChildGroup(i),Co.releaseGroupsToInstance(e,s.instance),i.dispose()}}}Ts.mixInto(Co);class E1 extends sn{constructor(e,t,i,s){super(),this.initialize(e,t,i,s)}initialize(e,t,i,s){super.initialize(e,t,i,sn.COMMON_ANCESTOR),this.filterRootInstance=s,this.dirtyGradients=bi(this.dirtyGradients),this.dirtyGroups=bi(this.dirtyGroups),this.dirtyDrawables=bi(this.dirtyDrawables),this.paintCountMap=this.paintCountMap||new qL(this.onAddPaint.bind(this),this.onRemovePaint.bind(this)),this.areReferencesReduced=!0,this.domElement||(this.svg=document.createElementNS(ws,"svg"),this.svg.style.pointerEvents="none",this.svg.style.position="absolute",this.svg.style.left="0",this.svg.style.top="0",this.svg.setAttribute("focusable",!1),this.defs=document.createElementNS(ws,"defs"),this.svg.appendChild(this.defs),this.baseTransformGroup=document.createElementNS(ws,"g"),this.svg.appendChild(this.baseTransformGroup),this.domElement=this.svg),this.forceRefreshListener=()=>{if(!this.workaroundRect){const y=document.createElementNS(ws,"g");this.svg.appendChild(y),this.workaroundRect=document.createElementNS(ws,"rect"),this.workaroundRect.setAttribute("width","0"),this.workaroundRect.setAttribute("height","0"),this.workaroundRect.setAttribute("fill","none"),y.appendChild(this.workaroundRect)}const o=Fl.nextIntBetween(0,255),d=Fl.nextIntBetween(0,255),g=Fl.nextIntBetween(0,255);this.workaroundRect.setAttribute("fill",`rgba(${o},${d},${g},0.02)`)},this.display._refreshSVGEmitter.addListener(this.forceRefreshListener),Zi.prepareForTransform(this.svg),Zi.unsetTransform(this.svg),this.baseTransformGroup.setAttribute("transform","");const r=i.trail.nodes.length>s.trail.nodes.length?s:i;return this.rootGroup=Co.createFromPool(this,r,null),this.baseTransformGroup.appendChild(this.rootGroup.svgGroup),this}onAddPaint(e){const t=e.createSVGPaint(this);return t.definition.setAttribute("id",`${e.id}-${this.id}`),this.defs.appendChild(t.definition),t}onRemovePaint(e,t){this.defs.removeChild(t.definition),t.dispose()}incrementPaint(e){this.paintCountMap.increment(e)}decrementPaint(e){this.paintCountMap.decrement(e)}markDirtyGradient(e){this.dirtyGradients.push(e),this.markDirty()}markDirtyGroup(e){this.dirtyGroups.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}setSizeFullDisplay(){this.baseTransformGroup.removeAttribute("transform"),Zi.unsetTransform(this.svg);const e=this.display.getSize();this.svg.setAttribute("width",e.width),this.svg.setAttribute("height",e.height)}setSizeFitBounds(){const e=this.fitBounds.minX,t=this.fitBounds.minY;this.baseTransformGroup.setAttribute("transform",`translate(${-e},${-t})`),Zi.setTransform(`matrix(1,0,0,1,${e},${t})`,this.svg),this.svg.setAttribute("width",this.fitBounds.width),this.svg.setAttribute("height",this.fitBounds.height)}update(){if(!super.update())return!1;for(;this.dirtyGroups.length;){const e=this.dirtyGroups.pop();e.block===this&&e.update()}for(;this.dirtyGradients.length;)this.dirtyGradients.pop().update();for(;this.dirtyDrawables.length;){const e=this.dirtyDrawables.pop();e.parentDrawable===this&&e.update()}return this.areReferencesReduced=!0,this.updateFit(),!0}reduceReferences(){if(this.areReferencesReduced)return;let e=0,t=0;for(;e<this.dirtyGroups.length;){const i=this.dirtyGroups[e];i.block===this&&(t!==e&&(this.dirtyGroups[t]=i),t++),e++}for(;this.dirtyGroups.length>t;)this.dirtyGroups.pop();for(e=0,t=0;e<this.dirtyDrawables.length;){const i=this.dirtyDrawables[e];i.parentDrawable===this&&(t!==e&&(this.dirtyDrawables[t]=i),t++),e++}for(;this.dirtyDrawables.length>t;)this.dirtyDrawables.pop();this.areReferencesReduced=!0}dispose(){for(this.svg.setAttribute("width","0"),this.svg.setAttribute("height","0"),this.filterRootInstance=null,bi(this.dirtyGradients),bi(this.dirtyGroups),bi(this.dirtyDrawables),this.paintCountMap.clear(),this.display._refreshSVGEmitter.removeListener(this.forceRefreshListener),this.baseTransformGroup.removeChild(this.rootGroup.svgGroup),this.rootGroup.dispose(),this.rootGroup=null;this.defs.childNodes.length;)this.defs.removeChild(this.defs.childNodes[0]);super.dispose()}addDrawable(e){super.addDrawable(e),Co.addDrawable(this,e),e.updateSVGBlock(this)}removeDrawable(e){Co.removeDrawable(this,e),super.removeDrawable(e)}onIntervalChange(e,t){super.onIntervalChange(e,t)}toString(){return`SVGBlock#${this.id}-${sn.fitString[this.fit]}`}}Ts.mixInto(E1);class D1{constructor(e,t,i,s){const r=St()({attributes:[],uniforms:[]},s);this.vertexSource=t,this.fragmentSource=i,this.attributeNames=r.attributes,this.uniformNames=r.uniforms,this.initialize(e)}initialize(e){this.gl=e,this.used=!1,this.program=this.gl.createProgram(),this.vertexShader=Zi.createShader(this.gl,this.vertexSource,this.gl.VERTEX_SHADER),this.fragmentShader=Zi.createShader(this.gl,this.fragmentSource,this.gl.FRAGMENT_SHADER),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||(console.log("GLSL link error:"),console.log(this.gl.getProgramInfoLog(this.program)),console.log("for vertex shader"),console.log(this.vertexSource),console.log("for fragment shader"),console.log(this.fragmentSource)),this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),this.uniformLocations={},this.attributeLocations={},this.activeAttributes={},he.each(this.attributeNames,t=>{this.attributeLocations[t]=this.gl.getAttribLocation(this.program,t),this.activeAttributes[t]=!0}),he.each(this.uniformNames,t=>{this.uniformLocations[t]=this.gl.getUniformLocation(this.program,t)}),this.isInitialized=!0}use(){this.used||(this.used=!0,this.gl.useProgram(this.program),he.each(this.attributeNames,e=>{this.activeAttributes[e]&&this.enableVertexAttribArray(e)}))}activateAttribute(e){this.activeAttributes[e]||(this.activeAttributes[e]=!0,this.used&&this.enableVertexAttribArray(e))}enableVertexAttribArray(e){this.gl.enableVertexAttribArray(this.attributeLocations[e])}unuse(){this.used&&(this.used=!1,he.each(this.attributeNames,e=>{this.activeAttributes[e]&&this.disableVertexAttribArray(e)}))}disableVertexAttribArray(e){this.gl.disableVertexAttribArray(this.attributeLocations[e])}deactivateAttribute(e){this.activeAttributes[e]&&(this.activeAttributes[e]=!1,this.used&&this.disableVertexAttribArray(e))}dispose(){this.gl.deleteProgram(this.program)}}const Fm=new Ws(1024,1024),Lh=1,Wd=1;class Cc{constructor(e){this.useMipmaps=e,this.gl=null,this.texture=null,this.bounds=new ot(0,0,Fm.width,Fm.height),this.width=this.bounds.width,this.height=this.bounds.height,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.binPacker=new Sv(this.bounds),this.dirty=!0,this.usedSprites=[],this.unusedSprites=[]}initializeContext(e){this.gl=e,this.createTexture()}createTexture(){const e=this.gl;this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.useMipmaps?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null),this.dirty=!1}updateTexture(){if(this.dirty){this.dirty=!1;const e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null)}}addImage(e,t,i){let s;for(s=0;s<this.usedSprites.length;s++){const o=this.usedSprites[s];if(o.image===e)return o.count++,o}for(s=0;s<this.unusedSprites.length;s++){const o=this.unusedSprites[s];if(o.image===e)return o.count++,this.unusedSprites.splice(s,1),this.usedSprites.push(o),o}let r;for(;!(r=this.binPacker.allocate(t+2*Lh+Wd,i+2*Lh+Wd))&&this.unusedSprites.length;){const o=this.unusedSprites.shift();this.dirty=!0;const d=o.bin.bounds;this.context.clearRect(d.x,d.y,d.width,d.height),this.binPacker.deallocate(o.bin)}if(r){const o=new ot((r.bounds.minX+Lh)/this.width,(r.bounds.minY+Lh)/this.height,(r.bounds.maxX-Lh-Wd)/this.width,(r.bounds.maxY-Lh-Wd)/this.height),d=new T1(this,r,o,e,1);return this.copyImageWithGutter(e,t,i,r.bounds.x,r.bounds.y),this.dirty=!0,this.usedSprites.push(d),d}else return null}removeImage(e){let t,i;for(i=0;i<this.usedSprites.length;i++)if(this.usedSprites[i].image===e){t=this.usedSprites[i];break}--t.count<=0&&(this.usedSprites.splice(i,1),this.unusedSprites.push(t))}containsImage(e){let t;for(t=0;t<this.usedSprites.length;t++)if(this.usedSprites[t].image===e)return!0;for(t=0;t<this.unusedSprites.length;t++)if(this.unusedSprites[t].image===e)return!0;return!1}copyImageWithGutter(e,t,i,s,r){this.copyImageRegion(e,1,1,0,0,s,r),this.copyImageRegion(e,1,1,t-1,0,s+1+t,r),this.copyImageRegion(e,1,1,t-1,i-1,s+1+t,r+1+i),this.copyImageRegion(e,1,1,0,i-1,s,r+1+i),this.copyImageRegion(e,t,1,0,0,s+1,r),this.copyImageRegion(e,t,1,0,i-1,s+1,r+1+i),this.copyImageRegion(e,1,i,0,0,s,r+1),this.copyImageRegion(e,1,i,t-1,0,s+1+t,r+1),this.context.drawImage(e,s+1,r+1)}copyImageRegion(e,t,i,s,r,o,d){this.context.drawImage(e,s,r,t,i,o,d,t,i)}}Cc.MAX_DIMENSION=Fm;class T1{constructor(e,t,i,s,r){this.spriteSheet=e,this.bin=t,this.uvBounds=i,this.image=s,this.count=r}}Cc.Sprite=T1;class j0 extends sn{constructor(e,t,i,s){super(),this.initialize(e,t,i,s)}initialize(e,t,i,s){return super.initialize(e,t,i,sn.FULL_DISPLAY),this.filterRootInstance=s,this.preserveDrawingBuffer=e._preserveDrawingBuffer,this.dirtyDrawables=bi(this.dirtyDrawables),this.spriteSheets=this.spriteSheets||[],this.projectionMatrix=this.projectionMatrix||new mt,this.projectionMatrixArray=new Float32Array(9),this.customProcessor=this.customProcessor||new HL,this.vertexColorPolygonsProcessor=this.vertexColorPolygonsProcessor||new KL(this.projectionMatrixArray),this.texturedTrianglesProcessor=this.texturedTrianglesProcessor||new UL(this.projectionMatrixArray),this.glChangedEmitter=new Hi,this.isContextLost=!1,this.contextLostListener=this.onContextLoss.bind(this),this.contextRestoreListener=this.onContextRestoration.bind(this),this.domElement||(this.domElement=document.createElement("div"),this.domElement.className="webgl-container",this.domElement.style.position="absolute",this.domElement.style.left="0",this.domElement.style.top="0",this.rebuildCanvas()),this.gl.clear(this.gl.COLOR_BUFFER_BIT),Zi.prepareForTransform(this.canvas),Zi.unsetTransform(this.canvas),this}rebuildCanvas(){const e=document.createElement("canvas"),t=this.getContextFromCanvas(e);t&&(this.canvas&&(this.domElement.removeChild(this.canvas),this.canvas.removeEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoreListener,!1)),this.canvas=e,this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id=`scenery-webgl${this.id}`,this.canvas.addEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoreListener,!1),this.domElement.appendChild(this.canvas),this.setupContext(t))}setupContext(e){this.isContextLost=!1,this.gl=e,this.backingScale=Zi.backingScale(this.gl),this.display._allowBackingScaleAntialiasing&&e.getParameter(e.SAMPLES)===0&&(this.backingScale*=2),this.originalBackingScale=this.backingScale,Zi.applyWebGLContextDefaults(this.gl),this.markDirty(),this.dirtyFit=!0,this.customProcessor.initializeContext(this.gl),this.vertexColorPolygonsProcessor.initializeContext(this.gl),this.texturedTrianglesProcessor.initializeContext(this.gl);for(let t=0;t<this.spriteSheets.length;t++)this.spriteSheets[t].initializeContext(this.gl);this.glChangedEmitter.emit()}delayedRebuildCanvas(){const e=this;self.setTimeout(function(){e.rebuildCanvas()})}onContextLoss(e){this.isContextLost||(this.isContextLost=!0,e.preventDefault(),this.canvas.style.display="none",this.markDirty())}onContextRestoration(e){if(this.isContextLost){const t=this.getContextFromCanvas(this.canvas);this.setupContext(t),this.canvas.style.display=""}}getContextFromCanvas(e){const t={antialias:!0,preserveDrawingBuffer:this.preserveDrawingBuffer};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)}setSizeFullDisplay(){const e=this.display.getSize();this.canvas.width=Math.ceil(e.width*this.backingScale),this.canvas.height=Math.ceil(e.height*this.backingScale),this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`}setSizeFitBounds(){throw new Error("setSizeFitBounds unimplemented for WebGLBlock")}update(){if(!super.update())return!1;const e=this.gl;for(this.isContextLost&&this.display._aggressiveContextRecreation&&this.delayedRebuildCanvas();this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();const t=this.spriteSheets.length;for(let r=0;r<t;r++)this.spriteSheets[r].updateTexture();this.firstDrawable&&this.firstDrawable===this.lastDrawable&&this.firstDrawable.node&&this.firstDrawable.node._webglScale!==null&&this.backingScale!==this.originalBackingScale*this.firstDrawable.node._webglScale&&(this.backingScale=this.originalBackingScale*this.firstDrawable.node._webglScale,this.dirtyFit=!0),this.updateFit(),this.projectionMatrix.rowMajor(2/this.display.width,0,-1,0,-2/this.display.height,1,0,0,1),this.projectionMatrix.copyToArray(this.projectionMatrixArray),this.preserveDrawingBuffer&&e.clear(e.COLOR_BUFFER_BIT),e.viewport(0,0,this.canvas.width,this.canvas.height);let i=null,s=0;for(let r=this.firstDrawable;r!==null;r=r.nextDrawable){if(r.visible){let o=null;r.webglRenderer===Le.webglTexturedTriangles?o=this.texturedTrianglesProcessor:r.webglRenderer===Le.webglCustom?o=this.customProcessor:r.webglRenderer===Le.webglVertexColorPolygons&&(o=this.vertexColorPolygonsProcessor),o!==i&&(i&&(s+=i.deactivate()),i=o,i.activate()),i.processDrawable(r)}if(r===this.lastDrawable)break}return i&&(s+=i.deactivate()),s===0&&!this.preserveDrawingBuffer&&e.clear(e.COLOR_BUFFER_BIT),e.flush(),!0}dispose(){bi(this.dirtyDrawables),super.dispose()}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}addDrawable(e){super.addDrawable(e),e.onAddToBlock(this)}removeDrawable(e){let t=0;for(;(t=this.dirtyDrawables.indexOf(e,t))>=0;)this.dirtyDrawables.splice(t,1);e.onRemoveFromBlock(this),super.removeDrawable(e)}addSpriteSheetImage(e,t,i){let s=null;const r=this.spriteSheets.length;for(let o=0;o<r&&(s=this.spriteSheets[o].addImage(e,t,i),!s);o++);if(!s){const o=new Cc(!0);if(s=o.addImage(e,t,i),o.initializeContext(this.gl),this.spriteSheets.push(o),!s)throw new Error("Attempt to load image that is too large for sprite sheets")}return s}removeSpriteSheetImage(e){e.spriteSheet.removeImage(e.image)}onIntervalChange(e,t){super.onIntervalChange(e,t),this.markDirty()}onPotentiallyMovedDrawable(e){this.markDirty()}toString(){return`WebGLBlock#${this.id}-${sn.fitString[this.fit]}`}}class Q0{activate(){}initializeContext(e){}processDrawable(e){}deactivate(){}}class HL extends Q0{constructor(){super(),this.drawable=null}activate(){this.drawCount=0}processDrawable(e){this.drawable=e,this.draw()}deactivate(){return this.drawCount}draw(){if(this.drawable){const e=this.drawable.draw();this.drawCount+=e,this.drawable=null}}}class KL extends Q0{constructor(e){super(),this.projectionMatrixArray=e,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)}initializeContext(e){this.gl=e,this.shaderProgram=new D1(e,["attribute vec2 aVertex;","attribute vec4 aColor;","varying vec4 vColor;","uniform mat3 uProjectionMatrix;","void main() {","  vColor = aColor;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join(`
`),["precision mediump float;","varying vec4 vColor;","void main() {","  gl_FragColor = vec4( vColor.rgb * vColor.a, vColor.a );","}"].join(`
`),{attributes:["aVertex","aColor"],uniforms:["uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}activate(){this.shaderProgram.use(),this.vertexArrayIndex=0,this.drawCount=0}processDrawable(e){if(e.includeVertices){const t=e.vertexArray;for(;t.length+this.vertexArrayIndex>this.vertexArray.length;){const i=new Float32Array(this.vertexArray.length*2);i.set(this.vertexArray),this.vertexArray=i}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length,this.drawCount++}}deactivate(){return this.drawCount&&this.draw(),this.shaderProgram.unuse(),this.drawCount}draw(){const e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const t=Float32Array.BYTES_PER_ELEMENT,i=6*t;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,i,0*t),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aColor,4,e.FLOAT,!1,i,2*t),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/6),this.vertexArrayIndex=0}}class UL extends Q0{constructor(e){super(),this.projectionMatrixArray=e,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)}initializeContext(e){this.gl=e,this.shaderProgram=new D1(e,["attribute vec2 aVertex;","attribute vec2 aTextureCoord;","attribute float aAlpha;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform mat3 uProjectionMatrix;","void main() {","  vTextureCoord = aTextureCoord;","  vAlpha = aAlpha;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join(`
`),["precision mediump float;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform sampler2D uTexture;","void main() {","  vec4 color = texture2D( uTexture, vTextureCoord, -0.7 );","  color.a *= vAlpha;","  gl_FragColor = color;","}"].join(`
`),{attributes:["aVertex","aTextureCoord","aAlpha"],uniforms:["uTexture","uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}activate(){this.shaderProgram.use(),this.currentSpriteSheet=null,this.vertexArrayIndex=0,this.drawCount=0}processDrawable(e){if(!e.sprite)return;this.currentSpriteSheet&&e.sprite.spriteSheet!==this.currentSpriteSheet&&this.draw(),this.currentSpriteSheet=e.sprite.spriteSheet;const t=e.vertexArray;for(;t.length+this.vertexArrayIndex>this.vertexArray.length;){const i=new Float32Array(this.vertexArray.length*2);i.set(this.vertexArray),this.vertexArray=i}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length}deactivate(){return this.currentSpriteSheet&&this.draw(),this.shaderProgram.unuse(),this.drawCount}draw(){const e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const t=5,i=Float32Array.BYTES_PER_ELEMENT,s=t*i;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,s,0*i),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aTextureCoord,2,e.FLOAT,!1,s,2*i),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aAlpha,1,e.FLOAT,!1,s,4*i),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.currentSpriteSheet.texture),e.uniform1i(this.shaderProgram.uniformLocations.uTexture,0),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/t),e.bindTexture(e.TEXTURE_2D,null),this.drawCount++,this.currentSpriteSheet=null,this.vertexArrayIndex=0}}Ts.mixInto(j0);class YL{initialize(e,t,i,s,r,o,d){this.backbone=e,this.firstDrawable=t,this.lastDrawable=i,this.touchedBlocks=bi(this.touchedBlocks)}clean(){this.backbone=null,this.firstDrawable=null,this.lastDrawable=null}recordBackboneBoundaries(){this.backbone.previousFirstDrawable=this.firstDrawable,this.backbone.previousLastDrawable=this.lastDrawable}notePendingAddition(e,t){e.notePendingAddition(this.backbone.display,t,this.backbone)}notePendingMove(e,t){e.notePendingMove(this.backbone.display,t)}notePendingRemoval(e){e.notePendingRemoval(this.backbone.display)}markBlockForDisposal(e){e.domElement.parentNode===this.backbone.domElement&&this.backbone.domElement.removeChild(e.domElement),e.markForDisposal(this.backbone.display)}removeAllBlocks(){for(;this.backbone.blocks.length;){const e=this.backbone.blocks[0];this.removeBlock(e),this.markBlockForDisposal(e)}}notifyInterval(e,t,i){e.notifyInterval(t,i),this.backbone.markDirtyDrawable(e)}markBeforeBlock(e,t){e.pendingFirstDrawable=t,this.touchedBlocks.push(e)}markAfterBlock(e,t){e.pendingLastDrawable=t,this.touchedBlocks.push(e)}updateBlockIntervals(){for(;this.touchedBlocks.length;){const e=this.touchedBlocks.pop();e.used&&(e.updateInterval(),this.backbone.markDirtyDrawable(e))}}createBlock(e,t){const i=this.backbone;let s;if(Le.isCanvas(e))s=lp.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else if(Le.isSVG(e))s=E1.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else if(Le.isDOM(e))s=X0.createFromPool(i.display,t);else if(Le.isWebGL(e))s=j0.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else throw new Error(`unsupported renderer for createBlock: ${e}`);return s.setBlockBackbone(i),i.domElement.appendChild(s.domElement),i.isDisplayRoot&&s.domElement.setAttribute("aria-hidden",!0),i.markDirtyDrawable(s),s}appendBlock(e){this.backbone.blocks.push(e)}removeBlock(e){const t=he.indexOf(this.backbone.blocks,e);this.backbone.blocks.splice(t,1)}useNoBlocks(){bi(this.backbone.blocks)}reindex(){this.backbone.reindexBlocks()}auditStitch(){}static debugIntervals(e){}static debugDrawables(e,t,i,s,r){}}function gf(n,e){return n.renderer!==e.renderer||Le.isDOM(n.renderer)||Le.isDOM(e.renderer)}function Jg(n){return n.previousDrawable!==null&&!gf(n.previousDrawable,n)}function $g(n){return n.nextDrawable!==null&&!gf(n,n.nextDrawable)}function WL(n,e,t){return n.drawableBefore?n.drawableBefore.nextDrawable!==n.drawableAfter:n.drawableAfter?n.drawableAfter.previousDrawable!==n.drawableBefore:e!==null}function GL(n,e,t){return n.drawableBefore?n.drawableBefore.oldNextDrawable!==n.drawableAfter:n.drawableAfter?n.drawableAfter.oldPreviousDrawable!==n.drawableBefore:e!==null}function XL(n,e,t){const i=n.drawableBefore?n.drawableBefore.parentDrawable:null,s=n.drawableAfter?n.drawableAfter.parentDrawable:null;return i&&s&&i===s?!1:i?i.nextBlock!==s:s?s.previousBlock!==i:e!==null}function jL(n){const e=n.drawableAfter;if(e){const t=e.renderer,i=n.nextChangeInterval?n.nextChangeInterval.drawableBefore.nextDrawable:null;let s=e;for(;;){const r=s.nextDrawable;if(r!==i&&r.renderer===t)s=r;else break}return s}else return null}class QL extends YL{stitch(e,t,i,s,r,o,d){this.initialize(e,t,i,s,r,o,d),this.blockOrderChanged=!1,this.reusableBlocks=bi(this.reusableBlocks),this.blockWasAdded=!1;let g;if(this.recordBackboneBoundaries(),e.blocks.length){const y=e.blocks[0];for(e.blocks[e.blocks.length-1],g=o;g!==null;g=g.nextChangeInterval){if(GL(g,s)){const S=g.drawableBefore?g.drawableBefore.oldNextDrawable:s,T=g.drawableAfter?g.drawableAfter.oldPreviousDrawable:r;for(let L=S;this.notePendingRemoval(L),L!==T;L=L.oldNextDrawable);}if(XL(g,y)){const S=g.drawableBefore===null?e.blocks[0]:g.drawableBefore.parentDrawable.nextBlock,T=g.drawableAfter===null?e.blocks[e.blocks.length-1]:g.drawableAfter.parentDrawable.previousBlock;for(let L=S;this.unuseBlock(L),L!==T;L=L.nextBlock);}}}if(t)for(g=o;g!==null;g=g.nextChangeInterval)this.processInterval(e,g,t,i);this.removeUnusedBlocks(),this.updateBlockIntervals(),t===null?this.useNoBlocks():this.blockOrderChanged&&(this.processBlockLinkedList(e,t.pendingParentDrawable,i.pendingParentDrawable),this.reindex()),this.clean(),bi(this.reusableBlocks)}processInterval(e,t,i,s){if(WL(t,i)){let r=t.drawableBefore?t.drawableBefore.nextDrawable:i,o=null,d=null,g=!0;for(;;){const y=r.nextDrawable,S=y===t.drawableAfter;if(o||(o=r),d===null&&r.parentDrawable&&!r.parentDrawable.used&&r.backbone===e&&r.parentDrawable.parentDrawable===e&&(d=r.parentDrawable),(S||gf(r,y))&&(g&&this.processEdgeCases(t,Jg(o),$g(r)),this.processSubBlock(t,o,r,d,g,S),o=null,d=null,g=!1),S)break;r=y}}else{if(t.drawableBefore&&t.drawableAfter){const r=!gf(t.drawableBefore,t.drawableAfter);this.processEdgeCases(t,r,r)}t.drawableBefore&&!$g(t.drawableBefore)?this.linkAfterDrawable(t.drawableBefore):t.drawableAfter&&!Jg(t.drawableAfter)&&this.linkBeforeDrawable(t.drawableAfter)}}processSubBlock(e,t,i,s,r,o){const d=Jg(t),g=$g(i);d&&(s=t.previousDrawable.pendingParentDrawable),g&&(s=i.nextDrawable.pendingParentDrawable),s=this.ensureUsedBlock(s,t);for(let y=t;this.notePendingAddition(y,s),y!==i;y=y.nextDrawable);d||this.linkBeforeDrawable(t),o&&!g&&this.linkAfterDrawable(i)}processEdgeCases(e,t,i){if(e.drawableBefore!==null&&e.drawableAfter!==null){const s=e.drawableBefore.pendingParentDrawable,r=e.drawableAfter.pendingParentDrawable,o=e.nextChangeInterval&&e.nextChangeInterval.drawableAfter?e.nextChangeInterval.drawableAfter.pendingParentDrawable:null;s===r&&(this.blockWasAdded=!0);let d;t&&i?d=s:this.blockWasAdded||s===r?(d=this.createBlock(e.drawableAfter.renderer,e.drawableAfter),this.blockOrderChanged=!0):d=r,r===d?this.blockWasAdded=!0:this.changeExternals(e,d),o!==r&&(this.blockWasAdded||this.unuseBlock(r),this.blockWasAdded=!1)}}changeExternals(e,t){const i=jL(e);this.notePendingMoves(t,e.drawableAfter,i),(!e.nextChangeInterval||e.nextChangeInterval.drawableBefore!==i)&&this.linkAfterDrawable(i)}notePendingMoves(e,t,i){for(let s=t;this.notePendingMove(s,e),s!==i;s=s.nextDrawable);}ensureUsedBlock(e,t){return e?e.used||this.useBlock(e):e=this.getBlockForRenderer(t.renderer,t),e}getBlockForRenderer(e,t){let i;if(!Le.isDOM(e))for(let s=this.reusableBlocks.length-1;s>=0;s--){const r=this.reusableBlocks[s];if(r.renderer===e){this.useBlockAtIndex(r,s),i=r;break}}return i||(i=this.createBlock(e,t)),this.blockOrderChanged=!0,i}unuseBlock(e){e.used&&(e.used=!1,this.reusableBlocks.push(e))}useBlock(e){this.useBlockAtIndex(e,he.indexOf(this.reusableBlocks,e))}useBlockAtIndex(e,t){this.reusableBlocks.splice(t,1),e.used=!0}removeUnusedBlocks(){for(;this.reusableBlocks.length;){const e=this.reusableBlocks.pop();this.markBlockForDisposal(e),this.blockOrderChanged=!0}}linkBeforeDrawable(e){const t=e.previousDrawable;this.linkBlocks(t?t.pendingParentDrawable:null,e.pendingParentDrawable,t,e)}linkAfterDrawable(e){const t=e.nextDrawable;this.linkBlocks(e.pendingParentDrawable,t?t.pendingParentDrawable:null,e,t)}linkBlocks(e,t,i,s){e&&(e.nextBlock!==t&&(this.blockOrderChanged=!0,e.nextBlock&&(e.nextBlock.previousBlock=null),e.nextBlock=t),this.markAfterBlock(e,i)),t&&(t.previousBlock!==e&&(this.blockOrderChanged=!0,t.previousBlock&&(t.previousBlock.nextBlock=null),t.previousBlock=e),this.markBeforeBlock(t,s))}processBlockLinkedList(e,t,i){for(;e.blocks.length;)e.blocks.pop();if(t)for(let s=t;e.blocks.push(s),s!==i;s=s.nextBlock);}}class el extends va{constructor(e,t,i,s,r){super(),this.initialize(e,t,i,s,r)}initialize(e,t,i,s,r){if(super.initialize(s),this.display=e,this.backboneInstance=t,this.transformRootInstance=i,this.filterRootAncestorInstance=t.parent?t.parent.getFilterRootInstance():t,this.transformRootAncestorInstance=t.parent?t.parent.getTransformRootInstance():t,this.willApplyTransform=this.transformRootAncestorInstance!==this.transformRootInstance,this.willApplyFilters=this.filterRootAncestorInstance!==this.backboneInstance,this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.willApplyTransform&&(this.backboneInstance.relativeTransform.addListener(this.transformListener),this.backboneInstance.relativeTransform.addPrecompute()),this.backboneVisibilityListener=this.backboneVisibilityListener||this.updateBackboneVisibility.bind(this),this.backboneInstance.relativeVisibleEmitter.addListener(this.backboneVisibilityListener),this.updateBackboneVisibility(),this.visibilityDirty=!0,this.renderer=s,this.domElement=r?e.domElement:el.createDivBackbone(),this.isDisplayRoot=r,this.dirtyDrawables=bi(this.dirtyDrawables),Zi.prepareForTransform(this.domElement),this.watchedFilterNodes=bi(this.watchedFilterNodes),this.filterDirty=!0,this.clipDirty=!0,this.filterDirtyListener=this.filterDirtyListener||this.onFilterDirty.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipDirty.bind(this),this.willApplyFilters)for(let o=this.backboneInstance;o!==this.filterRootAncestorInstance;o=o.parent){const d=o.node;this.watchedFilterNodes.push(d),d.filterChangeEmitter.addListener(this.filterDirtyListener),d.clipAreaProperty.lazyLink(this.clipDirtyListener)}this.lastZIndex=0,this.blocks=this.blocks||[],this.previousFirstDrawable=null,this.previousLastDrawable=null,this.removedDrawables=!1,this.stitcher=this.stitcher||new QL}dispose(){for(;this.watchedFilterNodes.length;){const e=this.watchedFilterNodes.pop();e.filterChangeEmitter.removeListener(this.filterDirtyListener),e.clipAreaProperty.unlink(this.clipDirtyListener)}if(this.backboneInstance.relativeVisibleEmitter.removeListener(this.backboneVisibilityListener),!this.removedDrawables)for(let e=this.previousFirstDrawable;e!==null&&(e.parentDrawable.removeDrawable(e),e!==this.previousLastDrawable);e=e.nextDrawable);this.markBlocksForDisposal(),this.willApplyTransform&&(this.backboneInstance.relativeTransform.removeListener(this.transformListener),this.backboneInstance.relativeTransform.removePrecompute()),this.backboneInstance=null,this.transformRootInstance=null,this.filterRootAncestorInstance=null,this.transformRootAncestorInstance=null,bi(this.dirtyDrawables),bi(this.watchedFilterNodes),this.previousFirstDrawable=null,this.previousLastDrawable=null,super.dispose()}markBlocksForDisposal(){for(;this.blocks.length;){const e=this.blocks.pop();e.domElement.parentNode===this.domElement&&this.domElement.removeChild(e.domElement),e.markForDisposal(this.display)}}updateBackboneVisibility(){this.visible=this.backboneInstance.relativeVisible,this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}markForDisposal(e){for(let t=this.previousFirstDrawable;t!==null&&(t.notePendingRemoval(this.display),t!==this.previousLastDrawable);t=t.oldNextDrawable);this.removedDrawables=!0,super.markForDisposal(e)}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}markTransformDirty(){Zi.applyPreparedTransform(this.backboneInstance.relativeTransform.matrix,this.domElement)}onFilterDirty(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}onClipDirty(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}update(){if(!super.update())return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();if(this.filterDirty){this.filterDirty=!1;let e="";const t=this.watchedFilterNodes.length;for(let i=0;i<t;i++){const s=this.watchedFilterNodes[i],r=s.getEffectiveOpacity();for(let o=0;o<s._filters.length;o++)e+=`${e?" ":""}${s._filters[o].getCSSFilterString()}`;r!==1&&(e+=`${e?" ":""}opacity(${is(r)})`)}this.domElement.style.filter=e}return this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.display=this.visible?"":"none"),this.clipDirty&&(this.clipDirty=!1),!0}getFilterVisibility(){const e=this.watchedFilterNodes.length;for(let t=0;t<e;t++)if(!this.watchedFilterNodes[t].isVisible())return!1;return!0}getFilterClip(){return""}reindexBlocks(){let e=0;for(let t=0;t<this.blocks.length;t++){const i=this.blocks[t];if(i.zIndex<=e){const s=t+1<this.blocks.length&&this.blocks[t+1].zIndex-1>e?Math.ceil((e+this.blocks[t+1].zIndex)/2):e+20;i.domElement.style.zIndex=i.zIndex=s}e=i.zIndex}this.lastZIndex=e+1}stitch(e,t,i,s){if(i===null||s===null)return;let r=null,o=i,d=!1;for(;o;)d=o.constrict()||d,o.isEmpty()?r&&(r.nextChangeInterval=o.nextChangeInterval):(r||(i=o),r=o),o=o.nextChangeInterval;r&&(s=r,s.nextChangeInterval=null,this.stitcher.stitch(this,e,t,this.previousFirstDrawable,this.previousLastDrawable,i,s))}audit(e,t,i){}static createRootDivBackbone(){const e=document.createElement("div");return e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0",e}static createDivBackbone(){const e=document.createElement("div");return e.style.position="relative",e.style.left="0",e.style.top="0",e}static repurposeBackboneContainer(e){return(e.style.position!=="relative"||e.style.position!=="absolute")&&(e.style.position="relative"),e.style.left="0",e.style.top="0",e}}Ts.mixInto(el);const ZL=[];class x1 extends fh{paintCanvas(e,t,i){if(!t.selfBounds.isEmpty()){const s=e.context;s.save(),s.fillStyle="black",s.strokeStyle="black",s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.lineDash=ZL,s.lineDashOffset=0,s.miterLimit=10,t.paintCanvas(s),s.restore()}}}Ts.mixInto(x1);const JL=["canvasBounds"];class I1 extends Rt{constructor(e){super(e),this.setRendererBitmask(Le.bitmaskCanvas)}setCanvasBounds(e){this.invalidateSelf(e)}set canvasBounds(e){this.setCanvasBounds(e)}get canvasBounds(){return this.getCanvasBounds()}getCanvasBounds(){return this.getSelfBounds()}isPainted(){return!0}invalidatePaint(){const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirty()}canvasPaintSelf(e,t){this.paintCanvas(e.context)}containsPointSelf(e){return!1}getSelfShape(){return new Wt}createCanvasDrawable(e,t){return x1.createFromPool(e,t)}mutate(e){return super.mutate(e)}}I1.prototype._mutatorKeys=JL.concat(Rt.prototype._mutatorKeys);class hp{constructor(e,t,i){this.display=e,this.rootNode=t;const s=document.createElementNS(ws,"svg");s.style.position="absolute",s.setAttribute("class",i),s.style.top="0",s.style.left="0",s.style["pointer-events"]="none",this.svg=s;function r(o,d){s.setAttribute("width",""+o),s.setAttribute("height",""+d),s.style.clip=`rect(0px,${o}px,${d}px,0px)`}e.sizeProperty.link(o=>{r(o.width,o.height)}),this.domElement=s}addShape(e,t,i){const s=document.createElementNS(ws,"path");let r=e.getSVGPath();r||(r="M0 0"),r?s.setAttribute("d",r):s.hasAttribute("d")&&s.removeAttribute("d"),s.setAttribute("style",`fill: none; stroke: ${t}; stroke-dasharray: 5, 3; stroke-dashoffset: ${i?5:0}; stroke-width: 3;`),this.svg.appendChild(s)}update(){for(;this.svg.childNodes.length;)this.svg.removeChild(this.svg.childNodes[this.svg.childNodes.length-1]);this.addShapes()}dispose(){}}class ma{constructor(e,t){this.trail=e,this.setBefore(t)}isActive(){return!!this.trail}copy(){return new ma(this.trail.copy(),this.isBefore)}setBefore(e){this.isBefore=e,this.isAfter=!e}getRenderSwappedPointer(){const e=this,t=this.isBefore?e.trail.previous():e.trail.next();return t===null?null:new ma(t,!this.isBefore)}getRenderBeforePointer(){return this.isBefore?this:this.getRenderSwappedPointer()}getRenderAfterPointer(){return this.isAfter?this:this.getRenderSwappedPointer()}compareRender(e){const t=this.getRenderBeforePointer(),i=e.getRenderBeforePointer();return t!==null&&i!==null?t.trail.compare(i.trail):t===i?0:t===null?1:-1}compareNested(e){const t=this,i=e,s=t.trail.compare(i.trail);return s===0?this.isBefore===e.isBefore?0:this.isBefore?-1:1:t.trail.isExtensionOf(i.trail)?e.isBefore?1:-1:i.trail.isExtensionOf(t.trail)?this.isBefore?-1:1:s}equalsRender(e){return this.compareRender(e)===0}equalsNested(e){return this.compareNested(e)===0}hasTrail(){return!!this.trail}nestedForwards(){const e=this;if(this.isBefore){const t=e.trail.lastNode()._children;t.length>0?e.trail.addDescendant(t[0],0):this.setBefore(!1)}else{if(e.trail.indices.length===0)return this.trail=null,null;{const t=e.trail.indices[e.trail.indices.length-1];e.trail.removeDescendant();const i=e.trail.lastNode()._children;i.length>t+1&&(e.trail.addDescendant(i[t+1],t+1),this.setBefore(!0))}}return this}nestedBackwards(){const e=this;if(this.isBefore){if(e.trail.indices.length===0)return this.trail=null,null;{const t=e.trail.indices[e.trail.indices.length-1];e.trail.removeDescendant(),t-1>=0&&(e.trail.addDescendant(e.trail.lastNode()._children[t-1],t-1),this.setBefore(!1))}}else if(e.trail.lastNode()._children.length>0){const t=e.trail.lastNode()._children;e.trail.addDescendant(t[t.length-1],t.length-1)}else this.setBefore(!0);return this}eachNodeBetween(e,t){this.eachTrailBetween(e,i=>t(i.lastNode()))}eachTrailBetween(e,t){this.isBefore&&t(this.trail),this.depthFirstUntil(e,i=>i.isBefore?t(i.trail):!1,!0)}depthFirstUntil(e,t,i){const s=this,r=e;s.trail.reindex(),r.trail.reindex();const o=this.copy();o.trail.setMutable();let d=!0;for(;!o.equalsNested(e);){let g=!1;if(d?(i||(g=t(o)),d=!1):g=t(o),g&&o.isBefore){if(o.setBefore(!1),o.compareNested(e)===1)break}else o.nestedForwards()}i||t(o)}toString(){return`[${this.isBefore?"before":"after"} ${this.trail.toString().slice(1)}`}static compareNested(e,t,i,s){const r=e.compare(i);return r===0?t===s?0:t?-1:1:e.isExtensionOf(i)?s?1:-1:i.isExtensionOf(e)?t?-1:1:r}static eachTrailUnder(e,t){new ma(e,!0).eachTrailBetween(new ma(e,!1),t)}static eachPaintedTrailBetween(e,t,i,s,r){ma.eachTrailBetween(e,t,o=>o.isPainted()?i(o):!1,s,r)}static eachTrailBetween(e,t,i,s,r){const o=e?new ma(e.copy(),!0):new ma(new Ki(r),!0),d=t?new ma(t.copy(),!0):new ma(new Ki(r),!1);s&&(o.nestedForwards(),d.nestedBackwards(),o.compareNested(d)===1)||o.depthFirstUntil(d,g=>g.isBefore?i(g.trail):!1,!1)}}class $L extends hp{constructor(e,t){super(e,t,"canvasNodeBoundsOverlay")}addShapes(){ma.eachTrailUnder(new Ki(this.rootNode),e=>{const t=e.lastNode();if(!t.isVisible())return!0;if(t instanceof I1&&e.isVisible()){const i=e.getTransform();this.addShape(i.transformShape(Wt.bounds(t.selfBounds)),"rgba(0,255,0,0.8)",!0)}return!1})}}class Uc extends sp{initialize(e,t){return super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.markTransformDirty(),this.visibilityDirty=!0,t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}markTransformDirty(){this.transformDirty=!0,this.markDirty()}getTransformMatrix(){return this.instance.relativeTransform.validate(),this.instance.relativeTransform.matrix}update(){return super.update()?(this.updateDOM(),this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.visibility=this.visible?"":"hidden"),this.cleanPaintableState&&this.cleanPaintableState(),!0):!1}updateDOM(){}updateSelfVisibility(){super.updateSelfVisibility(),this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}class zm extends Uc{constructor(e,t){super(e,t),Zi.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement=this.node._container}updateDOM(){this.transformDirty&&!this.node._preventTransform&&Zi.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.transformDirty=!1}dispose(){super.dispose(),this.domElement=null}}Ts.mixInto(zm);class eN extends hp{constructor(e,t){super(e,t,"canvasNodeBoundsOverlay")}addShapes(){const e=this;function t(r,o){r.willApplyTransform&&(o=o.timesMatrix(r.backboneInstance.relativeTransform.matrix)),r.blocks.forEach(d=>{i(d,o)})}function i(r,o){if(r instanceof sn&&!r.fitBounds.isEmpty()&&e.addShape(Wt.bounds(r.fitBounds).transformed(o),"rgba(255,0,0,0.8)",!0),r.firstDrawable&&r.lastDrawable){for(let d=r.firstDrawable;d!==r.lastDrawable;d=d.nextDrawable)s(d,o);s(r.lastDrawable,o)}}function s(r,o){r instanceof el&&t(r,o)}t(this.display.rootBackbone,mt.IDENTITY)}}const Sb=Bs(document,"exitFullscreen")||Bs(document,"cancelFullScreen"),tN=Bs(document,"fullscreenElement")||Bs(document,"fullScreenElement"),iN=Bs(document,"fullscreenEnabled")||Bs(document,"fullScreenEnabled");let Hm=nI(document,"fullscreenchange");Hm==="msfullscreenchange"&&(Hm="MSFullscreenChange");const jh={isFullScreen(){return!!document[tN]},isFullScreenEnabled(){return document[iN]&&!An.safari7},enterFullScreen(n){const e=Bs(document.body,"requestFullscreen")||Bs(document.body,"requestFullScreen");n.domElement[e]&&n.domElement[e]()},exitFullScreen(){document[Sb]&&document[Sb]()},toggleFullScreen(n){jh.isFullScreen()?jh.exitFullScreen():jh.enterFullScreen(n)},isFullScreenProperty:new Li(!1)};document.addEventListener(Hm,n=>{jh.isFullScreenProperty.set(jh.isFullScreen())});const k1="rgba(255,255,0,0.5)";class L1 extends pf{constructor(e,t){const i=St()({innerStroke:null,outerStroke:null,fill:k1},t);super(e,i)}}L1.ACTIVATED_HIGHLIGHT_COLOR=k1;const ph=(n,e,t)=>{const i=`_${n}PendingOptions`,s=`_${n}IsConstructed`;return class extends t{constructor(...o){super(...o),this[s]=!0,this.mutate(this[i]),this[i]=void 0}mutate(o){return o&&!this[s]&&(this[i]=Qi(this[i]||{},he.pick(o,e)),o=he.omit(o,e)),super.mutate(o)}}},Cb=["interactiveHighlight","interactiveHighlightLayerable","interactiveHighlightEnabled"],N1=mr(n=>{const e=ph("InteractiveHighlightingClass",Cb,class extends n{constructor(...i){super(...i),this._pointer=null,this.displays={},this._interactiveHighlight=null,this._interactiveHighlightLayerable=!1,this._interactiveHighlightEnabled=!0,this.interactiveHighlightChangedEmitter=new Hi,this._isInteractiveHighlightActiveProperty=new Ni(!1),this._activationListener={enter:this._onPointerEntered.bind(this),over:this._onPointerOver.bind(this),move:this._onPointerMove.bind(this),exit:this._onPointerExited.bind(this),down:this._onPointerDown.bind(this)},this._changedInstanceListener=this.onChangedInstance.bind(this),this.changedInstanceEmitter.addListener(this._changedInstanceListener),this._interactiveHighlightingEnabledListener=this._onInteractiveHighlightingEnabledChange.bind(this),this._boundPointerFocusClearedListener=this.handleLockedPointerFocusCleared.bind(this);const s=this._onPointerRelease.bind(this),r=this._onPointerCancel.bind(this);this._pointerListener={up:s,cancel:r,interrupt:r},this.isInteractiveHighlightActiveProperty=this._isInteractiveHighlightActiveProperty}get _isInteractiveHighlighting(){return!0}static get _mixesInteractiveHighlighting(){return!0}setInteractiveHighlight(i){this._interactiveHighlight!==i&&(this._interactiveHighlight=i,this._interactiveHighlightLayerable&&(i.visible=!1),this.interactiveHighlightChangedEmitter.emit())}set interactiveHighlight(i){this.setInteractiveHighlight(i)}get interactiveHighlight(){return this.getInteractiveHighlight()}getInteractiveHighlight(){return this._interactiveHighlight}setInteractiveHighlightLayerable(i){this._interactiveHighlightLayerable!==i&&(this._interactiveHighlightLayerable=i,this._interactiveHighlight&&(this._interactiveHighlight.visible=!1,this.interactiveHighlightChangedEmitter.emit()))}set interactiveHighlightLayerable(i){this.setInteractiveHighlightLayerable(i)}get interactiveHighlightLayerable(){return this.getInteractiveHighlightLayerable()}getInteractiveHighlightLayerable(){return this._interactiveHighlightLayerable}setInteractiveHighlightEnabled(i){this._interactiveHighlightEnabled=i;const s=Object.keys(this.displays);for(let r=0;r<s.length;r++){const o=this.displays[s[r]];this._interactiveHighlightingEnabledListener(o.focusManager.pointerHighlightsVisibleProperty.value)}}getInteractiveHighlightEnabled(){return this._interactiveHighlightEnabled}set interactiveHighlightEnabled(i){this.setInteractiveHighlightEnabled(i)}get interactiveHighlightEnabled(){return this.getInteractiveHighlightEnabled()}isInteractiveHighlightActivated(){let i=!1;const s=Object.keys(this.displays);for(let r=0;r<s.length;r++){const o=this.displays[s[r]];if(o.focusManager.pointerHighlightsVisibleProperty.value){const d=o.focusManager.pointerFocusProperty.value,g=o.focusManager.lockedPointerFocusProperty.value;if(g){if((g==null?void 0:g.trail.lastNode())===this){i=!0;break}}else if((d==null?void 0:d.trail.lastNode())===this){i=!0;break}}}return i}handleHighlightActiveChange(){this._isInteractiveHighlightActiveProperty.value=this.isInteractiveHighlightActivated()}dispose(){this.changedInstanceEmitter.removeListener(this._changedInstanceListener),this.hasInputListener(this._activationListener)&&this.removeInputListener(this._activationListener),this._pointer&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null);const i=Object.keys(this.displays);for(let s=0;s<i.length;s++){const r=this.displays[i[s]];this.onDisplayRemoved(r),delete this.displays[i[s]]}super.dispose&&super.dispose()}_onPointerOver(i){const s=i.trail.nodes.find(r=>r.groupFocusHighlight&&Jh(r));if(s){const r=i.trail.subtrailTo(s),o=Object.values(this.displays);for(let d=0;d<o.length;d++){const g=o[d];g.focusManager.pointerFocusProperty.value===null&&g.focusManager.pointerFocusProperty.set(new $o(g,r))}}}_onPointerEntered(i){let s=!1;const r=Object.values(this.displays);for(let o=0;o<r.length;o++){const d=r[o];if(d.focusManager.pointerFocusProperty.value===null||!i.trail.equals(d.focusManager.pointerFocusProperty.value.trail)){const g=new $o(d,i.trail);d.focusManager.pointerFocusProperty.set(g),d.focusManager.lockedPointerFocusProperty.value===null&&i.pointer.attachedListener&&(this.lockHighlight(g,d.focusManager),s=!0)}}s&&this.savePointer(i.pointer)}_onPointerMove(i){let s=!1;const r=Object.values(this.displays);for(let o=0;o<r.length;o++){const d=r[o],g=i.trail.subtrailTo(this);if((d.focusManager.pointerFocusProperty.value===null||!g.equals(d.focusManager.pointerFocusProperty.value.trail))&&!this.getDescendantsUseHighlighting(i.trail)){const y=new $o(d,g);d.focusManager.pointerFocusProperty.set(y),d.focusManager.lockedPointerFocusProperty.value===null&&i.pointer.attachedListener&&(this.lockHighlight(y,d.focusManager),s=!0)}}s&&this.savePointer(i.pointer)}_onPointerExited(i){const s=Object.values(this.displays);for(let r=0;r<s.length;r++){const o=s[r];o.focusManager.pointerFocusProperty.set(null);const d=o.focusManager.lockedPointerFocusProperty.value;!i.trail.isPickable()&&(d===null||i.trail.containsNode(d.trail.lastNode()))&&this._onPointerRelease(i)}}_onPointerDown(i){if(this._pointer===null){let s=!1;const r=Object.values(this.displays);for(let o=0;o<r.length;o++){const d=r[o],g=d.focusManager.pointerFocusProperty.value,y=!!d.focusManager.lockedPointerFocusProperty.value;g&&!y&&(this.lockHighlight(g,d.focusManager),s=!0)}s&&this.savePointer(i.pointer)}}onDisplayAdded(i){i.focusManager.pointerHighlightsVisibleProperty.hasListener(this._interactiveHighlightingEnabledListener)||i.focusManager.pointerHighlightsVisibleProperty.link(this._interactiveHighlightingEnabledListener)}onDisplayRemoved(i){i.focusManager.lockedPointerFocusProperty.hasListener(this._boundPointerFocusClearedListener)&&i.focusManager.lockedPointerFocusProperty.unlink(this._boundPointerFocusClearedListener),i.focusManager.pointerHighlightsVisibleProperty.unlink(this._interactiveHighlightingEnabledListener)}_onPointerRelease(i){const s=Object.values(this.displays);for(let r=0;r<s.length;r++){const o=s[r];o.focusManager.lockedPointerFocusProperty.value=null,o.focusManager.lockedPointerFocusProperty.hasListener(this._boundPointerFocusClearedListener)&&o.focusManager.lockedPointerFocusProperty.unlink(this._boundPointerFocusClearedListener)}this._pointer&&this._pointer.listeners.includes(this._pointerListener)&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null)}_onPointerCancel(i){const s=Object.values(this.displays);for(let r=0;r<s.length;r++)s[r].focusManager.pointerFocusProperty.set(null);this._onPointerRelease(i)}savePointer(i){this._pointer=i,this._pointer.addInputListener(this._pointerListener)}lockHighlight(i,s){s.lockedPointerFocusProperty.set(new $o(i.display,i.trail.copy())),s.lockedPointerFocusProperty.link(this._boundPointerFocusClearedListener)}handleLockedPointerFocusCleared(i){i===null&&this._onPointerRelease()}_onInteractiveHighlightingEnabledChange(i){const s=i&&this._interactiveHighlightEnabled,r=this.hasInputListener(this._activationListener);s&&!r?this.addInputListener(this._activationListener):!s&&r&&this.removeInputListener(this._activationListener),this.handleHighlightActiveChange()}onChangedInstance(i,s){const r=i.trail.uniqueId;if(s){const o=i.display;this.displays[r]=o,this.onDisplayAdded(o)}else{const o=this.displays[r];i.node.instances.length===0&&this.onDisplayRemoved(o),delete this.displays[r]}}getDescendantsUseHighlighting(i){const s=i.nodes.indexOf(this),r=i.nodes.slice(s+1,i.nodes.length);let o=!1;for(let d=0;d<r.length;d++)if(Jh(r[d])){o=!0;break}return o}mutate(i){return super.mutate(i)}});return e.prototype._mutatorKeys=Cb.concat(e.prototype._mutatorKeys),e}),Z0=new op(Rl,{featureSpecificAnnouncingControlPropertyName:"voicingCanAnnounceProperty"});Z0.enabled=!1;function sN(n){if(!(n instanceof Sn))throw new Error("utterance is not an Utterance")}class Pb extends Sn{constructor(e){super(e)}}const Km=["voicingNameResponse","voicingObjectResponse","voicingContextResponse","voicingHintResponse","voicingUtterance","voicingResponsePatternCollection","voicingIgnoreVoicingManagerProperties","voicingFocusListener"],Hr=n=>{const e=ph("Voicing",Km,class B1 extends N1(n){constructor(...i){super(...i),this._voicingNameResponseOverride=!1,this._voicingHintResponseOverride=!1,this._boundInstanceCanVoiceChangeListener=this.onInstanceCanVoiceChange.bind(this),this._voicingUtterance=null,B1.prototype.initialize.call(this)}initialize(...i){return super.initialize&&super.initialize(i),this._voicingCanSpeakProperty=new Ni(!0),this._voicingResponsePacket=new Vo,this._voicingFocusListener=this.defaultFocusListener,this.setVoicingUtterance(new Pb),this._voicingCanSpeakCount=0,this._boundInstancesChangedListener=this.addOrRemoveInstanceListeners.bind(this),this.changedInstanceEmitter.addListener(this._boundInstancesChangedListener),this._speakContentOnFocusListener={focus:s=>{this._voicingFocusListener&&this._voicingFocusListener(s)}},this.addInputListener(this._speakContentOnFocusListener),this}voicingSpeakFullResponse(i){const s=Qi({},i);s.hasOwnProperty("nameResponse")||(s.nameResponse=this._voicingResponsePacket.nameResponse),s.hasOwnProperty("objectResponse")||(s.objectResponse=this._voicingResponsePacket.objectResponse),s.hasOwnProperty("contextResponse")||(s.contextResponse=this._voicingResponsePacket.contextResponse),s.hasOwnProperty("hintResponse")||(s.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(s)}voicingSpeakResponse(i){const s=Qi({nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null},i);this.collectAndSpeakResponse(s)}voicingSpeakNameResponse(i){const s=Qi({},i);s.hasOwnProperty("nameResponse")||(s.nameResponse=this._voicingResponsePacket.nameResponse),this.collectAndSpeakResponse(s)}voicingSpeakObjectResponse(i){const s=Qi({},i);s.hasOwnProperty("objectResponse")||(s.objectResponse=this._voicingResponsePacket.objectResponse),this.collectAndSpeakResponse(s)}voicingSpeakContextResponse(i){const s=Qi({},i);s.hasOwnProperty("contextResponse")||(s.contextResponse=this._voicingResponsePacket.contextResponse),this.collectAndSpeakResponse(s)}voicingSpeakHintResponse(i){const s=Qi({},i);s.hasOwnProperty("hintResponse")||(s.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(s)}collectAndSpeakResponse(i){this.speakContent(this.collectResponse(i))}collectResponse(i){const s=Qi({ignoreProperties:this._voicingResponsePacket.ignoreProperties,responsePatternCollection:this._voicingResponsePacket.responsePatternCollection,utterance:this.voicingUtterance},i);let r=o1.collectResponses(s);return s.utterance&&(s.utterance.alert=r,r=s.utterance),r}speakContent(i){const s=!rt.PHET_IO_ENABLED||!this.isInsidePhetioArchetype();i&&s&&Z0.addToBack(i)}setVoicingNameResponse(i){this._voicingNameResponseOverride=i!==null,this._voicingResponsePacket.nameResponse=i}set voicingNameResponse(i){this.setVoicingNameResponse(i)}get voicingNameResponse(){return this.getVoicingNameResponse()}getVoicingNameResponse(){return this._voicingResponsePacket.nameResponse}applyDefaultNameResponse(i){this._voicingNameResponseOverride||(this._voicingResponsePacket.nameResponse=i)}setVoicingObjectResponse(i){this._voicingResponsePacket.objectResponse=i}set voicingObjectResponse(i){this.setVoicingObjectResponse(i)}get voicingObjectResponse(){return this.getVoicingObjectResponse()}getVoicingObjectResponse(){return this._voicingResponsePacket.objectResponse}setVoicingContextResponse(i){this._voicingResponsePacket.contextResponse=i}set voicingContextResponse(i){this.setVoicingContextResponse(i)}get voicingContextResponse(){return this.getVoicingContextResponse()}getVoicingContextResponse(){return this._voicingResponsePacket.contextResponse}setVoicingHintResponse(i){this._voicingHintResponseOverride=i!==null,this._voicingResponsePacket.hintResponse=i}set voicingHintResponse(i){this.setVoicingHintResponse(i)}get voicingHintResponse(){return this.getVoicingHintResponse()}getVoicingHintResponse(){return this._voicingResponsePacket.hintResponse}applyDefaultHintResponse(i){this._voicingHintResponseOverride||(this._voicingResponsePacket.hintResponse=i)}setVoicingIgnoreVoicingManagerProperties(i){this._voicingResponsePacket.ignoreProperties=i}set voicingIgnoreVoicingManagerProperties(i){this.setVoicingIgnoreVoicingManagerProperties(i)}get voicingIgnoreVoicingManagerProperties(){return this.getVoicingIgnoreVoicingManagerProperties()}getVoicingIgnoreVoicingManagerProperties(){return this._voicingResponsePacket.ignoreProperties}setVoicingResponsePatternCollection(i){this._voicingResponsePacket.responsePatternCollection=i}set voicingResponsePatternCollection(i){this.setVoicingResponsePatternCollection(i)}get voicingResponsePatternCollection(){return this.getVoicingResponsePatternCollection()}getVoicingResponsePatternCollection(){return this._voicingResponsePacket.responsePatternCollection}setVoicingUtterance(i){this._voicingUtterance!==i&&(this._voicingUtterance&&this.cleanVoicingUtterance(),Hr.registerUtteranceToVoicingNode(i,this),this._voicingUtterance=i)}set voicingUtterance(i){this.setVoicingUtterance(i)}get voicingUtterance(){return this.getVoicingUtterance()}getVoicingUtterance(){return sN(this._voicingUtterance),this._voicingUtterance}setVoicingFocusListener(i){this._voicingFocusListener=i}set voicingFocusListener(i){this.setVoicingFocusListener(i)}get voicingFocusListener(){return this.getVoicingFocusListener()}getVoicingFocusListener(){return this._voicingFocusListener}defaultFocusListener(){this.voicingSpeakFullResponse({contextResponse:null})}get _isVoicing(){return!0}dispose(){this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),super.dispose()}clean(){this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),super.clean&&super.clean()}onInstanceCanVoiceChange(i){i?this._voicingCanSpeakCount++:this._voicingCanSpeakCount--,this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}handleInstancesChanged(i,s){i.visible&&i.voicingVisible&&(this._voicingCanSpeakCount=s?this._voicingCanSpeakCount+1:this._voicingCanSpeakCount-1),this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}addOrRemoveInstanceListeners(i,s){s?i.canVoiceEmitter.addListener(this._boundInstanceCanVoiceChangeListener):i.canVoiceEmitter.removeListener(this._boundInstanceCanVoiceChangeListener),this.handleInstancesChanged(i,s)}cleanVoicingUtterance(){this._voicingUtterance instanceof Pb?this._voicingUtterance.dispose():this._voicingUtterance&&!this._voicingUtterance.isDisposed&&Hr.unregisterUtteranceToVoicingNode(this._voicingUtterance,this)}mutate(i){return super.mutate(i)}});return e.prototype._mutatorKeys=Km.concat(e.prototype._mutatorKeys),e};Hr.VOICING_OPTION_KEYS=Km;Hr.alertUtterance=n=>{Z0.addToBack(n)};Hr.registerUtteranceToVoicingNode=(n,e)=>{const t=n.voicingCanAnnounceProperties,i=e._voicingCanSpeakProperty;t.includes(i)||(n.voicingCanAnnounceProperties=t.concat([i]))};Hr.unregisterUtteranceToVoicingNode=(n,e)=>{const t=n.voicingCanAnnounceProperties,i=e._voicingCanSpeakProperty,s=t.indexOf(i);n.voicingCanAnnounceProperties=t.splice(s,1)};Hr.registerUtteranceToNode=(n,e)=>{const t=n.voicingCanAnnounceProperties;t.includes(e.visibleProperty)||(n.voicingCanAnnounceProperties=n.voicingCanAnnounceProperties.concat([e.visibleProperty])),t.includes(e.voicingVisibleProperty)||(n.voicingCanAnnounceProperties=n.voicingCanAnnounceProperties.concat([e.voicingVisibleProperty]))};Hr.unregisterUtteranceToNode=(n,e)=>{const t=n.voicingCanAnnounceProperties,i=t.indexOf(e.visibleProperty),r=t.splice(i,1).indexOf(e.voicingVisibleProperty),o=t.splice(r,1);n.voicingCanAnnounceProperties=o};Hr.BASIC_ACCESSIBLE_NAME_BEHAVIOR=(n,e,t)=>{const i=n;return e=_a.BASIC_ACCESSIBLE_NAME_BEHAVIOR(i,e,t),i.applyDefaultNameResponse(t),e};Hr.BASIC_HELP_TEXT_BEHAVIOR=(n,e,t)=>{const i=n;return e=_a.HELP_TEXT_AFTER_CONTENT(i,e,t),i.applyDefaultHintResponse(t),e};new yc({nameHint:"{{NAME}}. {{HINT}}"});function em(n){return n instanceof Rt&&n._isReadingBlock}let Eb=ji.OUTER_FOCUS_COLOR,Db=ji.INNER_FOCUS_COLOR,Tb=ji.INNER_LIGHT_GROUP_FOCUS_COLOR,xb=ji.OUTER_LIGHT_GROUP_FOCUS_COLOR;class ea{constructor(e,t,i,s){this.trail=null,this.node=null,this.activeHighlight=null,this.mode=null,this.groupMode=null,this.groupHighlightNode=null,this.transformTracker=null,this.groupTransformTracker=null,this.nodeModeHighlight=null,this.nodeModeHighlightLayered=!1,this.transformDirty=!0,this.highlightNode=new Rt,this.readingBlockHighlightNode=new Rt,this.addedReadingBlockHighlight=null,this.activeReadingBlockNode=null,this.readingBlockTrail=null,this.readingBlockTransformDirty=!0,this.readingBlockTransformTracker=null;const r=St()({pdomFocusHighlightsVisibleProperty:new Ri(!0),interactiveHighlightsVisibleProperty:new Ri(!1),readingBlockHighlightsVisibleProperty:new Ri(!1)},s);this.display=e,this.focusRootNode=t,this.focusRootNode.addChild(this.highlightNode),this.focusRootNode.addChild(this.readingBlockHighlightNode),this.pdomFocusHighlightsVisibleProperty=r.pdomFocusHighlightsVisibleProperty,this.interactiveHighlightsVisibleProperty=r.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty=r.readingBlockHighlightsVisibleProperty,this.focusDisplay=new i(this.focusRootNode,{allowWebGL:e.isWebGLAllowed(),allowCSSHacks:!1,accessibility:!1,interactive:!1,allowLayerFitting:!0}),this.domElement=this.focusDisplay.domElement,this.domElement.style.pointerEvents="none",this.shapeFocusHighlightPath=new ji(null),this.boundsFocusHighlightPath=new pf(null,{useLocalBounds:!0}),this.highlightNode.addChild(this.shapeFocusHighlightPath),this.highlightNode.addChild(this.boundsFocusHighlightPath),this.groupFocusHighlightPath=new pf(null,{useLocalBounds:!0,useGroupDilation:!0,outerLineWidth:ji.GROUP_OUTER_LINE_WIDTH,innerLineWidth:ji.GROUP_INNER_LINE_WIDTH,innerStroke:ji.OUTER_FOCUS_COLOR}),this.groupFocusHighlightParent=new Rt({children:[this.groupFocusHighlightPath]}),this.focusRootNode.addChild(this.groupFocusHighlightParent),this.readingBlockHighlightPath=new L1(null),this.readingBlockHighlightNode.addChild(this.readingBlockHighlightPath),this.boundsListener=this.onBoundsChange.bind(this),this.transformListener=this.onTransformChange.bind(this),this.domFocusListener=this.onFocusChange.bind(this),this.readingBlockTransformListener=this.onReadingBlockTransformChange.bind(this),this.focusHighlightListener=this.onFocusHighlightChange.bind(this),this.interactiveHighlightListener=this.onInteractiveHighlightChange.bind(this),this.focusHighlightsVisibleListener=this.onFocusHighlightsVisibleChange.bind(this),this.voicingHighlightsVisibleListener=this.onVoicingHighlightsVisibleChange.bind(this),this.pointerFocusListener=this.onPointerFocusChange.bind(this),this.lockedPointerFocusListener=this.onLockedPointerFocusChange.bind(this),this.readingBlockFocusListener=this.onReadingBlockFocusChange.bind(this),this.readingBlockHighlightChangeListener=this.onReadingBlockHighlightChange.bind(this),gr.link(this.domFocusListener),e.focusManager.pointerFocusProperty.link(this.pointerFocusListener),e.focusManager.readingBlockFocusProperty.link(this.readingBlockFocusListener),e.focusManager.lockedPointerFocusProperty.link(this.lockedPointerFocusListener),this.pdomFocusHighlightsVisibleProperty.link(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.link(this.voicingHighlightsVisibleListener)}dispose(){this.hasHighlight()&&this.deactivateHighlight(),gr.unlink(this.domFocusListener),this.pdomFocusHighlightsVisibleProperty.unlink(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.unlink(this.voicingHighlightsVisibleListener),this.display.focusManager.pointerFocusProperty.unlink(this.pointerFocusListener),this.display.focusManager.readingBlockFocusProperty.unlink(this.readingBlockFocusListener),this.focusDisplay.dispose()}hasHighlight(){return!!this.trail}hasReadingBlockHighlight(){return!!this.readingBlockTrail}activateHighlight(e,t,i,s,r){this.trail=e,this.node=t;const o=i;this.activeHighlight=o;let d=e;o==="invisible"?this.mode="invisible":o instanceof Wt?(this.mode="shape",this.shapeFocusHighlightPath.visible=!0,this.shapeFocusHighlightPath.setShape(o)):o instanceof Rt?(this.mode="node",o instanceof ji&&o.transformSourceNode&&(d=o.getUniqueHighlightTrail(this.trail)),this.nodeModeHighlight=o,s?(this.nodeModeHighlightLayered=!0,this.nodeModeHighlight.visible=r.get()):(this.nodeModeHighlight.visible=!0,this.highlightNode.addChild(this.nodeModeHighlight))):(this.mode="bounds",this.boundsFocusHighlightPath.setShapeFromNode(this.node,this.trail),this.boundsFocusHighlightPath.visible=!0,this.node.localBoundsProperty.lazyLink(this.boundsListener),this.onBoundsChange()),this.transformTracker=new jl(d,{isStatic:!0}),this.transformTracker.addListener(this.transformListener),this.activateGroupHighlights(),this.updateHighlightColors(),this.transformDirty=!0}activateFocusHighlight(e,t){this.activateHighlight(e,t,t.focusHighlight,t.focusHighlightLayerable,this.pdomFocusHighlightsVisibleProperty),t.focusHighlightChangedEmitter.addListener(this.focusHighlightListener)}activateInteractiveHighlight(e,t){this.activateHighlight(e,t,t.interactiveHighlight||t.focusHighlight,t.interactiveHighlightLayerable,this.interactiveHighlightsVisibleProperty),t.interactiveHighlightChangedEmitter.addListener(this.interactiveHighlightListener),t.focusHighlightChangedEmitter.addListener(this.interactiveHighlightListener)}activateReadingBlockHighlight(e){this.readingBlockTrail=e;const t=e.lastNode();if(em(t)){this.activeReadingBlockNode=t;const i=this.activeReadingBlockNode.readingBlockActiveHighlight;this.addedReadingBlockHighlight=i,i==="invisible"||(i instanceof Wt?(this.readingBlockHighlightPath.setShape(i),this.readingBlockHighlightPath.visible=!0):i instanceof Rt?this.readingBlockHighlightNode.addChild(i):(this.readingBlockHighlightPath.setShapeFromNode(this.activeReadingBlockNode,this.readingBlockTrail),this.readingBlockHighlightPath.visible=!0)),this.readingBlockTransformTracker=new jl(this.readingBlockTrail,{isStatic:!0}),this.readingBlockTransformTracker.addListener(this.readingBlockTransformListener),this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.addListener(this.readingBlockHighlightChangeListener),this.readingBlockTransformDirty=!0}}deactivateReadingBlockHighlight(){this.readingBlockHighlightPath.visible=!1,this.addedReadingBlockHighlight instanceof Rt&&this.readingBlockHighlightNode.removeChild(this.addedReadingBlockHighlight);const e=this.readingBlockTransformTracker;e.removeListener(this.readingBlockTransformListener),e.dispose(),this.readingBlockTransformTracker=null,this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.removeListener(this.readingBlockHighlightChangeListener),this.activeReadingBlockNode=null,this.readingBlockTrail=null,this.addedReadingBlockHighlight=null}deactivateHighlight(){const e=this.node;if(this.mode==="shape")this.shapeFocusHighlightPath.visible=!1;else if(this.mode==="node"){const t=this.nodeModeHighlight;this.nodeModeHighlightLayered?this.nodeModeHighlightLayered=!1:!t.isDisposed&&this.highlightNode.removeChild(t),t.isDisposed||(t.visible=!1),this.nodeModeHighlight=null}else this.mode==="bounds"&&(this.boundsFocusHighlightPath.visible=!1,e.localBoundsProperty.unlink(this.boundsListener));e.focusHighlightChangedEmitter.hasListener(this.focusHighlightListener)&&e.focusHighlightChangedEmitter.removeListener(this.focusHighlightListener),Jh(e)&&(e.interactiveHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&e.interactiveHighlightChangedEmitter.removeListener(this.interactiveHighlightListener),e.focusHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&e.focusHighlightChangedEmitter.removeListener(this.interactiveHighlightListener)),this.deactivateGroupHighlights(),this.trail=null,this.node=null,this.mode=null,this.activeHighlight=null,this.transformTracker.removeListener(this.transformListener),this.transformTracker.dispose(),this.transformTracker=null}activateGroupHighlights(){const e=this.trail;for(let t=0;t<e.length;t++){const i=e.nodes[t],s=i.groupFocusHighlight;if(s){const r=e.upToNode(i);this.groupTransformTracker=new jl(r),this.groupTransformTracker.addListener(this.transformListener),typeof s=="boolean"?(this.groupFocusHighlightPath.setShapeFromNode(i,r),this.groupFocusHighlightPath.visible=!0,this.groupHighlightNode=this.groupFocusHighlightPath,this.groupMode="bounds"):s instanceof Rt&&(this.groupHighlightNode=s,this.groupFocusHighlightParent.addChild(s),this.groupMode="node");break}}}updateHighlightColors(){this.mode==="shape"?(this.shapeFocusHighlightPath.innerHighlightColor!==ea.getInnerHighlightColor()&&this.shapeFocusHighlightPath.setInnerHighlightColor(ea.getInnerHighlightColor()),this.shapeFocusHighlightPath.outerHighlightColor!==ea.getOuterHighlightColor()&&this.shapeFocusHighlightPath.setOuterHighlightColor(ea.getOuterHighlightColor())):this.mode==="bounds"&&(this.boundsFocusHighlightPath.innerHighlightColor!==ea.getInnerHighlightColor()&&this.boundsFocusHighlightPath.setInnerHighlightColor(ea.getInnerHighlightColor()),this.boundsFocusHighlightPath.outerHighlightColor!==ea.getOuterHighlightColor()&&this.boundsFocusHighlightPath.setOuterHighlightColor(ea.getOuterHighlightColor())),this.groupMode&&(this.groupFocusHighlightPath.innerHighlightColor!==ea.getInnerGroupHighlightColor()&&this.groupFocusHighlightPath.setInnerHighlightColor(ea.getInnerGroupHighlightColor()),this.groupFocusHighlightPath.outerHighlightColor!==ea.getOuterGroupHighlightColor()&&this.groupFocusHighlightPath.setOuterHighlightColor(ea.getOuterGroupHighlightColor()))}deactivateGroupHighlights(){this.groupMode&&(this.groupMode==="bounds"?this.groupFocusHighlightPath.visible=!1:this.groupMode==="node"&&this.groupFocusHighlightParent.removeChild(this.groupHighlightNode),this.groupMode=null,this.groupHighlightNode=null,this.groupTransformTracker.removeListener(this.transformListener),this.groupTransformTracker.dispose(),this.groupTransformTracker=null)}afterTransform(){const e=this.transformTracker.getMatrix().timesMatrix(ji.getCorrectiveScalingMatrix());this.mode==="shape"?this.shapeFocusHighlightPath.updateLineWidth(e):this.mode==="bounds"?this.boundsFocusHighlightPath.updateLineWidth(e):this.mode==="node"&&this.activeHighlight instanceof ji&&this.activeHighlight.updateLineWidth&&this.activeHighlight.updateLineWidth(e),this.groupHighlightNode&&(this.groupMode==="bounds"?this.groupFocusHighlightPath.updateLineWidth(e):this.groupMode==="node"&&this.groupHighlightNode instanceof ji&&this.groupHighlightNode.updateLineWidth&&this.groupHighlightNode.updateLineWidth(e)),this.readingBlockTrail&&this.readingBlockHighlightPath.updateLineWidth(e)}onTransformChange(){this.transformDirty=!0}onReadingBlockTransformChange(){this.readingBlockTransformDirty=!0}onBoundsChange(){this.boundsFocusHighlightPath.setShapeFromNode(this.node,this.trail)}onFocusChange(e){const t=e&&e.display===this.display?e.trail:null;if(this.hasHighlight()&&this.deactivateHighlight(),t&&this.pdomFocusHighlightsVisibleProperty.value){const i=t.lastNode();this.activateFocusHighlight(t,i)}else this.display.focusManager.pointerFocusProperty.value&&this.interactiveHighlightsVisibleProperty.value&&this.updateInteractiveHighlight(this.display.focusManager.pointerFocusProperty.value)}onPointerFocusChange(e){!this.display.focusManager.lockedPointerFocusProperty.value&&!this.display.focusManager.pdomFocusHighlightsVisibleProperty.value&&this.updateInteractiveHighlight(e)}updateInteractiveHighlight(e){const t=e&&e.display===this.display?e.trail:null;this.hasHighlight()&&this.deactivateHighlight();let i=!1;if(t&&!this.display.focusManager.pdomFocusHighlightsVisibleProperty.value){const s=t.lastNode();(em(s)&&this.readingBlockHighlightsVisibleProperty.value||!em(s)&&Jh(s)&&this.interactiveHighlightsVisibleProperty.value)&&(this.activateInteractiveHighlight(t,s),i=!0)}!i&&ys.pdomFocus&&this.pdomFocusHighlightsVisibleProperty.value&&this.onFocusChange(ys.pdomFocus)}onLockedPointerFocusChange(e){this.updateInteractiveHighlight(e||this.display.focusManager.pointerFocusProperty.value)}onReadingBlockFocusChange(e){this.hasReadingBlockHighlight()&&this.deactivateReadingBlockHighlight();const t=e&&e.display===this.display?e.trail:null;t&&this.activateReadingBlockHighlight(t)}onFocusHighlightChange(){this.onFocusChange(ys.pdomFocus)}onInteractiveHighlightChange(){this.updateInteractiveHighlight(this.display.focusManager.lockedPointerFocusProperty.value||this.display.focusManager.pointerFocusProperty.value)}onReadingBlockHighlightChange(){this.onReadingBlockFocusChange(this.display.focusManager.readingBlockFocusProperty.value)}onFocusHighlightsVisibleChange(){this.onFocusChange(ys.pdomFocus)}onVoicingHighlightsVisibleChange(){this.onPointerFocusChange(this.display.focusManager.pointerFocusProperty.value)}update(){this.hasHighlight()&&this.transformDirty&&(this.transformDirty=!1,this.highlightNode.setMatrix(this.transformTracker.matrix),this.groupHighlightNode&&this.groupHighlightNode.setMatrix(this.groupTransformTracker.matrix),this.afterTransform()),this.hasReadingBlockHighlight()&&this.readingBlockTransformDirty&&(this.readingBlockTransformDirty=!1,this.readingBlockHighlightNode.setMatrix(this.readingBlockTransformTracker.matrix)),this.display.size.equals(this.focusDisplay.size)||this.focusDisplay.setWidthHeight(this.display.width,this.display.height),this.focusDisplay.updateDisplay()}static setInnerHighlightColor(e){Db=e}static getInnerHighlightColor(){return Db}static setOuterHilightColor(e){Eb=e}static getOuterHighlightColor(){return Eb}static setInnerGroupHighlightColor(e){Tb=e}static getInnerGroupHighlightColor(){return Tb}static setOuterGroupHighlightColor(e){xb=e}static getOuterGroupHighlightColor(){return xb}}class Hh extends hp{constructor(e,t){super(e,t,"hitAreaOverlay")}addShapes(){ma.eachTrailUnder(new Ki(this.rootNode),e=>{const t=e.lastNode();if(!t.isVisible()||t.pickable===!1)return!0;if(t.inputListeners.length&&e.isVisible()){const i=Hh.getLocalMouseShape(t),s=Hh.getLocalTouchShape(t),r=e.getMatrix();i.bounds.isEmpty()||this.addShape(i.transformed(r),"rgba(0,0,255,0.8)",!0),s.bounds.isEmpty()||this.addShape(s.transformed(r),"rgba(255,0,0,0.8)",!1)}return!1})}static getLocalMouseShape(e){let t=Wt.union([e.mouseArea?e.mouseArea instanceof Wt?e.mouseArea:Wt.bounds(e.mouseArea):e.getSelfShape(),...e.children.filter(i=>e.visible&&e.pickable!==!1).map(i=>Hh.getLocalMouseShape(i).transformed(i.matrix))]);return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}static getLocalTouchShape(e){let t=Wt.union([e.touchArea?e.touchArea instanceof Wt?e.touchArea:Wt.bounds(e.touchArea):e.getSelfShape(),...e.children.filter(i=>e.visible&&e.pickable!==!1).map(i=>Hh.getLocalTouchShape(i).transformed(i.matrix))]);return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}}class nN extends eh{constructor(e,t,i){super(t,"pen"),this.id=e}move(e){const t=this.hasPointChanged(e);return this.point=e,t}toString(){return`Pen#${this.id}`}isTouchLike(){return!0}}class il{constructor(e,t,i,s){this.handled=!1,this.aborted=!1,this.trail=e,this.type=t,this.pointer=i,this.context=s,this.domEvent=s.domEvent,this.activeElement=s.activeElement,this.currentTarget=null,this.target=e.lastNode(),this.isPrimary=i.type!=="mouse"||!this.domEvent||this.domEvent.button===0,i.lastEventContext=s}handle(){this.handled=!0}abort(){this.aborted=!0}isFromPDOM(){return this.pointer.type==="pdom"}canStartPress(){return!this.pointer.isAttached()&&(this.pointer.type!=="mouse"||this.domEvent.button===0)}}il.SceneryEventIO=new pi("SceneryEventIO",{valueType:il,documentation:'An event, with a "point" field',toStateObject:n=>({type:n.type,domEventType:Ai($l).toStateObject(n.domEvent),point:n.pointer&&n.pointer.point?Ne.Vector2IO.toStateObject(n.pointer.point):null}),stateSchema:{type:gs,domEventType:Ai($l),point:Ai(Ne.Vector2IO)}});class rN extends eh{constructor(e,t,i){super(t,"touch"),this.id=e}move(e){const t=this.hasPointChanged(e);return this.point=e,t}toString(){return`Touch#${this.id}`}isTouchLike(){return!0}}const Ib=wl(eh.PointerIO),aN=["focus","blur","focusin","focusout"],oN=80;class Pc extends As{constructor(e,t,i,s,r,o,d,g){var S,T,L,x,A,Q,z,G,re,ne,ae,pe,N,Ie,$e,Ee,Je,Ge,_t,it,nt,Ct,Qe,Zt;const y=St()({phetioType:Pc.InputIO,phetioDocumentation:"Central point for user input events, such as mouse, touch"},g);super(y),this.currentSceneryEvent=null,this.display=e,this.rootNode=e.rootNode,this.attachToWindow=t,this.batchDOMEvents=i,this.assumeFullWindow=s,this.passiveEvents=r,this.preventMultitouch=o,this.interruptMultitouch=d,this.batchedEvents=[],this.pdomPointer=null,this.mouse=null,this.pointers=[],this.pointerAddedEmitter=new Hi,this.currentlyFiringEvents=!1,this.upTimeStamp=0,this.validatePointersAction=new ts(()=>{let At=this.pointers.length;for(;At--;){const Re=this.pointers[At];Re.point&&Re!==this.pdomPointer&&this.branchChangeEvents(Re,Re.lastEventContext||es.createSynthetic(),!1)}},{phetioPlayback:!0,tandem:(S=y.tandem)==null?void 0:S.createTandem("validatePointersAction"),phetioHighFrequency:!0}),this.mouseUpAction=new ts((At,Re)=>{const at=this.ensureMouse(At,Re);at.id=null,this.upEvent(at,Re,At)},{phetioPlayback:!0,tandem:(T=y.tandem)==null?void 0:T.createTandem("mouseUpAction"),parameters:[{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a mouse button is released."}),this.mouseDownAction=new ts((At,Re,at)=>{this.interruptMultitouch&&this.interruptMultitouchPointers(Re,at);const Et=this.ensureMouse(Re,at);Et.id=At,this.downEvent(Et,at,Re)},{phetioPlayback:!0,tandem:(L=y.tandem)==null?void 0:L.createTandem("mouseDownAction"),parameters:[{name:"id",phetioType:Ai(Fi)},{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a mouse button is pressed."}),this.mouseMoveAction=new ts((At,Re)=>{const at=this.ensureMouse(At,Re);at.move(At),this.moveEvent(at,Re)},{phetioPlayback:!0,tandem:(x=y.tandem)==null?void 0:x.createTandem("mouseMoveAction"),parameters:[{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the mouse is moved.",phetioHighFrequency:!0}),this.mouseOverAction=new ts((At,Re)=>{this.ensureMouse(At,Re).over(At)},{phetioPlayback:!0,tandem:(A=y.tandem)==null?void 0:A.createTandem("mouseOverAction"),parameters:[{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the mouse is moved while on the sim."}),this.mouseOutAction=new ts((At,Re)=>{this.ensureMouse(At,Re).out(At)},{phetioPlayback:!0,tandem:(Q=y.tandem)==null?void 0:Q.createTandem("mouseOutAction"),parameters:[{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the mouse moves out of the display."}),this.wheelScrollAction=new ts(At=>{const Re=At.domEvent,at=this.ensureMouse(this.pointFromEvent(Re),At);if(at.wheel(Re),at.point){const Et=this.rootNode.trailUnderPointer(at)||new Ki(this.rootNode);this.dispatchEvent(Et,"wheel",at,At,!0)}},{phetioPlayback:!0,tandem:(z=y.tandem)==null?void 0:z.createTandem("wheelScrollAction"),parameters:[{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the mouse wheel scrolls.",phetioHighFrequency:!0}),this.touchStartAction=new ts((At,Re,at)=>{const Et=new rN(At,Re,at.domEvent);this.addPointer(Et,Re,at),this.downEvent(Et,at,Re)},{phetioPlayback:!0,tandem:(G=y.tandem)==null?void 0:G.createTandem("touchStartAction"),parameters:[{name:"id",phetioType:Fi},{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a touch begins."}),this.touchEndAction=new ts((At,Re,at)=>{const Et=this.findPointerById(At);Et&&(this.upEvent(Et,at,Re),this.removePointer(Et))},{phetioPlayback:!0,tandem:(re=y.tandem)==null?void 0:re.createTandem("touchEndAction"),parameters:[{name:"id",phetioType:Fi},{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a touch ends."}),this.touchMoveAction=new ts((At,Re,at)=>{const Et=this.findPointerById(At);Et&&(Et.move(Re),this.moveEvent(Et,at))},{phetioPlayback:!0,tandem:(ne=y.tandem)==null?void 0:ne.createTandem("touchMoveAction"),parameters:[{name:"id",phetioType:Fi},{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a touch moves.",phetioHighFrequency:!0}),this.touchCancelAction=new ts((At,Re,at)=>{const Et=this.findPointerById(At);Et&&(this.cancelEvent(Et,at,Re),this.removePointer(Et))},{phetioPlayback:!0,tandem:(ae=y.tandem)==null?void 0:ae.createTandem("touchCancelAction"),parameters:[{name:"id",phetioType:Fi},{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a touch is canceled."}),this.penStartAction=new ts((At,Re,at)=>{const Et=new nN(At,Re,at.domEvent);this.addPointer(Et,Re,at),this.downEvent(Et,at,Re)},{phetioPlayback:!0,tandem:(pe=y.tandem)==null?void 0:pe.createTandem("penStartAction"),parameters:[{name:"id",phetioType:Fi},{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a pen touches the screen."}),this.penEndAction=new ts((At,Re,at)=>{const Et=this.findPointerById(At);Et&&(this.upEvent(Et,at,Re),this.removePointer(Et))},{phetioPlayback:!0,tandem:(N=y.tandem)==null?void 0:N.createTandem("penEndAction"),parameters:[{name:"id",phetioType:Fi},{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a pen is lifted."}),this.penMoveAction=new ts((At,Re,at)=>{const Et=this.findPointerById(At);Et&&(Et.move(Re),this.moveEvent(Et,at))},{phetioPlayback:!0,tandem:(Ie=y.tandem)==null?void 0:Ie.createTandem("penMoveAction"),parameters:[{name:"id",phetioType:Fi},{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a pen is moved.",phetioHighFrequency:!0}),this.penCancelAction=new ts((At,Re,at)=>{const Et=this.findPointerById(At);Et&&(this.cancelEvent(Et,at,Re),this.removePointer(Et))},{phetioPlayback:!0,tandem:($e=y.tandem)==null?void 0:$e.createTandem("penCancelAction"),parameters:[{name:"id",phetioType:Fi},{name:"point",phetioType:Ne.Vector2IO},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a pen is canceled."}),this.gotPointerCaptureAction=new ts((At,Re)=>{const at=this.findPointerById(At);at&&at.onGotPointerCapture()},{phetioPlayback:!0,tandem:(Ee=y.tandem)==null?void 0:Ee.createTandem("gotPointerCaptureAction"),parameters:[{name:"id",phetioType:Fi},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a pointer is captured (normally at the start of an interaction)",phetioHighFrequency:!0}),this.lostPointerCaptureAction=new ts((At,Re)=>{const at=this.findPointerById(At);at&&Qn.setTimeout(()=>{at.onLostPointerCapture()},2)},{phetioPlayback:!0,tandem:(Je=y.tandem)==null?void 0:Je.createTandem("lostPointerCaptureAction"),parameters:[{name:"id",phetioType:Fi},{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when a pointer loses its capture (normally at the end of an interaction)",phetioHighFrequency:!0}),this.focusinAction=new ts(At=>{const Re=this.getPDOMEventTrail(At.domEvent,"focusin");Re&&(this.dispatchPDOMEvent(Re,"focus",At,!1),this.dispatchPDOMEvent(Re,"focusin",At,!0))},{phetioPlayback:!0,tandem:(Ge=y.tandem)==null?void 0:Ge.createTandem("focusinAction"),parameters:[{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the PDOM root gets the focusin DOM event."}),this.focusoutAction=new ts(At=>{const Re=this.getPDOMEventTrail(At.domEvent,"focusout");Re&&(this.dispatchPDOMEvent(Re,"blur",At,!1),this.dispatchPDOMEvent(Re,"focusout",At,!0))},{phetioPlayback:!0,tandem:(_t=y.tandem)==null?void 0:_t.createTandem("focusoutAction"),parameters:[{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the PDOM root gets the focusout DOM event."}),this.clickAction=new ts(At=>{const Re=this.getPDOMEventTrail(At.domEvent,"click");Re&&this.dispatchPDOMEvent(Re,"click",At,!0)},{phetioPlayback:!0,tandem:(it=y.tandem)==null?void 0:it.createTandem("clickAction"),parameters:[{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the PDOM root gets the click DOM event."}),this.inputAction=new ts(At=>{const Re=this.getPDOMEventTrail(At.domEvent,"input");Re&&this.dispatchPDOMEvent(Re,"input",At,!0)},{phetioPlayback:!0,tandem:(nt=y.tandem)==null?void 0:nt.createTandem("inputAction"),parameters:[{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the PDOM root gets the input DOM event."}),this.changeAction=new ts(At=>{const Re=this.getPDOMEventTrail(At.domEvent,"change");Re&&this.dispatchPDOMEvent(Re,"change",At,!0)},{phetioPlayback:!0,tandem:(Ct=y.tandem)==null?void 0:Ct.createTandem("changeAction"),parameters:[{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the PDOM root gets the change DOM event."}),this.keydownAction=new ts(At=>{const Re=this.getPDOMEventTrail(At.domEvent,"keydown");Re&&this.dispatchPDOMEvent(Re,"keydown",At,!0)},{phetioPlayback:!0,tandem:(Qe=y.tandem)==null?void 0:Qe.createTandem("keydownAction"),parameters:[{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the PDOM root gets the keydown DOM event."}),this.keyupAction=new ts(At=>{const Re=this.getPDOMEventTrail(At.domEvent,"keydown");Re&&this.dispatchPDOMEvent(Re,"keyup",At,!0)},{phetioPlayback:!0,tandem:(Zt=y.tandem)==null?void 0:Zt.createTandem("keyupAction"),parameters:[{name:"context",phetioType:pn}],phetioEventType:Si.USER,phetioDocumentation:"Emits when the PDOM root gets the keyup DOM event."})}interruptPointers(e=null){he.each(this.pointers,t=>{t!==e&&t.interruptAll()})}batchEvent(e,t,i,s){this.display.interactive&&(this.batchedEvents.push(wc.pool.create(e,t,i)),(s||!this.batchDOMEvents)&&this.fireBatchedEvents());const r=An.firefox&&e.domEvent instanceof PointerEvent&&i===this.pointerDown&&e.domEvent.pointerType==="touch";this.passiveEvents!==!0&&(i!==this.mouseDown||An.edge)&&!r&&t!==ci.ALT_TYPE&&!e.allowsDOMInput()&&e.domEvent.preventDefault()}fireBatchedEvents(){if(!this.currentlyFiringEvents&&this.batchedEvents.length){this.currentlyFiringEvents=!0;const e=this.batchedEvents;for(let t=0;t<e.length;t++){const i=e[t];i.run(this),i.dispose()}bi(e),this.currentlyFiringEvents=!1}}clearBatchedEvents(){this.batchedEvents.length=0}validatePointers(){this.validatePointersAction.execute()}removeTemporaryPointers(){for(let e=this.pointers.length-1;e>=0;e--){const t=this.pointers[e];if(!(t instanceof vc)){this.pointers.splice(e,1);const i=t.trail||new Ki(this.rootNode);this.exitEvents(t,es.createSynthetic(),i,0,!0)}}}connectListeners(){zt.addDisplay(this.display,this.attachToWindow,this.passiveEvents)}disconnectListeners(){zt.removeDisplay(this.display,this.attachToWindow,this.passiveEvents)}pointFromEvent(e){const t=Ne.pool.create(e.clientX,e.clientY);if(!this.assumeFullWindow){const i=this.display.domElement.getBoundingClientRect();i.width>0&&i.height>0&&(t.subtractXY(i.left,i.top),(i.width!==this.display.width||i.height!==this.display.height)&&(t.x*=this.display.width/i.width,t.y*=this.display.height/i.height))}return t}interruptMultitouchPointers(e,t){const i=this.pointers.filter(s=>s.isTouchLike());for(const s of i)this.cancelEvent(s,t,e),this.removePointer(s)}addPointer(e,t,i){this.preventMultitouch&&e.isTouchLike()&&this.pointers.some(s=>s.isTouchLike())||(this.interruptMultitouch&&(this.interruptMultitouchPointers(t,i),this.mouse&&this.mouse.interruptAll()),this.pointers.push(e),this.pointerAddedEmitter.emit(e))}removePointer(e){for(let t=this.pointers.length-1;t>=0;t--)this.pointers[t]===e&&this.pointers.splice(t,1);e.dispose()}findPointerById(e){let t=this.pointers.length;for(;t--;){const i=this.pointers[t];if(i.id===e)return i}return null}getPDOMEventTrail(e,t){if(!this.display.interactive)return null;const i=this.getTrailFromPDOMEvent(e);return i&&!(t==="click"&&he.some(i.nodes,r=>r.positionInPDOM)&&e.timeStamp-this.upTimeStamp<=oN)?i:null}ensureMouse(e,t){const i=this.mouse;if(i)return i;{const s=new vc(e);return this.mouse=s,this.addPointer(s,e,t),s}}ensurePDOMPointer(e){const t=this.pdomPointer;if(t)return t;{const i=new df(this.display);return this.pdomPointer=i,this.addPointer(i,Ne.ZERO,e),i}}dispatchPDOMEvent(e,t,i,s){this.ensurePDOMPointer(i).updateTrail(e),Vi.USER_GESTURE_EVENTS.includes(t)&&Ln.userGestureEmitter.emit();const r=i.domEvent;r.target&&r.target.hasAttribute(Vi.DATA_EXCLUDE_FROM_INPUT)||(e.isPickable()||aN.includes(t)||(e=new Ki([])),this.dispatchEvent(e,t,this.pdomPointer,i,s))}getRelatedTargetTrail(e){const t=e.relatedTarget;if(t&&this.display.isElementUnderPDOM(t,!1)){const s=e.relatedTarget.getAttribute(Vi.DATA_PDOM_UNIQUE_ID);return tf(this.display,s)}return null}getTrailFromPDOMEvent(e){if(!this.display._accessible)return null;if(e[uf]){const t=e[uf].getAttribute(Vi.DATA_PDOM_UNIQUE_ID);return tf(this.display,t)}else{const t=e.target;if(t&&t instanceof self.Element&&this.display.isElementUnderPDOM(t,!1)){const i=t.getAttribute(Vi.DATA_PDOM_UNIQUE_ID);return tf(this.display,i)}}return null}mouseDown(e,t,i){this.mouseDownAction.execute(e,t,i)}mouseUp(e,t){this.mouseUpAction.execute(e,t)}mouseMove(e,t){this.mouseMoveAction.execute(e,t)}mouseOver(e,t){this.mouseOverAction.execute(e,t)}mouseOut(e,t){this.mouseOutAction.execute(e,t)}wheel(e){this.wheelScrollAction.execute(e)}touchStart(e,t,i){this.touchStartAction.execute(e,t,i)}touchEnd(e,t,i){this.touchEndAction.execute(e,t,i)}touchMove(e,t,i){this.touchMoveAction.execute(e,t,i)}touchCancel(e,t,i){this.touchCancelAction.execute(e,t,i)}penStart(e,t,i){this.penStartAction.execute(e,t,i)}penEnd(e,t,i){this.penEndAction.execute(e,t,i)}penMove(e,t,i){this.penMoveAction.execute(e,t,i)}penCancel(e,t,i){this.penCancelAction.execute(e,t,i)}pointerDown(e,t,i,s){const r=this.attachToWindow?document.body:this.display.domElement;switch(r.setPointerCapture&&!s.allowsDOMInput()&&r.setPointerCapture(s.domEvent.pointerId),t=this.handleUnknownPointerType(t,e),t){case"mouse":this.mouseDown(e,i,s);break;case"touch":this.touchStart(e,i,s);break;case"pen":this.penStart(e,i,s);break}}pointerUp(e,t,i,s){switch(this.upTimeStamp=s.domEvent.timeStamp,t=this.handleUnknownPointerType(t,e),t){case"mouse":this.mouseUp(i,s);break;case"touch":this.touchEnd(e,i,s);break;case"pen":this.penEnd(e,i,s);break}}pointerCancel(e,t,i,s){switch(t=this.handleUnknownPointerType(t,e),t){case"mouse":console&&console.log&&console.log("WARNING: Pointer mouse cancel was received");break;case"touch":this.touchCancel(e,i,s);break;case"pen":this.penCancel(e,i,s);break;default:console.log&&console.log(`Unknown pointer type: ${t}`)}}gotPointerCapture(e,t,i,s){this.gotPointerCaptureAction.execute(e,s)}lostPointerCapture(e,t,i,s){this.lostPointerCaptureAction.execute(e,s)}pointerMove(e,t,i,s){switch(t=this.handleUnknownPointerType(t,e),t){case"mouse":this.mouseMove(i,s);break;case"touch":this.touchMove(e,i,s);break;case"pen":this.penMove(e,i,s);break;default:console.log&&console.log(`Unknown pointer type: ${t}`)}}pointerOver(e,t,i,s){}pointerOut(e,t,i,s){}pointerEnter(e,t,i,s){}pointerLeave(e,t,i,s){}focusIn(e){this.focusinAction.execute(e)}focusOut(e){this.focusoutAction.execute(e)}input(e){this.inputAction.execute(e)}change(e){this.changeAction.execute(e)}click(e){this.clickAction.execute(e)}keyDown(e){this.keydownAction.execute(e)}keyUp(e){this.keyupAction.execute(e)}handleUnknownPointerType(e,t){return e!==""?e:this.mouse&&this.mouse.id===t?"mouse":"touch"}getPointerTrail(e){return this.rootNode.trailUnderPointer(e)||new Ki(this.rootNode)}upEvent(e,t,i){if(this.display.isElementUnderPDOM(t.domEvent.target,!0))return;const s=e.up(i,t.domEvent),r=this.branchChangeEvents(e,t,s);this.dispatchEvent(r,"up",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,r,0,!0)}downEvent(e,t,i){if(this.display.isElementUnderPDOM(t.domEvent.target,!0))return;const s=e.updatePoint(i),r=this.branchChangeEvents(e,t,s);e.down(t.domEvent),this.dispatchEvent(r,"down",e,t,!0)}moveEvent(e,t){this.branchChangeEvents(e,t,!0)}cancelEvent(e,t,i){const s=e.cancel(i),r=this.branchChangeEvents(e,t,s);this.dispatchEvent(r,"cancel",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,r,0,!0)}branchChangeEvents(e,t,i){const s=this.getPointerTrail(e),r=s.slice(0,Math.min(s.nodes.length,s.getLastInputEnabledIndex()+1)),o=e.inputEnabledTrail||new Ki(this.rootNode),d=Ki.branchIndex(r,o),g=o.lastNode()!==r.lastNode();return i&&this.dispatchEvent(s,"move",e,t,!0),this.exitEvents(e,t,o,d,g),this.enterEvents(e,t,r,d,g),e.trail=s,e.inputEnabledTrail=r,s}enterEvents(e,t,i,s,r){r&&this.dispatchEvent(i,"over",e,t,!0,!0);for(let o=s;o<i.length;o++)this.dispatchEvent(i.slice(0,o+1),"enter",e,t,!1)}exitEvents(e,t,i,s,r){for(let o=i.length-1;o>=s;o--)this.dispatchEvent(i.slice(0,o+1),"exit",e,t,!1,!0);r&&this.dispatchEvent(i,"out",e,t,!0)}dispatchEvent(e,t,i,s,r,o=!1){const d=new il(e,t,i,s);this.currentSceneryEvent=d,this.dispatchToListeners(i,i.getListeners(),t,d),this.dispatchToTargets(e,t,i,d,r,o),this.dispatchToListeners(i,this.display.getInputListeners(),t,d),Ln.inputListeners.length&&this.dispatchToListeners(i,Ln.inputListeners.slice(),t,d),this.currentSceneryEvent=null}dispatchToListeners(e,t,i,s){if(s.handled)return;const r=e.type+i;for(let o=0;o<t.length;o++){const d=t[o];!s.aborted&&d[r]&&d[r](s),!s.aborted&&d[i]&&d[i](s)}}dispatchToTargets(e,t,i,s,r,o=!1){if(s.aborted||s.handled)return;const d=e.getLastInputEnabledIndex();for(let g=e.nodes.length-1;g>=0;r?g--:g=-1){const y=e.nodes[g],S=d<g;if(!(y.isDisposed||!o&&S)&&(s.currentTarget=y,this.dispatchToListeners(i,y.getInputListeners(),t,s),s.aborted||s.handled))return}}static debugText(e,t){let i=`${t.timeStamp} ${t.type}`;return e!==null&&(i=`${e.x},${e.y} ${i}`),i}}Pc.InputIO=new pi("InputIO",{valueType:Pc,applyState:he.noop,toStateObject:n=>({pointers:Ib.toStateObject(n.pointers)}),stateSchema:{pointers:Ib}});class lN{constructor(e){this.instance=e}initialize(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.selfFittable=!!t&&this.isSelfFitSupported(),this.ancestorsFittable=this.selfFittable,this.subtreeUnfittableCount=this.selfFittable?0:1,this.subtreeFittabilityChangeEmitter=this.subtreeFittabilityChangeEmitter||new Hi,this}get parent(){return this.instance.parent?this.instance.parent.fittability:null}checkSelfFittability(){const e=this.isSelfFitSupported();this.selfFittable!==e&&this.updateSelfFittable()}isSelfFitSupported(){return this.display._allowLayerFitting&&!this.node.isPreventFit()}markSubtreeFittable(){if(!this.selfFittable)return;this.ancestorsFittable=!0;const e=this.instance.children;for(let t=0;t<e.length;t++)e[t].fittability.markSubtreeFittable();this.instance.updateDrawableFittability(!0)}markSubtreeUnfittable(){if(!this.ancestorsFittable)return;this.ancestorsFittable=!1;const e=this.instance.children;for(let t=0;t<e.length;t++)e[t].fittability.markSubtreeUnfittable();this.instance.updateDrawableFittability(!1)}updateSelfFittable(){const e=this.isSelfFitSupported();this.selfFittable=e,this.selfFittable&&(!this.parent||this.parent.ancestorsFittable)?this.markSubtreeFittable():this.selfFittable||this.markSubtreeUnfittable(),this.selfFittable?this.decrementSubtreeUnfittableCount():this.incrementSubtreeUnfittableCount()}incrementSubtreeUnfittableCount(){this.subtreeUnfittableCount++,this.subtreeUnfittableCount===1&&(this.parent&&this.parent.incrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}decrementSubtreeUnfittableCount(){this.subtreeUnfittableCount--,this.subtreeUnfittableCount===0&&(this.parent&&this.parent.decrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}onInsert(e){this.ancestorsFittable||e.markSubtreeUnfittable(),e.subtreeUnfittableCount>0&&this.incrementSubtreeUnfittableCount()}onRemove(e){this.ancestorsFittable||e.markSubtreeFittable(),e.subtreeUnfittableCount>0&&this.decrementSubtreeUnfittableCount()}audit(){}}class hN extends va{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){super.initialize(e),this.instance=t}stitch(e,t,i,s){}}class uN{constructor(e){this.instance=e}initialize(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.transformDirty=!0,this.nodeTransformListener=this.nodeTransformListener||this.onNodeTransformDirty.bind(this),this.matrix=this.matrix||mt.identity(),this.relativeSelfDirty=!0,this.relativeChildrenListenersCount=0,this.relativePrecomputeCount=0,this.relativeChildrenPrecomputeCount=0,this.relativeFrameId=-1,this.relativeChildDirtyFrame=e?e._frameId:0,this.relativeTransformListeners=bi(this.relativeTransformListeners),this}get parent(){return this.instance.parent?this.instance.parent.relativeTransform:null}addInstance(e){e.stateless||(e.relativeTransform.hasAncestorListenerNeed()&&this.incrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.incrementTransformPrecomputeChildren()),e.relativeTransform.forceMarkTransformDirty()}removeInstance(e){e.relativeTransform.hasAncestorListenerNeed()&&this.decrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.decrementTransformPrecomputeChildren()}attachNodeListeners(){this.node.transformEmitter.addListener(this.nodeTransformListener)}detachNodeListeners(){this.node.transformEmitter.removeListener(this.nodeTransformListener)}hasDescendantListenerNeed(){return this.instance.isTransformed?this.relativeChildrenListenersCount>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}hasAncestorListenerNeed(){return this.instance.isTransformed?this.relativeTransformListeners.length>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}hasSelfListenerNeed(){return this.relativeTransformListeners.length>0}incrementTransformListenerChildren(){const e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount++,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.incrementTransformListenerChildren()}decrementTransformListenerChildren(){const e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount--,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}addListener(e){const t=this.hasAncestorListenerNeed();this.relativeTransformListeners.push(e),t!==this.hasAncestorListenerNeed()&&(this.parent&&this.parent.incrementTransformListenerChildren(),this.hasAncestorComputeNeed()||this.forceMarkTransformDirty())}removeListener(e){const t=this.hasAncestorListenerNeed();this.relativeTransformListeners.splice(he.indexOf(this.relativeTransformListeners,e),1),t!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}hasDescendantComputeNeed(){return this.instance.isTransformed?this.relativeChildrenPrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}hasAncestorComputeNeed(){return this.instance.isTransformed?this.relativePrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}hasSelfComputeNeed(){return this.relativePrecomputeCount>0}incrementTransformPrecomputeChildren(){const e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount++,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.incrementTransformPrecomputeChildren()}decrementTransformPrecomputeChildren(){const e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}addPrecompute(){const e=this.hasAncestorComputeNeed();this.relativePrecomputeCount++,e!==this.hasAncestorComputeNeed()&&(this.parent&&this.parent.incrementTransformPrecomputeChildren(),this.hasAncestorListenerNeed()||this.forceMarkTransformDirty())}removePrecompute(){const e=this.hasAncestorComputeNeed();this.relativePrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}onNodeTransformDirty(){this.transformDirty||this.forceMarkTransformDirty()}forceMarkTransformDirty(){this.transformDirty=!0,this.relativeSelfDirty=!0;const e=this.display._frameId;let t=this.instance.parent;for(;t&&t.relativeTransform.relativeChildDirtyFrame!==e;){const i=t.parent,s=t.isTransformed;if(t.relativeTransform.relativeChildDirtyFrame=e,i===null){this.display.markTransformRootDirty(t,s);break}else if(s){this.display.markTransformRootDirty(t,!0);break}t=i}}computeRelativeTransform(){const e=this.node.getMatrix();this.instance.parent&&!this.instance.parent.isTransformed?(this.matrix.set(this.parent.matrix),this.matrix.multiplyMatrix(e)):this.matrix.set(e),this.relativeFrameId=this.display._frameId,this.relativeSelfDirty=!1}isValidationNotNeeded(){return this.hasAncestorComputeNeed()||this.relativeFrameId===this.display._frameId}validate(){if(!this.isValidationNotNeeded()&&(this.instance.parent&&!this.instance.parent.isTransformed&&this.parent.validate(),this.relativeSelfDirty)){this.computeRelativeTransform();const e=this.instance.children.length;for(let t=0;t<e;t++)this.instance.children[t].relativeTransform.relativeSelfDirty=!0}}updateTransformListenersAndCompute(e,t,i,s){let r,o;if(s)for(r=this.instance.children.length,o=0;o<r;o++)this.instance.children[o].relativeTransform.updateTransformListenersAndCompute(!1,!1,i,!1);else{const d=e||this.relativeSelfDirty,g=d||this.relativeChildDirtyFrame===i,y=this.hasDescendantComputeNeed(),S=this.hasDescendantListenerNeed(),T=this.hasSelfComputeNeed(),L=this.hasSelfListenerNeed();if(!y&&d&&!t&&(this.relativeSelfDirty=!0),!g||!y&&!S&&!T&&!L)return;if(d&&(y||T)&&this.computeRelativeTransform(),this.transformDirty&&(this.transformDirty=!1),this.notifyRelativeTransformListeners(),!this.instance.isTransformed||s){const x=d&&!(y||T);for(r=this.instance.children.length,o=0;o<r;o++)this.instance.children[o].relativeTransform.updateTransformListenersAndCompute(d,x,i,!1)}}}notifyRelativeTransformListeners(){const e=this.relativeTransformListeners.length;for(let t=0;t<e;t++)this.relativeTransformListeners[t]()}audit(e,t){}}class cN extends va{constructor(e,t,i,s){super(),this.initialize(e,t,i,s)}initialize(e,t,i,s){super.initialize(t),this.instance=i,this.sharedInstance=s}}let dN=1;const fN=Le.createOrderBitmask(Le.bitmaskSVG,Le.bitmaskCanvas,Le.bitmaskDOM,Le.bitmaskWebGL);class ql{constructor(e,t,i,s){this.display=null,this.active=!1,this.initialize(e,t,i,s)}initialize(e,t,i,s){return t.setImmutable(),this.id=this.id||dN++,this.isWebGLSupported=e.isWebGLAllowed()&&Zi.isWebGLSupported,this.relativeTransform=this.relativeTransform||new uN(this),this.fittability=this.fittability||new lN(this),this.visible=!0,this.relativeVisible=!0,this.selfVisible=!0,this.visibilityDirty=!0,this.childVisibilityDirty=!0,this.voicingVisible=!0,this.branchIndexMap=this.branchIndexMap||{},this.branchIndexReferences=bi(this.branchIndexReferences),this.addRemoveCounter=0,this.stitchChangeFrame=e._frameId,this.stitchChangeBefore=0,this.stitchChangeAfter=0,this.stitchChangeOnChildren=0,this.stitchChangeIncluded=!1,this.childInsertedListener=this.childInsertedListener||this.onChildInserted.bind(this),this.childRemovedListener=this.childRemovedListener||this.onChildRemoved.bind(this),this.childrenReorderedListener=this.childrenReorderedListener||this.onChildrenReordered.bind(this),this.visibilityListener=this.visibilityListener||this.onVisibilityChange.bind(this),this.markRenderStateDirtyListener=this.markRenderStateDirtyListener||this.markRenderStateDirty.bind(this),this.visibleEmitter=new Hi,this.relativeVisibleEmitter=new Hi,this.selfVisibleEmitter=new Hi,this.canVoiceEmitter=new Hi,this.cleanInstance(e,t),this.node.addInstance(this),this.externalReferenceCount=0,this.stateless=!0,this.isDisplayRoot=i,this.isSharedCanvasCacheRoot=s,this.preferredRenderers=0,this.isUnderCanvasCache=s,this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCachePlaceholder=!1,this.isSharedCanvasCacheSelf=s,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0,this.renderStateDirtyFrame=e._frameId,this.skipPruningFrame=e._frameId,this.active=!0,this}cleanInstance(e,t){this.display=e,this.trail=t,this.node=t?t.lastNode():null,this.parent=null,this.oldParent=null,this.children=bi(this.children),this.sharedCacheInstance=null,this.relativeTransform.initialize(e,t),this.fittability.initialize(e,t),this.instanceRemovalCheckList=bi(this.instanceRemovalCheckList),this.selfDrawable=null,this.groupDrawable=null,this.sharedCacheDrawable=null,this.firstDrawable=null,this.lastDrawable=null,this.firstInnerDrawable=null,this.lastInnerDrawable=null,this.svgGroups=bi(this.svgGroups),this.cleanSyncTreeResults()}cleanSyncTreeResults(){this.beforeStableIndex=this.children.length,this.afterStableIndex=-1,this.firstChangeInterval=null,this.lastChangeInterval=null,this.incompatibleStateChange=!1,this.groupChanged=!1,this.cascadingStateChange=!1,this.anyStateChange=!1}updateRenderingState(){const e=this.isBackbone,t=this.isTransformed,i=this.isVisibilityApplied,s=this.isInstanceCanvasCache,r=this.isSharedCanvasCacheSelf,o=this.isSharedCanvasCachePlaceholder,d=this.isUnderCanvasCache,g=this.selfRenderer,y=this.groupRenderer,S=this.sharedCacheRenderer,T=this.preferredRenderers;this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCacheSelf=!1,this.isSharedCanvasCachePlaceholder=!1,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0;const L=this.node;this.isUnderCanvasCache=this.isSharedCanvasCacheRoot||(this.parent?this.parent.isUnderCanvasCache||this.parent.isInstanceCanvasCache||this.parent.isSharedCanvasCacheSelf:!1),this.preferredRenderers=this.parent?this.parent.preferredRenderers:fN,L._renderer&&(this.preferredRenderers=Le.pushOrderBitmask(this.preferredRenderers,L._renderer));const x=this.node.hasClipArea(),A=this.node.effectiveOpacity!==1||L._usesOpacity||this.node._filters.length>0;let Q=!1,z=!1;if(A)for(let pe=0;pe<this.node._filters.length;pe++){const N=this.node._filters[pe];N.isSVGCompatible()||(Q=!0),N.isCanvasCompatible()||(z=!0)}const G=L._cssTransform||L._layerSplit,re=this.isDisplayRoot||!this.isUnderCanvasCache&&G,ne=!re&&(A||x)&&(!Q&&this.node._rendererSummary.isSubtreeRenderedExclusivelySVG(this.preferredRenderers)||!z&&this.node._rendererSummary.isSubtreeRenderedExclusivelyCanvas(this.preferredRenderers));if((ne?!1:re||A||x)?(this.isBackbone=!0,this.isVisibilityApplied=!0,this.isTransformed=this.isDisplayRoot||!!L._cssTransform,this.groupRenderer=Le.bitmaskDOM):!ne&&(A||x||L._canvasCache)&&(L._singleCache?this.isSharedCanvasCacheRoot?(this.isSharedCanvasCacheSelf=!0,this.sharedCacheRenderer=this.isWebGLSupported?Le.bitmaskWebGL:Le.bitmaskCanvas):this.isSharedCanvasCachePlaceholder=!0:(this.isInstanceCanvasCache=!0,this.isUnderCanvasCache=!0,this.groupRenderer=this.isWebGLSupported?Le.bitmaskWebGL:Le.bitmaskCanvas)),this.node.isPainted())if(this.isUnderCanvasCache)this.selfRenderer=Le.bitmaskCanvas;else{let pe=this.node._rendererBitmask;if(!this.isWebGLSupported){const N=Le.bitmaskWebGL;pe=pe^pe&N}this.selfRenderer=pe&Le.bitmaskOrder(this.preferredRenderers,0)||pe&Le.bitmaskOrder(this.preferredRenderers,1)||pe&Le.bitmaskOrder(this.preferredRenderers,2)||pe&Le.bitmaskOrder(this.preferredRenderers,3)||pe&Le.bitmaskSVG||pe&Le.bitmaskCanvas||pe&Le.bitmaskDOM||pe&Le.bitmaskWebGL||0}this.groupChanged=e!==this.isBackbone||s!==this.isInstanceCanvasCache||r!==this.isSharedCanvasCacheSelf,this.cascadingStateChange=d!==this.isUnderCanvasCache||T!==this.preferredRenderers,this.incompatibleStateChange=this.isTransformed!==t||this.isSharedCanvasCachePlaceholder!==o,this.anyStateChange=this.groupChanged||this.cascadingStateChange||this.incompatibleStateChange||g!==this.selfRenderer||y!==this.groupRenderer||S!==this.sharedCacheRenderer,i!==this.isVisibilityApplied&&(this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()),this.fittability.checkSelfFittability()}getStateString(){return`${`S[ ${this.isDisplayRoot?"displayRoot ":""}${this.isBackbone?"backbone ":""}${this.isInstanceCanvasCache?"instanceCache ":""}${this.isSharedCanvasCachePlaceholder?"sharedCachePlaceholder ":""}${this.isSharedCanvasCacheSelf?"sharedCacheSelf ":""}${this.isTransformed?"TR ":""}${this.isVisibilityApplied?"VIS ":""}${this.selfRenderer?this.selfRenderer.toString(16):"-"},${this.groupRenderer?this.groupRenderer.toString(16):"-"},${this.sharedCacheRenderer?this.sharedCacheRenderer.toString(16):"-"} `}]`}baseSyncTree(){this.syncTree(),this.cleanSyncTreeResults()}syncTree(){const e=this.stateless;if((e||this.parent&&this.parent.cascadingStateChange||this.renderStateDirtyFrame===this.display._frameId)&&this.updateRenderingState(),!e&&this.incompatibleStateChange)return!1;if(this.stateless=!1,e&&(this.isTransformed&&this.display.markTransformRootDirty(this,!0),this.attachNodeListeners()),this.isSharedCanvasCachePlaceholder)this.sharedSyncTree();else if(e||this.skipPruningFrame===this.display._frameId||this.anyStateChange){this.prepareChildInstances(e),this.firstDrawable,this.lastDrawable,this.firstInnerDrawable,this.lastInnerDrawable;const t=this.updateSelfDrawable();this.localSyncTree(t),this.groupSyncTree(e)}return!0}localSyncTree(e){const t=this.display._frameId;let i=this.selfDrawable,s=i,r=null;e&&(r=$a.newForDisplay(null,null,this.display));let o=r,d=e?null:this.selfDrawable;for(let g=0;g<this.children.length;g++){let y=this.children[g];y.syncTree()||(y=this.updateIncompatibleChildInstance(y,g),y.syncTree());const T=y.shouldIncludeInParentDrawables();T&&y.firstDrawable&&(s?va.connectDrawables(s,y.firstDrawable,this.display):i=y.firstDrawable,s=y.lastDrawable);const L=y.stitchChangeIncluded,x=T;y.stitchChangeIncluded=x,y.stitchChangeFrame===t&&(y.firstChangeInterval=y.lastChangeInterval=$a.newForDisplay(null,null,this.display));const A=y.firstChangeInterval;let Q=o&&o.drawableAfter===null;const z=A&&A.drawableBefore===null;if(y.stitchChangeBefore===t&&!Q&&!z){const re=$a.newForDisplay(d,null,this.display);o&&(o.nextChangeInterval=re),o=re,r=r||o,Q=!0}if((L||x)&&(Q?A?A.drawableBefore===null?(o.drawableAfter=A.drawableAfter,o.nextChangeInterval=A.nextChangeInterval,o=y.lastChangeInterval===A?o:y.lastChangeInterval):(o.drawableAfter=y.firstDrawable,o.nextChangeInterval=A,o=y.lastChangeInterval):o.drawableAfter=y.firstDrawable:A&&(r=r||A,A.drawableBefore===null&&(A.drawableBefore=d),o&&(o.nextChangeInterval=A),o=y.lastChangeInterval),d=o&&o.drawableAfter===null?null:y.lastDrawable?y.lastDrawable:d),g===this.children.length-1&&y.stitchChangeAfter===t&&!(o&&o.drawableAfter===null)){const re=$a.newForDisplay(d,null,this.display);o&&(o.nextChangeInterval=re),o=re,r=r||o}y.cleanSyncTreeResults()}!r&&this.stitchChangeOnChildren===this.display._frameId&&this.children.length===0&&(r=o=$a.newForDisplay(null,null,this.display)),this.firstChangeInterval=r,this.lastChangeInterval=o,this.firstDrawable=this.firstInnerDrawable=i,this.lastDrawable=this.lastInnerDrawable=s}updateSelfDrawable(){if(this.node.isPainted()){const e=this.selfRenderer;if(!this.selfDrawable||!(this.selfDrawable.renderer&e&Le.bitmaskRendererArea))return this.selfDrawable&&this.selfDrawable.markForDisposal(this.display),this.selfDrawable=Le.createSelfDrawable(this,this.node,e,this.fittability.ancestorsFittable),!0}return!1}updateIncompatibleChildInstance(e,t){this.display.markInstanceRootForDisposal(e);const i=ql.createFromPool(this.display,this.trail.copy().addDescendant(e.node,t),!1,!1);return this.replaceInstanceWithIndex(e,i,t),i}groupSyncTree(e){const t=this.groupRenderer,i=!!t!=!!this.groupDrawable||!e&&this.groupChanged||this.groupDrawable&&this.groupDrawable.renderer!==t;i&&(this.groupDrawable&&(this.groupDrawable.markForDisposal(this.display),this.groupDrawable=null),this.firstChangeInterval=this.lastChangeInterval=$a.newForDisplay(null,null,this.display)),t&&(this.firstDrawable&&va.disconnectBefore(this.firstDrawable,this.display),this.lastDrawable&&va.disconnectAfter(this.lastDrawable,this.display),this.isBackbone?(i&&(this.groupDrawable=el.createFromPool(this.display,this,this.getTransformRootInstance(),t,this.isDisplayRoot),this.isTransformed&&this.display.markTransformRootDirty(this,!0)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isInstanceCanvasCache?(i&&(this.groupDrawable=hN.createFromPool(t,this)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isSharedCanvasCacheSelf&&i&&(this.groupDrawable=lp.createFromPool(t,this)),this.groupDrawable.setFittable(this.fittability.ancestorsFittable),this.firstDrawable=this.lastDrawable=this.groupDrawable),i?this.firstChangeInterval=this.lastChangeInterval=$a.newForDisplay(null,null,this.display):t&&(this.firstChangeInterval=this.lastChangeInterval=null)}sharedSyncTree(){this.ensureSharedCacheInitialized();const e=this.sharedCacheRenderer;(!this.sharedCacheDrawable||this.sharedCacheDrawable.renderer!==e)&&(this.sharedCacheDrawable&&this.sharedCacheDrawable.markForDisposal(this.display),this.sharedCacheDrawable=new cN(this.trail,e,this,this.sharedCacheInstance),this.firstDrawable=this.sharedCacheDrawable,this.lastDrawable=this.sharedCacheDrawable,this.firstChangeInterval=this.lastChangeInterval=$a.newForDisplay(null,null,this.display))}prepareChildInstances(e){for(;this.instanceRemovalCheckList.length;){const t=this.instanceRemovalCheckList.pop();t.addRemoveCounter===-1&&(t.addRemoveCounter=0,this.display.markInstanceRootForDisposal(t))}if(e)for(let t=0;t<this.node.children.length;t++){const i=this.node.children[t];this.appendInstance(ql.createFromPool(this.display,this.trail.copy().addDescendant(i,t),!1,!1))}}ensureSharedCacheInitialized(){if(!this.sharedCacheInstance){const e=this.node.getId();this.sharedCacheInstance=this.display._sharedCanvasInstances[e],this.sharedCacheInstance||(this.sharedCacheInstance=ql.createFromPool(this.display,new Ki(this.node),!1,!0),this.sharedCacheInstance.syncTree(),this.display._sharedCanvasInstances[e]=this.sharedCacheInstance,this.display.markTransformRootDirty(this.sharedCacheInstance,!0)),this.sharedCacheInstance.externalReferenceCount++,this.isTransformed&&this.display.markTransformRootDirty(this,!0)}}shouldIncludeInParentDrawables(){return this.node.isVisible()||!this.node.isExcludeInvisible()}findPreviousDrawable(e){for(let t=e-1;t>=0;t--){const i=this.children[t].lastDrawable;if(i!==null)return i}return null}findNextDrawable(e){const t=this.children.length;for(let i=e+1;i<t;i++){const s=this.children[i].firstDrawable;if(s!==null)return s}return null}appendInstance(e){this.insertInstance(e,this.children.length)}insertInstance(e,t){e.stitchChangeFrame=this.display._frameId,this.stitchChangeOnChildren=this.display._frameId,this.children.splice(t,0,e),e.parent=this,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>this.afterStableIndex?this.afterStableIndex=t+1:this.afterStableIndex++,this.fittability.onInsert(e.fittability),this.relativeTransform.addInstance(e),this.markChildVisibilityDirty()}removeInstance(e){this.removeInstanceWithIndex(e,he.indexOf(this.children,e))}removeInstanceWithIndex(e,t){const i=this.display._frameId;e.stitchChangeFrame=i,this.stitchChangeOnChildren=i,t-1>=0&&(this.children[t-1].stitchChangeAfter=i),t+1<this.children.length&&(this.children[t+1].stitchChangeBefore=i),this.children.splice(t,1),e.parent=null,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>=this.afterStableIndex?this.afterStableIndex=t:this.afterStableIndex--,this.fittability.onRemove(e.fittability),this.relativeTransform.removeInstance(e)}replaceInstanceWithIndex(e,t,i){this.removeInstanceWithIndex(e,i),this.insertInstance(t,i)}reorderInstances(e,t){const i=this.display._frameId;this.children.splice(e,t-e+1);for(let s=e;s<=t;s++){const r=this.findChildInstanceOnNode(this.node._children[s]);this.children.splice(s,0,r),r.stitchChangeFrame=i,s>e&&(r.stitchChangeAfter=i),s<t&&(r.stitchChangeBefore=i)}this.stitchChangeOnChildren=i,this.beforeStableIndex=Math.min(this.beforeStableIndex,e-1),this.afterStableIndex=Math.max(this.afterStableIndex,t+1)}findChildInstanceOnNode(e){const t=e.getInstances();for(let i=0;i<t.length;i++)if(t[i].oldParent===this)return t[i];return null}onChildInserted(e,t){let i=this.findChildInstanceOnNode(e);i?i.addRemoveCounter+=1:i=ql.createFromPool(this.display,this.trail.copy().addDescendant(e,t),!1,!1),this.insertInstance(i,t),this.markSkipPruning()}onChildRemoved(e,t){const i=this.findChildInstanceOnNode(e);i.addRemoveCounter-=1,this.instanceRemovalCheckList.push(i),this.removeInstanceWithIndex(i,t),this.markSkipPruning()}onChildrenReordered(e,t){this.reorderInstances(e,t),this.markSkipPruning()}onVisibilityChange(){this.stitchChangeFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning(),this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()}onOpacityChange(){this.markRenderStateDirty()}markChildVisibilityDirty(){this.childVisibilityDirty||(this.childVisibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty())}updateDrawableFittability(e){this.selfDrawable&&this.selfDrawable.setFittable(e),this.groupDrawable&&this.groupDrawable.setFittable(e)}updateVisibility(e,t,i,s){this.visibilityDirty&&(s=!0);const r=this.node.isVisible(),o=this.visible,d=this.relativeVisible,g=this.selfVisible,y=this.node.voicingVisibleProperty.value,S=this.voicingVisible,T=o&&S;this.visible=e&&r,this.voicingVisible=t&&y,this.relativeVisible=i&&r,this.selfVisible=this.isVisibilityApplied?!0:this.relativeVisible;const L=this.children.length;for(let A=0;A<L;A++){const Q=this.children[A];(s||Q.visibilityDirty||Q.childVisibilityDirty)&&Q.updateVisibility(this.visible,this.voicingVisible,this.isVisibilityApplied?!0:this.relativeVisible,s)}this.visibilityDirty=!1,this.childVisibilityDirty=!1,this.visible!==o&&this.visibleEmitter.emit(),this.relativeVisible!==d&&this.relativeVisibleEmitter.emit(),this.selfVisible!==g&&this.selfVisibleEmitter.emit();const x=this.voicingVisible&&this.visible;x!==T&&this.canVoiceEmitter.emit(x)}getDescendantCount(){let e=this.children.length;for(let t=0;t<this.children.length;t++)e+=this.children[t].getDescendantCount();return e}addSVGGroup(e){this.svgGroups.push(e)}removeSVGGroup(e){mn(this.svgGroups,e)}lookupSVGGroup(e){const t=this.svgGroups.length;for(let i=0;i<t;i++){const s=this.svgGroups[i];if(s.block===e)return s}return null}getFilterRootInstance(){return this.isBackbone||this.isInstanceCanvasCache||!this.parent?this:this.parent.getFilterRootInstance()}getTransformRootInstance(){return this.isTransformed||!this.parent?this:this.parent.getTransformRootInstance()}getVisibilityRootInstance(){return this.isVisibilityApplied||!this.parent?this:this.parent.getVisibilityRootInstance()}attachNodeListeners(){this.relativeTransform.attachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.addListener(this.childInsertedListener),this.node.childRemovedEmitter.addListener(this.childRemovedListener),this.node.childrenReorderedEmitter.addListener(this.childrenReorderedListener),this.node.visibleProperty.lazyLink(this.visibilityListener),this.node.voicingVisibleProperty.lazyLink(this.visibilityListener),this.node.filterChangeEmitter.addListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.lazyLink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.addListener(this.markRenderStateDirtyListener))}detachNodeListeners(){this.relativeTransform.detachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.removeListener(this.childInsertedListener),this.node.childRemovedEmitter.removeListener(this.childRemovedListener),this.node.childrenReorderedEmitter.removeListener(this.childrenReorderedListener),this.node.visibleProperty.unlink(this.visibilityListener),this.node.voicingVisibleProperty.unlink(this.visibilityListener),this.node.filterChangeEmitter.removeListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.unlink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.removeListener(this.markRenderStateDirtyListener))}markRenderStateDirty(){this.renderStateDirtyFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}markSkipPruning(){this.skipPruningFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}getBranchIndexTo(e){const t=this.branchIndexMap[e.id];if(t!==void 0)return t;const i=this.trail.getBranchIndexTo(e.trail);return this.branchIndexMap[e.id]=i,e.branchIndexMap[this.id]=i,this.branchIndexReferences.push(e),e.branchIndexReferences.push(this),i}dispose(){for(this.active=!1;this.branchIndexReferences.length;){const t=this.branchIndexReferences.pop();delete this.branchIndexMap[t.id],delete t.branchIndexMap[this.id],mn(t.branchIndexReferences,this)}this.groupDrawable&&this.groupDrawable.disposeImmediately(this.display),this.sharedCacheDrawable&&this.sharedCacheDrawable.disposeImmediately(this.display),this.selfDrawable&&this.selfDrawable.disposeImmediately(this.display);const e=this.children.length;for(let t=0;t<e;t++)this.children[t].dispose();for(;this.instanceRemovalCheckList.length;){const t=this.instanceRemovalCheckList.pop();t.active&&t.dispose()}this.stateless||this.detachNodeListeners(),this.node.removeInstance(this),this.sharedCacheInstance&&(this.sharedCacheInstance.externalReferenceCount--,this.sharedCacheInstance.externalReferenceCount===0&&(delete this.display._sharedCanvasInstances[this.node.getId()],this.sharedCacheInstance.dispose())),this.cleanInstance(null,null),this.visibleEmitter.removeAllListeners(),this.relativeVisibleEmitter.removeAllListeners(),this.selfVisibleEmitter.removeAllListeners(),this.canVoiceEmitter.removeAllListeners(),this.freeToPool()}audit(e,t){}auditVisibility(e){}auditChangeIntervals(e,t,i,s){if(e){let r=e;for(;r!==t;)r=r.oldNextDrawable}if(i){let r=i;for(;r!==s;)r=r.nextDrawable}}toString(){return`${this.id}#${this.node?`${this.node.constructor.name?this.node.constructor.name:"?"}#${this.node.id}`:"-"}`}}Ts.mixInto(ql);class pN extends hp{constructor(e,t){super(e,t,"mouseTouchAreaOverlay")}addShapes(){ma.eachTrailUnder(new Ki(this.rootNode),e=>{const t=e.lastNode();if(!t.isVisible())return!0;if((t.mouseArea||t.touchArea)&&e.isVisible()){const i=e.getTransform();t.mouseArea&&this.addShape(i.transformShape(t.mouseArea instanceof ot?Wt.bounds(t.mouseArea):t.mouseArea),"rgba(0,0,255,0.8)",!0),t.touchArea&&this.addShape(i.transformShape(t.touchArea instanceof ot?Wt.bounds(t.touchArea):t.touchArea),"rgba(255,0,0,0.8)",!1)}return!1})}}class gN{constructor(e,t){this.display=e,this.rootNode=t,this.pointerSVGContainer=document.createElement("div"),this.pointerSVGContainer.style.position="absolute",this.pointerSVGContainer.style.top="0",this.pointerSVGContainer.style.left="0",this.pointerSVGContainer.style["pointer-events"]="none";const i=10,s=1,r=(i+s/2)*2,o=r/2;e.sizeProperty.lazyLink(g=>{this.pointerSVGContainer.setAttribute("width",""+g.width),this.pointerSVGContainer.setAttribute("height",""+g.height),this.pointerSVGContainer.style.clip=`rect(0px,${g.width}px,${g.height}px,0px)`});const d=mt.IDENTITY.copy();this.pointerAdded=g=>{const y=document.createElementNS(ws,"svg");y.style.position="absolute",y.style.top="0",y.style.left="0",y.style["pointer-events"]="none",Zi.prepareForTransform(y),y.setAttribute("width",""+r),y.setAttribute("height",""+r);const S=document.createElementNS(ws,"circle");S.setAttribute("cx",""+(i+s/2)),S.setAttribute("cy",""+(i+s/2)),S.setAttribute("r",""+i),S.setAttribute("style","fill:black;"),S.setAttribute("style","stroke:white;"),S.setAttribute("opacity","0.4");const T=A=>Zi.applyPreparedTransform(d.setToTranslation(A.x-o,A.y-o),y),L=()=>{g.isTouchLike()&&(this.pointerSVGContainer.removeChild(y),g.removeInputListener(x))},x={move:()=>{g.point&&T(g.point)},up:L,cancel:L,focus:()=>{g instanceof df&&g.point&&(T(g.point),this.pointerSVGContainer.appendChild(y))},blur:()=>{this.pointerSVGContainer.contains(y)&&this.pointerSVGContainer.removeChild(y)}};g.addInputListener(x),x.move(),y.appendChild(S),this.pointerSVGContainer.appendChild(y)},e._input.pointerAddedEmitter.addListener(this.pointerAdded),e._input&&e._input.mouse&&this.pointerAdded(e._input.mouse),this.domElement=this.pointerSVGContainer}dispose(){this.display._input.pointerAddedEmitter.removeListener(this.pointerAdded)}update(){}}class mN{constructor(e){this.display=e;const t=document.createElementNS(ws,"svg");this.domElement=t,t.style.position="absolute",t.setAttribute("class","safari-workaround"),t.style.top="0",t.style.left="0",t.style["pointer-events"]="none",e.sizeProperty.link(i=>{t.setAttribute("width",""+i.width),t.setAttribute("height",""+i.height),t.style.clip=`rect(0px,${i.width}px,${i.height}px,0px)`}),this.rect=document.createElementNS(ws,"rect"),t.appendChild(this.rect),this.update()}update(){const e=Fl.nextDouble();this.rect.setAttribute("x",""+e),this.rect.setAttribute("y",""+e),this.rect.setAttribute("style","fill: rgba(255,200,100,0); stroke: none;"),this.display.width&&this.rect.setAttribute("width",""+(this.display.width-e*2)),this.display.height&&this.rect.setAttribute("height",""+(this.display.height-e*2))}}const yN=ap.fromByteArray,_N={"scenery-grab-pointer":["grab","-moz-grab","-webkit-grab","pointer"],"scenery-grabbing-pointer":["grabbing","-moz-grabbing","-webkit-grabbing","pointer"]};let AN=1,kb=0;class Ec{constructor(e,t){this._requestAnimationFrameID=null,this._highlightVisibilityController=null,this._refreshSVGEmitter=new _n,this._refreshSVGPending=!1;const i=St()({width:t&&t.container&&t.container.clientWidth||640,height:t&&t.container&&t.container.clientHeight||480,allowCSSHacks:!0,allowSafariRedrawWorkaround:!1,allowSceneOverflow:!1,allowLayerFitting:!1,forceSVGRefresh:!1,defaultCursor:"default",backgroundColor:null,preserveDrawingBuffer:!1,allowWebGL:!0,accessibility:!0,interactiveHighlightsEnabledProperty:new Li(!1),interactive:!0,listenToOnlyElement:!1,batchDOMEvents:!1,assumeFullWindow:!1,aggressiveContextRecreation:!0,passiveEvents:An.safari?!1:null,allowBackingScaleAntialiasing:!0,preventMultitouch:!1,interruptMultitouch:!1},t);this.id=AN++,this._accessible=i.accessibility,this._preserveDrawingBuffer=i.preserveDrawingBuffer,this._allowWebGL=i.allowWebGL,this._allowCSSHacks=i.allowCSSHacks,this._allowSceneOverflow=i.allowSceneOverflow,this._defaultCursor=i.defaultCursor,this.sizeProperty=new Ni(new Ws(i.width,i.height)),this._currentSize=new Ws(-1,-1),this._rootNode=e,this._rootNode.addRootedDisplay(this),this._rootBackbone=null,this._domElement=i.container?el.repurposeBackboneContainer(i.container):el.createRootDivBackbone(),this._sharedCanvasInstances={},this._baseInstance=null,this._frameId=0,this._dirtyTransformRoots=[],this._dirtyTransformRootsWithoutPass=[],this._instanceRootsToDispose=[],this._reduceReferencesNeeded=[],this._drawablesToDispose=[],this._drawablesToChangeBlock=[],this._drawablesToUpdateLinks=[],this._changeIntervalsToDispose=[],this._lastCursor=null,this._currentBackgroundCSS=null,this._backgroundColor=null,this._input=null,this._inputListeners=[],this._interactive=i.interactive,this._listenToOnlyElement=i.listenToOnlyElement,this._batchDOMEvents=i.batchDOMEvents,this._assumeFullWindow=i.assumeFullWindow,this._passiveEvents=i.passiveEvents,this._preventMultitouch=i.preventMultitouch,this._interruptMultitouch=i.interruptMultitouch,this._aggressiveContextRecreation=i.aggressiveContextRecreation,this._allowBackingScaleAntialiasing=i.allowBackingScaleAntialiasing,this._allowLayerFitting=i.allowLayerFitting,this._forceSVGRefresh=i.forceSVGRefresh,this._overlays=[],this._pointerOverlay=null,this._pointerAreaOverlay=null,this._hitAreaOverlay=null,this._canvasAreaBoundsOverlay=null,this._fittedBlockBoundsOverlay=null,this._interactiveHighlightsEnabledProperty=i.interactiveHighlightsEnabledProperty,this.applyCSSHacks(),this.setBackgroundColor(i.backgroundColor);const s=new vu;if(this.descriptionUtteranceQueue=new op(s,{initialize:this._accessible,featureSpecificAnnouncingControlPropertyName:"descriptionCanAnnounceProperty"}),An.safari&&i.allowSafariRedrawWorkaround&&this.addOverlay(new mN(this)),this.focusManager=new ys,this._accessible&&(this._focusRootNode=new Rt,this._focusOverlay=new ea(this,this._focusRootNode,Ec,{pdomFocusHighlightsVisibleProperty:this.focusManager.pdomFocusHighlightsVisibleProperty,interactiveHighlightsVisibleProperty:this.focusManager.interactiveHighlightsVisibleProperty,readingBlockHighlightsVisibleProperty:this.focusManager.readingBlockHighlightsVisibleProperty}),this.addOverlay(this._focusOverlay),this._highlightVisibilityController=new wL(this,{interactiveHighlightsEnabledProperty:this._interactiveHighlightsEnabledProperty})),this._accessible){this._rootPDOMInstance=bl.pool.create(null,this,new Ki),Wi.rebuildInstanceTree(this._rootPDOMInstance),this._domElement.appendChild(this._rootPDOMInstance.peer.primarySibling);const r=s.ariaLiveContainer;this._domElement.appendChild(r),r.style[Xt.userSelect]="none",this._boundHandleFullScreenNavigation=this.handleFullScreenNavigation.bind(this),Fa.keydownEmitter.addListener(this._boundHandleFullScreenNavigation)}}getDOMElement(){return this._domElement}get domElement(){return this.getDOMElement()}updateDisplay(){const e=!!this._baseInstance;for(this._input&&this._input.validatePointers(),this._accessible&&this._rootPDOMInstance.peer.updateSubtreePositioning(),this._rootNode.validateWatchedBounds(),this._baseInstance=this._baseInstance||ql.createFromPool(this,new Ki(this._rootNode),!0,!1),this._baseInstance.baseSyncTree(),e&&this.markTransformRootDirty(this._baseInstance,this._baseInstance.isTransformed);this._drawablesToUpdateLinks.length;)this._drawablesToUpdateLinks.pop().updateLinks();for(;this._changeIntervalsToDispose.length;)this._changeIntervalsToDispose.pop().dispose();for(this._rootBackbone=this._rootBackbone||this._baseInstance.groupDrawable;this._drawablesToChangeBlock.length;)this._drawablesToChangeBlock.pop().updateBlock();for(this.updateDirtyTransformRoots(),this._baseInstance.updateVisibility(!0,!0,!0,!1);this._instanceRootsToDispose.length;)this._instanceRootsToDispose.pop().dispose();for(;this._drawablesToDispose.length;)this._drawablesToDispose.pop().dispose();if(this._rootBackbone.update(),this.updateCursor(),this.updateBackgroundColor(),this.updateSize(),this._overlays.length){let t=this._rootBackbone.lastZIndex;for(let i=0;i<this._overlays.length;i++){const s=this._overlays[i];s.domElement.style.zIndex=""+t++,s.update()}}for(;this._reduceReferencesNeeded.length;)this._reduceReferencesNeeded.pop().reduceReferences();this._frameId++,Wi.auditPDOMDisplays(this.rootNode),(this._forceSVGRefresh||this._refreshSVGPending)&&(this._refreshSVGPending=!1,this.refreshSVG())}getPhetioElementAt(e){const t=this._rootNode.getPhetioMouseHit(e);return t==="phetioNotSelectable"?null:t}updateSize(){let e=!1;this.size.width!==this._currentSize.width&&(e=!0,this._currentSize.width=this.size.width,this._domElement.style.width=`${this.size.width}px`),this.size.height!==this._currentSize.height&&(e=!0,this._currentSize.height=this.size.height,this._domElement.style.height=`${this.size.height}px`),e&&!this._allowSceneOverflow&&(this._domElement.style.clip=`rect(0px,${this.size.width}px,${this.size.height}px,0px)`)}isWebGLAllowed(){return this._allowWebGL}get webglAllowed(){return this.isWebGLAllowed()}getRootNode(){return this._rootNode}get rootNode(){return this.getRootNode()}getRootBackbone(){return this._rootBackbone}get rootBackbone(){return this.getRootBackbone()}getSize(){return this.sizeProperty.value}get size(){return this.getSize()}getBounds(){return this.size.toBounds()}get bounds(){return this.getBounds()}setSize(e){this.sizeProperty.value=e}setWidthHeight(e,t){this.setSize(new Ws(e,t))}getWidth(){return this.size.width}get width(){return this.getWidth()}set width(e){this.setWidth(e)}setWidth(e){return this.getWidth()!==e&&this.setSize(new Ws(e,this.getHeight())),this}getHeight(){return this.size.height}get height(){return this.getHeight()}set height(e){this.setHeight(e)}setHeight(e){return this.getHeight()!==e&&this.setSize(new Ws(this.getWidth(),e)),this}setBackgroundColor(e){return this._backgroundColor=e,this}set backgroundColor(e){this.setBackgroundColor(e)}get backgroundColor(){return this.getBackgroundColor()}getBackgroundColor(){return this._backgroundColor}setInteractiveHighlightsEnabled(e){return this._interactiveHighlightsEnabledProperty.value=e,this}set interactiveHighlightsEnabled(e){this.setInteractiveHighlightsEnabled(e)}get interactiveHighlightsEnabled(){return this.getInteractiveHighlightsEnabled()}getInteractiveHighlightsEnabled(){return this._interactiveHighlightsEnabledProperty.value}get interactive(){return this._interactive}set interactive(e){this._accessible&&e!==this._interactive&&this._rootPDOMInstance.peer.recursiveDisable(!e),this._interactive=e,!this._interactive&&this._input&&(this._input.interruptPointers(),this._input.clearBatchedEvents(),this._input.removeTemporaryPointers(),this._rootNode.interruptSubtreeInput(),this.interruptInput())}addOverlay(e){this._overlays.push(e),this._domElement.appendChild(e.domElement),e.domElement.setAttribute("aria-hidden","true")}removeOverlay(e){this._domElement.removeChild(e.domElement),this._overlays.splice(he.indexOf(this._overlays,e),1)}getPDOMRootElement(){return this._accessible?this._rootPDOMInstance.peer.primarySibling:null}get pdomRootElement(){return this.getPDOMRootElement()}isAccessible(){return this._accessible}isElementUnderPDOM(e,t){if(!this._accessible)return!1;const i=this.pdomRootElement.contains(e),s=e!==this.pdomRootElement;return t?i:i&&s}handleFullScreenNavigation(e){if(jh.isFullScreen()&&je.isKeyEvent(e,je.KEY_TAB)){const t=this.pdomRootElement;(e.shiftKey?Vi.getPreviousFocusable(t||void 0):Vi.getNextFocusable(t||void 0))===e.target&&e.preventDefault()}}getUsedRenderersBitmask(){function e(t){let i=0;return he.each(t.blocks,s=>{s instanceof X0&&s.domDrawable instanceof el?i=i|e(s.domDrawable):i=i|s.renderer}),i}return e(this._rootBackbone)&Le.bitmaskRendererArea}markTransformRootDirty(e,t){t?this._dirtyTransformRoots.push(e):this._dirtyTransformRootsWithoutPass.push(e)}updateDirtyTransformRoots(){for(;this._dirtyTransformRoots.length;)this._dirtyTransformRoots.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!0);for(;this._dirtyTransformRootsWithoutPass.length;)this._dirtyTransformRootsWithoutPass.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!1)}markDrawableChangedBlock(e){this._drawablesToChangeBlock.push(e)}markForReducedReferences(e){this._reduceReferencesNeeded.push(e)}markInstanceRootForDisposal(e){this._instanceRootsToDispose.push(e)}markDrawableForDisposal(e){this._drawablesToDispose.push(e)}markDrawableForLinksUpdate(e){this._drawablesToUpdateLinks.push(e)}markChangeIntervalToDispose(e){this._changeIntervalsToDispose.push(e)}updateBackgroundColor(){const e=this._backgroundColor===null?"":this._backgroundColor.toCSS?this._backgroundColor.toCSS():this._backgroundColor;e!==this._currentBackgroundCSS&&(this._currentBackgroundCSS=e,this._domElement.style.backgroundColor=e)}updateCursor(){if(this._input&&this._input.mouse&&this._input.mouse.point){if(this._input.mouse.cursor){this.setSceneCursor(this._input.mouse.cursor);return}const e=this._rootNode.trailUnderPointer(this._input.mouse);if(e)for(let t=e.getCursorCheckIndex();t>=0;t--){const s=e.nodes[t].getEffectiveCursor();if(s){this.setSceneCursor(s);return}}}this.setSceneCursor(this._defaultCursor)}setElementCursor(e){this._domElement.style.cursor=e,this._assumeFullWindow&&(document.body.style.cursor=e)}setSceneCursor(e){if(e!==this._lastCursor){this._lastCursor=e;const t=_N[e];if(t)for(let i=t.length-1;i>=0;i--)this.setElementCursor(t[i]);else this.setElementCursor(e)}}applyCSSHacks(){this._allowSceneOverflow||(this._domElement.style.overflow="hidden"),this._domElement.style.msTouchAction="none",Xt.setStyle(this._domElement,Xt.fontSmoothing,"antialiased"),this._allowCSSHacks&&(this._listenToOnlyElement||(document.onselectstart=()=>!1,document.body.style.msContentZooming="none"),Xt.setStyle(this._domElement,Xt.userDrag,"none"),Xt.setStyle(this._domElement,Xt.userSelect,"none"),Xt.setStyle(this._domElement,Xt.touchAction,"none"),Xt.setStyle(this._domElement,Xt.touchCallout,"none"),Xt.setStyle(this._domElement,Xt.tapHighlightColor,"rgba(0,0,0,0)"))}canvasDataURL(e){this.canvasSnapshot(t=>{e(t.toDataURL())})}canvasSnapshot(e){const t=document.createElement("canvas");t.width=this.size.width,t.height=this.size.height;const i=t.getContext("2d");this._rootNode.renderToCanvas(t,i,()=>{e(t,i.getImageData(0,0,t.width,t.height))},this.domElement.style.backgroundColor)}setPointerDisplayVisible(e){const t=!!this._pointerOverlay;e!==t&&(e?(this._pointerOverlay=new gN(this,this._rootNode),this.addOverlay(this._pointerOverlay)):(this.removeOverlay(this._pointerOverlay),this._pointerOverlay.dispose(),this._pointerOverlay=null))}setPointerAreaDisplayVisible(e){const t=!!this._pointerAreaOverlay;e!==t&&(e?(this._pointerAreaOverlay=new pN(this,this._rootNode),this.addOverlay(this._pointerAreaOverlay)):(this.removeOverlay(this._pointerAreaOverlay),this._pointerAreaOverlay.dispose(),this._pointerAreaOverlay=null))}setHitAreaDisplayVisible(e){const t=!!this._hitAreaOverlay;e!==t&&(e?(this._hitAreaOverlay=new Hh(this,this._rootNode),this.addOverlay(this._hitAreaOverlay)):(this.removeOverlay(this._hitAreaOverlay),this._hitAreaOverlay.dispose(),this._hitAreaOverlay=null))}setCanvasNodeBoundsVisible(e){const t=!!this._canvasAreaBoundsOverlay;e!==t&&(e?(this._canvasAreaBoundsOverlay=new $L(this,this._rootNode),this.addOverlay(this._canvasAreaBoundsOverlay)):(this.removeOverlay(this._canvasAreaBoundsOverlay),this._canvasAreaBoundsOverlay.dispose(),this._canvasAreaBoundsOverlay=null))}setFittedBlockBoundsVisible(e){const t=!!this._fittedBlockBoundsOverlay;e!==t&&(e?(this._fittedBlockBoundsOverlay=new eN(this,this._rootNode),this.addOverlay(this._fittedBlockBoundsOverlay)):(this.removeOverlay(this._fittedBlockBoundsOverlay),this._fittedBlockBoundsOverlay.dispose(),this._fittedBlockBoundsOverlay=null))}resizeOnWindowResize(){const e=()=>{this.setWidthHeight(self.innerWidth,self.innerHeight)};self.addEventListener("resize",e),e()}updateOnRequestAnimationFrame(e){let t=0,i=0;const s=this;(function r(){s._requestAnimationFrameID=self.requestAnimationFrame(r,s._domElement);const o=Date.now();t!==0&&(i=(o-t)/1e3),t=o;const d=document.timeline.currentTime;(d===null||d!==kb)&&(kb=d,Qn.emit(i)),e&&e(i),s.updateDisplay()})()}cancelUpdateOnRequestAnimationFrame(){this._requestAnimationFrameID!==null&&self.cancelAnimationFrame(this._requestAnimationFrameID)}initializeEvents(e){const t=new Pc(this,!this._listenToOnlyElement,this._batchDOMEvents,this._assumeFullWindow,this._passiveEvents,this._preventMultitouch,this._interruptMultitouch,e);this._input=t,t.connectListeners()}detachEvents(){this._input.disconnectListeners(),this._input=null}addInputListener(e){return he.includes(this._inputListeners,e)||this._inputListeners.push(e),this}removeInputListener(e){return this._inputListeners.splice(he.indexOf(this._inputListeners,e),1),this}hasInputListener(e){for(let t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}getInputListeners(){return this._inputListeners.slice(0)}get inputListeners(){return this.getInputListeners()}interruptInput(){const e=this.inputListeners;for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}return this}interruptPointers(){return this._input&&this._input.interruptPointers(),this}interruptOtherPointers(e=null){var t;return this._input&&this._input.interruptPointers(e||((t=this._input.currentSceneryEvent)==null?void 0:t.pointer)||null),this}ensureNotPainting(){}loseWebGLContexts(){(function e(t){t.blocks&&t.blocks.forEach(i=>{const s=i.gl;s&&Zi.loseContext(s);for(let r=i.firstDrawable;r!==null&&(e(r),r!==i.lastDrawable);r=r.nextDrawable);})})(this._rootBackbone)}getDebugHTML(){const e="font-weight: bold; font-size: 120%; margin-top: 5px;";let t=0,i="";i+=`<div style="${e}">Display (${this.id}) Summary</div>`,i+=`${this.size.toString()} frame:${this._frameId} input:${!!this._input} cursor:${this._lastCursor}<br/>`;function s(Q){let z=1;for(let G=0;G<Q.children.length;G++)z+=s(Q.children[G]);return z}i+=`Nodes: ${s(this._rootNode)}<br/>`;function r(Q){let z=1;for(let G=0;G<Q.children.length;G++)z+=r(Q.children[G]);return z}i+=this._baseInstance?`Instances: ${r(this._baseInstance)}<br/>`:"";function o(Q){let z=1;if(Q.blocks)he.each(Q.blocks,G=>{z+=o(G)});else if(Q.firstDrawable&&Q.lastDrawable){for(let G=Q.firstDrawable;G!==Q.lastDrawable;G=G.nextDrawable)z+=o(G);z+=o(Q.lastDrawable)}return z}i+=this._rootBackbone?`Drawables: ${o(this._rootBackbone)}<br/>`:"";const d={};function g(Q){const z=Q.constructor.name;d[z]?d[z]++:d[z]=1}function y(Q){let z=0;Q.selfDrawable&&(g(Q.selfDrawable),z++),Q.groupDrawable&&(g(Q.groupDrawable),z++),Q.sharedCacheDrawable&&(g(Q.sharedCacheDrawable),z++);for(let G=0;G<Q.children.length;G++)z+=y(Q.children[G]);return z}i+=this._baseInstance?`Retained Drawables: ${y(this._baseInstance)}<br/>`:"";for(const Q in d)i+=`&nbsp;&nbsp;&nbsp;&nbsp;${Q}: ${d[Q]}<br/>`;function S(Q){if(!Q.firstDrawable||!Q.lastDrawable)return"";const z=Q.domDrawable&&Q.domDrawable.blocks;let G=`<div style="margin-left: ${t*20}px">`;if(G+=Q.toString(),z||(G+=` (${Q.drawableCount} drawables)`),G+="</div>",t+=1,z)for(let re=0;re<Q.domDrawable.blocks.length;re++)G+=S(Q.domDrawable.blocks[re]);return t-=1,G}if(this._rootBackbone){i+=`<div style="${e}">Block Summary</div>`;for(let Q=0;Q<this._rootBackbone.blocks.length;Q++)i+=S(this._rootBackbone.blocks[Q])}function T(Q){let z="";function G(ae){z+=` <span style="color: #008">${ae}</span>`}const re=Q.node;z+=Q.id,z+=` ${re.constructor.name?re.constructor.name:"?"}`,z+=` <span style="font-weight: ${re.isPainted()?"bold":"normal"}">${re.id}</span>`,z+=re.getDebugHTMLExtras(),re.visible||G("invis"),Q.visible||G("I-invis"),Q.relativeVisible||G("I-rel-invis"),Q.selfVisible||G("I-self-invis"),Q.fittability.ancestorsFittable||G("nofit-ancestor"),Q.fittability.selfFittable||G("nofit-self"),re.pickable===!0&&G("pickable"),re.pickable===!1&&G("unpickable"),Q.trail.isPickable()&&G('<span style="color: #808">hits</span>'),re.getEffectiveCursor()&&G(`effectiveCursor:${re.getEffectiveCursor()}`),re.clipArea&&G("clipArea"),re.mouseArea&&G("mouseArea"),re.touchArea&&G("touchArea"),re.getInputListeners().length&&G("inputListeners"),re.getRenderer()&&G(`renderer:${re.getRenderer()}`),re.isLayerSplit()&&G("layerSplit"),re.opacity<1&&G(`opacity:${re.opacity}`),re.disabledOpacity<1&&G(`disabledOpacity:${re.disabledOpacity}`),re._boundsEventCount>0&&G(`<span style="color: #800">boundsListen:${re._boundsEventCount}:${re._boundsEventSelfCount}</span>`);let ne="";switch(re.transform.getMatrix().type){case Tt.IDENTITY:ne="";break;case Tt.TRANSLATION_2D:ne="translated";break;case Tt.SCALING:ne="scale";break;case Tt.AFFINE:ne="affine";break;case Tt.OTHER:ne="other";break;default:throw new Error(`invalid matrix type: ${re.transform.getMatrix().type}`)}return ne&&(z+=` <span style="color: #88f" title="${re.transform.getMatrix().toString().replace(`
`,"&#10;")}">${ne}</span>`),z+=` <span style="color: #888">[Trail ${Q.trail.indices.join(".")}]</span>`,z+=` <span style="color: #8c8">${re._rendererSummary.bitmask.toString(16)}${re._rendererBitmask!==Le.bitmaskNodeDefault?` (${re._rendererBitmask.toString(16)})`:""}</span>`,z}function L(Q){let z=Q.toString();return Q.visible&&(z=`<strong>${z}</strong>`),Q.dirty&&(z+=Q.dirty?' <span style="color: #c00;">[x]</span>':""),Q.fittable||(z+=Q.dirty?' <span style="color: #0c0;">[no-fit]</span>':""),z}function x(Q){let z=`<div style="margin-left: ${t*20}px">`;function G(re,ne){z+=` <span style="color: #888">${re}:${L(ne)}</span>`}z+=T(Q),Q.selfDrawable&&G("self",Q.selfDrawable),Q.groupDrawable&&G("group",Q.groupDrawable),Q.sharedCacheDrawable&&G("sharedCache",Q.sharedCacheDrawable),z+="</div>",i+=z,t+=1,he.each(Q.children,re=>{x(re)}),t-=1}this._baseInstance&&(i+=`<div style="${e}">Root Instance Tree</div>`,x(this._baseInstance)),he.each(this._sharedCanvasInstances,Q=>{i+=`<div style="${e}">Shared Canvas Instance Tree</div>`,x(Q)});function A(Q){let z=`<div style="margin-left: ${t*20}px">`;if(z+=L(Q),Q.instance?(z+=` <span style="color: #0a0;">(${Q.instance.trail.toPathString()})</span>`,z+=`&nbsp;&nbsp;&nbsp;${T(Q.instance)}`):Q.backboneInstance&&(z+=` <span style="color: #a00;">(${Q.backboneInstance.trail.toPathString()})</span>`,z+=`&nbsp;&nbsp;&nbsp;${T(Q.backboneInstance)}`),z+="</div>",i+=z,Q.blocks)t+=1,he.each(Q.blocks,G=>{A(G)}),t-=1;else if(Q.firstDrawable&&Q.lastDrawable){t+=1;for(let G=Q.firstDrawable;G!==Q.lastDrawable;G=G.nextDrawable)A(G);A(Q.lastDrawable),t-=1}}return this._rootBackbone&&(i+='<div style="font-weight: bold;">Root Drawable Tree</div>',A(this._rootBackbone)),i}getDebugURI(){return`data:text/html;charset=utf-8,${encodeURIComponent(`<!DOCTYPE html><html lang="en"><head><title>Scenery Debug Snapshot</title></head><body style="font-size: 12px;">${this.getDebugHTML()}</body></html>`)}`}popupDebug(){self.open(this.getDebugURI())}iframeDebug(){const e=document.createElement("iframe");e.width=""+self.innerWidth,e.height=""+self.innerHeight,e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.zIndex="10000",document.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.write(this.getDebugHTML()),e.contentWindow.document.close(),e.contentWindow.document.body.style.background="white";const t=document.createElement("button");t.style.position="absolute",t.style.top="0",t.style.right="0",t.style.zIndex="10001",document.body.appendChild(t),t.textContent="close",["pointerdown","click","touchdown"].forEach(i=>{t.addEventListener(i,()=>{document.body.removeChild(e),document.body.removeChild(t)},!0)})}getPDOMDebugHTML(){let e="";const t="font-weight: bold; font-size: 120%; margin-top: 5px;",i="&nbsp;&nbsp;&nbsp;&nbsp;";e+=`<div style="${t}">Accessible Instances</div><br>`,s(this._rootPDOMInstance,"");function s(g,y){e+=`${y+Sm(`${g.isRootInstance?"":g.node.tagName} ${g.toString()}`)}<br>`,g.children.forEach(S=>{s(S,y+i)})}e+=`<br><div style="${t}">Parallel DOM</div><br>`;let r=this._rootPDOMInstance.peer.primarySibling.outerHTML;r=r.replace(/></g,`>
<`);const o=r.split(`
`);let d="";for(let g=0;g<o.length;g++){const y=o[g],S=y.startsWith("</");S&&(d=d.slice(i.length)),e+=`${d+Sm(y)}<br>`,S||(d+=i)}return e}foreignObjectRasterization(e){const t={};let i=0;function s(A){A.id||(A.id=`unknown-canvas-${i++}`),t[A.id]=A.toDataURL()}function r(A){if(A instanceof el)he.each(A.blocks,Q=>{r(Q)});else if(A instanceof G0&&A.firstDrawable&&A.lastDrawable){for(let Q=A.firstDrawable;Q!==A.lastDrawable;Q=Q.nextDrawable)r(Q);r(A.lastDrawable),(A instanceof lp||A instanceof j0)&&A.canvas&&A.canvas instanceof self.HTMLCanvasElement&&s(A.canvas)}zm&&A instanceof zm&&(A.domElement instanceof self.HTMLCanvasElement&&s(A.domElement),Array.prototype.forEach.call(A.domElement.getElementsByTagName("canvas"),Q=>{s(Q)}))}r(this._rootBackbone);const o=document.implementation.createHTMLDocument("");o.documentElement.innerHTML=this.domElement.outerHTML,o.documentElement.setAttribute("xmlns",o.documentElement.namespaceURI),o.documentElement.appendChild(document.createElement("style")).innerHTML=`.${F0.ROOT_CLASS_NAME} { display:none; } `;let d=o.documentElement.getElementsByTagName("canvas");d=Array.prototype.slice.call(d);for(let A=0;A<d.length;A++){const Q=d[A],z=Q.style.cssText,G=o.createElement("img"),re=t[Q.id];G.src=re,G.setAttribute("style",z),Q.parentNode.replaceChild(G,Q)}const g=this.width,y=this.height,S=()=>{Ec.elementToSVGDataURL(o.documentElement,g,y,e)};let T=0,L=!1;const x=Array.prototype.slice.call(o.documentElement.getElementsByTagName("image"));for(let A=0;A<x.length;A++){const Q=x[A],z=Q.getAttribute("xlink:href");z.slice(0,5)!=="data:"&&(T++,L=!0,(()=>{const G=new self.Image,re=Q;G.onload=()=>{const ne=document.createElement("canvas");ne.width=G.width,ne.height=G.height,ne.getContext("2d").drawImage(G,0,0),re.setAttribute("xlink:href",ne.toDataURL()),--T===0&&S()},G.onerror=()=>{--T===0&&S()},G.src=z})())}L||S()}popupRasterization(){this.foreignObjectRasterization(e=>{e&&self.open(e)})}getTrailFromPDOMIndicesString(e){if(!this._rootPDOMInstance)return null;let t=this._rootPDOMInstance;const i=e.split(tp);for(let s=0;s<i.length;s++){const r=Number(i[s]);if(t=t.children[r],!t)return null}return t&&t.trail?t.trail:null}refreshSVG(){this._refreshSVGEmitter.emit()}refreshSVGOnNextFrame(){this._refreshSVGPending=!0}dispose(){this._input&&this.detachEvents(),this._rootNode.removeRootedDisplay(this),this._accessible&&(Fa.keydownEmitter.removeListener(this._boundHandleFullScreenNavigation),this._rootPDOMInstance.dispose()),this._highlightVisibilityController&&this._highlightVisibilityController.dispose(),this._focusOverlay&&this._focusOverlay.dispose(),this.sizeProperty.dispose(),this._baseInstance&&this._baseInstance.dispose(),this.descriptionUtteranceQueue.dispose(),this.focusManager&&this.focusManager.dispose(),this.cancelUpdateOnRequestAnimationFrame()}static elementToSVGDataURL(e,t,i,s){const r=document.createElement("canvas"),o=r.getContext("2d");r.width=t,r.height=i;const d=new self.XMLSerializer().serializeToString(e),g=`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${i}"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">${d}</div></foreignObject></svg>`,y=new self.Image;y.onload=()=>{o.drawImage(y,0,0),s(r.toDataURL())},y.onerror=()=>{s(null)};const S=new CL.TextEncoderLite("utf-8").encode(g),T=yN(S);y.src=`data:image/svg+xml;base64,${T}`}static assertSubtreeDisposed(e){}static addInputListener(e){he.includes(Ln.inputListeners,e)||Ln.inputListeners.push(e)}static removeInputListener(e){Ln.inputListeners.splice(he.indexOf(Ln.inputListeners,e),1)}static hasInputListener(e){return he.includes(Ln.inputListeners,e)}static interruptInput(){const e=Ln.inputListeners.slice(0);for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}}}Ec.INTERRUPT_OTHER_POINTERS=n=>{var e,t,i;(i=(t=(e=self.phet)==null?void 0:e.joist)==null?void 0:t.display)==null||i.interruptOtherPointers(n==null?void 0:n.pointer)};var Yc={},Tr={},sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.startsWith=bN;sl.endsWith=vN;sl.stringIncludes=VN;sl.isRealNaN=Um;sl.arrayIncludes=wN;function bN(n,e,t){return n.substr(t||0,e.length)===e}function vN(n,e,t){var i=(t||n.length)-e.length,s=n.lastIndexOf(e,i);return s!==-1&&s===i}function VN(n,e,t){return n.indexOf(e,t||0)!==-1}function Um(n){return typeof n=="number"&&isNaN(n)}function wN(n,e,t){var i=n.length;if(i===0)return!1;for(var s=t|0,r=Um(e),o=s>=0?s:i+s;o<i;){var d=n[o++];if(d===e||r&&Um(d))return!0}return!1}Object.defineProperty(Tr,"__esModule",{value:!0});Tr.feedPosition=Dc;Tr.jumpPosition=vl;Tr.makeInitialPosition=R1;Tr.copyPosition=To;Tr.default=SN;Tr.lex=M1;Tr.findTextEnd=O1;Tr.lexText=J0;Tr.lexComment=q1;Tr.lexTag=$0;Tr.isWhitespaceChar=mf;Tr.lexTagName=F1;Tr.lexTagAttributes=z1;Tr.lexSkipTag=H1;var dc=sl;function Dc(n,e,t){for(var i=n.index,s=n.index=i+t,r=i;r<s;r++){var o=e.charAt(r);o===`
`?(n.line++,n.column=0):n.column++}}function vl(n,e,t){var i=t-n.index;return Dc(n,e,i)}function R1(){return{index:0,column:0,line:0}}function To(n){return{index:n.index,line:n.line,column:n.column}}function SN(n,e){var t={str:n,options:e,position:R1(),tokens:[]};return M1(t),t.tokens}function M1(n){for(var e=n.str,t=n.options.childlessTags,i=e.length;n.position.index<i;){var s=n.position.index;if(J0(n),n.position.index===s){var r=(0,dc.startsWith)(e,"!--",s+1);if(r)q1(n);else{var o=$0(n),d=o.toLowerCase();(0,dc.arrayIncludes)(t,d)&&H1(o,n)}}}}var CN=/[A-Za-z0-9]/;function O1(n,e){for(;;){var t=n.indexOf("<",e);if(t===-1)return t;var i=n.charAt(t+1);if(i==="/"||i==="!"||CN.test(i))return t;e=t+1}}function J0(n){var e="text",t=n.str,i=n.position,s=O1(t,i.index);if(s!==i.index){s===-1&&(s=t.length);var r=To(i),o=t.slice(i.index,s);vl(i,t,s);var d=To(i);n.tokens.push({type:e,content:o,position:{start:r,end:d}})}}function q1(n){var e=n.str,t=n.position,i=To(t);Dc(t,e,4);var s=e.indexOf("-->",t.index),r=s+3;s===-1&&(s=r=e.length);var o=e.slice(t.index,s);vl(t,e,r),n.tokens.push({type:"comment",content:o,position:{start:i,end:To(t)}})}function $0(n){var e=n.str,t=n.position;{var i=e.charAt(t.index+1),s=i==="/",r=To(t);Dc(t,e,s?2:1),n.tokens.push({type:"tag-start",close:s,position:{start:r}})}var o=F1(n);z1(n);{var d=e.charAt(t.index),g=d==="/";Dc(t,e,g?2:1);var y=To(t);n.tokens.push({type:"tag-end",close:g,position:{end:y}})}return o}var PN=/\s/;function mf(n){return PN.test(n)}function F1(n){for(var e=n.str,t=n.position,i=e.length,s=t.index;s<i;){var r=e.charAt(s),o=!(mf(r)||r==="/"||r===">");if(o)break;s++}for(var d=s+1;d<i;){var g=e.charAt(d),y=!(mf(g)||g==="/"||g===">");if(!y)break;d++}vl(t,e,d);var S=e.slice(s,d);return n.tokens.push({type:"tag",content:S}),S}function z1(n){for(var e=n.str,t=n.position,i=n.tokens,s=t.index,r=null,o=s,d=[],g=e.length;s<g;){var y=e.charAt(s);if(r){var S=y===r;S&&(r=null),s++;continue}var T=y==="/"||y===">";if(T){s!==o&&d.push(e.slice(o,s));break}var L=mf(y);if(L){s!==o&&d.push(e.slice(o,s)),o=s+1,s++;continue}var x=y==="'"||y==='"';if(x){r=y,s++;continue}s++}vl(t,e,s);for(var A=d.length,Q="attribute",z=0;z<A;z++){var G=d[z],re=G.indexOf("=")===-1;if(re){var ne=d[z+1];if(ne&&(0,dc.startsWith)(ne,"=")){if(ne.length>1){var ae=G+ne;i.push({type:Q,content:ae}),z+=1;continue}var pe=d[z+2];if(z+=1,pe){var N=G+"="+pe;i.push({type:Q,content:N}),z+=1;continue}}}if((0,dc.endsWith)(G,"=")){var Ie=d[z+1];if(Ie&&!(0,dc.stringIncludes)(Ie,"=")){var $e=G+Ie;i.push({type:Q,content:$e}),z+=1;continue}var Ee=G.slice(0,-1);i.push({type:Q,content:Ee});continue}i.push({type:Q,content:G})}}var EN=[].push;function H1(n,e){for(var t=e.str,i=e.position,s=e.tokens,r=n.toLowerCase(),o=t.length,d=i.index;d<o;){var g=t.indexOf("</",d);if(g===-1){J0(e);break}var y=To(i);vl(y,t,g);var S={str:t,position:y,tokens:[]},T=$0(S);if(r!==T.toLowerCase()){d=S.position.index;continue}if(g!==i.index){var L=To(i);vl(i,t,g),s.push({type:"text",content:t.slice(L.index,g),position:{start:L,end:To(i)}})}EN.apply(s,S.tokens),vl(i,t,S.position.index);break}}var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.default=DN;Vu.hasTerminalParent=K1;Vu.rewindStack=Wm;Vu.parse=ey;var Ym=sl;function DN(n,e){var t={tagName:null,children:[]},i={tokens:n,options:e,cursor:0,stack:[t]};return ey(i),t.children}function K1(n,e,t){var i=t[n];if(i)for(var s=e.length-1;s>=0;){var r=e[s].tagName;if(r===n)break;if((0,Ym.arrayIncludes)(i,r))return!0;s--}return!1}function Wm(n,e,t,i){n[e].position.end=i;for(var s=e+1,r=n.length;s<r;s++)n[s].position.end=t;n.splice(e)}function ey(n){for(var e=n.tokens,t=n.options,i=n.stack,s=i[i.length-1].children,r=e.length,o=n.cursor;o<r;){var d=e[o];if(d.type!=="tag-start"){s.push(d),o++;continue}var g=e[++o];o++;var y=g.content.toLowerCase();if(d.close){for(var S=i.length,T=!1;--S>-1;)if(i[S].tagName===y){T=!0;break}for(;o<r;){var L=e[o];if(L.type!=="tag-end")break;o++}if(T){Wm(i,S,d.position.start,e[o-1].position.end);break}else continue}var x=(0,Ym.arrayIncludes)(t.closingTags,y),A=x;if(A){var Q=t.closingTagAncestorBreakers;A=!K1(y,i,Q)}if(A)for(var z=i.length-1;z>0;){if(y===i[z].tagName){Wm(i,z,d.position.start,d.position.start);var G=z-1;s=i[G].children;break}z=z-1}for(var re=[],ne=void 0;o<r&&(ne=e[o],ne.type!=="tag-end");)re.push(ne.content),o++;o++;var ae=[],pe={start:d.position.start,end:ne.position.end},N={type:"element",tagName:g.content,attributes:re,children:ae,position:pe};s.push(N);var Ie=!(ne.close||(0,Ym.arrayIncludes)(t.voidTags,y));if(Ie){var $e=i.push({tagName:y,children:ae,position:pe}),Ee={tokens:e,options:t,cursor:o,stack:i};ey(Ee),o=Ee.cursor;var Je=i.length===$e;Je&&(N.position.end=e[o-1].position.end)}}n.cursor=o}var wu={};Object.defineProperty(wu,"__esModule",{value:!0});wu.splitHead=U1;wu.unquote=Y1;wu.format=W1;wu.formatAttributes=G1;function U1(n,e){var t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]}function Y1(n){var e=n.charAt(0),t=n.length-1,i=e==='"'||e==="'";return i&&e===n.charAt(t)?n.slice(1,t):n}function W1(n,e){return n.map(function(t){var i=t.type,s=i==="element"?{type:i,tagName:t.tagName.toLowerCase(),attributes:G1(t.attributes),children:W1(t.children,e)}:{type:i,content:t.content};return e.includePositions&&(s.position=t.position),s})}function G1(n){return n.map(function(e){var t=U1(e.trim(),"="),i=t[0],s=typeof t[1]=="string"?Y1(t[1]):null;return{key:i,value:s}})}var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.formatAttributes=Gm;Wc.toHTML=ty;var TN=sl;function Gm(n){return n.reduce(function(e,t){var i=t.key,s=t.value;if(s===null)return e+" "+i;var r=s.indexOf("'")!==-1,o=r?'"':"'";return e+" "+i+"="+o+s+o},"")}function ty(n,e){return n.map(function(t){if(t.type==="text")return t.content;if(t.type==="comment")return"<!--"+t.content+"-->";var i=t.tagName,s=t.attributes,r=t.children,o=(0,TN.arrayIncludes)(e.voidTags,i.toLowerCase());return o?"<"+i+Gm(s)+">":"<"+i+Gm(s)+">"+ty(r,e)+"</"+i+">"}).join("")}Wc.default={toHTML:ty};var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.childlessTags=["style","script","template"];Su.closingTags=["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"];Su.closingTagAncestorBreakers={li:["ul","ol","menu"],dt:["dl"],dd:["dl"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table"],td:["table"]};Su.voidTags=["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];Object.defineProperty(Yc,"__esModule",{value:!0});Yc.parseDefaults=void 0;var tm=Yc.parse=RN;Yc.stringify=MN;var xN=Tr,IN=X1(xN),kN=Vu,LN=X1(kN),NN=wu,BN=Wc,Gd=Su;function X1(n){return n&&n.__esModule?n:{default:n}}var j1=Yc.parseDefaults={voidTags:Gd.voidTags,closingTags:Gd.closingTags,childlessTags:Gd.childlessTags,closingTagAncestorBreakers:Gd.closingTagAncestorBreakers,includePositions:!1};function RN(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j1,t=(0,IN.default)(n,e),i=(0,LN.default)(t,e);return(0,NN.format)(i,e)}function MN(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j1;return(0,BN.toHTML)(n,e)}const ON=["view","linked","string","none"],Q1=new Li("none",{tandem:rt.GENERAL_VIEW.createTandem("phetioElementSelectionProperty"),phetioValueType:gs,validValues:ON,phetioState:!1,phetioDocumentation:'Specifies how PhET-iO Elements are being selected. "view": the target view element, "linked": the corresponding linked element of the view element (if there is one), "string": select only string elements in the sim, "none": no active selection.'}),qN=["normal","italic","oblique"],FN=["normal","small-caps"],zN=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],HN=["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"];class Xs extends As{constructor(e){const t=St()({style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"10px",lineHeight:"normal",family:"sans-serif",phetioType:Xs.FontIO},e);super(t),this._style=t.style,this._variant=t.variant,this._weight=`${t.weight}`,this._stretch=t.stretch,this._size=Xs.castSize(t.size),this._lineHeight=t.lineHeight,this._family=t.family,this._font=this.computeShorthand()}getFont(){return this._font}get font(){return this.getFont()}getStyle(){return this._style}get style(){return this.getStyle()}getVariant(){return this._variant}get variant(){return this.getVariant()}getWeight(){return this._weight}get weight(){return this.getWeight()}getStretch(){return this._stretch}get stretch(){return this.getStretch()}getSize(){return this._size}get size(){return this.getSize()}getNumericSize(){const e=this._size.match(/^(\d+)px$/);if(e)return Number(e[1]);const t=this._size.match(/^(\d+)pt$/);if(t)return .75*Number(t[1]);const i=this._size.match(/^(\d+)em$/);return i?Number(i[1])/16:12}get numericSize(){return this.getNumericSize()}getLineHeight(){return this._lineHeight}get lineHeight(){return this.getLineHeight()}getFamily(){return this._family}get family(){return this.getFamily()}copy(e){return new Xs(Qi({style:this._style,variant:this._variant,weight:this._weight,stretch:this._stretch,size:this._size,lineHeight:this._lineHeight,family:this._family},e))}computeShorthand(){let e="";return this._style!=="normal"&&(e+=`${this._style} `),this._variant!=="normal"&&(e+=`${this._variant} `),this._weight!=="normal"&&(e+=`${this._weight} `),this._stretch!=="normal"&&(e+=`${this._stretch} `),e+=this._size,this._lineHeight!=="normal"&&(e+=`/${this._lineHeight}`),e+=` ${this._family}`,e}toCSS(){return this.getFont()}static castSize(e){return typeof e=="number"?`${e}px`:e}static isFontStyle(e){return qN.includes(e)}static isFontVariant(e){return FN.includes(e)}static isFontWeight(e){return zN.includes(e)}static isFontStretch(e){return HN.includes(e)}static fromCSS(e){const t={},i=he.filter(e.split(/[\x09\x0A\x0C\x0D\x20]/),s=>s.length>0);for(let s=0;s<i.length;s++){const r=i[s];if(r!=="normal")if(Xs.isFontStyle(r))t.style=r;else if(Xs.isFontVariant(r))t.variant=r;else if(Xs.isFontWeight(r))t.weight=r;else if(Xs.isFontStretch(r))t.stretch=r;else{const o=r.split(/\//);t.size=o[0],o[1]&&(t.lineHeight=o[1]),t.family=i.slice(s+1).join(" ");break}}return new Xs(t)}}Xs.DEFAULT=new Xs;Xs.FontIO=new pi("FontIO",{valueType:Xs,documentation:"Font handling for text drawing. Options:<ul><li><strong>style:</strong> normal      &mdash; normal | italic | oblique </li><li><strong>variant:</strong> normal    &mdash; normal | small-caps </li><li><strong>weight:</strong> normal     &mdash; normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 </li><li><strong>stretch:</strong> normal    &mdash; normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded </li><li><strong>size:</strong> 10px         &mdash; absolute-size | relative-size | length | percentage -- unitless number interpreted as px. absolute suffixes: cm, mm, in, pt, pc, px. relative suffixes: em, ex, ch, rem, vw, vh, vmin, vmax. </li><li><strong>lineHeight:</strong> normal &mdash; normal | number | length | percentage -- NOTE: Canvas spec forces line-height to normal </li><li><strong>family:</strong> sans-serif &mdash; comma-separated list of families, including generic families (serif, sans-serif, cursive, fantasy, monospace). ideally escape with double-quotes</li></ul>",toStateObject:n=>({style:n.getStyle(),variant:n.getVariant(),weight:n.getWeight(),stretch:n.getStretch(),size:n.getSize(),lineHeight:n.getLineHeight(),family:n.getFamily()}),fromStateObject(n){return new Xs(n)},stateSchema:{style:gs,variant:gs,weight:gs,stretch:gs,size:gs,lineHeight:gs,family:gs}});var up={},Z1={};(function(n){n.__esModule=!0,n.default=new Uint8Array([0,14,8,0,0,0,0,0,0,2,26,160,229,85,123,52,155,89,191,62,223,76,47,51,83,151,94,166,85,37,50,180,40,90,169,170,106,16,249,74,141,26,138,150,22,173,72,85,21,37,65,67,93,34,73,59,84,181,110,167,40,53,69,234,78,221,239,151,144,124,69,27,21,196,61,42,33,82,247,75,80,18,137,92,63,109,231,172,179,230,59,231,172,175,255,159,223,218,235,253,173,189,222,223,222,239,243,252,158,103,239,151,61,14,233,27,235,4,144,3,181,176,77,104,63,60,32,226,147,58,99,171,10,168,110,247,49,59,239,75,220,214,144,85,255,18,249,119,24,246,87,182,99,224,81,146,162,97,74,74,208,150,54,85,123,132,109,85,105,182,95,103,82,218,29,177,107,71,12,243,46,60,207,162,45,84,28,57,229,87,249,86,110,24,8,32,155,203,6,159,233,187,176,7,17,212,103,33,143,145,57,213,241,131,135,205,164,199,83,197,89,231,155,79,14,142,140,222,140,5,108,6,172,42,207,201,29,116,100,101,71,27,29,241,206,121,116,214,104,62,231,177,233,174,195,183,162,244,52,214,244,222,202,160,78,84,118,252,228,251,121,59,116,99,69,167,165,69,241,46,202,121,72,192,13,115,128,236,153,126,51,37,64,80,191,57,240,123,25,189,182,195,7,248,47,110,69,131,15,57,223,122,100,112,118,244,214,99,8,131,54,157,243,187,182,201,144,189,229,247,151,106,251,126,221,13,227,244,145,39,185,14,233,143,25,9,167,174,81,14,32,49,54,122,237,202,123,78,12,111,148,208,236,62,3,129,117,152,182,97,54,166,229,14,230,223,237,52,151,229,198,236,250,195,123,166,40,62,97,224,43,236,139,138,30,223,1,29,122,100,80,158,15,213,175,57,91,126,129,243,86,252,164,249,252,206,171,111,255,74,17,27,126,55,89,90,119,148,103,121,88,243,197,113,236,46,135,238,83,228,239,172,75,43,223,237,186,177,92,249,88,152,122,47,251,47,160,242,183,169,234,69,31,214,242,176,57,99,90,208,245,23,178,171,199,53,181,139,218,254,123,243,75,197,95,218,114,219,59,206,234,55,211,130,125,250,221,207,119,166,58,187,199,247,16,10,177,53,24,47,228,54,99,104,141,238,159,43,228,188,115,242,107,251,247,153,101,88,56,45,252,168,26,181,215,236,135,103,102,192,200,253,71,110,69,125,218,247,103,163,186,246,151,28,253,83,0,157,8,149,95,119,94,13,45,202,78,216,38,157,29,47,215,60,159,93,161,120,51,230,242,239,255,83,129,85,45,224,95,64,253,159,162,226,52,128,223,166,41,78,245,27,11,129,157,150,255,2,50,241,111,209,135,221,227,126,140,248,170,100,85,219,17,37,191,170,118,149,21,208,116,238,191,10,255,31,230,113,167,222,237,48,45,120,225,158,240,165,105,178,245,163,238,242,188,138,111,45,244,255,198,194,134,223,76,191,177,59,234,223,72,154,244,44,241,167,215,107,246,255,222,237,137,255,59,68,9,95,28,65,56,153,156,120,255,195,4,86,181,171,91,250,162,231,103,253,238,170,115,253,251,117,74,13,190,118,11,226,153,80,244,234,39,121,131,161,254,191,31,56,89,187,202,94,197,17,49,216,245,213,221,228,173,167,254,161,28,231,119,78,17,237,83,76,151,47,9,250,117,118,148,194,223,126,37,210,252,154,20,190,166,182,211,68,108,88,243,59,230,85,218,98,228,210,167,55,6,188,73,225,223,96,193,227,38,141,26,43,197,190,239,137,205,43,74,174,131,227,12,192,200,85,154,179,84,234,60,77,44,44,143,23,44,10,242,11,203,79,10,22,141,220,2,196,101,37,166,180,29,248,75,38,92,197,118,39,252,78,19,131,66,222,48,131,225,128,242,131,247,60,135,24,204,113,135,25,195,14,40,123,120,143,58,196,64,147,51,204,232,117,64,157,129,247,212,153,24,120,173,15,51,200,14,168,195,240,30,139,237,53,107,195,140,127,56,144,67,225,128,18,72,112,55,247,42,80,86,0,87,48,61,123,30,39,234,56,45,178,35,47,93,254,65,181,124,68,83,136,82,166,27,241,222,255,62,245,171,188,120,71,164,16,74,100,174,73,222,255,48,117,51,225,192,62,229,200,207,122,90,196,169,95,123,198,131,49,241,150,1,126,140,119,163,238,184,7,74,28,85,71,251,225,29,228,177,35,139,222,25,231,55,162,36,140,91,153,103,141,238,186,245,253,151,26,6,94,127,158,41,157,30,193,224,32,127,236,179,34,212,93,158,31,13,14,58,30,112,91,250,20,42,27,204,141,136,164,107,92,191,219,212,131,216,13,75,46,221,209,74,181,19,28,142,169,81,188,227,93,227,16,111,58,231,241,217,197,7,186,79,41,152,109,67,236,252,142,66,101,38,150,232,172,84,84,189,57,100,188,124,242,30,240,184,130,182,60,9,42,113,2,246,26,210,246,226,166,33,34,55,89,174,126,189,213,212,27,215,109,201,250,251,131,250,9,191,108,27,205,230,84,243,127,6,234,97,47,158,213,27,221,37,85,253,240,89,232,127,236,47,233,68,151,55,145,172,124,182,93,183,187,81,101,245,171,155,32,57,15,53,174,255,182,109,167,163,225,243,248,155,147,31,252,105,40,197,240,237,79,127,190,40,254,221,163,210,103,219,166,154,235,16,33,9,254,75,245,22,85,126,69,138,9,200,200,213,230,27,155,106,101,189,49,42,144,60,74,11,141,54,108,108,215,9,134,134,158,224,11,29,166,193,79,87,69,46,227,146,7,180,104,172,227,196,133,150,161,212,216,217,34,4,127,80,81,159,43,122,117,18,86,39,122,243,140,4,50,212,69,218,72,142,178,62,169,153,56,177,247,198,109,17,98,94,225,38,116,88,226,0,224,229,64,34,111,33,160,117,173,110,181,46,56,55,203,135,146,224,176,28,74,0,241,197,148,44,208,54,26,215,156,0,211,125,153,250,81,148,126,154,50,58,177,104,222,104,53,177,20,45,55,247,199,28,44,119,78,179,60,121,58,229,116,198,216,138,192,203,93,181,3,161,115,11,122,52,170,209,245,13,184,237,102,185,125,32,17,175,47,131,39,160,146,168,170,169,176,183,91,68,184,112,47,74,154,223,12,185,47,225,20,238,215,122,45,223,242,180,175,34,55,175,120,195,59,147,24,212,139,19,171,151,168,9,178,23,184,37,78,207,132,225,233,126,180,88,190,238,242,160,6,74,107,112,110,202,77,137,248,174,86,250,115,83,207,89,225,36,56,81,81,240,201,46,37,23,198,60,87,8,151,158,104,231,191,175,177,229,4,255,238,81,23,63,229,231,218,100,67,241,175,158,80,143,127,107,125,50,228,186,5,6,200,202,240,163,177,192,130,87,196,140,58,226,122,17,117,141,123,112,38,67,232,137,137,24,67,150,168,93,32,59,169,176,129,24,170,185,135,11,110,217,89,41,35,220,85,14,138,127,215,26,194,231,103,162,34,240,168,61,108,120,148,185,120,210,57,189,186,155,242,113,83,223,165,161,253,254,141,131,227,18,151,165,227,99,19,97,207,65,20,190,221,17,90,97,55,56,79,28,59,14,250,185,95,162,65,71,12,236,246,107,232,7,143,65,43,166,254,94,11,25,84,150,34,34,116,229,73,118,126,235,97,83,215,201,164,21,87,15,40,34,108,160,94,90,133,189,125,90,23,153,45,70,44,75,7,107,173,83,55,105,13,151,19,164,179,83,108,71,13,46,162,90,74,29,147,144,5,232,95,22,80,217,166,186,200,98,241,165,105,48,252,34,33,241,34,65,106,55,8,10,78,52,52,99,174,16,226,86,121,26,22,198,143,230,184,200,38,73,172,55,165,118,234,88,185,44,211,55,39,17,146,200,168,40,154,73,211,203,42,225,114,124,47,245,7,42,106,174,110,180,8,120,225,109,244,73,106,60,67,69,199,41,29,32,148,241,120,125,107,45,212,85,2,158,77,176,160,90,183,139,47,95,1,188,220,140,159,31,189,40,224,41,83,159,159,94,17,14,172,144,184,136,26,24,150,110,179,4,242,193,208,133,73,175,61,73,169,12,127,167,222,251,210,154,64,198,16,148,172,98,36,23,51,184,244,161,163,140,38,6,55,64,249,168,58,65,67,171,216,103,105,113,180,165,231,80,50,234,72,97,6,222,84,93,218,231,197,206,217,24,204,66,191,63,122,3,138,11,161,204,97,219,234,113,251,92,228,200,182,156,8,106,241,156,252,211,69,40,43,44,170,82,180,90,71,230,154,74,90,110,207,128,194,153,183,8,50,180,162,206,141,177,130,57,2,211,155,226,142,163,10,154,214,199,110,183,218,218,143,80,153,22,70,67,210,54,218,40,210,233,37,70,171,72,126,80,146,124,117,98,35,177,116,14,75,233,222,108,124,143,238,158,105,18,23,174,72,115,240,47,181,123,125,240,249,235,119,9,121,190,10,105,67,119,88,205,97,112,146,118,108,203,172,97,218,89,102,47,26,94,128,95,26,200,188,39,138,73,229,93,17,226,23,136,115,206,184,1,242,52,56,193,210,42,113,161,194,16,12,114,39,0,158,26,69,207,5,150,18,174,177,154,226,243,48,102,243,77,245,162,180,23,130,65,56,175,102,67,200,60,18,49,27,33,5,112,189,244,182,15,193,174,9,139,29,171,10,146,89,180,43,125,103,83,69,66,76,170,106,103,88,246,177,225,158,196,215,126,200,233,186,199,110,248,233,62,87,205,102,145,117,119,179,207,236,112,127,48,241,220,29,82,147,50,18,206,225,253,194,101,198,156,113,145,14,137,45,131,164,168,144,7,146,151,12,159,142,178,151,51,226,164,209,9,28,96,172,161,16,34,5,36,40,180,202,43,11,36,119,29,131,90,141,219,131,115,196,160,30,97,218,112,54,226,137,112,124,164,145,249,4,122,76,11,196,14,47,244,115,56,84,79,159,81,102,99,181,48,103,138,25,225,31,184,228,143,89,242,254,92,169,161,170,150,102,57,84,125,152,149,77,12,242,142,75,143,75,171,229,38,215,70,44,7,38,243,12,203,94,154,83,194,56,145,45,19,204,218,94,27,26,168,75,61,110,120,18,36,104,101,57,52,204,148,37,229,203,212,47,229,196,77,220,245,75,43,188,232,50,155,110,181,254,226,134,235,107,67,245,227,237,90,158,9,213,48,149,228,211,42,73,78,35,197,158,167,216,123,124,38,52,145,91,67,180,133,138,158,230,214,2,246,205,102,219,17,70,163,152,151,205,54,189,230,207,18,70,81,73,151,58,193,115,159,62,218,79,180,222,71,35,173,196,80,87,236,203,181,63,76,186,252,54,66,51,105,141,239,199,128,54,243,30,250,229,118,76,205,22,83,164,201,60,213,130,12,187,2,121,251,252,232,10,230,99,215,1,167,104,115,155,197,174,107,164,166,99,225,104,83,235,189,38,105,28,52,227,13,30,221,198,86,239,134,116,105,151,182,159,78,97,141,150,177,155,171,171,122,124,252,17,254,78,233,139,181,39,102,170,96,9,106,176,37,236,229,144,121,163,82,73,230,93,241,145,53,107,242,178,80,211,211,75,176,26,145,68,52,246,32,136,206,62,103,9,107,172,80,213,30,114,24,255,99,2,200,246,223,22,3,77,236,221,202,161,188,97,102,123,188,144,72,88,174,122,43,232,131,129,193,226,154,36,14,76,134,172,53,43,154,213,243,129,198,194,140,48,66,157,215,152,241,78,95,183,11,43,198,9,31,148,201,28,46,72,141,151,187,4,72,62,131,77,114,83,226,133,242,97,106,173,166,42,67,98,143,6,11,99,167,222,170,136,100,182,233,38,35,114,131,188,234,77,236,139,66,168,113,225,54,226,165,196,199,193,0,67,185,46,53,182,68,168,122,148,78,71,119,87,109,0,234,41,105,207,217,224,87,108,54,200,204,133,124,255,186,15,9,26,102,213,37,48,62,84,224,73,93,218,216,200,151,8,159,159,142,17,234,10,242,69,132,88,95,176,116,111,25,181,145,202,74,171,150,14,208,213,202,17,79,145,21,106,130,226,133,144,185,10,11,62,58,133,197,53,73,70,61,160,157,146,147,231,102,171,73,32,150,169,56,146,162,147,212,37,125,36,49,11,62,50,181,90,197,134,144,69,197,243,184,61,63,223,30,229,247,244,152,139,169,155,252,58,189,205,228,9,234,180,225,126,91,128,148,37,112,193,81,142,81,86,153,41,62,146,203,23,8,5,98,145,247,128,148,203,179,165,75,194,73,213,226,27,231,92,232,170,200,136,188,113,133,177,21,184,167,251,189,110,202,152,52,8,247,150,217,123,113,253,152,221,255,239,177,122,125,157,152,199,241,125,200,41,101,150,63,32,94,146,214,46,151,121,250,255,116,136,230,133,107,219,29,236,251,241,210,83,90,214,141,126,110,72,153,235,220,2,136,45,177,245,66,27,235,246,232,4,43,141,48,31,199,97,29,17,11,175,133,15,211,158,230,170,224,66,94,137,109,123,100,105,137,244,194,71,77,133,19,139,171,40,111,233,194,175,200,200,245,22,251,54,163,115,142,42,131,24,78,230,198,16,210,223,99,145,122,31,215,124,193,125,92,156,131,108,191,63,176,100,84,46,223,56,86,86,92,9,191,0,68,167,175,67,170,239,217,158,64,95,222,114,31,111,30,19,43,188,206,84,145,249,176,98,87,248,131,48,146,125,111,84,25,247,240,102,233,78,15,91,38,115,28,76,230,249,23,160,162,230,3,167,244,87,50,233,12,220,187,225,75,234,102,9,39,231,246,101,146,70,117,173,85,170,187,153,208,148,87,34,218,124,95,70,147,140,135,9,131,55,90,94,88,90,238,174,228,87,135,155,172,203,46,157,251,17,201,22,189,169,139,171,200,17,192,210,23,53,41,91,10,116,79,168,35,73,99,46,100,128,200,204,222,242,85,166,115,159,229,67,95,44,151,36,213,11,251,192,13,55,62,72,211,57,251,232,51,181,48,75,207,137,180,105,85,10,113,248,14,16,76,110,41,90,38,39,181,208,13,155,179,136,192,227,27,162,79,246,216,17,236,149,217,77,234,61,68,103,173,91,245,230,247,244,224,60,154,83,128,112,2,60,225,175,155,45,166,14,111,95,151,79,86,120,201,189,177,5,0,92,253,210,187,107,128,165,224,176,37,84,249,137,96,151,14,9,156,185,59,5,129,79,77,155,175,207,186,194,115,73,176,208,32,199,229,232,131,88,252,224,4,189,148,77,231,128,82,73,117,2,148,206,117,138,110,150,159,213,97,85,169,138,38,108,206,104,82,68,174,2,92,179,71,173,21,158,52,44,129,119,16,249,35,21,56,198,152,8,108,119,94,248,54,115,176,37,111,19,116,157,67,141,175,132,233,102,186,21,84,182,216,118,163,212,48,192,227,190,4,122,202,12,63,153,219,178,144,15,36,181,137,242,182,28,63,80,240,10,201,97,158,127,160,76,89,190,177,47,112,99,229,58,74,136,0,107,219,98,194,154,49,185,161,94,170,109,142,43,235,168,205,30,146,126,34,194,56,252,247,232,184,131,151,53,235,233,69,157,236,26,88,234,105,107,52,3,100,76,231,166,123,145,32,158,112,36,65,20,198,163,212,250,137,140,91,80,167,198,37,194,61,7,235,155,216,247,50,80,232,41,193,118,206,127,118,199,21,107,114,128,62,197,97,180,97,111,235,228,206,47,59,116,29,9,121,121,127,188,26,65,83,63,119,86,218,153,139,176,11,236,45,85,163,4,197,250,209,166,202,234,240,236,48,92,146,215,62,80,198,52,19,93,9,195,133,17,162,55,252,53,214,141,164,222,132,214,174,62,59,63,184,97,227,237,48,188,188,20,244,79])})(Z1);var J1={},$1={};(function(n){n.__esModule=!0;var e=0,t=-3,i=function(){function Ee(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}return Ee}();n.Tree=i;var s=function(){function Ee(Je,Ge){this.source=Je,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=Ge,this.destLen=0,this.ltree=new i,this.dtree=new i}return Ee}();n.Data=s;var r=new i,o=new i,d=new Uint8Array(30),g=new Uint16Array(30),y=new Uint8Array(30),S=new Uint16Array(30),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),L=new i,x=new Uint8Array(320);function A(Ee,Je,Ge,_t){var it,nt;for(it=0;it<Ge;++it)Ee[it]=0;for(it=0;it<30-Ge;++it)Ee[it+Ge]=it/Ge|0;for(nt=_t,it=0;it<30;++it)Je[it]=nt,nt+=1<<Ee[it]}function Q(Ee,Je){var Ge;for(Ge=0;Ge<7;++Ge)Ee.table[Ge]=0;for(Ee.table[7]=24,Ee.table[8]=152,Ee.table[9]=112,Ge=0;Ge<24;++Ge)Ee.trans[Ge]=256+Ge;for(Ge=0;Ge<144;++Ge)Ee.trans[24+Ge]=Ge;for(Ge=0;Ge<8;++Ge)Ee.trans[168+Ge]=280+Ge;for(Ge=0;Ge<112;++Ge)Ee.trans[176+Ge]=144+Ge;for(Ge=0;Ge<5;++Ge)Je.table[Ge]=0;for(Je.table[5]=32,Ge=0;Ge<32;++Ge)Je.trans[Ge]=Ge}var z=new Uint16Array(16);function G(Ee,Je,Ge,_t){var it,nt;for(it=0;it<16;++it)Ee.table[it]=0;for(it=0;it<_t;++it)Ee.table[Je[Ge+it]]++;for(Ee.table[0]=0,nt=0,it=0;it<16;++it)z[it]=nt,nt+=Ee.table[it];for(it=0;it<_t;++it)Je[Ge+it]&&(Ee.trans[z[Je[Ge+it]]++]=it)}function re(Ee){Ee.bitcount--||(Ee.tag=Ee.source[Ee.sourceIndex++],Ee.bitcount=7);var Je=Ee.tag&1;return Ee.tag>>>=1,Je}function ne(Ee,Je,Ge){if(!Je)return Ge;for(;Ee.bitcount<24;)Ee.tag|=Ee.source[Ee.sourceIndex++]<<Ee.bitcount,Ee.bitcount+=8;var _t=Ee.tag&65535>>>16-Je;return Ee.tag>>>=Je,Ee.bitcount-=Je,_t+Ge}function ae(Ee,Je){for(;Ee.bitcount<24;)Ee.tag|=Ee.source[Ee.sourceIndex++]<<Ee.bitcount,Ee.bitcount+=8;var Ge=0,_t=0,it=0,nt=Ee.tag;do _t=2*_t+(nt&1),nt>>>=1,++it,Ge+=Je.table[it],_t-=Je.table[it];while(_t>=0);return Ee.tag=nt,Ee.bitcount-=it,Je.trans[Ge+_t]}function pe(Ee,Je,Ge){var _t,it,nt,Ct,Qe,Zt;for(_t=ne(Ee,5,257),it=ne(Ee,5,1),nt=ne(Ee,4,4),Ct=0;Ct<19;++Ct)x[Ct]=0;for(Ct=0;Ct<nt;++Ct){var At=ne(Ee,3,0);x[T[Ct]]=At}for(G(L,x,0,19),Qe=0;Qe<_t+it;){var Re=ae(Ee,L);switch(Re){case 16:var at=x[Qe-1];for(Zt=ne(Ee,2,3);Zt;--Zt)x[Qe++]=at;break;case 17:for(Zt=ne(Ee,3,3);Zt;--Zt)x[Qe++]=0;break;case 18:for(Zt=ne(Ee,7,11);Zt;--Zt)x[Qe++]=0;break;default:x[Qe++]=Re;break}}G(Je,x,0,_t),G(Ge,x,_t,it)}function N(Ee,Je,Ge){for(;;){var _t=ae(Ee,Je);if(_t===256)return e;if(_t<256)Ee.dest[Ee.destLen++]=_t;else{var it=void 0,nt=void 0,Ct=void 0,Qe=void 0;for(_t-=257,it=ne(Ee,d[_t],g[_t]),nt=ae(Ee,Ge),Ct=Ee.destLen-ne(Ee,y[nt],S[nt]),Qe=Ct;Qe<Ct+it;++Qe)Ee.dest[Ee.destLen++]=Ee.dest[Qe]}}}function Ie(Ee){for(var Je,Ge,_t;Ee.bitcount>8;)Ee.sourceIndex--,Ee.bitcount-=8;if(Je=Ee.source[Ee.sourceIndex+1],Je=256*Je+Ee.source[Ee.sourceIndex],Ge=Ee.source[Ee.sourceIndex+3],Ge=256*Ge+Ee.source[Ee.sourceIndex+2],Je!==(~Ge&65535))return t;for(Ee.sourceIndex+=4,_t=Je;_t;--_t)Ee.dest[Ee.destLen++]=Ee.source[Ee.sourceIndex++];return Ee.bitcount=0,e}function $e(Ee,Je){var Ge=new s(Ee,Je),_t,it,nt;do{switch(_t=re(Ge),it=ne(Ge,2,0),it){case 0:nt=Ie(Ge);break;case 1:nt=N(Ge,r,o);break;case 2:pe(Ge,Ge.ltree,Ge.dtree),nt=N(Ge,Ge.ltree,Ge.dtree);break;default:nt=t}if(nt!==e)throw new Error("Data error")}while(!_t);return Ge.destLen<Ge.dest.length?typeof Ge.dest.slice=="function"?Ge.dest.slice(0,Ge.destLen):Ge.dest.subarray(0,Ge.destLen):Ge.dest}n.default=$e,Q(r,o),A(d,g,4,3),A(y,S,2,1),d[28]=0,g[28]=258})($1);(function(n){n.__esModule=!0;var e=$1,t=11,i=5,s=t-i,r=65536>>t,o=1<<s,d=o-1,g=2,y=1<<i,S=y-1,T=65536>>i,L=1024>>i,x=T+L,A=x,Q=32,z=A+Q,G=1<<g,re=function(){function ne(ae){var pe=new DataView(ae.buffer);this.highStart=pe.getUint32(0),this.errorValue=pe.getUint32(4);var N=pe.getUint32(8);ae=ae.subarray(12),ae=e.default(ae,new Uint8Array(N)),ae=e.default(ae,new Uint8Array(N)),this.data=new Uint32Array(ae.buffer)}return ne.prototype.get=function(ae){var pe;return ae<0||ae>1114111?this.errorValue:ae<55296||ae>56319&&ae<=65535?(pe=(this.data[ae>>i]<<g)+(ae&S),this.data[pe]):ae<=65535?(pe=(this.data[T+(ae-55296>>i)]<<g)+(ae&S),this.data[pe]):ae<this.highStart?(pe=this.data[z-r+(ae>>t)],pe=this.data[pe+(ae>>i&d)],pe=(pe<<g)+(ae&S),this.data[pe]):this.data[this.data.length-G]},ne}();n.default=re})(J1);var Mi={};Mi.__esModule=!0;Mi.OP=0;Mi.CL=1;Mi.CP=2;Mi.QU=3;Mi.GL=4;Mi.NS=5;Mi.EX=6;Mi.SY=7;Mi.IS=8;Mi.PR=9;Mi.PO=10;Mi.NU=11;Mi.AL=12;Mi.HL=13;Mi.ID=14;Mi.IN=15;Mi.HY=16;Mi.BA=17;Mi.BB=18;Mi.B2=19;Mi.ZW=20;Mi.CM=21;Mi.WJ=22;Mi.H2=23;Mi.H3=24;Mi.JL=25;Mi.JV=26;Mi.JT=27;Mi.RI=28;Mi.AI=29;Mi.BK=30;Mi.CB=31;Mi.CJ=32;Mi.CR=33;Mi.LF=34;Mi.NL=35;Mi.SA=36;Mi.SG=37;Mi.SP=38;Mi.XX=39;var eV={};(function(n){n.__esModule=!0,n.DI_BRK=0,n.IN_BRK=1,n.CI_BRK=2,n.CP_BRK=3,n.PR_BRK=4,n.pairTable=[[n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.CP_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.PR_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK]]})(eV);up.__esModule=!0;var KN=Z1,UN=J1,ds=Mi,Gu=eV,YN=new UN.default(KN.default);function Lb(n){switch(n){case ds.AI:return ds.AL;case ds.SA:case ds.SG:case ds.XX:return ds.AL;case ds.CJ:return ds.NS;default:return n}}function Nb(n){switch(n){case ds.LF:case ds.NL:return ds.BK;case ds.CB:return ds.BA;case ds.SP:return ds.WJ;default:return n}}var oc=function(){function n(e,t,i){i===void 0&&(i=!1),this.position=e,this.spacePos=t,this.required=i}return n}();up.Break=oc;var WN=function(){function n(e){this.node=e,this.pos=0,this.lastPos=0,this.curClass=null,this.nextClass=null}return n.prototype.nextCodePoint=function(){var e=this.node.charCodeAt(this.pos++),t=this.node.charCodeAt(this.pos);return 55296<=e&&e<=56319&&56320<=t&&t<=57343?(this.pos++,(e-55296)*1024+(t-56320)+65536):e},n.prototype.nextCharClass=function(e){return Lb(YN.get(this.nextCodePoint()))},n.prototype.nextBreak=function(){var e=null,t=null,i=!1;for(this.curClass===null&&(this.curClass=Nb(this.nextCharClass()));this.pos<this.node.length;){if(this.lastPos=this.pos,t=this.nextClass,this.nextClass=this.nextCharClass(),this.curClass===ds.BK||this.curClass===ds.CR&&this.nextClass!==ds.LF)return this.curClass=Nb(Lb(this.nextClass)),new oc(this.lastPos,this.lastPos,!0);var s=null;switch(this.nextClass){case ds.SP:s=this.curClass;break;case ds.BK:case ds.LF:case ds.NL:s=ds.BK;break;case ds.CR:s=ds.CR;break;case ds.CB:s=ds.BA;break;default:s=null;break}if(this.nextClass===ds.SP&&t!==ds.SP&&(e=this.lastPos),s!==null){if(this.curClass=s,this.nextClass===ds.CB)return new oc(this.lastPos,e!==null?e:this.lastPos);continue}switch(Gu.pairTable[this.curClass][this.nextClass]){case Gu.DI_BRK:i=!0;break;case Gu.IN_BRK:i=t===ds.SP;break;case Gu.CI_BRK:if(i=t===ds.SP,!i)continue;break;case Gu.CP_BRK:if(t!==ds.SP)continue;break}if(!i&&this.nextClass!==ds.SP&&(e=null),this.curClass=this.nextClass,i)return new oc(this.lastPos,e!==null?e:this.lastPos)}if(this.pos>=this.node.length)return this.lastPos<this.node.length?(this.lastPos=this.node.length,new oc(this.node.length,e!==null?e:this.node.length)):null},n}();up.LineBreaker=WN;var GN=up,XN=GN.LineBreaker;const Bb=(n,e)=>{const t=St()({requiredOnly:!1},e),i=[],s=new XN(n);s[Symbol.iterator]=()=>({next(){const o=s.nextBreak();return o!==null?{value:o,done:!1}:{done:!0}}});let r=0;for(const o of s){const d=o.position;t.requiredOnly&&!o.required||(r!==d&&i.push(new ss(r,d)),r=o.position)}return r<n.length&&i.push(new ss(r,n.length)),i},Rb="sceneryTextSizeContainer",Mb="sceneryTextSizeElement";let yo,Qa;const Ob={};let qb=!1;class Aa{static approximateSVGBounds(e,t){if(!yo.parentNode)if(document.body)document.body.appendChild(yo);else throw new Error("No document.body and trying to get approximate SVG bounds of a Text node");Aa.setSVGTextAttributes(Qa,e,t);const i=Qa.getBBox();return i.width===0&&i.height===0&&t.length>0?(qb||(qb=!0,console.log("WARNING: Guessing text bounds, is the simulation hidden? See https://github.com/phetsims/chipper/issues/768")),Aa.guessSVGBounds(e,t)):new ot(i.x,i.y,i.x+i.width,i.y+i.height)}static guessSVGBounds(e,t){const i=e.getNumericSize(),s=e.weight==="bold";return new ot(0,-.9*i,(s?.435:.4)*i*t.length,.22*i)}static accurateCanvasBounds(e){const t=Sc;t.font=e._font.toCSS(),t.direction="ltr";const i=t.measureText(e.renderedText);return new ot(-i.actualBoundingBoxLeft,-i.actualBoundingBoxAscent,i.actualBoundingBoxRight,i.actualBoundingBoxDescent)}static accurateCanvasBoundsFallback(e){const t=Aa.approximateSVGBounds(e._font,e.renderedText);if(!e.renderedText.length||t.width===0)return t;const i=Zi.canvasAccurateBounds(s=>{if(s.font=e._font.toCSS(),s.direction="ltr",s.fillText(e.renderedText,0,0),e.hasPaintableStroke()){const r=new Xh(null,s);e.beforeCanvasStroke(r),s.strokeText(e.renderedText,0,0),e.afterCanvasStroke(r)}},{precision:.5,resolution:128,initialScale:32/Math.max(Math.abs(t.minX),Math.abs(t.minY),Math.abs(t.maxX),Math.abs(t.maxY))});return i.isFinite()?i:t}static getVerticalBounds(e){const t=e.toCSS();let i=Ob[t];return i||(i=Ob[t]=Aa.approximateSVGBounds(e,"m")),i}static approximateCanvasWidth(e,t){const i=Sc;return i.font=e.toCSS(),i.direction="ltr",i.measureText(t).width}static approximateHybridBounds(e,t){const i=Aa.getVerticalBounds(e),s=Aa.approximateCanvasWidth(e,t);return new ot(0,i.minY,s,i.maxY)}static approximateDOMBounds(e,t){const s=document.createElement("div");jg(s).css({position:"absolute",left:0,top:0,padding:"0 !important",margin:"0 !important",display:"hidden"});const r=document.createElement("span");jg(r).css("font",e.toCSS()),r.appendChild(t),r.setAttribute("direction","ltr");const o=document.createElement("div");jg(o).css({"vertical-align":"baseline",display:"inline-block",width:0,height:"1024px",margin:"0 !important",padding:"0 !important"}),s.appendChild(r),s.appendChild(o),document.body.appendChild(s);const d=r.getBoundingClientRect(),g=s.getBoundingClientRect(),y=new ot(d.left,d.top-1024,d.right+1,d.bottom-1024).shiftedXY(-g.left,-g.top);return document.body.removeChild(s),y}static approximateImprovedDOMBounds(e,t){const i=document.createElement("div");i.style.display="inline-block",i.style.font=e.toCSS(),i.style.color="transparent",i.style.padding="0 !important",i.style.margin="0 !important",i.style.position="absolute",i.style.left="0",i.style.top="0",i.setAttribute("direction","ltr"),i.appendChild(t),document.body.appendChild(i);const s=new ot(i.offsetLeft,i.offsetTop,i.offsetLeft+i.offsetWidth+1,i.offsetTop+i.offsetHeight+1);document.body.removeChild(i);const r=Aa.getVerticalBounds(e);return s.shiftedY(r.minY)}static setSVGTextAttributes(e,t,i){e.setAttribute("direction","ltr"),e.setAttribute("font-family",t.getFamily()),e.setAttribute("font-size",t.getSize()),e.setAttribute("font-style",t.getStyle()),e.setAttribute("font-weight",t.getWeight()),e.setAttribute("font-stretch",t.getStretch()),e.lastChild.nodeValue=i}static initializeTextBounds(){yo=document.getElementById(Rb),yo||(yo=document.createElementNS(ws,"svg"),yo.setAttribute("width","2"),yo.setAttribute("height","2"),yo.setAttribute("id",Rb),yo.setAttribute("style","visibility: hidden; pointer-events: none; position: absolute; left: -65535px; right: -65535px;")),Qa=document.getElementById(Mb),Qa||(Qa=document.createElementNS(ws,"text"),Qa.appendChild(document.createTextNode("")),Qa.setAttribute("dominant-baseline","alphabetic"),Qa.setAttribute("text-rendering","geometricPrecision"),Qa.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Qa.setAttribute("id",Mb),yo.appendChild(Qa))}}class Xm extends zc(fh){paintCanvas(e,t,i){const s=e.context;(t.hasFill()||t.hasPaintableStroke())&&(e.setFont(t._font.getFont()),e.setDirection("ltr")),t.hasFill()&&(t.beforeCanvasFill(e),s.fillText(t.renderedText,0,0),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.strokeText(t.renderedText,0,0),t.afterCanvasStroke(e))}markDirtyText(){this.markPaintDirty()}markDirtyFont(){this.markPaintDirty()}markDirtyBounds(){this.markPaintDirty()}}Ts.mixInto(Xm);const tV=mr(n=>class extends Hc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyText=!0,this.dirtyFont=!0,this.dirtyBounds=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyText(){this.dirtyText=!0,this.markPaintDirty()}markDirtyFont(){this.dirtyFont=!0,this.markPaintDirty()}markDirtyBounds(){this.dirtyBounds=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyText=!1,this.dirtyFont=!1,this.dirtyBounds=!1}}),im=mt.pool.fetch();class iV extends tV(Uc){constructor(e,t){super(e,t),Zi.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement||(this.domElement=document.createElement("div"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0",this.domElement.setAttribute("dir","ltr"))}updateDOM(){const e=this.node,t=this.domElement;if(this.paintDirty&&(this.dirtyFont&&(t.style.font=e.getFont()),this.dirtyStroke&&(t.style.color=e.getCSSFill()),this.dirtyBounds&&(t.style.width=`${e.getSelfBounds().width}px`,t.style.height=`${e.getSelfBounds().height}px`),this.dirtyText&&(t.textContent=e.renderedText)),this.transformDirty||this.dirtyText||this.dirtyFont||this.dirtyBounds){const i=e.getSelfBounds().minY;im.set(this.getTransformMatrix());const s=mt.translation(0,i);im.multiplyMatrix(s),s.freeToPool(),Zi.applyPreparedTransform(im,t)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}Ts.mixInto(iV);const jN=!0,QN=!An.edge,Fb=An.safari;class sV extends tV(bu){initialize(e,t){if(super.initialize(e,t,!0,jN),this.hasLength=!1,!this.svgElement){const i=document.createElementNS(ws,"text");if(this.text=i,Fb){const s=document.createElementNS(ws,"g");s.appendChild(i),this.svgElement=s,this.workaroundRect=document.createElementNS(ws,"rect"),this.workaroundRect.setAttribute("fill","transparent"),s.appendChild(this.workaroundRect)}else this.svgElement=i;i.appendChild(document.createTextNode("")),i.setAttribute("dominant-baseline","alphabetic"),i.setAttribute("text-rendering","geometricPrecision"),i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("direction","ltr")}}updateSVGSelf(){const e=this.text;if(this.dirtyFont&&(e.setAttribute("font-family",this.node._font.getFamily()),e.setAttribute("font-size",this.node._font.getSize()),e.setAttribute("font-style",this.node._font.getStyle()),e.setAttribute("font-weight",this.node._font.getWeight()),e.setAttribute("font-stretch",this.node._font.getStretch())),this.dirtyText){let t=Zi.safariEmbeddingMarkWorkaround(this.node.renderedText);An.firefox&&(t="​"+t),e.lastChild.nodeValue=t}if(this.dirtyBounds&&QN&&(this.node._boundsMethod!=="accurate"&&isFinite(this.node.selfBounds.width)?(this.hasLength||(this.hasLength=!0,e.setAttribute("lengthAdjust","spacingAndGlyphs")),e.setAttribute("textLength",this.node.selfBounds.width)):this.hasLength&&(this.hasLength=!1,e.removeAttribute("lengthAdjust"),e.removeAttribute("textLength")),Fb)){const s=this.node.selfBounds.width*.2,r=this.node.selfBounds.height*.2;this.workaroundRect.setAttribute("x",this.node.selfBounds.minX-s),this.workaroundRect.setAttribute("y",this.node.selfBounds.minY-r),this.workaroundRect.setAttribute("width",this.node.selfBounds.width+2*s),this.workaroundRect.setAttribute("height",this.node.selfBounds.height+2*r)}this.updateFillStrokeStyle(e)}}Ts.mixInto(sV);const iy="stringProperty",ZN=["boundsMethod",iy,"string","font","fontWeight","fontFamily","fontStretch","fontStyle","fontSize"],JN=self.navigator.userAgent.includes("like Gecko) Version/5")&&self.navigator.userAgent.includes("Safari/");class yn extends W0(Rt){constructor(e,t){super(),this._stringProperty=new Po("",!0,this.onStringPropertyChange.bind(this)),this._font=Xs.DEFAULT,this._boundsMethod="hybrid",this._isHTML=!1,this._cachedRenderedText=null;const i=uc({fill:"#000000",tandemNameSuffix:"Text",phetioType:yn.TextIO,phetioVisiblePropertyInstrumented:!1},t);typeof e=="string"||typeof e=="number"?i.string=e:i.stringProperty=e,this.mutate(i),this.invalidateSupportedRenderers()}mutate(e){return super.mutate(e)}setString(e){return e=`${e}`,this._stringProperty.set(e),this}set string(e){this.setString(e)}get string(){return this.getString()}getString(){return this._stringProperty.value}getRenderedText(){return this._cachedRenderedText===null&&(this._cachedRenderedText=this.string.replace(" "," "),An.edge&&(this._cachedRenderedText=yn.simplifyEmbeddingMarks(this._cachedRenderedText))),this._cachedRenderedText}get renderedText(){return this.getRenderedText()}onStringPropertyChange(){this._cachedRenderedText=null;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyText();this.invalidateText()}setStringProperty(e){return this._stringProperty.setTargetProperty(e,this,yn.STRING_PROPERTY_TANDEM_NAME)}set stringProperty(e){this.setStringProperty(e)}get stringProperty(){return this.getStringProperty()}getStringProperty(){return this._stringProperty}initializePhetioObject(e,t){const i=this.isPhetioInstrumented();super.initializePhetioObject(e,t),rt.PHET_IO_ENABLED&&!i&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,yn.STRING_PROPERTY_TANDEM_NAME,()=>new Vv(this.string,Qi({phetioReadOnly:!0,tandem:this.tandem.createTandem(yn.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},t.stringPropertyOptions)))}getPhetioMouseHitTarget(e=!1){return Q1.value==="string"?this.getStringPropertyPhetioMouseHitTarget(e):super.getPhetioMouseHitTarget(e)}getStringPropertyPhetioMouseHitTarget(e=!1){const t=this._stringProperty.getTargetProperty();return t instanceof As?t.getPhetioMouseHitTarget(e):"phetioNotSelectable"}setBoundsMethod(e){if(e!==this._boundsMethod){this._boundsMethod=e,this.invalidateSupportedRenderers();const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyBounds();this.invalidateText(),this.rendererSummaryRefreshEmitter.emit()}return this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}getTextRendererBitmask(){let e=0;return this._boundsMethod!=="fast"&&!this._isHTML&&(e|=Le.bitmaskCanvas),this._isHTML||(e|=Le.bitmaskSVG),e|=Le.bitmaskDOM,e}invalidateSupportedRenderers(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getTextRendererBitmask())}invalidateText(){this.invalidateSelf();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyBounds();this.invalidateSupportedRenderers()}updateSelfBounds(){let e;this._isHTML||JN&&this._boundsMethod!=="accurate"?e=Aa.approximateDOMBounds(this._font,this.getDOMTextNode()):this._boundsMethod==="hybrid"?e=Aa.approximateHybridBounds(this._font,this.renderedText):this._boundsMethod==="accurate"?e=Aa.accurateCanvasBounds(this):e=Aa.approximateSVGBounds(this._font,this.renderedText),this.hasStroke()&&e.dilate(this.getLineWidth()/2);const t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}invalidateStroke(){this.invalidateText(),super.invalidateStroke()}invalidateFill(){this.invalidateText(),super.invalidateFill()}canvasPaintSelf(e,t){Xm.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return iV.createFromPool(e,t)}createSVGDrawable(e,t){return sV.createFromPool(e,t)}createCanvasDrawable(e,t){return Xm.createFromPool(e,t)}getDOMTextNode(){if(this._isHTML){const e=document.createElement("span");return e.innerHTML=this.string,e}else return document.createTextNode(this.renderedText)}getSafeSelfBounds(){const t=this.getSelfBounds();return t.dilatedXY(1*t.width,1*t.height)}setFont(e){if(e!==(typeof e=="string"?this._font.toCSS():this._font)){this._font=typeof e=="string"?Xs.fromCSS(e):e;const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyFont();this.invalidateText()}return this}set font(e){this.setFont(e)}get font(){return this.getFont()}getFont(){return this._font.getFont()}setFontWeight(e){return this.setFont(this._font.copy({weight:e}))}set fontWeight(e){this.setFontWeight(e)}get fontWeight(){return this.getFontWeight()}getFontWeight(){return this._font.getWeight()}setFontFamily(e){return this.setFont(this._font.copy({family:e}))}set fontFamily(e){this.setFontFamily(e)}get fontFamily(){return this.getFontFamily()}getFontFamily(){return this._font.getFamily()}setFontStretch(e){return this.setFont(this._font.copy({stretch:e}))}set fontStretch(e){this.setFontStretch(e)}get fontStretch(){return this.getFontStretch()}getFontStretch(){return this._font.getStretch()}setFontStyle(e){return this.setFont(this._font.copy({style:e}))}set fontStyle(e){this.setFontStyle(e)}get fontStyle(){return this.getFontStyle()}getFontStyle(){return this._font.getStyle()}setFontSize(e){return this.setFont(this._font.copy({size:e}))}set fontSize(e){this.setFontSize(e)}get fontSize(){return this.getFontSize()}getFontSize(){return this._font.getSize()}isPainted(){return!0}areSelfBoundsValid(){return this._boundsMethod==="accurate"}getDebugHTMLExtras(){return` "${Sm(this.renderedText)}"${this._isHTML?" (html)":""}`}dispose(){super.dispose(),this._stringProperty.dispose()}static embeddedDebugString(e){return e.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")}static simplifyEmbeddingMarks(e){const t={dir:null,children:[],parent:null};let i=t;for(let y=0;y<e.length;y++){const S=e.charAt(y);if(S===$N||S===eB){const T={dir:S,children:[],parent:i};i.children.push(T),i=T}else S===tB?i=i.parent:i.children.push(S)}function s(y){for(let S=y.children.length-1;S>=0;S--){const T=y.children[S];typeof T!="string"&&y.dir===T.dir&&y.children.splice(S,1,...T.children)}}function r(y){y.children.length===1&&typeof y.children[0]!="string"&&y.children[0].dir&&(y.dir=y.children[0].dir,y.children=y.children[0].children)}function o(y){for(let S=y.children.length-1;S>=1;S--){const T=y.children[S-1],L=y.children[S];typeof L!="string"&&typeof T!="string"&&L.dir&&T.dir===L.dir&&(T.children=T.children.concat(L.children),y.children.splice(S,1),o(T))}}function d(y){if(typeof y!="string"){for(let S=0;S<y.children.length;S++)d(y.children[S]);r(y),s(y),o(y)}return y}function g(y){if(typeof y=="string")return y;const S=y.children.map(g).join("");return y.dir?`${y.dir+S}‬`:S}return g(d(t))}}yn.STRING_PROPERTY_NAME=iy;yn.STRING_PROPERTY_TANDEM_NAME=iy;yn.prototype._mutatorKeys=[...b1,...ZN,...Rt.prototype._mutatorKeys];yn.prototype.drawableMarkFlags=[...Rt.prototype.drawableMarkFlags,...v1,"text","font","bounds"];const $N="‪",eB="‫",tB="‬";Aa.initializeTextBounds();yn.TextIO=new pi("TextIO",{valueType:yn,supertype:Rt.NodeIO,documentation:"Text that is displayed in the simulation. TextIO has a nested PropertyIO.&lt;String&gt; for the current string value."});const sm=n=>n.type.toLowerCase()==="element",nm=n=>n.type.toLowerCase()==="text",pa={scratchText:new yn(""),himalayaGetAttribute(n,e){if(!e)return null;const t=he.find(e.attributes,i=>i.key===n);return t&&t.value||null},himalayaStyleStringToMap(n){const e=n.split(";"),t={};return e.forEach(i=>{if(i.length>0){const s=i.split(":");t[s[0].trim()]=s[1].trim()}}),t}},iB=mr(n=>class extends zc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyLine(){this.markPaintDirty()}markDirtyP1(){this.markPaintDirty()}markDirtyP2(){this.markPaintDirty()}markDirtyX1(){this.markPaintDirty()}markDirtyY1(){this.markPaintDirty()}markDirtyX2(){this.markPaintDirty()}markDirtyY2(){this.markPaintDirty()}});class jm extends iB(fh){paintCanvas(e,t,i){const s=e.context;s.beginPath(),s.moveTo(t.x1,t.y1),s.lineTo(t.x2,t.y2),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e))}}Ts.mixInto(jm);const sB=mr(n=>class extends Hc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyLine(){this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}markDirtyP1(){this.dirtyX1=!0,this.dirtyY1=!0,this.markPaintDirty()}markDirtyP2(){this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}markDirtyX1(){this.dirtyX1=!0,this.markPaintDirty()}markDirtyY1(){this.dirtyY1=!0,this.markPaintDirty()}markDirtyX2(){this.dirtyX2=!0,this.markPaintDirty()}markDirtyY2(){this.dirtyY2=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyX1=!1,this.dirtyY1=!1,this.dirtyX2=!1,this.dirtyY2=!1}}),nB=!0;class nV extends sB(bu){initialize(e,t){super.initialize(e,t,!0,nB),this.svgElement=this.svgElement||document.createElementNS(ws,"line")}updateSVGSelf(){const e=this.svgElement;this.dirtyX1&&e.setAttribute("x1",this.node.x1),this.dirtyY1&&e.setAttribute("y1",this.node.y1),this.dirtyX2&&e.setAttribute("x2",this.node.x2),this.dirtyY2&&e.setAttribute("y2",this.node.y2),this.updateFillStrokeStyle(e)}}Ts.mixInto(nV);const rB=["p1","p2","x1","y1","x2","y2"];class yf extends Cn{constructor(e,t,i,s,r){super(null),this._x1=0,this._y1=0,this._x2=0,this._y2=0,typeof e=="object"?e instanceof Ne?r=uc({x1:e.x,y1:e.y,x2:t.x,y2:t.y,strokePickable:!0},i):r=uc({strokePickable:!0},e):r=uc({x1:e,y1:t,x2:i,y2:s,strokePickable:!0},r),this.mutate(r)}setLine(e,t,i,s){this._x1=e,this._y1=t,this._x2=i,this._y2=s;const r=this._drawables.length;for(let o=0;o<r;o++)this._drawables[o].markDirtyLine();return this.invalidateLine(),this}setPoint1(e,t){typeof e=="number"?(this._x1=e,this._y1=t):(this._x1=e.x,this._y1=e.y);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyP1();return this.invalidateLine(),this}set p1(e){this.setPoint1(e)}get p1(){return new Ne(this._x1,this._y1)}setPoint2(e,t){typeof e=="number"?(this._x2=e,this._y2=t):(this._x2=e.x,this._y2=e.y);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyP2();return this.invalidateLine(),this}set p2(e){this.setPoint2(e)}get p2(){return new Ne(this._x2,this._y2)}setX1(e){if(this._x1!==e){this._x1=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyX1();this.invalidateLine()}return this}set x1(e){this.setX1(e)}get x1(){return this.getX1()}getX1(){return this._x1}setY1(e){if(this._y1!==e){this._y1=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyY1();this.invalidateLine()}return this}set y1(e){this.setY1(e)}get y1(){return this.getY1()}getY1(){return this._y1}setX2(e){if(this._x2!==e){this._x2=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyX2();this.invalidateLine()}return this}set x2(e){this.setX2(e)}get x2(){return this.getX2()}getX2(){return this._x2}setY2(e){if(this._y2!==e){this._y2=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyY2();this.invalidateLine()}return this}set y2(e){this.setY2(e)}get y2(){return this.getY2()}getY2(){return this._y2}createLineShape(){return Wt.lineSegment(this._x1,this._y1,this._x2,this._y2).makeImmutable()}invalidateLine(){this._shape=null,this.invalidatePath()}containsPointSelf(e){return this._strokePickable?super.containsPointSelf(e):!1}canvasPaintSelf(e,t){jm.prototype.paintCanvas(e,this,t)}computeShapeBounds(){if(this._stroke){const e=this.getLineCap(),t=this.getLineWidth()/2;if(e==="round")return new ot(Math.min(this._x1,this._x2)-t,Math.min(this._y1,this._y2)-t,Math.max(this._x1,this._x2)+t,Math.max(this._y1,this._y2)+t);{const i=this._x2-this._x1,s=this._y2-this._y1,r=Math.sqrt(i*i+s*s);if(r===0)return new ot(this._x1-t,this._y1-t,this._x2+t,this._y2+t);const o=t*i/r,d=t*s/r,g=ot.NOTHING.copy();return e==="butt"?(g.addCoordinates(this._x1-d,this._y1+o),g.addCoordinates(this._x1+d,this._y1-o),g.addCoordinates(this._x2-d,this._y2+o),g.addCoordinates(this._x2+d,this._y2-o)):(g.addCoordinates(this._x1-o-d,this._y1-d+o),g.addCoordinates(this._x1-o+d,this._y1-d-o),g.addCoordinates(this._x2+o-d,this._y2+d+o),g.addCoordinates(this._x2+o+d,this._y2+d-o)),g}}else{const e=ot.NOTHING.copy();return e.addCoordinates(this._x1,this._y1),e.addCoordinates(this._x2,this._y2),e}}createSVGDrawable(e,t){return nV.createFromPool(e,t)}createCanvasDrawable(e,t){return jm.createFromPool(e,t)}setShape(e){if(e!==null)throw new Error("Cannot set the shape of a Line to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createLineShape()),this._shape}hasShape(){return!0}setShapeProperty(e){if(e!==null)throw new Error("Cannot set the shapeProperty of a Line to something non-null, it handles this itself");return this}mutate(e){return super.mutate(e)}getFillRendererBitmask(){return Le.bitmaskCanvas|Le.bitmaskSVG|Le.bitmaskDOM|Le.bitmaskWebGL}}yf.prototype._mutatorKeys=rB.concat(Cn.prototype._mutatorKeys);yf.prototype.drawableMarkFlags=Cn.prototype.drawableMarkFlags.concat(["line","p1","p2","x1","x2","y1","y2"]).filter(n=>n!=="shape");const Gc=mr(n=>class extends n{get isCleanable(){return!0}clean(){const t=this;for(let i=t._children.length-1;i>=0;i--){const s=t._children[i];t.removeChild(s),s.isCleanable&&s.clean()}t.matrix=mt.IDENTITY,t.freeToPool()}});class Ql extends Gc(Rt){constructor(e){super(),this.initialize(e)}initialize(e){return this.isLTR=e,this.leftSpacing=0,this.rightSpacing=0,this}addElement(e){const t=this.children.length>0,i=e.width>0,s=e.getScaleVector().x,r=e.leftSpacing*s,o=e.rightSpacing*s;if(!t&&!i)return!1;if(t)if(!i)this.isLTR?this.rightSpacing+=r+o:this.leftSpacing+=r+o;else return this.isLTR?(e.left=this.localRight+this.rightSpacing+r,this.rightSpacing=o):(e.right=this.localLeft-this.leftSpacing-o,this.leftSpacing=r),this.addChild(e),!0;else return this.isLTR?(e.left=0,this.leftSpacing=r,this.rightSpacing=o):(e.right=0,this.leftSpacing=r,this.rightSpacing=o),this.addChild(e),!0;return!1}addExtraBeforeSpacing(e){this.isLTR?this.leftSpacing+=e:this.rightSpacing+=e}freeToPool(){Ql.pool.freeToPool(this)}}Ql.pool=new Fs(Ql);var _f={exports:{}};/*! https://mths.be/he v1.1.1 by @mathias | MIT license */_f.exports;(function(n,e){(function(t){var i=e,s=n&&n.exports==i&&n,r=typeof pr=="object"&&pr;(r.global===r||r.window===r)&&(t=r);var o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[\x01-\x7F]/g,g=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,y=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,S={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","	":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon","ˆ":"circ","ˇ":"caron","°":"deg","©":"copy","®":"reg","℗":"copysr","℘":"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash","⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof","⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","𝒶":"ascr","𝕒":"aopf","𝔞":"afr","𝔸":"Aopf","𝔄":"Afr","𝒜":"Ascr",ª:"ordf",á:"aacute",Á:"Aacute",à:"agrave",À:"Agrave",ă:"abreve",Ă:"Abreve",â:"acirc",Â:"Acirc",å:"aring",Å:"angst",ä:"auml",Ä:"Auml",ã:"atilde",Ã:"Atilde",ą:"aogon",Ą:"Aogon",ā:"amacr",Ā:"Amacr",æ:"aelig",Æ:"AElig","𝒷":"bscr","𝕓":"bopf","𝔟":"bfr","𝔹":"Bopf",ℬ:"Bscr","𝔅":"Bfr","𝔠":"cfr","𝒸":"cscr","𝕔":"copf",ℭ:"Cfr","𝒞":"Cscr",ℂ:"Copf",ć:"cacute",Ć:"Cacute",ĉ:"ccirc",Ĉ:"Ccirc",č:"ccaron",Č:"Ccaron",ċ:"cdot",Ċ:"Cdot",ç:"ccedil",Ç:"Ccedil","℅":"incare","𝔡":"dfr","ⅆ":"dd","𝕕":"dopf","𝒹":"dscr","𝒟":"Dscr","𝔇":"Dfr","ⅅ":"DD","𝔻":"Dopf",ď:"dcaron",Ď:"Dcaron",đ:"dstrok",Đ:"Dstrok",ð:"eth",Ð:"ETH","ⅇ":"ee",ℯ:"escr","𝔢":"efr","𝕖":"eopf",ℰ:"Escr","𝔈":"Efr","𝔼":"Eopf",é:"eacute",É:"Eacute",è:"egrave",È:"Egrave",ê:"ecirc",Ê:"Ecirc",ě:"ecaron",Ě:"Ecaron",ë:"euml",Ë:"Euml",ė:"edot",Ė:"Edot",ę:"eogon",Ę:"Eogon",ē:"emacr",Ē:"Emacr","𝔣":"ffr","𝕗":"fopf","𝒻":"fscr","𝔉":"Ffr","𝔽":"Fopf",ℱ:"Fscr",ﬀ:"fflig",ﬃ:"ffilig",ﬄ:"ffllig",ﬁ:"filig",fj:"fjlig",ﬂ:"fllig",ƒ:"fnof",ℊ:"gscr","𝕘":"gopf","𝔤":"gfr","𝒢":"Gscr","𝔾":"Gopf","𝔊":"Gfr",ǵ:"gacute",ğ:"gbreve",Ğ:"Gbreve",ĝ:"gcirc",Ĝ:"Gcirc",ġ:"gdot",Ġ:"Gdot",Ģ:"Gcedil","𝔥":"hfr",ℎ:"planckh","𝒽":"hscr","𝕙":"hopf",ℋ:"Hscr",ℌ:"Hfr",ℍ:"Hopf",ĥ:"hcirc",Ĥ:"Hcirc",ℏ:"hbar",ħ:"hstrok",Ħ:"Hstrok","𝕚":"iopf","𝔦":"ifr","𝒾":"iscr","ⅈ":"ii","𝕀":"Iopf",ℐ:"Iscr",ℑ:"Im",í:"iacute",Í:"Iacute",ì:"igrave",Ì:"Igrave",î:"icirc",Î:"Icirc",ï:"iuml",Ï:"Iuml",ĩ:"itilde",Ĩ:"Itilde",İ:"Idot",į:"iogon",Į:"Iogon",ī:"imacr",Ī:"Imacr",ĳ:"ijlig",Ĳ:"IJlig",ı:"imath","𝒿":"jscr","𝕛":"jopf","𝔧":"jfr","𝒥":"Jscr","𝔍":"Jfr","𝕁":"Jopf",ĵ:"jcirc",Ĵ:"Jcirc","ȷ":"jmath","𝕜":"kopf","𝓀":"kscr","𝔨":"kfr","𝒦":"Kscr","𝕂":"Kopf","𝔎":"Kfr",ķ:"kcedil",Ķ:"Kcedil","𝔩":"lfr","𝓁":"lscr",ℓ:"ell","𝕝":"lopf",ℒ:"Lscr","𝔏":"Lfr","𝕃":"Lopf",ĺ:"lacute",Ĺ:"Lacute",ľ:"lcaron",Ľ:"Lcaron",ļ:"lcedil",Ļ:"Lcedil",ł:"lstrok",Ł:"Lstrok",ŀ:"lmidot",Ŀ:"Lmidot","𝔪":"mfr","𝕞":"mopf","𝓂":"mscr","𝔐":"Mfr","𝕄":"Mopf",ℳ:"Mscr","𝔫":"nfr","𝕟":"nopf","𝓃":"nscr",ℕ:"Nopf","𝒩":"Nscr","𝔑":"Nfr",ń:"nacute",Ń:"Nacute",ň:"ncaron",Ň:"Ncaron",ñ:"ntilde",Ñ:"Ntilde",ņ:"ncedil",Ņ:"Ncedil","№":"numero",ŋ:"eng",Ŋ:"ENG","𝕠":"oopf","𝔬":"ofr",ℴ:"oscr","𝒪":"Oscr","𝔒":"Ofr","𝕆":"Oopf",º:"ordm",ó:"oacute",Ó:"Oacute",ò:"ograve",Ò:"Ograve",ô:"ocirc",Ô:"Ocirc",ö:"ouml",Ö:"Ouml",ő:"odblac",Ő:"Odblac",õ:"otilde",Õ:"Otilde",ø:"oslash",Ø:"Oslash",ō:"omacr",Ō:"Omacr",œ:"oelig",Œ:"OElig","𝔭":"pfr","𝓅":"pscr","𝕡":"popf",ℙ:"Popf","𝔓":"Pfr","𝒫":"Pscr","𝕢":"qopf","𝔮":"qfr","𝓆":"qscr","𝒬":"Qscr","𝔔":"Qfr",ℚ:"Qopf",ĸ:"kgreen","𝔯":"rfr","𝕣":"ropf","𝓇":"rscr",ℛ:"Rscr",ℜ:"Re",ℝ:"Ropf",ŕ:"racute",Ŕ:"Racute",ř:"rcaron",Ř:"Rcaron",ŗ:"rcedil",Ŗ:"Rcedil","𝕤":"sopf","𝓈":"sscr","𝔰":"sfr","𝕊":"Sopf","𝔖":"Sfr","𝒮":"Sscr","Ⓢ":"oS",ś:"sacute",Ś:"Sacute",ŝ:"scirc",Ŝ:"Scirc",š:"scaron",Š:"Scaron",ş:"scedil",Ş:"Scedil",ß:"szlig","𝔱":"tfr","𝓉":"tscr","𝕥":"topf","𝒯":"Tscr","𝔗":"Tfr","𝕋":"Topf",ť:"tcaron",Ť:"Tcaron",ţ:"tcedil",Ţ:"Tcedil","™":"trade",ŧ:"tstrok",Ŧ:"Tstrok","𝓊":"uscr","𝕦":"uopf","𝔲":"ufr","𝕌":"Uopf","𝔘":"Ufr","𝒰":"Uscr",ú:"uacute",Ú:"Uacute",ù:"ugrave",Ù:"Ugrave",ŭ:"ubreve",Ŭ:"Ubreve",û:"ucirc",Û:"Ucirc",ů:"uring",Ů:"Uring",ü:"uuml",Ü:"Uuml",ű:"udblac",Ű:"Udblac",ũ:"utilde",Ũ:"Utilde",ų:"uogon",Ų:"Uogon",ū:"umacr",Ū:"Umacr","𝔳":"vfr","𝕧":"vopf","𝓋":"vscr","𝔙":"Vfr","𝕍":"Vopf","𝒱":"Vscr","𝕨":"wopf","𝓌":"wscr","𝔴":"wfr","𝒲":"Wscr","𝕎":"Wopf","𝔚":"Wfr",ŵ:"wcirc",Ŵ:"Wcirc","𝔵":"xfr","𝓍":"xscr","𝕩":"xopf","𝕏":"Xopf","𝔛":"Xfr","𝒳":"Xscr","𝔶":"yfr","𝓎":"yscr","𝕪":"yopf","𝒴":"Yscr","𝔜":"Yfr","𝕐":"Yopf",ý:"yacute",Ý:"Yacute",ŷ:"ycirc",Ŷ:"Ycirc",ÿ:"yuml",Ÿ:"Yuml","𝓏":"zscr","𝔷":"zfr","𝕫":"zopf",ℨ:"Zfr",ℤ:"Zopf","𝒵":"Zscr",ź:"zacute",Ź:"Zacute",ž:"zcaron",Ž:"Zcaron",ż:"zdot",Ż:"Zdot",Ƶ:"imped",þ:"thorn",Þ:"THORN",ŉ:"napos",α:"alpha",Α:"Alpha",β:"beta",Β:"Beta",γ:"gamma",Γ:"Gamma",δ:"delta",Δ:"Delta",ε:"epsi","ϵ":"epsiv",Ε:"Epsilon",ϝ:"gammad",Ϝ:"Gammad",ζ:"zeta",Ζ:"Zeta",η:"eta",Η:"Eta",θ:"theta",ϑ:"thetav",Θ:"Theta",ι:"iota",Ι:"Iota",κ:"kappa",ϰ:"kappav",Κ:"Kappa",λ:"lambda",Λ:"Lambda",μ:"mu",µ:"micro",Μ:"Mu",ν:"nu",Ν:"Nu",ξ:"xi",Ξ:"Xi",ο:"omicron",Ο:"Omicron",π:"pi",ϖ:"piv",Π:"Pi",ρ:"rho",ϱ:"rhov",Ρ:"Rho",σ:"sigma",Σ:"Sigma",ς:"sigmaf",τ:"tau",Τ:"Tau",υ:"upsi",Υ:"Upsilon",ϒ:"Upsi",φ:"phi",ϕ:"phiv",Φ:"Phi",χ:"chi",Χ:"Chi",ψ:"psi",Ψ:"Psi",ω:"omega",Ω:"ohm",а:"acy",А:"Acy",б:"bcy",Б:"Bcy",в:"vcy",В:"Vcy",г:"gcy",Г:"Gcy",ѓ:"gjcy",Ѓ:"GJcy",д:"dcy",Д:"Dcy",ђ:"djcy",Ђ:"DJcy",е:"iecy",Е:"IEcy",ё:"iocy",Ё:"IOcy",є:"jukcy",Є:"Jukcy",ж:"zhcy",Ж:"ZHcy",з:"zcy",З:"Zcy",ѕ:"dscy",Ѕ:"DScy",и:"icy",И:"Icy",і:"iukcy",І:"Iukcy",ї:"yicy",Ї:"YIcy",й:"jcy",Й:"Jcy",ј:"jsercy",Ј:"Jsercy",к:"kcy",К:"Kcy",ќ:"kjcy",Ќ:"KJcy",л:"lcy",Л:"Lcy",љ:"ljcy",Љ:"LJcy",м:"mcy",М:"Mcy",н:"ncy",Н:"Ncy",њ:"njcy",Њ:"NJcy",о:"ocy",О:"Ocy",п:"pcy",П:"Pcy",р:"rcy",Р:"Rcy",с:"scy",С:"Scy",т:"tcy",Т:"Tcy",ћ:"tshcy",Ћ:"TSHcy",у:"ucy",У:"Ucy",ў:"ubrcy",Ў:"Ubrcy",ф:"fcy",Ф:"Fcy",х:"khcy",Х:"KHcy",ц:"tscy",Ц:"TScy",ч:"chcy",Ч:"CHcy",џ:"dzcy",Џ:"DZcy",ш:"shcy",Ш:"SHcy",щ:"shchcy",Щ:"SHCHcy",ъ:"hardcy",Ъ:"HARDcy",ы:"ycy",Ы:"Ycy",ь:"softcy",Ь:"SOFTcy",э:"ecy",Э:"Ecy",ю:"yucy",Ю:"YUcy",я:"yacy",Я:"YAcy",ℵ:"aleph",ℶ:"beth",ℷ:"gimel",ℸ:"daleth"},T=/["&'<>`]/g,L={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},x=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,A=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Q=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)([=a-zA-Z0-9])?/g,z={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},G={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},re={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},ne=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],ae=String.fromCharCode,pe={},N=pe.hasOwnProperty,Ie=function(Re,at){return N.call(Re,at)},$e=function(Re,at){for(var Et=-1,Nt=Re.length;++Et<Nt;)if(Re[Et]==at)return!0;return!1},Ee=function(Re,at){if(!Re)return at;var Et={},Nt;for(Nt in at)Et[Nt]=Ie(Re,Nt)?Re[Nt]:at[Nt];return Et},Je=function(Re,at){var Et="";return Re>=55296&&Re<=57343||Re>1114111?(at&&it("character reference outside the permissible Unicode range"),"�"):Ie(re,Re)?(at&&it("disallowed character reference"),re[Re]):(at&&$e(ne,Re)&&it("disallowed character reference"),Re>65535&&(Re-=65536,Et+=ae(Re>>>10&1023|55296),Re=56320|Re&1023),Et+=ae(Re),Et)},Ge=function(Re){return"&#x"+Re.toString(16).toUpperCase()+";"},_t=function(Re){return"&#"+Re+";"},it=function(Re){throw Error("Parse error: "+Re)},nt=function(Re,at){at=Ee(at,nt.options);var Et=at.strict;Et&&A.test(Re)&&it("forbidden code point");var Nt=at.encodeEverything,Ht=at.useNamedReferences,cs=at.allowUnsafeSymbols,hi=at.decimal?_t:Ge,zs=function(Ji){return hi(Ji.charCodeAt(0))};return Nt?(Re=Re.replace(d,function(Ji){return Ht&&Ie(S,Ji)?"&"+S[Ji]+";":zs(Ji)}),Ht&&(Re=Re.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),Ht&&(Re=Re.replace(y,function(Ji){return"&"+S[Ji]+";"}))):Ht?(cs||(Re=Re.replace(T,function(Ji){return"&"+S[Ji]+";"})),Re=Re.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),Re=Re.replace(y,function(Ji){return"&"+S[Ji]+";"})):cs||(Re=Re.replace(T,zs)),Re.replace(o,function(Ji){var bs=Ji.charCodeAt(0),ai=Ji.charCodeAt(1),Ei=(bs-55296)*1024+ai-56320+65536;return hi(Ei)}).replace(g,zs)};nt.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var Ct=function(Re,at){at=Ee(at,Ct.options);var Et=at.strict;return Et&&x.test(Re)&&it("malformed character reference"),Re.replace(Q,function(Nt,Ht,cs,hi,zs,Ji,bs,ai){var Ei,Pt,Hn,Zs,ns,on;return Ht?(Hn=Ht,Pt=cs,Et&&!Pt&&it("character reference was not terminated by a semicolon"),Ei=parseInt(Hn,10),Je(Ei,Et)):hi?(Zs=hi,Pt=zs,Et&&!Pt&&it("character reference was not terminated by a semicolon"),Ei=parseInt(Zs,16),Je(Ei,Et)):Ji?(ns=Ji,Ie(z,ns)?z[ns]:(Et&&it("named character reference was not terminated by a semicolon"),Nt)):(ns=bs,on=ai,on&&at.isAttributeValue?(Et&&on=="="&&it("`&` did not start a character reference"),Nt):(Et&&it("named character reference was not terminated by a semicolon"),G[ns]+(on||"")))})};Ct.options={isAttributeValue:!1,strict:!1};var Qe=function(Re){return Re.replace(T,function(at){return L[at]})},Zt={version:"1.1.1",encode:nt,decode:Ct,escape:Qe,unescape:Ct};if(i&&!i.nodeType)if(s)s.exports=Zt;else for(var At in Zt)Ie(Zt,At)&&(i[At]=Zt[At]);else t.he=Zt})(pr)})(_f,_f.exports);var aB=_f.exports;const oB=Mc(aB),Qm=(n,e)=>{const t=oB.decode(n);return e===void 0?t:`${e?"‪":"‫"}${t}‬`};class yl extends Gc(yn){constructor(e,t,i,s,r,o,d){super(""),this.initialize(e,t,i,s,r,o,d)}initialize(e,t,i,s,r,o,d){let g="";for(;e.startsWith(" ");)g+=" ",e=e.slice(1);let y="";for(;e.endsWith(" ");)y=" ",e=e.slice(0,e.length-1);this.string=Qm(e,t),this.boundsMethod=s,this.font=i,this.fill=r,this.stroke=o,this.lineWidth=d;const S=g.length?pa.scratchText.setString(g).setFont(i).width:0,T=y.length?pa.scratchText.setString(y).setFont(i).width:0;return this.leftSpacing=t?S:T,this.rightSpacing=t?T:S,this}clean(){super.clean(),this.fill=null,this.stroke=null}fitsIn(e,t,i){return this.width+(t?i?this.leftSpacing:this.rightSpacing:0)<=e}freeToPool(){yl.pool.freeToPool(this)}}yl.pool=new Fs(yl);var Z2,J2,$2,ev,tv;const Zm=new Ri(!((J2=(Z2=self==null?void 0:self.phet)==null?void 0:Z2.chipper)!=null&&J2.queryParameters)||((tv=(ev=($2=self==null?void 0:self.phet)==null?void 0:$2.chipper)==null?void 0:ev.queryParameters)==null?void 0:tv.allowLinks),{tandem:rt.GENERAL_MODEL.createTandem("allowLinksProperty")});let lB=0;const hB=he.constant(!0),uB=n=>n.isPressed;class ih extends Jf{constructor(e){const t=St()({press:he.noop,release:he.noop,targetNode:null,drag:he.noop,attach:!0,mouseButton:0,pressCursor:"pointer",useInputListenerCursor:!1,canStartPress:hB,a11yLooksPressedInterval:100,collapseDragEvents:!1,phetioPressActionInstrumented:!0,phetioReleaseActionInstrumented:!0,phetioEnabledPropertyInstrumented:!1,tandem:rt.REQUIRED,phetioReadOnly:!0,phetioFeatured:As.DEFAULT_OPTIONS.phetioFeatured},e);super(t),this._isPressListener=!0,this._id=lB++,this._mouseButton=t.mouseButton,this._a11yLooksPressedInterval=t.a11yLooksPressedInterval,this._pressCursor=t.pressCursor,this._pressListener=t.press,this._releaseListener=t.release,this._dragListener=t.drag,this._canStartPress=t.canStartPress,this._targetNode=t.targetNode,this._attach=t.attach,this._collapseDragEvents=t.collapseDragEvents,this.overPointers=ep(),this.isPressedProperty=new Ri(!1,{reentrant:!0}),this.isOverProperty=new Ri(!1),this.looksOverProperty=new Ri(!1),this.isHoveringProperty=new Ri(!1),this.isHighlightedProperty=new Ri(!1),this.isFocusedProperty=new Ri(!1),this.cursorProperty=new ps([this.enabledProperty],i=>t.useInputListenerCursor&&i&&this._attach?this._pressCursor:null),this.pointer=null,this.pressedTrail=null,this.interrupted=!1,this._pendingCollapsedDragEvent=null,this._listeningToPointer=!1,this._isHoveringListener=this.invalidateHovering.bind(this),this._isHighlightedListener=this.invalidateHighlighted.bind(this),this.pdomClickingProperty=new Ri(!1),this.looksPressedProperty=ps.or([this.pdomClickingProperty,this.isPressedProperty]),this._pdomClickingTimeoutListener=null,this._pointerListener={up:this.pointerUp.bind(this),cancel:this.pointerCancel.bind(this),move:this.pointerMove.bind(this),interrupt:this.pointerInterrupt.bind(this),listener:this},this._pressAction=new ts(this.onPress.bind(this),{tandem:t.phetioPressActionInstrumented?t.tandem.createTandem("pressAction"):rt.OPT_OUT,phetioDocumentation:"Executes whenever a press occurs. The first argument when executing can be used to convey info about the SceneryEvent.",phetioReadOnly:t.phetioReadOnly,phetioFeatured:t.phetioFeatured,phetioEventType:Si.USER,parameters:[{name:"event",phetioType:il.SceneryEventIO},{phetioPrivate:!0,valueType:[Rt,null]},{phetioPrivate:!0,valueType:["function",null]}]}),this._releaseAction=new ts(this.onRelease.bind(this),{parameters:[{name:"event",phetioType:Ai(il.SceneryEventIO)},{phetioPrivate:!0,valueType:["function",null]}],tandem:t.phetioReleaseActionInstrumented?t.tandem.createTandem("releaseAction"):rt.OPT_OUT,phetioDocumentation:"Executes whenever a release occurs.",phetioReadOnly:t.phetioReadOnly,phetioFeatured:t.phetioFeatured,phetioEventType:Si.USER}),this.display=null,this.boundInvalidateOverListener=this.invalidateOver.bind(this),this.overPointers.lengthProperty.link(this.invalidateOver.bind(this)),this.isFocusedProperty.link(this.invalidateOver.bind(this)),this.overPointers.lengthProperty.link(this._isHoveringListener),this.isPressedProperty.link(this._isHoveringListener),this.overPointers.addItemAddedListener(i=>i.isDownProperty.link(this._isHoveringListener)),this.overPointers.addItemRemovedListener(i=>i.isDownProperty.unlink(this._isHoveringListener)),this.isHoveringProperty.link(this._isHighlightedListener),this.isPressedProperty.link(this._isHighlightedListener),this.enabledProperty.lazyLink(this.onEnabledPropertyChange.bind(this))}get isPressed(){return this.isPressedProperty.value}get cursor(){return this.cursorProperty.value}get attach(){return this._attach}get targetNode(){return this._targetNode}getCurrentTarget(){return this.pressedTrail.lastNode()}get currentTarget(){return this.getCurrentTarget()}canPress(e){return!!this.enabledProperty.value&&!this.isPressed&&this._canStartPress(e,this)&&(!(e.pointer instanceof vc)||e.domEvent.button===this._mouseButton)&&(!this._attach||!e.pointer.isAttached())}canClick(){return this.enabledProperty.value&&!this.isPressed&&this._canStartPress(null,this)}press(e,t,i){return this.canPress(e)?(this.flushCollapsedDrag(),this._pressAction.execute(e,t||null,i||null),!0):!1}release(e,t){this.flushCollapsedDrag(),this._releaseAction.execute(e||null,t||null)}drag(e){this.isPressed&&this._dragListener(e,this)}interrupt(){this.pdomClickingProperty.value?(this.interrupted=!0,this._listeningToPointer?this.release():(this.isPressedProperty.value=!1,this._releaseListener(null,this)),Qn.hasListener(this._pdomClickingTimeoutListener)&&(Qn.clearTimeout(this._pdomClickingTimeoutListener),this.pdomClickingProperty.isDisposed||(this.pdomClickingProperty.value=!1))):this.isPressed&&(this.interrupted=!0,this.release())}clearOverPointers(){this.overPointers.clear()}step(){this.flushCollapsedDrag()}setCreatePanTargetBounds(e){this._pointerListener.createPanTargetBounds=e}set createPanTargetBounds(e){this.setCreatePanTargetBounds(e)}setCreatePanTargetBoundsFromTrail(e){this.setCreatePanTargetBounds(()=>e.localToGlobalBounds(e.lastNode().localBounds))}set createPanTargetBoundsFromTrail(e){this.setCreatePanTargetBoundsFromTrail(e)}flushCollapsedDrag(){this._pendingCollapsedDragEvent&&this.drag(this._pendingCollapsedDragEvent),this._pendingCollapsedDragEvent=null}invalidateOver(){let e=!1;if(this._listeningToPointer)e=!1;else for(let t=0;t<this.overPointers.length;t++)if(this.overPointers.get(t).isAttached()){e=!0;break}this.isOverProperty.value=this.overPointers.length>0&&!e,this.looksOverProperty.value=this.isOverProperty.value||this.isFocusedProperty.value&&!!this.display&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.value}invalidateHovering(){for(let e=0;e<this.overPointers.length;e++){const t=this.overPointers[e];if(!t.isDown||t===this.pointer){this.isHoveringProperty.value=!0;return}}this.isHoveringProperty.value=!1}invalidateHighlighted(){this.isHighlightedProperty.value=this.isHoveringProperty.value||this.isPressedProperty.value}onEnabledPropertyChange(e){!e&&this.interrupt()}onPress(e,t,i){const s=t||this._targetNode;this.pointer=e.pointer,this.pressedTrail=s?s.getUniqueTrail():e.trail.subtrailTo(e.currentTarget,!1),this.interrupted=!1,this.pointer.addInputListener(this._pointerListener,this._attach),this._listeningToPointer=!0,this.pointer.cursor=this.pressedTrail.lastNode().getEffectiveCursor()||this._pressCursor,this.isPressedProperty.value=!0,this._pressListener(e,this),i&&i()}onRelease(e,t){const i=this;i.pointer.removeInputListener(this._pointerListener),this._listeningToPointer=!1,this.isPressedProperty.value=!1,this._releaseListener(e,this),t&&t(),i.pointer.cursor=null,this.pointer=null,this.pressedTrail=null}down(e){this.press(e)}up(e){this.invalidateOver(),this.invalidateHovering()}enter(e){this.overPointers.push(e.pointer)}move(e){this.invalidateOver()}exit(e){this.overPointers.includes(e.pointer)&&this.overPointers.remove(e.pointer)}pointerUp(e){this.isPressed&&this.release(e)}pointerCancel(e){this.isPressed&&this.interrupt()}pointerMove(e){this.isPressed&&(this._collapseDragEvents?this._pendingCollapsedDragEvent=e:this.drag(e))}pointerInterrupt(){this.interrupt()}click(e,t){return this.canClick()&&(this.interrupted=!1,this.pdomClickingProperty.value=!0,this.isFocusedProperty.value=!0,this.isPressedProperty.value=!0,this._pressListener(e,this),t&&t(),this.isPressedProperty.value=!1,this._releaseListener(e,this),Qn.clearTimeout(this._pdomClickingTimeoutListener),this._pdomClickingTimeoutListener=Qn.setTimeout(()=>{this.pdomClickingProperty.isDisposed||(this.pdomClickingProperty.value=!1)},this._a11yLooksPressedInterval)),!0}focus(e){const t=e.trail.rootNode().getRootedDisplays().filter(i=>i.isAccessible());this.display=t[0],this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)||this.display.focusManager.pdomFocusHighlightsVisibleProperty.link(this.boundInvalidateOverListener),this.isFocusedProperty.value=!0}blur(){this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),this.isFocusedProperty.value=!1}dispose(){this.overPointers.clear(),this._listeningToPointer&&uB(this)&&this.pointer.removeInputListener(this._pointerListener),this.isPressedProperty.isDisposed||(this.isPressedProperty.unlink(this._isHighlightedListener),this.isPressedProperty.unlink(this._isHoveringListener)),!this.isHoveringProperty.isDisposed&&this.isHoveringProperty.unlink(this._isHighlightedListener),this._pressAction.dispose(),this._releaseAction.dispose(),this.looksPressedProperty.dispose(),this.pdomClickingProperty.dispose(),this.cursorProperty.dispose(),this.isFocusedProperty.dispose(),this.isHighlightedProperty.dispose(),this.isHoveringProperty.dispose(),this.looksOverProperty.dispose(),this.isOverProperty.dispose(),this.isPressedProperty.dispose(),this.overPointers.dispose(),this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),super.dispose()}}ih.phetioAPI={pressAction:{phetioType:ts.PhetioActionIO([il.SceneryEventIO])},releaseAction:{phetioType:ts.PhetioActionIO([Ai(il.SceneryEventIO)])}};class Af extends ih{constructor(e){const t=St()({fire:he.noop,fireOnDown:!1,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:rt.REQUIRED,phetioPressActionInstrumented:!1,phetioReleaseActionInstrumented:!1,phetioReadOnly:!0},e);super(t),this._fireOnDown=t.fireOnDown,this.firedEmitter=new _n({tandem:t.tandem.createTandem("firedEmitter"),phetioEventType:Si.USER,phetioReadOnly:t.phetioReadOnly,phetioDocumentation:"Emits at the time that the listener fires",parameters:[{name:"event",phetioType:Ai(il.SceneryEventIO)}]}),this.firedEmitter.addListener(t.fire),t.fireOnHold&&(this._timer=new mv({callback:this.fire.bind(this,null),delay:t.fireOnHoldDelay,interval:t.fireOnHoldInterval}))}fire(e){this.firedEmitter.emit(e)}press(e,t,i){return super.press(e,t,()=>{this._fireOnDown&&this.fire(e),this._timer&&this._timer.start(),i&&i()})}release(e,t){super.release(e,()=>{const i=!this._fireOnDown&&this.isHoveringProperty.value&&!this.interrupted;this._timer?this._timer.stop(i):i&&this.fire(e||null),t&&t()})}click(e,t){return super.click(e,()=>{this.interrupted||this.fire(e),t&&t()})}interrupt(){super.interrupt(),this._timer&&this._timer.stop(!1)}dispose(){this.firedEmitter.dispose(),this._timer&&this._timer.dispose(),super.dispose()}}function cB(n,e=Zm.value){const t=phet&&phet.chipper&&phet.chipper.isFuzzEnabled();if(e&&!t){const i=self.open(n,"_blank");i&&i.focus()}}class Tc extends Hr(Gc(Rt)){constructor(e,t){super(),this.fireListener=null,this.accessibleInputListener=null,this.allowLinksListener=null,this.initialize(e,t,!1),this.mutate({cursor:"pointer",tagName:"a"})}initialize(e,t,i=!0){return i&&super.initialize(),this.innerContent=e,this.voicingNameResponse=e,typeof t=="function"?(this.fireListener=new Af({fire:t,tandem:rt.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href","#"),this.setPDOMAttribute("target","_self"),this.accessibleInputListener={click:s=>{s.domEvent&&s.domEvent.preventDefault(),t()}},this.addInputListener(this.accessibleInputListener)):(this.fireListener=new Af({fire:s=>{s!=null&&s.isFromPDOM()&&s.domEvent.preventDefault(),self._linkEventsHandled&&s.handle(),cB(t)},tandem:rt.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href",t),this.setPDOMAttribute("target","_blank"),this.allowLinksListener=s=>{this.visible=s},Zm.link(this.allowLinksListener)),this}clean(){super.clean(),this.fireListener&&(this.removeInputListener(this.fireListener),this.fireListener.dispose()),this.fireListener=null,this.accessibleInputListener&&(this.removeInputListener(this.accessibleInputListener),this.accessibleInputListener=null),this.allowLinksListener&&(Zm.unlink(this.allowLinksListener),this.allowLinksListener=null)}freeToPool(){Tc.pool.freeToPool(this)}}Tc.pool=new Fs(Tc);class $h extends Gc(Rt){constructor(e){super(),this.leftSpacing=0,this.rightSpacing=0,this.initialize(e)}initialize(e){return this.addChild(e),this}clean(){super.clean(),this.removeAllChildren()}fitsIn(e){return this.width<=e}freeToPool(){$h.pool.freeToPool(this)}}$h.pool=new Fs($h);class xc extends Gc(Rt){constructor(e){super(),this.initialize(e)}initialize(e){return this.localBounds=new ot(0,0,0,e),this}freeToPool(){xc.pool.freeToPool(this)}}xc.pool=new Fs(xc);const Xd=1e-9,Jm=["preferredWidth","minimumWidth","localPreferredWidth","localMinimumWidth","widthSizable"],cp=mr(n=>{const e=ph("WidthSizable",Jm,class extends n{constructor(...i){super(...i),this.preferredWidthProperty=new Ni(null),this.minimumWidthProperty=new Ni(null),this.localPreferredWidthProperty=new Ni(null),this.localMinimumWidthProperty=new Ni(null),this.isWidthResizableProperty=new Ni(!0),this._preferredSizeChanging=!1,this._minimumSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock=!1,this._minimumSizeChangeAttemptDuringLock=!1,this._updatePreferredWidthListener=this._updatePreferredWidth.bind(this),this._updateLocalPreferredWidthListener=this._updateLocalPreferredWidth.bind(this),this._updateMinimumWidthListener=this._updateMinimumWidth.bind(this),this._updateLocalMinimumWidthListener=this._updateLocalMinimumWidth.bind(this),this.preferredWidthProperty.lazyLink(this._updateLocalPreferredWidthListener),this.localPreferredWidthProperty.lazyLink(this._updatePreferredWidthListener),this.minimumWidthProperty.lazyLink(this._updateLocalMinimumWidthListener),this.localMinimumWidthProperty.lazyLink(this._updateMinimumWidthListener),this.transformEmitter.addListener(this._updateLocalPreferredWidthListener),this.transformEmitter.addListener(this._updateMinimumWidthListener)}get preferredWidth(){return this.preferredWidthProperty.value}set preferredWidth(i){this.preferredWidthProperty.value=i}get localPreferredWidth(){return this.localPreferredWidthProperty.value}set localPreferredWidth(i){this.localPreferredWidthProperty.value=i}get minimumWidth(){return this.minimumWidthProperty.value}set minimumWidth(i){this.minimumWidthProperty.value=i}get localMinimumWidth(){return this.localMinimumWidthProperty.value}set localMinimumWidth(i){this.localMinimumWidthProperty.value=i}get widthSizable(){return this.isWidthResizableProperty.value}set widthSizable(i){this.isWidthResizableProperty.value=i}get extendsWidthSizable(){return!0}validateLocalPreferredWidth(){}_calculateLocalPreferredWidth(){return this.matrix.isAligned()&&this.preferredWidth!==null?Math.abs(this.transform.inverseDeltaX(this.preferredWidth)):null}_onReentrantPreferredWidth(){this._updateLocalPreferredWidthListener()}_updateLocalPreferredWidth(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0;do{this._preferredSizeChangeAttemptDuringLock=!1;const i=this._calculateLocalPreferredWidth();(this.localPreferredWidthProperty.value===null||i===null||Math.abs(this.localPreferredWidthProperty.value-i)>Xd)&&(this.localPreferredWidthProperty.value=i)}while(this._preferredSizeChangeAttemptDuringLock);this._preferredSizeChanging=!1}}_calculatePreferredWidth(){return this.matrix.isAligned()&&this.localPreferredWidth!==null?Math.abs(this.transform.transformDeltaX(this.localPreferredWidth)):null}_updatePreferredWidth(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0,this._preferredSizeChangeAttemptDuringLock=!1;const i=this._calculatePreferredWidth();(this.preferredWidthProperty.value===null||i===null||Math.abs(this.preferredWidthProperty.value-i)>Xd)&&(this.preferredWidthProperty.value=i),this._preferredSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock&&this._onReentrantPreferredWidth()}}_calculateLocalMinimumWidth(){return this.matrix.isAligned()&&this.minimumWidth!==null?Math.abs(this.transform.inverseDeltaX(this.minimumWidth)):null}_onReentrantLocalMinimumWidth(){this._updateMinimumWidthListener()}_updateLocalMinimumWidth(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0;const i=this._calculateLocalMinimumWidth();this._minimumSizeChangeAttemptDuringLock=!1,(this.localMinimumWidthProperty.value===null||i===null||Math.abs(this.localMinimumWidthProperty.value-i)>Xd)&&(this.localMinimumWidthProperty.value=i),this._minimumSizeChanging=!1,this._minimumSizeChangeAttemptDuringLock&&this._onReentrantLocalMinimumWidth()}}_calculateMinimumWidth(){return this.matrix.isAligned()&&this.localMinimumWidth!==null?Math.abs(this.transform.transformDeltaX(this.localMinimumWidth)):null}_updateMinimumWidth(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0;do{this._minimumSizeChangeAttemptDuringLock=!1;const i=this._calculateMinimumWidth();(this.minimumWidthProperty.value===null||i===null||Math.abs(this.minimumWidthProperty.value-i)>Xd)&&(this.minimumWidthProperty.value=i)}while(this._minimumSizeChangeAttemptDuringLock);this._minimumSizeChanging=!1}}mutate(i){return super.mutate(i)}});if(e.prototype._mutatorKeys){const t=e.prototype._mutatorKeys,i=Jm,s=t.indexOf(th[0]);e.prototype._mutatorKeys=[...t.slice(0,s),...i,...t.slice(s)]}return e}),dB=["boundsMethod","font","fill","stroke","lineWidth","subScale","subXSpacing","subYOffset","supScale","supXSpacing","supYOffset","capHeightScale","underlineLineWidth","underlineHeightScale","strikethroughLineWidth","strikethroughHeightScale","linkFill","linkEventsHandled","links","nodes","tags","replaceNewlines","align","leading","lineWrap",yn.STRING_PROPERTY_NAME,"string"];self.QueryStringMachine&&QueryStringMachine.containsKey("stringTest");const fB=new Xs({size:20}),pB=["b","strong","i","em","sub","sup","u","s"],Za={COMPLETE:"COMPLETE",INCOMPLETE:"INCOMPLETE",NONE:"NONE"},rV={"font-family":"family","font-size":"size","font-stretch":"stretch","font-style":"style","font-variant":"variant","font-weight":"weight","line-height":"lineHeight"},zb=Object.keys(rV);class Or extends cp(Rt){constructor(e,t){const i=St()({fill:"#000000",tandemNameSuffix:"Text",phetioType:Or.RichTextIO,phetioVisiblePropertyInstrumented:!1},t);typeof e=="string"||typeof e=="number"?i.string=e:i.stringProperty=e,super(),this._font=fB,this._boundsMethod="hybrid",this._fill="#000000",this._stroke=null,this._lineWidth=1,this._subScale=.75,this._subXSpacing=0,this._subYOffset=0,this._supScale=.75,this._supXSpacing=0,this._supYOffset=0,this._capHeightScale=.75,this._underlineLineWidth=1,this._underlineHeightScale=.15,this._strikethroughLineWidth=1,this._strikethroughHeightScale=.3,this._linkFill="rgb(27,0,241)",this._linkEventsHandled=!1,this._links={},this._nodes={},this._tags={},this._replaceNewlines=!1,this._align="left",this._leading=0,this._lineWrap=null,this._linkItems=[],this._hasAddedLeafToLine=!1,this.needPendingMinimumWidth=!1,this.pendingMinimumWidth=0,this._stringProperty=new Po("",!0,this.onStringPropertyChange.bind(this)),this.lineContainer=new Rt({}),this.addChild(this.lineContainer),this.rebuildRichText(),this.localPreferredWidthProperty.lazyLink(()=>this.rebuildRichText()),this.mutate(i)}onStringPropertyChange(){this.rebuildRichText()}setStringProperty(e){return this._stringProperty.setTargetProperty(e,this,Or.STRING_PROPERTY_TANDEM_NAME)}set stringProperty(e){this.setStringProperty(e)}get stringProperty(){return this.getStringProperty()}getStringProperty(){return this._stringProperty}getPhetioMouseHitTarget(e=!1){return Q1.value==="string"?this.getStringPropertyPhetioMouseHitTarget(e):super.getPhetioMouseHitTarget(e)}getStringPropertyPhetioMouseHitTarget(e=!1){const t=this._stringProperty.getTargetProperty();return t instanceof As?t.getPhetioMouseHitTarget(e):"phetioNotSelectable"}initializePhetioObject(e,t){const i=St()({},t),s=this.isPhetioInstrumented();super.initializePhetioObject(e,i),rt.PHET_IO_ENABLED&&!s&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,Or.STRING_PROPERTY_TANDEM_NAME,()=>new Vv(this.string,Qi({phetioReadOnly:!0,tandem:this.tandem.createTandem(Or.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},i.stringPropertyOptions)))}rebuildRichText(){const e=this._lineWrap==="stretch";this.widthSizable=e,this.pendingMinimumWidth=0,this.needPendingMinimumWidth=e;const t=this._lineWrap==="stretch"?this.localPreferredWidth:this._lineWrap;if(this.freeChildrenToPool(),this.string===""){this.appendEmptyLeaf();return}let i=this.string.replace(/\u202a/g,'<span dir="ltr">').replace(/\u202b/g,'<span dir="rtl">').replace(/\u202c/g,"</span>");this._replaceNewlines&&(i=i.replace(/\n/g,"<br>"));let s;try{s=tm(i)}catch{s=tm("INVALID TRANSLATION")}this._linkItems.length=0;const r=t===null?Number.POSITIVE_INFINITY:t,o=!0;let d=Ql.pool.create(o);for(this._hasAddedLeafToLine=!1;s.length;){const g=s[0],y=d.bounds.isValid()?d.width:0,S=this.appendElement(d,g,this._font,this._fill,o,r-y,1);S!==Za.NONE&&(d.bounds.isValid()?this.appendLine(d):this.appendLine(xc.pool.create(pa.scratchText.setString("X").setFont(this._font).height)),d=Ql.pool.create(o),this._hasAddedLeafToLine=!1),S!==Za.INCOMPLETE&&s.splice(0,1)}for(d.bounds.isValid()&&this.appendLine(d),this.lineContainer.getChildrenCount()===0&&this.appendEmptyLeaf(),this.alignLines();this._linkItems.length;)(()=>{const g=this._linkItems[0].element,y=this._linkItems[0].href;let S;const T=[];for(S=this._linkItems.length-1;S>=0;S--){const x=this._linkItems[S];x.element===g&&(T.push(x.node),this._linkItems.splice(S,1))}const L=Tc.pool.create(g.innerContent,y);for(this.lineContainer.addChild(L),S=0;S<T.length;S++){const x=T[S],A=x.getUniqueTrailTo(this.lineContainer).getMatrix();x.detach(),x.matrix=A,L.addChild(x)}})();this._linkItems.length=0,this.localMinimumWidth=e?this.pendingMinimumWidth:this.localBounds.width}freeChildrenToPool(){for(;this.lineContainer._children.length;){const e=this.lineContainer._children[this.lineContainer._children.length-1];this.lineContainer.removeChild(e),e.clean()}}dispose(){this.freeChildrenToPool(),super.dispose(),this._stringProperty.dispose()}appendLine(e){this.lineContainer.bounds.isValid()&&(e.top=this.lineContainer.bottom+this._leading,e.left=0),this.lineContainer.addChild(e)}appendEmptyLeaf(){this.appendLine(yl.pool.create("",!0,this._font,this._boundsMethod,this._fill,this._stroke,this._lineWidth))}alignLines(){const e=this._align==="center"?"centerX":this._align,t=this.lineContainer[e];for(let i=0;i<this.lineContainer.getChildrenCount();i++)this.lineContainer.getChildAt(i)[e]=t}appendElement(e,t,i,s,r,o,d){let g=Za.NONE,y;const S=r?e.rightSpacing:e.leftSpacing,T=o-S;if(nm(t)){if(y=yl.pool.create(t.content,r,i,this._boundsMethod,s,this._stroke,this._lineWidth),this.needPendingMinimumWidth&&(this.pendingMinimumWidth=Math.max(this.pendingMinimumWidth,Math.max(...Bb(t.content).map(L=>{const x=t.content.slice(L.min,L.max),A=yl.pool.create(x,r,i,this._boundsMethod,s,this._stroke,this._lineWidth),Q=A.width*d;return A.dispose(),Q})))),!y.fitsIn(T,this._hasAddedLeafToLine,r)){const L=Bb(t.content),x=A=>A.length===0?"":t.content.slice(A[0].min,A[A.length-1].max);if(this._hasAddedLeafToLine||L.length>1){const A=[];let Q=!1;for(A.unshift(L.pop());L.length;)if(y.clean(),y=yl.pool.create(x(L),r,i,this._boundsMethod,s,this._stroke,this._lineWidth),!y.fitsIn(T,this._hasAddedLeafToLine,r)&&(this._hasAddedLeafToLine||L.length>1))A.unshift(L.pop());else{Q=!0;break}if(Q)g=Za.INCOMPLETE,t.content=x(A);else return y.clean(),Za.INCOMPLETE}}this._hasAddedLeafToLine=!0}else if(sm(t)){if(t.tagName==="br")return Za.COMPLETE;if(t.tagName==="span"){const A=pa.himalayaGetAttribute("dir",t);A&&(r=A==="ltr")}if(t.tagName==="node"){const A=pa.himalayaGetAttribute("id",t),Q=A&&this._nodes[A]||null;if(Q){if(y=$h.pool.create(Q),this._hasAddedLeafToLine&&!y.fitsIn(T))return y.clean(),Za.INCOMPLETE;const z=pa.himalayaGetAttribute("align",t);if(z==="center"||z==="top"||z==="bottom"){const G=pa.scratchText.setString("Test").setFont(i).bounds;z==="center"?y.centerY=G.centerY:z==="top"?y.top=G.top:z==="bottom"&&(y.bottom=G.bottom)}}else return g;this._hasAddedLeafToLine=!0}else y=Ql.pool.create(r);const L=pa.himalayaGetAttribute("style",t);if(L){const A=pa.himalayaStyleStringToMap(L);A.color&&(s=new ct(A.color));const Q={};for(let z=0;z<zb.length;z++){const G=zb[z];A[G]&&(Q[rV[G]]=A[G])}i=(typeof i=="string"?Xs.fromCSS(i):i).copy(Q)}if(t.tagName==="a"){let A=pa.himalayaGetAttribute("href",t);if(A!==null&&this._links!==!0)if(A.startsWith("{{")&&A.indexOf("}}")===A.length-2){const Q=A.slice(2,-2);A=this._links[Q]}else A=null;A&&(this._linkFill!==null&&(s=this._linkFill),t.innerContent||(t.innerContent=Or.himalayaElementToAccessibleString(t)),this._linkItems.push({element:t,node:y,href:A}))}else t.tagName==="b"||t.tagName==="strong"?i=(typeof i=="string"?Xs.fromCSS(i):i).copy({weight:"bold"}):t.tagName==="i"||t.tagName==="em"?i=(typeof i=="string"?Xs.fromCSS(i):i).copy({style:"italic"}):t.tagName==="sub"?(y.scale(this._subScale),y.addExtraBeforeSpacing(this._subXSpacing),y.y+=this._subYOffset):t.tagName==="sup"&&(y.scale(this._supScale),y.addExtraBeforeSpacing(this._supXSpacing),y.y+=this._supYOffset);const x=y.getScaleVector().x;if(t.tagName!=="node"){for(;g===Za.NONE&&t.children.length;){const A=y.bounds.isValid()?y.width:0,Q=t.children[0];g=this.appendElement(y,Q,i,s,r,o/x,d*x),g!==Za.INCOMPLETE&&t.children.splice(0,1);const z=y.bounds.isValid()?y.width:0;o+=A-z}g===Za.COMPLETE&&t.children.length&&(g=Za.INCOMPLETE)}if(t.tagName==="sub")isFinite(y.height)&&(y.centerY=0);else if(t.tagName==="sup")isFinite(y.height)&&(y.centerY=pa.scratchText.setString("X").setFont(i).top*this._capHeightScale);else if(t.tagName==="u"){const A=-y.top*this._underlineHeightScale;isFinite(y.top)&&y.addChild(new yf(y.localLeft,A,y.localRight,A,{stroke:s,lineWidth:this._underlineLineWidth}))}else if(t.tagName==="s"){const A=y.top*this._strikethroughHeightScale;isFinite(y.top)&&y.addChild(new yf(y.localLeft,A,y.localRight,A,{stroke:s,lineWidth:this._strikethroughLineWidth}))}if(this._tags&&this._tags[t.tagName]&&y.bounds.isValid()){const A=y,Q=y.bounds;y=$h.pool.create(this._tags[t.tagName](y)),A!==y&&(y.localBounds=Q)}}return y&&(e.addElement(y)||(this._linkItems=this._linkItems.filter(x=>x.node!==y),y.clean())),g}setString(e){return e=`${e}`,this._stringProperty.set(e),this}set string(e){this.setString(e)}get string(){return this.getString()}getString(){return this._stringProperty.value}setBoundsMethod(e){return e!==this._boundsMethod&&(this._boundsMethod=e,this.rebuildRichText()),this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}setFont(e){return this._font!==e&&(this._font=e,this.rebuildRichText()),this}set font(e){this.setFont(e)}get font(){return this.getFont()}getFont(){return this._font}setFill(e){return this._fill!==e&&(this._fill=e,this.rebuildRichText()),this}set fill(e){this.setFill(e)}get fill(){return this.getFill()}getFill(){return this._fill}setStroke(e){return this._stroke!==e&&(this._stroke=e,this.rebuildRichText()),this}set stroke(e){this.setStroke(e)}get stroke(){return this.getStroke()}getStroke(){return this._stroke}setLineWidth(e){return this._lineWidth!==e&&(this._lineWidth=e,this.rebuildRichText()),this}set lineWidth(e){this.setLineWidth(e)}get lineWidth(){return this.getLineWidth()}getLineWidth(){return this._lineWidth}setSubScale(e){return this._subScale!==e&&(this._subScale=e,this.rebuildRichText()),this}set subScale(e){this.setSubScale(e)}get subScale(){return this.getSubScale()}getSubScale(){return this._subScale}setSubXSpacing(e){return this._subXSpacing!==e&&(this._subXSpacing=e,this.rebuildRichText()),this}set subXSpacing(e){this.setSubXSpacing(e)}get subXSpacing(){return this.getSubXSpacing()}getSubXSpacing(){return this._subXSpacing}setSubYOffset(e){return this._subYOffset!==e&&(this._subYOffset=e,this.rebuildRichText()),this}set subYOffset(e){this.setSubYOffset(e)}get subYOffset(){return this.getSubYOffset()}getSubYOffset(){return this._subYOffset}setSupScale(e){return this._supScale!==e&&(this._supScale=e,this.rebuildRichText()),this}set supScale(e){this.setSupScale(e)}get supScale(){return this.getSupScale()}getSupScale(){return this._supScale}setSupXSpacing(e){return this._supXSpacing!==e&&(this._supXSpacing=e,this.rebuildRichText()),this}set supXSpacing(e){this.setSupXSpacing(e)}get supXSpacing(){return this.getSupXSpacing()}getSupXSpacing(){return this._supXSpacing}setSupYOffset(e){return this._supYOffset!==e&&(this._supYOffset=e,this.rebuildRichText()),this}set supYOffset(e){this.setSupYOffset(e)}get supYOffset(){return this.getSupYOffset()}getSupYOffset(){return this._supYOffset}setCapHeightScale(e){return this._capHeightScale!==e&&(this._capHeightScale=e,this.rebuildRichText()),this}set capHeightScale(e){this.setCapHeightScale(e)}get capHeightScale(){return this.getCapHeightScale()}getCapHeightScale(){return this._capHeightScale}setUnderlineLineWidth(e){return this._underlineLineWidth!==e&&(this._underlineLineWidth=e,this.rebuildRichText()),this}set underlineLineWidth(e){this.setUnderlineLineWidth(e)}get underlineLineWidth(){return this.getUnderlineLineWidth()}getUnderlineLineWidth(){return this._underlineLineWidth}setUnderlineHeightScale(e){return this._underlineHeightScale!==e&&(this._underlineHeightScale=e,this.rebuildRichText()),this}set underlineHeightScale(e){this.setUnderlineHeightScale(e)}get underlineHeightScale(){return this.getUnderlineHeightScale()}getUnderlineHeightScale(){return this._underlineHeightScale}setStrikethroughLineWidth(e){return this._strikethroughLineWidth!==e&&(this._strikethroughLineWidth=e,this.rebuildRichText()),this}set strikethroughLineWidth(e){this.setStrikethroughLineWidth(e)}get strikethroughLineWidth(){return this.getStrikethroughLineWidth()}getStrikethroughLineWidth(){return this._strikethroughLineWidth}setStrikethroughHeightScale(e){return this._strikethroughHeightScale!==e&&(this._strikethroughHeightScale=e,this.rebuildRichText()),this}set strikethroughHeightScale(e){this.setStrikethroughHeightScale(e)}get strikethroughHeightScale(){return this.getStrikethroughHeightScale()}getStrikethroughHeightScale(){return this._strikethroughHeightScale}setLinkFill(e){return this._linkFill!==e&&(this._linkFill=e,this.rebuildRichText()),this}set linkFill(e){this.setLinkFill(e)}get linkFill(){return this.getLinkFill()}getLinkFill(){return this._linkFill}setLinkEventsHandled(e){return this._linkEventsHandled!==e&&(this._linkEventsHandled=e,this.rebuildRichText()),this}set linkEventsHandled(e){this.setLinkEventsHandled(e)}get linkEventsHandled(){return this.getLinkEventsHandled()}getLinkEventsHandled(){return this._linkEventsHandled}setLinks(e){return this._links!==e&&(this._links=e,this.rebuildRichText()),this}getLinks(){return this._links}set links(e){this.setLinks(e)}get links(){return this.getLinks()}setNodes(e){return this._nodes!==e&&(this._nodes=e,this.rebuildRichText()),this}getNodes(){return this._nodes}set nodes(e){this.setNodes(e)}get nodes(){return this.getNodes()}setTags(e){return this._tags!==e&&(this._tags=e,this.rebuildRichText()),this}getTags(){return this._tags}set tags(e){this.setTags(e)}get tags(){return this.getTags()}setReplaceNewlines(e){return this._replaceNewlines!==e&&(this._replaceNewlines=e,this.rebuildRichText()),this}set replaceNewlines(e){this.setReplaceNewlines(e)}get replaceNewlines(){return this.getReplaceNewlines()}getReplaceNewlines(){return this._replaceNewlines}setAlign(e){return this._align!==e&&(this._align=e,this.rebuildRichText()),this}set align(e){this.setAlign(e)}get align(){return this.getAlign()}getAlign(){return this._align}setLeading(e){return this._leading!==e&&(this._leading=e,this.rebuildRichText()),this}set leading(e){this.setLeading(e)}get leading(){return this.getLeading()}getLeading(){return this._leading}setLineWrap(e){return this._lineWrap!==e&&(this._lineWrap=e,this.rebuildRichText()),this}set lineWrap(e){this.setLineWrap(e)}get lineWrap(){return this.getLineWrap()}getLineWrap(){return this._lineWrap}mutate(e){return super.mutate(e)}static stringWithFont(e,t){return`<span style='font-style: ${t.style};font-variant: ${t.variant};font-weight: ${t.weight};font-stretch: ${t.stretch};font-size: ${t.size};font-family: ${t.family};line-height: ${t.lineHeight};'>${e}</span>`}static himalayaElementToString(e){if(nm(e))return Qm(e.content);if(sm(e)){const t=e.children.map(s=>Or.himalayaElementToString(s)).join(""),i=pa.himalayaGetAttribute("dir",e);return i==="ltr"||i==="rtl"?bo.wrapDirection(t,i):t}else return""}static himalayaElementToAccessibleString(e){if(nm(e))return Qm(e.content);if(sm(e)){let t=e.children.map(s=>Or.himalayaElementToAccessibleString(s)).join("");const i=pa.himalayaGetAttribute("dir",e);return(i==="ltr"||i==="rtl")&&(t=bo.wrapDirection(t,i)),he.includes(pB,e.tagName)?`<${e.tagName}>${t}</${e.tagName}>`:t}else return""}static getAccessibleStringProperty(e){return new vx([e],t=>{const i=tm(t);let s="";return i.forEach(r=>{s+=Or.himalayaElementToAccessibleString(r)}),s})}}Or.STRING_PROPERTY_TANDEM_NAME=yn.STRING_PROPERTY_TANDEM_NAME;Or.prototype._mutatorKeys=dB.concat(Rt.prototype._mutatorKeys);Or.RichTextIO=new pi("RichTextIO",{valueType:Or,supertype:Rt.NodeIO,documentation:"The PhET-iO Type for the scenery RichText node"});const aV=n=>{if(n instanceof yn||n instanceof Or)return n.stringProperty;if(n.children)for(const e of n.children){const t=aV(e);if(t)return t}return null};class $m extends zc(fh){paintCanvas(e,t,i){const s=e.context;s.beginPath(),s.arc(0,0,t._radius,0,Math.PI*2,!1),s.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e))}markDirtyRadius(){this.markPaintDirty()}dispose(){super.dispose()}}Ts.mixInto($m);const oV=mr(n=>class extends Hc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyRadius=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyRadius(){this.dirtyRadius=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyRadius=!1}});class lV extends oV(Uc){constructor(e,t){super(e,t),Zi.prepareForTransform(this.domElement)}initialize(e,t){if(super.initialize(e,t),this.matrix=this.matrix||mt.pool.fetch(),!this.fillElement||!this.strokeElement){const i=document.createElement("div");this.fillElement=i;const s=document.createElement("div");this.strokeElement=s,i.style.display="block",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.pointerEvents="none",s.style.display="block",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.pointerEvents="none",i.appendChild(s)}this.domElement=this.fillElement}updateDOM(){const e=this.node,t=this.fillElement,i=this.strokeElement;if(this.paintDirty&&(this.dirtyRadius&&(t.style.width=`${2*e._radius}px`,t.style.height=`${2*e._radius}px`,t.style[Xt.borderRadius]=`${e._radius}px`),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?i.style.borderStyle="solid":i.style.borderStyle="none"),e.hasStroke())){const s=!this.hadStroke;(s||this.dirtyLineWidth||this.dirtyRadius)&&(i.style.width=`${2*e._radius-e.getLineWidth()}px`,i.style.height=`${2*e._radius-e.getLineWidth()}px`,i.style[Xt.borderRadius]=`${e._radius+e.getLineWidth()/2}px`),(s||this.dirtyLineWidth)&&(i.style.left=`${-e.getLineWidth()/2}px`,i.style.top=`${-e.getLineWidth()/2}px`,i.style.borderWidth=`${e.getLineWidth()}px`),(s||this.dirtyStroke)&&(i.style.borderColor=e.getSimpleCSSStroke())}if(this.transformDirty||this.dirtyRadius){this.matrix.set(this.getTransformMatrix());const s=mt.translation(-e._radius,-e._radius);this.matrix.multiplyMatrix(s),s.freeToPool(),Zi.applyPreparedTransform(this.matrix,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}Ts.mixInto(lV);const gB=!0;class hV extends oV(bu){initialize(e,t){super.initialize(e,t,!0,gB),this.svgElement=this.svgElement||document.createElementNS(ws,"circle")}updateSVGSelf(){const e=this.svgElement;this.dirtyRadius&&e.setAttribute("r",this.node._radius),this.updateFillStrokeStyle(e)}}Ts.mixInto(hV);const mB=["radius"];class fc extends Cn{constructor(e,t){super(null),this._radius=0,typeof e=="object"?t=e:t=uc({radius:e},t),this.mutate(t)}getStrokeRendererBitmask(){let e=super.getStrokeRendererBitmask();return this.hasStroke()&&!this.getStroke().isGradient&&!this.getStroke().isPattern&&this.getLineWidth()<=this.getRadius()&&(e|=Le.bitmaskDOM),e}getPathRendererBitmask(){return Le.bitmaskCanvas|Le.bitmaskSVG|(Xt.borderRadius?Le.bitmaskDOM:0)}invalidateCircle(){this._shape=null,this.invalidatePath()}createCircleShape(){return Wt.circle(0,0,this._radius).makeImmutable()}intersectsBoundsSelf(e){let t=Math.abs(e.centerX),i=Math.abs(e.centerY);const s=e.maxX-t,r=e.maxY-i;return t>s+this._radius||i>r+this._radius?!1:t<=s||i<=r?!0:(t-=s,i-=r,t*t+i*i<=this._radius*this._radius)}canvasPaintSelf(e,t){$m.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return lV.createFromPool(e,t)}createSVGDrawable(e,t){return hV.createFromPool(e,t)}createCanvasDrawable(e,t){return $m.createFromPool(e,t)}setRadius(e){if(this._radius!==e){this._radius=e,this.invalidateCircle();const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyRadius()}return this}set radius(e){this.setRadius(e)}get radius(){return this.getRadius()}getRadius(){return this._radius}computeShapeBounds(){let e=new ot(-this._radius,-this._radius,this._radius,this._radius);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}containsPointSelf(e){const t=e.x*e.x+e.y*e.y;let i=!0,s;if(this._strokePickable){s=this.getLineWidth()/2;const r=this._radius+s;i=i&&t<=r*r}if(this._fillPickable)return this._strokePickable?i:t<=this._radius*this._radius;if(this._strokePickable){const r=this._radius-s;return i&&t>=r*r}else return!1}setShape(e){if(e!==null)throw new Error("Cannot set the shape of a Circle to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createCircleShape()),this._shape}hasShape(){return!0}setShapeProperty(e){if(e!==null)throw new Error("Cannot set the shapeProperty of a Circle to something non-null, it handles this itself");return this}mutate(e){return super.mutate(e)}}fc.prototype._mutatorKeys=mB.concat(Cn.prototype._mutatorKeys);fc.prototype.drawableMarkFlags=Cn.prototype.drawableMarkFlags.concat(["radius"]).filter(n=>n!=="shape");const Xu=new ct("transparent");class Ic{constructor(e,t,i){this.lastColor=null,this.initialize(e,t,i)}isActiveSVGGradientStop(){return!!this.svgGradient}initialize(e,t,i){return this.svgGradient=e,this.color=i,this.ratio=t,this.svgElement=this.svgElement||document.createElementNS(ws,"stop"),this.svgElement.setAttribute("offset",""+t),this.dirty=!0,this.update(),this.propertyListener=this.propertyListener||this.onPropertyChange.bind(this),this.colorListener=this.colorListener||this.markDirty.bind(this),ii(i)?(i.lazyLink(this.propertyListener),i.value instanceof ct&&(i.value.changeEmitter.addListener(this.colorListener),this.lastColor=i.value)):i instanceof ct&&i.changeEmitter.addListener(this.colorListener),this}onPropertyChange(e,t){this.lastColor!==null&&(this.lastColor.changeEmitter.removeListener(this.colorListener),this.lastColor=null),e instanceof ct&&(e.changeEmitter.addListener(this.colorListener),this.lastColor=e),this.markDirty()}markDirty(){this.dirty=!0,this.svgGradient.markDirty()}update(){if(!this.dirty)return;this.dirty=!1;let e=this.color;ii(e)&&(e=e.value),e===null&&(e="transparent"),typeof e=="string"?Xu.setCSS(e):Xu.set(e);const t=`stop-opacity: ${Xu.a.toFixed(20)};`;Xu.alpha=1;const i=`stop-color: ${Xu.toCSS()};`;this.svgElement.setAttribute("style",`${i} ${t}`)}dispose(){const e=this.color;this.lastColor&&(this.lastColor.changeEmitter.removeListener(this.colorListener),this.lastColor=null),ii(e)?e.hasListener(this.propertyListener)&&e.unlink(this.propertyListener):e instanceof ct&&e.changeEmitter.removeListener(this.colorListener),this.color=null,this.svgGradient=null,this.freeToPool()}freeToPool(){Ic.pool.freeToPool(this)}}Ic.pool=new Fs(Ic);class yB{constructor(e,t){this.initialize(e,t)}isActiveSVGGradient(){return!!this.svgBlock}initialize(e,t){this.svgBlock=e,this.gradient=t;const i=this.definition!==void 0;this.definition=this.definition||this.createDefinition(),i||this.definition.setAttribute("gradientUnits","userSpaceOnUse"),t.transformMatrix?this.definition.setAttribute("gradientTransform",t.transformMatrix.getSVGTransform()):this.definition.removeAttribute("gradientTransform");const s=t.getSVGStops();this.stops=bi(this.stops);for(let r=0;r<s.length;r++){const o=new Ic(this,s[r].ratio,s[r].color);this.stops.push(o),this.definition.appendChild(o.svgElement)}this.dirty=!1}markDirty(){if(!this.dirty){const e=this;this.dirty=!0,e.svgBlock.markDirtyGradient(this)}}update(){if(this.dirty){this.dirty=!1;for(let e=0;e<this.stops.length;e++)this.stops[e].update()}}dispose(){for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this.definition.removeChild(t.svgElement),t.dispose()}bi(this.stops),this.svgBlock=null,this.gradient=null,this.freeToPool()}}class kc extends yB{constructor(e,t){super(e,t)}initialize(e,t){super.initialize(e,t);const i=t;return this.definition.setAttribute("x1",""+i.start.x),this.definition.setAttribute("y1",""+i.start.y),this.definition.setAttribute("x2",""+i.end.x),this.definition.setAttribute("y2",""+i.end.y),this}createDefinition(){return document.createElementNS(ws,"linearGradient")}freeToPool(){kc.pool.freeToPool(this)}}kc.pool=new Fs(kc);const pc="http://www.w3.org/1999/xlink";class Lc{constructor(e){this.initialize(e)}initialize(e){const t=this.definition!==void 0;return this.definition=this.definition||document.createElementNS(ws,"pattern"),t||(this.definition.setAttribute("patternUnits","userSpaceOnUse"),this.definition.setAttribute("patternContentUnits","userSpaceOnUse")),e.transformMatrix?this.definition.setAttribute("patternTransform",e.transformMatrix.getSVGTransform()):this.definition.removeAttribute("patternTransform"),this.definition.setAttribute("x","0"),this.definition.setAttribute("y","0"),this.definition.setAttribute("width",""+e.image.width),this.definition.setAttribute("height",""+e.image.height),this.imageElement=this.imageElement||document.createElementNS(ws,"image"),this.imageElement.setAttribute("x","0"),this.imageElement.setAttribute("y","0"),this.imageElement.setAttribute("width",`${e.image.width}px`),this.imageElement.setAttribute("height",`${e.image.height}px`),this.imageElement.setAttributeNS(pc,"xlink:href",e.image.src),t||this.definition.appendChild(this.imageElement),this}update(){}dispose(){this.freeToPool()}freeToPool(){Lc.pool.freeToPool(this)}}Lc.pool=new Fs(Lc);class uV extends sp{initialize(e,t){return super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}markTransformDirty(){this.markDirty()}updateSelfVisibility(){super.updateSelfVisibility(),this.markDirty()}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}const _B=Math.log2||function(n){return Math.log(n)/Math.LN2},Jo={imageOpacity:1,initialWidth:0,initialHeight:0,mipmap:!1,mipmapBias:0,mipmapInitialLevel:4,mipmapMaxLevel:5,hitTestPixels:!1};let rm=null,am=null;const cV=()=>(rm||(rm=document.createElement("canvas")),rm),AB=()=>(am||(am=cV().getContext("2d",{willReadFrequently:!0})),am),Fr=n=>class extends n{constructor(...t){super(...t),this._imageProperty=new Po(null,!1,this.onImagePropertyChange.bind(this)),this._image=null,this._initialWidth=Jo.initialWidth,this._initialHeight=Jo.initialHeight,this._imageOpacity=Jo.imageOpacity,this._mipmap=Jo.mipmap,this._mipmapBias=Jo.mipmapBias,this._mipmapInitialLevel=Jo.mipmapInitialLevel,this._mipmapMaxLevel=Jo.mipmapMaxLevel,this._hitTestPixels=Jo.hitTestPixels,this._mipmapCanvases=[],this._mipmapURLs=[],this._mipmapData=null,this._imageLoadListener=this._onImageLoad.bind(this),this._imageLoadListenerAttached=!1,this._hitTestImageData=null,this.mipmapEmitter=new Hi}setImage(t){return this._imageProperty.value=t,this}set image(t){this.setImage(t)}get image(){return this.getImage()}getImage(){return this._image}onImagePropertyChange(t){let i=this._image!==t;if(i&&typeof t=="string"&&this._image&&this._image instanceof HTMLImageElement&&t===this._image.src&&(i=!1),i&&t===this._mipmapData&&(i=!1),i){if(this._initialWidth=0,this._initialHeight=0,this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),this._mipmapData=null,typeof t=="string"){const s=t;t=document.createElement("img"),t.src=s}else Array.isArray(t)&&(this._mipmapData=t,t=t[0].img,this._mipmapInitialLevel=this._mipmapMaxLevel=this._mipmapData.length,this._mipmap=!0);this._image=t,this._image instanceof HTMLImageElement&&(!this._image.width||!this._image.height)&&this._attachImageLoadListener(),this.invalidateImage()}}setImageProperty(t){return this._imageProperty.setTargetProperty(t)}set imageProperty(t){this.setImageProperty(t)}get imageProperty(){return this.getImageProperty()}getImageProperty(){return this._imageProperty}invalidateImage(){this.invalidateMipmaps(),this._invalidateHitTestData()}setImageWithSize(t,i,s){return this.setImage(t),this.setInitialWidth(i),this.setInitialHeight(s),this}setImageOpacity(t){this._imageOpacity!==t&&(this._imageOpacity=t)}set imageOpacity(t){this.setImageOpacity(t)}get imageOpacity(){return this.getImageOpacity()}getImageOpacity(){return this._imageOpacity}setInitialWidth(t){return t!==this._initialWidth&&(this._initialWidth=t,this.invalidateImage()),this}set initialWidth(t){this.setInitialWidth(t)}get initialWidth(){return this.getInitialWidth()}getInitialWidth(){return this._initialWidth}setInitialHeight(t){return t!==this._initialHeight&&(this._initialHeight=t,this.invalidateImage()),this}set initialHeight(t){this.setInitialHeight(t)}get initialHeight(){return this.getInitialHeight()}getInitialHeight(){return this._initialHeight}setMipmap(t){return this._mipmap!==t&&(this._mipmap=t,this.invalidateMipmaps()),this}set mipmap(t){this.setMipmap(t)}get mipmap(){return this.isMipmap()}isMipmap(){return this._mipmap}setMipmapBias(t){return this._mipmapBias!==t&&(this._mipmapBias=t,this.invalidateMipmaps()),this}set mipmapBias(t){this.setMipmapBias(t)}get mipmapBias(){return this.getMipmapBias()}getMipmapBias(){return this._mipmapBias}setMipmapInitialLevel(t){return this._mipmapInitialLevel!==t&&(this._mipmapInitialLevel=t,this.invalidateMipmaps()),this}set mipmapInitialLevel(t){this.setMipmapInitialLevel(t)}get mipmapInitialLevel(){return this.getMipmapInitialLevel()}getMipmapInitialLevel(){return this._mipmapInitialLevel}setMipmapMaxLevel(t){return this._mipmapMaxLevel!==t&&(this._mipmapMaxLevel=t,this.invalidateMipmaps()),this}set mipmapMaxLevel(t){this.setMipmapMaxLevel(t)}get mipmapMaxLevel(){return this.getMipmapMaxLevel()}getMipmapMaxLevel(){return this._mipmapMaxLevel}setHitTestPixels(t){return this._hitTestPixels!==t&&(this._hitTestPixels=t,this._invalidateHitTestData()),this}set hitTestPixels(t){this.setHitTestPixels(t)}get hitTestPixels(){return this.getHitTestPixels()}getHitTestPixels(){return this._hitTestPixels}_constructNextMipmap(){const t=this._mipmapCanvases.length,i=this._mipmapCanvases[t-1];if(i.width*i.height>2){const s=document.createElement("canvas");if(s.width=Math.ceil(i.width/2),s.height=Math.ceil(i.height/2),s.width>0&&s.height>0){const r=s.getContext("2d");r.scale(.5,.5),r.drawImage(i,0,0),this._mipmapCanvases.push(s),this._mipmapURLs.push(s.toDataURL())}}}invalidateMipmaps(){if(bi(this._mipmapCanvases),bi(this._mipmapURLs),this._image&&this._mipmap)if(this._mipmapData)for(let t=0;t<this._mipmapData.length;t++){const i=this._mipmapData[t].url;this._mipmapURLs.push(i);const s=this._mipmapData[t].updateCanvas;s&&s(),this._mipmapCanvases.push(this._mipmapData[t].canvas)}else{const t=document.createElement("canvas");if(t.width=this.getImageWidth(),t.height=this.getImageHeight(),t.width&&t.height){t.getContext("2d").drawImage(this._image,0,0),this._mipmapCanvases.push(t),this._mipmapURLs.push(t.toDataURL());let s=0;for(;++s<this._mipmapInitialLevel;)this._constructNextMipmap()}}this.mipmapEmitter.emit()}getMipmapLevel(t,i=0){const s=Fr.getApproximateMatrixScale(t)*(self.devicePixelRatio||1);return this.getMipmapLevelFromScale(s,i)}getMipmapLevelFromScale(t,i=0){if(t>=1)return 0;let s=_B(1/t);if(s=Xn(s+this._mipmapBias+i-.7),s<0&&(s=0),s>this._mipmapMaxLevel&&(s=this._mipmapMaxLevel),this.mipmap&&!this._mipmapCanvases[s]){let r=this._mipmapCanvases.length-1;for(;++r<=s;)this._constructNextMipmap();return Math.min(s,this._mipmapCanvases.length-1)}else return s}getMipmapCanvas(t){if(this._mipmapData){const i=this._mipmapData[t]&&this._mipmapData[t].updateCanvas;i&&i()}return this._mipmapCanvases[t]}getMipmapURL(t){return this._mipmapURLs[t]}hasMipmaps(){return this._mipmapCanvases.length>0}_invalidateHitTestData(){this._hitTestPixels&&this._image!==null&&(this._hitTestImageData=Fr.getHitTestData(this._image,this.imageWidth,this.imageHeight))}getImageWidth(){if(this._image===null)return 0;const t=this._mipmapData?this._mipmapData[0].width:("naturalWidth"in this._image?this._image.naturalWidth:0)||this._image.width;return t===0?this._initialWidth:t}get imageWidth(){return this.getImageWidth()}getImageHeight(){if(this._image===null)return 0;const t=this._mipmapData?this._mipmapData[0].height:("naturalHeight"in this._image?this._image.naturalHeight:0)||this._image.height;return t===0?this._initialHeight:t}get imageHeight(){return this.getImageHeight()}getImageURL(){return this._image.src}_attachImageLoadListener(){this.isDisposed||(this._image.addEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!0)}_detachImageLoadListener(){this._image.removeEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!1}_onImageLoad(){this.invalidateImage(),this._detachImageLoadListener()}dispose(){this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),this._imageProperty.dispose(),super.dispose&&super.dispose()}};Fr.getHitTestData=(n,e,t)=>{if(!("naturalWidth"in n&&n.naturalWidth||n.width)||!("naturalHeight"in n&&n.naturalHeight||n.height))return null;const i=cV(),s=AB();return i.width=e,i.height=t,s.drawImage(n,0,0),s.getImageData(0,0,e,t)};Fr.testHitTestData=(n,e,t,i)=>{const s=qs(Math.floor(i.x/e*n.width),0,n.width-1),r=qs(Math.floor(i.y/t*n.height),0,n.height-1),o=4*(s+r*n.width)+3;return n.data[o]!==0};Fr.hitTestDataToShape=(n,e,t)=>{const i=e/n.width,s=t/n.height,r=new Wt;let o=!1,d=0;for(let g=0;g<n.height;g++){for(let y=0;y<n.width;y++){const S=4*(y+g*n.width)+3;n.data[S]!==0?o||(o=!0,d=y):o&&(o=!1,r.rect(d*i,g*i,i*(y-d),s))}o&&(o=!1,r.rect(d*i,g*i,i*(n.width-d),s))}return r.getSimplifiedAreaShape()};Fr.createSVGImage=(n,e,t)=>{const i=document.createElementNS(ws,"image");return i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`),i.setAttributeNS(pc,"xlink:href",n),i};Fr.createFastMipmapFromCanvas=n=>{const e=[],t=n.toDataURL(),i=new self.Image;i.src=t,e.push({img:i,url:t,width:n.width,height:n.height,canvas:n});let s=n;for(;s.width>=2&&s.height>=2;){const r=document.createElement("canvas");r.width=Math.ceil(s.width/2),r.height=Math.ceil(s.height/2);const o=r.getContext("2d");o.setTransform(.5,0,0,.5,0,0),o.drawImage(s,0,0);const d={width:r.width,height:r.height,canvas:r,url:r.toDataURL(),img:new self.Image};d.img.src=d.url,s=r,e.push(d)}return e};Fr.getApproximateMatrixScale=n=>(Math.sqrt(n.m00()*n.m00()+n.m10()*n.m10())+Math.sqrt(n.m01()*n.m01()+n.m11()*n.m11()))/2;Fr.CANVAS_MIPMAP_BIAS_ADJUSTMENT=.5;Fr.DEFAULT_OPTIONS=Jo;class e0 extends fh{paintCanvas(e,t,i){const s=t._imageOpacity!==1;if(t._image&&t._image.width!==0&&t._image.height!==0){if(s&&(e.context.save(),e.context.globalAlpha*=t._imageOpacity),t._mipmap&&t.hasMipmaps()){const r=t.getMipmapLevel(i,Fr.CANVAS_MIPMAP_BIAS_ADJUSTMENT),o=t.getMipmapCanvas(r),d=Math.pow(2,r);e.context.drawImage(o,0,0,o.width*d,o.height*d)}else e.context.drawImage(t._image,0,0);s&&e.context.restore()}}markDirtyImage(){this.markPaintDirty()}markDirtyMipmap(){this.markPaintDirty()}markDirtyImageOpacity(){this.markPaintDirty()}}Ts.mixInto(e0);const sy=mr(n=>class extends n{initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyImage=!0,this.dirtyImageOpacity=!0,this.dirtyMipmap=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyImage(){this.dirtyImage=!0,this.markPaintDirty()}markDirtyImageOpacity(){this.dirtyImageOpacity=!0,this.markPaintDirty()}markDirtyMipmap(){this.dirtyMipmap=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyImage=!1,this.dirtyImageOpacity=!1,this.dirtyMipmap=!1}});class dV extends sy(Uc){constructor(e,t){super(e,t),Zi.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement||(this.domElement=document.createElement("img"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0"),this.hasOpacity=!1}updateDOM(){const e=this.node,t=this.domElement;this.paintDirty&&this.dirtyImage&&(t.src=e._image?e._image.src:"//:0"),this.dirtyImageOpacity&&(e._imageOpacity===1?this.hasOpacity&&(this.hasOpacity=!1,t.style.opacity=""):(this.hasOpacity=!0,t.style.opacity=e._imageOpacity)),this.transformDirty&&Zi.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.setToCleanState(),this.transformDirty=!1}dispose(){super.dispose()}}Ts.mixInto(dV);const bB=!0;class fV extends sy(bu){initialize(e,t){super.initialize(e,t,!1,bB),this.svgElement=this.svgElement||document.createElementNS(ws,"image"),this.svgElement.setAttribute("x","0"),this.svgElement.setAttribute("y","0"),this.hasOpacity=!1,this.usingMipmap=!1,this.mipmapLevel=-1,this._mipmapTransformListener=this._mipmapTransformListener||this.onMipmapTransform.bind(this),this._mipmapListener=this._mipmapListener||this.onMipmap.bind(this),this.node.mipmapEmitter.addListener(this._mipmapListener),this.updateMipmapStatus(t.node._mipmap)}updateSVGSelf(){const e=this.svgElement;this.dirtyImage?this.node._image?this.updateURL(e,!0):(e.setAttribute("width","0"),e.setAttribute("height","0"),e.setAttributeNS(pc,"xlink:href","//:0")):this.dirtyMipmap&&this.node._image&&this.updateURL(e,!1),this.dirtyImageOpacity&&(this.node._imageOpacity===1?this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity")):(this.hasOpacity=!0,e.setAttribute("opacity",this.node._imageOpacity)))}updateURL(e,t){let i=-1;if(this.node._mipmap&&(i=this.node.getMipmapLevel(this.instance.relativeTransform.matrix)),!(!t&&i===this.mipmapLevel))if(this.mipmapLevel>=0&&i===-1&&e.removeAttribute("transform"),this.mipmapLevel=i,this.node._mipmap&&this.node.hasMipmaps()){const s=this.node.getMipmapURL(i),r=this.node.getMipmapCanvas(i);e.setAttribute("width",`${r.width}px`),e.setAttribute("height",`${r.height}px`),e.setAttribute("transform",`scale(${Math.pow(2,i).toFixed(20)})`),e.setAttributeNS(pc,"xlink:href",s)}else e.setAttribute("width",`${this.node.getImageWidth()}px`),e.setAttribute("height",`${this.node.getImageHeight()}px`),e.setAttributeNS(pc,"xlink:href",this.node.getImageURL())}updateMipmapStatus(e){this.usingMipmap!==e&&(this.usingMipmap=e,e?(this.instance.relativeTransform.addListener(this._mipmapTransformListener),this.instance.relativeTransform.addPrecompute()):(this.instance.relativeTransform.removeListener(this._mipmapTransformListener),this.instance.relativeTransform.removePrecompute()),this.markDirtyMipmap())}onMipmap(){this.markDirtyMipmap(),this.updateMipmapStatus(this.node._mipmap)}onMipmapTransform(){this.markDirtyMipmap()}dispose(){this.updateMipmapStatus(!1),this.node.mipmapEmitter.removeListener(this._mipmapListener),super.dispose()}}Ts.mixInto(fV);const gh=5,ju=gh*0,Qu=gh*1,Zu=gh*2,Ju=gh*3,$u=gh*4,ec=gh*5,Nh=0,Bh=1,Rh=2,Mh=3,Oh=4;class ny extends sy(uV){initialize(e,t){super.initialize(e,t),this.vertexArray=this.vertexArray||new Float32Array(gh*6),this.upperLeft=new Ne(0,0),this.lowerLeft=new Ne(0,0),this.upperRight=new Ne(0,0),this.lowerRight=new Ne(0,0),this.xyDirty=!0,this.uvDirty=!0,this.updatedOnce=!1,this.sprite=null}onAddToBlock(e){this.webglBlock=e,this.markDirty(),this.reserveSprite()}onRemoveFromBlock(e){this.unreserveSprite()}reserveSprite(){if(this.sprite){if(this.sprite.image===this.node._image)return;this.unreserveSprite()}const e=this.node.getImageWidth(),t=this.node.getImageHeight();this.sprite=e>0&&t>0?this.webglBlock.addSpriteSheetImage(this.node._image,e,t):null,this.xyDirty=!0,this.uvDirty=!0}unreserveSprite(){this.sprite&&this.webglBlock.removeSpriteSheetImage(this.sprite),this.sprite=null}markTransformDirty(){this.xyDirty=!0,super.markTransformDirty()}markPaintDirty(){this.xyDirty=!0,this.uvDirty=!0,this.markDirty()}update(){if(!super.update()||(this.reserveSprite(),(this.dirtyImageOpacity||!this.updatedOnce)&&(this.vertexArray[ju+Oh]=this.node._imageOpacity,this.vertexArray[Qu+Oh]=this.node._imageOpacity,this.vertexArray[Zu+Oh]=this.node._imageOpacity,this.vertexArray[Ju+Oh]=this.node._imageOpacity,this.vertexArray[$u+Oh]=this.node._imageOpacity,this.vertexArray[ec+Oh]=this.node._imageOpacity),this.updatedOnce=!0,!this.sprite))return!1;if(this.uvDirty){this.uvDirty=!1;const e=this.sprite.uvBounds;this.vertexArray[ju+Rh]=e.minX,this.vertexArray[ju+Mh]=e.minY,this.vertexArray[Qu+Rh]=e.minX,this.vertexArray[Qu+Mh]=e.maxY,this.vertexArray[Zu+Rh]=e.maxX,this.vertexArray[Zu+Mh]=e.minY,this.vertexArray[Ju+Rh]=e.maxX,this.vertexArray[Ju+Mh]=e.minY,this.vertexArray[$u+Rh]=e.minX,this.vertexArray[$u+Mh]=e.maxY,this.vertexArray[ec+Rh]=e.maxX,this.vertexArray[ec+Mh]=e.maxY}if(this.xyDirty){this.xyDirty=!1;const e=this.node.getImageWidth(),t=this.node.getImageHeight(),i=this.instance.relativeTransform.matrix;i.multiplyVector2(this.upperLeft.setXY(0,0)),i.multiplyVector2(this.lowerLeft.setXY(0,t)),i.multiplyVector2(this.upperRight.setXY(e,0)),i.multiplyVector2(this.lowerRight.setXY(e,t)),this.vertexArray[ju+Nh]=this.upperLeft.x,this.vertexArray[ju+Bh]=this.upperLeft.y,this.vertexArray[Qu+Nh]=this.lowerLeft.x,this.vertexArray[Qu+Bh]=this.lowerLeft.y,this.vertexArray[Zu+Nh]=this.upperRight.x,this.vertexArray[Zu+Bh]=this.upperRight.y,this.vertexArray[Ju+Nh]=this.upperRight.x,this.vertexArray[Ju+Bh]=this.upperRight.y,this.vertexArray[$u+Nh]=this.lowerLeft.x,this.vertexArray[$u+Bh]=this.lowerLeft.y,this.vertexArray[ec+Nh]=this.lowerRight.x,this.vertexArray[ec+Bh]=this.lowerRight.y}return!0}}ny.prototype.webglRenderer=Le.webglTexturedTriangles;Ts.mixInto(ny);class t0 extends zc(fh){writeRectangularPath(e,t){e.beginPath(),e.moveTo(t._rectX,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY+t._rectHeight),e.lineTo(t._rectX,t._rectY+t._rectHeight),e.closePath()}paintCanvas(e,t,i){const s=e.context;if(t.isRounded()){s.beginPath();const r=t.getMaximumArcSize(),o=Math.min(t._cornerXRadius,r),d=Math.min(t._cornerYRadius,r),g=t._rectX+o,y=t._rectX+t._rectWidth-o,S=t._rectY+d,T=t._rectY+t._rectHeight-d;o===d?(s.arc(y,S,o,-Math.PI/2,0,!1),s.arc(y,T,o,0,Math.PI/2,!1),s.arc(g,T,o,Math.PI/2,Math.PI,!1),s.arc(g,S,o,Math.PI,Math.PI*3/2,!1)):(s.ellipse(y,S,o,d,0,-Math.PI/2,0,!1),s.ellipse(y,T,o,d,0,0,Math.PI/2,!1),s.ellipse(g,T,o,d,0,Math.PI/2,Math.PI,!1),s.ellipse(g,S,o,d,0,Math.PI,Math.PI*3/2,!1)),s.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e))}else t.hasFill()&&(t.getFillValue().transformMatrix?(this.writeRectangularPath(s,t),t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)):(t.beforeCanvasFill(e),s.fillRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasFill(e))),t.hasPaintableStroke()&&(t.getStrokeValue().transformMatrix?(this.writeRectangularPath(s,t),t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e)):(t.beforeCanvasStroke(e),s.strokeRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasStroke(e)))}markDirtyRectangle(){this.markPaintDirty()}markDirtyX(){this.markDirtyRectangle()}markDirtyY(){this.markDirtyRectangle()}markDirtyWidth(){this.markDirtyRectangle()}markDirtyHeight(){this.markDirtyRectangle()}markDirtyCornerXRadius(){this.markDirtyRectangle()}markDirtyCornerYRadius(){this.markDirtyRectangle()}}Ts.mixInto(t0);const ry=mr(n=>class extends Hc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyRectangle(){this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0,this.markPaintDirty()}markDirtyX(){this.dirtyX=!0,this.markPaintDirty()}markDirtyY(){this.dirtyY=!0,this.markPaintDirty()}markDirtyWidth(){this.dirtyWidth=!0,this.markPaintDirty()}markDirtyHeight(){this.dirtyHeight=!0,this.markPaintDirty()}markDirtyCornerXRadius(){this.dirtyCornerXRadius=!0,this.markPaintDirty()}markDirtyCornerYRadius(){this.dirtyCornerYRadius=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyX=!1,this.dirtyY=!1,this.dirtyWidth=!1,this.dirtyHeight=!1,this.dirtyCornerXRadius=!1,this.dirtyCornerYRadius=!1}}),om=mt.pool.fetch();class pV extends ry(Uc){constructor(e,t){super(e,t),Zi.prepareForTransform(this.domElement)}initialize(e,t){if(super.initialize(e,t),!this.fillElement||!this.strokeElement){const i=document.createElement("div");this.fillElement=i,i.style.display="block",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.pointerEvents="none";const s=document.createElement("div");this.strokeElement=s,s.style.display="block",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.pointerEvents="none",i.appendChild(s)}this.domElement=this.fillElement}updateDOM(){const e=this.node,t=this.fillElement,i=this.strokeElement;if(this.paintDirty){const s=Math.min(e._cornerXRadius,e._cornerYRadius),r=this.dirtyCornerXRadius||this.dirtyCornerYRadius;if(this.dirtyWidth&&(t.style.width=`${e._rectWidth}px`),this.dirtyHeight&&(t.style.height=`${e._rectHeight}px`),r&&(t.style[Xt.borderRadius]=`${s}px`),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?i.style.borderStyle="solid":i.style.borderStyle="none"),e.hasStroke()){const o=!this.hadStroke;(o||this.dirtyWidth||this.dirtyLineWidth)&&(i.style.width=`${e._rectWidth-e.getLineWidth()}px`),(o||this.dirtyHeight||this.dirtyLineWidth)&&(i.style.height=`${e._rectHeight-e.getLineWidth()}px`),(o||this.dirtyLineWidth)&&(i.style.left=`${-e.getLineWidth()/2}px`,i.style.top=`${-e.getLineWidth()/2}px`,i.style.borderWidth=`${e.getLineWidth()}px`),(o||this.dirtyStroke)&&(i.style.borderColor=e.getSimpleCSSStroke()),(o||r||this.dirtyLineWidth||this.dirtyLineOptions)&&(i.style[Xt.borderRadius]=e.isRounded()||e.getLineJoin()==="round"?`${s+e.getLineWidth()/2}px`:"0")}}if(this.transformDirty||this.dirtyX||this.dirtyY){om.set(this.getTransformMatrix());const s=mt.translation(e._rectX,e._rectY);om.multiplyMatrix(s),s.freeToPool(),Zi.applyPreparedTransform(om,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}Ts.mixInto(pV);const vB=!0;class gV extends ry(bu){initialize(e,t){super.initialize(e,t,!0,vB),this.lastArcW=-1,this.lastArcH=-1,this.svgElement=this.svgElement||document.createElementNS(ws,"rect")}updateSVGSelf(){const e=this.svgElement;if(this.dirtyX&&e.setAttribute("x",this.node._rectX),this.dirtyY&&e.setAttribute("y",this.node._rectY),this.dirtyWidth&&e.setAttribute("width",this.node._rectWidth),this.dirtyHeight&&e.setAttribute("height",this.node._rectHeight),this.dirtyCornerXRadius||this.dirtyCornerYRadius||this.dirtyWidth||this.dirtyHeight){let t=0,i=0;if(this.node.isRounded()){const s=this.node.getMaximumArcSize();t=Math.min(this.node._cornerXRadius,s),i=Math.min(this.node._cornerYRadius,s)}t!==this.lastArcW&&(this.lastArcW=t,e.setAttribute("rx",t)),i!==this.lastArcH&&(this.lastArcH=i,e.setAttribute("ry",i))}this.updateFillStrokeStyle(e)}}Ts.mixInto(gV);const VB=new ct("transparent");class ay extends ry(uV){initialize(e,t){super.initialize(e,t),this.vertexArray||(this.vertexArray=new Float32Array(6*6)),this.upperLeft=new Ne(0,0),this.lowerLeft=new Ne(0,0),this.upperRight=new Ne(0,0),this.lowerRight=new Ne(0,0),this.transformDirty=!0,this.includeVertices=!0}onAddToBlock(e){this.webglBlock=e,this.markDirty()}onRemoveFromBlock(e){}markTransformDirty(){this.transformDirty=!0,super.markTransformDirty()}update(){if(!super.update())return!1;if(this.dirtyFill&&(this.includeVertices=this.node.hasFill(),this.includeVertices)){const e=ii(this.node.fill)?this.node.fill.value:this.node.fill,t=VB.set(e),i=t.red/255,s=t.green/255,r=t.blue/255,o=t.alpha;for(let d=0;d<6;d++){const g=d*6;this.vertexArray[2+g]=i,this.vertexArray[3+g]=s,this.vertexArray[4+g]=r,this.vertexArray[5+g]=o}}if(this.transformDirty||this.dirtyX||this.dirtyY||this.dirtyWidth||this.dirtyHeight){this.transformDirty=!1;const e=this.node._rectX,t=this.node._rectY,i=this.node._rectWidth,s=this.node._rectHeight,r=this.instance.relativeTransform.matrix;r.multiplyVector2(this.upperLeft.setXY(e,t)),r.multiplyVector2(this.lowerLeft.setXY(e,t+s)),r.multiplyVector2(this.upperRight.setXY(e+i,t)),r.multiplyVector2(this.lowerRight.setXY(e+i,t+s)),this.vertexArray[0]=this.upperLeft.x,this.vertexArray[1]=this.upperLeft.y,this.vertexArray[6]=this.lowerLeft.x,this.vertexArray[7]=this.lowerLeft.y,this.vertexArray[12]=this.upperRight.x,this.vertexArray[13]=this.upperRight.y,this.vertexArray[18]=this.upperRight.x,this.vertexArray[19]=this.upperRight.y,this.vertexArray[24]=this.lowerLeft.x,this.vertexArray[25]=this.lowerLeft.y,this.vertexArray[30]=this.lowerRight.x,this.vertexArray[31]=this.lowerRight.y}return this.setToCleanState(),this.cleanPaintableState(),!0}}ay.prototype.webglRenderer=Le.webglVertexColorPolygons;Ts.mixInto(ay);let wB=1;class Hb{constructor(){this.id=`filter${wB++}`,this.filterRegionPercentageIncrease=0}isDOMCompatible(){return!1}isSVGCompatible(){return!1}isCanvasCompatible(){return Xt.canvasFilter?this.isDOMCompatible():!1}isWebGLCompatible(){return!1}toString(){return this.id}static applyColorMatrix(e,t,i,s){const r=document.createElementNS(ws,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values",e),r.setAttribute("in",i),r.setAttribute("color-interpolation-filters","sRGB"),s&&r.setAttribute("result",s),t.appendChild(r)}}const SB=Zi.supportsImageDataCanvasFilter();class dp extends Hb{constructor(e,t,i,s,r,o,d,g,y,S,T,L,x,A,Q,z,G,re,ne,ae){super(),this.m00=e,this.m01=t,this.m02=i,this.m03=s,this.m04=r,this.m10=o,this.m11=d,this.m12=g,this.m13=y,this.m14=S,this.m20=T,this.m21=L,this.m22=x,this.m23=A,this.m24=Q,this.m30=z,this.m31=G,this.m32=re,this.m33=ne,this.m34=ae}applySVGFilter(e,t,i){Hb.applyColorMatrix(`${is(this.m00)} ${is(this.m01)} ${is(this.m02)} ${is(this.m03)} ${is(this.m04)} ${is(this.m10)} ${is(this.m11)} ${is(this.m12)} ${is(this.m13)} ${is(this.m14)} ${is(this.m20)} ${is(this.m21)} ${is(this.m22)} ${is(this.m23)} ${is(this.m24)} ${is(this.m30)} ${is(this.m31)} ${is(this.m32)} ${is(this.m33)} ${is(this.m34)}`,e,t,i)}applyCanvasFilter(e){const t=e.canvas.width,i=e.canvas.height,s=e.context.getImageData(0,0,t,i),r=t*i;for(let o=0;o<r;o++){const d=o*4;{const y=Math.pow(s.data[d+0]/255,1.45),S=Math.pow(s.data[d+1]/255,1.45),T=Math.pow(s.data[d+2]/255,1.45),L=Math.pow(s.data[d+3]/255,1.45);s.data[d+0]=255*Math.pow(y*this.m00+S*this.m01+T*this.m02+L*this.m03+this.m04,1/1.45),s.data[d+1]=255*Math.pow(y*this.m10+S*this.m11+T*this.m12+L*this.m13+this.m14,1/1.45),s.data[d+2]=255*Math.pow(y*this.m20+S*this.m21+T*this.m22+L*this.m23+this.m24,1/1.45),s.data[d+3]=255*Math.pow(y*this.m30+S*this.m31+T*this.m32+L*this.m33+this.m34,1/1.45)}}e.context.putImageData(s,0,0)}isSVGCompatible(){return!0}isCanvasCompatible(){return super.isCanvasCompatible()||SB}getCSSFilterString(){throw new Error("unimplemented")}}class i0 extends dp{constructor(e){super(e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`brightness(${is(this.amount)})`}isDOMCompatible(){return!0}}i0.BLACKEN=new i0(0);class s0 extends dp{constructor(e){super(e,0,0,0,-(.5*e)+.5,0,e,0,0,-(.5*e)+.5,0,0,e,0,-(.5*e)+.5,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`contrast(${is(this.amount)})`}isDOMCompatible(){return!0}}s0.GRAY=new s0(0);class n0 extends dp{constructor(e=1){const t=1-e;super(.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`grayscale(${is(this.amount)})`}isDOMCompatible(){return!0}}n0.FULL=new n0(1);class CB extends dp{constructor(e){const t=Math.cos(e),i=Math.sin(e);super(.213+.787*t-.213*i,.715-.715*t-.715*i,.072-.072*t+.928*i,0,0,.213-.213*t+.143*i,.715+.285*t+.14*i,.072-.072*t-.283*i,0,0,.213-.213*t-.787*i,.715-.715*t+.715*i,.072+.928*t+.072*i,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`hue-rotate(${is(Dv(this.amount))}deg)`}isDOMCompatible(){return!0}}const jd=1e-9,r0=["preferredHeight","minimumHeight","localPreferredHeight","localMinimumHeight","heightSizable"],PB=mr(n=>{const e=ph("HeightSizable",r0,class extends n{constructor(...i){super(...i),this.preferredHeightProperty=new Ni(null),this.minimumHeightProperty=new Ni(null),this.localPreferredHeightProperty=new Ni(null),this.localMinimumHeightProperty=new Ni(null),this.isHeightResizableProperty=new Ni(!0),this._preferredSizeChanging=!1,this._minimumSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock=!1,this._minimumSizeChangeAttemptDuringLock=!1,this._updatePreferredHeightListener=this._updatePreferredHeight.bind(this),this._updateLocalPreferredHeightListener=this._updateLocalPreferredHeight.bind(this),this._updateMinimumHeightListener=this._updateMinimumHeight.bind(this),this._updateLocalMinimumHeightListener=this._updateLocalMinimumHeight.bind(this),this.preferredHeightProperty.lazyLink(this._updateLocalPreferredHeightListener),this.localPreferredHeightProperty.lazyLink(this._updatePreferredHeightListener),this.minimumHeightProperty.lazyLink(this._updateLocalMinimumHeightListener),this.localMinimumHeightProperty.lazyLink(this._updateMinimumHeightListener),this.transformEmitter.addListener(this._updateLocalPreferredHeightListener),this.transformEmitter.addListener(this._updateMinimumHeightListener)}get preferredHeight(){return this.preferredHeightProperty.value}set preferredHeight(i){this.preferredHeightProperty.value=i}get localPreferredHeight(){return this.localPreferredHeightProperty.value}set localPreferredHeight(i){this.localPreferredHeightProperty.value=i}get minimumHeight(){return this.minimumHeightProperty.value}set minimumHeight(i){this.minimumHeightProperty.value=i}get localMinimumHeight(){return this.localMinimumHeightProperty.value}set localMinimumHeight(i){this.localMinimumHeightProperty.value=i}get heightSizable(){return this.isHeightResizableProperty.value}set heightSizable(i){this.isHeightResizableProperty.value=i}get extendsHeightSizable(){return!0}validateLocalPreferredHeight(){}_calculateLocalPreferredHeight(){return this.matrix.isAligned()&&this.preferredHeight!==null?Math.abs(this.transform.inverseDeltaY(this.preferredHeight)):null}_onReentrantPreferredHeight(){this._updateLocalPreferredHeightListener()}_updateLocalPreferredHeight(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0;do{this._preferredSizeChangeAttemptDuringLock=!1;const i=this._calculateLocalPreferredHeight();(this.localPreferredHeightProperty.value===null||i===null||Math.abs(this.localPreferredHeightProperty.value-i)>jd)&&(this.localPreferredHeightProperty.value=i)}while(this._preferredSizeChangeAttemptDuringLock);this._preferredSizeChanging=!1}}_calculatePreferredHeight(){return this.matrix.isAligned()&&this.localPreferredHeight!==null?Math.abs(this.transform.transformDeltaY(this.localPreferredHeight)):null}_updatePreferredHeight(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0,this._preferredSizeChangeAttemptDuringLock=!1;const i=this._calculatePreferredHeight();(this.preferredHeightProperty.value===null||i===null||Math.abs(this.preferredHeightProperty.value-i)>jd)&&(this.preferredHeightProperty.value=i),this._preferredSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock&&this._onReentrantPreferredHeight()}}_calculateLocalMinimumHeight(){return this.matrix.isAligned()&&this.minimumHeight!==null?Math.abs(this.transform.inverseDeltaY(this.minimumHeight)):null}_onReentrantLocalMinimumHeight(){this._updateMinimumHeight()}_updateLocalMinimumHeight(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0,this._minimumSizeChangeAttemptDuringLock=!1;const i=this._calculateLocalMinimumHeight();(this.localMinimumHeightProperty.value===null||i===null||Math.abs(this.localMinimumHeightProperty.value-i)>jd)&&(this.localMinimumHeightProperty.value=i),this._minimumSizeChanging=!1,this._minimumSizeChangeAttemptDuringLock&&this._onReentrantLocalMinimumHeight()}}_calculateMinimumHeight(){return this.matrix.isAligned()&&this.localMinimumHeight!==null?Math.abs(this.transform.transformDeltaY(this.localMinimumHeight)):null}_updateMinimumHeight(){if(!this._minimumSizeChanging){this._minimumSizeChanging=!0;do{this._minimumSizeChangeAttemptDuringLock=!1;const i=this._calculateMinimumHeight();(this.minimumHeightProperty.value===null||i===null||Math.abs(this.minimumHeightProperty.value-i)>jd)&&(this.minimumHeightProperty.value=i)}while(this._minimumSizeChangeAttemptDuringLock);this._minimumSizeChanging=!1}}mutate(i){return super.mutate(i)}});if(e.prototype._mutatorKeys){const t=e.prototype._mutatorKeys,i=r0,s=t.indexOf(th[0]);e.prototype._mutatorKeys=[...t.slice(0,s),...i,...t.slice(s)]}return e}),EB=["left","right","center","origin"],DB=["top","bottom","center","origin"],TB=["left","right","center"],xB=["top","bottom","center"];class Ds extends rr{constructor(e,t,i=Number.POSITIVE_INFINITY){super(),this.horizontal=e,this.vertical=t,this.padRatio=i}static getAllowedAligns(e){return[...e===jt.HORIZONTAL?EB:DB,null]}static getAllowedRestrictedAligns(e){return[...e===jt.HORIZONTAL?TB:xB,null]}static alignToInternal(e,t){return e===jt.HORIZONTAL?Ds.horizontalAlignToInternal(t):Ds.verticalAlignToInternal(t)}static horizontalAlignToInternal(e){return e===null?null:IB[e]}static verticalAlignToInternal(e){return e===null?null:kB[e]}static internalToAlign(e,t){return t===null?null:e===jt.HORIZONTAL?t.horizontal:t.vertical}}Ds.START=new Ds("left","top",0);Ds.END=new Ds("right","bottom",1);Ds.CENTER=new Ds("center","center",.5);Ds.ORIGIN=new Ds("origin","origin");Ds.enumeration=new oa(Ds,{phetioDocumentation:"Alignment for layout containers"});const IB={left:Ds.START,right:Ds.END,center:Ds.CENTER,origin:Ds.ORIGIN},kB={top:Ds.START,bottom:Ds.END,center:Ds.CENTER,origin:Ds.ORIGIN},LB=["left","right","center","spaceBetween","spaceAround","spaceEvenly"],NB=["top","bottom","center","spaceBetween","spaceAround","spaceEvenly"];class Vs extends rr{constructor(e,t,i){super(),this.spacingFunctionFactory=e,this.horizontal=t,this.vertical=i}static getAllowedJustificationValues(e){return e===jt.HORIZONTAL?LB:NB}static justifyToInternal(e,t){return e===jt.HORIZONTAL?BB[t]:RB[t]}static internalToJustify(e,t){return e===jt.HORIZONTAL?t.horizontal:t.vertical}}Vs.START=new Vs(()=>()=>0,"left","top");Vs.END=new Vs(n=>e=>e===0?n:0,"right","bottom");Vs.CENTER=new Vs(n=>e=>e===0?n/2:0,"center","center");Vs.SPACE_BETWEEN=new Vs((n,e)=>t=>t!==0?n/(e-1):0,"spaceBetween","spaceBetween");Vs.SPACE_AROUND=new Vs((n,e)=>t=>(t!==0?2:1)*n/(2*e),"spaceAround","spaceAround");Vs.SPACE_EVENLY=new Vs((n,e)=>t=>n/(e+1),"spaceEvenly","spaceEvenly");Vs.enumeration=new oa(Vs,{phetioDocumentation:"Justify for layout containers"});const BB={left:Vs.START,right:Vs.END,center:Vs.CENTER,spaceBetween:Vs.SPACE_BETWEEN,spaceAround:Vs.SPACE_AROUND,spaceEvenly:Vs.SPACE_EVENLY},RB={top:Vs.START,bottom:Vs.END,center:Vs.CENTER,spaceBetween:Vs.SPACE_BETWEEN,spaceAround:Vs.SPACE_AROUND,spaceEvenly:Vs.SPACE_EVENLY},Nc=n=>n.widthSizable,bf=n=>n.heightSizable,vf=n=>n.extendsWidthSizable,Vf=n=>n.extendsHeightSizable;class eu{constructor(e){this.initialize(e)}initialize(e){return this.trail=e,this}checkPreconditions(){}get node(){return this.trail.lastNode()}get bounds(){return this.trail.parentToGlobalBounds(this.node.bounds)}get visibleBounds(){return this.trail.parentToGlobalBounds(this.node.visibleBounds)}get width(){return this.bounds.width}get height(){return this.bounds.height}get x(){return this.trail.getParentTransform().transformX(this.node.x)}set x(e){this.node.x=this.trail.getParentTransform().inverseX(e)}get y(){return this.trail.getParentTransform().transformY(this.node.y)}set y(e){this.node.y=this.trail.getParentTransform().inverseY(e)}get translation(){return this.trail.getParentTransform().transformPosition2(this.node.translation)}set translation(e){this.node.translation=this.trail.getParentTransform().inversePosition2(e)}get left(){return this.trail.getParentTransform().transformX(this.node.left)}set left(e){this.node.left=this.trail.getParentTransform().inverseX(e)}get right(){return this.trail.getParentTransform().transformX(this.node.right)}set right(e){this.node.right=this.trail.getParentTransform().inverseX(e)}get centerX(){return this.trail.getParentTransform().transformX(this.node.centerX)}set centerX(e){this.node.centerX=this.trail.getParentTransform().inverseX(e)}get top(){return this.trail.getParentTransform().transformY(this.node.top)}set top(e){this.node.top=this.trail.getParentTransform().inverseY(e)}get bottom(){return this.trail.getParentTransform().transformY(this.node.bottom)}set bottom(e){this.node.bottom=this.trail.getParentTransform().inverseY(e)}get centerY(){return this.trail.getParentTransform().transformY(this.node.centerY)}set centerY(e){this.node.centerY=this.trail.getParentTransform().inverseY(e)}get leftTop(){return this.trail.getParentTransform().transformPosition2(this.node.leftTop)}set leftTop(e){this.node.leftTop=this.trail.getParentTransform().inversePosition2(e)}get centerTop(){return this.trail.getParentTransform().transformPosition2(this.node.centerTop)}set centerTop(e){this.node.centerTop=this.trail.getParentTransform().inversePosition2(e)}get rightTop(){return this.trail.getParentTransform().transformPosition2(this.node.rightTop)}set rightTop(e){this.node.rightTop=this.trail.getParentTransform().inversePosition2(e)}get leftCenter(){return this.trail.getParentTransform().transformPosition2(this.node.leftCenter)}set leftCenter(e){this.node.leftCenter=this.trail.getParentTransform().inversePosition2(e)}get center(){return this.trail.getParentTransform().transformPosition2(this.node.center)}set center(e){this.node.center=this.trail.getParentTransform().inversePosition2(e)}get rightCenter(){return this.trail.getParentTransform().transformPosition2(this.node.rightCenter)}set rightCenter(e){this.node.rightCenter=this.trail.getParentTransform().inversePosition2(e)}get leftBottom(){return this.trail.getParentTransform().transformPosition2(this.node.leftBottom)}set leftBottom(e){this.node.leftBottom=this.trail.getParentTransform().inversePosition2(e)}get centerBottom(){return this.trail.getParentTransform().transformPosition2(this.node.centerBottom)}set centerBottom(e){this.node.centerBottom=this.trail.getParentTransform().inversePosition2(e)}get rightBottom(){return this.trail.getParentTransform().transformPosition2(this.node.rightBottom)}set rightBottom(e){this.node.rightBottom=this.trail.getParentTransform().inversePosition2(e)}get widthSizable(){return this.node.widthSizable}get heightSizable(){return this.node.heightSizable}isSizable(e){return e===jt.HORIZONTAL?this.widthSizable:this.heightSizable}get minimumWidth(){const e=Nc(this.node)?this.node.minimumWidth??0:this.node.width;return Math.abs(this.trail.getParentTransform().transformDeltaX(e))}get minimumHeight(){const e=bf(this.node)?this.node.minimumHeight??0:this.node.height;return Math.abs(this.trail.getParentTransform().transformDeltaY(e))}getMinimum(e){return e===jt.HORIZONTAL?this.minimumWidth:this.minimumHeight}get maxWidth(){return this.node.maxWidth===null?null:Math.abs(this.trail.getParentTransform().transformDeltaX(this.node.maxWidth))}set maxWidth(e){this.node.maxWidth=e===null?null:Math.abs(this.trail.getParentTransform().inverseDeltaX(e))}get maxHeight(){return this.node.maxHeight===null?null:Math.abs(this.trail.getParentTransform().transformDeltaY(this.node.maxHeight))}set maxHeight(e){this.node.maxHeight=e===null?null:Math.abs(this.trail.getParentTransform().inverseDeltaY(e))}getMax(e){return e===jt.HORIZONTAL?this.maxWidth:this.maxHeight}attemptPreferredSize(e,t){if(this.isSizable(e))if(t===null)this.node[e.preferredSize]=null;else{t=Math.abs(this.trail.getParentTransform()[e===jt.HORIZONTAL?"inverseDeltaX":"inverseDeltaY"](t));const i=this.getMinimum(e);t=Math.max(i,t);const s=this.getMax(e);s!==null&&(t=Math.min(s,t)),this.node[e.preferredSize]=t}}get preferredWidth(){if(Nc(this.node)){const e=this.node.preferredWidth;return e===null?null:Math.abs(this.trail.getParentTransform().transformDeltaX(e))}else return null}set preferredWidth(e){this.attemptPreferredSize(jt.HORIZONTAL,e)}get preferredHeight(){if(bf(this.node)){const e=this.node.preferredHeight;return e===null?null:Math.abs(this.trail.getParentTransform().transformDeltaY(e))}else return null}set preferredHeight(e){this.attemptPreferredSize(jt.VERTICAL,e)}get visible(){return this.node.visible}set visible(e){this.node.visible=e}dispose(){this.trail=null,this.freeToPool()}freeToPool(){eu.pool.freeToPool(this)}}eu.pool=new Fs(eu,{maxSize:1e3});class MB extends Ni{constructor(e,t){super([]),this.listenedNodeSet=new Set,this.rootNode=e,this.leafNode=t,this._trailUpdateListener=this.update.bind(this),this.update()}update(){const e=[],t=new Set,i=new Ki(this.leafNode),s=this.rootNode;(function d(){const g=i.rootNode();t.add(g),g===s&&e.push(i.copy()),g.parents.forEach(y=>{i.addAncestor(y),d(),i.removeAncestor()})})(),t.forEach(d=>{this.listenedNodeSet.has(d)||this.addNodeListener(d)}),this.listenedNodeSet.forEach(d=>{t.has(d)||this.removeNodeListener(d)});const r=this.value;let o=r.length===e.length;if(o){for(let d=0;d<e.length;d++)if(!r[d].equals(e[d])){o=!1;break}}o||(this.value=e)}addNodeListener(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._trailUpdateListener),e.parentRemovedEmitter.addListener(this._trailUpdateListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._trailUpdateListener),e.parentRemovedEmitter.removeListener(this._trailUpdateListener)}dispose(){this.listenedNodeSet.forEach(e=>this.removeNodeListener(e)),super.dispose()}}class OB extends yv{constructor(e,t,i){const s=new MB(e,t);super([s],o=>o.length===1?eu.pool.create(o[0].copy().removeAncestor()):null),this.transformTracker=null,this.trailsBetweenProperty=s,this.lazyLink((o,d)=>{d&&d.dispose()});const r=i==null?void 0:i.onTransformChange;r&&this.link(o=>{this.transformTracker&&(this.transformTracker.dispose(),this.transformTracker=null),o&&(this.transformTracker=new jl(o.trail.copy().addAncestor(e)),this.transformTracker.addListener(r))})}dispose(){this.trailsBetweenProperty.dispose(),this.transformTracker&&this.transformTracker.dispose(),super.dispose()}}const Kb=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable"],qB=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable",...Jm,...r0],Cu=mr(n=>{const e=ph("Sizable",Kb,class extends cp(PB(n)){constructor(...i){super(...i),this.preferredWidthProperty.lazyLink(this._updateLocalPreferredHeightListener),this.preferredHeightProperty.lazyLink(this._updateLocalPreferredWidthListener),this.localPreferredWidthProperty.lazyLink(this._updatePreferredHeightListener),this.localPreferredHeightProperty.lazyLink(this._updatePreferredWidthListener),this.minimumWidthProperty.lazyLink(this._updateLocalMinimumHeightListener),this.minimumHeightProperty.lazyLink(this._updateLocalMinimumWidthListener),this.localMinimumWidthProperty.lazyLink(this._updateMinimumHeightListener),this.localMinimumHeightProperty.lazyLink(this._updateMinimumWidthListener)}get preferredSize(){return this.preferredWidth===null||this.preferredHeight===null?null:new Ws(this.preferredWidth,this.preferredHeight)}set preferredSize(i){this.preferredWidth=i===null?null:i.width,this.preferredHeight=i===null?null:i.height}get localPreferredSize(){return this.localPreferredWidth===null||this.localPreferredHeight===null?null:new Ws(this.localPreferredWidth,this.localPreferredHeight)}set localPreferredSize(i){this.localPreferredWidth=i===null?null:i.width,this.localPreferredHeight=i===null?null:i.height}get minimumSize(){return this.minimumWidth===null||this.minimumHeight===null?null:new Ws(this.minimumWidth,this.minimumHeight)}set minimumSize(i){this.minimumWidth=i===null?null:i.width,this.minimumHeight=i===null?null:i.height}get localMinimumSize(){return this.localMinimumWidth===null||this.localMinimumHeight===null?null:new Ws(this.localMinimumWidth,this.localMinimumHeight)}set localMinimumSize(i){this.localMinimumWidth=i===null?null:i.width,this.localMinimumHeight=i===null?null:i.height}get sizable(){return this.widthSizable}set sizable(i){this.widthSizable=i,this.heightSizable=i}get extendsSizable(){return!0}validateLocalPreferredSize(){}mutate(i){return vo(i,["preferredSize"],["preferredWidth","preferredHeight"]),vo(i,["localPreferredSize"],["localPreferredWidth","localPreferredHeight"]),vo(i,["minimumSize"],["minimumWidth","minimumHeight"]),vo(i,["localMinimumSize"],["localMinimumWidth","localMinimumHeight"]),vo(i,["sizable"],["widthSizable","heightSizable"]),super.mutate(i)}_calculateLocalPreferredWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.preferredWidth!==null)return Math.abs(this.transform.inverseDeltaX(this.preferredWidth))}else if(this.preferredHeight!==null)return Math.abs(this.transform.getInverse().m01()*this.preferredHeight)}return null}_calculateLocalPreferredHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.preferredHeight!==null)return Math.abs(this.transform.inverseDeltaY(this.preferredHeight))}else if(this.preferredWidth!==null)return Math.abs(this.transform.getInverse().m10()*this.preferredWidth)}return null}_calculatePreferredWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localPreferredWidth!==null)return Math.abs(this.transform.transformDeltaX(this.localPreferredWidth))}else if(this.localPreferredHeight!==null)return Math.abs(this.transform.matrix.m01()*this.localPreferredHeight)}return null}_calculatePreferredHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localPreferredHeight!==null)return Math.abs(this.transform.transformDeltaY(this.localPreferredHeight))}else if(this.localPreferredWidth!==null)return Math.abs(this.transform.matrix.m10()*this.localPreferredWidth)}return null}_onReentrantLocalMinimumWidth(){this._updateMinimumWidthListener(),this._updateMinimumHeightListener()}_onReentrantLocalMinimumHeight(){this._updateMinimumWidthListener(),this._updateMinimumHeightListener()}_onReentrantPreferredWidth(){this._updateLocalPreferredWidthListener(),this._updateLocalPreferredHeightListener()}_onReentrantPreferredHeight(){this._updateLocalPreferredWidthListener(),this._updateLocalPreferredHeightListener()}_calculateLocalMinimumWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.minimumWidth!==null)return Math.abs(this.transform.inverseDeltaX(this.minimumWidth))}else if(this.minimumHeight!==null)return Math.abs(this.transform.getInverse().m01()*this.minimumHeight)}return null}_calculateLocalMinimumHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.minimumHeight!==null)return Math.abs(this.transform.inverseDeltaY(this.minimumHeight))}else if(this.minimumWidth!==null)return Math.abs(this.transform.getInverse().m10()*this.minimumWidth)}return null}_calculateMinimumWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localMinimumWidth!==null)return Math.abs(this.transform.transformDeltaX(this.localMinimumWidth))}else if(this.localMinimumHeight!==null)return Math.abs(this.transform.matrix.m01()*this.localMinimumHeight)}return null}_calculateMinimumHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localMinimumHeight!==null)return Math.abs(this.transform.transformDeltaY(this.localMinimumHeight))}else if(this.localMinimumWidth!==null)return Math.abs(this.transform.matrix.m10()*this.localMinimumWidth)}return null}});if(e.prototype._mutatorKeys){const t=e.prototype._mutatorKeys,i=Kb,s=t.indexOf(th[0]);e.prototype._mutatorKeys=[...t.slice(0,s),...i,...t.slice(s)]}return e});class mh{constructor(e){this._layoutLockCount=0,this._layoutAttemptDuringLock=!1,this._enabled=!0,this._listenedNodes=new Set,this.finishedLayoutEmitter=new Hi,this.ancestorNode=e,this._updateLayoutListener=this.updateLayoutAutomatically.bind(this)}addNode(e,t=!0){t&&(e._activeParentLayoutConstraint=this),e.boundsProperty.lazyLink(this._updateLayoutListener),e.visibleProperty.lazyLink(this._updateLayoutListener),vf(e)&&(e.minimumWidthProperty.lazyLink(this._updateLayoutListener),e.isWidthResizableProperty.lazyLink(this._updateLayoutListener)),Vf(e)&&(e.minimumHeightProperty.lazyLink(this._updateLayoutListener),e.isHeightResizableProperty.lazyLink(this._updateLayoutListener)),this._listenedNodes.add(e)}removeNode(e){e._activeParentLayoutConstraint===this&&(e._activeParentLayoutConstraint=null),e.boundsProperty.unlink(this._updateLayoutListener),e.visibleProperty.unlink(this._updateLayoutListener),vf(e)&&(e.minimumWidthProperty.unlink(this._updateLayoutListener),e.isWidthResizableProperty.unlink(this._updateLayoutListener)),Vf(e)&&(e.minimumHeightProperty.unlink(this._updateLayoutListener),e.isHeightResizableProperty.unlink(this._updateLayoutListener)),this._listenedNodes.delete(e)}layout(){}get isLocked(){return this._layoutLockCount>0}lock(){this._layoutLockCount++}unlock(){this._layoutLockCount--}validateLocalPreferredWidth(e){}validateLocalPreferredHeight(e){}validateLocalPreferredSize(e){}updateLayout(){if(this.isLocked)this._layoutAttemptDuringLock=!0;else{this.lock();do this._layoutAttemptDuringLock=!1,this.layout();while(this._layoutAttemptDuringLock);this.unlock()}}updateLayoutAutomatically(){this._enabled&&this.updateLayout()}createLayoutProxy(e){const t=e.getTrails(i=>i===this.ancestorNode);return t.length===1?eu.pool.create(t[0].removeAncestor()):null}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.updateLayoutAutomatically())}dispose(){const e=[...this._listenedNodes.keys()];for(let t=0;t<e.length;t++)this.removeNode(e[t]);this.finishedLayoutEmitter.dispose()}}const FB=["alignBounds","align","xAlign","yAlign","margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","group"],mV=Cu(Rt);class yV extends mV{constructor(e,t){const i=St()({children:[e]},t),s={sizable:!1};super(s),this._xSet=!1,this._ySet=!1,this._contentBoundsListener=he.noop,this._content=e,this._alignBounds=null,this._xAlign="center",this._yAlign="center",this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._group=null,this._contentBoundsListener=this.invalidateAlignment.bind(this),this._alignBoundsProperty=null,this._alignBoundsPropertyListener=he.noop,vo(i,["alignBounds"],["alignBoundsProperty"]),t!=null&&t.alignBoundsProperty&&(this._alignBoundsProperty=t.alignBoundsProperty,i.alignBounds=this._alignBoundsProperty.value,this._alignBoundsPropertyListener=r=>{this.alignBounds=r},this._alignBoundsProperty.lazyLink(this._alignBoundsPropertyListener)),this.localBounds=new ot(0,0,0,0),this.constraint=new zB(this,e),this._content.boundsProperty.link(this._contentBoundsListener),vf(this._content)&&this._content.minimumWidthProperty.link(this._contentBoundsListener),Vf(this._content)&&this._content.minimumHeightProperty.link(this._contentBoundsListener),this.mutate(i),sr.multilink([this.localPreferredWidthProperty,this.localPreferredHeightProperty],(r,o)=>{if(r!==null||o!==null){const d=this._alignBounds||new ot(0,0,0,0);r&&(d.minX=0,d.maxX=r,this._xSet=!0),o&&(d.minY=0,d.maxY=o,this._ySet=!0),this._alignBounds=d,this.constraint.updateLayout()}})}invalidateAlignment(){this._group&&this._group.onAlignBoxResized(this),this.constraint.updateLayout()}setAlignBounds(e){return this._xSet=!0,this._ySet=!0,this._alignBounds!==e&&(!e||!this._alignBounds||!e.equals(this._alignBounds))&&(this._alignBounds=e,this.constraint.updateLayout()),this}set alignBounds(e){this.setAlignBounds(e)}get alignBounds(){return this.getAlignBounds()}getAlignBounds(){return this._alignBounds}setGroup(e){return this._group!==e&&(this._group&&this._group.removeAlignBox(this),this._group=e,this._group&&this._group.addAlignBox(this)),this}set group(e){this.setGroup(e)}get group(){return this.getGroup()}getGroup(){return this._group}setXAlign(e){return this._xAlign!==e&&(this._xAlign=e,this.invalidateAlignment()),this}set xAlign(e){this.setXAlign(e)}get xAlign(){return this.getXAlign()}getXAlign(){return this._xAlign}setYAlign(e){return this._yAlign!==e&&(this._yAlign=e,this.invalidateAlignment()),this}set yAlign(e){this.setYAlign(e)}get yAlign(){return this.getYAlign()}getYAlign(){return this._yAlign}getAlign(){return this._xAlign}setAlign(e){return this.setXAlign(e),this.setYAlign(e),this}get align(){return this.getAlign()}set align(e){this.setAlign(e)}setMargin(e){return(this._leftMargin!==e||this._rightMargin!==e||this._topMargin!==e||this._bottomMargin!==e)&&(this._leftMargin=this._rightMargin=this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}set margin(e){this.setMargin(e)}get margin(){return this.getMargin()}getMargin(){return this._leftMargin}setXMargin(e){return(this._leftMargin!==e||this._rightMargin!==e)&&(this._leftMargin=this._rightMargin=e,this.invalidateAlignment()),this}set xMargin(e){this.setXMargin(e)}get xMargin(){return this.getXMargin()}getXMargin(){return this._leftMargin}setYMargin(e){return(this._topMargin!==e||this._bottomMargin!==e)&&(this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}set yMargin(e){this.setYMargin(e)}get yMargin(){return this.getYMargin()}getYMargin(){return this._topMargin}setLeftMargin(e){return this._leftMargin!==e&&(this._leftMargin=e,this.invalidateAlignment()),this}set leftMargin(e){this.setLeftMargin(e)}get leftMargin(){return this.getLeftMargin()}getLeftMargin(){return this._leftMargin}setRightMargin(e){return this._rightMargin!==e&&(this._rightMargin=e,this.invalidateAlignment()),this}set rightMargin(e){this.setRightMargin(e)}get rightMargin(){return this.getRightMargin()}getRightMargin(){return this._rightMargin}setTopMargin(e){return this._topMargin!==e&&(this._topMargin=e,this.invalidateAlignment()),this}set topMargin(e){this.setTopMargin(e)}get topMargin(){return this.getTopMargin()}getTopMargin(){return this._topMargin}setBottomMargin(e){return this._bottomMargin!==e&&(this._bottomMargin=e,this.invalidateAlignment()),this}set bottomMargin(e){this.setBottomMargin(e)}get bottomMargin(){return this.getBottomMargin()}getBottomMargin(){return this._bottomMargin}getContent(){return this._content}get content(){return this.getContent()}getContentBounds(){const e=this._content.bounds;return new ot(e.left-this._leftMargin,e.top-this._topMargin,e.right+this._rightMargin,e.bottom+this._bottomMargin)}getMinimumWidth(){return(this._xAlign==="stretch"&&Nc(this._content)?this._content.minimumWidth??0:this._content.width)+this._leftMargin+this._rightMargin}getMinimumHeight(){return(this._yAlign==="stretch"&&bf(this._content)?this._content.minimumHeight??0:this._content.height)+this._topMargin+this._bottomMargin}setAdjustedLocalBounds(e){if(this._xSet&&this._ySet)this.localBounds=e;else if(this._xSet){const t=this.getContentBounds();this.localBounds=new ot(e.minX,t.minY,e.maxX,t.maxY)}else if(this._ySet){const t=this.getContentBounds();this.localBounds=new ot(t.minX,e.minY,t.maxX,e.maxY)}else this.localBounds=this.getContentBounds()}dispose(){this._alignBoundsProperty&&this._alignBoundsProperty.unlink(this._alignBoundsPropertyListener),this._content.boundsProperty.unlink(this._contentBoundsListener),vf(this._content)&&this._content.minimumWidthProperty.unlink(this._contentBoundsListener),Vf(this._content)&&this._content.minimumHeightProperty.unlink(this._contentBoundsListener),this._content=new Rt,this.group=null,this.constraint.dispose(),super.dispose()}mutate(e){return super.mutate(e)}}class zB extends mh{constructor(e,t){super(e),this.alignBox=e,this.content=t,this.addNode(t),e.isWidthResizableProperty.lazyLink(this._updateLayoutListener),e.isHeightResizableProperty.lazyLink(this._updateLayoutListener)}updateProperty(e,t){const i=this.content[e],s=this.alignBox.localBounds[e]+t;Math.abs(i-s)>1e-5&&(this.content[e]=s)}layout(){super.layout();const e=this.alignBox,t=this.content;if(!t.bounds.isValid())return;const i=e.leftMargin+e.rightMargin,s=e.topMargin+e.bottomMargin;if(e.alignBounds!==null)e.setAdjustedLocalBounds(e.alignBounds);else{const d=t.width+i,g=t.height+s;e.setAdjustedLocalBounds(new ot(0,0,d,g))}const r=isFinite(t.width)?(Nc(t)?t.minimumWidth||0:t.width)+i:null,o=isFinite(t.height)?(bf(t)?t.minimumHeight||0:t.height)+s:null;t.localBounds.isEmpty()||(e.xAlign==="center"?this.updateProperty("centerX",(e.leftMargin-e.rightMargin)/2):e.xAlign==="left"?this.updateProperty("left",e.leftMargin):e.xAlign==="right"?this.updateProperty("right",-e.rightMargin):e.xAlign==="stretch"&&(t.preferredWidth=e.localWidth-e.leftMargin-e.rightMargin,this.updateProperty("left",e.leftMargin)),e.yAlign==="center"?this.updateProperty("centerY",(e.topMargin-e.bottomMargin)/2):e.yAlign==="top"?this.updateProperty("top",e.topMargin):e.yAlign==="bottom"?this.updateProperty("bottom",-e.bottomMargin):e.yAlign==="stretch"&&(t.preferredHeight=e.localHeight-e.topMargin-e.bottomMargin,this.updateProperty("top",e.topMargin))),e.localMinimumWidth=e.widthSizable?r:e.localWidth,e.localMinimumHeight=e.heightSizable?o:e.localHeight}}yV.prototype._mutatorKeys=FB.concat(mV.prototype._mutatorKeys);const HB=["margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","minContentWidth","minContentHeight","maxContentWidth","maxContentHeight"],KB=mr(n=>class extends n{constructor(...t){super(...t),this._leftMargin=null,this._rightMargin=null,this._topMargin=null,this._bottomMargin=null,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter=new Hi}mutateConfigurable(t){vo(t,["margin"],["xMargin","yMargin"]),vo(t,["xMargin"],["leftMargin","rightMargin"]),vo(t,["yMargin"],["topMargin","bottomMargin"])}setConfigToBaseDefault(){this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter.emit()}setConfigToInherit(t){(!t||t.leftMargin===void 0)&&(this._leftMargin=null),(!t||t.rightMargin===void 0)&&(this._rightMargin=null),(!t||t.topMargin===void 0)&&(this._topMargin=null),(!t||t.bottomMargin===void 0)&&(this._bottomMargin=null),(!t||t.minContentWidth===void 0)&&(this._minContentWidth=null),(!t||t.minContentHeight===void 0)&&(this._minContentHeight=null),(!t||t.maxContentWidth===void 0)&&(this._maxContentWidth=null),(!t||t.maxContentHeight===void 0)&&(this._maxContentHeight=null),this.changedEmitter.emit()}get leftMargin(){return this._leftMargin}set leftMargin(t){this._leftMargin!==t&&(this._leftMargin=t,this.changedEmitter.emit())}get rightMargin(){return this._rightMargin}set rightMargin(t){this._rightMargin!==t&&(this._rightMargin=t,this.changedEmitter.emit())}get topMargin(){return this._topMargin}set topMargin(t){this._topMargin!==t&&(this._topMargin=t,this.changedEmitter.emit())}get bottomMargin(){return this._bottomMargin}set bottomMargin(t){this._bottomMargin!==t&&(this._bottomMargin=t,this.changedEmitter.emit())}get xMargin(){return this._leftMargin}set xMargin(t){(this._leftMargin!==t||this._rightMargin!==t)&&(this._leftMargin=t,this._rightMargin=t,this.changedEmitter.emit())}get yMargin(){return this._topMargin}set yMargin(t){(this._topMargin!==t||this._bottomMargin!==t)&&(this._topMargin=t,this._bottomMargin=t,this.changedEmitter.emit())}get margin(){return this._topMargin}set margin(t){(this._leftMargin!==t||this._rightMargin!==t||this._topMargin!==t||this._bottomMargin!==t)&&(this._leftMargin=t,this._rightMargin=t,this._topMargin=t,this._bottomMargin=t,this.changedEmitter.emit())}get minContentWidth(){return this._minContentWidth}set minContentWidth(t){this._minContentWidth!==t&&(this._minContentWidth=t,this.changedEmitter.emit())}get minContentHeight(){return this._minContentHeight}set minContentHeight(t){this._minContentHeight!==t&&(this._minContentHeight=t,this.changedEmitter.emit())}get maxContentWidth(){return this._maxContentWidth}set maxContentWidth(t){this._maxContentWidth!==t&&(this._maxContentWidth=t,this.changedEmitter.emit())}get maxContentHeight(){return this._maxContentHeight}set maxContentHeight(t){this._maxContentHeight!==t&&(this._maxContentHeight=t,this.changedEmitter.emit())}}),oy=["orientation","align","cellAlign","stretch","grow"].concat(HB),_V=mr(n=>class extends KB(n){constructor(...t){super(...t),this._orientation=jt.HORIZONTAL,this._align=null,this._cellAlign=null,this._stretch=null,this._grow=null,this.orientationChangedEmitter=new Hi}mutateConfigurable(t){super.mutateConfigurable(t),Tv(this,oy,t)}setConfigToBaseDefault(){this._align=Ds.CENTER,this._cellAlign=Ds.START,this._stretch=!1,this._grow=0,super.setConfigToBaseDefault()}setConfigToInherit(t){(!t||t.align===void 0)&&(this._align=null),(!t||t.cellAlign===void 0)&&(this._cellAlign=null),(!t||t.stretch===void 0)&&(this._stretch=null),(!t||t.grow===void 0)&&(this._grow=null),super.setConfigToInherit(t)}get orientation(){return this._orientation===jt.HORIZONTAL?"horizontal":"vertical"}set orientation(t){const i=t==="horizontal"?jt.HORIZONTAL:jt.VERTICAL;this._orientation!==i&&(this._orientation=i,this.orientationChangedEmitter.emit(),this.changedEmitter.emit())}get align(){return Ds.internalToAlign(this._orientation.opposite,this._align)}set align(t){const i=Ds.alignToInternal(this._orientation.opposite,t);this._align!==i&&(this._align=i,this.changedEmitter.emit())}get cellAlign(){return Ds.internalToAlign(this._orientation,this._cellAlign)}set cellAlign(t){const i=Ds.alignToInternal(this._orientation,t);this._cellAlign!==i&&(this._cellAlign=i,this.changedEmitter.emit())}get stretch(){return this._stretch}set stretch(t){this._stretch!==t&&(this._stretch=t,this.changedEmitter.emit())}get grow(){return this._grow}set grow(t){this._grow!==t&&(this._grow=t,this.changedEmitter.emit())}});class AV{constructor(e,t,i){i?(this.layoutProxyProperty=null,this._proxy=i):(this._proxy=null,this.layoutProxyProperty=new OB(e.ancestorNode,t,{onTransformChange:()=>e.updateLayoutAutomatically()}),this.layoutProxyProperty.link(s=>{this._proxy=s,e.updateLayoutAutomatically()})),this._constraint=e,this._node=t,this.layoutOptionsListener=this.onLayoutOptionsChange.bind(this),this.node.layoutOptionsChangedEmitter.addListener(this.layoutOptionsListener)}onLayoutOptionsChange(){}get node(){return this._node}isConnected(){return this._proxy!==null}get proxy(){return this._proxy}isSizable(e){return e===jt.HORIZONTAL?this.proxy.widthSizable:this.proxy.heightSizable}dispose(){this.layoutProxyProperty&&this.layoutProxyProperty.dispose(),this.node.layoutOptionsChangedEmitter.removeListener(this.layoutOptionsListener)}}class ly extends Al{constructor(e){super(),this.image=e,this.canvasPattern=Sc.createPattern(e,"repeat")}getCanvasStyle(){return this.canvasPattern}createSVGPaint(e){return Lc.pool.create(this)}toString(){return`new phet.scenery.Pattern( $( '<img src="${this.image.src}"/>' )[0] )`}}ly.prototype.isPattern=!0;const UB=["rectBounds","rectSize","rectX","rectY","rectWidth","rectHeight","cornerRadius","cornerXRadius","cornerYRadius"],bV=Cu(Cn);class js extends bV{constructor(e,t,i,s,r,o,d){const g={sizable:!1};super(null,g);let y={};this._rectX=0,this._rectY=0,this._rectWidth=0,this._rectHeight=0,this._cornerXRadius=0,this._cornerYRadius=0,typeof e=="object"?e instanceof ot?typeof t!="number"?y=Qi(y,{rectBounds:e},t):y=Qi(y,{rectBounds:e,cornerXRadius:t,cornerYRadius:i},s):y=Qi(y,e):o===void 0?y=Qi(y,{rectX:e,rectY:t,rectWidth:i,rectHeight:s},r):y=Qi(y,{rectX:e,rectY:t,rectWidth:i,rectHeight:s,cornerXRadius:r,cornerYRadius:o},d),this.localPreferredWidthProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localPreferredHeightProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localMinimumWidthProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localMinimumHeightProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.mutate(y)}getMaximumArcSize(){return Math.min(this._rectWidth/2,this._rectHeight/2)}getStrokeRendererBitmask(){let e=super.getStrokeRendererBitmask();const t=this.getStroke();return t&&!(t instanceof Do)&&!(t instanceof ly)&&!this.hasLineDash()&&(this.getLineJoin()==="miter"||this.getLineJoin()==="round"&&Xt.borderRadius)&&(e|=Le.bitmaskDOM),this.hasStroke()||(e|=Le.bitmaskWebGL),e}getPathRendererBitmask(){let e=Le.bitmaskCanvas|Le.bitmaskSVG;const t=this.getMaximumArcSize();return(!this.hasStroke()||this.getLineWidth()<=this._rectHeight&&this.getLineWidth()<=this._rectWidth)&&(!this.isRounded()||Xt.borderRadius&&this._cornerXRadius===this._cornerYRadius)&&this._cornerYRadius<=t&&this._cornerXRadius<=t&&(e|=Le.bitmaskDOM),!this.hasStroke()&&!this.isRounded()&&(e|=Le.bitmaskWebGL),e}setRect(e,t,i,s,r,o){const d=r!==void 0,g=o!==void 0;if(this._rectX===e&&this._rectY===t&&this._rectWidth===i&&this._rectHeight===s&&(!d||this._cornerXRadius===r)&&(!g||this._cornerYRadius===o))return this;this._rectX=e,this._rectY=t,this._rectWidth=i,this._rectHeight=s,this._cornerXRadius=d?r:this._cornerXRadius,this._cornerYRadius=g?o:this._cornerYRadius;const y=this._drawables.length;for(let S=0;S<y;S++)this._drawables[S].markDirtyRectangle();return this.invalidateRectangle(),this}setRectX(e){if(this._rectX!==e){this._rectX=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyX();this.invalidateRectangle()}return this}set rectX(e){this.setRectX(e)}get rectX(){return this.getRectX()}getRectX(){return this._rectX}setRectY(e){if(this._rectY!==e){this._rectY=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyY();this.invalidateRectangle()}return this}set rectY(e){this.setRectY(e)}get rectY(){return this.getRectY()}getRectY(){return this._rectY}setRectWidth(e){if(this._rectWidth!==e){this._rectWidth=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyWidth();this.invalidateRectangle()}return this}set rectWidth(e){this.setRectWidth(e)}get rectWidth(){return this.getRectWidth()}getRectWidth(){return this._rectWidth}setRectHeight(e){if(this._rectHeight!==e){this._rectHeight=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyHeight();this.invalidateRectangle()}return this}set rectHeight(e){this.setRectHeight(e)}get rectHeight(){return this.getRectHeight()}getRectHeight(){return this._rectHeight}setCornerXRadius(e){if(this._cornerXRadius!==e){this._cornerXRadius=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyCornerXRadius();this.invalidateRectangle()}return this}set cornerXRadius(e){this.setCornerXRadius(e)}get cornerXRadius(){return this.getCornerXRadius()}getCornerXRadius(){return this._cornerXRadius}setCornerYRadius(e){if(this._cornerYRadius!==e){this._cornerYRadius=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyCornerYRadius();this.invalidateRectangle()}return this}set cornerYRadius(e){this.setCornerYRadius(e)}get cornerYRadius(){return this.getCornerYRadius()}getCornerYRadius(){return this._cornerYRadius}setRectBounds(e){return this.setRect(e.x,e.y,e.width,e.height),this}set rectBounds(e){this.setRectBounds(e)}get rectBounds(){return this.getRectBounds()}getRectBounds(){return ot.rect(this._rectX,this._rectY,this._rectWidth,this._rectHeight)}setRectSize(e){return this.setRectWidth(e.width),this.setRectHeight(e.height),this}set rectSize(e){this.setRectSize(e)}get rectSize(){return this.getRectSize()}getRectSize(){return new Ws(this._rectWidth,this._rectHeight)}setRectWidthFromRight(e){if(this._rectWidth!==e){const t=this._rectX+this._rectWidth;this.setRectWidth(e),this.setRectX(t-e)}return this}set rectWidthFromRight(e){this.setRectWidthFromRight(e)}get rectWidthFromRight(){return this.getRectWidth()}setRectHeightFromBottom(e){if(this._rectHeight!==e){const t=this._rectY+this._rectHeight;this.setRectHeight(e),this.setRectY(t-e)}return this}set rectHeightFromBottom(e){this.setRectHeightFromBottom(e)}get rectHeightFromBottom(){return this.getRectHeight()}isRounded(){return this._cornerXRadius!==0&&this._cornerYRadius!==0}computeShapeBounds(){let e=new ot(this._rectX,this._rectY,this._rectX+this._rectWidth,this._rectY+this._rectHeight);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}createRectangleShape(){if(this.isRounded()){const e=Math.min(this._rectWidth/2,this._rectHeight/2);return Wt.roundRectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight,Math.min(e,this._cornerXRadius),Math.min(e,this._cornerYRadius)).makeImmutable()}else return Wt.rectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight).makeImmutable()}invalidateRectangle(){this._shape=null,this.invalidatePath(),this.invalidateSupportedRenderers()}updatePreferredSizes(){let e=this.localPreferredWidth,t=this.localPreferredHeight;e!==null&&(e=Math.max(e,this.localMinimumWidth||0)),t!==null&&(t=Math.max(t,this.localMinimumHeight||0)),e!==null&&(this.rectWidth=this.hasStroke()?e-this.lineWidth:e),t!==null&&(this.rectHeight=this.hasStroke()?t-this.lineWidth:t)}invalidateStroke(){super.invalidateStroke(),this.updatePreferredSizes()}containsPointSelf(e){const t=this._rectX,i=this._rectY,s=this._rectWidth,r=this._rectHeight,o=this._cornerXRadius,d=this._cornerYRadius,g=this.getLineWidth()/2;let y=!0;if(this._strokePickable){const S=this.isRounded();if(!S&&this.getLineJoin()==="bevel")return super.containsPointSelf(e);const T=this.getLineJoin()==="miter"&&!S;y=y&&js.intersects(t-g,i-g,s+2*g,r+2*g,T?0:o+g,T?0:d+g,e)}return this._fillPickable?this._strokePickable?y:js.intersects(t,i,s,r,o,d,e):this._strokePickable?y&&!js.intersects(t+g,i+g,s-2*g,r-2*g,o-g,d-g,e):!1}intersectsBoundsSelf(e){return!this.computeShapeBounds().intersection(e).isEmpty()}canvasPaintSelf(e,t){t0.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return pV.createFromPool(e,t)}createSVGDrawable(e,t){return gV.createFromPool(e,t)}createCanvasDrawable(e,t){return t0.createFromPool(e,t)}createWebGLDrawable(e,t){return ay.createFromPool(e,t)}setShape(e){if(e!==null)throw new Error("Cannot set the shape of a Rectangle to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createRectangleShape()),this._shape}hasShape(){return!0}setShapeProperty(e){if(e!==null)throw new Error("Cannot set the shapeProperty of a Rectangle to something non-null, it handles this itself");return this}setCornerRadius(e){return this.setCornerXRadius(e),this.setCornerYRadius(e),this}set cornerRadius(e){this.setCornerRadius(e)}get cornerRadius(){return this.getCornerRadius()}getCornerRadius(){return this._cornerXRadius}mutate(e){return super.mutate(e)}static intersects(e,t,i,s,r,o,d){const g=d.x>=e&&d.x<=e+i&&d.y>=t&&d.y<=t+s;if(!g||r<=0||o<=0)return g;const y=Math.min(i/2,s/2);r=Math.min(y,r),o=Math.min(y,o);let S,T,L=!1;if(d.x<e+i/2?(S=e+r,L=L||d.x>=S):(S=e+i-r,L=L||d.x<=S),L||(d.y<t+s/2?(T=t+o,L=L||d.y>=T):(T=t+s-o,L=L||d.y<=T),L))return!0;let x=d.x-S,A=d.y-T;return x/=r,A/=o,x*=x,A*=A,x+A<=1}static rect(e,t,i,s,r){return new js(e,t,i,s,0,0,r)}static roundedRect(e,t,i,s,r,o,d){return new js(e,t,i,s,r,o,d)}static bounds(e,t){return new js(e.minX,e.minY,e.width,e.height,t)}static roundedBounds(e,t,i,s){return new js(e.minX,e.minY,e.width,e.height,t,i,s)}static dimension(e,t){return new js(0,0,e.width,e.height,0,0,t)}}js.prototype._mutatorKeys=[...UB,...bV.prototype._mutatorKeys];js.prototype.drawableMarkFlags=Cn.prototype.drawableMarkFlags.concat(["x","y","width","height","cornerXRadius","cornerYRadius"]).filter(n=>n!=="shape");class YB extends ly{constructor(e,t,i,s,r,o,d=mt.IDENTITY){const g=document.createElement("img");function y(T,L,x,A,Q){g.src=T.toDataURL()}new Rt({scale:t,children:[e]}).toCanvas(y,-i*t,-s*t,r*t,o*t),super(g),this.setTransformMatrix(d.timesMatrix(mt.scaling(1/t)))}}class vV extends AV{constructor(e,t,i){super(e,t,i),this.preferredSizeSet=new hc(!1,!1),this.lastAvailableBounds=ot.NOTHING.copy(),this.lastUsedBounds=ot.NOTHING.copy(),this._marginConstraint=e}reposition(e,t,i,s,r,o){const d=s&&this.isSizable(e)?t:this.getMinimumSize(e);this.attemptPreferredSize(e,d),o===Ds.ORIGIN?this.positionOrigin(e,i+r):this.positionStart(e,i+(t-this.getCellBounds()[e.size])*o.padRatio);const g=this.getCellBounds();return this.lastAvailableBounds[e.minCoordinate]=i,this.lastAvailableBounds[e.maxCoordinate]=i+t,this.lastUsedBounds.set(g),g}get effectiveLeftMargin(){return this._leftMargin!==null?this._leftMargin:this._marginConstraint._leftMargin}get effectiveRightMargin(){return this._rightMargin!==null?this._rightMargin:this._marginConstraint._rightMargin}get effectiveTopMargin(){return this._topMargin!==null?this._topMargin:this._marginConstraint._topMargin}get effectiveBottomMargin(){return this._bottomMargin!==null?this._bottomMargin:this._marginConstraint._bottomMargin}getEffectiveMinMargin(e){return e===jt.HORIZONTAL?this.effectiveLeftMargin:this.effectiveTopMargin}getEffectiveMaxMargin(e){return e===jt.HORIZONTAL?this.effectiveRightMargin:this.effectiveBottomMargin}get effectiveMinContentWidth(){return this._minContentWidth!==null?this._minContentWidth:this._marginConstraint._minContentWidth}get effectiveMinContentHeight(){return this._minContentHeight!==null?this._minContentHeight:this._marginConstraint._minContentHeight}getEffectiveMinContent(e){return e===jt.HORIZONTAL?this.effectiveMinContentWidth:this.effectiveMinContentHeight}get effectiveMaxContentWidth(){return this._maxContentWidth!==null?this._maxContentWidth:this._marginConstraint._maxContentWidth}get effectiveMaxContentHeight(){return this._maxContentHeight!==null?this._maxContentHeight:this._marginConstraint._maxContentHeight}getEffectiveMaxContent(e){return e===jt.HORIZONTAL?this.effectiveMaxContentWidth:this.effectiveMaxContentHeight}getMinimumSize(e){return this.getEffectiveMinMargin(e)+Math.max(this.proxy.getMinimum(e),this.getEffectiveMinContent(e)||0)+this.getEffectiveMaxMargin(e)}getMaximumSize(e){return this.getEffectiveMinMargin(e)+(this.getEffectiveMaxContent(e)||Number.POSITIVE_INFINITY)+this.getEffectiveMaxMargin(e)}attemptPreferredSize(e,t){if(this.proxy[e.sizable]){const i=this.getMinimumSize(e),s=this.getMaximumSize(e);t=qs(t,i,s);let r=t-this.getEffectiveMinMargin(e)-this.getEffectiveMaxMargin(e);const o=this.proxy.getMax(e);o!==null&&(r=Math.min(o,r)),this._marginConstraint.setProxyPreferredSize(e,this.proxy,r),this.preferredSizeSet.set(e,!0)}}unsetPreferredSize(e){this.proxy[e.sizable]&&this._marginConstraint.setProxyPreferredSize(e,this.proxy,null)}positionStart(e,t){const i=this.getEffectiveMinMargin(e)+t;this._marginConstraint.setProxyMinSide(e,this.proxy,i)}positionOrigin(e,t){this._marginConstraint.setProxyOrigin(e,this.proxy,t)}getOriginBounds(){return this.getCellBounds().shiftedXY(-this.proxy.x,-this.proxy.y)}getCellBounds(){return this.proxy.bounds.withOffsets(this.effectiveLeftMargin,this.effectiveTopMargin,this.effectiveRightMargin,this.effectiveBottomMargin)}dispose(){jt.enumeration.values.forEach(e=>{this.preferredSizeSet.get(e)&&this.unsetPreferredSize(e)}),super.dispose()}static createHelperNode(e,t,i){const s=new Rt,r=.4,o=Wt.union(e.map(x=>Wt.bounds(x.lastAvailableBounds))),d=Wt.union(e.map(x=>Wt.bounds(x.lastUsedBounds))),g=Wt.union(e.map(x=>Wt.bounds(x.proxy.bounds))),y=Wt.bounds(t).shapeDifference(o),S=o.shapeDifference(d),T=d.shapeDifference(g),L=(x,A,Q)=>{const z=new yn(x,{font:new Xs({size:6,family:"monospace"}),fill:A}),G=js.bounds(z.bounds,{fill:Q,children:[z]});return new YB(G,4,Math.floor(G.left),Math.ceil(G.top+1),Math.floor(G.width),Math.floor(G.height-2),mt.rotation2(-Math.PI/4))};return s.addChild(new Cn(y,{fill:L("spacing","#000","#fff"),opacity:.6})),s.addChild(new Cn(S,{fill:L("empty","#aaa","#000"),opacity:.6})),s.addChild(new Cn(T,{fill:L("margin","#600","#f00"),opacity:.6})),s.addChild(js.bounds(t,{stroke:"white",lineDash:[2,2],lineDashOffset:2,lineWidth:r})),s.addChild(js.bounds(t,{stroke:"black",lineDash:[2,2],lineWidth:r})),e.forEach(x=>{s.addChild(js.bounds(x.getCellBounds(),{stroke:"rgba(0,255,0,1)",lineWidth:r}))}),e.forEach(x=>{s.addChild(js.bounds(x.proxy.bounds,{stroke:"rgba(255,0,0,1)",lineWidth:r}))}),e.forEach(x=>{const A=x.getCellBounds(),Q=new ih({tandem:rt.OPT_OUT});s.addChild(js.bounds(A,{inputListeners:[Q]}));let z=i(x);x.effectiveLeftMargin&&(z+=`leftMargin: ${x.effectiveLeftMargin}
`),x.effectiveRightMargin&&(z+=`rightMargin: ${x.effectiveRightMargin}
`),x.effectiveTopMargin&&(z+=`topMargin: ${x.effectiveTopMargin}
`),x.effectiveBottomMargin&&(z+=`bottomMargin: ${x.effectiveBottomMargin}
`),x.effectiveMinContentWidth&&(z+=`minContentWidth: ${x.effectiveMinContentWidth}
`),x.effectiveMinContentHeight&&(z+=`minContentHeight: ${x.effectiveMinContentHeight}
`),x.effectiveMaxContentWidth&&(z+=`maxContentWidth: ${x.effectiveMaxContentWidth}
`),x.effectiveMaxContentHeight&&(z+=`maxContentHeight: ${x.effectiveMaxContentHeight}
`),z+=`layoutOptions: ${JSON.stringify(x.node.layoutOptions,null,2).replace(/ /g,"&nbsp;")}
`;const G=new Or(z.trim().replace(/\n/g,"<br>"),{font:new Xs({size:12})}),re=js.bounds(G.bounds.dilated(3),{fill:"rgba(255,255,255,0.8)",children:[G],leftTop:A.leftTop});s.addChild(re),Q.isOverProperty.link(ne=>{re.visible=ne})}),s}}[...oy];class WB extends _V(vV){constructor(e,t,i){super(e,t,i),this.size=0,this._isSeparator=!1,this.flowConstraint=e,this.orientation=e.orientation,this.onLayoutOptionsChange(!0)}get effectiveAlign(){return this._align!==null?this._align:this.flowConstraint._align}get effectiveCellAlign(){return this._cellAlign!==null?this._cellAlign:this.flowConstraint._cellAlign}get effectiveStretch(){return this._stretch!==null?this._stretch:this.flowConstraint._stretch}get effectiveGrow(){return this._grow!==null?this._grow:this.flowConstraint._grow}onLayoutOptionsChange(e=!1){this.node.layoutOptions&&this.setOptions(this.node.layoutOptions),super.onLayoutOptionsChange(),e||this.flowConstraint.updateLayoutAutomatically()}setOptions(e){const t=St()({isSeparator:!1},e);this._isSeparator=t.isSeparator,this.setConfigToInherit(t),this.mutateConfigurable(t)}}class GB{initializeLayoutLine(){this.min=0,this.max=Number.POSITIVE_INFINITY,this.minOrigin=Number.POSITIVE_INFINITY,this.maxOrigin=Number.NEGATIVE_INFINITY,this.size=0,this.position=0}hasOrigin(){return isFinite(this.minOrigin)&&isFinite(this.maxOrigin)}}class Zl extends GB{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return this.orientation=e,this.cells=t,this.initializeLayoutLine(),this}getMinimumSize(e){return(this.cells.length-1)*e+he.sum(this.cells.map(t=>t.getMinimumSize(this.orientation)))}freeToPool(){Zl.pool.freeToPool(this)}clean(){this.cells.length=0,this.freeToPool()}}Zl.pool=new Fs(Zl,{defaultArguments:[jt.HORIZONTAL,[]]});const Ub=1e-9;class XB extends mh{constructor(e,t){const i=St()({preferredWidthProperty:new Ni(null),preferredHeightProperty:new Ni(null),minimumWidthProperty:new Ni(null),minimumHeightProperty:new Ni(null),layoutOriginProperty:new Ni(Ne.ZERO)},t);super(e),this._excludeInvisible=!0,this.layoutBoundsProperty=new Li(ot.NOTHING,{valueComparisonStrategy:"equalsFunction"}),this.preferredWidthProperty=i.preferredWidthProperty,this.preferredHeightProperty=i.preferredHeightProperty,this.minimumWidthProperty=i.minimumWidthProperty,this.minimumHeightProperty=i.minimumHeightProperty,this.layoutOriginProperty=i.layoutOriginProperty,this.preferredWidthProperty.lazyLink(this._updateLayoutListener),this.preferredHeightProperty.lazyLink(this._updateLayoutListener),this.layoutOriginProperty.lazyLink(this._updateLayoutListener)}filterLayoutCells(e){return e.filter(t=>t.isConnected()&&t.proxy.bounds.isValid()&&(!this.excludeInvisible||t.node.visible))}get excludeInvisible(){return this._excludeInvisible}set excludeInvisible(e){this._excludeInvisible!==e&&(this._excludeInvisible=e,this.updateLayoutAutomatically())}setProxyPreferredSize(e,t,i){t[e.preferredSize]=i}setProxyMinSide(e,t,i){Math.abs(t[e.minSide]-i)>Ub&&(t[e.minSide]=i)}setProxyOrigin(e,t,i){Math.abs(t[e.coordinate]-i)>Ub&&(t[e.coordinate]=i)}dispose(){this.preferredWidthProperty.unlink(this._updateLayoutListener),this.preferredHeightProperty.unlink(this._updateLayoutListener),this.layoutOriginProperty.unlink(this._updateLayoutListener),super.dispose()}}const VV=[...oy,"spacing","lineSpacing","justify","justifyLines","wrap","excludeInvisible"];class hy extends _V(XB){constructor(e,t){super(e,t),this.cells=[],this._justify=Vs.SPACE_BETWEEN,this._justifyLines=null,this._wrap=!1,this._spacing=0,this._lineSpacing=0,this.displayedCells=[],this.setConfigToBaseDefault(),this.mutateConfigurable(t),Tv(this,VV,t),this.changedEmitter.addListener(this._updateLayoutListener),this.orientationChangedEmitter.addListener(()=>this.cells.forEach(i=>{i.orientation=this.orientation}))}updateSeparatorVisibility(){let e=0;for(;e<this.cells.length;e++){const i=this.cells[e];if(i._isSeparator)i.node.visible=!1;else if(i.node.visible&&i.node.boundsProperty.value.isValid())break}let t=!1;for(let i=this.cells.length-1;i>e;i--){const s=this.cells[i];s._isSeparator?(s.node.visible=t,t=!1):s.node.visible&&s.node.boundsProperty.value.isValid()&&(t=!0)}}layout(){super.layout();const e=this._orientation,t=this._orientation.opposite;this.updateSeparatorVisibility();const i=this.filterLayoutCells(this.cells);if(this.displayedCells=i,!i.length){this.layoutBoundsProperty.value=ot.NOTHING,this.minimumWidthProperty.value=null,this.minimumHeightProperty.value=null;return}let s=this.getPreferredProperty(e).value;const r=this.getPreferredProperty(t).value,o=Math.max(...i.map(N=>N.getMinimumSize(e)||0));o>(s||Number.POSITIVE_INFINITY)&&(s=o);const d=[];if(this.wrap){let N=[],Ie=s||Number.POSITIVE_INFINITY;for(;i.length;){const $e=i.shift(),Ee=$e.getMinimumSize(e);N.length===0?(N.push($e),Ie-=Ee):this.spacing+Ee<=Ie+1e-7?(N.push($e),Ie-=this.spacing+Ee):(d.push(Zl.pool.create(e,N)),Ie=s||Number.POSITIVE_INFINITY,N=[$e],Ie-=Ee)}N.length&&d.push(Zl.pool.create(e,N))}else d.push(Zl.pool.create(e,i));d.forEach(N=>{N.cells.forEach(Ie=>{if(N.min=Math.max(N.min,Ie.getMinimumSize(t)),N.max=Math.min(N.max,Ie.getMaximumSize(t)),Ie.effectiveAlign===Ds.ORIGIN){const $e=Ie.getOriginBounds();N.minOrigin=Math.min($e[t.minCoordinate],N.minOrigin),N.maxOrigin=Math.max($e[t.maxCoordinate],N.maxOrigin)}}),isFinite(N.minOrigin)&&isFinite(N.maxOrigin)?N.size=Math.max(N.min,N.maxOrigin-N.minOrigin):N.size=N.min});const g=Math.max(...d.map(N=>N.getMinimumSize(this.spacing))),y=he.sum(d.map(N=>N.size))+(d.length-1)*this.lineSpacing,S=this.wrap?o:g,T=Math.max(g,s||0),L=Math.max(y,r||0),x=this.layoutOriginProperty.value[e.coordinate],A=this.layoutOriginProperty.value[e.opposite.coordinate];d.forEach(N=>{const Ie=he.sum(N.cells.map(it=>it.getMinimumSize(e))),$e=this.spacing*(N.cells.length-1);let Ee=T-Ie-$e;N.cells.forEach(it=>{it.size=it.getMinimumSize(e)});let Je;for(;Ee>1e-7&&(Je=N.cells.filter(it=>it.effectiveGrow!==0&&it.size<it.getMaximumSize(e)-1e-7)).length;){const it=he.sum(Je.map(Ct=>Ct.effectiveGrow)),nt=Math.min(Math.min(...Je.map(Ct=>(Ct.getMaximumSize(e)-Ct.size)/Ct.effectiveGrow)),Ee/it);Je.forEach(Ct=>{Ct.size+=nt*Ct.effectiveGrow}),Ee-=nt*it}const Ge=this._justify.spacingFunctionFactory(Ee,N.cells.length);let _t=x;N.cells.forEach((it,nt)=>{_t+=Ge(nt),nt>0&&(_t+=this.spacing),it.reposition(e,it.size,_t,!0,0,it.effectiveCellAlign),_t+=it.size})});const Q=L-y,z=(d[0].hasOrigin()?d[0].minOrigin:0)+A;let G=z;if(this._justifyLines===null)d.forEach(N=>{N.size+=Q/d.length}),d.forEach(N=>{N.position=G,G+=N.size+this.lineSpacing});else{const N=this._justifyLines.spacingFunctionFactory(Q,d.length);d.forEach((Ie,$e)=>{G+=N($e),Ie.position=G,G+=Ie.size+this.lineSpacing})}d.forEach(N=>N.cells.forEach(Ie=>{Ie.reposition(t,N.size,N.position,Ie.effectiveStretch,-N.minOrigin,Ie.effectiveAlign)}));const re=x,ne=x+T,ae=z,pe=z+L;this.layoutBoundsProperty.value=ot.oriented(e,re,ae,ne,pe),this.minimumWidthProperty.value=e===jt.HORIZONTAL?S:y,this.minimumHeightProperty.value=e===jt.HORIZONTAL?y:S,this.finishedLayoutEmitter.emit(),d.forEach(N=>N.clean())}get justify(){return Vs.internalToJustify(this._orientation,this._justify)}set justify(e){const t=Vs.justifyToInternal(this._orientation,e);this._justify!==t&&(this._justify=t,this.updateLayoutAutomatically())}get justifyLines(){return this._justifyLines===null?null:Vs.internalToJustify(this._orientation,this._justifyLines)}set justifyLines(e){const t=e===null?null:Vs.justifyToInternal(this._orientation.opposite,e);this._justifyLines!==t&&(this._justifyLines=t,this.updateLayoutAutomatically())}get wrap(){return this._wrap}set wrap(e){this._wrap!==e&&(this._wrap=e,this.updateLayoutAutomatically())}get spacing(){return this._spacing}set spacing(e){this._spacing!==e&&(this._spacing=e,this.updateLayoutAutomatically())}get lineSpacing(){return this._lineSpacing}set lineSpacing(e){this._lineSpacing!==e&&(this._lineSpacing=e,this.updateLayoutAutomatically())}insertCell(e,t){t.orientation=this.orientation,this.cells.splice(e,0,t),this.addNode(t.node),t.changedEmitter.addListener(this._updateLayoutListener),this.updateLayoutAutomatically()}removeCell(e){mn(this.cells,e),this.removeNode(e.node),e.changedEmitter.removeListener(this._updateLayoutListener),this.updateLayoutAutomatically()}getCellQuantity(){return this.cells.length}reorderCells(e,t,i){this.cells.splice(t,i-t+1,...e),this.updateLayoutAutomatically()}getPreferredProperty(e){return e===jt.HORIZONTAL?this.preferredWidthProperty:this.preferredHeightProperty}dispose(){this.lock(),this.cells.forEach(e=>this.removeCell(e)),this.displayedCells=[],super.dispose(),this.unlock()}static create(e,t){return new hy(e,t)}}class uy extends mh{constructor(e,t,i){super(e),this.lock(),this.nodes=t,this.cells=t.map(s=>new AV(this,s,null)),this.layoutCallback=i,this.nodes.forEach(s=>this.addNode(s,!1)),this.unlock(),this.updateLayout()}layout(){if(super.layout(),!he.some(this.cells,t=>!t.isConnected())){const t=this.cells.map(i=>i.proxy);this.layoutCallback.apply(null,t),this.finishedLayoutEmitter.emit()}}dispose(){this.cells.forEach(e=>e.dispose()),super.dispose()}static create(e,t,i){return new uy(e,t,i)}}const jB=["resize","layoutOrigin"];class QB extends Cu(Rt){constructor(e){super(e),this.layoutOriginProperty=new $x(Ne.ZERO)}linkLayoutBounds(){this._constraint.layoutBoundsProperty.link(e=>{this.localBounds=e})}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this._constraint.excludeInvisible=e}setChildren(e){if(this.constraint.isLocked)return super.setChildren(e);const t=this.getChildren();return this.constraint.lock(),super.setChildren(e),this.constraint.unlock(),he.isEqual(t,e)||this.constraint.updateLayoutAutomatically(),this}updateLayout(){this._constraint.updateLayout()}get resize(){return this._constraint.enabled}set resize(e){this._constraint.enabled=e}get layoutOrigin(){return this.layoutOriginProperty.value}set layoutOrigin(e){this.layoutOriginProperty.value=e}get constraint(){return this._constraint}dispose(){this._constraint.dispose(),super.dispose()}}const ZB=[...jB,...VV.filter(n=>n!=="excludeInvisible"),"forward","forwardProperty"],Ol={orientation:"horizontal",spacing:0,align:"center",stretch:!1,forward:!0};class Xc extends QB{constructor(e){const t=St()({excludeInvisibleChildrenFromBounds:!0,resize:!0,disabledOpacity:qc.DISABLED_OPACITY,forward:Ol.forward,forwardProperty:null},e);super(),this._cellMap=new Map,this._constraint=new hy(this,{preferredWidthProperty:this.localPreferredWidthProperty,preferredHeightProperty:this.localPreferredHeightProperty,minimumWidthProperty:this.localMinimumWidthProperty,minimumHeightProperty:this.localMinimumHeightProperty,layoutOriginProperty:this.layoutOriginProperty,orientation:Ol.orientation,spacing:Ol.spacing,align:Ol.align,stretch:Ol.stretch,excludeInvisible:!1}),this._forwardProperty=new Po(Ol.forward,!1,this.onFlowBoxForwardReverseChanged.bind(this)),this.onChildInserted=this.onFlowBoxChildInserted.bind(this),this.onChildRemoved=this.onFlowBoxChildRemoved.bind(this),this.onChildrenReordered=this.onFlowBoxChildrenReordered.bind(this),this.onChildrenChanged=this.onFlowBoxChildrenChanged.bind(this),this.childInsertedEmitter.addListener(this.onChildInserted),this.childRemovedEmitter.addListener(this.onChildRemoved),this.childrenReorderedEmitter.addListener(this.onChildrenReordered),this.childrenChangedEmitter.addListener(this.onChildrenChanged);const i=he.omit(t,th),s=he.pick(t,th);this._constraint.lock(),this.mutate(i),this._constraint.unlock(),this._constraint.updateLayout(),this.mutate(s),this.linkLayoutBounds()}onFlowBoxChildInserted(e,t){const i=new WB(this._constraint,e,this._constraint.createLayoutProxy(e));if(this._cellMap.set(e,i),this.forward)this._constraint.insertCell(t,i);else{const s=this._constraint.getCellQuantity()-t;this._constraint.insertCell(s,i)}}onFlowBoxChildRemoved(e){const t=this._cellMap.get(e);this._cellMap.delete(e),this._constraint.removeCell(t),t.dispose()}onFlowBoxChildrenReordered(e,t){const i=this._children.slice(e,t+1);this.forward||i.reverse(),this._constraint.reorderCells(i.map(s=>this._cellMap.get(s)),e,t)}onFlowBoxChildrenChanged(){this._constraint.updateLayoutAutomatically()}onFlowBoxForwardReverseChanged(){this.onFlowBoxChildrenReordered(0,this._children.length-1),this.onFlowBoxChildrenChanged()}getCell(e){return this._cellMap.get(e)}get orientation(){return this._constraint.orientation}set orientation(e){this._constraint.orientation=e}get spacing(){return this._constraint.spacing}set spacing(e){this._constraint.spacing=e}get lineSpacing(){return this._constraint.lineSpacing}set lineSpacing(e){this._constraint.lineSpacing=e}get justify(){return this._constraint.justify}set justify(e){this._constraint.justify=e}get justifyLines(){return this._constraint.justifyLines}set justifyLines(e){this._constraint.justifyLines=e}get wrap(){return this._constraint.wrap}set wrap(e){this._constraint.wrap=e}get align(){return this._constraint.align}set align(e){this._constraint.align=e}get stretch(){return this._constraint.stretch}set stretch(e){this._constraint.stretch=e}get grow(){return this._constraint.grow}set grow(e){this._constraint.grow=e}get margin(){return this._constraint.margin}set margin(e){this._constraint.margin=e}get xMargin(){return this._constraint.xMargin}set xMargin(e){this._constraint.xMargin=e}get yMargin(){return this._constraint.yMargin}set yMargin(e){this._constraint.yMargin=e}get leftMargin(){return this._constraint.leftMargin}set leftMargin(e){this._constraint.leftMargin=e}get rightMargin(){return this._constraint.rightMargin}set rightMargin(e){this._constraint.rightMargin=e}get topMargin(){return this._constraint.topMargin}set topMargin(e){this._constraint.topMargin=e}get bottomMargin(){return this._constraint.bottomMargin}set bottomMargin(e){this._constraint.bottomMargin=e}get minContentWidth(){return this._constraint.minContentWidth}set minContentWidth(e){this._constraint.minContentWidth=e}get minContentHeight(){return this._constraint.minContentHeight}set minContentHeight(e){this._constraint.minContentHeight=e}get maxContentWidth(){return this._constraint.maxContentWidth}set maxContentWidth(e){this._constraint.maxContentWidth=e}get maxContentHeight(){return this._constraint.maxContentHeight}set maxContentHeight(e){this._constraint.maxContentHeight=e}setForwardProperty(e){return this._forwardProperty.setTargetProperty(e,this,null)}set forwardProperty(e){this.setForwardProperty(e)}get forwardProperty(){return this.getForwardProperty()}getForwardProperty(){return this._forwardProperty}setForward(e){return this.forwardProperty.set(e),this}set forward(e){this.setForward(e)}get forward(){return this.isForward()}isForward(){return this.forwardProperty.value}dispose(){this._constraint.lock(),this.childInsertedEmitter.removeListener(this.onChildInserted),this.childRemovedEmitter.removeListener(this.onChildRemoved),this.childrenReorderedEmitter.removeListener(this.onChildrenReordered),this.childrenChangedEmitter.removeListener(this.onChildrenChanged),this._forwardProperty.dispose();for(const e of this._cellMap.values())e.dispose();super.dispose()}setOrientation(e){return this.orientation=e,this}getOrientation(){return this.orientation}setSpacing(e){return this.spacing=e,this}getSpacing(){return this.spacing}setAlign(e){return this.align=e,this}getAlign(){return this.align}setResize(e){return this.resize=e,this}isResize(){return this.resize}getHelperNode(){return vV.createHelperNode(this.constraint.displayedCells,this.constraint.layoutBoundsProperty.value,t=>{let i="";const s=jt.fromLayoutOrientation(t.orientation);return i+=`align: ${Ds.internalToAlign(s,t.effectiveAlign)}
`,i+=`stretch: ${t.effectiveStretch}
`,i+=`grow: ${t.effectiveGrow}
`,i})}mutate(e){return e?super.mutate(e):this}}Xc.DEFAULT_FLOW_BOX_OPTIONS=Ol;Xc.prototype._mutatorKeys=[...qB,...ZB,...Rt.prototype._mutatorKeys];class wV extends Xc{constructor(e){super(St()({orientation:"horizontal"},e))}onFlowBoxChildInserted(e,t){super.onFlowBoxChildInserted(e,t)}mutate(e){return super.mutate(e)}}class a0 extends Xc{constructor(e){super(St()({orientation:"vertical"},e))}onFlowBoxChildInserted(e,t){super.onFlowBoxChildInserted(e,t)}mutate(e){return super.mutate(e)}}const lm=new Ne(0,0);class SV extends ih{constructor(e){const t=St()({positionProperty:null,start:null,end:null,drag:he.noop,transform:null,dragBoundsProperty:null,allowTouchSnag:!0,applyOffset:!0,useParentOffset:!1,trackAncestors:!1,translateNode:!1,mapPosition:null,offsetPosition:null,canClick:!1,tandem:rt.REQUIRED,phetioReadOnly:!0,phetioFeatured:As.DEFAULT_OPTIONS.phetioFeatured},e);super(t),this._allowTouchSnag=t.allowTouchSnag,this._applyOffset=t.applyOffset,this._useParentOffset=t.useParentOffset,this._trackAncestors=t.trackAncestors,this._translateNode=t.translateNode,this._transform=t.transform,this._positionProperty=t.positionProperty,this._mapPosition=t.mapPosition,this._offsetPosition=t.offsetPosition,this._dragBoundsProperty=t.dragBoundsProperty||new Li(null),this._start=t.start,this._end=t.end,this._canClick=t.canClick,this.isUserControlledProperty=this.isPressedProperty,this._globalPoint=new Ne(0,0),this._localPoint=new Ne(0,0),this._parentPoint=new Ne(0,0),this._modelPoint=new Ne(0,0),this._modelDelta=new Ne(0,0),this._parentOffset=new Ne(0,0),this._transformTracker=null,this._transformTrackerListener=this.ancestorTransformed.bind(this),this._lastInterruptedTouchLikePointer=null,this._dragAction=new ts(i=>{const r=this.pointer.point;r&&(this._globalPoint.equals(r)||this.reposition(r)),ih.prototype.drag.call(this,i)},{parameters:[{name:"event",phetioType:il.SceneryEventIO}],phetioFeatured:t.phetioFeatured,tandem:t.tandem.createTandem("dragAction"),phetioHighFrequency:!0,phetioDocumentation:"Emits whenever a drag occurs with an SceneryEventIO argument.",phetioReadOnly:t.phetioReadOnly,phetioEventType:Si.USER})}press(e,t,i){return super.press(e,t,()=>{const r=this;r.pointer.reserveForDrag(),this.attachTransformTracker();const o=r.pointer.point,d=this.globalToParentPoint(this._localPoint.set(o));this._useParentOffset&&this.modelToParentPoint(this._parentOffset.set(this._positionProperty.value)).subtract(d),this.parentToLocalPoint(d),this.reposition(o),this._start&&this._start(e,r),i&&i()})}release(e,t){super.release(e,()=>{this.detachTransformTracker(),this._end&&this._end(e||null,this),t&&t()})}canClick(){return super.canClick()&&this._canClick}click(e,t){return super.click(e,()=>{this._start&&this._start(e,this),t&&t(),this._end&&this._end(e,this)})}drag(e){const i=this.pointer.point;!i||this._globalPoint.equals(i)||this.isPressed&&this._dragAction.execute(e)}tryTouchSnag(e){this._allowTouchSnag&&(!this.attach||!e.pointer.isAttached())&&this.press(e)}getGlobalPoint(){return this._globalPoint.copy()}get globalPoint(){return this.getGlobalPoint()}getLocalPoint(){return this._localPoint.copy()}get localPoint(){return this.getLocalPoint()}getParentPoint(){return this._parentPoint.copy()}get parentPoint(){return this.getParentPoint()}getModelPoint(){return this._modelPoint.copy()}get modelPoint(){return this.getModelPoint()}getModelDelta(){return this._modelDelta.copy()}get modelDelta(){return this.getModelDelta()}globalToParentPoint(e){return this.pressedTrail.getParentTransform().getInverse().multiplyVector2(e),e}parentToLocalPoint(e){return this.pressedTrail.lastNode().getTransform().getInverse().multiplyVector2(e),e}localToParentPoint(e){return this.pressedTrail.lastNode().getMatrix().multiplyVector2(e),e}parentToModelPoint(e){return this._transform&&(this._transform instanceof ra?this._transform:this._transform.value).getInverse().multiplyVector2(e),e}modelToParentPoint(e){return this._transform&&(this._transform instanceof ra?this._transform:this._transform.value).getMatrix().multiplyVector2(e),e}mapModelPoint(e){return this._mapPosition&&(e=this._mapPosition(e)),this._dragBoundsProperty.value?this._dragBoundsProperty.value.closestPointTo(e):e}applyParentOffset(e){this._offsetPosition&&e.add(this._offsetPosition(e,this)),this._applyOffset&&(this._useParentOffset?e.add(this._parentOffset):(e.subtract(this.localToParentPoint(lm.set(this._localPoint))),e.add(this.localToParentPoint(lm.setXY(0,0)))))}reposition(e){const t=this;this._globalPoint.set(e),this.applyParentOffset(this.globalToParentPoint(this._parentPoint.set(e))),this._modelDelta.set(this._modelPoint).negate(),this._modelPoint.set(this.mapModelPoint(this.parentToModelPoint(lm.set(this._parentPoint)))),this._modelDelta.add(this._modelPoint),this.modelToParentPoint(this._parentPoint.set(this._modelPoint)),this._translateNode&&(t.pressedTrail.lastNode().translation=this._parentPoint),this._positionProperty&&(this._positionProperty.value=this._modelPoint.copy())}touchenter(e){e.pointer.isDownProperty.value&&this.tryTouchSnag(e)}touchmove(e){this.tryTouchSnag(e)}ancestorTransformed(){const t=this.pointer.point;t&&this.reposition(t)}attachTransformTracker(){const e=this;this._trackAncestors&&(this._transformTracker=new jl(e.pressedTrail.copy().removeDescendant()),this._transformTracker.addListener(this._transformTrackerListener))}detachTransformTracker(){this._transformTracker&&(this._transformTracker.removeListener(this._transformTrackerListener),this._transformTracker.dispose(),this._transformTracker=null)}getDragBounds(){return this._dragBoundsProperty.value}get dragBounds(){return this.getDragBounds()}setTransform(e){this._transform=e}set transform(e){this.setTransform(e)}get transform(){return this.getTransform()}getTransform(){return this._transform}interrupt(){this.pointer&&this.pointer.isTouchLike()&&(this._lastInterruptedTouchLikePointer=this.pointer),super.interrupt()}canPress(e){return e.pointer===this._lastInterruptedTouchLikePointer?!1:super.canPress(e)}dispose(){this._dragAction.dispose(),this.detachTransformTracker(),super.dispose()}static createForwardingListener(e,t){const i=St()({allowTouchSnag:!0},t);return{down(s){s.canStartPress()&&e(s)},touchenter(s){i.allowTouchSnag&&this.down(s)},touchmove(s){i.allowTouchSnag&&this.down(s)}}}}class JB extends Ni{constructor(e,t){const i=St()({display:null,followPDOMOrder:!1,requireVisible:!0,requirePDOMVisible:!1,requireEnabled:!1,requireInputEnabled:!1},t);super([]),this.listenedNodeSet=new Set,this.node=e,this.display=i.display,this.followPDOMOrder=i.followPDOMOrder,this.requireVisible=i.requireVisible,this.requirePDOMVisible=i.requirePDOMVisible,this.requireEnabled=i.requireEnabled,this.requireInputEnabled=i.requireInputEnabled,this._trailUpdateListener=this.update.bind(this),this.update()}update(){const e=this.display,t=this.followPDOMOrder,i=this.requireVisible,s=this.requirePDOMVisible,r=this.requireEnabled,o=this.requireInputEnabled,d=[],g=new Set,y=new Ki(this.node);(function L(){const x=y.rootNode();if(x.isDisposed||(g.add(x),i&&!x.visible||s&&!x.pdomVisible||r&&!x.enabled||o&&!x.inputEnabled))return;const A=x.getRootedDisplays();let Q;e===null?Q=A.length>0:typeof e!="function"?Q=A.includes(e):Q=A.some(e),Q&&d.push(y.copy()),(t&&x.pdomParent?[x.pdomParent]:x.parents).forEach(G=>{y.addAncestor(G),L(),y.removeAncestor()})})(),g.forEach(L=>{this.listenedNodeSet.has(L)||this.addNodeListener(L)}),this.listenedNodeSet.forEach(L=>{g.has(L)||this.removeNodeListener(L)});const S=this.value;let T=S.length===d.length;if(T){for(let L=0;L<d.length;L++)if(!S[L].equals(d[L])){T=!1;break}}T||(this.value=d)}addNodeListener(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._trailUpdateListener),e.parentRemovedEmitter.addListener(this._trailUpdateListener),e.rootedDisplayChangedEmitter.addListener(this._trailUpdateListener),e.disposeEmitter.addListener(this._trailUpdateListener),this.followPDOMOrder&&e.pdomParentChangedEmitter.addListener(this._trailUpdateListener),this.requireVisible&&e.visibleProperty.lazyLink(this._trailUpdateListener),this.requirePDOMVisible&&e.pdomVisibleProperty.lazyLink(this._trailUpdateListener),this.requireEnabled&&e.enabledProperty.lazyLink(this._trailUpdateListener),this.requireInputEnabled&&e.inputEnabledProperty.lazyLink(this._trailUpdateListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._trailUpdateListener),e.parentRemovedEmitter.removeListener(this._trailUpdateListener),e.rootedDisplayChangedEmitter.removeListener(this._trailUpdateListener),e.disposeEmitter.removeListener(this._trailUpdateListener),this.followPDOMOrder&&e.pdomParentChangedEmitter.removeListener(this._trailUpdateListener),this.requireVisible&&e.visibleProperty.unlink(this._trailUpdateListener),this.requirePDOMVisible&&e.pdomVisibleProperty.unlink(this._trailUpdateListener),this.requireEnabled&&e.enabledProperty.unlink(this._trailUpdateListener),this.requireInputEnabled&&e.inputEnabledProperty.unlink(this._trailUpdateListener)}dispose(){this.listenedNodeSet.forEach(e=>this.removeNodeListener(e)),super.dispose()}}const $B=["image","imageProperty","imageOpacity","imageBounds","initialWidth","initialHeight","mipmap","mipmapBias","mipmapInitialLevel","mipmapMaxLevel","hitTestPixels"];class ia extends Fr(Rt){constructor(e,t){const i={};ii(e)?i.imageProperty=e:i.image=e;const s=St()(i,t);super(),this._imageBounds=null,this.mutate(s),this.invalidateSupportedRenderers()}invalidateImage(){this._image?this.invalidateSelf(this._imageBounds||new ot(0,0,this.getImageWidth(),this.getImageHeight())):this.invalidateSelf(ot.NOTHING);const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyImage();super.invalidateImage(),this.invalidateSupportedRenderers()}invalidateSupportedRenderers(){let e=Le.bitmaskCanvas;this.getImageWidth()<=Cc.MAX_DIMENSION.width&&this.getImageHeight()<=Cc.MAX_DIMENSION.height&&(e|=Le.bitmaskWebGL),this._image instanceof HTMLCanvasElement||(e|=Le.bitmaskSVG|Le.bitmaskDOM),this.setRendererBitmask(e)}setImageOpacity(e){const t=this._imageOpacity!==e;if(super.setImageOpacity(e),t){const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyImageOpacity()}}setImageBounds(e){this._imageBounds!==e&&(this._imageBounds=e,this.invalidateImage())}set imageBounds(e){this.setImageBounds(e)}get imageBounds(){return this._imageBounds}getImageBounds(){return this._imageBounds}isPainted(){return!0}canvasPaintSelf(e,t){e0.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return dV.createFromPool(e,t)}createSVGDrawable(e,t){return fV.createFromPool(e,t)}createCanvasDrawable(e,t){return e0.createFromPool(e,t)}createWebGLDrawable(e,t){return ny.createFromPool(e,t)}containsPointSelf(e){const t=Rt.prototype.containsPointSelf.call(this,e);return!t||!this._hitTestPixels||!this._hitTestImageData?t:Fr.testHitTestData(this._hitTestImageData,this.imageWidth,this.imageHeight,e)}getSelfShape(){return this._hitTestPixels&&this._hitTestImageData?Fr.hitTestDataToShape(this._hitTestImageData,this.imageWidth,this.imageHeight):Rt.prototype.getSelfShape.call(this)}invalidateMipmaps(){const e=this._image&&this._mipmap&&!this._mipmapData;if(super.invalidateMipmaps(),e){const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyMipmap()}}mutate(e){return super.mutate(e)}}ia.DEFAULT_IMAGE_OPTIONS=Qi({},Rt.DEFAULT_NODE_OPTIONS,Fr.DEFAULT_OPTIONS);ia.prototype._mutatorKeys=[...$B,...Rt.prototype._mutatorKeys];ia.prototype.drawableMarkFlags=[...Rt.prototype.drawableMarkFlags,"image","imageOpacity","mipmap"];ia.ImageIO=new pi("ImageIO",{valueType:ia,supertype:Rt.NodeIO,events:["changed"],methods:{setImage:{returnType:qr,parameterTypes:[gs],implementation:function(n){const e=new self.Image;e.src=n,this.image=e},documentation:"Set the image from a base64 string",invocableForReadOnlyElements:!1}}});class eR extends Error{constructor(){super("CouldNotYetDeserializeError")}}const hm=new zr,tR=n=>{const e=n;return hm.has(e)||hm.set(e,new pi(`ReferenceIO<${n.typeName}>`,{isValidValue:t=>fs.isValueValid(t,n.validator),documentation:"Uses reference identity for serializing and deserializing, and validates based on its parameter PhET-iO Type.",parameterTypes:[n],toStateObject(t){return{phetioID:t.tandem.phetioID}},stateSchema:{phetioID:gs},fromStateObject(t){if(phet.phetio.phetioEngine.hasPhetioObject(t.phetioID))return phet.phetio.phetioEngine.getPhetioElement(t.phetioID);throw new eR},applyState(t){}})),hm.get(e)},wf={isColorDef(n){return n===null||typeof n=="string"||n instanceof ct||ii(n)&&(n.value===null||typeof n.value=="string"||n.value instanceof ct)},scenerySerialize(n){return n===null?"null":n instanceof ct?`'${n.toCSS()}'`:typeof n=="string"?`'${n}'`:wf.scenerySerialize(n.value)},ColorDefIO:null};wf.ColorDefIO=new pi("ColorDefIO",{isValidValue:wf.isColorDef,supertype:Ai(mc([gs,ct.ColorIO,tR(Li.PropertyIO(Ai(mc([gs,ct.ColorIO]))))]))});class iR extends yv{constructor(e,t){const i=new JB(e,t);super([i],s=>s.length>0,t),this.displayedTrailsProperty=i}dispose(){this.displayedTrailsProperty.dispose(),super.dispose()}}class ml extends Do{constructor(e,t,i,s){super(),this.start=new Ne(e,t),this.end=new Ne(i,s)}createCanvasGradient(){return Sc.createLinearGradient(this.start.x,this.start.y,this.end.x,this.end.y)}createSVGPaint(e){return kc.pool.create(e,this)}toString(){let e=`new phet.scenery.LinearGradient( ${this.start.x}, ${this.start.y}, ${this.end.x}, ${this.end.y} )`;return he.each(this.stops,t=>{e+=`.addColorStop( ${t.ratio}, ${wf.scenerySerialize(t.color)} )`}),e}}ml.prototype.isLinearGradient=!0;const Sf={isPaintDef(n){return n===null||typeof n=="string"||n instanceof ct||n instanceof Al||ii(n)&&(n.value===null||typeof n.value=="string"||n.value instanceof ct)},toColor(n){if(typeof n=="string")return new ct(n);if(n instanceof ct)return n.copy();if(ii(n))return Sf.toColor(n.value);if(n instanceof Do){let e=ct.TRANSPARENT;const t=0;return n.stops.forEach(i=>{e=e.blend(Sf.toColor(i.color),1/(t+1))}),e}return ct.TRANSPARENT}};class eo extends Li{constructor(e,t){const i=Sf.toColor(e),s=St()({luminanceFactor:0,valueComparisonStrategy:"equalsFunction"},t);super(i,s),this._paint=null,this._luminanceFactor=s.luminanceFactor,this._changeListener=this.invalidatePaint.bind(this),this._paintObserver=new Vc(this._changeListener),this.setPaint(e)}setPaint(e){this._paint=e,this._paintObserver.setPrimary(e)}set paint(e){this.setPaint(e)}get paint(){return this.getPaint()}getPaint(){return this._paint}setLuminanceFactor(e){this.luminanceFactor!==e&&(this._luminanceFactor=e,this.invalidatePaint())}set luminanceFactor(e){this.setLuminanceFactor(e)}get luminanceFactor(){return this.getLuminanceFactor()}getLuminanceFactor(){return this._luminanceFactor}invalidatePaint(){this.value=Sf.toColor(this._paint).colorUtilsBrightness(this._luminanceFactor)}dispose(){this.paint=null,super.dispose()}}const Bc=0,Rc=4,Cf=2.3;class sR{constructor(){this.isPointingRightProperty=new Ri(!0),this.wheelAngleProperty=new Er(0),this.crankAngleProperty=new Er(0),this.effortProperty=new Er(0),this.bicycleColorShiftProperty=new Er(0)}toggleToNextColorShift(){const e=this.bicycleColorShiftProperty.value;e===Bc?this.bicycleColorShiftProperty.value=Rc:e===Rc?this.bicycleColorShiftProperty.value=Cf:this.bicycleColorShiftProperty.value=Bc}}class fp{constructor(){this.positionProperty=new Er(300),this.velocityProperty=new Er(0),this.accelerationProperty=new Er(0),this.cyclist=new sR,this.velocityProperty.link(e=>{Math.abs(e)>1e-5&&(this.cyclist.isPointingRightProperty.value=e>0)})}copy(){const e=new fp;return e.positionProperty.value=this.positionProperty.value,e.velocityProperty.value=this.velocityProperty.value,e.accelerationProperty.value=this.accelerationProperty.value,e.cyclist.isPointingRightProperty.value=this.cyclist.isPointingRightProperty.value,e.cyclist.wheelAngleProperty.value=this.cyclist.wheelAngleProperty.value,e.cyclist.crankAngleProperty.value=this.cyclist.crankAngleProperty.value,e.cyclist.effortProperty.value=this.cyclist.effortProperty.value,e.cyclist.bicycleColorShiftProperty.value=this.cyclist.bicycleColorShiftProperty.value,e}step(e){e=Math.min(e,1);const t=this.velocityProperty.value,i=this.accelerationProperty.value,s=t*i<0;this.positionProperty.value+=t*e,this.velocityProperty.value+=i*e,this.cyclist.wheelAngleProperty.value+=Math.abs(t*e),this.cyclist.crankAngleProperty.value+=s?0:5*Math.abs(i)*e;const r=s?0:Math.abs(i);r<=.5?this.cyclist.effortProperty.value=0:r<=1.5?this.cyclist.effortProperty.value=1:r<=2.5?this.cyclist.effortProperty.value=2:this.cyclist.effortProperty.value=3}stop(){this.velocityProperty.value=0,this.accelerationProperty.value=0}reset(){this.positionProperty.reset(),this.velocityProperty.reset(),this.accelerationProperty.reset(),this.cyclist.wheelAngleProperty.reset(),this.cyclist.crankAngleProperty.reset(),this.cyclist.isPointingRightProperty.reset(),this.step(0)}}const nR=""+new URL("bicycleFrame-CEbdWiJO.png",import.meta.url).href,rR=""+new URL("bicycleGear-BQXuIS22.png",import.meta.url).href,aR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACCCAYAAACO9sDAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACpBJREFUeNrsXeut6zYMJooO4BE0gkfQCO4GGsEjaIOgE7gbZASjE2SEdAN3g9NzAQtVePR+yxaB/Ln3JHEo6hP58SGAe8v8/VpgyG3l9f36Gmroc+f+Wrg14jOm8zNeQ539CTkX7zgXMkTY+Rl8qLNPeUQu4Ha+fx6q7FOmEwFCUUC8d0jHws9dvAX6EM/KCLaOJUyDAl+nX+BrOKzic//6/n0sYbywgN38CjCaHM/8GMuXRt6nQmkn4d/m8bxDPHaUC6QuDew+YbBDEsruuKtq7z7SgAN6SaGnYt8Ou69m+LdCPIs5xIICrOHw7wmDgMomswUFWth9g4Aq5GFzA0KQyga6XXkBpsrfL5wsTBFPjj5CTuFQl4Aqcr4dDRgBV6BAC+FfbQQqpvjaECcnioSyRfZwqfhMtRGomOJbsHJsjLXJlxQItPQQPraEAjJF3EL2LxSBZun46IJBfDeCAkxyCGuHfyIB5eMfESmqEVQ37cEAGLRDd74lBdYiXwj4pX+nE0kPyW/oLnLwydCVOHuPBjYEd/zbQ3pm3kBUFfWj90YMoGYE4JKAotIxIXyoLhdeFffWRIGHpNRaIZgpAUWQg7dfiSegDaDAW/JHarBwugTUhBy8N1y0QGSHevQnQbtKKLoktOIEFHbwDrgwNSyjQA34ZUj5G5RvBpHTv0xCpK4dvF5QAOfeCcT1EoTIIaGQ7OARuJGQSiigyr1zKJcUkiMQYQTdFYKkeuDS8EtBTUmXyFdMiuijyzb0GVkvjzAIAvENnSHhn+rY4ZAvX7FKBvYFF0j/PuCTThWL+Dx/7NwoCti49zekpYcXpCdhgJdpPyfnbtoUFv4+/51ZrD22odMXbV4OEUIsR0GRg/c8v7+FApTsx8MK/1cByQbxOn/4olhoXgAFmON3CJSggUZmytTVLkCpEu9ztBtkg+Dn35Rwwlx7/2kACkySEZsydbfu/plOy3/AZ4JD9iFyFo34lF77cBQMfmbqTEfQ6P5V+A8qh9LFf/CNXFxrEagDR0EVDt6U4Ai6tUE8FMggO5RLoKPIwZ91FEfGqjCmkEzdGD/jKG9J8Sb/4eHhqIX0/mOOAmfqXp6O4uj+8fTWdwXk6vwHEyEV0/u/SZ8fU4rVQv9hlyhALQ7lZiGkCMRN3ljR5/LAI2h0/waEjz4es4mQ+pKcL+Lx/RhpYqKTy3f/5JCY0jGZkPryIKSIwsGjCTiKHrp/2Pl7l9ZQIEZxM/IRdoP/gDN1VAHhW8TvaLX7F0c1S4sowALfrzp7XQgpVUIrtKS9VfoXp6ebrEuYI1HAdPYy5EA+LYQUhzAmL6T7pwTcd1N/uAWigK7zloK5FMuU0PqSnmXyeIZW0r/YuX1AB/WHmJBxFZx6JRDWUzdHEFKtpH8nxW/vKiIJKRqRkYNDulKsHT6TV9ihlP2HFoY/rojE6jIVHYICb7RQB6RJxMh+iY2QqjkXAcN9KInVjHAPFMCVt6nPOh0iCUJK5T/IFVI5F6J7uDf9MFvpGI5pn5l+vAsirdIz+BJSMZuke7h3QYFNsSCbQsk5Ld92O4lq+CM9/96U0ArxFyg6grqHexsKiMXVDU0oQb2qhk7JYkv/yoRUaIU1QejyhBvkG1b4maKVM3ULlKNedYgUMvxR+A8qh1JVYY0Nn8JNhMLPLN2kgOalECKpZh9xiO97dCGkbnXBBFGQMbsh/Ct1BjL4WeyRI/3LDEbwivAfujj3VUMTVMkZAnUqb/GzpPRBJg3cmxJaO/h3aDW58Bz0SQumWGzxb6UrbxbpWVLSvwv8nB2g0xUDc4UU68lBZOA2NAEXjdScu79LcBzrg+Djznc4VAuEVLCD5zM0gcJntu2AepU32DkNUS7uMPKtPLY5lLuFkPqwoKPgWYLjWZ/ihF0yltqVNzuEp38x3K+ZjVVHSC1iQXSxaMrwKsXQBLzzWEUDkEmoycP4Y+A+xRoIh3JXIYGuuFIuvQ4ldI5EFv+MhN5UIkcrvBLcZ/d2Hxp0eDjuXjw0gSdYNAr1R78CgnBTooglNP6qxIzOsVCFHdjBS8lbM4+dl0vk7h+ueRacreyiJMvnHFHFoS+Fg5ca6jYU99ZQqlyBrEpaNV+Bm3o3cFDTljlICQG5j4oogDkIDuqkFYMbCD7jHqBu2xIc9hxpbLL3fFRCAcxBzJC3KqlJoWAfmjBrYtAjkKHiKPzjUD5LRpER4uKUy08FCR2aIHPYoeiAe/9rXFJlgvtWLsnI5vzFDE1Q7SRVhks3IUTXeMGhLCuIIyE5tKVXRIES99cQ0Cc0BEWtg3tdoUbuDaBDvprj8bM4eDXGm1MNCSUii0XDDeRCATz+9eHgI3R9QSSFn/fXkErPQuBzeoeOos5x/mI9iO+wsaDPXlGAKBy8FkiMGe1+HTqkOn+JBu5dS9BIZaIq2sNtrfJ01ewogQ6uFLWrDlQNF8TTwGrcTpLE0WkxhHEpvJxAX0zpMmqOgrkki3kuaE2i6nLhp49TtUsLpUIHXDdHwK3hImT4Y+kQ9ZLiW3ip8sJNJJRsGCaECBn+2NJt6t3KBv6Fl7ZYfDUYgYqijhn+uA4UiJOQseu6eUMquJ/BTlGLzOMa+RvoWE7/cCx058lTQ1Qz/qmFhHoZSChfp47BGB8fFf6tEcZzQHgFLjFEFr5V1K+BAv7yjHCgCCKLQitwqfR+Cvo6SVsVNYWLXSJVQkI4dQz3sYwcBzMJ5VNFfalEUanwb/N8D4Z7DnGMnOvwR5cq6thhmLcSn95/XKQiw71tuocLCeUL2wT0FPUBY5y8V+g0WRboAfYiFR4Yi6fo/rVVUfvchnK78G+3hFauFbihjFyO4Y8zqIdcddnaXSP8C224CGHkct39Jxskh3xV1N2Hf7MB7kNqFXzuC3ZBoRhRHUupq6i7FVx37wP3YDk2XBeVZXbWbMdSiirqLgUTL6n761x5+RITSBi4U92ChHKtou4+/HtDntK0xREFSt39F5IoImCvou4WHXARZo4ZgLZLqkre/edqkC7ogMPMrrgGCuVGnlMLwaOrQcwlMbem6UioZy/8gqq/jhdUOjP8Hylo/LekiPENFz5hWk6l11iMWyWKdHBf+tJl1SVVJQdQq3gHn6FT3QmBnxNECHK8tspKr3n3X5e9BK7CwTzynFeCQKz0mnf/CYO8VC8BBbcZuC+oUz4tK51A/aodfhUUwHBvmhRW+9LFB3zO/q2p/Ev0EtjgHguDuhciyEpvoXCTQ6e9BLMj3OvOYdqA0r8a0GOpoRfZYlnfwZClwz+d8X41pHQGHfYSEPAncUry7iaR28Vagd5bdBSV5t118oTPos0WUIDCDTqK9kYULo4h1ggiYf1cEgV8e/9z77StQegVNZDkigaQ8tKlFBEA69kB61FCev9LHUOjmbOgl9vCMfS6owPWQtxd29kyHUN7Iwh1aQOoHf6Z0r8URjPn5cWW/h0t3RcW4nDOkyujwG83NwDh4f9t+Jt/vl9/wf/VtkMuGIbaQj2BAmPq5wXD0MPTWPhQ2z3DUAIXnP17Zx/A5fzHvsCf5+IPX+ACEjKCbsz+vZCEhnYcxuzfS8B/6CLKKNC9/D7Of2/59/v1B4wsYfcRAB8xPcB/AgwAKAWj7oV9OAQAAAAASUVORK5CYII=",oR=""+new URL("cyclistTorso-CQ6swEUX.png",import.meta.url).href,lR=""+new URL("cyclistTorsoTired1-DtGF82WJ.png",import.meta.url).href,hR=""+new URL("cyclistTorsoTired2-DqCIH8Wa.png",import.meta.url).href,uR=""+new URL("cyclistTorsoTired3-JJhOdtZy.png",import.meta.url).href,cR=""+new URL("cyclistLegBack01-Cc5t2TVx.png",import.meta.url).href,dR=""+new URL("cyclistLegBack02-D4lhun60.png",import.meta.url).href,fR=""+new URL("cyclistLegBack03-CWAJoQXB.png",import.meta.url).href,pR=""+new URL("cyclistLegBack04-Bp2KFL7a.png",import.meta.url).href,gR=""+new URL("cyclistLegBack05-DqxrV76O.png",import.meta.url).href,mR=""+new URL("cyclistLegBack06-BItWopzm.png",import.meta.url).href,yR=""+new URL("cyclistLegBack07-CSrwkjCO.png",import.meta.url).href,_R=""+new URL("cyclistLegBack08-BIt7562M.png",import.meta.url).href,AR=""+new URL("cyclistLegBack09-CLenWSrY.png",import.meta.url).href,bR=""+new URL("cyclistLegBack10-CYdpUCvt.png",import.meta.url).href,vR=""+new URL("cyclistLegBack11-C8HmOU9S.png",import.meta.url).href,VR=""+new URL("cyclistLegBack12-DxkcSNWd.png",import.meta.url).href,wR=""+new URL("cyclistLegBack13-Cs1tlsXw.png",import.meta.url).href,SR=""+new URL("cyclistLegBack14-BidWsfkz.png",import.meta.url).href,CR=""+new URL("cyclistLegBack15-D5ObOEqD.png",import.meta.url).href,PR=""+new URL("cyclistLegBack16-DneWz68G.png",import.meta.url).href,ER=""+new URL("cyclistLegBack17-D4Z-aEbH.png",import.meta.url).href,DR=""+new URL("cyclistLegBack18-BYfedRn-.png",import.meta.url).href,TR=""+new URL("cyclistLegFront01-BVyQwDtw.png",import.meta.url).href,xR=""+new URL("cyclistLegFront02-CWj0djH0.png",import.meta.url).href,IR=""+new URL("cyclistLegFront03-CG2QV6uP.png",import.meta.url).href,kR=""+new URL("cyclistLegFront04-iTnP-jeD.png",import.meta.url).href,LR=""+new URL("cyclistLegFront05-DkeSxYQU.png",import.meta.url).href,NR=""+new URL("cyclistLegFront06-CF-rIPrg.png",import.meta.url).href,BR=""+new URL("cyclistLegFront07-D-ns8YBs.png",import.meta.url).href,RR=""+new URL("cyclistLegFront08-BQNgfdWm.png",import.meta.url).href,MR=""+new URL("cyclistLegFront09-BmwN72fI.png",import.meta.url).href,OR=""+new URL("cyclistLegFront10-DQSELyBn.png",import.meta.url).href,qR=""+new URL("cyclistLegFront11-D2-uWNwu.png",import.meta.url).href,FR=""+new URL("cyclistLegFront12-B6VPfVXw.png",import.meta.url).href,zR=""+new URL("cyclistLegFront13-CV0grxW7.png",import.meta.url).href,HR=""+new URL("cyclistLegFront14-uk3wSSO_.png",import.meta.url).href,KR=""+new URL("cyclistLegFront15-CGX3vBxU.png",import.meta.url).href,UR=""+new URL("cyclistLegFront16-DfrDLP0L.png",import.meta.url).href,YR=""+new URL("cyclistLegFront17-D7sqEMU6.png",import.meta.url).href,WR=""+new URL("cyclistLegFront18-rQiFW_Bo.png",import.meta.url).href,Ii=n=>{const e=new window.Image;if(e.src=n,!e.complete){const t=an.createLock(e);e.onload=()=>{t()}}return e},GR=Ii(nR),XR=Ii(rR),Yb=Ii(aR),jR=[Ii(cR),Ii(dR),Ii(fR),Ii(pR),Ii(gR),Ii(mR),Ii(yR),Ii(_R),Ii(AR),Ii(bR),Ii(vR),Ii(VR),Ii(wR),Ii(SR),Ii(CR),Ii(PR),Ii(ER),Ii(DR)],CV=[Ii(TR),Ii(xR),Ii(IR),Ii(kR),Ii(LR),Ii(NR),Ii(BR),Ii(RR),Ii(MR),Ii(OR),Ii(qR),Ii(FR),Ii(zR),Ii(HR),Ii(KR),Ii(UR),Ii(YR),Ii(WR)],Wb=[Ii(oR),Ii(lR),Ii(hR),Ii(uR)],QR=new Ne(12.76,13.2),ZR=new Ne(-76,22),JR=new Ne(77,22),Gb=CV.length,um=123,cm=-249,Bl=.49;class pp extends Rt{constructor(e,t){super(t),this.cyclist=e;const i=new(N1(ia))(GR,{right:um,top:cm,scale:Bl,cursor:"pointer",inputListeners:[new Af({fire:()=>e.toggleToNextColorShift()})]});e.bicycleColorShiftProperty.link(pe=>{i.filters=pe===0?[]:[new CB(pe)]});const s=new ia(XR,{center:QR,scale:Bl}),r=new ia(Yb,{center:ZR,scale:Bl}),o=new ia(Yb,{center:JR,scale:Bl}),d=new Rt,g=[];for(let pe=0;pe<Wb.length;pe++)g.push(new ia(Wb[pe],{centerX:i.centerX,bottom:i.bottom,scale:Bl})),g[pe].setVisible(!1),d.addChild(g[pe]);const y=new Rt,S=new Rt,T=[],L=[];for(let pe=0;pe<Gb;pe++)T.push(new ia(jR[pe],{right:um,top:cm,scale:Bl})),T[pe].setVisible(!1),y.addChild(T[pe]),L.push(new ia(CV[pe],{right:um,top:cm,scale:Bl})),L[pe].setVisible(!1),S.addChild(L[pe]);let x=T[0],A=L[0];const Q=s.bounds.center;e.crankAngleProperty.link(pe=>{pe=na(pe,0,2*Math.PI);const N=pp.mapAngleToImageIndex(pe);A.setVisible(!1),x.setVisible(!1),A=L[N],x=T[N],A.setVisible(!0),x.setVisible(!0);const Ie=(2*Math.PI-s.getRotation())%(2*Math.PI),$e=pe-Ie;s.rotateAround(Q,-$e)});let z=g[0];e.effortProperty.link(pe=>{z.setVisible(!1),z=g[pe],z.setVisible(!0)});const G=r.bounds.center,re=o.bounds.center;e.wheelAngleProperty.link(pe=>{pe=na(pe,0,2*Math.PI);const N=(2*Math.PI-o.getRotation())%(2*Math.PI),Ie=pe-N;r.rotateAround(G,-Ie),o.rotateAround(re,-Ie)});const ne=new Rt({children:[y,r,o,i,s,d,S]});this.addChild(ne),e.isPointingRightProperty.link(pe=>{ne.matrix=pe?mt.X_REFLECTION:mt.IDENTITY});const ae=this.bottom;this.y=-ae}static mapAngleToImageIndex(e){return e=na(e,0,2*Math.PI),Math.floor(e%(2*Math.PI)/(2*Math.PI/Gb))}}const Pn=(n,e)=>{const t=e.replace(new RegExp("^.*,"),""),i=atob(t),s=new Uint8Array(i.length);for(let r=0;r<s.length;r++)s[r]=i.charCodeAt(r);return s};class En{constructor(){this.audioBufferProperty=new Ni(null)}}let ut;self.AudioContext?ut=new self.AudioContext:self.webkitAudioContext?ut=new self.webkitAudioContext:(ut={},console.error("error: this browser does not support Web Audio"));const PV="data:audio/mpeg;base64,//swxAAABSAbF7TAgDE5nqu/MHICAAAAcDYkDIEtmZ+0OAIDonAEAIOjgnenW/yhz/g+fh+CEocif//+c5RVQlRIdHdXcHffj/DYYCgBdaS6OzOU+xCNTd7EPI6nQ7mODNUkXlljx1AXgvbsgTi8z3+Z7a8aMfHP9uQFmXb1f/cmZM/9//sIhYP//sNqQJAgNJhWTyGAwFAoAATS//syxAeACW0Hgbi1EBESBuvjNGAAfDtZrw0MQaBPJj2MwQyJDLEhJZGoPjAvCMnP3dlJiAtJ8xr/PKk5hYV//3KDxif//6MYVcnt//+VFswo04EQAACAAC9YdezBqNoZHHQDlUSCuyZAkxazLI1qAeiR+JfccaBj1xti9B5JXrESzzBnSIgoXKxEzkQCos+pbPmxfwWXkwAAFm+93//7MsQDgAh4Z1G5gwABEY3y9x5iAuzlQAAAAAB2Wop4QsaAhgpWdRTKJsZcpp1XP57ykSikyYckLZ4Ty1TSs+HageepBZpVjXhgAMSIXXKmU65I0d/7dt7v7sNgMBwALVb09GkvHVk7fqBciIEitH44DchaeFCkbZVn3vi+3iz997uspO3MNCwv4nKHDdB/+gTro/8WA6oYAgMAeW//+zLEAwAIZH9bHaGAAQMgrTTxid9Ko07zWxQmamYZMUXJVhdXnyiL/VNVCqJJVOgImNStCjd9bH2ZjwZ/qQYUyG79QVWCpgKmMChqVd/4VIkkywFXa2uRpIAhLLU5m1VG6LimpHOKzIapjKZdQGJoCUbq7bMoVyt+j5W6t+WZ/r/KqPLMbv1Kxurf//8tBTuFZBUABV3GwiMDZuFj//swxAUCB4SDK0ywaICeAyN0wyROlYmGu6/rSDZ4E2kDhIFxZeHE1XJXBGqqqgLGqsZQ8m6ArsXr1fUvL1lChr+v/7fq//SC5HLZU2AEjwW0VUCig+dQNmTNmsUQ+tQt+EhX+skFfU3+n+u7/hV6TEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",$R=Pn(ut,PV),eM=an.createLock(PV),tu=new En;let Xb=!1;const Pf=()=>{Xb||(eM(),Xb=!0)},tM=n=>{tu.audioBufferProperty.value===null&&(tu.audioBufferProperty.set(n),Pf())},iM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),tu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Pf()},jb=ut.decodeAudioData($R.buffer,tM,iM);jb&&jb.then(n=>{tu.audioBufferProperty.value===null&&(tu.audioBufferProperty.set(n),Pf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Pf()});const EV="data:audio/mpeg;base64,//swxAAABsArNnTzABEnmTA3HoACAAIOAYznNNVnYDYAWAjClBSA3BwKB48VkSUAABBynBhYP5QMCc+T4JnwQcoH/6gff/Of/l4gAIJkjluslkskluuAAAkTmCV7K1w6pqz7VkryDnmQVVFCJY0HRFDgrNPT7QRsUHNV+KVNJRPtYt0/426/nj/Tv/sPVjjhtrzPbywAATqIdRsL//syxAOACHStW/2RACEMj6e2smAEqYAYhGmdJfGbQRJM6d5rUVhcXmZTOP9blIoBChWlL5hQoqBgpUdHqJ/1McBGpaGctDO3++hgIUqDV8QgqAAntdpnEwAD6ruLLBhIIEPkpGtP5xWnwVF2czcptv1Fgk0VRRGN9VJRU46pQrSVRX///853QKKZ0dz3cGnwCKBwcHYEIC0hEM5EMv/7MsQEAAiQXW+5hIAREZRslzKwACEMBgAAD9/MyuFW/l8vMAkS99TuX45zufo9JjH/gbUAtafz/MqCaqJP4IIAARGcawPpR8H3iefS7zg45qAIBFAAV1AtJXsx44xwqAZ24lKIsEc5bDMUuS6XnBEXQqAakxM3KX8vlruv28Pc++21X/p71t0ufET/PUOSB+v8FT3Fl3GALLrbdbr/+zLEA4AIWHtvuPWAEROSLXcegALRIIBAAAAIpME09Jpkm6HEpcYWjTFeQLCjn4NAjRM5fbfr4UULuXdO+HtlGqi0a/9EFQ66zxGCz/4GGlyg0HFHJZM7ZIAwEAAAErGUoi0JXI6UF+hiurPpjdxalUIbk1pRYWEUpY39w/BVt/p1i48ySduL+KRKEg8sPo/yoV/yLlIIpJIQSCOJ//swxAODxLAbO7xggDAAADSAAAAEweQCRznEiWHEqW49z3nuJf8Fbqzvw1+e6j3TPf/BakxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",sM=Pn(ut,EV),nM=an.createLock(EV),iu=new En;let Qb=!1;const Ef=()=>{Qb||(nM(),Qb=!0)},rM=n=>{iu.audioBufferProperty.value===null&&(iu.audioBufferProperty.set(n),Ef())},aM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),iu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Ef()},Zb=ut.decodeAudioData(sM.buffer,rM,aM);Zb&&Zb.then(n=>{iu.audioBufferProperty.value===null&&(iu.audioBufferProperty.set(n),Ef())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Ef()});const DV="data:audio/mpeg;base64,//swxAAAB5g/PnT2AAEODWz3MPACATcwAQxWRG8v4t4m5Y0gGrH+vEEIQ0J864QJgfEs//KUlhYscDHWH/BDD+7p8EAQBB3pBAEAQBABg+fwQAAABLbkkl+wAAAAAAApUEcylxWEbBYbjKTtTlM3eamWe5RAcBxA6VypWY/T+Lr1S1waL6rSucRXH9ORv3pvMuaX8aPVHAAHBUpB//syxAMCSChfPF28ABkDiqWd3bC1gSAHIAIB+Eua0PmBBI8GxoUDjBQgFHgkCKwrcSkWU6j9Sd+KaBUriJjhajVnvzMt1d7qnsZ///XxGarCW8ICUBSEMlofMKEEMUxHBpw1wME1UzDAIKgQMlzDhMDDKBify5qB0oNf2gp6peEUEQRlcTW9MN8XxQTaJeim2apgHXh0BA42HdjNLf/7MsQFggh4Wyguaea5EwulXc0k5sOdsU8HATEgJBsocOAYml+fvgPRkTAMqGk6FmJpDTjOn1MGkcUStpHsmIbInFwJGEsLanJYVDH8wCQSw4BWcJUpo5emDQ4bvFJ8R8GGQ8Y04EKYPAAk7BdNV8H2mJ54aS6xWdoQwIjE7LBlCLKCIUyihd/5O1Pr/Z//r//+ugAkgUDASheRbs7/+zLEBQIIMF0i7mknUQqKI43cjOo+4jDKZN4nQ+nnzAIQAIFAOgYZUEPnmTwex2HYpllk6m47QrXB/jCOonH1PVe/P+7f/yX////+oAJ/YCSrrMBgnNhCHMIDzMAgfM3JgRnS+W8QBgr0D4Pqy1k7lMfZVff9q1aA+omBkMhA4OM8FGFw99bPp+T/fX//9dUAKAcCZaSBQNNowTBB//swxAaDB/xNGm7hhtEICaLN3DDSlmkhAGok1mBAQFtknQ4AT4+pYJAiw0w4BwzUW4PaQgrVEGL6z0z0QVwH+d6Zr///6v8oAG7eA3pboQCSbFGAYeB2anAuc/ywAh/BhEZkqxPg7Bp8kJci1ITUM1YE9UZUPaWOT+Ks/zzcz8VejwR+j/T+z9HSADd3AQ+ZeKCgZHp2Fh8NAB5O//syxAkDR9RNFG7hJpD2jqINzpSynmlDBxw8IELTAVYo5IBlgwaHhk9qYTAyl58Dpjtf6q3Dv1vTRnvlv8S/6P9ABicJuxgUDmP6IKqoMDx1iggKEpYCCGUl4HnjMrXBkpxbk2rPIg7z9PwGIK9Ap1blL/0jaJjb9f+W/PU/5aoApe4BRQuWYMAobdPOYFIYaMk6fJDqYhBGg0Dsu//7MsQOgwiUUQZu4MdRBQogTdwY6oFDoaFxGnF+6NKF+px/5Pgxp7nlue5Ehb/4DjJz2n9+z8633/7v/KgFMbgIZImmDYHG86VGIYtGiJdHPZNmA4QJDruegBSAp2mvCtqonzjRyjPTPpc6RzbxeJPndFfzH/Zkv/9X75b/LSHIAAIqqsBDGcsQI0YnBj5+kYCQsu4vQoAi2rOVhXH/+zLED4JGvEEAbm0jUKoO4KmTCVZRFoN0WXzjW0zW6Q28yWOZvKPjXpnMNBsVda1ccCOMpS9GgcVUAh+JxR+hMHbWqv3wolHgh/gLfq3QCfwYlZ2+kmoAAAqSPYAAAZXQtxfw5RFhnCEoyBHegrALYEK6pBnXpBhS/4ci6AoaNlhus1y3kjUghRNDGRIyxJtzBboYMpeic0Op0DSX//swxCMCxQBO96eMy3C2A0AB73hMkPMgl18xMmNDDAXHMEdYykxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",oM=Pn(ut,DV),lM=an.createLock(DV),su=new En;let Jb=!1;const Df=()=>{Jb||(lM(),Jb=!0)},hM=n=>{su.audioBufferProperty.value===null&&(su.audioBufferProperty.set(n),Df())},uM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),su.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Df()},$b=ut.decodeAudioData(oM.buffer,hM,uM);$b&&$b.then(n=>{su.audioBufferProperty.value===null&&(su.audioBufferProperty.set(n),Df())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Df()});const TV="data:audio/mpeg;base64,//twxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAARAAAWCgAPDw8PDx4eHh4eHi0tLS0tLTw8PDw8PEtLS0tLS1paWlpaWmlpaWlpaXh4eHh4eIeHh4eHlpaWlpaWpaWlpaWltLS0tLS0w8PDw8PD0tLS0tLS4eHh4eHh8PDw8PDw//////8AAAA3TEFNRTMuOThyAc0AAAAAAAAAABRgJAZTQgAAYAAAFgoMxGP1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7cMQAAA7gbOxVvYACW5Fntz3AA5QAAyAQIBEys3MtCTFFg5TGPm8D3KgDTJuEccMxAZkMFHzKy0ykhAROIho0JQOFfTbU8iRzFi4zYwMgBiUFMRDxoHLdpJtwSEMGBAMAKWRFL8swriCVA0i2X2oxYpIxKJZScr2+g+8oCBQ5//5cP////y4P/y4fgEAoFAoFArLYAAAAAAMDYCMx+k2DAeA6MFEIcGgkCIdk1vDGDNcO0Mt0zUwRA+DC3HiMGkE03THtDaEMoMFkBAwKgmzBaBoMAgB8+fQzksxMVigyANDAggAQJN9mcHA4kFpgsEJllrRoCrC05kkQjR0MTisME7eQcphFoRHX7nUoy4CvF0UrhPiwWUy2x/P/PDDn/jLuqAGAAwDcEMMCHBhjCbwtwwKoHpMM+Ev/+3LECwNSzIkWXf2ACj+QoEXu5SkzE0he0zdxYLM8SH/zF7hbcxLcKaMHFCGjA5wQ0wSoE1MK+B4zAZAMwwDwDJMATAJjAxgRc1J/MpODbWY3W8MeEjJxMAAiO5iZUAhUFAIqBAUiEh4OCQSGGHArEVNUyE8wYKmTDJZl8pVXx5IYtUr673fO8xs0t7Ptb8bKV8UnuCIwTR2DLDFMMHUaMyDhPDIsI8M4ME00OMfT/wfHOBoKcxZUYjP9nDXBIzYicDQuIjXdjAyITWM0DiVnjL4Gza8sjHUVTPsCDQw/wMRJhEBZiGHIYMQkLaKoVCMsAmkcYk5vHm0AIAwSGW2TdCGTMcMMCMLyVipZcplALqSm/DURt95nlTdZjvOYyWrK46xN9WogBoCswawJDJACtMW4KExLSlDBsP/7cMQKABFIgQI17gASa5Mjaz3QAE3NLvnQ3agRDJ+DSMbgYExaABTE4EHMFIM4wwBnzAWAVMBYMAwgwkjBjDYNAKwyiLzEKxPMXsGB80aSkKDAQoMWgYtinyYmCYwER4ElzUrDHIBWSrc/T4pDAoBCwVZK7mOFNL3Wh2NUzOn6m+548/kht9JTqojAAAAEgMQKAAAAAAMA8A4wNw8DAgA9MMUIcQhtmGeEGYMAu5gnAomMSHcYCYNBkVBSmS+F8YBgAgGBJMHEU0xtw/zDiLVMxpn4xFAlAGbDnGZJgUfrl2aOjomK8jJwUMhgGABhAFRgKCwUAAu8k437py0SDRp6lj8Bgoski0Ff+++iWkItSgfwrAOkgGWY5f//9ne//7luZoyn9dUFRgAAwIBIw5CYxaOMxUGsxfH/+3LECQNQPJcafd4AGmmS38XvaShMaMQ29Y4HAKZcCMZWigIzAMzxoCgAmHoLiMUTLISzNunD5V0TlJYNXoQzCHBY5jACC4TFgiporE9rpO005iSiseWg60bdWG2ove12Uw7EwqDm/fmUQfYtQ1TWX9eWHZbQWm53a2WrVWZlFN+rfqa0QwzxGjEDGKMJIO8x+AJDCjO1MnMPU5+nqzFkYHM2I20x3iHDBzC1MLsZsxoAeTD9CsMMos8zVDZTN7EePxtJIxYgyDGTB+MPIHowBgGTADBbMMwC8wdAHQgAQwVwPlFxQBAwLQIhICgSXHCUCJKDiKuU7VAVVa7EVuui/6eCOSJLoN/GpSyzj/3aWls7w7EMufvur0t//tfyepULAAMFIm0wPA7iZsMxzQnjI4CXMkIcc3s5sP/7cMQNA1L0jPxPeylKLhGfRe7lKDdTH5GhojDABOMIkYUwNAuTGYGZMKEnMw5RgzDsMvEZsZsuJMGB0IUYbAIphfgdGA+DCYBQfxg1gImBWBMEAOBYBwwDQDk+ESQCASVEjLWMJA2YUAyFiirR2rNnEhGJxRfAMVSYa/K2uxFLZyY9ALryyBa31mHYXsse6+il0QwGAzDEVK6Mc4xQ1IgzDF9B6Npko4yElYDF9IGMnoGwzaSlzxAXzJ51TMYUjdJ8DBIajEz7j4TjDtTFTBaNDKoJjJgVzEJnjFgLzHoWzDQMkaw4TjCgBWmR1ahgHmUObQZ8uBw7/U0NqvX+pi6cMMwCwctZS8lLVXbAUvfaFYaw18B8s95/3a1C+7SqDQADDyGiMrE1QybhITRuVZMKYroyWRTTQ3b/+3LEDQNTCH74T3tJQjOQHwXu5Si1MVYJYyuCnTBmGJMjAKYxKBBjIpHGMVQW4wSBIzHZFRMfdJYzSWXjBrIzMVMOowVQNDBMBfMGAIgGgSmB+AQYB4BKSpgOgCl60STAJAMSVLUGTUnWAwajZPLzVYFySQT3UkGQ6NCofaHDjAkvl+bVW7N37Eb21jAJBdgiffpIYRJMhhFhymNmUUYqY/ZjKjymScW8Y71jZoaoamSqPyY/g7ZnyZZqs8ZmwAx0bSJoXG5vMPJqs3p0j/Jw9JBnWLZq8XZiURphEEQADswVAYwFAQOBwFCwVgaYCAmFADBzYWVPRM3HVLKFzKN0gqUzemZ08y1KNesWma1u3LoakFNh3fx+zpihGmJDu/TVMLUYcyLB+zDTE/M1MgwxgQCTATHNNNW0U//7cMQMg9AYfPgPdylB/o+fQe7hKIkx/DKxKGMy0GoxzTkzcQUzPL00cgQxnZE2mVszgdQzBtM+2AUoKExLAIw9BowtB4w1AQwBBdwQCAxgcCaM4YBCYYkcYQhmxEb0NsmWO6CQ7cnlzmGVwfbmMrP37m5XO///yImYwX+swEB1zFWAWMc8awx9hSzC7C6MewRQ0GiZTadBbMQIRAwOwDTKlXTF1CTLoWjNlbjABMDFJpTCYtT8PIjhwBjDoOAcWhhEEBiCHBhKAwCBAKgqYCgQEAE10MAWSgU5QMG7DnqBsEbG9bNYam3/ksqrXI7d3nQ473nqxvWM8fyYgQolAAMEiHMj0fMTBTM7hoMvhYM9yoMQfQONUNMoiqMESlMJ8AIwfgbzBJBwMMUUUwjAUysDkwNhdDQWDAP/+3LEHgNPbHz+TvsJQeIP30nu4SgDEBEgBhMCgFkwEwEgMBaYAwBCsZWAQzoeAFh9oDBosWZZ0LTk0NOtK5evtb8vns4frSrDV6rhn3mX/zKODLkHIYMQCZgYhqmFwEcYzALBhAg4mG8CAYlrfxg7BhGKuICYF4LBiUM5g8BQMJEzID40bL0xKLYwMmw4t98yiHgzdD8CDkYIBekWYFgqVQAAoAMrCArac7zC5UWADFYMl8ifyiVpZWwyXwywCVyOzey1PX9V/z//1H/TAAAI4AAETSCErTTotzbsTzLs7TNkMzIS0D/pmDHkmTGkczAbByMI0DcwRwAjCZGUMH4AYwoAJjAVFvNh8TgwgASQIAgYHQMpgFgSIIjAXACFgCYeVgMAQBqILBBYAFpTPXTJwz0sdqHWvJOiSP/7cMQ2g0+4fPsu+wlB2Y+eye7hKIdobk7bu6z+13Udv///8x+mpDCjDRMUgCYwUwpDANDLMGcOowyg2jOzJmN+IQoxdAhzDyCdMICkARmmCgImaagmVALmeBoGE+hn+zWGW4/GFgpGG4qFA7jIXiwhLbXYyUKAfF0BSwCg46JXxma6jiKft27aeM5Fnpj1q9Pd/LDOknsP/907tSpADB2CLMPQNoxExQTBCD0MLUPlQwxUOHTr4OtMWsSQwjwjzEJI+AgbpgECSmL0IiYPIIphSAIjxVJu+FmmIeDMYRYOJhPgJGCMBmYB4EpgSAIgoBNEhpw4Ak7jJYAjTP0bAkOG4Dzjj+kISMEUfaki+/1hnhVxgrX//fsv+iBgajjmG8RwZrYgRjCClGBKOgYxwnZii/hmhECgY3z/+3LETgNPqHzuL3spQe2PnYXvYSgNZheg4GK8BOYSgNJhJCIGCQUAYCYMpgyBvmFccYamYOZgDBbhA8RMD4YKYFxgfgWkQDqJCMsFmAUAWrC2VlqYMsCswKppandmgl6WiSMtrfH8prP+5f2anP5//TUwVAaDD0CMMJweQwjQ9jAPBtMvkZk1ysPTdxSzMVkN4xXBYjFLFDHhJTC/BeMYkdUweAJTDKDOMWMc020wDDGGBYMJ8NgweQSUEBgTAamA6AqWRDACBYC0OAebm7ZaFbzgraK/MkcnCWwIl8pvUlUkoMovLcua7lE6L9/rGzQgwLhcTGACZMPoSwEAXmNoDKY/QtJpKfGH4mMuYdw4piNgkGMMBmsa8mOQmmd0OmT6tmD7PASyzt60jOIOzEgHjGAnzKYTTBEOwP/7cMRkA0/EfOgPewlJ4Y4che7hKaAxg2AZECwqApaCgaQLAE8CM5bM3BjTW4arsXJTj45+WRmmvYyigzx3qryX6TVVMAZAtjBIATMwaQB5MB7CmzBlwMgwVcG0MIsQsjIeQ9QwpA7zFxFcMJcBgw8QODBTBGMGoi4w5wlzDcDdMNgHQ06iITGJC2MCcAowBgYDBBAkMe3O4bQOeswgMSROo+8Rd52mMDQuRvhHbcWbq+dqhxm+WrEsAq7n7PIBgBhcmCsB8YaRRphEgWGMiEuYCojRn886GkoJEZ8l4ZoCQa8EmZokiYXg4ZrmwFx5MBQpMvnYP9XXMFCJMVQjMDCRDhKB4o/AEVAwQEGjoC+0AJZ9Whn4OGBTTfNq/EYmmFvf8vuV+3QKIrtLdaoABVmL0GMYzAsRkaD/+3LEeoJPGGLmD/tHCb2MHNnu5ODaGIuDSY9As5uSpwH1AV+BmHjCfE2M2ZQgyTyBgADSYxJWJiCCQmNgEEYgY6hjqo8GEoD2YAYNRg4BtGA4BKdKeCuwsPZ8ieX/WBLiIPqfGQCyVPWoTCI7C4S92FBjSfjcv48++FWulxdwaYAgAdGBYA0Bg+QY+YPOEsGBOAxpggAd6YPSpJmSmAyRgUoBYYH6ATmIKAeYeQmBhABYmVMFaYfQDJiiAxmLsPIZoiwZj+hhiEAwwIASxgA9WQwHgGFBEbEQCsAxhiKy5VXNhEKUAbzyCVU0AxqeszFypzeV+1lUxp/t1eoAQGKQAAwLgljEMBsMhsagwog9DDKAXBAThoRXkmn2R+YLwbhiKDKGPmKUYbAsZgeBOGLuPAYH4JZgdClGJv/7cMSYg87UbNwPe0cJ7o4bAf9hKeN4bVoJ5gtARGA+BwYAYGRg2gYGA2B4VAGwMA4UAByVWFyXtL+xAOqqsAlPplTVneeFaleIT1bDDLDWe/ufoMFUFgwDwxTAlClMAcW8xICNzCmCZM3pz86SyWjJYgzJQNjRiDTAoADJ0kzRIwTIIsTSAdzETNTQ7cjJADDNwLzDUJjAcIFTgLraA5zbN+2zTmVJjNTVmguE/uNS6XNBnPx3YuXbOG96rEXWOs//1f3p///7v0P6qgC4AFgSzBcDvMO8TIeJiBwPBgXhhGCO5QbAYRxi0J5ngVxhyaJkMDhh2HBieeIWGQzlCgwaOM/SmMz1A8xgDMAhMYWBSNZLRLxsK9a64KlrDKr0srbaUz+FmWtJbXH9739l1bm1ffH7f3JV3fv/+3LEsQBPmHDbL3sJQd4N2oHu4OD///X///fpIBBgLAWGCIHaYZgK5g5ATmCSC0YeIZBjkq5GU6LUZykMTGUYWjMYijEYIhcYFhIYNgSZDhKZBPMcfjuNBEUEEAhFUZJwSdMl9JaOKz5DjqhvcvHsVxjMbjCAqV6+9lyLbLv3a0X6ESHnjmkrTgX6ewW628bWpy6aAAAEIBKAAYVGgQJzEA7MHBAeERhQBG6YsEF4lDMeEoCAUYKgI6ZVAYEguZjC2ZGtMcWpghOAQLKNr1LwVPu2Wuurc61Zm1tOXWe/o1tDZJ5cXoLq47k/vbkMSqQ57UHqbUISVThclJqqsAa1V3dqUsXjENcTVSBUCQHmLDZKQCFtO+lwC+DVGKFZhA8Ck5ACX2THBAR54Dl4c+jQuNtZdZ7rPuOGX//7cMTJAk6AYtSvdwcB3graIe684Jd3Kc5TLcMqa1j+V2z++ZfljKYdvVqa/VlNNTWpkJR7VjzOVVd5NBQlGc8z5NIkUcNIozLbzkcqq84/8kUcf1PnK74dLEkq30DAFGtNIonJMclvNIy5wMFJGkUZk4lppFE4ldVr+qreaiclZEjO/scSJEtxTEFNRTMuOTguM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqCQACQKKEgQswmgpKTiyiyizTjSizDzDy2eLzc/ypo0osoCEihIoDEA5BDcqWco0FBgUUBgQsQLAzjSizDzDy2drzcqpo0ov/+3LE5QJOoF7PjnWHApQz1oW8mbkoso404so8w+GdnZ4tv//+7VNSUWUWUKEihIELECxAoSBFmHxcNebNGlFmnCRQkCFiBYkUJFAYgWIFgZRZRZh5h9VVVUUJppI1VUxBTUUzLjk4LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7cMS2A9IFejpDGM3IAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",cM=Pn(ut,TV),dM=an.createLock(TV),nu=new En;let e2=!1;const Tf=()=>{e2||(dM(),e2=!0)},fM=n=>{nu.audioBufferProperty.value===null&&(nu.audioBufferProperty.set(n),Tf())},pM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),nu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Tf()},t2=ut.decodeAudioData(cM.buffer,fM,pM);t2&&t2.then(n=>{nu.audioBufferProperty.value===null&&(nu.audioBufferProperty.set(n),Tf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Tf()});const xV="data:audio/mpeg;base64,//swxAAAB3BPLHWkgAEQCy03MPADAYAEAMYCIAZnV5vYJv2ZoxqgRhBhkBBkRJhwZa9g7/tbYe1+jC4beogQMZ4Z5zn7mgQQdxOH//////6SQAIzbNJJdtgAAAAAAHjcV2B1EBJLBB4wV9rCWp5eq0EHE43FpgLhkjdNEqGhFqhSQlQ4TwqZdZ7fN/Hm6YKiu/33NoUAACApAAAI//syxAOCSGxzQ123gDkDjCZJvLDmDQ0HhMRgBVEjBws2OIM9Cky1VU0REAhgK47nqWwHAkIYcB7ePHvXeo2cV1nG4uL6rjXjzXt951bbjQs/hQuyxEeFQaEGUgRohuYvQkhIfrBnlFyQoUla/qMye4qGxUqjhxTJIFPCOfamTewcOH2SkYCFVa21OLZrySygx+bV4B1xgBhA1DB0Bf/7MsQFAAfISyw1x4AxL4ssNzGAAigYRigH0YoI18mGQKOgZ+FY0UWnyRsLJgZYCShStOpdQYKdeV5/q9jbIDYPkLAYtiTETvrZLIYEb2u2uogAAAAAAhkChusjjbfkXleOGpiySKjhjUIlMla3JEsHQqgBs2ns50DIPtDIgjJE46JnUPRPPPOG5G8/yKxQADAZFTP1KgAAIX0AGkv/+zLEA4IIRJ9DPaUAMQuN5o2tmYqinck4ucZbhxEBHFls3WFfhr6dyvz3zgxEmEABChAREwQIwJRfc1jx6QHFWNNqQkrG5wvNNbdf1b//kxUACACHIGAlgmUgpccbebl+BkKCZXQyCAwpKkwRUzEk7AIAwgTBahUNNHisAuFoYmM12rXbbUJ2v5Cwa++fDf///+mgDERUoJgUemjg//swxAUDSExLJi3phxEQCmQBrbx0BkCOdSyG/xxiJyFwYUOAZiABRh0Zh64k8Pj7NAJTjWFStFgyvxBK5IhTLDstCt9Y/SAqpLqiYU1gRqYoIfCMbtwYtoG77YMaQdBGoPhoQOPIxjIsCrswBnOHTzqNAI9TIQEiAQc0oSX9JssKWBt5O9HJA8fEWBHxeXEQzXUAKsQAXwMjEM3O//syxAUCSDxVLM1lJzEbCWPFrmxBNqHM4RC+k5ZUzwUcEaSmKZZCdwJRBNZkJiwDdFN36YdSqdqUT6pYDZ5ScxSDVfZPSpL8M//b6NxDNtjDhTpxDmMDKQMMw1k08tNDTxrGMKLQxRDCMevDKlACBZi1WYsoiEOBwEwdI9e0vdBptNKZfgzJsVH29qtOpUET8k9v4mAAAExTEHgUKP/7MsQEggfQUyJNc0QA2AklmY2YpukjMG6N4KPFG4xmOjdBnIQqBgcbgGQGmcNGdaHtBQplqcsNdnbkroa0zXiUXxyr9wz/WF9usagQAkSHDHulGU3DjA44xIgQwADplHVAGUl7G/MbPAcXSMAgRGUSoN9OUp+zGuLf///V3//+ugKcCSTofFaj5oNcoyUgyJfAIDMwsQBGeEBQiGf/+zLEDgJHUD8UDOksQN6F39wxsAA60sBDGHr5bR5oZBEMkscKhnEIJPCh6j//////+n6AmBgKjhFZNEIgmCyGD2UQjAVEweC2peqxVyOIpL/WDXZ7cNcFTtQdJCEFQVGLPFgaUHJ6dhojDlVttOCJU4BB0qsXplV/tncqptv/p//+n//6abf////9QTTTTRVV9UEJK0kIixWmqoc///swxBiDxvgCi4CEYAgAADSAAAAE/1TTVEWK6UxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",gM=Pn(ut,xV),mM=an.createLock(xV),ru=new En;let i2=!1;const xf=()=>{i2||(mM(),i2=!0)},yM=n=>{ru.audioBufferProperty.value===null&&(ru.audioBufferProperty.set(n),xf())},_M=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),ru.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),xf()},s2=ut.decodeAudioData(gM.buffer,yM,_M);s2&&s2.then(n=>{ru.audioBufferProperty.value===null&&(ru.audioBufferProperty.set(n),xf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),xf()});const IV="data:audio/mpeg;base64,//swxAAABriDQRQRgAEmkW2XHpAAAJQAAHgAAGAAAABIDu4cDd3/r/1wAAAAAARC/9EREd3d3PQDFg/D/lAfflAx/BMH9QP/ghBDaMSKQDL9Jl8zrxkLJ1driXbAMCtXKORoVLbBiwvIKx8m21HBZEfMq/0x/+KVG0Sv/////Uc0dO+i8Kkj3feKlhICwuZ+X8KkA4p+8BQpQAET//syxAOAB+BfSzzDADDmiiFBjAzgIQWVhDQDISg5HQzTHx2LQbHxpFGUeaRR9PJpFGqnPX9VQTICeoDA0eWdqBpYb9GV2lga/wVf/Boz4EawwCWbQYHfhmyxUqUCkE48QHSMRwuglOIhIgJrr1hocKgoLSa/2MFBBwSJBQkaQDIkNVC6Xfi9TEFNRTMuOTkuM1VVVVVVVVVVVVVVVQ==",AM=Pn(ut,IV),bM=an.createLock(IV),au=new En;let n2=!1;const If=()=>{n2||(bM(),n2=!0)},vM=n=>{au.audioBufferProperty.value===null&&(au.audioBufferProperty.set(n),If())},VM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),au.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),If()},r2=ut.decodeAudioData(AM.buffer,vM,VM);r2&&r2.then(n=>{au.audioBufferProperty.value===null&&(au.audioBufferProperty.set(n),If())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),If()});const kV="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAJAAAIpwB1dXV1dXV1dXV1dZmZmZmZmZmZmZmZt7e3t7e3t7e3t7fDw8PDw8PDw8PDw8/Pz8/Pz8/Pz8/P29vb29vb29vb29vn5+fn5+fn5+fn5/Pz8/Pz8/Pz8/Pz//////////////8AAAAATGF2YzU4LjU0AAAAAAAAAAAAAAAAJAaRAAAAAAAACKfAKvQnAAAAAAD/+9DEAAAOsE9AdZGAK8QbJPc/sEAAG+3c2nDeiOKI2kELTFZOe88bTlVNYoyijKIMQAuIoIxCHLCJXfiAAGBu7u7iwAAQAAAAPH/+hH//+Hh63//h///9Dw//wAHfmHh/+AAH/HDw//AAB2YeHh48AAAAARh4eHjwAAAABGHh4ePAAAAAEYeHh72AAAAAAgIGjKTaAgAAADF5zj41poBnMb3YuDrZ4lswWUT3NCZKkDBJA0IwPgKfMOfCCjBCwXEwfcFTMAZAMjBZAUkwToD3MJ5BHTAtQIwwN8BSIAB8wl6OBagd3mygBhQ4n2aSoGCCpjg+gjBRXLFBUc1FzFBNYIwECT6EgFQMwcYTWZjN8zetdqYr7OMFgASAmvSFbsCMnsyt5YaiLuxmtTc/Ln/zm//y5y5WusNhprzDsst/vn/////VpZTWppVVpaVWt/g0FQVEQVDSu75URBUFREDIKiK5SrP+FQVFAqCpYKgqIgqCoiCoBn+ANTNR9Qnf9QDAyCTMLwPkxiiMzLantMFUFgwBQFzBSBZMAwB1N9D5KowGweiYA8hABLigQAMtuqACgChABghQCoWEwjHHYoeynK7nyOIUWogYdzEPeXRdf/93EzSTPHHzdMvNVURcJrMu1Qn/yNHvOCiTPVcKZ4Jd9aABgZgAGFwCOYpoYBuSTunDGJWAjEDwXoedDHUcykRMOEDRvUyRGWss9DxDsKiq+hoGL/NJcyHaV/WqS10Lj8m4fUgtKwEoz9xzkxTEUiPXSxWZg8dR1MVNFsKnGcb1jVESp/JeehYdKA2B2gsgofDp8OxYwIUg8P0rqp1pfay9SxSMKU/20LvtQgAGPd/rRAMCcC4wNgWTA1E4MctvY19w9jCOB7NS+MOCMKOeAEiDu1gUDLJKSXk1ouM2Jk0RipZHIGzYkvmJZaBsU3Gzw4XvWPBcfkXD2A4lzobX9zU1HmDpxrnji+QYywuly9fWuBN5BIJLLDAbYIBQ4kHywjcRUZY8cHiRAigzC9VahyUolPqupX0+gABK//76tAAEIMMQgEzERTRNAOyvIyKAxHYtOHQKqAwZoGNMV2jipUhKanaYEuqXNAKDJEiQwRbUxSgD//twxOOCDkjjLH3kACIxlCNd7bC8SRNKXVYFRdFKV+4NWSKnVBQOlXSQdGLOhMNRFv8e7///9CeGqkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqv/7YMT2ABGQoRtPaYVhfw2i9cwkrKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqTEFNRTMuMTAwqqqqqv/7EMTWA8AAAf4AAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//sQxNYDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7EMTWA8AAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//sQxNYDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",wM=Pn(ut,kV),SM=an.createLock(kV),sh=new En;let a2=!1;const kf=()=>{a2||(SM(),a2=!0)},CM=n=>{sh.audioBufferProperty.value===null&&(sh.audioBufferProperty.set(n),kf())},PM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),sh.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),kf()},o2=ut.decodeAudioData(wM.buffer,CM,PM);o2&&o2.then(n=>{sh.audioBufferProperty.value===null&&(sh.audioBufferProperty.set(n),kf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),kf()});const LV="data:audio/mpeg;base64,//swxAAABlAhPLTAgDE1De+/HoACAH4CwkCAJDo5gDgPRksn2WLHOB8EHShd5cHwfBBwgBBOJw/UCAY/lAxWD/4DB9+CH/6XQjMTIIcYUIQPQIRAIBAACUIawkYq7IQ/BawVqEc7mTjD+OFygBAnHbHq7UkLJ8aCnnrZlPpg3IkRJBgPH/MCQCI985/yAnHAAhmv3lHuAgAgAxJF//syxAOACHQpa7zBAAD8EunxpI3HUCEZHQlA2EYuDsSjE5EkSQGhUDYDxOARLoiBmIgalVgq4qWeWBqsNYKywNO+p/sxFyKwVOlXRFDtZ0S86oQ0C2W+wBOmlaWuS6+BIqZMz+AYy3FuwBkKXM2idVoKlYwUd/oIGgsbLpEbaCsmIyZRtbw6TPwj+mYmGr8QqnGHBLo3LKAAxKabZ//7MsQGAAhsl1OsPMcxAo3mpbCaAvIuuQRmW4WNHhDBJnoBORIlh+I9dvGCTCKP0kzo7rHHTi87diQ2XqnRN77y8lnKUl8zf+X0Fu0iCDV/9AP7el8Cw8raZKqiYShe+6bzYk0zXmEuGnBDcQhyRzPeI4Jbsmj5OxzZVhSX9adVU4Kk9r9esE3etv+/6wUIg3Wm62nA3Ab0EIcLUQ7/+zLECABGICs9oemDMLwEZrQcvFYyDBCUCgUAwQCUSvgROof5poGn9O7o70P/X9P/T+360+lAhIJVtyuNDljXzM7Ek0fGUB/ltZQF8iD7dBcVTs00f31POqR0/V/q/pjEe1z3jyAAQRBHGmSBEEVK6QIYH2miQZKNfgCVtiH9vVLp+w7an/d0jdUx9VnqZIJSvFtsaUFKKFBVCzoe//swxBwABSAhLaDl4nCsA+a0fDyG3vbgKx5OhNXyuPYt7kJJSg9B6heqxP93q/9P6IwSQ8LbYIFBVUF85RwseJPX6+Q7qIq7f/8ayokh7P//V8oyAABbhbGEIBBhOJgEGTBx6KjUiosS54l6y0i3jOz/6f///RVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDWABEQTMaCF4HCNAmL0EJgGVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",EM=Pn(ut,LV),DM=an.createLock(LV),ou=new En;let l2=!1;const Lf=()=>{l2||(DM(),l2=!0)},TM=n=>{ou.audioBufferProperty.value===null&&(ou.audioBufferProperty.set(n),Lf())},xM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),ou.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Lf()},h2=ut.decodeAudioData(EM.buffer,TM,xM);h2&&h2.then(n=>{ou.audioBufferProperty.value===null&&(ou.audioBufferProperty.set(n),Lf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Lf()});const NV="data:audio/mpeg;base64,//swxAAAB5gnMzRhAAEHDWyDNLAAAAAaAQAu7tjAQAAABgMBgNNiBBAWD7ykMQf1g+D5/qBMHwfB/iAEPWCDv+o5wfPg+8EAQBMHz6gQB8Hwfsu2uWDrkw/a9xgUaMwFxxwCLsWS7MHN7VJki8fVT75eTqpn7/Xt1QxW//lJVbnfNuFRTzwrLn/5GVBnKMy/FVs5dTYABARKCMRm//syxAQACHBHWZ2kAAEJi+jxpg1Qlry2AYclVGyMwNoFJ29hqHqa1TRqRMCoetKstcqUzHBxQdCJmVcSJ/EQdEo0FXSoNLGkav/ljqPtEvjAoAE0zuEoM3lMJlLY3Uj65AMeMzQN6QWeLFdCcxLNFy4dBVXVfZ1L+gIki4KPQVBb4dERU6CrsFSoaLVHv/Ev9Hw4ANdAAG7VBBhVdP/7MsQFAAh8YybVowABG49vdx6AAm8ODBg8FDy9pmwIBsHPVGiPMueyERxZdIFnSpkzI8fezb+0z6OJVv7HHw7XBWdXwa6/y34l6sq7uitTjFTEgsFYrFQqFQDAGrQXMbpbb3ZGQWPWvTnyyeKKHgQ/nvlUf/u74oOHp/8v3R/dl/UcSXDz+kMBEHI0p5efiDJqb/64foFiBSWqB2r/+zLEA4AIVDlivZGAAQePKiWmDNhtwTYmBYyxnJdmZwmMtZ8ZjInEMMpo+VFWESqmhsWBoClhKKEhCW5UNPCsFVgqImyWS6KTAhEUrYoO7kaAWIJCwQzbgl5XrFBB27xoQwfnY6kozJtFz0SgICsWM3VIKWs6qr0tgI15/pQomHhblqjycRUCWe1dUOpxFOiJ/ooQC+IEEBlVdh0r//swxAUACGCjMy0kSsDoiCAA95gpQaBI041ceup5PSlsv5QNXMyixFLVkTXWpYUBYy/lEl4YCdWlLoZ//zGlKUBEhV0SiFT+us7WdBXqAbQ2hdxgDfH4RQsI+kgo2RnWVECiCa0TrUSNjalrUVVKyg0yapYqqVlRTNVLFf/2P/1qVadsTFKlitVMQU1FMy45OS4zVVVVVVVVVVVV",IM=Pn(ut,NV),kM=an.createLock(NV),lu=new En;let u2=!1;const Nf=()=>{u2||(kM(),u2=!0)},LM=n=>{lu.audioBufferProperty.value===null&&(lu.audioBufferProperty.set(n),Nf())},NM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),lu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Nf()},c2=ut.decodeAudioData(IM.buffer,LM,NM);c2&&c2.then(n=>{lu.audioBufferProperty.value===null&&(lu.audioBufferProperty.set(n),Nf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Nf()});const BV="data:audio/mpeg;base64,//swxAAABswbPzQxABEQFyzDMlAAAAGoGRIdz0AAARQAAAAAMCd5QEAxBA4sPlz/BAMfw+ooc8EA/EAYKAh/qBBYfwfD4jB/4nD98ZXetEKIxIqnuursF7pTGkY4dNYcaZhOjzgxDNndb75ggdCsIvV3qoeM9HIX215a6Hftuc5FhwFRhvuJuhxbMPp+ir0KlAaCTHVtZuCsLISS//syxAYACGhJXR2jABEVIGmw8YpieZwGg6y5/p6bf69uls4kMS9HVvrXl8hI5WPBY8FawqGh3PYlLA0HQm6ZHvUe/4UB4ChNzls1AZIAAxJNQMBOy4KAeSsL0QgRcxFInzpyhsQ6tvdvaM160ZnbY/2bY19dTlJVJmhrQpT/Vf0eVjfzG////6PMYzmtqJdg0WqADvRwaGDBgBO5T//7MsQFgAkEZSA1swABDRYvdx5QAhmAEZHdFc2HHLBy/LcmfqWvq1yftVsQSJAxzSi25i5w6qqvMy/cjgNSoKu2Q1LHp1S4NCJQsHfLUSINPxK6oxocyIhmMRkMhQAQBuyhLerW2u5zoV4af2nULcHzwOiPxQjFU/nvIyflMKARabfnQqGI/v/FAIV6UJnPAgAca//9NZUgFEnVWuP/+zLEA4AIVL1vnYQAEQkIajDMpMja7T9a7DL+uzSEg2RRajlNmUzFPCBtL7Uyoa/iVlabnj1+Pi9f61X5WuJ9V1XhkOmtYltLGPI1//8s/0PMAKmLuWQPy0Hrh0Uy4C5MCaWoC5bwOjrQpVOQIn9JNDksr2zEBLvAp3LCI8Is9BX1FTsS50j5Us8OCIqEg73ZZ9QByyIAiddlUPU0//swxAUCSEyXLMywatDDBOHA8zBIRfBtlFDU3P7EItHsWE51WgaTVpJLPMzOMYE1qUSth4pRSd1WkZLqqrnGPUobBm4oDUDHol//+rJBUlwL0rYuAoOSuFITEsfTp5a46IhKRBQ6FQkBQCWJESR0KhIeNASKGnsJgJCf///1VUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVV",BM=Pn(ut,BV),RM=an.createLock(BV),hu=new En;let d2=!1;const Bf=()=>{d2||(RM(),d2=!0)},MM=n=>{hu.audioBufferProperty.value===null&&(hu.audioBufferProperty.set(n),Bf())},OM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),hu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Bf()},f2=ut.decodeAudioData(BM.buffer,MM,OM);f2&&f2.then(n=>{hu.audioBufferProperty.value===null&&(hu.audioBufferProperty.set(n),Bf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Bf()});const RV="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAEAAAE/QCbm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5vBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4P////////////////////////////////8AAAAUTEFNRTMuMTAwBJgAAAAAAAAAABUgJAXmQQABpAAABP2CPnqIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//ugxAAAAZABXJQAACjSBy/7MvJBlbA24AeHxx+Z+DJ48Acl/O7e/c+wAAAAAAAEggodS1KhDIMHY9Flj8OAaLhIDnqje9htgSxoj0q3Fksjnr007hUgBFiJkAAAAJRul9HpGarkErUNUSqvEO5RRnr0CYblhVBIAACITTDJN3xrY6pMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpcJoKAAAAAArSgBAzM3OFUFV0GH4AAagOAQ5P8ZoVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sgxNoAw8QpV9zxgCg6A+w4kAkEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMTlgMI4H1/EgQggMYHqUBQYBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQxNYDwAAB/gAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",qM=Pn(ut,RV),FM=an.createLock(RV),nh=new En;let p2=!1;const Rf=()=>{p2||(FM(),p2=!0)},zM=n=>{nh.audioBufferProperty.value===null&&(nh.audioBufferProperty.set(n),Rf())},HM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),nh.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Rf()},g2=ut.decodeAudioData(qM.buffer,zM,HM);g2&&g2.then(n=>{nh.audioBufferProperty.value===null&&(nh.audioBufferProperty.set(n),Rf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Rf()});const MV="data:audio/mpeg;base64,//swxAAABognHnWRADEriei3OrACCEgYAPOkFXghY6uD++Piw3kA4B4y7hchMBxIxLKSksCwfB8Hw+7wfB8H3/E4P+GP/++D58AABoNsRiAAegAAAcAAwfGEzHKEwATU0FYIw6Dg+OLEOCqwYUAazcxYAwgAWZl5g4CTyjQM3o0EQLO/PjeedH/0g7/quk7v////9CoAAgKS3agA//syxAOACFhpYb2WADkFBWUpz2ROAUr4AUY00DNWPwkiueFpjWamdXncJm4WSUvPYHtdLyIybUkqNbEdOAeIJqJS89odMGRdRGULsKEKKu9sAAFgQA2oDCIoIgGYfBxqSpmFgSkaq7FxnJizGCsESGsoBS/52SlqFCkhXIYlBMPwLKiSRYVd1f///7f/lUfvy2gAAL45ZHAEVS5wEP/7MsQFgkd0HRVM9wJwooOhqMw8TrAOxggWZrdB4KswIKoWwjoMDKpkDpawRH8EDMvQbb5c2fQ5IXBwEGakBD9/3/5ub1lQm4/cLYHDTARtPRS+xTotNKqDqFAVBUFeVBUFU4lBYO8sDQNB3iIGqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+zLEFwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//swxFsDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//syxJ6DwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",KM=Pn(ut,MV),UM=an.createLock(MV),uu=new En;let m2=!1;const Mf=()=>{m2||(UM(),m2=!0)},YM=n=>{uu.audioBufferProperty.value===null&&(uu.audioBufferProperty.set(n),Mf())},WM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),uu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Mf()},y2=ut.decodeAudioData(KM.buffer,YM,WM);y2&&y2.then(n=>{uu.audioBufferProperty.value===null&&(uu.audioBufferProperty.set(n),Mf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Mf()});const OV="data:audio/mpeg;base64,//swxAAAB2hBNHWcgAERC69/MPJDBoAAAtMAQkIoPyFQTJPM0NVYzRy8xtWHpkcxxIacuJ3vlqjpzPGMBRuMl4kQ0yrG38dh/IxSHA+Ud4fETABABElVYiJ4AAAAAAAAeAdHFiQc0wxqaGxfhl+WkXVkI2k9KiBoVzKRtDAElVmeqzlTNtkS+ZRMG1PvI/W94/8ELbWAAAKoJCoT//syxAOCCCw5LF3NACkKh2SdrfVGCg3Cg4Dj8ZLARh41mQxkBgoIjEZTBJjYImACgZ3Whtm3GSfKawL4ECw4WNm+OWqNGSDA0WpZbZ9C6EEKACABE0OQGPHNUOioNqeFiRxh4iSHaHIzHSEHQ1Jm18aQhHVbAGKIIGHgDI2DoEkwGpiSm7L+3Ke0FOb7v////5YAAD0BgIAI2mkGDP/7MsQFgghcPzNM64Zw/QYk3a9tRtoYE52cH2GYQxknpylpgYwBvmhj+eXdR8AmmfACBiUXVYPBUD8AQFVjXou6mqSrKnaY//2////YEwSUMBfK8BUeuUwFk1FU36M5CIHFkGAKBBjYwHg1zDUTtMZwHcHz4KD0zG7NbljlV7oLAI3vKqf/u6v/7v/1qk9RWgGiAmk5gVFlBg4jA27/+zLECAJIVDscbXdqMQsJZSGu6Q607qEyoUsyYQsa4WZFjwf3IccSied99GKhYQEJ6KBkQAznesavLnbVe91/L//2dH+W/0ATBpCfQQLC4JXplcp6bpg3hwlhuwpQBZisgxuJFRnRzxkUDJp/Jomgksp3QjjMwUjuK3tvK4pDdHhuu7cXpLf///01AGVcIIA3ZWFKNMYKFJnomaOT//swxAkCCOhJKu3x6nEFBqSNnfSKl1zS5A1JNNIaTwh0x3ZD6GnMOEYFNMxcI0YBipZGp4/XR/P2V9fOftSo1lR0fuPf/b////tAww/AQ8JYiLcdCEPI14ZQpG8t5tb0fSmmbyXGaQmmV7xn4SVmaodgJIGwu6ipEYy7dHR265Vu39kn/9H//3/5ntUAQkoogD/JlCQFClFzbo0y//syxAgCCRQ1JuxvpDD+BWSNv3UGLMfgTI9WjWCuD73STVYpTDeUzYRmDF8ZjCsJ3cUEaatVwX4a0+u40bVvSOI8VcLRFb/7E9v//9N6slrYEpSIZw1MumYaVGgnoOWRkMOrmDY/HmMJ0BUxOqMwNNMWOwwXAhLFzoLhqNWHLXInTFnd7f9u/7P9qP7UqixpXAIsVcDWHcMrUTGig//7MsQHg0dkLSBsdyTw+AXkDa9wzo6TJIjTHyFT/61jGwcwpXZk+s4kO57Hxh74lUtT8m6jv/6Cq3fq2f/67/1XOWV8SUUEGBkOZAsYVKYIYfNSGA3GDAM4abxLpgtAgGbsKfLnRikHBhPf6lyvU1v5LebiHp/s/V1ft/2J/sRVFoFYAWynOROSA3HhI8RImXoY0h4ZEr4f2pGZNgz/+zLEDoOG7CsibPcGsOWF402ddIYZHE4cDhoDitCwk4YHuzUpDk79+zu//6v//RRAIqOMo1gKQ2ZgaIbdqU7DH4JzCt3z4vIDDEEzDqkDetPRAEJKBb10kM2rVu085V////3e5n//zqkAAUMCGyVkEmrwcItiYjRicmahmZ2oZqFAbg4TEwXylDCHDQDgqyEAhWNjr6U9K57Kf/////swxBoDhxwrGmzzxjDkCCGJv1DW+7///9BAbMGDQKRltkpEKguGnGnBhwg+DJkhj/JImAcF4YeKERhXjWGBQAIBug46RqDymTJ3253//////9QAAAgLrZAIACpTYHJQLGSB085gjDsBjGE8D7VPjHMCTPeo+TNASqLBV3LH6z5L/o/tT/bX//6P7UgSNtX+nGmxYvehgEMjUQzL//syxCSCRxQrE0z3ZnDVhaEprmDWgZMFVM3NDjHRJMXkk6wLyZHFDW+g7VLV49ezholVp8r/Qr//6wAAABbcAAAA6LXY4+6lq+QsIEjGLAqZgi52qDiyVMnI0y0FDIIQQCvFXsMFOQWxJKvzkvJIpCAASxGAAIKpjJFvUBNi4iFEpDNEgF+JiuDqFNJIhYC+F4Xt0jupWUFPRFS1TP/7MsQxgEaMQP+s8MbwtAdd/PeYf0FNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",GM=Pn(ut,OV),XM=an.createLock(OV),cu=new En;let _2=!1;const Of=()=>{_2||(XM(),_2=!0)},jM=n=>{cu.audioBufferProperty.value===null&&(cu.audioBufferProperty.set(n),Of())},QM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),cu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Of()},A2=ut.decodeAudioData(GM.buffer,jM,QM);A2&&A2.then(n=>{cu.audioBufferProperty.value===null&&(cu.audioBufferProperty.set(n),Of())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Of()});const qV="data:audio/mpeg;base64,//swxAAAB1BHOnWmABEWjO23MPACAM4AAka0C2CViDZjzZoUIKXmGQHLmnHZgZuIghjiBjgxeiMuWAQDhMhMyefxsGZPP38oscKBjgh7vuRIAKJJltl/4AAAAAAAeIQEujEqiqRmMJCES5WG2gJpbTG4Ow/M4mn/Qr2Js5qIuqgsklNZOqlEOMfLXi1GSdQzuEW0dE8qAAAwLYAA//syxAMCCDhjP123gAEEiuWNvCUaBpRaYSCm0Kg6aZJnFNZzqgY+cBgqYYFmJBqWAkHQEu2XFwmiO5lSznWcKmje3hW8HX3bwt0/3XUHQ/5sFAYACqnqDC8MFAAYjK0cc9HHDBpgmZQQhSpXRTUQnFAiSUey+KNyollAoIHkq4CYarC6S3YyUWYjae5ECrd//DlNiAACxKE0C6BbAf/7MsQFgwhgbzhtsFDxHA3mTb6ZItBjJRcHVJgRkcS2mcgBlQ4kyhGWnb+PtLXw1x9GdIJksprlMmS4Cg6y44yjbH5yKe05wYGI/v2JDYn4Auuq25bxHxJsxhAOAFTHWY1ZXPRRiMTRQRuKAOQJOsy1I6WV2TO0w6Sw7LS7gfm9kt6zyIwPOZ+BkYQHFqf/C3p//+hgG5wCQFYWCTD/+zLEBIMIdGkkLfUHWQONZU2+tSrxQUTDm+024/MxgnMkFRN85yMUCVEQLGBASqdpAKDFymGvanI7suWZGZeSHQoo10ND7uHsPDn/79gtWEzPwBSpvpilULMOAU5TLsYQJ4ZCgQ9OwiJIhwZaiyx9mjv225SaC56XS3HG/Z1fwfNN60notpag8MGez2/u//6VAGEm4IBuHC+wVGDp//swxAYCSDRpLu1xKLEYjeYNzRlZUhKGOGCWs0pA08Q6K8x4tJypSP7GoqwEicWBqgRes01nKVlIf053z99P+/0iOm5f3fR///9Yeo0+yXyIBggABwAMUlMw6A1DDFqjO9soQjM898y6I4jYzAJOUFB4ETkVwvSE4xN36KAAwrAce3hDuTP35zIZyYUyDMn+ISyAC3LdqAAB+ahk//syxAWASOxvWaw8zzD+imZNnjEV3JHJkEvdhpKPigJmMTjXO9IRmHkCqmDRKV0S1IC1jOP85Y5MSCkCH+gU0ozUUqNPx272KtThMKOJhxfE5TgmVUjBYXxXAW5sXB65hsAyY00YTHRJGOIapLBEXyyrAEARSqei0NSmHSQ/MpWStQ6L6Im3GvCmsSb/VQ/9phwACuMnDtxuEFAJjv/7MsQGAwhMYyxM9ScZHQskja6ZIlHP4HxIAwAPxmmJhhEGJh/EgkZBgEDYAANr7gthXLGdmFBIAYAqpKM51ULEenPZ/PqtNKhQTIERxwAhyCooMRAK0AYgsiRNABMGlBB+MSidMKAAMja+NcgkUmPB4DgRW4pi/z0r7lTL3mtAoCoCJSTl5o8wz6QWiqx3/t//ag4AAAHJdov6Bwb/+zLEBQBIGE8qbXGIwR8NaSmnshcFWggYaHqGTQEOEZ41iIjI4SMAxo8wMgSAh4CI5iQEBwYQPZZDoLFNxeOBwy8x25B1GfiR6RaiAQapdQ1tmbRXvfpSCabcGCo4qoNLVEaIiIUxwGpGODgKkYyxOJI96yKt45ruMnyxlWKW2neqTQDgdhIIn0oSL0P0PnmwJ9O6SgAAAimCDqAR//swxASAR2xhPG1xLHkNjihdvTFPEpiKw4gABcIXQCEimJjZJrgZaA4iNiY7pINEZ7B2yElTIU2qu13xUoQq4yhd5VFpCRiwDLsEWaepoozJUXWnIcTERUZVTpYMxkOCj0FNBgieh9D7wlVcTR0Cc7LaU/cmuQwN5fCnK9Y+smsQkY/6QmSHAyiWWkAAKUgAAAsuCvppLKVG2IlA//syxAiCR4RvRUztKLDhDWfpvJlXJkEg3k+NKBQuFAEtagUYOQvtmVDLVmD5053TkiO+N9YuviT/LfTXQp2mxoFqSCPM4X1E0nVwR0FAIsOghXOsahIZRDbGwM43kS6lJK4rwAxwCGDcpCWXtpEQ53S1v35WuSjUtQAy0AAARJmTVA8AQOqVoNF3zdAMLw71BQgkAgMjwTQkGxgCVv/7MsQSAkdMaTLs8Qjg2w0m5c0lTgCVz8xnJhCG2pRs414U2SyOm+uNZ8NANeEExBpChMMiwDXAgQQiBQiPKksIEwUGFC4Lkj7r2VWUR4NIzyJ6UGkkqnW2vrW7c/H+of4OqgAzcAGTpJfEADXaDgsX7Dh6DjKYFhZpmAAoDgEYF+gKFTEhuV2/NZ/21pKIRZ9bUlgxBiLU//Ce/V7/+zLEHQNHUGkwzhjwsOWNJM2elOSgTRFJwgCZsX4M8Ey4BGGYWAqYuJyfIDeDjBMHwQMDgAS9MnhnJgUlrzvaptVGAQec6lMQ/3f/6jPXTHReMiqMGMWUxc1k858QWJowORAyihcwxFJBEEAcYEiIZKisXjRJa1CZRJpRjQWbPNYwE6FUu//4kDgOawFnzmmWBnQC1CtjH4cMxyw6//swxCcDhzBpGA10R4DYByKNjmTKvZANJytIEhBhR0LrVuwNjTP9fxs5asiIqWf/Lf/////+tQnIJAGuAaNRprSJykgqQzgLjF/HCsDeTcUqKus9P66P1f/4oZYBGjiY1AXQLGWOYOSMStAB/8FTIsVCgeAoqKt7ajS0MdUhaVJ/rUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVV//syxDKCRnwlDGNh4vBbgB4kMIwOVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",ZM=Pn(ut,qV),JM=an.createLock(qV),du=new En;let b2=!1;const qf=()=>{b2||(JM(),b2=!0)},$M=n=>{du.audioBufferProperty.value===null&&(du.audioBufferProperty.set(n),qf())},e3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),du.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),qf()},v2=ut.decodeAudioData(ZM.buffer,$M,e3);v2&&v2.then(n=>{du.audioBufferProperty.value===null&&(du.audioBufferProperty.set(n),qf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),qf()});const FV="data:audio/mpeg;base64,//swxAAABpAhE1WQgDEChGf3OiJCAAAJRgWMA3lCIUyXzv3PfM52Qw9nimjE2HsTh+X09sHwQBB10u/y4e//+gEAQ5cP/u//4nAABASEQsFsvw9GFpIAMRiGNLEgMlRmNb+1MIjHNu4KFilyMxQYzAAc3e/P+566F6J7olttvvTZ9lv1/6++U+z1qgAJHLdLYAABaRtXAaLgn8Bq//syxAiAiaBvUb22ADjOA6MNz+wKcSQr2BxEgs/qJ0XkEPODBEPhEBEOh7HwdhJLwTjcKQmIaxUepm3yySi6sRnp0hr1J8lYfUroW0RJYrMlFAAMN5mqFGCchxplBCFCZuwLfmAFg8RsPKaZAGhqJlpCZMCBA+iTjFW///////Xb//1B2gACzEgggAM2IOQFMKEH4x1EgzS0KJMJgP/7MsQMAkZUGwtNe0BwqQNgNawkjoI6rU0xQyo8AgUADX4Q45so+ubX4c/Qr//w0AVA5axJGw1awwFk8Bk0bAWushk77jjeDg6Vcjgr38sDQNfUJZ3KgqCoK0xBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEIYPAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxGWDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxKkDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsS7g8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEu4PAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxLwDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",t3=Pn(ut,FV),i3=an.createLock(FV),fu=new En;let V2=!1;const Ff=()=>{V2||(i3(),V2=!0)},s3=n=>{fu.audioBufferProperty.value===null&&(fu.audioBufferProperty.set(n),Ff())},n3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),fu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Ff()},w2=ut.decodeAudioData(t3.buffer,s3,n3);w2&&w2.then(n=>{fu.audioBufferProperty.value===null&&(fu.audioBufferProperty.set(n),Ff())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Ff()});const zV="data:audio/mpeg;base64,//swxAADBmUg7gCM3gjdH+EKkCADXz1BJf+Sv+D////B/+wLRCz8Ob7nQMDFvER3BwvY1oeojPpiEQYQL0nv/PTaE9Mj+CGSDyAlZCn+8ALh+7wp/1AwM6X1dlkJsf90b/9q79N/rXbyJO1mvPWrJd51MyMpH2ewI2SON/D/ewqahUQACtOQSosYwemRvEQowgEMcAgGEnpMUTvv//syxA4ACWhZFlm3gBFDi2o3N4ACrPHCPBpQhfbtmAGADTeZ8V0FwZZz7p/u/7+JQnto6loivZdV4Z1XlUuVdY1Lv+XQAAaMTt1uEgAAAAAAAQ8AArHCEEcJahjISY0EG2FI4VnM4hqpkY8GtFIRBaKjcwWceAuhbBTW6J8QDSFrH/mEBxb5d8U53t7PlPAT2yll2jZVACnAARxCcv/7MsQDgkgkcTrd5IA5BAvmCd0NJwsw0uCYBQDJggBQmDskmY6QmZhRg+GCmBMoavWoyp1qZ9gRJUQaaFMf69Sa+yTfVe4x/3OVdnVKMdKDDvJ8gUKw4NzA4GAUJBhODx2QtRhi5B4/L5/Up6DBhyokLWexBtC7iXyfKsZbB1IHwsB9K4vS+CEluYQqOR1866oAMyABVggADJrmg5n/+zLEBgJIfGE2zHjFsQIJ5MmvbIl6YGQHxijkGGCiVoaIA7gQAgYCIETlr1EgBV3RdMlXzWbjsuq6UvqokR/EJJkyOmHTj41omg1p0jAzELohQsQEB1CaikKiLmCCpiHEnncwfadxBGfHpoo+CBIBDCLIqAshdpPKZeluUP5zbxQ5Fvu3t44/T/SvuKjVZsAAAibS0LyzYwBg4UmQ//swxAeCSRxvOG5oy2kGiScdjuSUyKaeHhoOrm7C+YolB04mHJEmPFg4ujKsBTWWAOCpfJlb1d2tzlTmTiLTV3bp7za0Z/919hjJC4APjwAlCbqVZYa9YIgfTGCoeGQZ8GAyeg5QzFUojk+KBe8LhA45CbHJ6Wx5yp6IS93Z2hpf1lDT/OnWyBVfjBwNDw7BVQA2AAC20yWHGcEh//syxAWCSLRTNsz3ZLkJC2fZnrDmJOtswTCEwVN8w4N80jCgRg+bgQ2ZlAGvCpvr+ZeNGYDibCEiEtbiF7+U8GyfPP4FqrmjcgsZvxZu2TncBoq1zVeNoY3tzesBa4DAHRBDkHKgFGZqaGFJMGK8lmeI9GGYaDIEgYMS87YKktC0Pz1IYF1ycmq1d0oztLpbo5gygAAB90/gLdWCH//7MsQFgkeAWThscMVhCQzoqY2xHxCNEsAkwwkGjTICZWaqqJgEyHApoFgGLG1qpMAIEeuJRoLRRABh1Kd0TrzK2zTrRhwIQoA4D5tDKCOUoYhib/itAWJjBk7QIQA3VAMuAxkaMcQTn4E7xdMJHCYATHJ8d7xtudt5pTp/HOv92wABEZXvyYJqAACc4AAh5LJFIWLDCEUAnCYgIj7/+zLECgJHZGNFLG0I8N6L51mNmK4yEwQ9TLMqnwSCuIOiZh5cUHAqAFrkflFRxoKSzB1zNV+bVtzTFHMF8HTNtWTD7ASgQgc8wMwEIoVoSwAJZC4xnnwayFLcWOArlnjWXqlphKpea1oUJjGplVrUSVbIaiwACIKXqAIbCkJolC4htvvMPaJlGBGYs2GDTZ7rCAg0SGnnVO/c3LyA//swxBSARyBfQkzsyrjmjOoo/bCnJEpkPd0gZ9iC7vtGGGKl2kAAGUwCYNUOItz9IT7nuDEarEhGGGU6xn4Q6OKkFzuWPvOXdUnrrRKeZPeqVXa/AuutA8vEkmy0FMVcAAVUU0IjaWiOiMxgzCUhZ452o+UIOYiwkOM20SlAsByQFGEgK1KgqRcBUIw4K60iIsW3kfsKtgyMuAJc//syxB6CRyRfPE1warjhDShc/aSnMUBRTh/IBPpIoaDjIcYxIsSxGgc6qlMXBVILmTyCxPmJV0cW5rMG2YbGyBvyyM8l55zY60oAAIU4AAAIaSrYqIQEfElFgTjnMJHw2qQzO5RX6DQMYziCHJljXIGj1Lg/uRPwjmJqURp8anVTfz/nwJWgAAylAgV/25sFV0/TWgoQTu6sMMgQ5f/7MsQpgEeEa0NM8Mcw4ozpacyZHxExUrTH9IkGJYwZHotnZK1ACitNzotE/KtCjBtkWyT9CpJAAE04AAAIGSFa0o8/kXFQCJSNOjlJMXBfPZVljvn0SHByx0nZmaLtLZhUWI5MxZ8Vqyq/kRNb2FhWAQhF4JzlAWIwJGUCBBgo+ZpSGWanAYmIEgCUkgQuDGq0yGTougTEXYxG8sf/+zLEMwBHPFtBTuUouOEI5pm/bMZ7l8v/mPO/hZqS//RVAAAOQAAABeSt7bAgBtszxhYB4GhfmCazGYHQSxoQqCi4uCYPNhyKv5nqAI+IEn81YVP23nVTg1UKuJgFBcym6jqc1tgSKh7+GcQgsYlghYvyKyCSZhDpfp7VtsLhMhne1ss5ulprWdgGhF1////+lQAAmgBXCzVTjx0u//swxD2CR1RJMU9tKKDTh+Xhn2jGmIARjRpwsB9K/Rp2OQcULFsrMTgiJbVVFARDTgVIrO2LM68uO+Xe6zoLygqYDAHXZYv9C93GliIAACIpsJhZlACo2KnowEyySIHOkHgQ+aPVbNfq0Idrtr///3feAEAAQNgC8i/YOQQHX0FADwKHQYrzKQgCvBcYRHzAgjoF1LnpKoJPe2+e//syxEkCBsBJLw13JjDHhual3LEWrn0OVaiFf///////+sxI8BpgATI1M9DEswQBM5HQWsHIy9CZMJBRtJKIlYABR29sLIgCFgqVFEs/rzNwr16lxYzk0Z+XTSEQCCAaYLrFgYBAgVEmUMG/hn5EUmnhYmUaAkKOhzS6R4YwrNB5+N09H+Wozq88qPEZf/7//+x3rXWiaAA8DIxYRv/7MsRZAsboNyjMe0Rg4YcjQb9swKRhyQCk0QC4oGAk5NY/jOVggMbME4ayRZYUkctGgKLVUbKAgFH2NxZ/52lux9zP73//c1l0f////9m/zSoAYUYAACIg6AStCbiiMpEADA0QTO3szEocjNHR5sswK0CJHEaIaHHaDxon+uQx2/vt1HT+z////6cb9qVYwBnDKpuBeYELM+DoUNT/+zLEZQMHeDkmTXdGMQmJI8m/bMDzfQbiMjoeMxKQWjBMAHMKIOwUOcyQHoIyJdArUH6cSRQxIZHHqep/7/dm+gAPGACIGIX5smYGDLCmKBGdTnm6GiiZYY1YTx1RIeKgO2Q9j4eT/DoIYkNeluT+WUtBez//+mz+pX7jFgKFVaY0D5jYKGAAYYPFpiQqGY9KaK18Zj8BnHvCuFxe//swxGmCR2RHKu7pKLDtiOMBv2jIIxmZF8Y0QmBDgMMlANpjL4zGpXS16K1hPX0GxomhBGQuZhxKHHQwKmNkAiHzBdYytG2gIEWD2sLFBWQnbWwKXmHg0MBwWp554rO1RUAB2G/VFKedTFtPHfo/+z/r8+Y+NgyRCPYKpxnY+AAYEmJoRObfqEZknjeGtw6MiMOSJyXKGrAElmIA//syxHGDx1A3IG17JgDsh2LBz3DAAULJfLtM4iEspM564AP//////R7/SgAKAADCBEEJICixwVRlMVATFDgzGtNGA7sxnAzxgeBgbKonCvXFQykQQgswmAL+UWfmxSfdMGV////UJHIBCjtSJHYxkuBwSIAc0iWMzl+4w9wNwj+AZkmFQsde7wdWgcASELlYukkOySVRrlq3XDW6Nv/7MsR6g4iMLxxt+2YQ+Qbiwb9wwKKMJiAaczkM0yBfYsOOo5MLlbkwJQtDGxZDD8EBg6GmDOQUHgGpAeFEvrRuMVKX9ascvQ1Y0DQDhBYpAJUAiQIIqHhhQzaw9Z2DOxjMuhBipf8yY7ywAX0T2XLRxQNY4Ifo06c5/f93T0//o/+6T1MOpjIiBEQCxg0RQxrE7RA+1oQ1BEwwgA7/+zDEfQPHXDUabfuGANeG4oG/cMBIYwLBQxCV4HGcjSiEJBO0KRUtDKrdm4ef//////1P0SAWJAAUgK8B7ha0wDSy5dQ2dzYbwzNQEw1aX4VYcWMDpDQ1tjRerYl7y6marf//orbXQzEH0HP0U0AISQC0hKmN0MDByAK8YAOOZjDCSAMDgE0adk+VJhTBMEBZgZAS8FWW39NCYrv/+zLEiAMGjDsWDXuGAOmGo82uDNqf///p/6v9uvpCgCIxk4AHdsBA5CBAYnMSCT5mqzTUsDgjzYoE5TwUAV2ZRKRI7GobqUUvzvVwO7/////9vxXVYK9yiYaJgUkDVQUggWtZJMswWJzvUFMzDEcES1TkN+hVkFtgYfVyshBp9CVHASd9/+lfVoffs/aT/+3oSkBBgT5AlYk6rQms//syxJSDBzw1FA3roIDkBWNNnujApKRAhozVgIwtAQowEhGngjd6dRpDYQBq26snZ3+jl3//5H/9LPxm6ggbKSQTGkBwJDr9AEAZRWZh0SYgjAAdh4nEPHBJ1I+L20Vnud4NBUNXf//9lH9PR6myyEnLxTHIxkgIFsgoOhuNFBgNIiwaOJzpdEzxASS7XUMuZitqGWgTH0gqoIlpBP/7MsSfA4boLRZte2YA5YaiAb7owLmO6v9fR6/KM+v+tPb6ahpQsqVkpWKwJLBg4DAOB0YyeFg4COajuYRQYQP8HpT1wceQNLJHn2f///47Y9VxKxrhCkWPuCFhWo81A1FdTJHImAMYU1ZBCzE1tMDAQ7B43PHRwJxW4JQqQFtJU2s7///1dLdz7TLkFTS2Co0qLGjYngEk7e9diUP/+zDEqoMHICsabPMmEM4Eow2e5MIIZrVcxtoYKA8xbIDmUnGddoh0rLaVhaELboGA3I///+32tj0qUhAXA4lABA0VFRzYs5Bxwo8cRAZqIgBjC0wyrCVrVBy0Sl3U0lLcrNkmJX3vXQ9xHrF1kft9KnLd0/5XIPY0tSK0DTykPgmqBACpusgAjZhT0YwByozh1IJWKp2KmeLt9Ov/+zLEt4MG7C8QLXcGENuFYg2eZMLR2pQ6RirmqAoCYKg0PHnDwUA5I6x8afWSCCjoaGWkABNLoLs3MMFnGvzaGfMY2VvKaYxjfVvVP6f/9DGVtSlb//VsrzTGDCnJFXIg08GgaduIVUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxMQDx4gzCgzwxsDphiFBzJkQVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsTMggc4KQgN5YhA0YShqJwkmlVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zDE2QBG9BsHQYXiANIdX3A0iMBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",r3=Pn(ut,zV),a3=an.createLock(zV),rh=new En;let S2=!1;const zf=()=>{S2||(a3(),S2=!0)},o3=n=>{rh.audioBufferProperty.value===null&&(rh.audioBufferProperty.set(n),zf())},l3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),rh.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),zf()},C2=ut.decodeAudioData(r3.buffer,o3,l3);C2&&C2.then(n=>{rh.audioBufferProperty.value===null&&(rh.audioBufferProperty.set(n),zf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),zf()});const HV="data:audio/mpeg;base64,//swxAAABdzxBVQRADFFHaWrNxAA6lqlJJEQAExvBGPAACkboRpPkaQjfnfz5z/zvk6HfzvO//6nzn/8n8Wo50RIcE5h04AwQBAIwAHAAGGKl44UnQFxrI7b6JARZgWfzRC7X2cjUCZG/TgeAfXziIB7AOgm3/Dlw5chhj/4aoJEnxOhr/+bkURTNP+37dN///zd5/WqMcFKOhHs//syxAMACFBlQBnXgAEQCuRbvLAAMh2cNcpzMDxDOxVSMlAjYsYOAlbMUQJ8hAkSABkLAPbGhQfrk7xotjWuYO3uc9FKLMWDXX39eK91WL8a4ARAYAYFAQZg2BpmMcTuZ9zx5rwEJFAZZgjA1mC8BuLASofGAOAMhs/U/GV40k0Dkso2K6Npbban/lI2Pnd6J3///t66ABTcYocjaf/7MsQDgAX8JTutseaw6RRnNZCJDkFdpsKMGTznDUOCFN3UBmSx0M4MasPlPO6Ar07embS//T/2f27SK//YUG03dpZI2oMaBN8MJA5tI6MkldtNZgLZ+dUe9LvQy6Odv9a9cr9VPRUaBtgq9EWmz6Xj3KZTzOv1ylUAC+0kk0oAEUn+I0HZ6jICCWahweFTlrz07qq2Ls9T3N/Xljr/+zLEEgAFSBMjQWBgUI8CIvA3vAbc1Vf//uoAABTglUoQoEElDJAFw2zpqMe6sqMzu59/9uvz32/t/onv/5FMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxC8DwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",h3=Pn(ut,HV),u3=an.createLock(HV),ah=new En;let P2=!1;const Hf=()=>{P2||(u3(),P2=!0)},c3=n=>{ah.audioBufferProperty.value===null&&(ah.audioBufferProperty.set(n),Hf())},d3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),ah.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Hf()},E2=ut.decodeAudioData(h3.buffer,c3,d3);E2&&E2.then(n=>{ah.audioBufferProperty.value===null&&(ah.audioBufferProperty.set(n),Hf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Hf()});const KV="data:audio/mpeg;base64,//swxAAAByAnDnWRADEZkyy3M0ALJQcEAMk013znpOVkWGNCg9vD4oJlTQcNxQBIJ0PxSUlJSCwfB8Hz+CAIAN/DH/gg78EHS7//9QIJSLq/wFHg+AwFAAAAAAfFvo6+SmoCLgXFVlJaBRlrks8EfgdfwNGNDIX1icAtgSPunkTDV42yCf+OWMmXBP4hJ/+RAZg8nmowgLA3CbIw//syxAOACDxjRhnXgAEOCqVnuqAERLIypm8wTCMyMagDMoYEAyRAAgCAQ9za/ELra7bNcNI9BMVmPx3pF7P7a/wstMTOL6//gwrwjSeVKioAAkqgEBggJpjMDZgiPBm+0xy7jJ482ppET4kOhhSHhg8CKMhgGASP09uliMpAaC+Gyqiiyjd9/QiJjzxL//////p9lUBqv86UKJp6wP/7MsQEgAWgKTMsbMLwvwUmdaCI3g146KXMwJVAHDYhAjvxQKf+SIBJPJWbIrZ/1aVs/k7Lf2//7QQilFbJGkVBjWeEsADYyEamuw0dNdmGxS1qmJCrAKrGJZ+TX/V+1zX0fitWyROXKQQiijI22kTAod9keTOhUgChZfu1VSXOv2ubHdG+h4jXu2fLMV00rQvomqNH8kAAAARGFj3/+zLEGgDFrBkvoeWAcKKCYxBngBYhtAWgNUjlVDuFH+de4qlT5ENEZ7/8t7K3cKjB1Q/kmOcRTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxDMDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",f3=Pn(ut,KV),p3=an.createLock(KV),oh=new En;let D2=!1;const Kf=()=>{D2||(p3(),D2=!0)},g3=n=>{oh.audioBufferProperty.value===null&&(oh.audioBufferProperty.set(n),Kf())},m3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),oh.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Kf()},T2=ut.decodeAudioData(f3.buffer,g3,m3);T2&&T2.then(n=>{oh.audioBufferProperty.value===null&&(oh.audioBufferProperty.set(n),Kf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Kf()});const UV="data:audio/mpeg;base64,//swxAAAA8ADNZQRgDGHni23MIAC1bbaiNgdgM+wEHBiogUAbxA4MT+////gh//8Mf4YzNI0kYiNYjDZaLJCYAZZgbhKQTNx5Vp34WpSu/bhLvzLYwWSHokUhx0EBR4FA/Mp8sOz3gcWfL9YqH7kKIkzd9fLvSkB201St7337UyHKf7X9Pf//Ue9/6irjy/l3s5gqCo1lPVlVSBj//syxAOACFB7hZyUgDEUCu008ZpKfZq0pMq3UhCDwXYfD+n5X+IUp5YiEYMB0CgRCwfQF0AmAUjAlZVJuE4ZaTbKK0AIJCxUAwrWLf////l1oFP9Yo2m1QI89G8bsISUXc8TjPs5pDlVUzUq1VJLFYcIlvdQS0P1lohZFx5hFpVDCPaSKlRsdgIslDzfeqxt8iVd+v6aClA3ydRso//7MsQDgAhYV13sGEqhEJFpcZMJqE0gGS8ZU3ekWmMRbO4kqZnMgAHAFiPmBRdQFgRZHZrTNwZcRTYLKU4qxy3ieKohBwSNif5UwYc4W/ywiEYAtIWoggTByJ+YPcFxgdYE5MVlD41ZJSYBdPF8gQIZtZPy/cZWxBR5Bm7WwZdGkolTRTQXLpSOcoUvf3in/dyBZwzRXAF3ieJEAxD/+zLEBAAIkJlXlYaAARIWb3MegACpLHqwdgk0mfJ913UT0LiL5W+nIh+DsKATQJ4F0E4PF8c7FxaaaCZ80SpqZbfX7J/99fN0p/Onf+zSaVmKSAKAgKAgMAAAAAEBCVMt4sfsyRdHO3PTH0SBFi4jhEgNBinEXeeDSKeby9zBMKun3/pKZ6L//H/6T/p/82bkkAyj/5m7WOWuRFpI//swxAOACDgvi7zDADEQkW289AoWMABHxkZCUEwfjodDiYmpiWw9NWjIAhJEFkFSo4GnxwiDsrBoGn/g0DT64Kgq9BUFQWBo3WFDf4B//ljZRUwaFSyREkApYqDmkM8qYgtylZx9ZL7knEF4rFKLgqfa4GHahJbD5q+ZdeybNpd1LOzqJVWdmJgs9uNUoK61I9Pf1runDP5da2kA//syxAQACHita6eYTzEMFSdkzAigHGL2uEMDLL6xtFmUuujunUP9ODzjFKbt2J5yt77uOmiJWXQ6GAbIjvu17WVn/dDEccwhLJLW6dXU/dcsEAvP8BAST22Qg8WJEX2Cxxs84/BnOt15rGZwVs2FEtKWVPRHZitdbuySkumtHlb0M/U5QwcQRYSLI91T/epbUqPPogEGy4Ldq0ABj//7MsQEgAfcrTesFG1owIRiqMyYmD9U8MBcisSsURTFgBykNZkSUjL+oDB8VGCT310AYfb2ZlVRgEvbASNp8ptD8y7lYYlvxtFsCgAAYAQABAzjzrwIrmT2cuLIZOOOhHHQELC2rOtlix709VXnYiej4dx2rz2Vd/xL6QQAAHCikADAVHicCJrfesiRcXCNaoKuuneW+r1dXxFDvZf/+zLEEQBFcCEJoLHi8JuFVvDMGGz/vqeWI50KHuGnJHLWAAQIl4qgkpSn8oGq1rUCoSk3UAhEYtCgKWWwwIDo////4sLVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",y3=Pn(ut,UV),_3=an.createLock(UV),pu=new En;let x2=!1;const Uf=()=>{x2||(_3(),x2=!0)},A3=n=>{pu.audioBufferProperty.value===null&&(pu.audioBufferProperty.set(n),Uf())},b3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),pu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Uf()},I2=ut.decodeAudioData(y3.buffer,A3,b3);I2&&I2.then(n=>{pu.audioBufferProperty.value===null&&(pu.audioBufferProperty.set(n),Uf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Uf()});const YV="data:audio/mpeg;base64,//swxAAABQQDHVQRABFbki33MLACAFiANEhrgagQWfE6eUcJxwPv5wuD/ynh/aXfLvD/9HlwfD//EEEPD7ZhOAkFSjlaqEIiQQAEs4eiJWJc1P1YWHlShsUzcufWA094Hx1uq0G20l0OwMrP+XF59gcKx8JP77pO3m998s/Yw/nLVXnrrpQBsXJUFMLEnmlFmN/yDRSkA2wbEgAA//syxAQACKRzd7zHgAkGB+81hgxyg9V/KSvjePEM6MTwDABAfIScR33O56q5d4xqkH7v3jiaZMD6kY9sjxrY2dnb1HHfvNR/kWIABj/dYQ11+H0jIKJAJJKoO2kaXeWiJIkiSIKkCp6SSSRawEonOLl37VSoUBXLB1R4RArEQNHoKne/wVBU9wWDv4KhL8s9QNP/QiqohANaOyIgAP/7MsQEgAhwYVvmPMihFovqvMwtRAH6Ae14cRCJA0gkI0l3oAaVhTxL2UFGwRUl00mkOm7spnrNztCVjBca9pe1ZAAImV6HsdkkYbqCJBixaWQQZZKZsggAaovjuRz0ay4sAStsBa8qCRLYzJqRvdo6N8kxL5ulvc1t68seeejKSpp09k0Niw9j0xU7cwYDINIb9ZH0VZtohLZJIkj/+zLEA4AIWItlrCBPcRURrbawIAYAJxeV16k/ZdmXyuGXKtUDPLTyWvc8HhHuEmbDWxZs3a26Jzoe0n+dLpP9moqDULbjgomp6BR7tp47Kkb/Yy7HHGiQALQa4vBYdia742/8Tg6Ha/Yveot5iAggAUDAwPPgRG2IQAAAAjEAwP1yvoQIToEAAAQ5YPg+BwcOf+D4PhgAJtta7sOB//swxAOACHRxgbj0gAENjex3sIAAQAgIBAQABwvF95I9BqsaLjRfG8H8voXioPoFOTnP5fr6BAbTCiaJqU//xNPUyOwkrvuV+H0skfwwkh/8uGgaN7U4ykgBI0Wl0NRp9iTTuOtTP3h74fLq2RJI5YD4IhSIZoj1X1UVJEZr6+eMZdiQADi2WsYqaj6u1HKNo9Ta1BZ2GWfu2RpE//syxAOAyERfc6ekbHEFiy24x5gugCwNDM0QkIOIpArkSBqEiqI+lT4jPXA6p0BJyc7A/ueQIEDN8GVxZ0NRU6hwZWZ+u0vmJAcZH1s/fvWToCKjwqgrRCT5TA2SpWReMQaRbtiwvwoHGQwVTzCMlEnyNn9u7MLAVgshUNiq2C20CCygTEZw56WOpYszR3GtXoW6ht/2WRFEABIUbP/7MsQFgAjAk2OsvQGxFRLo9YYU3I5XmAGmX2GjdKVSyEyfEei2W4xByQeX12Jv+JSUCUNe3dQcxD//+rd/xZysTZIrIiZR7qJWtsem773JLgTX0uaaZAEhq87YWCLAk2QPRDsijCdQMyTfTUASGYWdhh0rvEmDrF/obq13lSbEnO6iu0XtJAY0AlnTooDLWLYz1nXalTIJHLdbYmT/+zLEA4AHVLVPoTyjMJ8D5egwvAIAa4iOYBvORuqckKIjmT0f3wGoJDpymlsoq0IgUcZlalKJoqD63behXSb3dH1aMG7tj51oii6lBlJ0AStbgiTFQn40KM3C3KpNO+tnib+WCg+IpL/ez9P/2v9tCgACxBbaTwBY2euQgIjICwBbIKp9DCz6zvsneDLl1hU6BTvZ5Wj+z/wVV9QI//swxBYABVwfGUM8wlB8giG0EIgOCIelakAcALdhRIwrRYRkcReWf6vb///KypL96vYV11222AVLFlA4Q0hOHgNAKIBOJRUqoJdlVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDSDwxQk0ISZIHgAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",v3=Pn(ut,YV),V3=an.createLock(YV),gu=new En;let k2=!1;const Yf=()=>{k2||(V3(),k2=!0)},w3=n=>{gu.audioBufferProperty.value===null&&(gu.audioBufferProperty.set(n),Yf())},S3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),gu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Yf()},L2=ut.decodeAudioData(v3.buffer,w3,S3);L2&&L2.then(n=>{gu.audioBufferProperty.value===null&&(gu.audioBufferProperty.set(n),Yf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Yf()});const WV="data:audio/mpeg;base64,//twxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAvAAA6xgAFBQoKEBAVFRsbICAmJisrKzExNjY7O0FBRkZMTFFRV1dXXFxiYmdnbGxycnd3fX2CgoKIiI2Nk5OYmJ2do6OoqK6urrOzubm+vsTEycnOztTU2dnZ39/k5Orq7+/19fr6//8AAAA5TEFNRTMuOTlyAc0AAAAAAAAAABRgJAW0QgAAYAAAOsbaTGT/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7cMQAAA7dBSqUMwACca6u+zCwACApgAAXXczyPLdxZhAGAydwQABDIj/xEZEREf+Lu7u7/u7ve0Rd3etERv//7EAGAydsYQhyCEf3va73/vdxEREREE78RGRBMmnYPg+DgIHC5QH3rB/EAIHCCgQBAoCDsEFAgCBQ5BAMS4P8Hwff8Tg+/Ln/wfw/dtCpCmhkRCphx5RJJZZeBkRuhKWvyydbusLOy2X0io3WgGaNyeDJBmxPyYwBMkkASVLJiZ9hJJ6AbpW4kk99nJJYE5sSUUDSD0v2Uxg7HWSUR3HErRtlPe9nmg/mKDjSLtiEPSe+7iuGG73WurKU76Uc2rl97P/53S1Zi7F7bTdrqiJq7Yyv/6/4uDVj3sbtRSKhqLrLWf///+W7VaNBODMAAAAAhEmcl8uCdsv/+3LECACSeTVr3PYAAgosbbjzDui0GmTRO96xrR6OSGLxYWzCh0mEDaIBVQ1xdHw5aTTq1RBj58yvaK7kDNUcale1G/E8611+6daha6+Nuve72X/mq1vX4PrMdWcrz6xDa5mtWNdU7m/T6NNo///rm27+dT9a+Zkd6fT/g32p4lBxRRZUUEZkSpCIsNCAtctr9kCSmrzv/66lVQ1EAAAYJYBOUKeF2LY8JcplQlohfTxvMumyOzxtvJFI2I1iV/2+b7RFSrZTO6aJ5MkgHPUtQkCaHAveIIOrPtb93Iau5+y1NzYL9Qj73xM3UbSGUWHvsqfnJ4icIKCqmRkXHi7Fv5s+RbK+5lfBfsWpgmsPoMiQNQhUGq3ftfu6lZEQCAAdhIBYSUm4Mg3UkuGF41iEbgUdPDc0Got2R//7cMQPANKRa2aHsMvSTarsuPYZuF8aBIK5DNG4yVq00SKu45iMbvD0hnRdGZTLhUOlQUHEQxZI0nUJm0eSI9baV9KuyiRjoJrc+33zekx8HOlcjZN4SRow5KvReT0TCBrN5PBctW1DG1BO3JGo6UyE3L+XmU8bx+21n2sOs5ISgSu9fP1RoRMsZ77pdCNCIABRCfq0cp2mW1JA00GjDcnVzET1hxp6vWITR2PwVqBRd95y4yfxk4HlFxmuHsEjwSERbPSaPrt1rjJUq8jTztuqiMIVvokgVZPpldExIjDdS9MOF3tn6v8gSijYMhZdMloS84Dyk4Lsoac1AqaTR5XfbyTuuj6NOqzp1t9l4VzLVkgtFz8qLkpm8bfVkTwqWRSIAENhDHdSKh8TFYPi2SliEOJphuJA5jj/+3LEDQDTVTNihj00Sj4o7Hj2GbhRwjFogi0oCEEKpXkDQ1XO4UdTsldrplPYETbDxQUMN2RoQRERZZJQlaICdRovjetIl4a1AypaO64eFzYtvYbaiI8RsJrwhKL8V0lctGLEIJwUhc2no1E10MGWlobJRcTJOnBVN9RTe8x5xQY8gEhGeivAD9Kj2clnP0/r/o7f29wRGQgQABBRd4DWoKRz9PqW7bVVK8wKpJGy86YXjydIg7IaYyTkMnA2HwkDgymWHRgeURnDAzUiQpfWJbqrP1doW7Dr9JpEmgU3ufBglsjOYkLEluXfsxgU5RIm/ko4vtOUFPCpwXcpak5aDGo/HwkcpnNSBxyquxpaphphuZesaERW8FTYmOECqEVujZJWxNWpYjUiAAAAABXCElsN96SxSHuec//7cMQKANBlN2XHsMvKbSrr0PSbWKeMk7RApAVSWnGtss2qvAuSCo2gVOx7aTWgRwdC5Q5XKyMtVNm2IZy4mpVmLH7NfyhaRF/heeJh3pNkpMM/k7aMTihApGZc84qJyHSjTrYzLy6ivnLwz22bTM7drVPZtI9MRR3bZ+9w9Ltel/97bnYuNAAL8LFCONVLkcZinWN2qQORCmlQaUCJT9lzChDkF0X1hSqptOVIxmM7Ucp0/MfyWQlmdLghBKmIp2aFZWM5lgbPoUhg7qxmN4ISJCKXSnqNpc0uRnPprEOYXgy87ih5UlaYQL6pqaJsUsnzp5QwpzOkSOOOTWFwVqakTZwqdaj2KXRFTV0GKh7T2vvbe5QVFDwHXHqlajd9StYlCSAANRqSAJBoRRGHkjA6TxyIA+vliCT/+3LEDICQrSthZhh6yjIkbDj2DmFDE0z2x0vQCQoOhJx8rFAdFDZ2vbJInVXPpSeDcrLjyPC8sAiemDcKFpMhF92taG4+42EiJE1ZhgSicTrsjfS9/CvbIyoCrYmm3DfNNQ5WB0Q10HLJAbJkFwxC0Fu297fNssCm8QbOdO/tV193CKZmBAABKAVIlF5gMAgpbT/O44z8TDeq2eC+HqA1C7E7YpD9EOHZWJJIXXwqFJafKkaZZdeUkUBCEIBI+mpPYiwjK2c+A8hbbZ0dDQQHEkFHoymLa2AxYcIEUMoBuw5KalXDCLHkaBMydjxmN66RnpVdXDBxME0gEChkjzuO1DfKKlQPTu/9v+13e7u5VEUxAAAABwSD4UiRyLeZiLMih9sA4dhKdcRRCU8+ndKQ1pBGhsvHg3XLlP/7cMQWAI6I0WXHsGvJ8J1sOPYNufuFPYo0x0kMlqhDiah7AJAjhyh6wSZ9Q0zW4Fmbk5MFHDKCNKlXyosaC+UZEVWjIBeXysepCx8o6Hnlw99Pcn/nX7xI527e12HMSMQAAAZLEqHHAhktVh7RELbDJhIhuNWyQT1CWJsxIgkxgwokafXGxUcZiPnYTBebWTDm1GtWn8BaUuo1jFYMPL70cz7M6bZigguUndXaEhoGsIBrC6rofIZiBDspucY46sX9muDoPBsWHSspVvxWp8tep+vi/Pr/m/+qqFZFYiAAAAAFC7hekzJyZZ3DPXJLYJ3K6EgEKRDJAQqAAJ2tQkaMlJ9g2bWUVh9pkiZPrkJGOEC3SpVdVtOL2GV3u3WQKxUQ9pnsyKV0M7o+w7uitfchFc62amXq9jP/+3LEL4COtVtl56RNwc+c7Dj2DXiqImdumXoN5G0qdM1vGNpcQB6SK3stfTuhmYAAAPYxDlISOM0FaYScQ9cogwD5parHpabmJ02cKWFaxEmHzXEWQt1XXoQrr0x03A6yYQuPFiCooDQoADMSKNeSiBcJiFTW14plS3IQzZZ+zGUNiJQcVUyQHrrYTEJwCgUMtvaA5BZxkUNHiDpl1/7aiHJDMQAAAAd0PM3hxAzRwnszI9aOm6rP1Cz4kVEYDTgqjaIxSeFa6JUTE6ZAduaEgJFEQuoH1BUmWcgLonJImk1UGSej060BEKzkSvd3FAAcKYvbC5EajkYJHJt4WhjhkSOtLMnpG+e25jF+2IKxowYeXkTMqCiBRrK62W9MqhmKAAAlC7K4mQvz7bDlZi3uLyY4Cd+ileIl4//7cMRNAM+1J1/HpG3B9CRruPYOKDIUIfKFNyE20aoQMRidQ1TMr1HkdQpAaPaAfR1PmVh0sVsqnUJ9E3dkSwIE7XIhHBDikLgQfUa4kGkJQI4T07WgYkhdNcrlx3ztI6+nclBGyChIsak0m6ooFiykFiMdR02XdDUkEAAAABeVhMT4Q4vBoI4zFeh5yKRRoxZKlFZsZV+6GOTYUBUxsbq1Y/JbetkNqurITwvQn7unrGKo455/2ob/hWM6m/K2g7uR0dnbOk2v8RIzo+5ZUvPe/S9PekVx4v+JhTFxvHYyLuI6bRf3RXMd8HLtv/2qZFQxEAAAOCSHcYCfVg9RYz3cy9lxVSZfsYrcVNAqJH2eCC4rDI4HlSx8aLoAxpoicsqREoYYPB4FugaOFJwZcsVvFP1FeGEMm4T/+3LEYYCPESNh57BtyeElq7z0jbmgrq+MIEqRqRSYi0mPhTPRjNVrXp8LJ+SQ8uW7/DMGDumQ+rrzR3ryX3O92v+RqUY0MwAAAAAXTpGONc3KF+OsOo/FKbx/CSJZsYlI6vpgfMqj4UJDFS9C8Q05xZm37dchmZyevLGlS+Yo6iReBS3DRDRkkBm3NIU8lPqUlznCtWw5w498j/rVjQodLFEpY1rC7gWEYiNlrmpnowi9zVTjPdR42UgAACocAoQwUWABDmfHKCVTQThKTl+iZsqrjmg4BabHZYSJEZZOmEq84Q0z7rCMJCwVIgoYBKhkXK2JiFtvV10kLS9eIdhiKnBNcLuLLowUygguW4sUxbD+VRDovWHHNhlL4Svqcj+ywIECwcC0ofQAkOe4oFBcAXFFrV6V3UgAAP/7cMR7gI6FC1/nsGvB+aSrNMSPCAAAACh+NZyMh+4OMvxbieLOobGtP3q+cbgq0+jm4oFc/aijNyMkGkdgNjokoSXTQ5hQyfUbgoRR+Tp3iWggNLiOswIR29Sco88ct9tesg2pEnxe5uFkt0rIjthHI7d5ffJGfpThc2KGVrJKHCa4Mh0gwadW0Ox2ZoSKdWiFIgAQAAAYYh+qQy04eTISpHduURoTsCseKRCxwOaNwnB3iTifm6Xpf0imclarQ2DoNG8EwhEVgqiMCIQkoTNBBkEonHkC0Jrn4QYWJ1nj0dUbWnFWP1q1zMbapdrVZxU0cjdpCeN5nbFOAudL+0i28rLiM3xqRC9deil6Vf5KkQAAAACqQFnRAnqCJiqy4G8eStQLU9OvMh+TI9hdvWQsZbRmEgcUdZP/+3LElACQAPNXp7DUgfEl6rj0juC4ZUW9LDp0h8wMzLz4SBJfRFw/LqZGl9PZhl15roRZOEmRzzRiqcGgOhSG7TFjGAELhQhp+wZO8opy+7Wf24GvfjvoN+j1NaDpKN6//W/krZAABdHpTpuiQp4hyKKihY2M6WQ3k1ROKM4TDhIyM2uZ1PDFYXaMoxKgfKwxORaRDBIOhQUDJVEDRWOChN7MkK8zk1KZiogKKBMFJ+MIkWHqAsFBaK78t0i8H81vTiNZlGLJTvGfdfXMaGYnd/x37uRfFW83arGaiQAAAAC8JgjCkghYAksA1BQODEenTYS1r4kkIWLzMxtUrFcFyUZDq4PJAsKmDQDOOCQyLlAkCpKZGCY4cHk1Dg+vZ5BsG2LQSyiQEtVdwKBnEA6pOJxxDZkLBcafFf/7cMSoAI8Qz1ensHTJ25rq9PSO0Uk1gFwouoNGCTmqoD8Exh5BdIsR+tygKKJMlXsjtLwikYAcLEd50jhPsnhNEWtnicDOl3E00+hhw4LopmBzOCEc6qG0zzSm6XpLQh4UTPImEJg8MS0hkkKR0Ulcw9cTASAOqjSRJExf3ErpIpmVeRkSbBRmOTz1B2M5oqAWLFA4SYYQ4DaH89IgQXFwkLIBc3HI6rs00gAAAAFOryeKsnirMxGiek0Ql+fUU7FMysiRcyoJqtNypOEXRXjaQtGNsK0hPGEbgllldVShrGD8qB6fLMb+EcGMGHcHAJ2IBQGqS0sEKFgJhGHxSCLmYs2LSlDez/YymmTqRfRDVX58Kg5d6wWY7kR6RY6aLNNZQCiMioe5H7en/mQAS40Er5PinS6cC+P/+3LEwgGPxMVVpiR2gdOZKnz2GsjhwQ9MHYTgvoKnBCyD502kiySOjElIzEpLlvLTxZaBCW4hOPpvJoTBPoopYxFwkOdaciroWFLOf58cz0FjdWNPysc1jQy8uzLnn/9SNtnAuGnBMyre8AHTUOgHRUAAC6DiPU6U+1dRIOOCnAaJaRbhAAuoMUTel4QUIkl4pqyNe9RhhpYl4HnQLUuSeQVGlAo5CQmK3FoKltViaMi7CawAUYhAg4FamyWCOQUNLYoPGWr5qSQWFRqPLvbxSxPmRR6Nny3nOliflHGcEYni+kGEMY6kFXZ8IFeP9NDlc0Y8O9tcTsYSyIRwJGk86QER2vD08MQ9KCZdCZPGDaSKA/cu9pYXYj9bXIENI6y9o4NPcU1iT3vmnIuax/nDff/Po1CgAAry5P/7cMTbAJBZK1OnsHSBp6arKPSNskz4ribKE6ihPw63Iv44UDcDMAJFkHTodUNEPAdCCbH50wVBaJoHS6tfNnj1QwWUg7A4TlBdKa094m+FF4hwIGpCllgVzyXPfB/5xRSkgdVnKd35HakP2fGdZHTctg71l8rn8QHbWwgrOVyO/mQzDerZKjQAAAAAABM9eRVBLx50xGtp3TKVDI5x3aRYRjdHLxkQ6ICkXWpFfS83aaYkikisVazNFb3+T9SeYk01sVmnYc/Jc9RpTJTRfiQK8F7wNDliTLEd2zMe66+3khD800PDu2DqgnE4ycaSkIRSUHA9PH/+qo82UlLxSue6k1BNMJySA2DFwYqAV9OY/77LTLIEAYVNAFhCNInLT1ie1//TqiUwAAFMQUuSCKk8WxHHMlUNUCP/+3LE9oCYMSE8rD2cSeKlKjT2DXksr0uY1l5Dz6NBANsQpUAN8fr5lTLY1OBf09EiLl4uVhxNNYfvSCqBIKNrnq/4UYB7IujT5ZFm1GS1L5p+JJG8aNPztXsM7lPi8zk+CXkED1sET0MFJSmKR0VsV1RW0AAAAAAAxaiRbws7h9PRJNE5IRMZrqdLSwqNCY7zsMbSSXAh4rAk3DgLk4KW6KNCACLvjpapUKQ8nSpqyBSpAFFF5JeoRL6XWXiStXwEFL01GXJmq3rzi0qcR+4BXPEbbt4qh+C0xFAfjkpMk5mcmYvkJQ8iMCcoAYMmSIRjAhWOLCcvbB9hzl5wlNWXKkZEWxmWtW05TbXxJ39x2XvHRyW00uTSNKMgRMGBIWhO1Ob79lgRYIAADqIDuXBLHxMTdsW1CEIdN//7cMTrgJO8/0OMMNxBx54p9PMPSJvncnmFXE9XlS3LBZkqH6HIQDEbA4IiYCa0nICQqjodFNgc1g5FQQkAUCQmLa98f1jR6bIS9EkRHx+sVCJAldbn5ENjene5nEdndlq1o3zPg0oD1LDQBipA293w1Sn7+ffVFCAAAAABSVtlf9ozdYDWi1t9ljtfa+67lLHhhTB2QcovsmKmY2MWSDui4GRFpV5LDMhFQAwaq5ZEasz1kTzhxy4Cxm5BiMEkxEVDrB1M05ujIYeS/guZWrAcANMvuc8VPberlwLNKzChQ+hNlBWNo5hldcTiHsoGTQ+2LmWbNvWRm9R1/kZ4iIbpXRQevcLC5bMcs94buQowHACycWDk3cUcthq+hn0alIABVChRZlL/1mupeoeC31IpqtcN9iJO1kz/+3DE9YCWRSs/TDE8AdgbaXT2GmBVw3wSqeCJHIwAFhBizUymLcPdvHpLGcoz1WcxznUQ0uqcRosJPhOSZui9EEjrtWFmGADAOKiAEoEpOGEzCiE6OFlYtSeuZWWkNPUkLMuWsnMdVJRmsm9Cz/WW3gdAQoWNkQeFEyb2mCrLjRp5xG3zy6F3dn9CcZKSAAAAAKhDzrFtPUQ8bo8VIWwpTiLYWBDxYdQS4rlGoAmsQvhjG+aZbi2LSfTwiitTiUbmPT9acVW8W0PRqNNJDj+YqJPQKCHdI2SHFrdJo4t1uHm7mTkbRHjmE1tLGE45+945jkNBcLNRBtSL7BYLsuYn8iuUMaMvItk1SIggAAArQIuxbbDmXq5bPALE3fdOXuU6DQGDReah0uK0mbhx1iZqaLM0IkiMYsLI//tyxPMBlO0lP0wkfIJBG+h1h6V4cYNomiQTDAXtdxT1RK0uBMYtUG+LCik8hiKiJh+/Tqpgv2ZthPLNxPEFLQI0cLOgiuR3LHyHRqZSpF2fGOxeb0GmNmfjVvaDbLsYgoFAmpJoWBsbJ/1QEkb3JC+mawAAAAHafPSpezA32dVgimyt8Ax9SlaLmoJVeMmIgJ8onr5bopuD1pyjRzMMRRSURbUoDFOOFhLKWO/jzu4FgM3RKcFV6l6SxbllKZSsixWwLGLxW5RA78RVxXIaLAr+rBLnSD2hmUK8PniaIxZHAj1EsiOHR9apWIcb6srmK56s2iskmlQcMMD06RkGTRZc0OkzHaLid5Unv7hNA0PFEEU1m//+pyEB9FhFuVIrgkAZIoQyBzJcnDgRBFog3i5lyQCxBIkssGr/+3DE6YCPxM9Lp6R6EjKfqHWHmphgYgAYAKkoshwlqHFYctOIiFYWlixFzrTnIaHAoTEE72EMTGlWA1ql6n1ornaUwBoKs8prshUdjjW2vxJx2VCwuKLZDYbBKapQmioKhGkkTlRs0SLgtUA0cTkMKtoVp9WSx2a+42wr72KNioRp0u57lmRbyM3mpeAAABDdV3N0jroMbWAYkwVwmgQaoo5a5Iw3RvFRCzCLD+paIrx8DnMZh4AYZKtssQQeQSoNpDUsKehnFIq9+XTQ5AkJepnqLcRT7kac9G3rEk7Hjfj4q3eZ41py6rUplWwuQJHno4oSDvamqj5cTZhIQItdM5G2VaM0NRpbejEmmSCASaJXyPFgupDoklAAY0TNLsbxQqRVheo4fKrBVp9uMn2t1fTW0ZUZR6JY//tyxPYBlLEdOSww3EJkoCcg/CXxMw1YoYIRnKjAvJAanTLXNYoiam+nujSnk1h5Wfp0RBYZQBqa3kWoHBW2w34jcaeEpYFpmEo9jSPpwXx9JZsSLDXeGiGfGSar52VE58vIFTz3uZWKVmr3CvK5lx9/5vCt6rrEFv5ysLmoYblhUkrJiwp1f0JgAAAAA9rkcf1w2qtFRXjUCs5eahgwuYw9ibRy5rAoKZkiBQJ/odHxELJXKVpMvWyw+CkV45Sx9wXheVqDQ1tNSQ+WO/rI36clp7cnWm2ZPyweKVH8m4Dzk9HGzQ+V5wnp7aaIlHGBK3kCOAhW5uRzFnICtUJhoHHRnY6QFE1DuNCZo4EBWpw6kqBJ5hix9n/6pCCwAo+DnR5GTAMuwXReB4OBlKcdCLXZ8EmVxciXiHv/+3DE6QGRmOk6zCTcQk+e5yT8MXhIDMAJBCRXgYgkBvH4iQkSbP5rRDsizeUBJA1IhDAQsQAnJDUUSFzWh3GgTk0yMVgOaijLAkw4ISBwkELHF0xKDRuI95AjgwymZj1p0Xh/iYpqrE9gwwyTGFbzbPQfW0v//s338y2mzAAAAAAAAKhwOo4svV7xnLNXFmlfOU3V4KJXMYZ4ny6yUaGyUTysLTlKEgh0SIa2+4qCuZfo0MGCv42JrrcXYgN22VqaP+qbrhNKUMb567iwEABEpLB+yPTTA/qEIygOZbIKNpVHZrPMTkjUyqMgklYW5cN2TqaJBkSBdoKkoiAzBwZNmW29oox6lf/sT8db78BkQECbNJ9O5j5f5CWFAsGa40lJBiy6HLuLwL6sgFgqDpVg7Cg4rIoqmSud//tyxOqBkijxOywkfEIaHGd09JtAEaPNwDjg5KHjdH/TyWO1pPt41B1g18K1LOCEpsJeQ6gqzpcMfTghxbCbqhWWZ1HALGhR6wsUmRK2ISomIhguqfgyOTDkZyMOP2RRIjxYvWvd24YygNSaWDTwVSQTtvZwoVlB3/1/99UQkEAAAAABXD4wrxOUqOiESyIWFTm2h5hkrVkQTVCUPHahKDXBLiwASAzBfIeW4hafJMQolTSfjSbRPnbc2lsEqYROB3vjnXzBQ2eMUl0fqmahCHf10ioIE8Jlm2+rMQSxRlIiMT6NKdqVGfNKoNDE3iVrg0HyqrPCT3kLLx6adjS52uYIe2XLkADc5pj7Ok/40duJerKCyAbtkCH9LFkfGTpsFt4oiqEFeZYoLUkqdAAcYkNRhrQs8QpLuCP/+3DE8QGSINE7rLDaQkycppWHp0IILRLtgYECs/VtRPUBVhSBR1WSlLARENtFTpfsyHsdZmnasqEwDKWCcnUfsJJJWOVSiZF5DOjj4g+YvjJEojFTRYmLkNNvgjRIzjMW2TBZ3SI4QZzyqOtYxSgFmElB9Cxq3BST+r/t/9v//7f3KkAAABKpXhehmDKWpOrBCCNbLD25IAA5JeFnyqSYKlykAKscM2ES2ZxIYA3ojQgmUBFQslcQAnJkpYvuz+Dy8qtLd0UG9SVf+NoC4mXaWsm85TkNZH49LYabE/J0yK9RoYzh8miCbhIbOSWFh8F2GkZUdnJsggwaMG2LaO2Q4n9WaxvNUVEANPSEhceWFgGhOw+Jm1sjqiv/6zQAbJmTjltgmlfqLttKWfQTCV2OS5sCxJeKkhER//tyxPCBkQTRPaew2gKIH6Yhh6dIY1K5S7SqUukVADwG+Xu+kSUWLgLAQe9q52LSSMrSd8cO2EjRBQ5keryxH91WoTqGbBjuG9HehKtdTHTCRQZZ+qLjqFZLGKnNks0uzqjS7WeeTZNgNITOBoERhguJU3JexPGOddv/7GuotdqqUAAAEhLEDUau3fYQn08Mbchqq+S8S+EIhge6W3En3jcyWoYoIkqDTMOIs010266Y40CtFpiuwcKnbG0rERErXdWIqZA9MmMAY4voxhpS5FZpx3wvGknKvH0Yb9hIeeaPP5WtdKIRlkxbYVJC6/BYyTMaPywtqzA7e+hSSLTNdvLTr3fDiA2DYIsSVQRsc4X/+P6P/X/WsRgHxZruqdOvUYEsUoUoK4a/2Rs4gRZEdXOwtIdK1FFWRDH/+3DE7YGTIOEyzD06AiEZpuWHpwhdqgzWl3kzyyzus2dBLxQNdqLLJCMpWGcpAjJVyoPcyjNJoGpUUROF+uXaMhaOSCLVKqXVS2srIUVBpVFIss1YhgjcdzCHK5RpySUzstgqEjAdCoItm3xMOPzpd1qd5IYY9PPf1/soGQDEC4kylI5g6DZfxYVVVDkj+v5C0HlYiy5JFSwdMkkAYmYKZCnzKwwyNC2XELV0taIQEQyA6cLXHeSQ9j4FjFsEfKI7QDQD4AigwkykBjj4F6+BZmiYxuPzyRKbLcTW7grPtrJgxrUJXPaUb3wRIkDAgtJj0IWRor3JwdPWMgpZIMiEDjSp4WFL63u9fqkGrr/k//Qj//v9SAGpJpXrqiVhWQvU/Tfu4z5fqsaGy/W5oc5YpUGURHQhU0CD//tyxO6BktDXMMy9mgIpmSalh6bQvck8YjGgARpNFqrBUf0aUbFWJRo8QFGFMG0U4YkFwoKUCDDJ2ns1WDbeGcgtQigVR/HsvjmtTJlNrkyREtOEWC5KdPGosNGw+dcussRqIlV1E5p3PGrc8oBkEUiJfsVuqKrFnYwvrk/p39JhAAAAAA5B8WnIp26jeIbL8X4tp52FQwyhRB62oLbLVLQIg7CJlHNL8u+yYvarenbElE3rV6rEvG3RNe677sLBrmiLymQAo9gbAicHRIAOOheGJOPicTyWjLY9GkViSzHEuaedhjxpv2tZqqUL2/ZYYb3mi4aYgzI3OufM0CooKKeZaQW8VIBI3UbUH86VqVGrIRYeoRp36Ekwi4mgYH0nPagyVVJB2GyQUz4OBMVVXcIFDnLZ48Kkm6j/+3DE8IGTDNcuLD02wjoa5hmGJ0B3k/0HJgBJAgg6raSdYNGt11ir2FZE1wCFcz/L3c1aLXkz0ci6aTLsJdLnUtlSwy+C5yPD6P9SPa+jIIgy+VwLDUoqah8ElmWhmBY2e0q9QXiRFGg2SagQnFmUfNEtIWyIZKi7gVOiOSSWUwshCzAwpdu1dL////6P/7scmh1WyAAAADL8UKg50wyM40JkTtqdv4ziUurAt+K0kchpkjvSmNwC66mrxJD5MzYRSAP6u1zk+8yjTlUKVglFl8xUM3LoRAtczJgaLNxea9/LBTH7ur7F9MSHDiQFIhFBG4mRCJQMDkq0KXZHNnn+Wq/s1+1qTYbcAAABRC5aPTDUELUZO0MkHQnNvJmQICRAhzkGZEvcQEEZnEQygAICMIU6S9LyN5Qt//tyxO8Bk4ULM00weMJpmiWVrCW4TTBU6CGpwt0pH0pmkvm+SgDuNKL/obtOVjRPXXTUbZFonwJl8nHpUWloukCivj4yYHtih1diJmOB2+uswmEMV1HH2S8lvvRy8OCxcIg2AX1pHjw4k0SeQz6Fippw/Dn3KnC67Tdm4hIf/9f/VQ6AAAAAAfSxZMHvTFFVkeEP0QVpwIwOCKJc0Qc0lA+pdhAIpiutIQmSSALdpUQh/VTJeSNO9H6BnzcxlSYFOofGA4SBJgK03GRAZ811W5f060sAMkA6dA3sJ5d5ecDofrV50vQzhdBnoTBldZW8EDauI6e9j+vjdKJfp1EI6Vyss1/Lwbjx9+fCb0GnPqOZjxUp3d+LtEyASiWUJj6r2cBfM6MJEYJMvRZSkS/S0YFa0XCYcCAhzmb/+3DE5gCOyM8/rDBywnWaJemcMXhqqOi0YskoEnetpli73RWNCGXqFMCXRhnOZhvGgOAcJMksXEN0B6DUHCXAuC2HRG0F0JCHgbITw8NojpgLCkmxgswuSPHeHJa5CuuUtaRZpeospZ2nuEwcLAlGnw44esUGSNHubs+z1+/V5r/p//boIAAAMgviR7GmPsCgVuF13WGs6fuhVpQXYPDDQHnGRQCj+0xORhoQJFRFBHddilLDxIwkdFxczQoEWHWqjcmqztlTV0VhkLupiIXsVdenjrrCWOFhJNDQrDqqPl5AdZEM9Pw9SRuPahlWEkmeTIkNCDpdkqud+lgAVmDilrzhwXsXbqSKquszs5b/t/Q7/+zoRoD0r0FhTqqq6BwLZWRR9pUGl+lqoDF5v5F1Gk/V1OUtJije//tyxO4Bkt0JL4wweoJEmeWZh6bIiIrRy4IcUtQxKMQ8lZBBZsofF36fhMRWJqMNILtzABHdbit9VzlNLljmPCSCy6OR4OBSD0+PlhiYSElWfhvZlzmlK6HpjSV3ml+WejrjEeRmf9S/OFdFgkOCdwGAjgIlJJhVtKg/eaiv/76vQ3/3chpVNbCIAAAALtguFlbgNzXI01jFmIMMYvHoW2zWIjmSg/AhBLCnu5BHCajKP5Frl6zlqc5vJyAqkSkDvZVYedRwsx2pIgTi9RB+UsRAgMyyJE9LbuxBQpY50+RyXbvdU9lrXK0yjzQUC4fCBGViANgiNAjiMQrp2BqKqDLXHzoEcxi20rndK6V6DCCQQAX5TVhgoBjFRUjRKV5LLq9gV1HXep+4eTHaSDDtgd9eK7EglMxpSXT/+3DE7IGSMMsszDDaQk8fJYmGD1DAtLgdKMElJwYbGUSrXJmK4hQvhlDZJKeaQUKWWXZfIay8dIlKRnHLxxsucHLBgwEZI4tozrslqIT/RSAOLDjC3IK45Qxh28m97U2C6HJC7ulLtFei3P21////WjMAAAM8GWeIgIjJ/o8ww4heVPtlrrP2zGWpf0DQ0dDUoaFAzzIoPyC2AyRHQKjL8WYFwoFV2LHpQq+gKSsibu6LuoOKcIijorK0WYZSIXOqWGC/sAM/fB/qTF1Ij2MUl80wGEMgpouUJIGlhWgWRJLyaPLIm4szrb867RoLhxihG46WRz3yNLp29CH0SqLz/+9yq9u293uXu3rtmKiRUABcQQUHKEOOEV8jjfHadBJGMOAo0+aCNhCZitAPmcxlKcarJOJMLARZ//tyxOuAkOjLNaw9DYIdmSYxh46Yc21SoeCAIYklQah9MyhSzBOzE90LOyj2JChS8O4tALVBCKk5LklZKNhFMXZWsfPGNt3LWxPN1JlOBnHSCQmfXTeB5VqQQAyNMKFwy+ksUE4hQvr18Jtt8w3/7fXVIAAAABZOQ0NmHJ+KJpqYl+mNsTYi1hzX1LJQCvEvgpEkGw5i7JRAYQ1Bigqk4D2RQjxAhdA5ghw/R4rAjCoV5LxSk6MwAiFUPSApl1iIyVPIsZJ2oNUPHJZlX1A+eSmHorDwrR9ddUgaYmiKIdXm5NmvjXi0BC44q8RFjp6lq0mktSNJtkriaBGQPAY8UmhK3yqmd02iRT9HJfFOYUnSolEqULEjXFV+yxsUrW1J0o2XO0w9VRwV/NhbZYBgEJZ204QmMghsJC3/+3DE9oCTmM8pDGUxQh2YZej0m0AWSYtqIXIMEbwQQKyrQDgisCwiSZMJsgnGklI9RBg0VY6HpNLLhdc+oBCYoNqZ8TMtdDFW2ool8jlsq0TYEgKAlh0eGggGQkFmDBcXWeU9DFXzGbU5RDprRqVdEtXli36r/YxaYy93iqoQADgxgjEkHRs9Vy3Bhyr2MKsd9+xCBgShTSnMgN1ZtxnwVuaCDrpnCyRojltBQRIloJUxE9Fyv67SGDc20TL6oUu9bCNbGYU1uHXhayylwDge0E6wxIjRHQTNfXiu/Gs+BxPkOjlUIw+CDbIjCrGgLB6FuUpzi1owfYuOvap6dYoWU//wuq9ISTrY1hbOMb9CqiSJaOekSAv0FCq2tASJUUSvYjEWAsTgGHlDlNLaw8pXiuAv8qVhqbzE//twxPYBk/DHKSw9MwJClmVlh6ZYQFcI8VTp/OpG1uLeVJF005k4j+VxVgvjhZiVsAKISYJAWQ7nzCaiFHupWZUsiHMy0qXiq4PiCFJkEjt3kIIJJvZawmFYjaoJNcTcepl30Idub0bUX/av7b3tvZq9vRjFvSmsWZqOtdKVFwAAAC+GBswXS0xoMKXZH1YoHdyGEefpCcNpK0AKeH2eaXQouopYEcXE0WKQNUbgx3NLFxQ5uOY51WRbYqjmV7IUBC1UolpQvBgWBA4QWYAEUBZ7zDKe9l2kjLU3YqelcuFZ8GySIiBM8KHwoeetrM4O0GDu57w3W1xKmvXx2VAetH/0f6DNASrU6VVTgZejyquXngJXzFCy6IZatH5vaEZIkiAlLQUod0BpJgCEIRBG1w1M1kFkkjjSmP/7csTvgdLY0SisMHpCMpYlIYea0Iv/DyhyewcCIDJRGSrHDUlcBsIA7H0WY8DvBwjhpxTHElkQsjYmg3eJyCvZVQSzZGfmRiZNS3p7jjwNCFAJHw2VKNUH3KFNLhixZjYCUmLlLIIxiVAd+95S3rAtirHsrJm4fmWaxVR1g8XsDzSQ0IAFygYSQQAAAC3GPZkNUfZCVolR2i5OnInLK1nQqFcdaGiUfiwMzC1ikFUayaXCi2RHdHZ0fTo9HAvIsQ6lcnBIWjlgxULgfFRBWMklCYp7MpW/RIs9UbLW82RyAKVCAc8qJcdFMnCmenQ+Paw6o62V6vo0LYxe3///97HD3lDFINv4KWERLmpgCpGGO0iHE5e4CqsAho0OoBcpTdhkAGBogAsMK8Q0hOtBR+mXlvRCJnN+Pt+y//twxPABkLi3LSw8y8KalqRFh7MABs6gDTCgCLTH1XSSFQG+UbnIKWCbtH34h1xo2+tyTROfAofFJ8+qbPQfE43stpuU+RpIH5P6omrxjurqrO6B72a879aHOtpX3ujZWGv3oy07tW/6rt70M/1vob9bpkZJ2ZtnMHV0RVRjoQzXtrV2EZY1ZAAAf8kG5C97ENLFZrGWmSl8I2zkvT7o6zmHpKVpThTNaFi6BykGOR3HbD9JUaKoQijjRgypHA6DzfN8rMpVI/ZWwDBAkCT8Fqob/OUlo0WAwmExskIzyDIxRMY1pBV4u/cozdZKSHL3mX81fvMaK+UzdX9P/p/WQByJhFtvXJnlLgYBJ5X66YYW2zhA4vBKZWgOLcK2sObRoRQZMVKMgaX6rv87adihSl7cWgNq/LclrP/7csTrgI8YtS+nsRSCrT+kBYSLiOkypZcCpGIBkZhoCpVO3/e9ypTKhQsL4+BMOJRPiwSVhaOy6eQ4rcbh+fczSI17PhrPdG7uLPD9aFtOisIm1YhUsHwihgVEAVMmyd7jpJGxdt69uwufyFg9Ghc64KZpyXB4wbAofNBUIJErKghAAAB+RsGKW8oRlBjFyLqWA8CbJdfD/WC5oBpJCSk1zqO00CUGIEfHAfBrKNQExYx6kKL8ZkmpWPLFYXiSTQZiKVIjMQzAMRGKCvIBuAOimCozhGzNrHHBuYOlh4hUTCpONOhmbYbLPuaPFnAqObVsba56EUdybdP7TOP1Z7R2oZFJ1RClxcSeyPyxnCZgnPDqAprQcJCUnU3Fy5SnQteIBgkjC6bUHxEhoTBEImM6CXbIpOpNMFBc//twxOwAjxyTLSw8y8KVmOQVhhtIsyXUkZKDzJKmFGKeCMgORdUwhoXhPhin9NCOs6mhwjL7NBUqjpNICktCR9qVBeI45VNy0kkQpeKlAwpohqVGRj2qfKvZVYGuVoPGgjx1bO+8ipF+00TFAC4TkhUKLeWvJJWB0ng2WEBYQB9tXAADSWDpPMspz1J6eqEJZD181SsBXm8XMt4S0XAPKAPIGcLGHGUQOVyHmaVS4nsuHi0ybUB54XBLTBLGpksSY5EeuaNx9FSFQe1ZJrafaNq6FDJBWWgCLiwGILpItQVVLjoJLwwIkjg/dNiul17XKy96/8tb0+0lvYNUXqCkgcRVHwuNuTNELgKtZF5gqVTdoLvN2WFWHTKcNl87BYypIVTBa8GM7RSFgA7SZUMVYIiaCKzGkkWgtf/7csTugZDoqycnsHZCdZXjxYea0KiK8F5N1WyrYxqVImP45TuytvpC8bYygueJAGORAjT5xhpRVsyQs42pbK58hNBs7Iqo5Wo96/2Lm3t823svuiq2339tPv7Itz9mty3+yr+y6LRybMhWySIDIDRR6hDCjNVZzmKqgKIUY4txRQIQAABmGGhQa7o3OLPbE1t34syZ62IM8THYZ2eeRgLEVfBUj7EARIHItiKRqEyp0xjDEwQ04mV0bxpMrkPlXlzQbSfaEM8y0hCvNHx2Cqgg0njVYE5RimKWio5SPDu7syK9tkSh95b8H9a0Rpa/svfP1odtszIm5mr9v/3+/e/1177EZUUkyFuTUhfS91KxJGQjkPHcQqhMLoYBgbF1VQmot5QQTgS7OZxY3hxHM9MYJo6pW8sSuLcQ//twxO6BkJipIsekegJ9QaNBhItIM6I7sw2E+B6z2iv1cuHSF7e2OguC09IMrlSzOLuR9L4z9q8PPrsSYTp3STB0WCrg+koYEx4Fg7Bxax7GLvexDh6+w1nuZ4s3/pdursotvHkxIoOpey8WELTWF1DwSQCkAAB2WoIuve9bdmRNuwqeWIxmGWDWp5sTb0K0ZQsLAMuhxkwc5kbkw/g9dmbYG9V+ddikaQ89iNNrFlmMQWHjrTpZRzEszuz1adt1Ll+Ynq3SEoT5lxs6UNDLDWWzqE8WymDEk5SAuuMZ3Si9uttab/9moiVevJS7+tudX70bcitalZHsy67qV5yPussiC70VWTRzUd1M62cEwKBUtblBrNWgP+1tQl4narNNVyvN1JM4KtSYivVLZG7SgIwJmy9FrU1LF//7csTugZLaCx8sPFFCABUkJPCPgIfaRLNS7bkSqLO0+Sm79Oa4y468Rgq3KYdfyhm7NemsS6Qclli6Ugo4kzkOHEqLJIjmuqsrKt2L2Stey/+pG7/s6IY3ZOm/TT99/29ao6K19DWUZLsc99W7677UI+dZsPbaskn29eWslcWmMJ1STmmSJ0+0JBQBwB3CHkuLkYgfxxjcliqBkTxxp0g2HNUGc0jyP5JCzIhFGOZLcpELlUrUizlq8W4D9FK05SiJ7EXcRjrZunzeDFhXbWa8sTVcS7vb2xXOtdjiNOCKX/zMn7aVHL/19cv6+//X/+XX6LI2IVjkbPidcstTLfBE8JtYiGx1hZoQICJyEbBDAExQNABVQfiPHQr3BdjFUyyPS2l+fGlHGKu08YB1IUecx0ql+qFtNJaF//twxPWAk3YHHSwMXIp9wSLBgRupz2LkWFpxMxTajVPlQNCEl9WGBXQWHN4keNmWka9N4pm0B7rd/XeM42bKsyEJ5Wj2Qv8lij8R8aczFLIZ9WFbzS8uFo//RYq+d5Kcpl/1Tm9O+hEthuQ0mwzMBDgi0yMaBhaIY6BGECAAM1AD0axcbKMx0y2rqj06TkI2eJ1KI51stxOT6Sb8cYt7YdKNRjgezqEpXzlHmhRoz9V6jxe4s81I6hdqSytcYVXKsDGuFSOYM6tsHL2ZFbbRdva57tVrUZ69bsjMZnfZ2borP9NNbc23b//66PYspVqWoCetmD97O2e4lnoih0WOTlvyWHR9HZzJWrbAZxZIkEokIABkBnEGUjMql+KczfNQ/lajC+mil2JZRqzOonJOn8yOSkXMW+lc2P/7csTqABEaAxinhH8KOMEjGPCP4Y6LXUkeeR+3xFE5xlqFAravpamcQa43q2fnMusZrrOs6yTTmVcfOf6nJfCRSs5VCgy/6bYnRCej+W//mL8Sy+VG8jKUGN8mzXrbq5VM2ukNPKd5kDppMw82z9TyYMCUi5pc0xGHKW5wjR11eGpY6tcWa0CV7NKhs7hBRKNiqtmVVmp+yKp3veu+pbCGtEzdXLx7FpPVgk4eUpxWqlmNZW+h+b06a6J61Wrb6tM07KRN+itqltdNfr+9nka6zGqqIxequWhh0wuVzzWj3GJpwgnUUnqjKNlAcP5aJcsyyKRQqsREy4ofIU6uaIzRUNKxgTmDY+ICBQKEmAELDTZX1WGYk2vJFnBSHuqkhycqwzWtTUfMCwsKm+utfk7/8J/538PPIQsw//twxPEAkroNFMeI3UIowWKk8Jvh4SvCGEn0WisTCEJh/PDFMJC89a/huGxz+W7GHr1NDcSFyzV+KuNXFYVIiIlgiFSMMwKqQOjoJPIhsDKAKoDQpgVJVRSdHQDIyh9g0KYgMIwZJlYkpECwrAlEIQRBE8iZlUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUECAAACodnazoqLWqX+iqnqi/1RF+5Sy/LLSMjVlBAnQ/n//2Wkf/ZKR+Utl/VgoOOllIzWXsshl/y2X4stIyNWChgQdHlQyrauK2gtzXDef/7csTzAxK+DwwnlTuCM8GghICnaTzRor5hXS6b3kel6brXGab1bP+f7zMxym8dyTTivZGdwVSdUq8xxMvlKulOzuDkyqI0SfFCVBgHWmlUrW6G6ZmJhXTe8fuDNBSqTEFNRTMuOTkuM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//twxLqD0y4KxQEN+0gAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",C3=Pn(ut,WV),P3=an.createLock(WV),lh=new En;let N2=!1;const Wf=()=>{N2||(P3(),N2=!0)},E3=n=>{lh.audioBufferProperty.value===null&&(lh.audioBufferProperty.set(n),Wf())},D3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),lh.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),Wf()},B2=ut.decodeAudioData(C3.buffer,E3,D3);B2&&B2.then(n=>{lh.audioBufferProperty.value===null&&(lh.audioBufferProperty.set(n),Wf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Wf()});const tc=[],Qd=[],pl={addStateChangeListener(n,e){let t=tc.indexOf(n),i;t===-1?(tc.push(n),t=tc.length-1,i=[],Qd.push(i),n.onstatechange=()=>{he.clone(i).forEach(s=>{s(n.state)})}):i=Qd[t],i.push(e)},removeStateChangeListener(n,e){const t=tc.indexOf(n),i=Qd[t],s=i.indexOf(e);i.splice(s,1)},hasListener(n,e){let t=!1;const i=tc.indexOf(n);if(i>=0){const s=Qd[i];s&&(t=s.includes(e))}return t}},Oa={DEFAULT_PARAM_CHANGE_TIME_CONSTANT:.015,DEFAULT_LINEAR_GAIN_CHANGE_TIME:.1,TWELFTH_ROOT_OF_TWO:Math.pow(2,1/12)};class to extends rr{}to.BASIC=new to;to.EXTRA=new to;to.enumeration=new oa(to,{phetioDocumentation:"describes whether a sound is considered part of the basic or the extra sounds for the sim"});const T3=.15,x3=.02,ic=Oa.DEFAULT_LINEAR_GAIN_CHANGE_TIME;class I3 extends As{constructor(e){var t,i,s,r,o,d;super({tandem:e,phetioState:!1,phetioDocumentation:"Controls the simulation's sound. For sims that do not support sound, this element and its children can be ignored."}),this.enabledProperty=new Ri(((s=(i=(t=self.phet)==null?void 0:t.chipper)==null?void 0:i.queryParameters)==null?void 0:s.supportsSound)||!1,{tandem:e==null?void 0:e.createTandem("enabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether sound is enabled. Supported only if this sim supportsSound=true."}),this.extraSoundEnabledProperty=new Ri(((d=(o=(r=self.phet)==null?void 0:r.chipper)==null?void 0:o.queryParameters)==null?void 0:d.extraSoundInitiallyEnabled)||!1,{tandem:e==null?void 0:e.createTandem("extraSoundEnabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether extra sound is enabled. Extra sound is additional sounds that can serve to improve the learning experience for individuals with visual disabilities. Note that not all simulations that support sound also support extra sound. Also note that the value is irrelevant when enabledProperty is false."}),this.soundGenerators=[],this._mainOutputLevel=1,this._reverbLevel=x3,this.gainNodesForCategories=new Map,this.duckingProperties=ep(),this.initialized=!1,this.soundGeneratorsAwaitingAdd=[],this.mainGainNode=null,this.duckingGainNode=null,this.convolver=null,this.reverbGainNode=null,this.dryGainNode=null}initialize(e,t,i,s,r,o){const d=St()({categories:["sim-specific","user-interface"]},o),g=ut.currentTime,y=ut.createDynamicsCompressor();y.threshold.setValueAtTime(-6,g),y.knee.setValueAtTime(5,g),y.ratio.setValueAtTime(12,g),y.attack.setValueAtTime(0,g),y.release.setValueAtTime(.25,g),y.connect(ut.destination),this.duckingGainNode=ut.createGain(),this.duckingGainNode.connect(y),this.mainGainNode=ut.createGain(),this.mainGainNode.connect(this.duckingGainNode),this.convolver=ut.createConvolver();const S=z=>{z&&(this.convolver.buffer=z,lh.audioBufferProperty.unlink(S))};lh.audioBufferProperty.link(S),this.reverbGainNode=ut.createGain(),this.reverbGainNode.connect(this.mainGainNode),this.reverbGainNode.gain.setValueAtTime(this._reverbLevel,ut.currentTime),this.convolver.connect(this.reverbGainNode),this.dryGainNode=ut.createGain(),this.dryGainNode.gain.setValueAtTime(1-this._reverbLevel,ut.currentTime),this.dryGainNode.gain.linearRampToValueAtTime(1-this._reverbLevel,ut.currentTime+ic),this.dryGainNode.connect(this.mainGainNode),d.categories.forEach(z=>{const G=ut.createGain();G.connect(this.convolver),G.connect(this.dryGainNode),this.gainNodesForCategories.set(z,G)}),sr.multilink([this.enabledProperty,t,e,i,s,r],(z,G,re,ne,ae,pe)=>{const Ie=z&&G&&re&&ne&&ae&&!pe?this._mainOutputLevel:0;this.mainGainNode.gain.linearRampToValueAtTime(Ie,ut.currentTime+ic)});const T=new Ri(!1),L=()=>{T.value=this.duckingProperties.reduce((z,G)=>z||G.value,!1)};T.lazyLink(z=>{var ne,ae;const G=z?.05:.5,re=ut.currentTime;(ne=this.duckingGainNode)==null||ne.gain.cancelScheduledValues(re),(ae=this.duckingGainNode)==null||ae.gain.setTargetAtTime(z?T3:1,re,G)}),this.duckingProperties.addItemAddedListener(z=>{z.link(L);const G=re=>{re===z&&(re.unlink(L),this.duckingProperties.removeItemRemovedListener(G))};this.duckingProperties.addItemRemovedListener(G)});const x=()=>{self.removeEventListener("touchstart",A,!1),Ln.userGestureEmitter.hasListener(A)&&Ln.userGestureEmitter.removeListener(A)},A=()=>{ut.state!=="running"?(phet.log&&phet.log(`audio context not running, attempting to resume, state = ${ut.state}`),ut.resume().then(()=>{phet.log&&phet.log(`resume appears to have succeeded, phetAudioContext.state = ${ut.state}`),x()}).catch(z=>{const G=`error when trying to resume audio context, err = ${z}`;console.error(G)})):x()};self.addEventListener("touchstart",A,!1),Ln.userGestureEmitter.addListener(A);let Q=ut.state;pl.addStateChangeListener(ut,z=>{phet.log&&phet.log(`audio context state changed, old state = ${Q}, new state = ${z}, audio context time = ${ut.currentTime}`),z!=="running"?(self.addEventListener("touchstart",A,!1),Ln.userGestureEmitter.hasListener(A)||Ln.userGestureEmitter.addListener(A)):console.log("AudioContext is now running."),Q=z}),this.initialized=!0,this.soundGeneratorsAwaitingAdd.forEach(z=>{this.addSoundGenerator(z.soundGenerator,z.soundGeneratorAddOptions)}),this.soundGeneratorsAwaitingAdd.length=0}hasSoundGenerator(e){return this.soundGenerators.includes(e)}addSoundGenerator(e,t){if(t===void 0&&(t={}),!this.initialized){this.soundGeneratorsAwaitingAdd.push({soundGenerator:e,soundGeneratorAddOptions:t});return}this.hasSoundGenerator(e);const i=St()({categoryName:null},t);i.categoryName===null?(e.connect(this.convolver),e.connect(this.dryGainNode)):e.connect(this.gainNodesForCategories.get(i.categoryName)),this.soundGenerators.push(e)}removeSoundGenerator(e){if(!this.initialized){const t=this.soundGeneratorsAwaitingAdd.filter(i=>i.soundGenerator===e);for(;t.length>0;)mn(this.soundGeneratorsAwaitingAdd,t[0]),t.shift();return}e.isConnectedTo(this.convolver)&&e.disconnect(this.convolver),e.isConnectedTo(this.dryGainNode)&&e.disconnect(this.dryGainNode),this.gainNodesForCategories.forEach(t=>{e.isConnectedTo(t)&&e.disconnect(t)}),this.soundGenerators.splice(this.soundGenerators.indexOf(e),1)}setMainOutputLevel(e){if(!this.initialized){console.warn("an attempt was made to set the main output level on an uninitialized sound manager, ignoring");return}this._mainOutputLevel=e,this.enabledProperty.value&&this.mainGainNode.gain.linearRampToValueAtTime(e,ut.currentTime+ic)}set mainOutputLevel(e){this.setMainOutputLevel(e)}get mainOutputLevel(){return this.getMainOutputLevel()}getMainOutputLevel(){return this._mainOutputLevel}setOutputLevelForCategory(e,t){if(!this.initialized){console.warn("an attempt was made to set the output level for a sound category on an uninitialized sound manager, ignoring");return}const i=this.gainNodesForCategories.get(e);i&&i.gain.setValueAtTime(t,ut.currentTime)}addDuckingProperty(e){this.duckingProperties.add(e)}removeDuckingProperty(e){this.duckingProperties.remove(e)}getOutputLevelForCategory(e){return this.initialized?this.gainNodesForCategories.get(e).gain.value:(console.warn("an attempt was made to get the output level for a sound category on an uninitialized sound manager, returning 0"),0)}setReverbLevel(e){if(!this.initialized){console.warn("an attempt was made to set the reverb level on an uninitialized sound manager, ignoring");return}if(e!==this._reverbLevel){const t=ut.currentTime;this.reverbGainNode.gain.linearRampToValueAtTime(e,t+ic),this.dryGainNode.gain.linearRampToValueAtTime(1-e,t+ic),this._reverbLevel=e}}set reverbLevel(e){this.setReverbLevel(e)}get reverbLevel(){return this.getReverbLevel()}getReverbLevel(){return this._reverbLevel}set enabled(e){this.enabledProperty.value=e}get enabled(){return this.enabledProperty.value}set sonificationLevel(e){this.extraSoundEnabledProperty.value=e===to.EXTRA}get sonificationLevel(){return this.extraSoundEnabledProperty.value?to.EXTRA:to.BASIC}logGain(e,t){}logMainGain(e){this.mainGainNode&&this.logGain(this.mainGainNode,e)}logReverbGain(e){this.reverbGainNode&&this.logGain(this.reverbGainNode,e)}}const Gf=new I3,k3=.05,L3=[1,Math.pow(Oa.TWELFTH_ROOT_OF_TWO,2),Math.pow(Oa.TWELFTH_ROOT_OF_TWO,4),Math.pow(Oa.TWELFTH_ROOT_OF_TWO,5),Math.pow(Oa.TWELFTH_ROOT_OF_TWO,7),Math.pow(Oa.TWELFTH_ROOT_OF_TWO,9),Math.pow(Oa.TWELFTH_ROOT_OF_TWO,11)],N3={detectSoundBounds:n=>{const e=n.length,t=[],i=[];for(let r=0;r<n.numberOfChannels;r++){const o=n.getChannelData(r);t[r]=B3(o,e,k3),i[r]=R3(o,e)}const s=n.sampleRate;return{soundStart:he.min(t)/s,soundEnd:he.max(i)/s}},getMajorScalePlaybackRate:n=>{const e=n%7,t=Math.floor(n/7);return Math.pow(2,t)*L3[e]}},B3=(n,e,t)=>{let i=0,s,r=!1;for(s=0;s<e-1&&!r;s++)n[s]>t&&n[s+1]>n[s]&&(i=s,r=!0);let o=0;for(r=!1,s=i;s>0&&!r;s--){const y=n[s];y<=0&&(o=y===0?s:s+1,r=!0)}let d=0,g=0;for(s=0;s<o;s++)d=Math.max(d,n[s]),g=Math.min(g,n[s]);return o},R3=(n,e,t)=>{let i=e-1,s=!1,r;for(r=e-1;r>0&&!s;r--)n[r]<=-.05&&n[r-1]<n[r]&&(i=r,s=!0);let o=i;for(s=!1,r=i;r<e-1&&!s;r++)n[r+1]>=0&&(o=r,s=!0);let d=0,g=0;for(r=o;r<e;r++)d=Math.max(d,n[r]),g=Math.min(g,n[r]);return o},M3=new Ni(!1),O3=Oa.DEFAULT_PARAM_CHANGE_TIME_CONSTANT;class q3 extends Jf{constructor(e){const t=St()({initialOutputLevel:1,audioContext:ut,connectImmediately:!1,sonificationLevel:to.BASIC,additionalAudioNodes:[],associatedViewNode:null,enabledDuringReset:!1,enabledDuringPhetioStateSetting:!1},e);super(t),this.audioContext=t.audioContext,this._outputLevel=t.initialOutputLevel,this.connectionList=[],this.mainGainNode=this.audioContext.createGain(),this.mainGainNode.gain.setValueAtTime(this._outputLevel,this.audioContext.currentTime);const i=t.associatedViewNode?new iR(t.associatedViewNode):new Ri(!0);this.fullyEnabledProperty=new ps([Gf.enabledProperty,this.enabledProperty,M3,i,Gf.extraSoundEnabledProperty,Fc],(s,r,o,d,g,y)=>s&&r&&d&&(t.sonificationLevel===to.BASIC||g)&&(!o||t.enabledDuringReset)&&(!y||t.enabledDuringPhetioStateSetting)),t.connectImmediately&&this.mainGainNode.connect(this.audioContext.destination),this.fullyEnabledProperty.link(s=>{const r=s?0:this._outputLevel,o=s?this._outputLevel:0,d=this.audioContext.currentTime;this.mainGainNode.gain.setValueAtTime(r,d),this.mainGainNode.gain.linearRampToValueAtTime(o,this.audioContext.currentTime+Oa.DEFAULT_LINEAR_GAIN_CHANGE_TIME)}),this.soundSourceDestination=this.mainGainNode;for(let s=t.additionalAudioNodes.length-1;s>=0;s--){const r=t.additionalAudioNodes[s];r.connect(this.soundSourceDestination),this.soundSourceDestination=r}this.disposeEmitter.addListener(()=>{this.fullyEnabledProperty.dispose()})}connect(e){this.mainGainNode.connect(e),this.connectionList.push(e)}disconnect(e){this.mainGainNode.disconnect(e),this.connectionList=he.without(this.connectionList,e)}isConnectedTo(e){return this.connectionList.includes(e)}setOutputLevel(e,t=O3){if(e!==this._outputLevel){const i=this.audioContext.currentTime;this.fullyEnabledProperty.value&&(this.mainGainNode.gain.cancelScheduledValues(i),t===0?this.mainGainNode.gain.setValueAtTime(e,i):this.audioContext.state==="running"?this.mainGainNode.gain.setTargetAtTime(e,i,t):this.mainGainNode.gain.linearRampToValueAtTime(e,i+Oa.DEFAULT_LINEAR_GAIN_CHANGE_TIME)),this._outputLevel=e}}set outputLevel(e){this.setOutputLevel(e)}get outputLevel(){return this.getOutputLevel()}getOutputLevel(){return this._outputLevel}get fullyEnabled(){return this.fullyEnabledProperty.value}}const F3=.2,z3=Oa.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,H3=.1;class GV extends q3{constructor(e,t){const i=St()({loop:!1,trimSilence:!0,initialPlaybackRate:1,initiateWhenDisabled:!1,rateChangesAffectPlayingSounds:!0},t);if(super(i),this.wrappedAudioBuffer=e,this.loop=i.loop,this.rateChangesAffectPlayingSounds=i.rateChangesAffectPlayingSounds,this.initiateWhenDisabled=i.initiateWhenDisabled,this.soundStart=0,this.soundEnd=null,i.trimSilence){const s=r=>{if(r){const o=N3.detectSoundBounds(r);this.soundStart=o.soundStart,this.soundEnd=o.soundEnd,this.wrappedAudioBuffer.audioBufferProperty.unlink(s)}};this.wrappedAudioBuffer.audioBufferProperty.link(s)}this.activeBufferSources=[],this.localGainNode=this.audioContext.createGain(),this.localGainNode.connect(this.soundSourceDestination),this._playbackRate=i.initialPlaybackRate,this.isPlayingProperty=new Ri(!1),this.timeOfDeferredPlayRequest=Number.NEGATIVE_INFINITY,this.audioContextStateChangeListener=s=>{s==="running"&&((this.loop||(Date.now()-this.timeOfDeferredPlayRequest)/1e3<F3)&&this.play(.1),pl.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener))},this.fullyEnabledProperty.lazyLink(s=>{!this.loop&&!s&&this.stop()}),this.disposeEmitter.addListener(()=>{pl.hasListener(this.audioContext,this.audioContextStateChangeListener)&&pl.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener)})}play(e=0){if(this.audioContext.state==="running"&&this.wrappedAudioBuffer.audioBufferProperty.value){const t=this.audioContext.currentTime;if(this.loop&&!this.isPlayingProperty.get()||!this.loop&&(this.fullyEnabled||this.initiateWhenDisabled)){const i=this.audioContext.createBufferSource();i.buffer=this.wrappedAudioBuffer.audioBufferProperty.value,i.loop=this.loop,i.loopStart=this.soundStart,this.soundEnd&&(i.loopEnd=this.soundEnd),this.localGainNode.gain.cancelScheduledValues(t),this.localGainNode.gain.setValueAtTime(1,t),i.connect(this.soundSourceDestination),this.activeBufferSources.push(i),this.loop||(i.onended=()=>{const s=this.activeBufferSources.indexOf(i);s>-1&&this.activeBufferSources.splice(s,1),this.isPlayingProperty.value=this.activeBufferSources.length>0}),i.playbackRate.setValueAtTime(this._playbackRate,t),i.start(t+e,this.soundStart),this.isPlayingProperty.value=!0}}else this.audioContext.state==="suspended"&&(this.timeOfDeferredPlayRequest=Date.now(),pl.hasListener(this.audioContext,this.audioContextStateChangeListener)||pl.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener))}stop(e=H3){const t=e>0?e/4.61:Oa.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,i=this.audioContext.currentTime,s=i+e;this.localGainNode.gain.cancelScheduledValues(i),this.localGainNode.gain.setTargetAtTime(0,i,t),this.activeBufferSources.forEach(r=>{r.stop(s)}),this.activeBufferSources.length=0,this.isPlayingProperty.value=!1,pl.hasListener(this.audioContext,this.audioContextStateChangeListener)&&pl.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener)}setPlaybackRate(e,t=z3){if(this.rateChangesAffectPlayingSounds){const i=this.audioContext.currentTime;this.activeBufferSources.forEach(s=>{s.playbackRate.cancelScheduledValues(i),s.playbackRate.setTargetAtTime(e,i,t)})}this._playbackRate=e}getPlaybackRate(){return this._playbackRate}get playbackRate(){return this.getPlaybackRate()}get isPlaying(){return this.isPlayingProperty.value}getNumberOfPlayingInstances(){return this.activeBufferSources.length}}class cy{constructor(e,t){const i=St()({soundClipOptions:{},soundManagerOptions:{}},t);this._soundClip=new GV(e,i.soundClipOptions),Gf.addSoundGenerator(this._soundClip,i.soundManagerOptions)}play(){this._soundClip.play()}stop(){this._soundClip.stop()}}const ga={soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}},K3={wrappedAudioBuffer:rh,soundClipPlayerOptions:ga},_o=n=>Qi({},ga,{soundClipOptions:{initialOutputLevel:n}}),dm=new Map,o0={get(n){if(!dm.has(n)){const e=U3.get(n)||K3;dm.set(n,new cy(e.wrappedAudioBuffer,e.soundClipPlayerOptions))}return dm.get(n)}},U3=new Map([["accordionBoxClosed",{wrappedAudioBuffer:tu,soundClipPlayerOptions:_o(.5)}],["accordionBoxOpened",{wrappedAudioBuffer:iu,soundClipPlayerOptions:_o(.5)}],["boundaryReached",{wrappedAudioBuffer:su,soundClipPlayerOptions:_o(.8)}],["checkboxChecked",{wrappedAudioBuffer:nu,soundClipPlayerOptions:ga}],["checkboxUnchecked",{wrappedAudioBuffer:ru,soundClipPlayerOptions:ga}],["generalBoundaryBoop",{wrappedAudioBuffer:sh,soundClipPlayerOptions:_o(.2)}],["generalClose",{wrappedAudioBuffer:lu,soundClipPlayerOptions:_o(.4)}],["generalOpen",{wrappedAudioBuffer:hu,soundClipPlayerOptions:_o(.4)}],["generalSoftClick",{wrappedAudioBuffer:nh,soundClipPlayerOptions:_o(.2)}],["grab",{wrappedAudioBuffer:uu,soundClipPlayerOptions:ga}],["pause",{wrappedAudioBuffer:cu,soundClipPlayerOptions:ga}],["play",{wrappedAudioBuffer:du,soundClipPlayerOptions:ga}],["pushButton",{wrappedAudioBuffer:ou,soundClipPlayerOptions:_o(.5)}],["release",{wrappedAudioBuffer:fu,soundClipPlayerOptions:ga}],["resetAll",{wrappedAudioBuffer:rh,soundClipPlayerOptions:{soundClipOptions:{initialOutputLevel:.39,enabledDuringReset:!0,enabledDuringPhetioStateSetting:!0},soundManagerOptions:{categoryName:"user-interface"}}}],["softClick",{wrappedAudioBuffer:au,soundClipPlayerOptions:ga}],["stepBackward",{wrappedAudioBuffer:ah,soundClipPlayerOptions:ga}],["stepForward",{wrappedAudioBuffer:oh,soundClipPlayerOptions:ga}],["switchToLeft",{wrappedAudioBuffer:pu,soundClipPlayerOptions:_o(.2)}],["switchToRight",{wrappedAudioBuffer:gu,soundClipPlayerOptions:_o(.2)}],["toggleOff",{wrappedAudioBuffer:ah,soundClipPlayerOptions:ga}],["toggleOn",{wrappedAudioBuffer:oh,soundClipPlayerOptions:ga}]]);function Y3(n,e){return n.map(t=>t.createNode(e&&t.tandemName?e.createTandem(t.tandemName):rt.OPTIONAL))}class nr extends rr{}nr.IDLE=new nr;nr.OVER=new nr;nr.PRESSED=new nr;nr.enumeration=new oa(nr);const R2={LIGHT_BLUE:new ct(153,206,255),LIGHT_GRAY:new ct(220,220,220)},W3=new s0(.7),G3=new i0(1.2);class gp extends Cu(Hr(Rt)){constructor(e,t,i,s){var S;const r=St()({content:null,xMargin:10,yMargin:5,xAlign:"center",yAlign:"center",xContentOffset:0,yContentOffset:0,baseColor:R2.LIGHT_BLUE,cursor:"pointer",buttonAppearanceStrategy:gp.FlatAppearanceStrategy,buttonAppearanceStrategyOptions:{},contentAppearanceStrategy:null,contentAppearanceStrategyOptions:{},enabledAppearanceStrategy:(T,L,x,A)=>{x.filters=T?[]:[W3,G3],A&&(A.filters=T?[]:[n0.FULL],A.opacity=T?1:qc.DISABLED_OPACITY)},disabledColor:R2.LIGHT_GRAY,tagName:"button",tandemNameSuffix:"Button",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},s);r.listenerOptions=Qi({tandem:(S=r.tandem)==null?void 0:S.createTandem("pressListener")},r.listenerOptions),r.enabledProperty=e.enabledProperty,super(),this.contentContainer=null,this.layoutSizeProperty=new Ni(new Ws(0,0)),this.content=r.content,this.buttonModel=e,this._settableBaseColorProperty=new eo(r.baseColor),this._disabledColorProperty=new eo(r.disabledColor),this.baseColorProperty=new ps([this._settableBaseColorProperty,this.enabledProperty,this._disabledColorProperty],(T,L,x)=>L?T:x),this._pressListener=e.createPressListener(r.listenerOptions),this.addInputListener(this._pressListener),t.fill=this.baseColorProperty,this.addChild(t);const o=new r.buttonAppearanceStrategy(t,i,this.baseColorProperty,r.buttonAppearanceStrategyOptions);let d;r.contentAppearanceStrategy&&r.content&&(d=new r.contentAppearanceStrategy(r.content,i,r.contentAppearanceStrategyOptions)),this.maxLineWidth=o.maxLineWidth;let g=null,y=null;r.content&&(this.contentContainer=new Rt({children:[r.content],pickable:!1}),g=new yV(this.contentContainer,{xAlign:r.xAlign,yAlign:r.yAlign,leftMargin:r.xMargin+r.xContentOffset,rightMargin:r.xMargin-r.xContentOffset,topMargin:r.yMargin+r.yContentOffset,bottomMargin:r.yMargin-r.yContentOffset}),y=sr.multilink([t.boundsProperty,this.layoutSizeProperty],(T,L)=>{L.width>0&&L.height>0&&(g.alignBounds=ot.point(T.center).dilatedXY(L.width/2,L.height/2))}),this.addChild(g)),this.mutate(r),this.enabledProperty.link(T=>r.enabledAppearanceStrategy(T,this,t,g)),this.disposeButtonNode=()=>{g&&g.dispose(),y&&y.dispose(),o.dispose&&o.dispose(),d&&d.dispose&&d.dispose(),this._pressListener.dispose(),this.baseColorProperty.dispose(),this._settableBaseColorProperty.dispose(),this._disabledColorProperty.dispose()}}dispose(){this.disposeButtonNode(),super.dispose()}setBaseColor(e){this._settableBaseColorProperty.paint=e}set baseColor(e){this.setBaseColor(e)}get baseColor(){return this.getBaseColor()}getBaseColor(){return this._settableBaseColorProperty.paint}pdomClick(){this._pressListener.click(null)}}class X3{constructor(e,t,i,s){const r=new eo(i,{luminanceFactor:.4}),o=new eo(i,{luminanceFactor:-.4}),d=i,g=r,y=o,S=Qi({stroke:o},s),T=typeof S.lineWidth=="number"?S.lineWidth:1;e.stroke=S.stroke||o,e.lineWidth=T,this.maxLineWidth=e.hasStroke()?T:0,e.cachedPaints=[d,g,y];function L(x){switch(x){case nr.IDLE:e.fill=d;break;case nr.OVER:e.fill=g;break;case nr.PRESSED:e.fill=y;break;default:throw new Error(`unsupported interactionState: ${x}`)}}t.link(L),this.disposeFlatAppearanceStrategy=()=>{t.hasListener(L)&&t.unlink(L),r.dispose(),o.dispose()}}dispose(){this.disposeFlatAppearanceStrategy()}}gp.FlatAppearanceStrategy=X3;const XV=7,jV=7,Xf=3;class mp extends gp{constructor(e,t,i){let s=St()({size:null,minWidth:jV+Xf,minHeight:XV+Xf,xMargin:8,yMargin:5,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,touchAreaXShift:0,touchAreaYShift:0,mouseAreaXShift:0,mouseAreaYShift:0,stroke:null,lineWidth:.5,cornerRadius:4,leftTopCornerRadius:null,rightTopCornerRadius:null,leftBottomCornerRadius:null,rightBottomCornerRadius:null,buttonAppearanceStrategy:mp.ThreeDAppearanceStrategy},i);s.content,s.size,s.buttonAppearanceStrategyOptions||(s.buttonAppearanceStrategyOptions={stroke:s.stroke,lineWidth:s.lineWidth});const r=new Cn(null),o=he.pick(s,Rt.REQUIRES_BOUNDS_OPTION_KEYS);s=he.omit(s,Rt.REQUIRES_BOUNDS_OPTION_KEYS),super(e,r,t,s),this.buttonNodeConstraint=new Z3(this,this.layoutSizeProperty,{content:s.content??null,size:s.size,buttonBackground:r,buttonBackgroundOptions:s,minWidth:s.minWidth,minHeight:s.minHeight,xMargin:s.xMargin,yMargin:s.yMargin,maxLineWidth:this.maxLineWidth,touchAreaXDilation:s.touchAreaXDilation,touchAreaYDilation:s.touchAreaYDilation,touchAreaXShift:s.touchAreaXShift,touchAreaYShift:s.touchAreaYShift,mouseAreaXDilation:s.mouseAreaXDilation,mouseAreaYDilation:s.mouseAreaYDilation,mouseAreaXShift:s.mouseAreaXShift,mouseAreaYShift:s.mouseAreaYShift}),this.addDisposable(this.buttonNodeConstraint),this.mutate(o)}}function j3(n,e,t){const i=Math.min(n/2,e/2);return Wt.roundedRectangleWithRadii(0,0,n,e,{topLeft:Math.min(i,t.leftTopCornerRadius!==null?t.leftTopCornerRadius:t.cornerRadius),topRight:Math.min(i,t.rightTopCornerRadius!==null?t.rightTopCornerRadius:t.cornerRadius),bottomLeft:Math.min(i,t.leftBottomCornerRadius!==null?t.leftBottomCornerRadius:t.cornerRadius),bottomRight:Math.min(i,t.rightBottomCornerRadius!==null?t.rightBottomCornerRadius:t.cornerRadius)})}class Q3{constructor(e,t,i,s){const r=s&&s.stroke?s.stroke:new eo(i,{luminanceFactor:-.4}),o=s&&s.lineWidth!==void 0?s.lineWidth:.5,d=St()({stroke:r,lineWidth:o,overStroke:r,overLineWidth:o,overFill:i,overButtonOpacity:1,selectedStroke:r,selectedLineWidth:o,selectedButtonOpacity:1,deselectedStroke:r,deselectedFill:null,deselectedLineWidth:o,deselectedButtonOpacity:1},s),g=new eo(i,{luminanceFactor:.7}),y=new eo(i,{luminanceFactor:.5}),S=new eo(i,{luminanceFactor:.2}),T=new eo(i,{luminanceFactor:-.3}),L=new eo(i,{luminanceFactor:-.4}),x=new eo(i,{luminanceFactor:-.5}),A=new ps([i],ne=>ne.withAlpha(0)),Q=new ct(255,255,255,.7),z=new Cn(null,{stroke:d.stroke,lineWidth:d.lineWidth,pickable:!1});e.addChild(z),this.maxLineWidth=typeof d.lineWidth=="number"?d.lineWidth:0;let G;const re=()=>{if(!e.shape)return;const ne=e.shape.bounds.width,ae=e.shape.bounds.height;z.shape=e.shape;const pe=Math.min(XV/ae,1),N=Math.max(1-Xf/ae,0),Ie=Math.min(jV/ne,1),$e=Math.max(1-Xf/ne,0),Ee=new ml(0,0,0,ae).addColorStop(0,g).addColorStop(pe,i).addColorStop(N,i).addColorStop(1,x),Je=new ml(0,0,ne,0).addColorStop(0,Q).addColorStop(Ie,A).addColorStop($e,A).addColorStop(1,x),Ge=new ml(0,0,0,ae).addColorStop(0,g).addColorStop(pe,y).addColorStop(N,y).addColorStop(1,x),_t=new ml(0,0,ne,0).addColorStop(0,Q).addColorStop(Ie/2,new ct(255,255,255,0)).addColorStop($e,A).addColorStop(1,T),it=new ml(0,0,0,ae).addColorStop(0,g).addColorStop(pe*.67,T).addColorStop(N,S).addColorStop(1,x);e.cachedPaints=[Ee,Ge,it],z.cachedPaints=[Je,_t],G&&t.unlink(G),G=nt=>{switch(nt){case nr.IDLE:e.fill=d.deselectedFill||Ee,e.stroke=d.deselectedStroke,e.lineWidth=d.deselectedLineWidth,e.opacity=d.deselectedButtonOpacity,z.fill=Je,z.opacity=d.deselectedButtonOpacity;break;case nr.OVER:e.fill=Ge,e.stroke=d.overStroke,e.lineWidth=d.overLineWidth,e.opacity=d.overButtonOpacity,z.fill=_t,z.opacity=d.overButtonOpacity;break;case nr.PRESSED:e.fill=it,e.stroke=d.selectedStroke,e.lineWidth=d.selectedLineWidth,e.opacity=d.selectedButtonOpacity,z.fill=_t,z.opacity=d.selectedButtonOpacity;break;default:throw new Error(`unsupported interactionState: ${nt}`)}},t.link(G)};e.selfBoundsProperty.link(re),this.disposeThreeDAppearanceStrategy=()=>{e.selfBoundsProperty.unlink(re),t.hasListener(G)&&t.unlink(G),g.dispose(),y.dispose(),S.dispose(),T.dispose(),L.dispose(),x.dispose(),A.dispose()}}dispose(){this.disposeThreeDAppearanceStrategy()}}mp.ThreeDAppearanceStrategy=Q3;class Z3 extends mh{constructor(e,t,i){super(e),this.buttonNode=e,this.layoutSizeProperty=t,this.isFirstLayout=!0,this.lastLocalWidth=0,this.lastLocalHeight=0,this.options=i,this.buttonNode.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.options.content&&this.addNode(this.options.content),this.layout()}layout(){super.layout();const e=this.buttonNode,t=this.options.content,i=t?this.createLayoutProxy(t):null;if(!!t!=!!i)return;const s=e.widthSizable,r=e.heightSizable;let o=i?i.minimumWidth+this.options.xMargin*2:0,d=i?i.minimumHeight+this.options.yMargin*2:0;this.options.size&&(o=this.options.size.width,d=this.options.size.height),this.options.minWidth&&(o=Math.max(this.options.minWidth+this.options.maxLineWidth,o)),this.options.minHeight&&(d=Math.max(this.options.minHeight+this.options.maxLineWidth,d));const g=this.isFirstLayout||s?o:e.localMinimumWidth,y=this.isFirstLayout||r?d:e.localMinimumHeight;if(this.lastLocalWidth=this.isFirstLayout||s?Math.max(g,s?e.localPreferredWidth??0:0):this.lastLocalWidth,this.lastLocalHeight=this.isFirstLayout||r?Math.max(y,r?e.localPreferredHeight??0:0):this.lastLocalHeight,(this.isFirstLayout||s||r)&&(this.options.buttonBackground.shape=j3((s?this.lastLocalWidth:g)-this.options.maxLineWidth,(r?this.lastLocalHeight:y)-this.options.maxLineWidth,this.options.buttonBackgroundOptions),this.buttonNode.touchArea=this.options.buttonBackground.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation).shiftedXY(this.options.touchAreaXShift,this.options.touchAreaYShift),this.buttonNode.mouseArea=this.options.buttonBackground.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation).shiftedXY(this.options.mouseAreaXShift,this.options.mouseAreaYShift)),i){const S=this.lastLocalWidth-this.options.xMargin*2,T=this.lastLocalHeight-this.options.yMargin*2;if(i.preferredWidth=S,i.preferredHeight=T,this.options.size){const L=this.buttonNode.contentContainer;L.maxWidth=S,L.maxHeight=T}}this.isFirstLayout=!1,this.layoutSizeProperty.value=new Ws(this.lastLocalWidth,this.lastLocalHeight),e.localMinimumWidth=g,e.localMinimumHeight=y,i&&i.dispose()}dispose(){this.buttonNode.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.unlink(this._updateLayoutListener),super.dispose()}}class J3 extends Jf{constructor(e){const t=St()({startCallback:he.noop,endCallback:he.noop,tandem:rt.REQUIRED,phetioState:As.DEFAULT_OPTIONS.phetioState,phetioReadOnly:As.DEFAULT_OPTIONS.phetioReadOnly,phetioFeatured:As.DEFAULT_OPTIONS.phetioFeatured},e);t.enabledPropertyOptions=Qi({phetioState:t.phetioState,phetioReadOnly:t.phetioReadOnly,phetioDocumentation:"When disabled, the button is grayed out and cannot be pressed",phetioFeatured:!0},t.enabledPropertyOptions),super(t),this.overProperty=new Ri(!1),this.downProperty=new Ri(!1,{reentrant:!0}),this.pdomClickingProperty=new Ri(!1),this.focusedProperty=new Ri(!1),this.looksPressedProperty=new Ri(!1),this.looksOverProperty=new Ri(!1),this.produceSoundEmitter=new _n,this.interrupted=!1,this.listeners=[],this.looksPressedMultilink=null,this.looksOverMultilink=null,this.downProperty.lazyLink(i=>{i?t.startCallback():t.endCallback(this.looksOverProperty.get())}),this.enabledProperty.link(i=>{if(!i)for(let s=0;s<this.listeners.length;s++){const r=this.listeners[s];r.interrupt&&r.interrupt()}}),this.disposeButtonModel=()=>{this.overProperty.dispose(),this.downProperty.dispose(),this.pdomClickingProperty.dispose(),this.produceSoundEmitter.dispose(),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.looksOverMultilink&&this.looksOverMultilink.dispose(),this.listeners=[]}}dispose(){this.disposeButtonModel(),super.dispose()}createPressListener(e){e=Qi({canStartPress:()=>this.enabledProperty.value},e);const t=new ih(e);this.listeners.push(t),t.isPressedProperty.lazyLink(r=>{this.interrupted=t.interrupted,this.downProperty.set(r)}),t.isOverProperty.lazyLink(this.overProperty.set.bind(this.overProperty)),t.isFocusedProperty.lazyLink(this.focusedProperty.set.bind(this.focusedProperty)),t.pdomClickingProperty.lazyLink(this.pdomClickingProperty.set.bind(this.pdomClickingProperty)),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.looksOverMultilink&&this.looksOverMultilink.dispose();const i=this.listeners.map(r=>r.looksPressedProperty);i.push(this.downProperty),this.looksPressedMultilink=sr.multilinkAny(i,(...r)=>{this.looksPressedProperty.value=he.reduce(r,(o,d)=>o||d,!1)});const s=this.listeners.map(r=>r.looksOverProperty);return this.looksOverMultilink=sr.multilinkAny(s,(...r)=>{this.looksOverProperty.value=he.reduce(r,(o,d)=>o||d,!1)}),t}}const QV="data:audio/mpeg;base64,//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAFAAAE5AAzMzMzMzMzMzMzMzMzMzMzMzMzZmZmZmZmZmZmZmZmZmZmZmZmZmaZmZmZmZmZmZmZmZmZmZmZmZmZmczMzMzMzMzMzMzMzMzMzMzMzMzM//////////////////////////8AAAA5TEFNRTMuOTlyAaUAAAAAAAAAABRAJAZmQgAAQAAABOTGvClKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjxrv+ggLoZGTXh9oJQAa222FG3ASABBG51MY/j4AAB4AYI3/H3//Pqd/zv0Jp/8//zn3n6Mmf/J7f//8jf+fOeeggHA4RXkGh8XEwHAMHD4udyCYuhAALhgJqWJAEDGMYxvHlyAHxc9P76dP//T/Rm//p+v9tvb0Tzr1XyfnelP/3b0//5vo86Mlm0dHQrscccRQg5oSYpziaiB52oQCkxnR6LQisRCEMhluyeqEhIiWMiSvQjhwDTCtCPyDkNrP+UsBTNwVsJGSD/+1LEFoAQMWtluYaQEWGP7H+wYAR9IvpDLBawV8OWbG5oShmbiVnh8GAU6ZIjnetMKuOcpmaSndX80HuS7puaIKq/6lvM36lIJf8+Zm6CFA0t3fV/91IOhPJ1GCH13q//5o6DJl9/F3ErtwAGRlJ26tx4H5gV4lzzrIqy8jTNBZl1Hep3doI2/x6AMOljV5/M4clzeagOVs4SmnmZk2fTyahylhxZ1R7/1HlnhEe4KgF3SISoKnviYs9T8sp4Ku5ICsAAg3RwNdct5GVqea2W4P/7UsQHgAuZRzrtmE8JO4qkaa4M4MXAzUcoyYPSsZe/D4w5DUicEmE/ziQka1VaLTh0y8+qp/UtRMpQoli5jYCz6St//RjTOrPXlI/KJaZ2RHX6mMrJqxfqVjPM/K/thi6pyAAPlyOxkEr9tPgR2ldNwBRI0383ZJR5NmIAG2zBZOw1tKaJR6jzjIxgTlVLjBgJmawwRo8JXAUYCz1gr/q+aVWur8tO+j4iUe////6ii3UCwZHQhxd93nYdy9H1MjPwThY/VGgQQLo200aOkCDF//tSxA+CCwg1HK3lIQHXlCPo97AIw8D44EBOcB8oGBIND4gcCBc+IFHC7wwUOA+oMiAaH1PDCw+mxbydxPV3/zjbCnci8p/9nIJTQYSH5vktZIAEdHIA5HkiS4k11MYsCUFS8QSbEVhJUnQlFpKIJNQhJJrBKEZ8kiKoJIkqToSj5KJJ6hiCTXCUJUZJEl45Ek9TCUfQkkyuSSbzS72V1mVruLnhMeBUsHREPDQiPA0VOiJwdKuBlR5Fqtbk3f///t8FdSogAuxJp2uAWhIWFmv/+1LEBgPGHADHoIhgIAAANIAAAATcLVLFRWKCwsLCyxUVFVf6xVmLCws1YqKior////2RVn/+LCwtTEFNRTMuOTkuM1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",$3=Pn(ut,QV),eO=an.createLock(QV),mu=new En;let M2=!1;const jf=()=>{M2||(eO(),M2=!0)},tO=n=>{mu.audioBufferProperty.value===null&&(mu.audioBufferProperty.set(n),jf())},iO=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),mu.audioBufferProperty.set(ut.createBuffer(1,1,ut.sampleRate)),jf()},O2=ut.decodeAudioData($3.buffer,tO,iO);O2&&O2.then(n=>{mu.audioBufferProperty.value===null&&(mu.audioBufferProperty.set(n),jf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),jf()});class sO{constructor(){this._basisSoundClip=null,this.soundPlayers=[]}getSoundClipInstance(){return this._basisSoundClip||(this._basisSoundClip=new GV(mu,{initialOutputLevel:.7,rateChangesAffectPlayingSounds:!1}),Gf.addSoundGenerator(this._basisSoundClip,{categoryName:"user-interface"})),this._basisSoundClip}getSelectionSoundPlayer(e){if(!this.soundPlayers[e]){const t=Math.pow(2,-e/12);this.soundPlayers[e]=new nO(this.getSoundClipInstance(),t)}return this.soundPlayers[e]}}class nO{constructor(e,t){this.soundPlayer=e,this.playbackRate=t}play(){this.soundPlayer.setPlaybackRate(this.playbackRate),this.soundPlayer.play()}stop(){this.soundPlayer.stop()}}const ZV=new sO;class yp extends cp(Hr(Rt)){constructor(e,t,i,s){const r=St()({centerColor:"black",radius:yp.DEFAULT_RADIUS,selectedColor:"rgb( 143, 197, 250 )",deselectedColor:"white",xSpacing:8,stroke:"black",soundPlayer:ZV.getSelectionSoundPlayer(0),a11yNameAttribute:null,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,cursor:"pointer",disabledOpacity:qc.DISABLED_OPACITY,tandem:rt.REQUIRED,tandemNameSuffix:"RadioButton",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!1,tagName:"input",inputType:"radio",containerTagName:"li",labelTagName:"label",appendLabel:!0,appendDescription:!0,accessibleNameBehavior:Hr.BASIC_ACCESSIBLE_NAME_BEHAVIOR},s);super(),this.onInputEmitter=new _n,this._isMouseAreaCustomized=!1,this._isTouchAreaCustomized=!1,this._isSettingAreas=!1,this.value=t;const o=new Rt,d=new fc(r.radius/3,{fill:r.centerColor}),g=new fc(r.radius,{fill:r.selectedColor,stroke:r.stroke}),y=new Rt({children:[g,d]});o.addChild(y);const S=new Rt,T=new fc(r.radius,{fill:r.deselectedColor,stroke:r.stroke});S.addChild(T);const L=new Rt({children:[o,S],pickable:!1}),x=()=>{i.left=T.right+r.xSpacing,i.centerY=T.centerY};i.boundsProperty.link(x);const A=new js({});o.pickable=S.pickable=!1,i.pickable=!1,this.children=[L,i,A],this.constraint=new rO(this,L,i,A,r),this.constraint.updateLayout();const Q=ae=>{o.visible=ae===t,S.visible=!o.visible};e.link(Q);const z=()=>{const ae=e.value;e.set(t),ae!==e.value&&this.onInputEmitter.emit()},G=new Af({fire:z,tandem:r.tandem});this.addInputListener(G),this.onInputEmitter.addListener(()=>{r.soundPlayer.play(),this.voicingSpeakNameResponse()});const re={change:z};this.addInputListener(re),e.value===t&&this.setPDOMAttribute("checked","checked");const ne=ae=>{this.pdomChecked=ae===t};e.link(ne),r.accessibleName||(r.accessibleName=aV(i)),r.a11yNameAttribute!==null&&this.setPDOMAttribute("name",r.a11yNameAttribute),this.mutate(r),this.disposeAquaRadioButton=()=>{this.constraint.dispose(),this.onInputEmitter.dispose(),this.removeInputListener(G),this.removeInputListener(re),e.unlink(ne),e.unlink(Q),i.boundsProperty.hasListener(x)&&i.boundsProperty.unlink(x),G.dispose()}}dispose(){this.disposeAquaRadioButton(),super.dispose()}}yp.DEFAULT_RADIUS=7;class rO extends mh{constructor(e,t,i,s,r){super(e),this.radioButton=e,this.radioNode=t,this.labelNode=i,this.rectangle=s,this.options=r,this.radioButton.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.addNode(i)}layout(){super.layout();const e=this.createLayoutProxy(this.labelNode),t=e.minimumWidth,i=this.radioNode.width+this.options.xSpacing+t,s=Math.max(i,this.radioButton.localPreferredWidth||0);Nc(this.labelNode)&&(e.preferredWidth=s-this.radioNode.width-this.options.xSpacing),e.left=this.radioNode.right+this.options.xSpacing,e.centerY=this.radioNode.centerY,this.rectangle.rectBounds=this.radioNode.bounds.union(e.bounds).withMaxX(Math.max(this.radioNode.left+s,e.right)),this.radioButton._isSettingAreas=!0,this.radioButton._isTouchAreaCustomized||(this.radioButton.touchArea=this.radioButton.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation)),this.radioButton._isMouseAreaCustomized||(this.radioButton.mouseArea=this.radioButton.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation)),this.radioButton._isSettingAreas=!1,e.dispose(),this.radioButton.localMinimumWidth=i}dispose(){this.radioButton.localPreferredWidthProperty.unlink(this._updateLayoutListener),super.dispose()}}let q2=0;const aO="AquaRadioButtonGroup";class oO extends Xc{constructor(e,t,i){q2++;const s=St()({touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,orientation:"vertical",spacing:3,stretch:!0,disabledOpacity:qc.DISABLED_OPACITY,tandem:rt.REQUIRED,tandemNameSuffix:"RadioButtonGroup",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioFeatured:!0,tagName:"ul",labelTagName:"h3",ariaRole:"radiogroup",accessibleHelpTextBehavior:_a.HELP_TEXT_BEFORE_CONTENT,groupFocusHighlight:!0},i),r=Y3(t,s.tandem);s.orientation==="vertical"&&(s.align=s.align||"left");const o=t.map((S,T)=>{const L=r[T];return new yp(e,S.value,L,Qi({a11yNameAttribute:aO+q2,soundPlayer:ZV.getSelectionSoundPlayer(T),tandem:S.tandemName?s.tandem.createTandem(S.tandemName):s.tandem===rt.OPT_OUT?rt.OPT_OUT:rt.REQUIRED,touchAreaXDilation:s.orientation==="horizontal"?s.spacing/2:s.touchAreaXDilation,touchAreaYDilation:s.orientation==="vertical"?s.spacing/2:s.touchAreaYDilation,mouseAreaXDilation:s.orientation==="horizontal"?s.spacing/2:s.mouseAreaXDilation,mouseAreaYDilation:s.orientation==="vertical"?s.spacing/2:s.mouseAreaYDilation},s.radioButtonOptions,S.options))});s.children=o,super(s),this.onInputEmitter=new _n;const d=new ek(this);d.focusTargetProperty.link(S=>{if(S){const T=S;d.focusWasInGroup?T.voicingSpeakNameResponse():T.voicingSpeakFullResponse({contextResponse:null,hintResponse:this.accessibleHelpText})}}),this.addInputListener(d),this.addAriaLabelledbyAssociation({thisElementName:ir.PRIMARY_SIBLING,otherNode:this,otherElementName:ir.LABEL_SIBLING});const g={keydown:S=>{je.isArrowKey(S.domEvent)&&S.pointer.reserveForKeyboardDrag()}};this.addInputListener(g);const y=this.onRadioButtonInput.bind(this);for(let S=0;S<o.length;S++)o[S].onInputEmitter.addListener(y);this.addLinkedElement(e,{tandemName:"property"}),this.disposeAquaRadioButtonGroup=()=>{this.removeInputListener(g),o.forEach(S=>S.dispose()),this.onInputEmitter.dispose(),d.dispose(),r.forEach(S=>S.dispose())},this.radioButtons=o}onRadioButtonInput(){this.onInputEmitter.emit()}dispose(){this.disposeAquaRadioButtonGroup(),super.dispose()}getButton(e){return he.find(this.radioButtons,i=>i.value===e)}}class lO extends bx{constructor(e){super([e.focusedProperty,e.overProperty,e.looksOverProperty,e.looksPressedProperty],(t,i,s,r)=>s&&!r?nr.OVER:(i||t)&&r?nr.PRESSED:nr.IDLE,{valueType:nr})}}class hO extends J3{constructor(e){const t=St()({fireOnDown:!1,listener:null,interruptListener:null,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:rt.REQUIRED,phetioReadOnly:As.DEFAULT_OPTIONS.phetioReadOnly},e);super(t),this.startEvent=null,this.isFiringProperty=new Ri(!1),this.firedEmitter=new _n({tandem:t.tandem.createTandem("firedEmitter"),phetioDocumentation:"Emits when the button is fired",phetioReadOnly:t.phetioReadOnly,phetioEventType:Si.USER,hasListenerOrderDependencies:!0}),t.interruptListener&&this.firedEmitter.addListener(()=>{t.interruptListener(this.startEvent)}),t.listener!==null&&this.firedEmitter.addListener(t.listener),t.fireOnHold&&(this.timer=new mv({callback:this.fire.bind(this),delay:t.fireOnHoldDelay,interval:t.fireOnHoldInterval}));const i=r=>{var o,d,g,y;if(r)this.enabledProperty.get()&&(this.startEvent=((y=(g=(d=(o=self.phet)==null?void 0:o.joist)==null?void 0:d.display)==null?void 0:g._input)==null?void 0:y.currentSceneryEvent)||null,t.fireOnDown&&this.fire(),this.timer&&this.timer.start(),(t.fireOnDown||this.timer)&&this.produceSoundEmitter.emit());else{const S=!t.fireOnDown&&(this.overProperty.get()||this.focusedProperty.get())&&this.enabledProperty.get()&&!this.interrupted;this.timer?this.timer.stop(S):S&&(this.produceSoundEmitter.emit(),this.fire())}};this.downProperty.link(i);const s=r=>{!r&&this.timer&&this.timer.stop(!1)};this.enabledProperty.link(s),this.disposePushButtonModel=()=>{this.isFiringProperty.value=!1,this.isFiringProperty.dispose(),this.firedEmitter.dispose(),this.downProperty.unlink(i),this.enabledProperty.unlink(s),this.timer&&(this.timer.dispose(),this.timer=null)}}dispose(){this.disposePushButtonModel(),super.dispose()}addListener(e){this.firedEmitter.addListener(e)}removeListener(e){this.firedEmitter.removeListener(e)}fire(){this.isFiringProperty.value=!0,this.firedEmitter.emit(),this.isFiringProperty.value=!1}}class uO extends mp{constructor(e){const t=St()({soundPlayer:o0.get("pushButton"),tandem:rt.REQUIRED,listenerOptions:{tandem:rt.OPT_OUT}},e),i=t.listener,s=he.omit(t,["listener"]),r=new hO(s);super(r,new lO(r),s),this.pushButtonModel=r,i&&this.addListener(i);const o=()=>{t.soundPlayer.play()};r.produceSoundEmitter.addListener(o),this.disposeRectangularPushButton=function(){r.produceSoundEmitter.removeListener(o),r.dispose()}}dispose(){super.dispose(),this.disposeRectangularPushButton()}addListener(e){this.pushButtonModel.addListener(e)}removeListener(e){this.pushButtonModel.removeListener(e)}}class cO{play(){}stop(){}}const fm=new cO,JV={SLIDER_VERTICAL_ROTATION:-Math.PI/2},$V={fill:"white",stroke:"black",lineWidth:1,lineDash:[],xMargin:5,yMargin:5,cornerRadius:10,resize:!0,backgroundPickable:!0,excludeInvisibleChildrenFromBounds:!0,align:"left",minWidth:0,minHeight:0,labelTagName:"span",accessibleHelpTextBehavior:_a.HELP_TEXT_BEFORE_CONTENT};class dy extends Cu(Rt){constructor(e,t){const i=Vl()({},$V,t);super(),this._content=e,this._backgroundContainer=new Rt,this._background=new js(0,0,1,1,{lineWidth:i.lineWidth,pickable:i.backgroundPickable,lineDash:i.lineDash,cornerRadius:i.cornerRadius}),this.setStroke(i.stroke),this.setFill(i.fill),this.addChild(this._backgroundContainer),this.addChild(e),this.constraint=new dO(this,i),this.constraint.updateLayout(),this.constraint.enabled=i.resize,this.mutate(i)}getStroke(){return this._background.stroke}get stroke(){return this.getStroke()}set stroke(e){this.setStroke(e)}setStroke(e){this._background.stroke=e,this.constraint&&this.constraint.updateLayoutAutomatically()}getFill(){return this._background.fill}get fill(){return this.getFill()}set fill(e){this.setFill(e)}setFill(e){this._background.fill=e}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this.constraint.updateLayoutAutomatically()}}dy.DEFAULT_PANEL_OPTIONS=$V;class dO extends mh{constructor(e,t){super(e),this.panel=e,this.minWidth=t.minWidth,this.minHeight=t.minHeight,this.xMargin=t.xMargin,this.yMargin=t.yMargin,this.lineWidth=t.lineWidth,this.align=t.align,this.panel.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.panel.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.addNode(e._content)}layout(){super.layout();const e=this.panel,t=e._content,i=e._background,s=e.isChildIncludedInLayout(t);if(e._backgroundContainer.children=s?[i]:[],!s){e.localMinimumWidth=null,e.localMinimumHeight=null;return}const r=this.createLayoutProxy(t);if(!r)return;const o=e.stroke===null?0:this.lineWidth,d=r.minimumWidth,g=r.minimumHeight,y=Math.max(this.minWidth,d+2*this.xMargin)+o,S=Math.max(this.minHeight,g+2*this.yMargin)+o,T=Math.max(y,e.localPreferredWidth||0),L=Math.max(S,e.localPreferredHeight||0);r.preferredWidth=T-o-2*this.xMargin,r.preferredHeight=L-o-2*this.yMargin,i.setRect(0,0,T-o,L-o),this.align==="center"?r.center=i.center:this.align==="left"?(r.left=i.centerX-i.rectWidth/2+this.xMargin,r.centerY=i.centerY):(r.right=i.centerX+i.rectWidth/2-this.xMargin,r.centerY=i.centerY),e.localMinimumWidth=y,e.localMinimumHeight=S,r.dispose()}dispose(){this.panel.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.panel.localPreferredHeightProperty.unlink(this._updateLayoutListener),super.dispose()}}const F2=5,fO=new cy(sh,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),pO=new cy(nh,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),gO=n=>Jd(n,1e-9),pm=()=>1,z2=()=>{};class Ha extends hh{constructor(e,t){const i=St()({middleMovingUpSoundPlayer:o0.get("generalSoftClick"),middleMovingDownSoundPlayer:pO,middleMovingUpPlaybackRateMapper:pm,middleMovingDownPlaybackRateMapper:pm,numberOfMiddleThresholds:null,interThresholdDelta:null,constrainValue:gO,minSoundPlayer:fO,maxSoundPlayer:o0.get("generalBoundaryBoop"),minimumInterMiddleSoundTime:.035},t);i.numberOfMiddleThresholds===null&&i.interThresholdDelta===null&&(i.numberOfMiddleThresholds=F2),super(i),this.interThresholdDistance=F2,this.valueRangeProperty=e instanceof ss?new Ni(e):e,this.middleMovingUpSoundPlayer=i.middleMovingUpSoundPlayer,this.middleMovingDownSoundPlayer=i.middleMovingDownSoundPlayer,this.middleMovingUpPlaybackRateMapper=i.middleMovingUpPlaybackRateMapper,this.middleMovingDownPlaybackRateMapper=i.middleMovingDownPlaybackRateMapper,this.minSoundPlayer=i.minSoundPlayer,this.maxSoundPlayer=i.maxSoundPlayer,this.minimumInterMiddleSoundTime=i.minimumInterMiddleSoundTime,this.timeOfMostRecentMiddleSound=0,this.constrainValue=i.constrainValue;const s=r=>{i.numberOfMiddleThresholds!==null?this.interThresholdDistance=r.getLength()/(i.numberOfMiddleThresholds+1):i.interThresholdDelta!==null?this.interThresholdDistance=i.interThresholdDelta:this.interThresholdDistance=r.getLength()/2};this.valueRangeProperty.link(s),this.disposeEmitter.addListener(()=>{this.valueRangeProperty.unlink(s)})}playSoundIfThresholdReached(e,t){if(e!==t){const i=this.constrainValue(e),s=this.constrainValue(t),r=this.getSurroundingThresholds(s),o=this.getSurroundingThresholds(i),d=r.length===1&&o.length===1&&Math.abs(r[0]-o[0])>this.interThresholdDistance||r.length===1&&o.length===2&&r[0]!==o[0]&&r[0]!==o[1]||r.length===2&&o.length===1&&o[0]!==r[0]&&o[0]!==r[1]||r.length===2&&o.length===2&&o[0]!==r[0],g=o.length===1&&(r.length===2||r[0]!==o[0]);(d||g||i===this.valueRangeProperty.value.min||i===this.valueRangeProperty.value.max)&&this.playSoundForValueChange(e,t)}}playSoundForValueChange(e,t){const i=this.constrainValue(e),s=this.constrainValue(t);if(i!==s||t!==e&&(e===this.valueRangeProperty.value.min||e===this.valueRangeProperty.value.max))if(e===this.valueRangeProperty.value.min&&this.minSoundPlayer!==Ha.USE_MIDDLE_SOUND)this.minSoundPlayer.play();else if(e===this.valueRangeProperty.value.max&&this.maxSoundPlayer!==Ha.USE_MIDDLE_SOUND)this.maxSoundPlayer.play();else{const r=ut.currentTime;if(r-this.timeOfMostRecentMiddleSound>this.minimumInterMiddleSoundTime){let o,d;i>s?(o=this.middleMovingUpPlaybackRateMapper,d=this.middleMovingUpSoundPlayer):(o=this.middleMovingDownPlaybackRateMapper,d=this.middleMovingDownSoundPlayer),o!==pm&&d.setPlaybackRate(o(e)),d.play(),this.timeOfMostRecentMiddleSound=r}}}getSurroundingThresholds(e){const i=Math.floor(Jd((e-this.valueRangeProperty.value.min)/this.interThresholdDistance,1e-7)),s=Jd(i*this.interThresholdDistance+this.valueRangeProperty.value.min,1e-7),r=[s];if(s!==e){const o=Math.min(Jd(s+this.interThresholdDistance,1e-7),this.valueRangeProperty.value.max);o>s&&r.push(o)}return r}}Ha.NO_SOUND=new Ha(new ss(0,1),{middleMovingUpSoundPlayer:fm,minSoundPlayer:fm,maxSoundPlayer:fm});Ha.USE_MIDDLE_SOUND={play:z2,stop:z2};const Qf=new Ha(new ss(0,1));class mO extends cp(Rt){constructor(e,t,i,s){super(),this.rangeProperty=i instanceof ss?new Ni(i):i;const r=St()({size:new Ws(100,5),startDrag:he.noop,drag:he.noop,endDrag:he.noop,constrainValue:he.identity,enabledRangeProperty:this.rangeProperty,soundGenerator:Qf,valueChangeSoundGeneratorOptions:{},voicingOnEndResponse:he.noop,leftVisualOverflow:0,rightVisualOverflow:0,tandem:rt.REQUIRED,tandemNameSuffix:"TrackNode"},s);r.soundGenerator===Qf?r.soundGenerator=new Ha(this.rangeProperty.value,r.valueChangeSoundGeneratorOptions||{}):r.soundGenerator===null&&(r.soundGenerator=Ha.NO_SOUND),this.leftVisualOverflow=r.leftVisualOverflow,this.rightVisualOverflow=r.rightVisualOverflow,this.minimumSize=r.size,this.minimumWidth=this.minimumSize.width,this.internalWidthProperty=new ps([this.localPreferredWidthProperty],g=>(g===null?this.minimumSize.width:Math.max(this.minimumSize.width,g))-r.leftVisualOverflow-r.rightVisualOverflow),this.sizeProperty=new ps([this.internalWidthProperty],g=>new Ws(g,this.minimumSize.height)),this.valueToPositionProperty=new ps([this.rangeProperty,this.internalWidthProperty],(g,y)=>new Xx(g.min,g.max,0,y,!0));const o=(g,y)=>{const S=e.value,L=y.subtrailTo(this).getTransform().inversePosition2(g.pointer.point).x,x=this.valueToPositionProperty.value.inverse(L),A=r.enabledRangeProperty.value.constrainValue(x),Q=r.constrainValue(A);e.set(Q),g.type==="down"&&r.soundGenerator.playSoundIfThresholdReached(Q,S)};this.addChild(t);let d=e.value;this.dragListener=new SV({tandem:r.tandem.createTandem("dragListener"),start:(g,y)=>{r.startDrag(g),d=e.value,o(g,y.pressedTrail)},drag:(g,y)=>{r.drag(g),o(g,y.pressedTrail)},end:g=>{r.endDrag(g),r.voicingOnEndResponse(d)}}),t.addInputListener(this.dragListener),this.mutate(r),this.disposeSliderTrack=()=>{t.removeInputListener(this.dragListener),this.dragListener.dispose()}}dispose(){this.disposeSliderTrack(),super.dispose()}}class yO extends mO{constructor(e,t,i){const s=St()({fillEnabled:"white",fillDisabled:"gray",stroke:"black",lineWidth:1,cornerRadius:0},i),r=new js({fill:s.fillDisabled,stroke:s.stroke,lineWidth:s.lineWidth,cornerRadius:s.cornerRadius,cursor:"default",pickable:!1}),o=new js({fill:s.fillEnabled,stroke:s.stroke,lineWidth:s.lineWidth,cornerRadius:s.cornerRadius}),d=new Rt({children:[r,o]});super(e,d,t,Qi({leftVisualOverflow:s.stroke!==null?s.lineWidth/2:0,rightVisualOverflow:s.stroke!==null?s.lineWidth/2:0},s));const g=sr.multilink([s.enabledRangeProperty,this.valueToPositionProperty,this.sizeProperty],(y,S,T)=>{const L=S.evaluate(y.min),x=S.evaluate(y.max);r.setRect(0,0,T.width,T.height),o.setRect(L,0,x-L,T.height)});this.disposeDefaultSliderTrack=()=>{g.dispose()}}dispose(){this.disposeDefaultSliderTrack(),super.dispose()}}const Zo=new g0("sun"),Us={HOME_HOTKEY_DATA:new tr({keyStringProperties:[new Li("home")],binderName:"Set value to minimum",repoName:Zo.name}),END_HOTKEY_DATA:new tr({keyStringProperties:[new Li("end")],binderName:"Set value to maximum",repoName:Zo.name}),PAGE_UP_HOTKEY_DATA:new tr({keyStringProperties:[new Li("pageUp")],binderName:"Increment value by page",repoName:Zo.name}),PAGE_DOWN_HOTKEY_DATA:new tr({keyStringProperties:[new Li("pageDown")],binderName:"Decrement value by page",repoName:Zo.name}),UP_ARROW_HOTKEY_DATA:new tr({keyStringProperties:[new Li("arrowUp")],binderName:"Increment value by up arrow",repoName:Zo.name}),DOWN_ARROW_HOTKEY_DATA:new tr({keyStringProperties:[new Li("arrowDown")],binderName:"Decrement value by down arrow",repoName:Zo.name}),RIGHT_ARROW_HOTKEY_DATA:new tr({keyStringProperties:[new Li("arrowRight")],binderName:"Increment value by right arrow",repoName:Zo.name}),LEFT_ARROW_HOTKEY_DATA:new tr({keyStringProperties:[new Li("arrowLeft")],binderName:"Decrement value by left arrow",repoName:Zo.name}),SHIFT_HOTKEY_DATA:new tr({keyStringProperties:[new Li("shift")],binderName:"Increment/decrement in smaller steps",repoName:Zo.name}),isRangeKey(n){return tr.anyHaveKeyStroke([Us.HOME_HOTKEY_DATA,Us.END_HOTKEY_DATA,Us.PAGE_UP_HOTKEY_DATA,Us.PAGE_DOWN_HOTKEY_DATA,Us.UP_ARROW_HOTKEY_DATA,Us.DOWN_ARROW_HOTKEY_DATA,Us.RIGHT_ARROW_HOTKEY_DATA,Us.LEFT_ARROW_HOTKEY_DATA],n)}},ew="input",_O=n=>`${n}`,AO={withNameResponse:!1,withObjectResponse:!0,onlyOnValueChange:!0},H2=["startInput","endInput","onInput","constrainValue","keyboardStep","shiftKeyboardStep","pageKeyboardStep","ariaOrientation","panTargetNode","roundToStepSize","pdomMapPDOMValue","pdomMapValue","pdomRepeatEqualValueText","pdomCreateAriaValueText","pdomCreateContextResponseAlert","contextResponsePerValueChangeDelay","contextResponseMaxDelay","pdomDependencies","voicingOnEndResponseOptions"],tw=(n,e)=>{const t=ph("AccessibleValueHandler",H2,class extends Hr(n){constructor(...s){const r=s[e];s[e]=St()({tagName:ew,inputType:"range"},r),super(...s),this._startInput=he.noop,this._onInput=he.noop,this._endInput=he.noop,this._constrainValue=he.identity,this._pdomMapValue=he.identity,this._panTargetNode=null,this._ariaOrientation=jt.HORIZONTAL,this._shiftKey=!1,this._pdomDependencies=[],this._oldValue=null,this._pdomCreateContextResponseAlert=null,this._contextResponseUtterance=new Sn,this._timesValueTextChangedBeforeAlerting=0,this._contextResponsePerValueChangeDelay=700,this._contextResponseMaxDelay=1500,this._pdomInputHandled=!1,this._blockInput=!1,this._roundToStepSize=!1,this._rangeKeysDown={},this._pdomMapPDOMValue=he.identity,this._pdomCreateAriaValueText=_O,this._dependenciesMultilink=null,this._pdomRepeatEqualValueText=!0,this._timesChangedBeforeAlerting=0,this._voicingOnEndResponseOptions=AO,this._pdomPointer=null,E0(this,["inputValue","setPDOMAttribute"]);const o=r.valueProperty,d=r.enabledRangeProperty;r.reverseAlternativeInput?this._valueProperty=new _v(new Li(o),{bidirectional:!0,map:S=>d.value.max-S,inverseMap:S=>d.value.max-S}):this._valueProperty=o,this._enabledRangeProperty=d,this._pdomValueTextUpdateListener=this.invalidateAriaValueText.bind(this),this.keyboardStep=(d.get().max-d.get().min)/20,this.shiftKeyboardStep=(d.get().max-d.get().min)/100,this.pageKeyboardStep=(d.get().max-d.get().min)/10,this._valueOnStart=o.value,this.invalidatePDOMDependencies();const g=this.invalidateEnabledRange.bind(this);this._enabledRangeProperty.link(g);const y=this.invalidateValueProperty.bind(this);this._valueProperty.link(y),this._pdomPointerListener={interrupt:()=>{this._onInteractionEnd(null)}},this._disposeAccessibleValueHandler=()=>{this._enabledRangeProperty.unlink(g),this._valueProperty.unlink(y),r.reverseAlternativeInput&&this._valueProperty.dispose(),this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._panTargetNode=null,this._pdomDependencies=[]}}set startInput(s){this._startInput=s}get startInput(){return this._startInput}set onInput(s){this._onInput=s}get onInput(){return this._onInput}set endInput(s){this._endInput=s}get endInput(){return this._endInput}set constrainValue(s){this._constrainValue=s}get constrainValue(){return this._constrainValue}set panTargetNode(s){this._panTargetNode=s}get panTargetNode(){return this._panTargetNode}set roundToStepSize(s){this._roundToStepSize=s}get roundToStepSize(){return this._roundToStepSize}set pdomMapPDOMValue(s){this._pdomMapPDOMValue=s,this.invalidateEnabledRange(this._enabledRangeProperty.value),this.invalidateValueProperty(),this.invalidateAriaValueText()}get pdomMapPDOMValue(){return this._pdomMapPDOMValue}set pdomMapValue(s){this._pdomMapValue=s}get pdomMapValue(){return this._pdomMapValue}set pdomRepeatEqualValueText(s){this._pdomRepeatEqualValueText=s,this.invalidateAriaValueText()}get pdomRepeatEqualValueText(){return this._pdomRepeatEqualValueText}set pdomCreateAriaValueText(s){this._pdomCreateAriaValueText=s,this.invalidateAriaValueText()}get pdomCreateAriaValueText(){return this._pdomCreateAriaValueText}set pdomCreateContextResponseAlert(s){this._pdomCreateContextResponseAlert=s}get pdomCreateContextResponseAlert(){return this._pdomCreateContextResponseAlert}set contextResponsePerValueChangeDelay(s){this._contextResponsePerValueChangeDelay=s}get contextResponsePerValueChangeDelay(){return this._contextResponsePerValueChangeDelay}set contextResponseMaxDelay(s){this._contextResponseMaxDelay=s}get contextResponseMaxDelay(){return this._contextResponseMaxDelay}set voicingOnEndResponseOptions(s){this._voicingOnEndResponseOptions=s}get voicingOnEndResponseOptions(){return this._voicingOnEndResponseOptions}invalidateAriaValueText(){this._updateAriaValueText(this._oldValue),this._oldValue=this._valueProperty.value}invalidateEnabledRange(s){const r=this._getMappedValue(s.min),o=this._getMappedValue(s.max);this.setPDOMAttribute("min",r),this.setPDOMAttribute("max",o),this._updateSiblingStepAttribute()}invalidateValueProperty(){const s=this._getMappedValue();this.setPDOMAttribute("aria-valuenow",s),this.inputValue=s}invalidatePDOMDependencies(){this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._dependenciesMultilink=sr.multilinkAny(this._pdomDependencies.concat([this._valueProperty]),this._pdomValueTextUpdateListener)}setPDOMDependencies(s){this._pdomDependencies=s,this.invalidatePDOMDependencies()}getPDOMDependencies(){return this._pdomDependencies}set pdomDependencies(s){this.setPDOMDependencies(s)}get pdomDependencies(){return this.getPDOMDependencies()}_updateAriaValueText(s){const r=this._getMappedValue(),o=this._pdomCreateAriaValueText(r,this._valueProperty.value,s);let d=Vi.unwrapStringProperty(o);const g=" ";this._pdomRepeatEqualValueText&&this.ariaValueText&&d===this.ariaValueText.replace(new RegExp(g,"g"),"")&&(d=this.ariaValueText+g),this.ariaValueText=d}alertContextResponse(){let s=!1;if(this._pdomCreateContextResponseAlert){const r=this._getMappedValue(),o=this._pdomCreateContextResponseAlert(r,this._valueProperty.value,this._valueOnStart);o&&(this._contextResponseUtterance.alert=o,this.forEachUtteranceQueue(d=>{s||(d.hasUtterance(this._contextResponseUtterance)?(s=!0,this._timesChangedBeforeAlerting++):this._timesChangedBeforeAlerting=1),this._contextResponseUtterance.alertStableDelay=Math.min(this._contextResponseMaxDelay,this._timesChangedBeforeAlerting*this._contextResponsePerValueChangeDelay),d.addToBack(this._contextResponseUtterance)}))}}reset(){this._pdomCreateAriaValueText.reset&&this._pdomCreateAriaValueText.reset(),this._pdomCreateContextResponseAlert&&this._pdomCreateContextResponseAlert.reset&&this._pdomCreateContextResponseAlert.reset(),this._timesChangedBeforeAlerting=0,this._updateAriaValueText(null)}_getMappedValue(s=this._valueProperty.value){return this._pdomMapPDOMValue(s)}getAccessibleValueHandlerInputListener(){return{keydown:this.handleKeyDown.bind(this),keyup:this.handleKeyUp.bind(this),input:this.handleInput.bind(this),change:this.handleChange.bind(this),blur:this.handleBlur.bind(this)}}handleKeyDown(s){const r=s.domEvent,o=je.getEventCode(r);if(o&&(this._shiftKey=r.shiftKey,je.isKeyEvent(r,je.KEY_TAB)&&(this._blockInput=!0),this.enabledProperty.get())){const d=lf(o);if(Us.isRangeKey(d)&&(r.preventDefault(),!r.metaKey)){s.pointer.reserveForKeyboardDrag();let g=!0;this._anyKeysDown()||this._onInteractionStart(s),this._rangeKeysDown[o]=!0;let y=this._valueProperty.get();if(tr.anyHaveKeyStroke([Us.HOME_HOTKEY_DATA,Us.END_HOTKEY_DATA],d))Us.END_HOTKEY_DATA.hasKeyStroke(d)?y=this._enabledRangeProperty.get().max:Us.HOME_HOTKEY_DATA.hasKeyStroke(d)&&(y=this._enabledRangeProperty.get().min);else{let x;tr.anyHaveKeyStroke([Us.PAGE_DOWN_HOTKEY_DATA,Us.PAGE_UP_HOTKEY_DATA],d)?(x=this.pageKeyboardStep,Us.PAGE_UP_HOTKEY_DATA.hasKeyStroke(d)?y=this._valueProperty.get()+x:Us.PAGE_DOWN_HOTKEY_DATA.hasKeyStroke(d)&&(y=this._valueProperty.get()-x)):tr.anyHaveKeyStroke([Us.LEFT_ARROW_HOTKEY_DATA,Us.RIGHT_ARROW_HOTKEY_DATA,Us.UP_ARROW_HOTKEY_DATA,Us.DOWN_ARROW_HOTKEY_DATA],d)&&(x=r.shiftKey?this.shiftKeyboardStep:this.keyboardStep,g=!r.shiftKey,tr.anyHaveKeyStroke([Us.UP_ARROW_HOTKEY_DATA,Us.RIGHT_ARROW_HOTKEY_DATA],d)?y=this._valueProperty.get()+x:tr.anyHaveKeyStroke([Us.DOWN_ARROW_HOTKEY_DATA,Us.LEFT_ARROW_HOTKEY_DATA],d)&&(y=this._valueProperty.get()-x),this._roundToStepSize&&(y=K2(y,this._valueProperty.get(),x)))}const S=this._pdomMapValue(y,this._valueProperty.get());let T=S;g&&(T=this._constrainValue(S)),this._valueProperty.set(qs(T,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max)),this._onInput(s,this._valueOnStart);const L=this._panTargetNode||this;ff.initialized&&ff.listener.panToNode(L,!0,L.limitPanDirection)}}}handleKeyUp(s){const r=je.getEventCode(s.domEvent),o=lf(r);this._allKeysUp()||(Us.SHIFT_HOTKEY_DATA.hasKeyStroke(o)&&(this._shiftKey=!1),this.enabledProperty.get()&&Us.isRangeKey(o)&&(this._rangeKeysDown[r]=!1,this._allKeysUp()&&this._onInteractionEnd(s)))}handleChange(s){this._pdomInputHandled||this.handleInput(s),this._pdomInputHandled=!1}handleInput(s){if(this.enabledProperty.get()&&!this._blockInput){this._pdomInputHandled=!0;let r=this._valueProperty.get();const o=parseFloat(s.domEvent.target.value),d=this._shiftKey?this.shiftKeyboardStep:this.keyboardStep,g=this._getMappedValue();this._onInteractionStart(s),o>g?r=this._valueProperty.get()+d:o<g&&(r=this._valueProperty.get()-d),this._roundToStepSize&&(r=K2(r,this._valueProperty.get(),d)),r=qs(r,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max),this._valueProperty.set(this._constrainValue(this._pdomMapValue(r,this._valueProperty.get()))),this._onInput(s,this._valueOnStart),this._onInteractionEnd(s)}this._blockInput=!1}handleBlur(s){this._anyKeysDown()&&this._onInteractionEnd(s),this._shiftKey=!1,this._blockInput=!1,this._rangeKeysDown={}}_onInteractionStart(s){this._pdomPointer=s.pointer,this._pdomPointer.addInputListener(this._pdomPointerListener,!0),this._valueOnStart=this._valueProperty.value,this._startInput(s)}_onInteractionEnd(s){this._pdomPointer&&(this.alertContextResponse(),this.voicingOnEndResponse(this._valueOnStart),this._endInput(s),this._pdomPointer.removeInputListener(this._pdomPointerListener),this._pdomPointer=null)}setKeyboardStep(s){this._keyboardStep=s}set keyboardStep(s){this.setKeyboardStep(s)}get keyboardStep(){return this.getKeyboardStep()}getKeyboardStep(){return this._keyboardStep}setShiftKeyboardStep(s){this._shiftKeyboardStep=s}set shiftKeyboardStep(s){this.setShiftKeyboardStep(s)}get shiftKeyboardStep(){return this.getShiftKeyboardStep()}getShiftKeyboardStep(){return this._shiftKeyboardStep}getShiftKeyDown(){return this._shiftKey}get shiftKeyDown(){return this.getShiftKeyDown()}setPageKeyboardStep(s){this._pageKeyboardStep=s}set pageKeyboardStep(s){this.setPageKeyboardStep(s)}get pageKeyboardStep(){return this.getPageKeyboardStep()}getPageKeyboardStep(){return this._pageKeyboardStep}setAriaOrientation(s){this._ariaOrientation=s,this.setPDOMAttribute("aria-orientation",s.ariaOrientation)}set ariaOrientation(s){this.setAriaOrientation(s)}get ariaOrientation(){return this._ariaOrientation}getAriaOrientation(){return this._ariaOrientation}_allKeysUp(){return he.every(this._rangeKeysDown,s=>!s)}_anyKeysDown(){return!!he.find(this._rangeKeysDown,s=>s)}_updateSiblingStepAttribute(){let s="any";if(An.mobileSafari){const r=Math.min(this.keyboardStep,this.shiftKeyboardStep,this.pageKeyboardStep);s=Math.pow(10,-Ev(r));const o=this._getMappedValue(this._enabledRangeProperty.get().min),d=this._getMappedValue(this._enabledRangeProperty.get().max),g=d-o;s/g<1e-5&&(s=d/100,s=Number(s.toPrecision(8)))}this.setPDOMAttribute("step",s)}voicingOnEndResponse(s,r){const o=Qi({},this._voicingOnEndResponseOptions,r),d=s!==this._valueProperty.value,g=this._valueProperty.value===this._enabledRangeProperty.value.min||this._valueProperty.value===this._enabledRangeProperty.value.max,y=!!(o.withNameResponse&&this.voicingNameResponse)||!!(o.withObjectResponse&&this.voicingObjectResponse);(!o.onlyOnValueChange||g||d)&&y&&this.voicingSpeakFullResponse({nameResponse:o.withNameResponse?this.voicingNameResponse:null,objectResponse:o.withObjectResponse?this.voicingObjectResponse:null,hintResponse:null})}dispose(){this._disposeAccessibleValueHandler(),super.dispose()}});return t.prototype._mutatorKeys=H2.concat(t.prototype._mutatorKeys),t},K2=function(n,e,t){let i=n;return t!==0&&(i=Xn(i/t)*t,i=bO(i,e,t)),i},bO=function(n,e,t){let i=n;const s=Math.abs(n-e),r=s>t,o=Cv(s,t,1e-14);return r&&!o&&(i+=n>e?-t:t),i};tw.DEFAULT_TAG_NAME=ew;const U2=["startDrag","drag","endDrag"],vO=(n,e)=>{const t=ph("AccessibleSlider",U2,class extends tw(n,e){constructor(...s){s[e],super(...s),this._startDrag=he.noop,this._drag=he.noop,this._endDrag=he.noop,E0(this,["addInputListener","removeInputListener"]);const r=this.getAccessibleValueHandlerInputListener();this.addInputListener(r),this._disposeAccessibleSlider=()=>{this.removeInputListener(r)}}set startDrag(s){this._startDrag=s,this.startInput=s}get startDrag(){return this._startDrag}set drag(s){this._drag=s,this.onInput=s}get drag(){return this._drag}set endDrag(s){this._endDrag=s,this.endInput=s}get endDrag(){return this._endDrag}dispose(){this._disposeAccessibleSlider(),super.dispose()}});return t.prototype._mutatorKeys=U2.concat(t.prototype._mutatorKeys),t},VO="rgb( 50, 145, 184 )",wO="rgb( 71, 207, 255 )";class SO extends js{constructor(e){const t=St()({size:new Ws(22,45),fillHighlighted:wO,centerLineStroke:"white",fill:VO,stroke:"black",lineWidth:1,tandem:rt.REQUIRED,tandemNameSuffix:"ThumbNode"},e);t.cornerRadius===void 0&&(t.cornerRadius=.25*t.size.width),t.cachedPaints=[t.fill,t.fillHighlighted],super(0,0,t.size.width,t.size.height,t);const i=js.bounds(this.bounds.dilated(5),{fill:"transparent",localBounds:this.bounds,pickable:!1});this.addChild(i);const s=3;this.addChild(new Cn(Wt.lineSegment(t.size.width/2,s,t.size.width/2,t.size.height-s),{stroke:t.centerLineStroke}));const r=new ih({attach:!1,tandem:rt.OPT_OUT});r.isHighlightedProperty.link(o=>{this.fill=o?t.fillHighlighted:t.fill}),this.addInputListener(r)}}class CO{constructor(e,t,i,s,r,o,d,g,y){this.parent=e,this.value=t,this.label=i,this.labelXProperty=new ps([y.valueToPositionProperty],L=>L.evaluate(t)),this.tickNode=new Rt,e.addChild(this.tickNode);const S=d.setTickInitialPoint(y.bounds,s),T=new Cn(new Wt().moveTo(S.x,S.y).lineTo(0,S.y-s),{stroke:r,lineWidth:o});this.labelXProperty.link(L=>{T.x=L}),this.tickNode.addChild(T),i&&(this.labelContainer=new Rt({pickable:!1}),this.tickNode.addChild(this.labelContainer),this.labelContainer.addChild(i),g===jt.VERTICAL&&(this.labelContainer.rotation=-JV.SLIDER_VERTICAL_ROTATION),this.labelManualConstraint=uy.create(this.tickNode,[T,this.labelContainer],(L,x)=>{d.positionLabel(x,L.bounds)}))}dispose(){this.parent.removeChild(this.tickNode),this.labelContainer&&this.labelContainer.dispose(),this.labelXProperty.dispose(),this.labelManualConstraint&&this.labelManualConstraint.dispose()}}const PO=new Ws(100,5),EO=new Ws(17,34);class tl extends Cu(vO(Rt,0)){constructor(e,t,i){const s=St()({orientation:jt.HORIZONTAL,trackNode:null,trackSize:null,trackFillEnabled:"white",trackFillDisabled:"gray",trackStroke:"black",trackLineWidth:1,trackCornerRadius:0,trackPickable:!0,thumbNode:null,thumbSize:null,thumbFill:"rgb(50,145,184)",thumbFillHighlighted:"rgb(71,207,255)",thumbStroke:"black",thumbLineWidth:1,thumbCenterLineStroke:"white",thumbTouchAreaXDilation:11,thumbTouchAreaYDilation:11,thumbMouseAreaXDilation:0,thumbMouseAreaYDilation:0,thumbYOffset:0,tickLabelSpacing:6,positionLabel:(N,Ie)=>{N.centerX=Ie.centerX,N.bottom=Ie.top-s.tickLabelSpacing},majorTickLength:25,majorTickStroke:"black",majorTickLineWidth:1,minorTickLength:10,minorTickStroke:"black",minorTickLineWidth:1,setTickInitialPoint:(N,Ie)=>new Ne(0,N.top),cursor:"pointer",startDrag:he.noop,drag:he.noop,endDrag:he.noop,constrainValue:he.identity,disabledOpacity:qc.DISABLED_OPACITY,soundGenerator:Qf,valueChangeSoundGeneratorOptions:{},phetioLinkedProperty:null,tandem:rt.REQUIRED,tandemNameSuffix:"Slider",phetioType:tl.SliderIO,phetioFeatured:!0,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},i),r=t instanceof ss?new Ni(t):t;if(s.soundGenerator===Qf?s.soundGenerator=new Ha(r.value,s.valueChangeSoundGeneratorOptions||{}):s.soundGenerator===null&&(s.soundGenerator=Ha.NO_SOUND),s.soundGenerator!==Ha.NO_SOUND){let N=e.value;const Ie=s.drag;s.drag=$e=>{$e.isFromPDOM()?s.soundGenerator.playSoundForValueChange(e.value,N):s.soundGenerator.playSoundIfThresholdReached(e.value,N),Ie($e),N=e.value}}s.orientation===jt.VERTICAL&&(s.trackSize&&(s.trackSize=s.trackSize.swapped()),s.thumbSize&&(s.thumbSize=s.thumbSize.swapped()),TA(s,"thumbTouchAreaXDilation","thumbTouchAreaYDilation"),TA(s,"thumbMouseAreaXDilation","thumbMouseAreaYDilation")),s.trackSize=s.trackSize||PO,s.thumbSize=s.thumbSize||EO;const o=s.tandem.createTandem(tl.THUMB_NODE_TANDEM_NAME);rt.VALIDATION&&s.thumbNode;const d=s.thumbNode||new SO({size:s.thumbSize,fill:s.thumbFill,fillHighlighted:s.thumbFillHighlighted,stroke:s.thumbStroke,lineWidth:s.thumbLineWidth,centerLineStroke:s.thumbCenterLineStroke,tandem:o}),g=!s.enabledRangeProperty,y=he.pick(s,Rt.REQUIRES_BOUNDS_OPTION_KEYS),S=Qi({ariaOrientation:s.orientation,valueProperty:e,panTargetNode:d,enabledRangeProperty:s.enabledRangeProperty||(t instanceof ss?new Li(t,{valueType:ss,isValidValue:N=>N.min>=t.min&&N.max<=t.max,tandem:s.tandem.createTandem("enabledRangeProperty"),valueComparisonStrategy:"equalsFunction",phetioValueType:ss.RangeIO,phetioDocumentation:"Sliders support two ranges: the outer range which specifies the min and max of the track and the enabledRangeProperty, which determines how low and high the thumb can be dragged within the track."}):t)},s);super(S),this.ticks=ep(),this.proposedValue=null,this.orientation=S.orientation,this.enabledRangeProperty=S.enabledRangeProperty,this.tickOptions=he.pick(s,"tickLabelSpacing","majorTickLength","majorTickStroke","majorTickLineWidth","minorTickLength","minorTickStroke","minorTickLineWidth","setTickInitialPoint","positionLabel");const T=[];this.majorTicksParent=new Rt,this.minorTicksParent=new Rt,T.push(this.majorTicksParent),T.push(this.minorTicksParent);const L=s.tandem.createTandem(tl.TRACK_NODE_TANDEM_NAME);rt.VALIDATION&&s.trackNode;const x=new Rt;T.push(x),this.track=s.trackNode||new yO(e,t,{size:S.trackSize,fillEnabled:S.trackFillEnabled,fillDisabled:S.trackFillDisabled,stroke:S.trackStroke,lineWidth:S.trackLineWidth,cornerRadius:S.trackCornerRadius,startDrag:S.startDrag,drag:S.drag,endDrag:S.endDrag,constrainValue:S.constrainValue,enabledRangeProperty:this.enabledRangeProperty,soundGenerator:s.soundGenerator,pickable:S.trackPickable,voicingOnEndResponse:this.voicingOnEndResponse.bind(this),tandem:L}),T.push(this.track),d.setCenterY(this.track.centerY+s.thumbYOffset),T.push(d);const A=new Rt({children:T});s.orientation===jt.VERTICAL&&(A.rotation=JV.SLIDER_VERTICAL_ROTATION),this.addChild(A),!s.thumbNode&&(s.thumbTouchAreaXDilation||s.thumbTouchAreaYDilation)&&(d.touchArea=d.localBounds.dilatedXY(s.thumbTouchAreaXDilation,s.thumbTouchAreaYDilation)),!s.thumbNode&&(s.thumbMouseAreaXDilation||s.thumbMouseAreaYDilation)&&(d.mouseArea=d.localBounds.dilatedXY(s.thumbMouseAreaXDilation,s.thumbMouseAreaYDilation));let Q=0,z=e.value;const G=new SV({tandem:d.tandem.createTandem("dragListener"),start:(N,Ie)=>{this.enabledProperty.get()&&(z=e.value,s.startDrag(N),Q=Ie.pressedTrail.subtrailTo(A).getTransform().inversePosition2(N.pointer.point).x-d.centerX)},drag:(N,Ie)=>{if(this.enabledProperty.get()){const Ee=Ie.pressedTrail.subtrailTo(A).getTransform().inversePosition2(N.pointer.point).x-Q;this.proposedValue=this.track.valueToPositionProperty.value.inverse(Ee);const Je=this.enabledRangeProperty.get().constrainValue(this.proposedValue);e.set(s.constrainValue(Je)),s.drag(N)}},end:N=>{this.enabledProperty.get()&&(s.endDrag(N),this.voicingOnEndResponse(z)),this.proposedValue=null}});d.addInputListener(G),this.thumbDragListener=G,this.trackDragListener=this.track.dragListener;const re=sr.multilink([e,this.track.valueToPositionProperty],(N,Ie)=>{d.centerX=Ie.evaluate(N)}),ne=N=>{if(!e.isPhetioInstrumented()||!Fc.value)if(this.proposedValue===null)e.set(qs(e.value,N.min,N.max));else{const Ie=qs(this.proposedValue,N.min,N.max),$e=s.constrainValue(Ie);e.set($e)}};this.enabledRangeProperty.link(ne);const ae=new DO(this,this.track,d,A,s.orientation,x,this.ticks);this.disposeSlider=()=>{ae.dispose(),d.dispose&&d.dispose(),this.track.dispose&&this.track.dispose(),g?this.enabledRangeProperty.dispose():this.enabledRangeProperty.unlink(ne),re.dispose(),G.dispose()},this.focusHighlight=new pf(d);const pe=s.phetioLinkedProperty||(e instanceof rn?e:null);pe&&this.addLinkedElement(pe,{tandemName:"valueProperty"}),!g&&this.enabledRangeProperty instanceof rn&&this.addLinkedElement(this.enabledRangeProperty,{tandemName:"enabledRangeProperty"}),this.mutate(y)}get majorTicksVisible(){return this.getMajorTicksVisible()}set majorTicksVisible(e){this.setMajorTicksVisible(e)}get minorTicksVisible(){return this.getMinorTicksVisible()}set minorTicksVisible(e){this.setMinorTicksVisible(e)}dispose(){this.disposeSlider(),this.ticks.forEach(e=>{e.dispose()}),super.dispose()}addMajorTick(e,t){this.addTick(this.majorTicksParent,e,t,this.tickOptions.majorTickLength,this.tickOptions.majorTickStroke,this.tickOptions.majorTickLineWidth)}addMinorTick(e,t){this.addTick(this.minorTicksParent,e,t,this.tickOptions.minorTickLength,this.tickOptions.minorTickStroke,this.tickOptions.minorTickLineWidth)}addTick(e,t,i,s,r,o){this.ticks.push(new CO(e,t,i,s,r,o,this.tickOptions,this.orientation,this.track))}setMajorTicksVisible(e){this.majorTicksParent.visible=e}getMajorTicksVisible(){return this.majorTicksParent.visible}setMinorTicksVisible(e){this.minorTicksParent.visible=e}getMinorTicksVisible(){return this.minorTicksParent.visible}}tl.THUMB_NODE_TANDEM_NAME="thumbNode";tl.TRACK_NODE_TANDEM_NAME="trackNode";tl.SliderIO=new pi("SliderIO",{valueType:tl,documentation:"A traditional slider component, with a knob and possibly tick marks",supertype:Rt.NodeIO});class DO extends mh{constructor(e,t,i,s,r,o,d){super(e),this.slider=e,this.track=t,this.thumb=i,this.sliderPartsNode=s,this.orientation=r,this.trackSpacer=o,this.ticks=d,r===jt.HORIZONTAL?(e.heightSizable=!1,this.preferredProperty=this.slider.localPreferredWidthProperty):(e.widthSizable=!1,this.preferredProperty=this.slider.localPreferredHeightProperty),this.preferredProperty.lazyLink(this._updateLayoutListener),this.track.rangeProperty.lazyLink(this._updateLayoutListener),this.thumb.localBoundsProperty.lazyLink(this._updateLayoutListener);const g=y=>{y.tickNode.localBoundsProperty.lazyLink(this._updateLayoutListener),d.addItemRemovedListener(S=>{S===y&&S.tickNode.localBoundsProperty.hasListener(this._updateLayoutListener)&&y.tickNode.localBoundsProperty.unlink(this._updateLayoutListener)})};d.addItemAddedListener(g),this.addNode(t),this.layout(),this.disposeSliderConstraint=()=>{d.removeItemAddedListener(g),this.preferredProperty.unlink(this._updateLayoutListener),this.track.rangeProperty.unlink(this._updateLayoutListener),this.thumb.localBoundsProperty.unlink(this._updateLayoutListener)}}layout(){super.layout();const e=this.slider,t=this.track,i=this.thumb;this.trackSpacer.localBounds=t.localBounds.dilatedX(i.width/2);const s=t.leftVisualOverflow+t.rightVisualOverflow,r=t.minimumWidth,o=r-s,d=L=>Dr(t.rangeProperty.value.min,t.rangeProperty.value.max,0,1,L),g=-i.width/2-t.leftVisualOverflow,y=i.width/2-t.leftVisualOverflow,S=new ss(g,r+y);if(this.ticks.forEach(L=>{const x=o*d(L.value),A=L.tickNode.width/2;S.includeRange(new ss(-A,A).shifted(x))}),e.widthSizable&&this.preferredProperty.value!==null){const L=ta.max(ta.linear(1,y),...this.ticks.map(A=>{const Q=d(A.value);return ta.linear(Q,A.tickNode.width/2-s*Q)})).minus(ta.min(ta.constant(g),...this.ticks.map(A=>{const Q=d(A.value);return ta.linear(Q,-A.tickNode.width/2-s*Q)}))),x=L.withXValues([r-1,r,...L.points.map(A=>A.x).filter(A=>A>r+1e-10)]).inverted();t.preferredWidth=Math.max(r,x.evaluate(this.preferredProperty.value))}else t.preferredWidth=t.minimumWidth;const T=S.getLength();this.orientation===jt.HORIZONTAL?e.localMinimumWidth=T:e.localMinimumHeight=T}dispose(){this.disposeSliderConstraint(),super.dispose()}}class TO extends tl{constructor(e,t,i){super(e,t,St()({orientation:jt.HORIZONTAL},i))}}class iw extends oO{constructor(e,t,i){super(e,t,St()({orientation:"vertical",align:"left"},i))}}class sw extends uO{constructor(e,t){const i=St()({font:Xs.DEFAULT,textFill:"black",maxTextWidth:null,tandem:rt.REQUIRED,innerContent:e},t),s=new yn(e,Qi({font:i.font,fill:i.textFill,maxWidth:i.maxTextWidth},i.textNodeOptions));i.content=s,super(i),this.disposeTextPushButton=()=>{s.dispose()}}dispose(){this.disposeTextPushButton(),super.dispose()}}const xO="data:image/svg+xml,%3csvg%20viewBox='0%200%20200%20250'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Trunk%20--%3e%3crect%20x='85'%20y='130'%20width='30'%20height='80'%20fill='%237B4F2F'%20/%3e%3c!--%20Leaves%20(Bottom)%20--%3e%3ccircle%20cx='100'%20cy='120'%20r='45'%20fill='%233F8F3D'/%3e%3c!--%20Leaves%20(Middle)%20--%3e%3ccircle%20cx='80'%20cy='90'%20r='40'%20fill='%234F9F42'/%3e%3ccircle%20cx='120'%20cy='90'%20r='40'%20fill='%234F9F42'/%3e%3c!--%20Leaves%20(Top)%20--%3e%3ccircle%20cx='100'%20cy='60'%20r='35'%20fill='%2388C57A'/%3e%3c/svg%3e",IO="data:image/svg+xml,%3csvg%20viewBox='0%200%20200%20250'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Trunk%20--%3e%3crect%20x='90'%20y='180'%20width='20'%20height='50'%20fill='%237B4F2F'/%3e%3c!--%20Layered%20Pine%20Foliage%20--%3e%3cpolygon%20points='50,180%20100,110%20150,180'%20fill='%233F8F3D'/%3e%3cpolygon%20points='60,150%20100,80%20140,150'%20fill='%234F9F42'/%3e%3cpolygon%20points='70,120%20100,50%20130,120'%20fill='%2388C57A'/%3e%3c/svg%3e",kO=Ii(xO),LO=Ii(IO),Kh=class Kh extends Rt{constructor(e,t,i){super({children:[new ia(kO,{y:-125})]}),this.initialize(e,t,i)}initialize(e,t,i){return this.setScaleMagnitude(200/i),this.centerX=e,this.y=t,this}freeToPool(){Kh.pool.freeToPool(this)}};Kh.pool=new Fs(Kh,{initialize:Kh.prototype.initialize});let l0=Kh;const Uh=class Uh extends Rt{constructor(e,t,i){super({children:[new ia(LO,{y:-138})]}),this.initialize(e,t,i)}initialize(e,t,i){return this.setScaleMagnitude(300/i),this.centerX=e,this.y=t,this}freeToPool(){Uh.pool.freeToPool(this)}};Uh.pool=new Fs(Uh,{initialize:Uh.prototype.initialize});let h0=Uh;class nw extends Rt{constructor(e,t){const i=new js({}),s=new js({}),r=new Cn(null,{fill:"#FFC72C"}),o=new Rt;super({children:[s,i,r,o]}),this.positionProperty=e,this.layoutBoundsProperty=t;const d=(y,S)=>{let T=y*73856093^S*19349663;return T^=T>>13,T*=2246822507,T^=T>>16,(T>>>0)%100/100},g=(y,S,T)=>{const L=y,x=-50,A=30,Q=30,z=.2,G=4,re=700,ne=[];for(let ae=G-x;ae<re-x;ae+=Q){const pe=x+ae,N=Dr(x,0,0,S,pe),Ie=2,$e=Math.floor(-2+(L-N/2)/A)*A,Ee=Math.ceil(Ie+(L+N/2)/A)*A;for(let Je=$e;Je<=Ee;Je+=A){let Ge=d(Je,pe);if(Ge<z){Ge=Ge/z;const _t=Je+.8*(Ge-.5)*A,it=pe+.8*(Ge*100%1)*Q,nt=(_t-L)/N*T+T/2,Qe=1-1/(1+.01*(it-G));ne.push({x:nt,y:Qe,depth:ae,type:Ge*1e3%1>.5?1:0})}}}return ne};new sr([e,t],(y,S)=>{const T=Ct=>S.bottom*(1-Ct)+S.top*Ct,x=T(.19),A=T(.343),Q=T(.35),z=T(.48),G=T(.53),re=T(.67);i.rectBounds=new ot(S.left,z,S.right,x),i.fill=new ml(0,x,0,z).addColorStop(0,"#555").addColorStop(.1,"#555").addColorStop(.1,"#D6D6D6").addColorStop(.12,"#D6D6D6").addColorStop(.12,"#555").addColorStop(.6,"#777").addColorStop(.92,"#555").addColorStop(.92,"#D6D6D6").addColorStop(.935,"#D6D6D6").addColorStop(.935,"#555").addColorStop(1,"#555"),s.rectBounds=S,s.fill=new ml(0,S.bottom,0,S.top).addColorStop(0,"#3F8F3D").addColorStop(.67,"#88C57A").addColorStop(.67,"#cfecfc").addColorStop(1,"#02ace4");const ne=S.centerX,ae=new Wt,pe=(Ct,Qe)=>{ae.moveTo(Ct*(1+.003)+ne,A),ae.lineTo(Qe*(1+.003)+ne,A),ae.lineTo(Qe*(1-.003)+ne,Q),ae.lineTo(Ct*(1-.003)+ne,Q),ae.close()},N=1,Ie=3,$e=S.height*.08,Ee=Ct=>(Ct-y)*$e,Je=Ct=>Ct/$e+y,Ge=Je(-.6*S.width),_t=Je(.6*S.width);for(let Ct=Math.ceil(Ge/Ie)*Ie;Ct<_t;Ct+=Ie)pe(Ee(Ct),Ee(Ct+N));ae.makeImmutable(),r.shape=ae;const it=g(y,_t-Ge,1.1*S.width);o.children.forEach(Ct=>{Ct.freeToPool()}),o.removeAllChildren();const nt=[];for(const Ct of it)if(Ct.x>S.left-200&&Ct.x<S.right+200){const Zt=Ct.type===0?l0.pool:h0.pool;nt.push(Zt.create(Ct.x,re*Ct.y+G*(1-Ct.y),Ct.depth))}nt.sort((Ct,Qe)=>Ct.y-Qe.y),o.children=nt})}}class rw extends TO{constructor(e,t){super(e,new ss(-3,3),t),this.addMinorTick(-3),this.addMinorTick(0),this.addMinorTick(3)}}window.ViewTypes={AnimatedPanZoomListener:K0,Font:Xs,HBox:wV,Node:Rt,Text:yn,VBox:a0,Model:fp,CyclistNode:pp,Multilink:sr,Bounds2:ot,Dimension2:Ws,toFixed:S0,Panel:dy,TextPushButton:sw,VerticalAquaRadioButtonGroup:iw,BackgroundNode:nw,BLUE_COLOR_SHIFT:Bc,GREEN_COLOR_SHIFT:Rc,RED_COLOR_SHIFT:Cf,AccelerationSlider:rw};class NO extends Rt{constructor(e,t){const i=Xs.fromCSS("18px Arial"),s=Xs.fromCSS("bold 18px Arial"),r=new Rt({tagName:"p",innerContent:"There is a cyclist on a road. You can control the acceleration of the cyclist using a slider. There is a stop button to stop the cyclist."}),o=new pp(e.cyclist,{tagName:"p",labelTagName:"h2",labelContent:"Cyclist"});e.cyclist.isPointingRightProperty.lazyLink(A=>{o.alertDescriptionUtterance(`The cyclist is now pointing to the ${A?"right":"left"}`)}),new sr([e.cyclist.isPointingRightProperty,e.cyclist.bicycleColorShiftProperty,e.cyclist.effortProperty,e.velocityProperty,e.accelerationProperty],(A,Q,z,G,re)=>{const ne={[Bc]:"blue",[Rc]:"green",[Cf]:"red"}[Q],ae=A?"right":"left",N=G*re<0?"braking":Math.abs(re)<1e-5?"coasting":{0:"pedaling lightly",1:"pedaling moderately",2:"pedaling hard",3:"pedaling very hard"}[z];let Ie;const $e=Math.abs(G);$e<1e-5?Ie="stationary":$e<5?Ie="moving slowly":$e<13?Ie="moving at a moderate speed":$e<25?Ie="moving quickly":Ie="moving very quickly",o.innerContent=`The cyclist is on a ${ne} bicycle pointing to the ${ae}. ${$e>1e-5?`The cyclist is ${N}. `:""}The cyclist is ${Ie}`});const d=new rw(e.accelerationProperty,{trackSize:new Ws(200,5),thumbTouchAreaYDilation:7,accessibleName:"Acceleration",accessibleHelpText:"Adjust the acceleration of the cyclist",pdomCreateAriaValueText:A=>`${S0(A/2,1)} meters per second squared`}),g=new sw("Stop",{font:i,listener:()=>{e.stop(),g.alertDescriptionUtterance("The cyclist has stopped")},accessibleName:"Stop",accessibleHelpText:"Stop all motion of the cyclist"}),y=A=>()=>new yn(A,{font:i}),S=new iw(e.cyclist.bicycleColorShiftProperty,[{value:Bc,createNode:y("Blue")},{value:Rc,createNode:y("Green")},{value:Cf,createNode:y("Red")}],{labelTagName:"h3",accessibleName:"Bicycle Color",touchAreaXDilation:20,accessibleHelpText:"Change the color of the bicycle"}),T=new dy(new wV({spacing:30,align:"top",tagName:"div",labelTagName:"h2",labelContent:"Controls",children:[new a0({spacing:7,children:[new yn("Acceleration",{font:s}),d,g]}),new a0({spacing:7,children:[new yn("Bicycle Color",{font:s}),S]})]}),{top:o.bottom+7,xMargin:20}),L=new Rt({children:[o,T]});super({tagName:"div",labelTagName:"h1",labelContent:"Accessible Interaction Demo",children:[r,new nw(e.positionProperty,t),L]}),this.model=e;const x=new K0(this,{maxScale:10});this.addInputListener(x),t.link(A=>{const Q=A.height/500;L.setScaleMagnitude(A.height/500),L.y=(A.top+3*A.bottom)/4,o.centerX=A.centerX/Q,T.centerX=A.centerX/Q,x.setTargetBounds(A),x.setPanBounds(A)})}}const u0=new Li(new ot(0,0,window.innerWidth,window.innerHeight)),c0=new Rt({renderer:"svg"}),aw=new Ri(!0);window.interactiveHighlightsEnabledProperty=aw;const jc=new Ec(c0,{allowSceneOverflow:!1,backgroundColor:"#eee",listenToOnlyElement:!1,assumeFullWindow:!0,interactiveHighlightsEnabledProperty:aw});document.body.appendChild(jc.domElement);jc.initializeEvents();window.display=jc;let fy=!0;const ow=()=>{fy=!1;const n=new ot(0,0,window.innerWidth,window.innerHeight);jc.setWidthHeight(n.width,n.height),u0.value=n,An.mobileSafari&&window.scrollTo(0,0)},py=()=>{fy=!0};window.addEventListener("resize",py);window.addEventListener("orientationchange",py);window.visualViewport&&window.visualViewport.addEventListener("resize",py);ow();let d0=NO;const lw=new Hi;window.setViewClass=n=>{d0=n,lw.emit()};an.addListener(()=>{let n=new fp,e=new d0(n,u0);c0.addChild(e),lw.addListener(()=>{n=n.copy(),e.dispose(),e=new d0(n,u0),c0.addChild(e)}),jc.updateOnRequestAnimationFrame(t=>{fy&&ow(),n.step(t)})});
