(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const aT=",",oT=()=>{try{return localStorage.getItem("phetTeamMember")==="true"}catch{return!1}};function fr(n,e){return n.hasOwnProperty(e)}const ug=n=>n.length===0||n.startsWith("?"),cg=(n,e,t,i,s)=>{if(!n)if(i.public)if(wl.addWarning(e,t,s),fr(i,"defaultValue"))t=i.defaultValue;else{const r=Cl[i.type];Us(fr(r,"defaultValue"),"Type must have a default value if the provided schema does not have one."),t=r.defaultValue}else Us(n,s);return t},wl={warnings:[],get:function(n,e){return this.getForString(n,e,self.location.search)},getAll:function(n){return{...this.getAllForString(n,self.location.search),SCHEMA_MAP:n}},getForString:function(n,e,t){if(!ug(t))throw new Error(`Query strings should be either the empty string or start with a "?": ${t}`);const i=e.private&&!oT()?[]:J_(n,t);Jb(n,e);let s=$b(n,e,i);if(fr(e,"validValues")){const o=e.validValues;s=cg(gm(s,o),n,s,e,`Invalid value supplied for key "${n}": ${s} is not a member of valid values: ${o.join(", ")}`)}else fr(e,"isValidValue")&&(s=cg(e.isValidValue(s),n,s,e,`Invalid value supplied for key "${n}": ${s}`));let r=Cl[e.type].isValidValue(s);if(e.type==="array"&&Array.isArray(s)){let o=!0;for(let c=0;c<s.length;c++){const p=s[c];if(!Cl[e.elementSchema.type].isValidValue(p)){o=!1;break}if(fr(e.elementSchema,"isValidValue")&&!e.elementSchema.isValidValue(p)){o=!1;break}if(fr(e.elementSchema,"validValues")&&!gm(p,e.elementSchema.validValues)){o=!1;break}}r=r&&o}return s=cg(r,n,s,e,`Invalid value for type, key: ${n}`),s},getAllForString:function(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=this.getForString(i,n[i],e));return t},containsKey:function(n){return this.containsKeyForString(n,self.location.search)},containsKeyForString:function(n,e){if(!ug(e))throw new Error(`Query strings should be either the empty string or start with a "?": ${e}`);return J_(n,e).length>0},deepEquals:function(n,e){if(typeof n!=typeof e)return!1;if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return n===e;if(n===null&&e===null||n===void 0&&e===void 0)return!0;if(n===null&&e===void 0||n===void 0&&e===null)return!1;const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;if(t.length===0)return n===e;for(let s=0;s<t.length;s++){if(t[s]!==i[s])return!1;const r=n[t[s]],o=e[t[s]];if(!wl.deepEquals(r,o))return!1}return!0},removeKeyValuePair:function(n,e){if(Us(typeof n=="string",`url should be string, but it was: ${typeof n}`),Us(typeof e=="string",`url should be string, but it was: ${typeof e}`),Us(ug(n),"queryString should be length 0 or begin with ?"),Us(e.length>0,"url should be a string with length > 0"),n.startsWith("?")){const t=[],s=n.substring(1).split("&");for(let r=0;r<s.length;r++){const o=s[r],c=o.split("=");decodeURIComponent(c[0])!==e&&t.push(o)}return t.length>0?`?${t.join("&")}`:""}else return n},removeKeyValuePairs:function(n,e){for(let t=0;t<e.length;t++)n=this.removeKeyValuePair(n,e[t]);return n},appendQueryString:function(n,e){if((e.startsWith("?")||e.startsWith("&"))&&(e=e.substring(1)),e.length===0)return n;const t=n.includes("?")?"&":"?";return n+t+e},appendQueryStringArray:function(n,e){for(let t=0;t<e.length;t++)n=this.appendQueryString(n,e[t]);return n},getQueryString:function(n){const e=n.indexOf("?");return e>=0?n.substring(e):"?"},addWarning:function(n,e,t){let i=!1;for(let s=0;s<this.warnings.length;s++){const r=this.warnings[s];if(n===r.key&&e===r.value&&t===r.message){i=!0;break}}i||(console.warn(t),this.warnings.push({key:n,value:e,message:t}))},hasWarning:function(n){let e=!1;for(let t=0;t<this.warnings.length&&!e;t++)e=this.warnings[t].key===n;return e},getQueryParametersFromString:function(n){return n.startsWith("?")?n.substring(1).split("&"):[]},getSingleQueryParameterString:function(n,e){const t=this.getQueryString(e),i=this.getQueryParametersFromString(t);for(let s=0;s<i.length;s++){const r=i[s],o=r.split("=");if(decodeURIComponent(o[0])===n)return r}return null}},J_=function(n,e){const t=[],i=e.slice(1).split("&");for(let s=0;s<i.length;s++){const r=i[s].split("="),o=r[0],c=r.slice(1).join("=");o===n&&(c?t.push(decodeURIComponent(c)):t.push(null))}return t},Jb=function(n,e){const t=Cl[e.type];Us(e.hasOwnProperty("type"),`type field is required for key: ${n}`),Us(Cl.hasOwnProperty(e.type),`invalid type: ${e.type} for key: ${n}`),fr(e,"parse")&&Us(typeof e.parse=="function",`parse must be a function for key: ${n}`),Us(!(e.hasOwnProperty("validValues")&&e.hasOwnProperty("isValidValue")),`validValues and isValidValue are mutually exclusive for key: ${n}`),fr(e,"validValues")&&Us(Array.isArray(e.validValues),`isValidValue must be an array for key: ${n}`),fr(e,"isValidValue")&&Us(typeof e.isValidValue=="function",`isValidValue must be a function for key: ${n}`),fr(e,"defaultValue")&&Us(t.isValidValue(e.defaultValue),`defaultValue incorrect type: ${n}`),fr(e,"validValues")&&e.validValues.forEach(i=>Us(t.isValidValue(i),`validValue incorrect type for key: ${n}`)),fr(e,"defaultValue")&&fr(e,"validValues")&&Us(gm(e.defaultValue,e.validValues),`defaultValue must be a member of validValues, for key: ${n}`),fr(e,"public")&&e.public&&e.type!=="flag"&&Us(e.hasOwnProperty("defaultValue"),`defaultValue is required when public: true for key: ${n}`),hT(n,e,t.required,t.optional),e.type==="array"&&lT(n,e)},lT=function(n,e){e.hasOwnProperty("separator")&&Us(typeof e.separator=="string"&&e.separator.length===1,`invalid separator: ${e.separator}, for key: ${n}`),Us(!e.elementSchema.hasOwnProperty("public"),"Array elements should not declare public; it comes from the array schema itself."),Jb(`${n}.element`,e.elementSchema)},hT=function(n,e,t,i){const s=Object.getOwnPropertyNames(e);t.forEach(o=>{Us(s.includes(o),`missing required property: ${o} for key: ${n}`)});const r=t.concat(i);s.forEach(o=>{Us(o==="type"||r.includes(o),`unsupported property: ${o} for key: ${n}`)})},$b=function(n,e,t){let i;return Us(t.length<=1,`query parameter cannot occur multiple times: ${n}`),e.type==="flag"?i=Cl[e.type].parse(n,e,t[0]):(Us(t[0]!==void 0||e.hasOwnProperty("defaultValue"),`missing required query parameter: ${n}`),t[0]===void 0?i=e.defaultValue:i=Cl[e.type].parse(n,e,t[0])),i},uT=function(n,e,t){return t===null?!0:t===void 0?!1:t},cT=function(n,e,t){return t==="true"?!0:t==="false"?!1:t},dT=function(n,e,t){const i=Number(t);return t===null||isNaN(i)?t:i},fT=function(n,e,t){return t},pT=function(n,e,t){let i;return t===null?i=[]:i=t.split(e.separator||aT).map(s=>$b(n,e.elementSchema,[s])),i},gT=function(n,e,t){return e.parse(t)},gm=function(n,e){let t=!1;for(let i=0;i<e.length&&!t;i++)t=wl.deepEquals(e[i],n);return t},Us=function(n,e){if(!n)throw console&&console.log&&console.log(e),new Error(`Query String Machine Assertion failed: ${e}`)},Cl={flag:{required:[],optional:["private","public"],parse:uT,isValidValue:n=>n===!0||n===!1,defaultValue:!0},boolean:{required:[],optional:["defaultValue","private","public"],parse:cT,isValidValue:n=>n===!0||n===!1},number:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],parse:dT,isValidValue:n=>typeof n=="number"&&!isNaN(n)},string:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],parse:fT,isValidValue:n=>n===null||typeof n=="string"},array:{required:["elementSchema"],optional:["defaultValue","validValues","isValidValue","separator","validValues","private","public"],parse:pT,isValidValue:n=>Array.isArray(n)||n===null},custom:{required:["parse"],optional:["defaultValue","validValues","isValidValue","private","public"],parse:gT,isValidValue:()=>!0}},mT=globalThis.hasOwnProperty("window"),yT=!mT;function Fn(){return yT||!!globalThis.assert}function Et(n,...e){if(Fn()&&!n){const t=e.length>0?"Affirmation failed: ":"Affirmation failed";console.error(t,...e),_T.forEach(r=>r());const i=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");throw i&&(i.writable||i.set&&typeof i.set=="function")&&(Error.stackTraceLimit=20),new Error(t+e.join(`
 `))}}const _T=[],$_="Options";function dn(n,...e){Fn()&&eA(n),Et(n!==null,"target should not be null"),Et(e.length>0,"at least one source expected");for(let t=0;t<e.length;t++){const i=e[t];if(i){Fn()&&eA(i);for(const s in i)if(i.hasOwnProperty(s)&&i[s]!==void 0){const r=i[s];s.endsWith($_)&&s!==$_?(Et(r!==void 0,"nested *Options should not be undefined"),n[s]=dn(n[s]||{},r)):n[s]=r}}}return n}function eA(n){Et(n===null||n&&typeof n=="object"&&Object.getPrototypeOf(n)===Object.prototype,"object is not compatible with merge"),n!==null&&Object.keys(n).forEach(e=>{const t=Object.getOwnPropertyDescriptor(n,e);Et(!t.hasOwnProperty("set"),"cannot use merge with an object that has a setter"),Et(!t.hasOwnProperty("get"),"cannot use merge with an object that has a getter")})}const c0=(n,e,t,i)=>dn(n,e,t,i);function lt(){return c0}function ko(){return c0}function Ci(n,...e){return c0(n,...e)}var zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function AT(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var Yd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Yd.exports;(function(n,e){(function(){var t,i="4.17.21",s=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",c="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",g=500,A="__lodash_placeholder__",C=1,D=2,P=4,F=1,K=2,M=1,U=2,$=4,re=8,pe=16,ce=32,T=64,Ce=128,ze=256,be=512,Be=30,xe="...",Qe=800,Fe=16,Ye=1,ut=2,Me=3,Lt=1/0,at=9007199254740991,Pe=17976931348623157e292,$e=NaN,gt=4294967295,oi=gt-1,Mt=gt>>>1,Ni=[["ary",Ce],["bind",M],["bindKey",U],["curry",re],["curryRight",pe],["flip",be],["partial",ce],["partialRight",T],["rearg",ze]],qt="[object Arguments]",as="[object Array]",qi="[object AsyncFunction]",Vs="[object Boolean]",Gt="[object Date]",fi="[object DOMException]",ft="[object Error]",vn="[object Function]",Ps="[object GeneratorFunction]",Ki="[object Map]",js="[object Number]",V="[object Null]",ae="[object Object]",le="[object Promise]",me="[object Proxy]",ve="[object RegExp]",rt="[object Set]",Ue="[object String]",je="[object Symbol]",xn="[object Undefined]",Rt="[object WeakMap]",a="[object WeakSet]",h="[object ArrayBuffer]",d="[object DataView]",m="[object Float32Array]",y="[object Float64Array]",v="[object Int8Array]",S="[object Int16Array]",w="[object Int32Array]",E="[object Uint8Array]",I="[object Uint8ClampedArray]",N="[object Uint16Array]",q="[object Uint32Array]",B=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,R=RegExp(z.source),Y=RegExp(W.source),x=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,j=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,he=/[\\^$.*+?()[\]{}|]/g,de=RegExp(he.source),_e=/^\s+/,oe=/\s/,ye=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ae=/\{\n\/\* \[wrapped with (.+)\] \*/,Ee=/,? & /,De=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Re=/[()=,{}\[\]\/\s]/,it=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,vt=/^[-+]0x[0-9a-f]+$/i,Ke=/^0b[01]+$/i,We=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,St=/^(?:0|[1-9]\d*)$/,Vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bt=/($^)/,Nt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",ii="\\u0300-\\u036f",zt="\\ufe20-\\ufe2f",Ts="\\u20d0-\\u20ff",gs=ii+zt+Ts,Is="\\u2700-\\u27bf",ms="a-z\\xdf-\\xf6\\xf8-\\xff",ct="\\xac\\xb1\\xd7\\xf7",os="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cs="\\u2000-\\u206f",xs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vn="A-Z\\xc0-\\xd6\\xd8-\\xde",ir="\\ufe0e\\ufe0f",Ln=ct+os+cs+xs,Sn="['’]",an="["+Ft+"]",pn="["+Ln+"]",kn="["+gs+"]",Es="\\d+",on="["+Is+"]",Mo="["+ms+"]",fo="[^"+Ft+Ln+Es+Is+ms+Vn+"]",po="\\ud83c[\\udffb-\\udfff]",Yl="(?:"+kn+"|"+po+")",Oo="[^"+Ft+"]",fa="(?:\\ud83c[\\udde6-\\uddff]){2}",Br="[\\ud800-\\udbff][\\udc00-\\udfff]",sr="["+Vn+"]",pa="\\u200d",Rr="(?:"+Mo+"|"+fo+")",nr="(?:"+sr+"|"+fo+")",Wt="(?:"+Sn+"(?:d|ll|m|re|s|t|ve))?",Bn="(?:"+Sn+"(?:D|LL|M|RE|S|T|VE))?",Gn=Yl+"?",Rn="["+ir+"]?",Zr="(?:"+pa+"(?:"+[Oo,fa,Br].join("|")+")"+Rn+Gn+")*",qo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",go=Rn+Gn+Zr,u="(?:"+[on,fa,Br].join("|")+")"+go,b="(?:"+[Oo+kn+"?",kn,fa,Br,an].join("|")+")",O=RegExp(Sn,"g"),Q=RegExp(kn,"g"),ue=RegExp(po+"(?="+po+")|"+b+go,"g"),ke=RegExp([sr+"?"+Mo+"+"+Wt+"(?="+[pn,sr,"$"].join("|")+")",nr+"+"+Bn+"(?="+[pn,sr+Rr,"$"].join("|")+")",sr+"?"+Rr+"+"+Wt,sr+"+"+Bn,Fo,qo,Es,u].join("|"),"g"),Oe=RegExp("["+pa+Ft+gs+ir+"]"),pt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_t=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ni=-1,Pt={};Pt[m]=Pt[y]=Pt[v]=Pt[S]=Pt[w]=Pt[E]=Pt[I]=Pt[N]=Pt[q]=!0,Pt[qt]=Pt[as]=Pt[h]=Pt[Vs]=Pt[d]=Pt[Gt]=Pt[ft]=Pt[vn]=Pt[Ki]=Pt[js]=Pt[ae]=Pt[ve]=Pt[rt]=Pt[Ue]=Pt[Rt]=!1;var ei={};ei[qt]=ei[as]=ei[h]=ei[d]=ei[Vs]=ei[Gt]=ei[m]=ei[y]=ei[v]=ei[S]=ei[w]=ei[Ki]=ei[js]=ei[ae]=ei[ve]=ei[rt]=ei[Ue]=ei[je]=ei[E]=ei[I]=ei[N]=ei[q]=!0,ei[ft]=ei[vn]=ei[Rt]=!1;var Jr={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Fa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Nr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ga=parseFloat,ma=parseInt,hu=typeof zn=="object"&&zn&&zn.Object===Object&&zn,Gl=typeof self=="object"&&self&&self.Object===Object&&self,ln=hu||Gl||Function("return this")(),uu=e&&!e.nodeType&&e,ya=uu&&!0&&n&&!n.nodeType&&n,Rc=ya&&ya.exports===uu,Wl=Rc&&hu.process,rr=function(){try{var Te=ya&&ya.require&&ya.require("util").types;return Te||Wl&&Wl.binding&&Wl.binding("util")}catch{}}(),zo=rr&&rr.isArrayBuffer,za=rr&&rr.isDate,Ho=rr&&rr.isMap,cu=rr&&rr.isRegExp,_a=rr&&rr.isSet,du=rr&&rr.isTypedArray;function Wi(Te,Ge,qe){switch(qe.length){case 0:return Te.call(Ge);case 1:return Te.call(Ge,qe[0]);case 2:return Te.call(Ge,qe[0],qe[1]);case 3:return Te.call(Ge,qe[0],qe[1],qe[2])}return Te.apply(Ge,qe)}function hp(Te,Ge,qe,ne){for(var fe=-1,Le=Te==null?0:Te.length;++fe<Le;){var He=Te[fe];Ge(ne,He,qe(He),Te)}return ne}function Nn(Te,Ge){for(var qe=-1,ne=Te==null?0:Te.length;++qe<ne&&Ge(Te[qe],qe,Te)!==!1;);return Te}function mo(Te,Ge){for(var qe=Te==null?0:Te.length;qe--&&Ge(Te[qe],qe,Te)!==!1;);return Te}function Nc(Te,Ge){for(var qe=-1,ne=Te==null?0:Te.length;++qe<ne;)if(!Ge(Te[qe],qe,Te))return!1;return!0}function Aa(Te,Ge){for(var qe=-1,ne=Te==null?0:Te.length,fe=0,Le=[];++qe<ne;){var He=Te[qe];Ge(He,qe,Te)&&(Le[fe++]=He)}return Le}function Xl(Te,Ge){var qe=Te==null?0:Te.length;return!!qe&&Ka(Te,Ge,0)>-1}function fu(Te,Ge,qe){for(var ne=-1,fe=Te==null?0:Te.length;++ne<fe;)if(qe(Ge,Te[ne]))return!0;return!1}function ys(Te,Ge){for(var qe=-1,ne=Te==null?0:Te.length,fe=Array(ne);++qe<ne;)fe[qe]=Ge(Te[qe],qe,Te);return fe}function ba(Te,Ge){for(var qe=-1,ne=Ge.length,fe=Te.length;++qe<ne;)Te[fe+qe]=Ge[qe];return Te}function pu(Te,Ge,qe,ne){var fe=-1,Le=Te==null?0:Te.length;for(ne&&Le&&(qe=Te[++fe]);++fe<Le;)qe=Ge(qe,Te[fe],fe,Te);return qe}function up(Te,Ge,qe,ne){var fe=Te==null?0:Te.length;for(ne&&fe&&(qe=Te[--fe]);fe--;)qe=Ge(qe,Te[fe],fe,Te);return qe}function gu(Te,Ge){for(var qe=-1,ne=Te==null?0:Te.length;++qe<ne;)if(Ge(Te[qe],qe,Te))return!0;return!1}var Ha=Ql("length");function tn(Te){return Te.split("")}function Mc(Te){return Te.match(De)||[]}function yo(Te,Ge,qe){var ne;return qe(Te,function(fe,Le,He){if(Ge(fe,Le,He))return ne=Le,!1}),ne}function jl(Te,Ge,qe,ne){for(var fe=Te.length,Le=qe+(ne?1:-1);ne?Le--:++Le<fe;)if(Ge(Te[Le],Le,Te))return Le;return-1}function Ka(Te,Ge,qe){return Ge===Ge?_u(Te,Ge,qe):jl(Te,Ko,qe)}function cp(Te,Ge,qe,ne){for(var fe=qe-1,Le=Te.length;++fe<Le;)if(ne(Te[fe],Ge))return fe;return-1}function Ko(Te){return Te!==Te}function Ua(Te,Ge){var qe=Te==null?0:Te.length;return qe?Jl(Te,Ge)/qe:$e}function Ql(Te){return function(Ge){return Ge==null?t:Ge[Te]}}function Zl(Te){return function(Ge){return Te==null?t:Te[Ge]}}function Li(Te,Ge,qe,ne,fe){return fe(Te,function(Le,He,bt){qe=ne?(ne=!1,Le):Ge(qe,Le,He,bt)}),qe}function mu(Te,Ge){var qe=Te.length;for(Te.sort(Ge);qe--;)Te[qe]=Te[qe].value;return Te}function Jl(Te,Ge){for(var qe,ne=-1,fe=Te.length;++ne<fe;){var Le=Ge(Te[ne]);Le!==t&&(qe=qe===t?Le:qe+Le)}return qe}function $l(Te,Ge){for(var qe=-1,ne=Array(Te);++qe<Te;)ne[qe]=Ge(qe);return ne}function hn(Te,Ge){return ys(Ge,function(qe){return[qe,Te[qe]]})}function ea(Te){return Te&&Te.slice(0,ih(Te)+1).replace(_e,"")}function Ot(Te){return function(Ge){return Te(Ge)}}function Uo(Te,Ge){return ys(Ge,function(qe){return Te[qe]})}function ts(Te,Ge){return Te.has(Ge)}function Yo(Te,Ge){for(var qe=-1,ne=Te.length;++qe<ne&&Ka(Ge,Te[qe],0)>-1;);return qe}function va(Te,Ge){for(var qe=Te.length;qe--&&Ka(Ge,Te[qe],0)>-1;);return qe}function Hs(Te,Ge){for(var qe=Te.length,ne=0;qe--;)Te[qe]===Ge&&++ne;return ne}var ta=Zl(Jr),eh=Zl(Fa);function dp(Te){return"\\"+Nr[Te]}function yu(Te,Ge){return Te==null?t:Te[Ge]}function _o(Te){return Oe.test(Te)}function vr(Te){return pt.test(Te)}function Go(Te){for(var Ge,qe=[];!(Ge=Te.next()).done;)qe.push(Ge.value);return qe}function Ya(Te){var Ge=-1,qe=Array(Te.size);return Te.forEach(function(ne,fe){qe[++Ge]=[fe,ne]}),qe}function th(Te,Ge){return function(qe){return Te(Ge(qe))}}function ia(Te,Ge){for(var qe=-1,ne=Te.length,fe=0,Le=[];++qe<ne;){var He=Te[qe];(He===Ge||He===A)&&(Te[qe]=A,Le[fe++]=qe)}return Le}function Wo(Te){var Ge=-1,qe=Array(Te.size);return Te.forEach(function(ne){qe[++Ge]=ne}),qe}function gn(Te){var Ge=-1,qe=Array(Te.size);return Te.forEach(function(ne){qe[++Ge]=[ne,ne]}),qe}function _u(Te,Ge,qe){for(var ne=qe-1,fe=Te.length;++ne<fe;)if(Te[ne]===Ge)return ne;return-1}function fp(Te,Ge,qe){for(var ne=qe+1;ne--;)if(Te[ne]===Ge)return ne;return ne}function Ao(Te){return _o(Te)?Xo(Te):Ha(Te)}function Wn(Te){return _o(Te)?Au(Te):tn(Te)}function ih(Te){for(var Ge=Te.length;Ge--&&oe.test(Te.charAt(Ge)););return Ge}var pp=Zl($r);function Xo(Te){for(var Ge=ue.lastIndex=0;ue.test(Te);)++Ge;return Ge}function Au(Te){return Te.match(ue)||[]}function gp(Te){return Te.match(ke)||[]}var mp=function Te(Ge){Ge=Ge==null?ln:Ga.defaults(ln.Object(),Ge,Ga.pick(ln,_t));var qe=Ge.Array,ne=Ge.Date,fe=Ge.Error,Le=Ge.Function,He=Ge.Math,bt=Ge.Object,Ht=Ge.RegExp,ti=Ge.String,li=Ge.TypeError,Mn=qe.prototype,Wa=Le.prototype,Va=bt.prototype,Xa=Ge["__core-js_shared__"],sh=Wa.toString,is=Va.hasOwnProperty,tS=0,hy=function(){var l=/[^.]+$/.exec(Xa&&Xa.keys&&Xa.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Oc=Va.toString,iS=sh.call(bt),sS=ln._,nS=Ht("^"+sh.call(is).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qc=Rc?Ge.Buffer:t,bo=Ge.Symbol,Fc=Ge.Uint8Array,uy=qc?qc.allocUnsafe:t,zc=th(bt.getPrototypeOf,bt),cy=bt.create,dy=Va.propertyIsEnumerable,Hc=Mn.splice,fy=bo?bo.isConcatSpreadable:t,bu=bo?bo.iterator:t,jo=bo?bo.toStringTag:t,Kc=function(){try{var l=el(bt,"defineProperty");return l({},"",{}),l}catch{}}(),rS=Ge.clearTimeout!==ln.clearTimeout&&Ge.clearTimeout,aS=ne&&ne.now!==ln.Date.now&&ne.now,oS=Ge.setTimeout!==ln.setTimeout&&Ge.setTimeout,Uc=He.ceil,Yc=He.floor,yp=bt.getOwnPropertySymbols,lS=qc?qc.isBuffer:t,py=Ge.isFinite,hS=Mn.join,uS=th(bt.keys,bt),un=He.max,On=He.min,cS=ne.now,dS=Ge.parseInt,gy=He.random,fS=Mn.reverse,_p=el(Ge,"DataView"),vu=el(Ge,"Map"),Ap=el(Ge,"Promise"),nh=el(Ge,"Set"),Vu=el(Ge,"WeakMap"),Su=el(bt,"create"),Gc=Vu&&new Vu,rh={},pS=tl(_p),gS=tl(vu),mS=tl(Ap),yS=tl(nh),_S=tl(Vu),Wc=bo?bo.prototype:t,wu=Wc?Wc.valueOf:t,my=Wc?Wc.toString:t;function ee(l){if(Ks(l)&&!ci(l)&&!(l instanceof ki)){if(l instanceof Mr)return l;if(is.call(l,"__wrapped__"))return y_(l)}return new Mr(l)}var ah=function(){function l(){}return function(f){if(!Ls(f))return{};if(cy)return cy(f);l.prototype=f;var _=new l;return l.prototype=t,_}}();function Xc(){}function Mr(l,f){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}ee.templateSettings={escape:x,evaluate:H,interpolate:j,variable:"",imports:{_:ee}},ee.prototype=Xc.prototype,ee.prototype.constructor=ee,Mr.prototype=ah(Xc.prototype),Mr.prototype.constructor=Mr;function ki(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=gt,this.__views__=[]}function AS(){var l=new ki(this.__wrapped__);return l.__actions__=ar(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ar(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ar(this.__views__),l}function bS(){if(this.__filtered__){var l=new ki(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function vS(){var l=this.__wrapped__.value(),f=this.__dir__,_=ci(l),L=f<0,Z=_?l.length:0,ie=kw(0,Z,this.__views__),ge=ie.start,Ve=ie.end,Ie=Ve-ge,tt=L?Ve:ge-1,st=this.__iteratees__,ot=st.length,wt=0,kt=On(Ie,this.__takeCount__);if(!_||!L&&Z==Ie&&kt==Ie)return Fy(l,this.__actions__);var Xt=[];e:for(;Ie--&&wt<kt;){tt+=f;for(var _i=-1,jt=l[tt];++_i<ot;){var Ei=st[_i],Mi=Ei.iteratee,wr=Ei.type,Qn=Mi(jt);if(wr==ut)jt=Qn;else if(!Qn){if(wr==Ye)continue e;break e}}Xt[wt++]=jt}return Xt}ki.prototype=ah(Xc.prototype),ki.prototype.constructor=ki;function Qo(l){var f=-1,_=l==null?0:l.length;for(this.clear();++f<_;){var L=l[f];this.set(L[0],L[1])}}function VS(){this.__data__=Su?Su(null):{},this.size=0}function SS(l){var f=this.has(l)&&delete this.__data__[l];return this.size-=f?1:0,f}function wS(l){var f=this.__data__;if(Su){var _=f[l];return _===p?t:_}return is.call(f,l)?f[l]:t}function CS(l){var f=this.__data__;return Su?f[l]!==t:is.call(f,l)}function PS(l,f){var _=this.__data__;return this.size+=this.has(l)?0:1,_[l]=Su&&f===t?p:f,this}Qo.prototype.clear=VS,Qo.prototype.delete=SS,Qo.prototype.get=wS,Qo.prototype.has=CS,Qo.prototype.set=PS;function ja(l){var f=-1,_=l==null?0:l.length;for(this.clear();++f<_;){var L=l[f];this.set(L[0],L[1])}}function ES(){this.__data__=[],this.size=0}function DS(l){var f=this.__data__,_=jc(f,l);if(_<0)return!1;var L=f.length-1;return _==L?f.pop():Hc.call(f,_,1),--this.size,!0}function TS(l){var f=this.__data__,_=jc(f,l);return _<0?t:f[_][1]}function IS(l){return jc(this.__data__,l)>-1}function xS(l,f){var _=this.__data__,L=jc(_,l);return L<0?(++this.size,_.push([l,f])):_[L][1]=f,this}ja.prototype.clear=ES,ja.prototype.delete=DS,ja.prototype.get=TS,ja.prototype.has=IS,ja.prototype.set=xS;function Qa(l){var f=-1,_=l==null?0:l.length;for(this.clear();++f<_;){var L=l[f];this.set(L[0],L[1])}}function LS(){this.size=0,this.__data__={hash:new Qo,map:new(vu||ja),string:new Qo}}function kS(l){var f=od(this,l).delete(l);return this.size-=f?1:0,f}function BS(l){return od(this,l).get(l)}function RS(l){return od(this,l).has(l)}function NS(l,f){var _=od(this,l),L=_.size;return _.set(l,f),this.size+=_.size==L?0:1,this}Qa.prototype.clear=LS,Qa.prototype.delete=kS,Qa.prototype.get=BS,Qa.prototype.has=RS,Qa.prototype.set=NS;function Zo(l){var f=-1,_=l==null?0:l.length;for(this.__data__=new Qa;++f<_;)this.add(l[f])}function MS(l){return this.__data__.set(l,p),this}function OS(l){return this.__data__.has(l)}Zo.prototype.add=Zo.prototype.push=MS,Zo.prototype.has=OS;function sa(l){var f=this.__data__=new ja(l);this.size=f.size}function qS(){this.__data__=new ja,this.size=0}function FS(l){var f=this.__data__,_=f.delete(l);return this.size=f.size,_}function zS(l){return this.__data__.get(l)}function HS(l){return this.__data__.has(l)}function KS(l,f){var _=this.__data__;if(_ instanceof ja){var L=_.__data__;if(!vu||L.length<s-1)return L.push([l,f]),this.size=++_.size,this;_=this.__data__=new Qa(L)}return _.set(l,f),this.size=_.size,this}sa.prototype.clear=qS,sa.prototype.delete=FS,sa.prototype.get=zS,sa.prototype.has=HS,sa.prototype.set=KS;function yy(l,f){var _=ci(l),L=!_&&il(l),Z=!_&&!L&&Co(l),ie=!_&&!L&&!Z&&uh(l),ge=_||L||Z||ie,Ve=ge?$l(l.length,ti):[],Ie=Ve.length;for(var tt in l)(f||is.call(l,tt))&&!(ge&&(tt=="length"||Z&&(tt=="offset"||tt=="parent")||ie&&(tt=="buffer"||tt=="byteLength"||tt=="byteOffset")||eo(tt,Ie)))&&Ve.push(tt);return Ve}function _y(l){var f=l.length;return f?l[Ip(0,f-1)]:t}function US(l,f){return ld(ar(l),Jo(f,0,l.length))}function YS(l){return ld(ar(l))}function bp(l,f,_){(_!==t&&!na(l[f],_)||_===t&&!(f in l))&&Za(l,f,_)}function Cu(l,f,_){var L=l[f];(!(is.call(l,f)&&na(L,_))||_===t&&!(f in l))&&Za(l,f,_)}function jc(l,f){for(var _=l.length;_--;)if(na(l[_][0],f))return _;return-1}function GS(l,f,_,L){return vo(l,function(Z,ie,ge){f(L,Z,_(Z),ge)}),L}function Ay(l,f){return l&&wa(f,mn(f),l)}function WS(l,f){return l&&wa(f,lr(f),l)}function Za(l,f,_){f=="__proto__"&&Kc?Kc(l,f,{configurable:!0,enumerable:!0,value:_,writable:!0}):l[f]=_}function vp(l,f){for(var _=-1,L=f.length,Z=qe(L),ie=l==null;++_<L;)Z[_]=ie?t:tg(l,f[_]);return Z}function Jo(l,f,_){return l===l&&(_!==t&&(l=l<=_?l:_),f!==t&&(l=l>=f?l:f)),l}function Or(l,f,_,L,Z,ie){var ge,Ve=f&C,Ie=f&D,tt=f&P;if(_&&(ge=Z?_(l,L,Z,ie):_(l)),ge!==t)return ge;if(!Ls(l))return l;var st=ci(l);if(st){if(ge=Rw(l),!Ve)return ar(l,ge)}else{var ot=qn(l),wt=ot==vn||ot==Ps;if(Co(l))return Ky(l,Ve);if(ot==ae||ot==qt||wt&&!Z){if(ge=Ie||wt?{}:l_(l),!Ve)return Ie?ww(l,WS(ge,l)):Sw(l,Ay(ge,l))}else{if(!ei[ot])return Z?l:{};ge=Nw(l,ot,Ve)}}ie||(ie=new sa);var kt=ie.get(l);if(kt)return kt;ie.set(l,ge),M_(l)?l.forEach(function(jt){ge.add(Or(jt,f,_,jt,l,ie))}):R_(l)&&l.forEach(function(jt,Ei){ge.set(Ei,Or(jt,f,_,Ei,l,ie))});var Xt=tt?Ie?zp:Fp:Ie?lr:mn,_i=st?t:Xt(l);return Nn(_i||l,function(jt,Ei){_i&&(Ei=jt,jt=l[Ei]),Cu(ge,Ei,Or(jt,f,_,Ei,l,ie))}),ge}function XS(l){var f=mn(l);return function(_){return by(_,l,f)}}function by(l,f,_){var L=_.length;if(l==null)return!L;for(l=bt(l);L--;){var Z=_[L],ie=f[Z],ge=l[Z];if(ge===t&&!(Z in l)||!ie(ge))return!1}return!0}function vy(l,f,_){if(typeof l!="function")throw new li(o);return Lu(function(){l.apply(t,_)},f)}function Pu(l,f,_,L){var Z=-1,ie=Xl,ge=!0,Ve=l.length,Ie=[],tt=f.length;if(!Ve)return Ie;_&&(f=ys(f,Ot(_))),L?(ie=fu,ge=!1):f.length>=s&&(ie=ts,ge=!1,f=new Zo(f));e:for(;++Z<Ve;){var st=l[Z],ot=_==null?st:_(st);if(st=L||st!==0?st:0,ge&&ot===ot){for(var wt=tt;wt--;)if(f[wt]===ot)continue e;Ie.push(st)}else ie(f,ot,L)||Ie.push(st)}return Ie}var vo=Xy(Sa),Vy=Xy(Sp,!0);function jS(l,f){var _=!0;return vo(l,function(L,Z,ie){return _=!!f(L,Z,ie),_}),_}function Qc(l,f,_){for(var L=-1,Z=l.length;++L<Z;){var ie=l[L],ge=f(ie);if(ge!=null&&(Ve===t?ge===ge&&!Sr(ge):_(ge,Ve)))var Ve=ge,Ie=ie}return Ie}function QS(l,f,_,L){var Z=l.length;for(_=gi(_),_<0&&(_=-_>Z?0:Z+_),L=L===t||L>Z?Z:gi(L),L<0&&(L+=Z),L=_>L?0:q_(L);_<L;)l[_++]=f;return l}function Sy(l,f){var _=[];return vo(l,function(L,Z,ie){f(L,Z,ie)&&_.push(L)}),_}function wn(l,f,_,L,Z){var ie=-1,ge=l.length;for(_||(_=Ow),Z||(Z=[]);++ie<ge;){var Ve=l[ie];f>0&&_(Ve)?f>1?wn(Ve,f-1,_,L,Z):ba(Z,Ve):L||(Z[Z.length]=Ve)}return Z}var Vp=jy(),wy=jy(!0);function Sa(l,f){return l&&Vp(l,f,mn)}function Sp(l,f){return l&&wy(l,f,mn)}function Zc(l,f){return Aa(f,function(_){return to(l[_])})}function $o(l,f){f=So(f,l);for(var _=0,L=f.length;l!=null&&_<L;)l=l[Ca(f[_++])];return _&&_==L?l:t}function Cy(l,f,_){var L=f(l);return ci(l)?L:ba(L,_(l))}function Xn(l){return l==null?l===t?xn:V:jo&&jo in bt(l)?Lw(l):Yw(l)}function wp(l,f){return l>f}function ZS(l,f){return l!=null&&is.call(l,f)}function JS(l,f){return l!=null&&f in bt(l)}function $S(l,f,_){return l>=On(f,_)&&l<un(f,_)}function Cp(l,f,_){for(var L=_?fu:Xl,Z=l[0].length,ie=l.length,ge=ie,Ve=qe(ie),Ie=1/0,tt=[];ge--;){var st=l[ge];ge&&f&&(st=ys(st,Ot(f))),Ie=On(st.length,Ie),Ve[ge]=!_&&(f||Z>=120&&st.length>=120)?new Zo(ge&&st):t}st=l[0];var ot=-1,wt=Ve[0];e:for(;++ot<Z&&tt.length<Ie;){var kt=st[ot],Xt=f?f(kt):kt;if(kt=_||kt!==0?kt:0,!(wt?ts(wt,Xt):L(tt,Xt,_))){for(ge=ie;--ge;){var _i=Ve[ge];if(!(_i?ts(_i,Xt):L(l[ge],Xt,_)))continue e}wt&&wt.push(Xt),tt.push(kt)}}return tt}function ew(l,f,_,L){return Sa(l,function(Z,ie,ge){f(L,_(Z),ie,ge)}),L}function Eu(l,f,_){f=So(f,l),l=d_(l,f);var L=l==null?l:l[Ca(Fr(f))];return L==null?t:Wi(L,l,_)}function Py(l){return Ks(l)&&Xn(l)==qt}function tw(l){return Ks(l)&&Xn(l)==h}function iw(l){return Ks(l)&&Xn(l)==Gt}function Du(l,f,_,L,Z){return l===f?!0:l==null||f==null||!Ks(l)&&!Ks(f)?l!==l&&f!==f:sw(l,f,_,L,Du,Z)}function sw(l,f,_,L,Z,ie){var ge=ci(l),Ve=ci(f),Ie=ge?as:qn(l),tt=Ve?as:qn(f);Ie=Ie==qt?ae:Ie,tt=tt==qt?ae:tt;var st=Ie==ae,ot=tt==ae,wt=Ie==tt;if(wt&&Co(l)){if(!Co(f))return!1;ge=!0,st=!1}if(wt&&!st)return ie||(ie=new sa),ge||uh(l)?r_(l,f,_,L,Z,ie):Iw(l,f,Ie,_,L,Z,ie);if(!(_&F)){var kt=st&&is.call(l,"__wrapped__"),Xt=ot&&is.call(f,"__wrapped__");if(kt||Xt){var _i=kt?l.value():l,jt=Xt?f.value():f;return ie||(ie=new sa),Z(_i,jt,_,L,ie)}}return wt?(ie||(ie=new sa),xw(l,f,_,L,Z,ie)):!1}function nw(l){return Ks(l)&&qn(l)==Ki}function Pp(l,f,_,L){var Z=_.length,ie=Z,ge=!L;if(l==null)return!ie;for(l=bt(l);Z--;){var Ve=_[Z];if(ge&&Ve[2]?Ve[1]!==l[Ve[0]]:!(Ve[0]in l))return!1}for(;++Z<ie;){Ve=_[Z];var Ie=Ve[0],tt=l[Ie],st=Ve[1];if(ge&&Ve[2]){if(tt===t&&!(Ie in l))return!1}else{var ot=new sa;if(L)var wt=L(tt,st,Ie,l,f,ot);if(!(wt===t?Du(st,tt,F|K,L,ot):wt))return!1}}return!0}function Ey(l){if(!Ls(l)||Fw(l))return!1;var f=to(l)?nS:We;return f.test(tl(l))}function rw(l){return Ks(l)&&Xn(l)==ve}function aw(l){return Ks(l)&&qn(l)==rt}function ow(l){return Ks(l)&&pd(l.length)&&!!Pt[Xn(l)]}function Dy(l){return typeof l=="function"?l:l==null?hr:typeof l=="object"?ci(l)?xy(l[0],l[1]):Iy(l):Q_(l)}function Ep(l){if(!xu(l))return uS(l);var f=[];for(var _ in bt(l))is.call(l,_)&&_!="constructor"&&f.push(_);return f}function lw(l){if(!Ls(l))return Uw(l);var f=xu(l),_=[];for(var L in l)L=="constructor"&&(f||!is.call(l,L))||_.push(L);return _}function Dp(l,f){return l<f}function Ty(l,f){var _=-1,L=or(l)?qe(l.length):[];return vo(l,function(Z,ie,ge){L[++_]=f(Z,ie,ge)}),L}function Iy(l){var f=Kp(l);return f.length==1&&f[0][2]?u_(f[0][0],f[0][1]):function(_){return _===l||Pp(_,l,f)}}function xy(l,f){return Yp(l)&&h_(f)?u_(Ca(l),f):function(_){var L=tg(_,l);return L===t&&L===f?ig(_,l):Du(f,L,F|K)}}function Jc(l,f,_,L,Z){l!==f&&Vp(f,function(ie,ge){if(Z||(Z=new sa),Ls(ie))hw(l,f,ge,_,Jc,L,Z);else{var Ve=L?L(Wp(l,ge),ie,ge+"",l,f,Z):t;Ve===t&&(Ve=ie),bp(l,ge,Ve)}},lr)}function hw(l,f,_,L,Z,ie,ge){var Ve=Wp(l,_),Ie=Wp(f,_),tt=ge.get(Ie);if(tt){bp(l,_,tt);return}var st=ie?ie(Ve,Ie,_+"",l,f,ge):t,ot=st===t;if(ot){var wt=ci(Ie),kt=!wt&&Co(Ie),Xt=!wt&&!kt&&uh(Ie);st=Ie,wt||kt||Xt?ci(Ve)?st=Ve:Qs(Ve)?st=ar(Ve):kt?(ot=!1,st=Ky(Ie,!0)):Xt?(ot=!1,st=Uy(Ie,!0)):st=[]:ku(Ie)||il(Ie)?(st=Ve,il(Ve)?st=F_(Ve):(!Ls(Ve)||to(Ve))&&(st=l_(Ie))):ot=!1}ot&&(ge.set(Ie,st),Z(st,Ie,L,ie,ge),ge.delete(Ie)),bp(l,_,st)}function Ly(l,f){var _=l.length;if(_)return f+=f<0?_:0,eo(f,_)?l[f]:t}function ky(l,f,_){f.length?f=ys(f,function(ie){return ci(ie)?function(ge){return $o(ge,ie.length===1?ie[0]:ie)}:ie}):f=[hr];var L=-1;f=ys(f,Ot(Ut()));var Z=Ty(l,function(ie,ge,Ve){var Ie=ys(f,function(tt){return tt(ie)});return{criteria:Ie,index:++L,value:ie}});return mu(Z,function(ie,ge){return Vw(ie,ge,_)})}function uw(l,f){return By(l,f,function(_,L){return ig(l,L)})}function By(l,f,_){for(var L=-1,Z=f.length,ie={};++L<Z;){var ge=f[L],Ve=$o(l,ge);_(Ve,ge)&&Tu(ie,So(ge,l),Ve)}return ie}function cw(l){return function(f){return $o(f,l)}}function Tp(l,f,_,L){var Z=L?cp:Ka,ie=-1,ge=f.length,Ve=l;for(l===f&&(f=ar(f)),_&&(Ve=ys(l,Ot(_)));++ie<ge;)for(var Ie=0,tt=f[ie],st=_?_(tt):tt;(Ie=Z(Ve,st,Ie,L))>-1;)Ve!==l&&Hc.call(Ve,Ie,1),Hc.call(l,Ie,1);return l}function Ry(l,f){for(var _=l?f.length:0,L=_-1;_--;){var Z=f[_];if(_==L||Z!==ie){var ie=Z;eo(Z)?Hc.call(l,Z,1):kp(l,Z)}}return l}function Ip(l,f){return l+Yc(gy()*(f-l+1))}function dw(l,f,_,L){for(var Z=-1,ie=un(Uc((f-l)/(_||1)),0),ge=qe(ie);ie--;)ge[L?ie:++Z]=l,l+=_;return ge}function xp(l,f){var _="";if(!l||f<1||f>at)return _;do f%2&&(_+=l),f=Yc(f/2),f&&(l+=l);while(f);return _}function vi(l,f){return Xp(c_(l,f,hr),l+"")}function fw(l){return _y(ch(l))}function pw(l,f){var _=ch(l);return ld(_,Jo(f,0,_.length))}function Tu(l,f,_,L){if(!Ls(l))return l;f=So(f,l);for(var Z=-1,ie=f.length,ge=ie-1,Ve=l;Ve!=null&&++Z<ie;){var Ie=Ca(f[Z]),tt=_;if(Ie==="__proto__"||Ie==="constructor"||Ie==="prototype")return l;if(Z!=ge){var st=Ve[Ie];tt=L?L(st,Ie,Ve):t,tt===t&&(tt=Ls(st)?st:eo(f[Z+1])?[]:{})}Cu(Ve,Ie,tt),Ve=Ve[Ie]}return l}var Ny=Gc?function(l,f){return Gc.set(l,f),l}:hr,gw=Kc?function(l,f){return Kc(l,"toString",{configurable:!0,enumerable:!1,value:ng(f),writable:!0})}:hr;function mw(l){return ld(ch(l))}function qr(l,f,_){var L=-1,Z=l.length;f<0&&(f=-f>Z?0:Z+f),_=_>Z?Z:_,_<0&&(_+=Z),Z=f>_?0:_-f>>>0,f>>>=0;for(var ie=qe(Z);++L<Z;)ie[L]=l[L+f];return ie}function yw(l,f){var _;return vo(l,function(L,Z,ie){return _=f(L,Z,ie),!_}),!!_}function $c(l,f,_){var L=0,Z=l==null?L:l.length;if(typeof f=="number"&&f===f&&Z<=Mt){for(;L<Z;){var ie=L+Z>>>1,ge=l[ie];ge!==null&&!Sr(ge)&&(_?ge<=f:ge<f)?L=ie+1:Z=ie}return Z}return Lp(l,f,hr,_)}function Lp(l,f,_,L){var Z=0,ie=l==null?0:l.length;if(ie===0)return 0;f=_(f);for(var ge=f!==f,Ve=f===null,Ie=Sr(f),tt=f===t;Z<ie;){var st=Yc((Z+ie)/2),ot=_(l[st]),wt=ot!==t,kt=ot===null,Xt=ot===ot,_i=Sr(ot);if(ge)var jt=L||Xt;else tt?jt=Xt&&(L||wt):Ve?jt=Xt&&wt&&(L||!kt):Ie?jt=Xt&&wt&&!kt&&(L||!_i):kt||_i?jt=!1:jt=L?ot<=f:ot<f;jt?Z=st+1:ie=st}return On(ie,oi)}function My(l,f){for(var _=-1,L=l.length,Z=0,ie=[];++_<L;){var ge=l[_],Ve=f?f(ge):ge;if(!_||!na(Ve,Ie)){var Ie=Ve;ie[Z++]=ge===0?0:ge}}return ie}function Oy(l){return typeof l=="number"?l:Sr(l)?$e:+l}function Vr(l){if(typeof l=="string")return l;if(ci(l))return ys(l,Vr)+"";if(Sr(l))return my?my.call(l):"";var f=l+"";return f=="0"&&1/l==-1/0?"-0":f}function Vo(l,f,_){var L=-1,Z=Xl,ie=l.length,ge=!0,Ve=[],Ie=Ve;if(_)ge=!1,Z=fu;else if(ie>=s){var tt=f?null:Dw(l);if(tt)return Wo(tt);ge=!1,Z=ts,Ie=new Zo}else Ie=f?[]:Ve;e:for(;++L<ie;){var st=l[L],ot=f?f(st):st;if(st=_||st!==0?st:0,ge&&ot===ot){for(var wt=Ie.length;wt--;)if(Ie[wt]===ot)continue e;f&&Ie.push(ot),Ve.push(st)}else Z(Ie,ot,_)||(Ie!==Ve&&Ie.push(ot),Ve.push(st))}return Ve}function kp(l,f){return f=So(f,l),l=d_(l,f),l==null||delete l[Ca(Fr(f))]}function qy(l,f,_,L){return Tu(l,f,_($o(l,f)),L)}function ed(l,f,_,L){for(var Z=l.length,ie=L?Z:-1;(L?ie--:++ie<Z)&&f(l[ie],ie,l););return _?qr(l,L?0:ie,L?ie+1:Z):qr(l,L?ie+1:0,L?Z:ie)}function Fy(l,f){var _=l;return _ instanceof ki&&(_=_.value()),pu(f,function(L,Z){return Z.func.apply(Z.thisArg,ba([L],Z.args))},_)}function Bp(l,f,_){var L=l.length;if(L<2)return L?Vo(l[0]):[];for(var Z=-1,ie=qe(L);++Z<L;)for(var ge=l[Z],Ve=-1;++Ve<L;)Ve!=Z&&(ie[Z]=Pu(ie[Z]||ge,l[Ve],f,_));return Vo(wn(ie,1),f,_)}function zy(l,f,_){for(var L=-1,Z=l.length,ie=f.length,ge={};++L<Z;){var Ve=L<ie?f[L]:t;_(ge,l[L],Ve)}return ge}function Rp(l){return Qs(l)?l:[]}function Np(l){return typeof l=="function"?l:hr}function So(l,f){return ci(l)?l:Yp(l,f)?[l]:m_(Ji(l))}var _w=vi;function wo(l,f,_){var L=l.length;return _=_===t?L:_,!f&&_>=L?l:qr(l,f,_)}var Hy=rS||function(l){return ln.clearTimeout(l)};function Ky(l,f){if(f)return l.slice();var _=l.length,L=uy?uy(_):new l.constructor(_);return l.copy(L),L}function Mp(l){var f=new l.constructor(l.byteLength);return new Fc(f).set(new Fc(l)),f}function Aw(l,f){var _=f?Mp(l.buffer):l.buffer;return new l.constructor(_,l.byteOffset,l.byteLength)}function bw(l){var f=new l.constructor(l.source,mt.exec(l));return f.lastIndex=l.lastIndex,f}function vw(l){return wu?bt(wu.call(l)):{}}function Uy(l,f){var _=f?Mp(l.buffer):l.buffer;return new l.constructor(_,l.byteOffset,l.length)}function Yy(l,f){if(l!==f){var _=l!==t,L=l===null,Z=l===l,ie=Sr(l),ge=f!==t,Ve=f===null,Ie=f===f,tt=Sr(f);if(!Ve&&!tt&&!ie&&l>f||ie&&ge&&Ie&&!Ve&&!tt||L&&ge&&Ie||!_&&Ie||!Z)return 1;if(!L&&!ie&&!tt&&l<f||tt&&_&&Z&&!L&&!ie||Ve&&_&&Z||!ge&&Z||!Ie)return-1}return 0}function Vw(l,f,_){for(var L=-1,Z=l.criteria,ie=f.criteria,ge=Z.length,Ve=_.length;++L<ge;){var Ie=Yy(Z[L],ie[L]);if(Ie){if(L>=Ve)return Ie;var tt=_[L];return Ie*(tt=="desc"?-1:1)}}return l.index-f.index}function Gy(l,f,_,L){for(var Z=-1,ie=l.length,ge=_.length,Ve=-1,Ie=f.length,tt=un(ie-ge,0),st=qe(Ie+tt),ot=!L;++Ve<Ie;)st[Ve]=f[Ve];for(;++Z<ge;)(ot||Z<ie)&&(st[_[Z]]=l[Z]);for(;tt--;)st[Ve++]=l[Z++];return st}function Wy(l,f,_,L){for(var Z=-1,ie=l.length,ge=-1,Ve=_.length,Ie=-1,tt=f.length,st=un(ie-Ve,0),ot=qe(st+tt),wt=!L;++Z<st;)ot[Z]=l[Z];for(var kt=Z;++Ie<tt;)ot[kt+Ie]=f[Ie];for(;++ge<Ve;)(wt||Z<ie)&&(ot[kt+_[ge]]=l[Z++]);return ot}function ar(l,f){var _=-1,L=l.length;for(f||(f=qe(L));++_<L;)f[_]=l[_];return f}function wa(l,f,_,L){var Z=!_;_||(_={});for(var ie=-1,ge=f.length;++ie<ge;){var Ve=f[ie],Ie=L?L(_[Ve],l[Ve],Ve,_,l):t;Ie===t&&(Ie=l[Ve]),Z?Za(_,Ve,Ie):Cu(_,Ve,Ie)}return _}function Sw(l,f){return wa(l,Up(l),f)}function ww(l,f){return wa(l,a_(l),f)}function td(l,f){return function(_,L){var Z=ci(_)?hp:GS,ie=f?f():{};return Z(_,l,Ut(L,2),ie)}}function oh(l){return vi(function(f,_){var L=-1,Z=_.length,ie=Z>1?_[Z-1]:t,ge=Z>2?_[2]:t;for(ie=l.length>3&&typeof ie=="function"?(Z--,ie):t,ge&&jn(_[0],_[1],ge)&&(ie=Z<3?t:ie,Z=1),f=bt(f);++L<Z;){var Ve=_[L];Ve&&l(f,Ve,L,ie)}return f})}function Xy(l,f){return function(_,L){if(_==null)return _;if(!or(_))return l(_,L);for(var Z=_.length,ie=f?Z:-1,ge=bt(_);(f?ie--:++ie<Z)&&L(ge[ie],ie,ge)!==!1;);return _}}function jy(l){return function(f,_,L){for(var Z=-1,ie=bt(f),ge=L(f),Ve=ge.length;Ve--;){var Ie=ge[l?Ve:++Z];if(_(ie[Ie],Ie,ie)===!1)break}return f}}function Cw(l,f,_){var L=f&M,Z=Iu(l);function ie(){var ge=this&&this!==ln&&this instanceof ie?Z:l;return ge.apply(L?_:this,arguments)}return ie}function Qy(l){return function(f){f=Ji(f);var _=_o(f)?Wn(f):t,L=_?_[0]:f.charAt(0),Z=_?wo(_,1).join(""):f.slice(1);return L[l]()+Z}}function lh(l){return function(f){return pu(X_(W_(f).replace(O,"")),l,"")}}function Iu(l){return function(){var f=arguments;switch(f.length){case 0:return new l;case 1:return new l(f[0]);case 2:return new l(f[0],f[1]);case 3:return new l(f[0],f[1],f[2]);case 4:return new l(f[0],f[1],f[2],f[3]);case 5:return new l(f[0],f[1],f[2],f[3],f[4]);case 6:return new l(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new l(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var _=ah(l.prototype),L=l.apply(_,f);return Ls(L)?L:_}}function Pw(l,f,_){var L=Iu(l);function Z(){for(var ie=arguments.length,ge=qe(ie),Ve=ie,Ie=hh(Z);Ve--;)ge[Ve]=arguments[Ve];var tt=ie<3&&ge[0]!==Ie&&ge[ie-1]!==Ie?[]:ia(ge,Ie);if(ie-=tt.length,ie<_)return t_(l,f,id,Z.placeholder,t,ge,tt,t,t,_-ie);var st=this&&this!==ln&&this instanceof Z?L:l;return Wi(st,this,ge)}return Z}function Zy(l){return function(f,_,L){var Z=bt(f);if(!or(f)){var ie=Ut(_,3);f=mn(f),_=function(Ve){return ie(Z[Ve],Ve,Z)}}var ge=l(f,_,L);return ge>-1?Z[ie?f[ge]:ge]:t}}function Jy(l){return $a(function(f){var _=f.length,L=_,Z=Mr.prototype.thru;for(l&&f.reverse();L--;){var ie=f[L];if(typeof ie!="function")throw new li(o);if(Z&&!ge&&ad(ie)=="wrapper")var ge=new Mr([],!0)}for(L=ge?L:_;++L<_;){ie=f[L];var Ve=ad(ie),Ie=Ve=="wrapper"?Hp(ie):t;Ie&&Gp(Ie[0])&&Ie[1]==(Ce|re|ce|ze)&&!Ie[4].length&&Ie[9]==1?ge=ge[ad(Ie[0])].apply(ge,Ie[3]):ge=ie.length==1&&Gp(ie)?ge[Ve]():ge.thru(ie)}return function(){var tt=arguments,st=tt[0];if(ge&&tt.length==1&&ci(st))return ge.plant(st).value();for(var ot=0,wt=_?f[ot].apply(this,tt):st;++ot<_;)wt=f[ot].call(this,wt);return wt}})}function id(l,f,_,L,Z,ie,ge,Ve,Ie,tt){var st=f&Ce,ot=f&M,wt=f&U,kt=f&(re|pe),Xt=f&be,_i=wt?t:Iu(l);function jt(){for(var Ei=arguments.length,Mi=qe(Ei),wr=Ei;wr--;)Mi[wr]=arguments[wr];if(kt)var Qn=hh(jt),Cr=Hs(Mi,Qn);if(L&&(Mi=Gy(Mi,L,Z,kt)),ie&&(Mi=Wy(Mi,ie,ge,kt)),Ei-=Cr,kt&&Ei<tt){var Zs=ia(Mi,Qn);return t_(l,f,id,jt.placeholder,_,Mi,Zs,Ve,Ie,tt-Ei)}var ra=ot?_:this,so=wt?ra[l]:l;return Ei=Mi.length,Ve?Mi=Gw(Mi,Ve):Xt&&Ei>1&&Mi.reverse(),st&&Ie<Ei&&(Mi.length=Ie),this&&this!==ln&&this instanceof jt&&(so=_i||Iu(so)),so.apply(ra,Mi)}return jt}function $y(l,f){return function(_,L){return ew(_,l,f(L),{})}}function sd(l,f){return function(_,L){var Z;if(_===t&&L===t)return f;if(_!==t&&(Z=_),L!==t){if(Z===t)return L;typeof _=="string"||typeof L=="string"?(_=Vr(_),L=Vr(L)):(_=Oy(_),L=Oy(L)),Z=l(_,L)}return Z}}function Op(l){return $a(function(f){return f=ys(f,Ot(Ut())),vi(function(_){var L=this;return l(f,function(Z){return Wi(Z,L,_)})})})}function nd(l,f){f=f===t?" ":Vr(f);var _=f.length;if(_<2)return _?xp(f,l):f;var L=xp(f,Uc(l/Ao(f)));return _o(f)?wo(Wn(L),0,l).join(""):L.slice(0,l)}function Ew(l,f,_,L){var Z=f&M,ie=Iu(l);function ge(){for(var Ve=-1,Ie=arguments.length,tt=-1,st=L.length,ot=qe(st+Ie),wt=this&&this!==ln&&this instanceof ge?ie:l;++tt<st;)ot[tt]=L[tt];for(;Ie--;)ot[tt++]=arguments[++Ve];return Wi(wt,Z?_:this,ot)}return ge}function e_(l){return function(f,_,L){return L&&typeof L!="number"&&jn(f,_,L)&&(_=L=t),f=io(f),_===t?(_=f,f=0):_=io(_),L=L===t?f<_?1:-1:io(L),dw(f,_,L,l)}}function rd(l){return function(f,_){return typeof f=="string"&&typeof _=="string"||(f=zr(f),_=zr(_)),l(f,_)}}function t_(l,f,_,L,Z,ie,ge,Ve,Ie,tt){var st=f&re,ot=st?ge:t,wt=st?t:ge,kt=st?ie:t,Xt=st?t:ie;f|=st?ce:T,f&=~(st?T:ce),f&$||(f&=-4);var _i=[l,f,Z,kt,ot,Xt,wt,Ve,Ie,tt],jt=_.apply(t,_i);return Gp(l)&&f_(jt,_i),jt.placeholder=L,p_(jt,l,f)}function qp(l){var f=He[l];return function(_,L){if(_=zr(_),L=L==null?0:On(gi(L),292),L&&py(_)){var Z=(Ji(_)+"e").split("e"),ie=f(Z[0]+"e"+(+Z[1]+L));return Z=(Ji(ie)+"e").split("e"),+(Z[0]+"e"+(+Z[1]-L))}return f(_)}}var Dw=nh&&1/Wo(new nh([,-0]))[1]==Lt?function(l){return new nh(l)}:og;function i_(l){return function(f){var _=qn(f);return _==Ki?Ya(f):_==rt?gn(f):hn(f,l(f))}}function Ja(l,f,_,L,Z,ie,ge,Ve){var Ie=f&U;if(!Ie&&typeof l!="function")throw new li(o);var tt=L?L.length:0;if(tt||(f&=-97,L=Z=t),ge=ge===t?ge:un(gi(ge),0),Ve=Ve===t?Ve:gi(Ve),tt-=Z?Z.length:0,f&T){var st=L,ot=Z;L=Z=t}var wt=Ie?t:Hp(l),kt=[l,f,_,L,Z,st,ot,ie,ge,Ve];if(wt&&Kw(kt,wt),l=kt[0],f=kt[1],_=kt[2],L=kt[3],Z=kt[4],Ve=kt[9]=kt[9]===t?Ie?0:l.length:un(kt[9]-tt,0),!Ve&&f&(re|pe)&&(f&=-25),!f||f==M)var Xt=Cw(l,f,_);else f==re||f==pe?Xt=Pw(l,f,Ve):(f==ce||f==(M|ce))&&!Z.length?Xt=Ew(l,f,_,L):Xt=id.apply(t,kt);var _i=wt?Ny:f_;return p_(_i(Xt,kt),l,f)}function s_(l,f,_,L){return l===t||na(l,Va[_])&&!is.call(L,_)?f:l}function n_(l,f,_,L,Z,ie){return Ls(l)&&Ls(f)&&(ie.set(f,l),Jc(l,f,t,n_,ie),ie.delete(f)),l}function Tw(l){return ku(l)?t:l}function r_(l,f,_,L,Z,ie){var ge=_&F,Ve=l.length,Ie=f.length;if(Ve!=Ie&&!(ge&&Ie>Ve))return!1;var tt=ie.get(l),st=ie.get(f);if(tt&&st)return tt==f&&st==l;var ot=-1,wt=!0,kt=_&K?new Zo:t;for(ie.set(l,f),ie.set(f,l);++ot<Ve;){var Xt=l[ot],_i=f[ot];if(L)var jt=ge?L(_i,Xt,ot,f,l,ie):L(Xt,_i,ot,l,f,ie);if(jt!==t){if(jt)continue;wt=!1;break}if(kt){if(!gu(f,function(Ei,Mi){if(!ts(kt,Mi)&&(Xt===Ei||Z(Xt,Ei,_,L,ie)))return kt.push(Mi)})){wt=!1;break}}else if(!(Xt===_i||Z(Xt,_i,_,L,ie))){wt=!1;break}}return ie.delete(l),ie.delete(f),wt}function Iw(l,f,_,L,Z,ie,ge){switch(_){case d:if(l.byteLength!=f.byteLength||l.byteOffset!=f.byteOffset)return!1;l=l.buffer,f=f.buffer;case h:return!(l.byteLength!=f.byteLength||!ie(new Fc(l),new Fc(f)));case Vs:case Gt:case js:return na(+l,+f);case ft:return l.name==f.name&&l.message==f.message;case ve:case Ue:return l==f+"";case Ki:var Ve=Ya;case rt:var Ie=L&F;if(Ve||(Ve=Wo),l.size!=f.size&&!Ie)return!1;var tt=ge.get(l);if(tt)return tt==f;L|=K,ge.set(l,f);var st=r_(Ve(l),Ve(f),L,Z,ie,ge);return ge.delete(l),st;case je:if(wu)return wu.call(l)==wu.call(f)}return!1}function xw(l,f,_,L,Z,ie){var ge=_&F,Ve=Fp(l),Ie=Ve.length,tt=Fp(f),st=tt.length;if(Ie!=st&&!ge)return!1;for(var ot=Ie;ot--;){var wt=Ve[ot];if(!(ge?wt in f:is.call(f,wt)))return!1}var kt=ie.get(l),Xt=ie.get(f);if(kt&&Xt)return kt==f&&Xt==l;var _i=!0;ie.set(l,f),ie.set(f,l);for(var jt=ge;++ot<Ie;){wt=Ve[ot];var Ei=l[wt],Mi=f[wt];if(L)var wr=ge?L(Mi,Ei,wt,f,l,ie):L(Ei,Mi,wt,l,f,ie);if(!(wr===t?Ei===Mi||Z(Ei,Mi,_,L,ie):wr)){_i=!1;break}jt||(jt=wt=="constructor")}if(_i&&!jt){var Qn=l.constructor,Cr=f.constructor;Qn!=Cr&&"constructor"in l&&"constructor"in f&&!(typeof Qn=="function"&&Qn instanceof Qn&&typeof Cr=="function"&&Cr instanceof Cr)&&(_i=!1)}return ie.delete(l),ie.delete(f),_i}function $a(l){return Xp(c_(l,t,b_),l+"")}function Fp(l){return Cy(l,mn,Up)}function zp(l){return Cy(l,lr,a_)}var Hp=Gc?function(l){return Gc.get(l)}:og;function ad(l){for(var f=l.name+"",_=rh[f],L=is.call(rh,f)?_.length:0;L--;){var Z=_[L],ie=Z.func;if(ie==null||ie==l)return Z.name}return f}function hh(l){var f=is.call(ee,"placeholder")?ee:l;return f.placeholder}function Ut(){var l=ee.iteratee||rg;return l=l===rg?Dy:l,arguments.length?l(arguments[0],arguments[1]):l}function od(l,f){var _=l.__data__;return qw(f)?_[typeof f=="string"?"string":"hash"]:_.map}function Kp(l){for(var f=mn(l),_=f.length;_--;){var L=f[_],Z=l[L];f[_]=[L,Z,h_(Z)]}return f}function el(l,f){var _=yu(l,f);return Ey(_)?_:t}function Lw(l){var f=is.call(l,jo),_=l[jo];try{l[jo]=t;var L=!0}catch{}var Z=Oc.call(l);return L&&(f?l[jo]=_:delete l[jo]),Z}var Up=yp?function(l){return l==null?[]:(l=bt(l),Aa(yp(l),function(f){return dy.call(l,f)}))}:lg,a_=yp?function(l){for(var f=[];l;)ba(f,Up(l)),l=zc(l);return f}:lg,qn=Xn;(_p&&qn(new _p(new ArrayBuffer(1)))!=d||vu&&qn(new vu)!=Ki||Ap&&qn(Ap.resolve())!=le||nh&&qn(new nh)!=rt||Vu&&qn(new Vu)!=Rt)&&(qn=function(l){var f=Xn(l),_=f==ae?l.constructor:t,L=_?tl(_):"";if(L)switch(L){case pS:return d;case gS:return Ki;case mS:return le;case yS:return rt;case _S:return Rt}return f});function kw(l,f,_){for(var L=-1,Z=_.length;++L<Z;){var ie=_[L],ge=ie.size;switch(ie.type){case"drop":l+=ge;break;case"dropRight":f-=ge;break;case"take":f=On(f,l+ge);break;case"takeRight":l=un(l,f-ge);break}}return{start:l,end:f}}function Bw(l){var f=l.match(Ae);return f?f[1].split(Ee):[]}function o_(l,f,_){f=So(f,l);for(var L=-1,Z=f.length,ie=!1;++L<Z;){var ge=Ca(f[L]);if(!(ie=l!=null&&_(l,ge)))break;l=l[ge]}return ie||++L!=Z?ie:(Z=l==null?0:l.length,!!Z&&pd(Z)&&eo(ge,Z)&&(ci(l)||il(l)))}function Rw(l){var f=l.length,_=new l.constructor(f);return f&&typeof l[0]=="string"&&is.call(l,"index")&&(_.index=l.index,_.input=l.input),_}function l_(l){return typeof l.constructor=="function"&&!xu(l)?ah(zc(l)):{}}function Nw(l,f,_){var L=l.constructor;switch(f){case h:return Mp(l);case Vs:case Gt:return new L(+l);case d:return Aw(l,_);case m:case y:case v:case S:case w:case E:case I:case N:case q:return Uy(l,_);case Ki:return new L;case js:case Ue:return new L(l);case ve:return bw(l);case rt:return new L;case je:return vw(l)}}function Mw(l,f){var _=f.length;if(!_)return l;var L=_-1;return f[L]=(_>1?"& ":"")+f[L],f=f.join(_>2?", ":" "),l.replace(ye,`{
/* [wrapped with `+f+`] */
`)}function Ow(l){return ci(l)||il(l)||!!(fy&&l&&l[fy])}function eo(l,f){var _=typeof l;return f=f??at,!!f&&(_=="number"||_!="symbol"&&St.test(l))&&l>-1&&l%1==0&&l<f}function jn(l,f,_){if(!Ls(_))return!1;var L=typeof f;return(L=="number"?or(_)&&eo(f,_.length):L=="string"&&f in _)?na(_[f],l):!1}function Yp(l,f){if(ci(l))return!1;var _=typeof l;return _=="number"||_=="symbol"||_=="boolean"||l==null||Sr(l)?!0:G.test(l)||!J.test(l)||f!=null&&l in bt(f)}function qw(l){var f=typeof l;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?l!=="__proto__":l===null}function Gp(l){var f=ad(l),_=ee[f];if(typeof _!="function"||!(f in ki.prototype))return!1;if(l===_)return!0;var L=Hp(_);return!!L&&l===L[0]}function Fw(l){return!!hy&&hy in l}var zw=Xa?to:hg;function xu(l){var f=l&&l.constructor,_=typeof f=="function"&&f.prototype||Va;return l===_}function h_(l){return l===l&&!Ls(l)}function u_(l,f){return function(_){return _==null?!1:_[l]===f&&(f!==t||l in bt(_))}}function Hw(l){var f=dd(l,function(L){return _.size===g&&_.clear(),L}),_=f.cache;return f}function Kw(l,f){var _=l[1],L=f[1],Z=_|L,ie=Z<(M|U|Ce),ge=L==Ce&&_==re||L==Ce&&_==ze&&l[7].length<=f[8]||L==(Ce|ze)&&f[7].length<=f[8]&&_==re;if(!(ie||ge))return l;L&M&&(l[2]=f[2],Z|=_&M?0:$);var Ve=f[3];if(Ve){var Ie=l[3];l[3]=Ie?Gy(Ie,Ve,f[4]):Ve,l[4]=Ie?ia(l[3],A):f[4]}return Ve=f[5],Ve&&(Ie=l[5],l[5]=Ie?Wy(Ie,Ve,f[6]):Ve,l[6]=Ie?ia(l[5],A):f[6]),Ve=f[7],Ve&&(l[7]=Ve),L&Ce&&(l[8]=l[8]==null?f[8]:On(l[8],f[8])),l[9]==null&&(l[9]=f[9]),l[0]=f[0],l[1]=Z,l}function Uw(l){var f=[];if(l!=null)for(var _ in bt(l))f.push(_);return f}function Yw(l){return Oc.call(l)}function c_(l,f,_){return f=un(f===t?l.length-1:f,0),function(){for(var L=arguments,Z=-1,ie=un(L.length-f,0),ge=qe(ie);++Z<ie;)ge[Z]=L[f+Z];Z=-1;for(var Ve=qe(f+1);++Z<f;)Ve[Z]=L[Z];return Ve[f]=_(ge),Wi(l,this,Ve)}}function d_(l,f){return f.length<2?l:$o(l,qr(f,0,-1))}function Gw(l,f){for(var _=l.length,L=On(f.length,_),Z=ar(l);L--;){var ie=f[L];l[L]=eo(ie,_)?Z[ie]:t}return l}function Wp(l,f){if(!(f==="constructor"&&typeof l[f]=="function")&&f!="__proto__")return l[f]}var f_=g_(Ny),Lu=oS||function(l,f){return ln.setTimeout(l,f)},Xp=g_(gw);function p_(l,f,_){var L=f+"";return Xp(l,Mw(L,Ww(Bw(L),_)))}function g_(l){var f=0,_=0;return function(){var L=cS(),Z=Fe-(L-_);if(_=L,Z>0){if(++f>=Qe)return arguments[0]}else f=0;return l.apply(t,arguments)}}function ld(l,f){var _=-1,L=l.length,Z=L-1;for(f=f===t?L:f;++_<f;){var ie=Ip(_,Z),ge=l[ie];l[ie]=l[_],l[_]=ge}return l.length=f,l}var m_=Hw(function(l){var f=[];return l.charCodeAt(0)===46&&f.push(""),l.replace(se,function(_,L,Z,ie){f.push(Z?ie.replace(it,"$1"):L||_)}),f});function Ca(l){if(typeof l=="string"||Sr(l))return l;var f=l+"";return f=="0"&&1/l==-1/0?"-0":f}function tl(l){if(l!=null){try{return sh.call(l)}catch{}try{return l+""}catch{}}return""}function Ww(l,f){return Nn(Ni,function(_){var L="_."+_[0];f&_[1]&&!Xl(l,L)&&l.push(L)}),l.sort()}function y_(l){if(l instanceof ki)return l.clone();var f=new Mr(l.__wrapped__,l.__chain__);return f.__actions__=ar(l.__actions__),f.__index__=l.__index__,f.__values__=l.__values__,f}function Xw(l,f,_){(_?jn(l,f,_):f===t)?f=1:f=un(gi(f),0);var L=l==null?0:l.length;if(!L||f<1)return[];for(var Z=0,ie=0,ge=qe(Uc(L/f));Z<L;)ge[ie++]=qr(l,Z,Z+=f);return ge}function jw(l){for(var f=-1,_=l==null?0:l.length,L=0,Z=[];++f<_;){var ie=l[f];ie&&(Z[L++]=ie)}return Z}function Qw(){var l=arguments.length;if(!l)return[];for(var f=qe(l-1),_=arguments[0],L=l;L--;)f[L-1]=arguments[L];return ba(ci(_)?ar(_):[_],wn(f,1))}var Zw=vi(function(l,f){return Qs(l)?Pu(l,wn(f,1,Qs,!0)):[]}),Jw=vi(function(l,f){var _=Fr(f);return Qs(_)&&(_=t),Qs(l)?Pu(l,wn(f,1,Qs,!0),Ut(_,2)):[]}),$w=vi(function(l,f){var _=Fr(f);return Qs(_)&&(_=t),Qs(l)?Pu(l,wn(f,1,Qs,!0),t,_):[]});function eC(l,f,_){var L=l==null?0:l.length;return L?(f=_||f===t?1:gi(f),qr(l,f<0?0:f,L)):[]}function tC(l,f,_){var L=l==null?0:l.length;return L?(f=_||f===t?1:gi(f),f=L-f,qr(l,0,f<0?0:f)):[]}function iC(l,f){return l&&l.length?ed(l,Ut(f,3),!0,!0):[]}function sC(l,f){return l&&l.length?ed(l,Ut(f,3),!0):[]}function nC(l,f,_,L){var Z=l==null?0:l.length;return Z?(_&&typeof _!="number"&&jn(l,f,_)&&(_=0,L=Z),QS(l,f,_,L)):[]}function __(l,f,_){var L=l==null?0:l.length;if(!L)return-1;var Z=_==null?0:gi(_);return Z<0&&(Z=un(L+Z,0)),jl(l,Ut(f,3),Z)}function A_(l,f,_){var L=l==null?0:l.length;if(!L)return-1;var Z=L-1;return _!==t&&(Z=gi(_),Z=_<0?un(L+Z,0):On(Z,L-1)),jl(l,Ut(f,3),Z,!0)}function b_(l){var f=l==null?0:l.length;return f?wn(l,1):[]}function rC(l){var f=l==null?0:l.length;return f?wn(l,Lt):[]}function aC(l,f){var _=l==null?0:l.length;return _?(f=f===t?1:gi(f),wn(l,f)):[]}function oC(l){for(var f=-1,_=l==null?0:l.length,L={};++f<_;){var Z=l[f];L[Z[0]]=Z[1]}return L}function v_(l){return l&&l.length?l[0]:t}function lC(l,f,_){var L=l==null?0:l.length;if(!L)return-1;var Z=_==null?0:gi(_);return Z<0&&(Z=un(L+Z,0)),Ka(l,f,Z)}function hC(l){var f=l==null?0:l.length;return f?qr(l,0,-1):[]}var uC=vi(function(l){var f=ys(l,Rp);return f.length&&f[0]===l[0]?Cp(f):[]}),cC=vi(function(l){var f=Fr(l),_=ys(l,Rp);return f===Fr(_)?f=t:_.pop(),_.length&&_[0]===l[0]?Cp(_,Ut(f,2)):[]}),dC=vi(function(l){var f=Fr(l),_=ys(l,Rp);return f=typeof f=="function"?f:t,f&&_.pop(),_.length&&_[0]===l[0]?Cp(_,t,f):[]});function fC(l,f){return l==null?"":hS.call(l,f)}function Fr(l){var f=l==null?0:l.length;return f?l[f-1]:t}function pC(l,f,_){var L=l==null?0:l.length;if(!L)return-1;var Z=L;return _!==t&&(Z=gi(_),Z=Z<0?un(L+Z,0):On(Z,L-1)),f===f?fp(l,f,Z):jl(l,Ko,Z,!0)}function gC(l,f){return l&&l.length?Ly(l,gi(f)):t}var mC=vi(V_);function V_(l,f){return l&&l.length&&f&&f.length?Tp(l,f):l}function yC(l,f,_){return l&&l.length&&f&&f.length?Tp(l,f,Ut(_,2)):l}function _C(l,f,_){return l&&l.length&&f&&f.length?Tp(l,f,t,_):l}var AC=$a(function(l,f){var _=l==null?0:l.length,L=vp(l,f);return Ry(l,ys(f,function(Z){return eo(Z,_)?+Z:Z}).sort(Yy)),L});function bC(l,f){var _=[];if(!(l&&l.length))return _;var L=-1,Z=[],ie=l.length;for(f=Ut(f,3);++L<ie;){var ge=l[L];f(ge,L,l)&&(_.push(ge),Z.push(L))}return Ry(l,Z),_}function jp(l){return l==null?l:fS.call(l)}function vC(l,f,_){var L=l==null?0:l.length;return L?(_&&typeof _!="number"&&jn(l,f,_)?(f=0,_=L):(f=f==null?0:gi(f),_=_===t?L:gi(_)),qr(l,f,_)):[]}function VC(l,f){return $c(l,f)}function SC(l,f,_){return Lp(l,f,Ut(_,2))}function wC(l,f){var _=l==null?0:l.length;if(_){var L=$c(l,f);if(L<_&&na(l[L],f))return L}return-1}function CC(l,f){return $c(l,f,!0)}function PC(l,f,_){return Lp(l,f,Ut(_,2),!0)}function EC(l,f){var _=l==null?0:l.length;if(_){var L=$c(l,f,!0)-1;if(na(l[L],f))return L}return-1}function DC(l){return l&&l.length?My(l):[]}function TC(l,f){return l&&l.length?My(l,Ut(f,2)):[]}function IC(l){var f=l==null?0:l.length;return f?qr(l,1,f):[]}function xC(l,f,_){return l&&l.length?(f=_||f===t?1:gi(f),qr(l,0,f<0?0:f)):[]}function LC(l,f,_){var L=l==null?0:l.length;return L?(f=_||f===t?1:gi(f),f=L-f,qr(l,f<0?0:f,L)):[]}function kC(l,f){return l&&l.length?ed(l,Ut(f,3),!1,!0):[]}function BC(l,f){return l&&l.length?ed(l,Ut(f,3)):[]}var RC=vi(function(l){return Vo(wn(l,1,Qs,!0))}),NC=vi(function(l){var f=Fr(l);return Qs(f)&&(f=t),Vo(wn(l,1,Qs,!0),Ut(f,2))}),MC=vi(function(l){var f=Fr(l);return f=typeof f=="function"?f:t,Vo(wn(l,1,Qs,!0),t,f)});function OC(l){return l&&l.length?Vo(l):[]}function qC(l,f){return l&&l.length?Vo(l,Ut(f,2)):[]}function FC(l,f){return f=typeof f=="function"?f:t,l&&l.length?Vo(l,t,f):[]}function Qp(l){if(!(l&&l.length))return[];var f=0;return l=Aa(l,function(_){if(Qs(_))return f=un(_.length,f),!0}),$l(f,function(_){return ys(l,Ql(_))})}function S_(l,f){if(!(l&&l.length))return[];var _=Qp(l);return f==null?_:ys(_,function(L){return Wi(f,t,L)})}var zC=vi(function(l,f){return Qs(l)?Pu(l,f):[]}),HC=vi(function(l){return Bp(Aa(l,Qs))}),KC=vi(function(l){var f=Fr(l);return Qs(f)&&(f=t),Bp(Aa(l,Qs),Ut(f,2))}),UC=vi(function(l){var f=Fr(l);return f=typeof f=="function"?f:t,Bp(Aa(l,Qs),t,f)}),YC=vi(Qp);function GC(l,f){return zy(l||[],f||[],Cu)}function WC(l,f){return zy(l||[],f||[],Tu)}var XC=vi(function(l){var f=l.length,_=f>1?l[f-1]:t;return _=typeof _=="function"?(l.pop(),_):t,S_(l,_)});function w_(l){var f=ee(l);return f.__chain__=!0,f}function jC(l,f){return f(l),l}function hd(l,f){return f(l)}var QC=$a(function(l){var f=l.length,_=f?l[0]:0,L=this.__wrapped__,Z=function(ie){return vp(ie,l)};return f>1||this.__actions__.length||!(L instanceof ki)||!eo(_)?this.thru(Z):(L=L.slice(_,+_+(f?1:0)),L.__actions__.push({func:hd,args:[Z],thisArg:t}),new Mr(L,this.__chain__).thru(function(ie){return f&&!ie.length&&ie.push(t),ie}))});function ZC(){return w_(this)}function JC(){return new Mr(this.value(),this.__chain__)}function $C(){this.__values__===t&&(this.__values__=O_(this.value()));var l=this.__index__>=this.__values__.length,f=l?t:this.__values__[this.__index__++];return{done:l,value:f}}function eP(){return this}function tP(l){for(var f,_=this;_ instanceof Xc;){var L=y_(_);L.__index__=0,L.__values__=t,f?Z.__wrapped__=L:f=L;var Z=L;_=_.__wrapped__}return Z.__wrapped__=l,f}function iP(){var l=this.__wrapped__;if(l instanceof ki){var f=l;return this.__actions__.length&&(f=new ki(this)),f=f.reverse(),f.__actions__.push({func:hd,args:[jp],thisArg:t}),new Mr(f,this.__chain__)}return this.thru(jp)}function sP(){return Fy(this.__wrapped__,this.__actions__)}var nP=td(function(l,f,_){is.call(l,_)?++l[_]:Za(l,_,1)});function rP(l,f,_){var L=ci(l)?Nc:jS;return _&&jn(l,f,_)&&(f=t),L(l,Ut(f,3))}function aP(l,f){var _=ci(l)?Aa:Sy;return _(l,Ut(f,3))}var oP=Zy(__),lP=Zy(A_);function hP(l,f){return wn(ud(l,f),1)}function uP(l,f){return wn(ud(l,f),Lt)}function cP(l,f,_){return _=_===t?1:gi(_),wn(ud(l,f),_)}function C_(l,f){var _=ci(l)?Nn:vo;return _(l,Ut(f,3))}function P_(l,f){var _=ci(l)?mo:Vy;return _(l,Ut(f,3))}var dP=td(function(l,f,_){is.call(l,_)?l[_].push(f):Za(l,_,[f])});function fP(l,f,_,L){l=or(l)?l:ch(l),_=_&&!L?gi(_):0;var Z=l.length;return _<0&&(_=un(Z+_,0)),gd(l)?_<=Z&&l.indexOf(f,_)>-1:!!Z&&Ka(l,f,_)>-1}var pP=vi(function(l,f,_){var L=-1,Z=typeof f=="function",ie=or(l)?qe(l.length):[];return vo(l,function(ge){ie[++L]=Z?Wi(f,ge,_):Eu(ge,f,_)}),ie}),gP=td(function(l,f,_){Za(l,_,f)});function ud(l,f){var _=ci(l)?ys:Ty;return _(l,Ut(f,3))}function mP(l,f,_,L){return l==null?[]:(ci(f)||(f=f==null?[]:[f]),_=L?t:_,ci(_)||(_=_==null?[]:[_]),ky(l,f,_))}var yP=td(function(l,f,_){l[_?0:1].push(f)},function(){return[[],[]]});function _P(l,f,_){var L=ci(l)?pu:Li,Z=arguments.length<3;return L(l,Ut(f,4),_,Z,vo)}function AP(l,f,_){var L=ci(l)?up:Li,Z=arguments.length<3;return L(l,Ut(f,4),_,Z,Vy)}function bP(l,f){var _=ci(l)?Aa:Sy;return _(l,fd(Ut(f,3)))}function vP(l){var f=ci(l)?_y:fw;return f(l)}function VP(l,f,_){(_?jn(l,f,_):f===t)?f=1:f=gi(f);var L=ci(l)?US:pw;return L(l,f)}function SP(l){var f=ci(l)?YS:mw;return f(l)}function wP(l){if(l==null)return 0;if(or(l))return gd(l)?Ao(l):l.length;var f=qn(l);return f==Ki||f==rt?l.size:Ep(l).length}function CP(l,f,_){var L=ci(l)?gu:yw;return _&&jn(l,f,_)&&(f=t),L(l,Ut(f,3))}var PP=vi(function(l,f){if(l==null)return[];var _=f.length;return _>1&&jn(l,f[0],f[1])?f=[]:_>2&&jn(f[0],f[1],f[2])&&(f=[f[0]]),ky(l,wn(f,1),[])}),cd=aS||function(){return ln.Date.now()};function EP(l,f){if(typeof f!="function")throw new li(o);return l=gi(l),function(){if(--l<1)return f.apply(this,arguments)}}function E_(l,f,_){return f=_?t:f,f=l&&f==null?l.length:f,Ja(l,Ce,t,t,t,t,f)}function D_(l,f){var _;if(typeof f!="function")throw new li(o);return l=gi(l),function(){return--l>0&&(_=f.apply(this,arguments)),l<=1&&(f=t),_}}var Zp=vi(function(l,f,_){var L=M;if(_.length){var Z=ia(_,hh(Zp));L|=ce}return Ja(l,L,f,_,Z)}),T_=vi(function(l,f,_){var L=M|U;if(_.length){var Z=ia(_,hh(T_));L|=ce}return Ja(f,L,l,_,Z)});function I_(l,f,_){f=_?t:f;var L=Ja(l,re,t,t,t,t,t,f);return L.placeholder=I_.placeholder,L}function x_(l,f,_){f=_?t:f;var L=Ja(l,pe,t,t,t,t,t,f);return L.placeholder=x_.placeholder,L}function L_(l,f,_){var L,Z,ie,ge,Ve,Ie,tt=0,st=!1,ot=!1,wt=!0;if(typeof l!="function")throw new li(o);f=zr(f)||0,Ls(_)&&(st=!!_.leading,ot="maxWait"in _,ie=ot?un(zr(_.maxWait)||0,f):ie,wt="trailing"in _?!!_.trailing:wt);function kt(Zs){var ra=L,so=Z;return L=Z=t,tt=Zs,ge=l.apply(so,ra),ge}function Xt(Zs){return tt=Zs,Ve=Lu(Ei,f),st?kt(Zs):ge}function _i(Zs){var ra=Zs-Ie,so=Zs-tt,Z_=f-ra;return ot?On(Z_,ie-so):Z_}function jt(Zs){var ra=Zs-Ie,so=Zs-tt;return Ie===t||ra>=f||ra<0||ot&&so>=ie}function Ei(){var Zs=cd();if(jt(Zs))return Mi(Zs);Ve=Lu(Ei,_i(Zs))}function Mi(Zs){return Ve=t,wt&&L?kt(Zs):(L=Z=t,ge)}function wr(){Ve!==t&&Hy(Ve),tt=0,L=Ie=Z=Ve=t}function Qn(){return Ve===t?ge:Mi(cd())}function Cr(){var Zs=cd(),ra=jt(Zs);if(L=arguments,Z=this,Ie=Zs,ra){if(Ve===t)return Xt(Ie);if(ot)return Hy(Ve),Ve=Lu(Ei,f),kt(Ie)}return Ve===t&&(Ve=Lu(Ei,f)),ge}return Cr.cancel=wr,Cr.flush=Qn,Cr}var DP=vi(function(l,f){return vy(l,1,f)}),TP=vi(function(l,f,_){return vy(l,zr(f)||0,_)});function IP(l){return Ja(l,be)}function dd(l,f){if(typeof l!="function"||f!=null&&typeof f!="function")throw new li(o);var _=function(){var L=arguments,Z=f?f.apply(this,L):L[0],ie=_.cache;if(ie.has(Z))return ie.get(Z);var ge=l.apply(this,L);return _.cache=ie.set(Z,ge)||ie,ge};return _.cache=new(dd.Cache||Qa),_}dd.Cache=Qa;function fd(l){if(typeof l!="function")throw new li(o);return function(){var f=arguments;switch(f.length){case 0:return!l.call(this);case 1:return!l.call(this,f[0]);case 2:return!l.call(this,f[0],f[1]);case 3:return!l.call(this,f[0],f[1],f[2])}return!l.apply(this,f)}}function xP(l){return D_(2,l)}var LP=_w(function(l,f){f=f.length==1&&ci(f[0])?ys(f[0],Ot(Ut())):ys(wn(f,1),Ot(Ut()));var _=f.length;return vi(function(L){for(var Z=-1,ie=On(L.length,_);++Z<ie;)L[Z]=f[Z].call(this,L[Z]);return Wi(l,this,L)})}),Jp=vi(function(l,f){var _=ia(f,hh(Jp));return Ja(l,ce,t,f,_)}),k_=vi(function(l,f){var _=ia(f,hh(k_));return Ja(l,T,t,f,_)}),kP=$a(function(l,f){return Ja(l,ze,t,t,t,f)});function BP(l,f){if(typeof l!="function")throw new li(o);return f=f===t?f:gi(f),vi(l,f)}function RP(l,f){if(typeof l!="function")throw new li(o);return f=f==null?0:un(gi(f),0),vi(function(_){var L=_[f],Z=wo(_,0,f);return L&&ba(Z,L),Wi(l,this,Z)})}function NP(l,f,_){var L=!0,Z=!0;if(typeof l!="function")throw new li(o);return Ls(_)&&(L="leading"in _?!!_.leading:L,Z="trailing"in _?!!_.trailing:Z),L_(l,f,{leading:L,maxWait:f,trailing:Z})}function MP(l){return E_(l,1)}function OP(l,f){return Jp(Np(f),l)}function qP(){if(!arguments.length)return[];var l=arguments[0];return ci(l)?l:[l]}function FP(l){return Or(l,P)}function zP(l,f){return f=typeof f=="function"?f:t,Or(l,P,f)}function HP(l){return Or(l,C|P)}function KP(l,f){return f=typeof f=="function"?f:t,Or(l,C|P,f)}function UP(l,f){return f==null||by(l,f,mn(f))}function na(l,f){return l===f||l!==l&&f!==f}var YP=rd(wp),GP=rd(function(l,f){return l>=f}),il=Py(function(){return arguments}())?Py:function(l){return Ks(l)&&is.call(l,"callee")&&!dy.call(l,"callee")},ci=qe.isArray,WP=zo?Ot(zo):tw;function or(l){return l!=null&&pd(l.length)&&!to(l)}function Qs(l){return Ks(l)&&or(l)}function XP(l){return l===!0||l===!1||Ks(l)&&Xn(l)==Vs}var Co=lS||hg,jP=za?Ot(za):iw;function QP(l){return Ks(l)&&l.nodeType===1&&!ku(l)}function ZP(l){if(l==null)return!0;if(or(l)&&(ci(l)||typeof l=="string"||typeof l.splice=="function"||Co(l)||uh(l)||il(l)))return!l.length;var f=qn(l);if(f==Ki||f==rt)return!l.size;if(xu(l))return!Ep(l).length;for(var _ in l)if(is.call(l,_))return!1;return!0}function JP(l,f){return Du(l,f)}function $P(l,f,_){_=typeof _=="function"?_:t;var L=_?_(l,f):t;return L===t?Du(l,f,t,_):!!L}function $p(l){if(!Ks(l))return!1;var f=Xn(l);return f==ft||f==fi||typeof l.message=="string"&&typeof l.name=="string"&&!ku(l)}function eE(l){return typeof l=="number"&&py(l)}function to(l){if(!Ls(l))return!1;var f=Xn(l);return f==vn||f==Ps||f==qi||f==me}function B_(l){return typeof l=="number"&&l==gi(l)}function pd(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=at}function Ls(l){var f=typeof l;return l!=null&&(f=="object"||f=="function")}function Ks(l){return l!=null&&typeof l=="object"}var R_=Ho?Ot(Ho):nw;function tE(l,f){return l===f||Pp(l,f,Kp(f))}function iE(l,f,_){return _=typeof _=="function"?_:t,Pp(l,f,Kp(f),_)}function sE(l){return N_(l)&&l!=+l}function nE(l){if(zw(l))throw new fe(r);return Ey(l)}function rE(l){return l===null}function aE(l){return l==null}function N_(l){return typeof l=="number"||Ks(l)&&Xn(l)==js}function ku(l){if(!Ks(l)||Xn(l)!=ae)return!1;var f=zc(l);if(f===null)return!0;var _=is.call(f,"constructor")&&f.constructor;return typeof _=="function"&&_ instanceof _&&sh.call(_)==iS}var eg=cu?Ot(cu):rw;function oE(l){return B_(l)&&l>=-9007199254740991&&l<=at}var M_=_a?Ot(_a):aw;function gd(l){return typeof l=="string"||!ci(l)&&Ks(l)&&Xn(l)==Ue}function Sr(l){return typeof l=="symbol"||Ks(l)&&Xn(l)==je}var uh=du?Ot(du):ow;function lE(l){return l===t}function hE(l){return Ks(l)&&qn(l)==Rt}function uE(l){return Ks(l)&&Xn(l)==a}var cE=rd(Dp),dE=rd(function(l,f){return l<=f});function O_(l){if(!l)return[];if(or(l))return gd(l)?Wn(l):ar(l);if(bu&&l[bu])return Go(l[bu]());var f=qn(l),_=f==Ki?Ya:f==rt?Wo:ch;return _(l)}function io(l){if(!l)return l===0?l:0;if(l=zr(l),l===Lt||l===-1/0){var f=l<0?-1:1;return f*Pe}return l===l?l:0}function gi(l){var f=io(l),_=f%1;return f===f?_?f-_:f:0}function q_(l){return l?Jo(gi(l),0,gt):0}function zr(l){if(typeof l=="number")return l;if(Sr(l))return $e;if(Ls(l)){var f=typeof l.valueOf=="function"?l.valueOf():l;l=Ls(f)?f+"":f}if(typeof l!="string")return l===0?l:+l;l=ea(l);var _=Ke.test(l);return _||yt.test(l)?ma(l.slice(2),_?2:8):vt.test(l)?$e:+l}function F_(l){return wa(l,lr(l))}function fE(l){return l?Jo(gi(l),-9007199254740991,at):l===0?l:0}function Ji(l){return l==null?"":Vr(l)}var pE=oh(function(l,f){if(xu(f)||or(f)){wa(f,mn(f),l);return}for(var _ in f)is.call(f,_)&&Cu(l,_,f[_])}),z_=oh(function(l,f){wa(f,lr(f),l)}),md=oh(function(l,f,_,L){wa(f,lr(f),l,L)}),gE=oh(function(l,f,_,L){wa(f,mn(f),l,L)}),mE=$a(vp);function yE(l,f){var _=ah(l);return f==null?_:Ay(_,f)}var _E=vi(function(l,f){l=bt(l);var _=-1,L=f.length,Z=L>2?f[2]:t;for(Z&&jn(f[0],f[1],Z)&&(L=1);++_<L;)for(var ie=f[_],ge=lr(ie),Ve=-1,Ie=ge.length;++Ve<Ie;){var tt=ge[Ve],st=l[tt];(st===t||na(st,Va[tt])&&!is.call(l,tt))&&(l[tt]=ie[tt])}return l}),AE=vi(function(l){return l.push(t,n_),Wi(H_,t,l)});function bE(l,f){return yo(l,Ut(f,3),Sa)}function vE(l,f){return yo(l,Ut(f,3),Sp)}function VE(l,f){return l==null?l:Vp(l,Ut(f,3),lr)}function SE(l,f){return l==null?l:wy(l,Ut(f,3),lr)}function wE(l,f){return l&&Sa(l,Ut(f,3))}function CE(l,f){return l&&Sp(l,Ut(f,3))}function PE(l){return l==null?[]:Zc(l,mn(l))}function EE(l){return l==null?[]:Zc(l,lr(l))}function tg(l,f,_){var L=l==null?t:$o(l,f);return L===t?_:L}function DE(l,f){return l!=null&&o_(l,f,ZS)}function ig(l,f){return l!=null&&o_(l,f,JS)}var TE=$y(function(l,f,_){f!=null&&typeof f.toString!="function"&&(f=Oc.call(f)),l[f]=_},ng(hr)),IE=$y(function(l,f,_){f!=null&&typeof f.toString!="function"&&(f=Oc.call(f)),is.call(l,f)?l[f].push(_):l[f]=[_]},Ut),xE=vi(Eu);function mn(l){return or(l)?yy(l):Ep(l)}function lr(l){return or(l)?yy(l,!0):lw(l)}function LE(l,f){var _={};return f=Ut(f,3),Sa(l,function(L,Z,ie){Za(_,f(L,Z,ie),L)}),_}function kE(l,f){var _={};return f=Ut(f,3),Sa(l,function(L,Z,ie){Za(_,Z,f(L,Z,ie))}),_}var BE=oh(function(l,f,_){Jc(l,f,_)}),H_=oh(function(l,f,_,L){Jc(l,f,_,L)}),RE=$a(function(l,f){var _={};if(l==null)return _;var L=!1;f=ys(f,function(ie){return ie=So(ie,l),L||(L=ie.length>1),ie}),wa(l,zp(l),_),L&&(_=Or(_,C|D|P,Tw));for(var Z=f.length;Z--;)kp(_,f[Z]);return _});function NE(l,f){return K_(l,fd(Ut(f)))}var ME=$a(function(l,f){return l==null?{}:uw(l,f)});function K_(l,f){if(l==null)return{};var _=ys(zp(l),function(L){return[L]});return f=Ut(f),By(l,_,function(L,Z){return f(L,Z[0])})}function OE(l,f,_){f=So(f,l);var L=-1,Z=f.length;for(Z||(Z=1,l=t);++L<Z;){var ie=l==null?t:l[Ca(f[L])];ie===t&&(L=Z,ie=_),l=to(ie)?ie.call(l):ie}return l}function qE(l,f,_){return l==null?l:Tu(l,f,_)}function FE(l,f,_,L){return L=typeof L=="function"?L:t,l==null?l:Tu(l,f,_,L)}var U_=i_(mn),Y_=i_(lr);function zE(l,f,_){var L=ci(l),Z=L||Co(l)||uh(l);if(f=Ut(f,4),_==null){var ie=l&&l.constructor;Z?_=L?new ie:[]:Ls(l)?_=to(ie)?ah(zc(l)):{}:_={}}return(Z?Nn:Sa)(l,function(ge,Ve,Ie){return f(_,ge,Ve,Ie)}),_}function HE(l,f){return l==null?!0:kp(l,f)}function KE(l,f,_){return l==null?l:qy(l,f,Np(_))}function UE(l,f,_,L){return L=typeof L=="function"?L:t,l==null?l:qy(l,f,Np(_),L)}function ch(l){return l==null?[]:Uo(l,mn(l))}function YE(l){return l==null?[]:Uo(l,lr(l))}function GE(l,f,_){return _===t&&(_=f,f=t),_!==t&&(_=zr(_),_=_===_?_:0),f!==t&&(f=zr(f),f=f===f?f:0),Jo(zr(l),f,_)}function WE(l,f,_){return f=io(f),_===t?(_=f,f=0):_=io(_),l=zr(l),$S(l,f,_)}function XE(l,f,_){if(_&&typeof _!="boolean"&&jn(l,f,_)&&(f=_=t),_===t&&(typeof f=="boolean"?(_=f,f=t):typeof l=="boolean"&&(_=l,l=t)),l===t&&f===t?(l=0,f=1):(l=io(l),f===t?(f=l,l=0):f=io(f)),l>f){var L=l;l=f,f=L}if(_||l%1||f%1){var Z=gy();return On(l+Z*(f-l+ga("1e-"+((Z+"").length-1))),f)}return Ip(l,f)}var jE=lh(function(l,f,_){return f=f.toLowerCase(),l+(_?G_(f):f)});function G_(l){return sg(Ji(l).toLowerCase())}function W_(l){return l=Ji(l),l&&l.replace(Vt,ta).replace(Q,"")}function QE(l,f,_){l=Ji(l),f=Vr(f);var L=l.length;_=_===t?L:Jo(gi(_),0,L);var Z=_;return _-=f.length,_>=0&&l.slice(_,Z)==f}function ZE(l){return l=Ji(l),l&&Y.test(l)?l.replace(W,eh):l}function JE(l){return l=Ji(l),l&&de.test(l)?l.replace(he,"\\$&"):l}var $E=lh(function(l,f,_){return l+(_?"-":"")+f.toLowerCase()}),eD=lh(function(l,f,_){return l+(_?" ":"")+f.toLowerCase()}),tD=Qy("toLowerCase");function iD(l,f,_){l=Ji(l),f=gi(f);var L=f?Ao(l):0;if(!f||L>=f)return l;var Z=(f-L)/2;return nd(Yc(Z),_)+l+nd(Uc(Z),_)}function sD(l,f,_){l=Ji(l),f=gi(f);var L=f?Ao(l):0;return f&&L<f?l+nd(f-L,_):l}function nD(l,f,_){l=Ji(l),f=gi(f);var L=f?Ao(l):0;return f&&L<f?nd(f-L,_)+l:l}function rD(l,f,_){return _||f==null?f=0:f&&(f=+f),dS(Ji(l).replace(_e,""),f||0)}function aD(l,f,_){return(_?jn(l,f,_):f===t)?f=1:f=gi(f),xp(Ji(l),f)}function oD(){var l=arguments,f=Ji(l[0]);return l.length<3?f:f.replace(l[1],l[2])}var lD=lh(function(l,f,_){return l+(_?"_":"")+f.toLowerCase()});function hD(l,f,_){return _&&typeof _!="number"&&jn(l,f,_)&&(f=_=t),_=_===t?gt:_>>>0,_?(l=Ji(l),l&&(typeof f=="string"||f!=null&&!eg(f))&&(f=Vr(f),!f&&_o(l))?wo(Wn(l),0,_):l.split(f,_)):[]}var uD=lh(function(l,f,_){return l+(_?" ":"")+sg(f)});function cD(l,f,_){return l=Ji(l),_=_==null?0:Jo(gi(_),0,l.length),f=Vr(f),l.slice(_,_+f.length)==f}function dD(l,f,_){var L=ee.templateSettings;_&&jn(l,f,_)&&(f=t),l=Ji(l),f=md({},f,L,s_);var Z=md({},f.imports,L.imports,s_),ie=mn(Z),ge=Uo(Z,ie),Ve,Ie,tt=0,st=f.interpolate||Bt,ot="__p += '",wt=Ht((f.escape||Bt).source+"|"+st.source+"|"+(st===j?ht:Bt).source+"|"+(f.evaluate||Bt).source+"|$","g"),kt="//# sourceURL="+(is.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ni+"]")+`
`;l.replace(wt,function(jt,Ei,Mi,wr,Qn,Cr){return Mi||(Mi=wr),ot+=l.slice(tt,Cr).replace(Nt,dp),Ei&&(Ve=!0,ot+=`' +
__e(`+Ei+`) +
'`),Qn&&(Ie=!0,ot+=`';
`+Qn+`;
__p += '`),Mi&&(ot+=`' +
((__t = (`+Mi+`)) == null ? '' : __t) +
'`),tt=Cr+jt.length,jt}),ot+=`';
`;var Xt=is.call(f,"variable")&&f.variable;if(!Xt)ot=`with (obj) {
`+ot+`
}
`;else if(Re.test(Xt))throw new fe(c);ot=(Ie?ot.replace(B,""):ot).replace(k,"$1").replace(X,"$1;"),ot="function("+(Xt||"obj")+`) {
`+(Xt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ve?", __e = _.escape":"")+(Ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ot+`return __p
}`;var _i=j_(function(){return Le(ie,kt+"return "+ot).apply(t,ge)});if(_i.source=ot,$p(_i))throw _i;return _i}function fD(l){return Ji(l).toLowerCase()}function pD(l){return Ji(l).toUpperCase()}function gD(l,f,_){if(l=Ji(l),l&&(_||f===t))return ea(l);if(!l||!(f=Vr(f)))return l;var L=Wn(l),Z=Wn(f),ie=Yo(L,Z),ge=va(L,Z)+1;return wo(L,ie,ge).join("")}function mD(l,f,_){if(l=Ji(l),l&&(_||f===t))return l.slice(0,ih(l)+1);if(!l||!(f=Vr(f)))return l;var L=Wn(l),Z=va(L,Wn(f))+1;return wo(L,0,Z).join("")}function yD(l,f,_){if(l=Ji(l),l&&(_||f===t))return l.replace(_e,"");if(!l||!(f=Vr(f)))return l;var L=Wn(l),Z=Yo(L,Wn(f));return wo(L,Z).join("")}function _D(l,f){var _=Be,L=xe;if(Ls(f)){var Z="separator"in f?f.separator:Z;_="length"in f?gi(f.length):_,L="omission"in f?Vr(f.omission):L}l=Ji(l);var ie=l.length;if(_o(l)){var ge=Wn(l);ie=ge.length}if(_>=ie)return l;var Ve=_-Ao(L);if(Ve<1)return L;var Ie=ge?wo(ge,0,Ve).join(""):l.slice(0,Ve);if(Z===t)return Ie+L;if(ge&&(Ve+=Ie.length-Ve),eg(Z)){if(l.slice(Ve).search(Z)){var tt,st=Ie;for(Z.global||(Z=Ht(Z.source,Ji(mt.exec(Z))+"g")),Z.lastIndex=0;tt=Z.exec(st);)var ot=tt.index;Ie=Ie.slice(0,ot===t?Ve:ot)}}else if(l.indexOf(Vr(Z),Ve)!=Ve){var wt=Ie.lastIndexOf(Z);wt>-1&&(Ie=Ie.slice(0,wt))}return Ie+L}function AD(l){return l=Ji(l),l&&R.test(l)?l.replace(z,pp):l}var bD=lh(function(l,f,_){return l+(_?" ":"")+f.toUpperCase()}),sg=Qy("toUpperCase");function X_(l,f,_){return l=Ji(l),f=_?t:f,f===t?vr(l)?gp(l):Mc(l):l.match(f)||[]}var j_=vi(function(l,f){try{return Wi(l,t,f)}catch(_){return $p(_)?_:new fe(_)}}),vD=$a(function(l,f){return Nn(f,function(_){_=Ca(_),Za(l,_,Zp(l[_],l))}),l});function VD(l){var f=l==null?0:l.length,_=Ut();return l=f?ys(l,function(L){if(typeof L[1]!="function")throw new li(o);return[_(L[0]),L[1]]}):[],vi(function(L){for(var Z=-1;++Z<f;){var ie=l[Z];if(Wi(ie[0],this,L))return Wi(ie[1],this,L)}})}function SD(l){return XS(Or(l,C))}function ng(l){return function(){return l}}function wD(l,f){return l==null||l!==l?f:l}var CD=Jy(),PD=Jy(!0);function hr(l){return l}function rg(l){return Dy(typeof l=="function"?l:Or(l,C))}function ED(l){return Iy(Or(l,C))}function DD(l,f){return xy(l,Or(f,C))}var TD=vi(function(l,f){return function(_){return Eu(_,l,f)}}),ID=vi(function(l,f){return function(_){return Eu(l,_,f)}});function ag(l,f,_){var L=mn(f),Z=Zc(f,L);_==null&&!(Ls(f)&&(Z.length||!L.length))&&(_=f,f=l,l=this,Z=Zc(f,mn(f)));var ie=!(Ls(_)&&"chain"in _)||!!_.chain,ge=to(l);return Nn(Z,function(Ve){var Ie=f[Ve];l[Ve]=Ie,ge&&(l.prototype[Ve]=function(){var tt=this.__chain__;if(ie||tt){var st=l(this.__wrapped__),ot=st.__actions__=ar(this.__actions__);return ot.push({func:Ie,args:arguments,thisArg:l}),st.__chain__=tt,st}return Ie.apply(l,ba([this.value()],arguments))})}),l}function xD(){return ln._===this&&(ln._=sS),this}function og(){}function LD(l){return l=gi(l),vi(function(f){return Ly(f,l)})}var kD=Op(ys),BD=Op(Nc),RD=Op(gu);function Q_(l){return Yp(l)?Ql(Ca(l)):cw(l)}function ND(l){return function(f){return l==null?t:$o(l,f)}}var MD=e_(),OD=e_(!0);function lg(){return[]}function hg(){return!1}function qD(){return{}}function FD(){return""}function zD(){return!0}function HD(l,f){if(l=gi(l),l<1||l>at)return[];var _=gt,L=On(l,gt);f=Ut(f),l-=gt;for(var Z=$l(L,f);++_<l;)f(_);return Z}function KD(l){return ci(l)?ys(l,Ca):Sr(l)?[l]:ar(m_(Ji(l)))}function UD(l){var f=++tS;return Ji(l)+f}var YD=sd(function(l,f){return l+f},0),GD=qp("ceil"),WD=sd(function(l,f){return l/f},1),XD=qp("floor");function jD(l){return l&&l.length?Qc(l,hr,wp):t}function QD(l,f){return l&&l.length?Qc(l,Ut(f,2),wp):t}function ZD(l){return Ua(l,hr)}function JD(l,f){return Ua(l,Ut(f,2))}function $D(l){return l&&l.length?Qc(l,hr,Dp):t}function eT(l,f){return l&&l.length?Qc(l,Ut(f,2),Dp):t}var tT=sd(function(l,f){return l*f},1),iT=qp("round"),sT=sd(function(l,f){return l-f},0);function nT(l){return l&&l.length?Jl(l,hr):0}function rT(l,f){return l&&l.length?Jl(l,Ut(f,2)):0}return ee.after=EP,ee.ary=E_,ee.assign=pE,ee.assignIn=z_,ee.assignInWith=md,ee.assignWith=gE,ee.at=mE,ee.before=D_,ee.bind=Zp,ee.bindAll=vD,ee.bindKey=T_,ee.castArray=qP,ee.chain=w_,ee.chunk=Xw,ee.compact=jw,ee.concat=Qw,ee.cond=VD,ee.conforms=SD,ee.constant=ng,ee.countBy=nP,ee.create=yE,ee.curry=I_,ee.curryRight=x_,ee.debounce=L_,ee.defaults=_E,ee.defaultsDeep=AE,ee.defer=DP,ee.delay=TP,ee.difference=Zw,ee.differenceBy=Jw,ee.differenceWith=$w,ee.drop=eC,ee.dropRight=tC,ee.dropRightWhile=iC,ee.dropWhile=sC,ee.fill=nC,ee.filter=aP,ee.flatMap=hP,ee.flatMapDeep=uP,ee.flatMapDepth=cP,ee.flatten=b_,ee.flattenDeep=rC,ee.flattenDepth=aC,ee.flip=IP,ee.flow=CD,ee.flowRight=PD,ee.fromPairs=oC,ee.functions=PE,ee.functionsIn=EE,ee.groupBy=dP,ee.initial=hC,ee.intersection=uC,ee.intersectionBy=cC,ee.intersectionWith=dC,ee.invert=TE,ee.invertBy=IE,ee.invokeMap=pP,ee.iteratee=rg,ee.keyBy=gP,ee.keys=mn,ee.keysIn=lr,ee.map=ud,ee.mapKeys=LE,ee.mapValues=kE,ee.matches=ED,ee.matchesProperty=DD,ee.memoize=dd,ee.merge=BE,ee.mergeWith=H_,ee.method=TD,ee.methodOf=ID,ee.mixin=ag,ee.negate=fd,ee.nthArg=LD,ee.omit=RE,ee.omitBy=NE,ee.once=xP,ee.orderBy=mP,ee.over=kD,ee.overArgs=LP,ee.overEvery=BD,ee.overSome=RD,ee.partial=Jp,ee.partialRight=k_,ee.partition=yP,ee.pick=ME,ee.pickBy=K_,ee.property=Q_,ee.propertyOf=ND,ee.pull=mC,ee.pullAll=V_,ee.pullAllBy=yC,ee.pullAllWith=_C,ee.pullAt=AC,ee.range=MD,ee.rangeRight=OD,ee.rearg=kP,ee.reject=bP,ee.remove=bC,ee.rest=BP,ee.reverse=jp,ee.sampleSize=VP,ee.set=qE,ee.setWith=FE,ee.shuffle=SP,ee.slice=vC,ee.sortBy=PP,ee.sortedUniq=DC,ee.sortedUniqBy=TC,ee.split=hD,ee.spread=RP,ee.tail=IC,ee.take=xC,ee.takeRight=LC,ee.takeRightWhile=kC,ee.takeWhile=BC,ee.tap=jC,ee.throttle=NP,ee.thru=hd,ee.toArray=O_,ee.toPairs=U_,ee.toPairsIn=Y_,ee.toPath=KD,ee.toPlainObject=F_,ee.transform=zE,ee.unary=MP,ee.union=RC,ee.unionBy=NC,ee.unionWith=MC,ee.uniq=OC,ee.uniqBy=qC,ee.uniqWith=FC,ee.unset=HE,ee.unzip=Qp,ee.unzipWith=S_,ee.update=KE,ee.updateWith=UE,ee.values=ch,ee.valuesIn=YE,ee.without=zC,ee.words=X_,ee.wrap=OP,ee.xor=HC,ee.xorBy=KC,ee.xorWith=UC,ee.zip=YC,ee.zipObject=GC,ee.zipObjectDeep=WC,ee.zipWith=XC,ee.entries=U_,ee.entriesIn=Y_,ee.extend=z_,ee.extendWith=md,ag(ee,ee),ee.add=YD,ee.attempt=j_,ee.camelCase=jE,ee.capitalize=G_,ee.ceil=GD,ee.clamp=GE,ee.clone=FP,ee.cloneDeep=HP,ee.cloneDeepWith=KP,ee.cloneWith=zP,ee.conformsTo=UP,ee.deburr=W_,ee.defaultTo=wD,ee.divide=WD,ee.endsWith=QE,ee.eq=na,ee.escape=ZE,ee.escapeRegExp=JE,ee.every=rP,ee.find=oP,ee.findIndex=__,ee.findKey=bE,ee.findLast=lP,ee.findLastIndex=A_,ee.findLastKey=vE,ee.floor=XD,ee.forEach=C_,ee.forEachRight=P_,ee.forIn=VE,ee.forInRight=SE,ee.forOwn=wE,ee.forOwnRight=CE,ee.get=tg,ee.gt=YP,ee.gte=GP,ee.has=DE,ee.hasIn=ig,ee.head=v_,ee.identity=hr,ee.includes=fP,ee.indexOf=lC,ee.inRange=WE,ee.invoke=xE,ee.isArguments=il,ee.isArray=ci,ee.isArrayBuffer=WP,ee.isArrayLike=or,ee.isArrayLikeObject=Qs,ee.isBoolean=XP,ee.isBuffer=Co,ee.isDate=jP,ee.isElement=QP,ee.isEmpty=ZP,ee.isEqual=JP,ee.isEqualWith=$P,ee.isError=$p,ee.isFinite=eE,ee.isFunction=to,ee.isInteger=B_,ee.isLength=pd,ee.isMap=R_,ee.isMatch=tE,ee.isMatchWith=iE,ee.isNaN=sE,ee.isNative=nE,ee.isNil=aE,ee.isNull=rE,ee.isNumber=N_,ee.isObject=Ls,ee.isObjectLike=Ks,ee.isPlainObject=ku,ee.isRegExp=eg,ee.isSafeInteger=oE,ee.isSet=M_,ee.isString=gd,ee.isSymbol=Sr,ee.isTypedArray=uh,ee.isUndefined=lE,ee.isWeakMap=hE,ee.isWeakSet=uE,ee.join=fC,ee.kebabCase=$E,ee.last=Fr,ee.lastIndexOf=pC,ee.lowerCase=eD,ee.lowerFirst=tD,ee.lt=cE,ee.lte=dE,ee.max=jD,ee.maxBy=QD,ee.mean=ZD,ee.meanBy=JD,ee.min=$D,ee.minBy=eT,ee.stubArray=lg,ee.stubFalse=hg,ee.stubObject=qD,ee.stubString=FD,ee.stubTrue=zD,ee.multiply=tT,ee.nth=gC,ee.noConflict=xD,ee.noop=og,ee.now=cd,ee.pad=iD,ee.padEnd=sD,ee.padStart=nD,ee.parseInt=rD,ee.random=XE,ee.reduce=_P,ee.reduceRight=AP,ee.repeat=aD,ee.replace=oD,ee.result=OE,ee.round=iT,ee.runInContext=Te,ee.sample=vP,ee.size=wP,ee.snakeCase=lD,ee.some=CP,ee.sortedIndex=VC,ee.sortedIndexBy=SC,ee.sortedIndexOf=wC,ee.sortedLastIndex=CC,ee.sortedLastIndexBy=PC,ee.sortedLastIndexOf=EC,ee.startCase=uD,ee.startsWith=cD,ee.subtract=sT,ee.sum=nT,ee.sumBy=rT,ee.template=dD,ee.times=HD,ee.toFinite=io,ee.toInteger=gi,ee.toLength=q_,ee.toLower=fD,ee.toNumber=zr,ee.toSafeInteger=fE,ee.toString=Ji,ee.toUpper=pD,ee.trim=gD,ee.trimEnd=mD,ee.trimStart=yD,ee.truncate=_D,ee.unescape=AD,ee.uniqueId=UD,ee.upperCase=bD,ee.upperFirst=sg,ee.each=C_,ee.eachRight=P_,ee.first=v_,ag(ee,function(){var l={};return Sa(ee,function(f,_){is.call(ee.prototype,_)||(l[_]=f)}),l}(),{chain:!1}),ee.VERSION=i,Nn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){ee[l].placeholder=ee}),Nn(["drop","take"],function(l,f){ki.prototype[l]=function(_){_=_===t?1:un(gi(_),0);var L=this.__filtered__&&!f?new ki(this):this.clone();return L.__filtered__?L.__takeCount__=On(_,L.__takeCount__):L.__views__.push({size:On(_,gt),type:l+(L.__dir__<0?"Right":"")}),L},ki.prototype[l+"Right"]=function(_){return this.reverse()[l](_).reverse()}}),Nn(["filter","map","takeWhile"],function(l,f){var _=f+1,L=_==Ye||_==Me;ki.prototype[l]=function(Z){var ie=this.clone();return ie.__iteratees__.push({iteratee:Ut(Z,3),type:_}),ie.__filtered__=ie.__filtered__||L,ie}}),Nn(["head","last"],function(l,f){var _="take"+(f?"Right":"");ki.prototype[l]=function(){return this[_](1).value()[0]}}),Nn(["initial","tail"],function(l,f){var _="drop"+(f?"":"Right");ki.prototype[l]=function(){return this.__filtered__?new ki(this):this[_](1)}}),ki.prototype.compact=function(){return this.filter(hr)},ki.prototype.find=function(l){return this.filter(l).head()},ki.prototype.findLast=function(l){return this.reverse().find(l)},ki.prototype.invokeMap=vi(function(l,f){return typeof l=="function"?new ki(this):this.map(function(_){return Eu(_,l,f)})}),ki.prototype.reject=function(l){return this.filter(fd(Ut(l)))},ki.prototype.slice=function(l,f){l=gi(l);var _=this;return _.__filtered__&&(l>0||f<0)?new ki(_):(l<0?_=_.takeRight(-l):l&&(_=_.drop(l)),f!==t&&(f=gi(f),_=f<0?_.dropRight(-f):_.take(f-l)),_)},ki.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},ki.prototype.toArray=function(){return this.take(gt)},Sa(ki.prototype,function(l,f){var _=/^(?:filter|find|map|reject)|While$/.test(f),L=/^(?:head|last)$/.test(f),Z=ee[L?"take"+(f=="last"?"Right":""):f],ie=L||/^find/.test(f);Z&&(ee.prototype[f]=function(){var ge=this.__wrapped__,Ve=L?[1]:arguments,Ie=ge instanceof ki,tt=Ve[0],st=Ie||ci(ge),ot=function(Ei){var Mi=Z.apply(ee,ba([Ei],Ve));return L&&wt?Mi[0]:Mi};st&&_&&typeof tt=="function"&&tt.length!=1&&(Ie=st=!1);var wt=this.__chain__,kt=!!this.__actions__.length,Xt=ie&&!wt,_i=Ie&&!kt;if(!ie&&st){ge=_i?ge:new ki(this);var jt=l.apply(ge,Ve);return jt.__actions__.push({func:hd,args:[ot],thisArg:t}),new Mr(jt,wt)}return Xt&&_i?l.apply(this,Ve):(jt=this.thru(ot),Xt?L?jt.value()[0]:jt.value():jt)})}),Nn(["pop","push","shift","sort","splice","unshift"],function(l){var f=Mn[l],_=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",L=/^(?:pop|shift)$/.test(l);ee.prototype[l]=function(){var Z=arguments;if(L&&!this.__chain__){var ie=this.value();return f.apply(ci(ie)?ie:[],Z)}return this[_](function(ge){return f.apply(ci(ge)?ge:[],Z)})}}),Sa(ki.prototype,function(l,f){var _=ee[f];if(_){var L=_.name+"";is.call(rh,L)||(rh[L]=[]),rh[L].push({name:f,func:_})}}),rh[id(t,U).name]=[{name:"wrapper",func:t}],ki.prototype.clone=AS,ki.prototype.reverse=bS,ki.prototype.value=vS,ee.prototype.at=QC,ee.prototype.chain=ZC,ee.prototype.commit=JC,ee.prototype.next=$C,ee.prototype.plant=tP,ee.prototype.reverse=iP,ee.prototype.toJSON=ee.prototype.valueOf=ee.prototype.value=sP,ee.prototype.first=ee.prototype.head,bu&&(ee.prototype[bu]=eP),ee},Ga=mp();ya?((ya.exports=Ga)._=Ga,uu._=Ga):ln._=Ga}).call(zn)})(Yd,Yd.exports);var bT=Yd.exports;const te=qf(bT),d0=(n,e,t)=>{};self.phet=self.phet||{};self.phet.chipper=self.phet.chipper||{};const vT={aa:{locale3:"aar",englishName:"Afar",localizedName:"Qafar af",direction:"ltr"},ab:{locale3:"abk",englishName:"Abkhazian",localizedName:"аҧсуа бызшәа",direction:"ltr"},ac:{locale3:"ace",englishName:"Achinese",localizedName:"بهسا اچيه",direction:"rtl"},ad:{locale3:"ady",englishName:"Adyghe",localizedName:"Адыгабзэ",direction:"ltr"},af:{locale3:"afr",englishName:"Afrikaans",localizedName:"Afrikaans",direction:"ltr"},ag:{locale3:"anp",englishName:"Angika",localizedName:"अंगिका",direction:"ltr"},ah:{locale3:"mas",englishName:"Masai",localizedName:"ɔl Maa",direction:"ltr"},ai:{locale3:"ain",englishName:"Ainu",localizedName:"アイヌ・イタㇰ",direction:"ltr"},aj:{locale3:"nog",englishName:"Nogai",localizedName:"Ногай тили",direction:"ltr"},ak:{locale3:"aka",englishName:"Akan",localizedName:"Akan",direction:"ltr"},ak_FT:{locale3:"fat",englishName:"Fanti",localizedName:"Mfantse",direction:"ltr",fallbackLocales:["ak"]},al:{locale3:"ale",englishName:"Aleut",localizedName:"Уна́ӈам тунуу́",direction:"ltr"},am:{locale3:"amh",englishName:"Amharic",localizedName:"አማርኛ",direction:"ltr"},an:{locale3:"arg",englishName:"Aragonese",localizedName:"aragonés",direction:"ltr"},ao:{locale3:"mak",englishName:"Makasar",localizedName:"ᨅᨔ ᨆᨀᨔᨑ",direction:"ltr"},ap:{locale3:"arp",englishName:"Arapaho",localizedName:"Hinónoʼeitíít",direction:"ltr"},ar:{locale3:"ara",englishName:"Arabic",localizedName:"العربية",direction:"rtl"},ar_AE:{englishName:"Arabic (U.A.E.)",localizedName:"العربية (الإمارات العربية المتحدة)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_BH:{englishName:"Arabic (Bahrain)",localizedName:"العربية (البحرين)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_DJ:{englishName:"Arabic (Djibouti)",localizedName:"العربية (جيبوتي)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_DZ:{englishName:"Arabic (Algeria)",localizedName:"العربية (الجزائر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_EG:{englishName:"Arabic (Egypt)",localizedName:"العربية (مصر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_EH:{englishName:"Arabic (Sahrawi Republic)",localizedName:"العربية (الجمهورية الصحراوية)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_ER:{englishName:"Arabic (Eritrea)",localizedName:"العربية (إريتريا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_IQ:{englishName:"Arabic (Iraq)",localizedName:"العربية (العراق)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_JO:{englishName:"Arabic (Jordan)",localizedName:"العربية (الأردن)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_KM:{englishName:"Arabic (Comoros)",localizedName:"العربية (جزر القمر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_KW:{englishName:"Arabic (Kuwait)",localizedName:"العربية (الكويت)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_LB:{englishName:"Arabic (Lebanon)",localizedName:"العربية (لبنان)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_LY:{englishName:"Arabic (Libya)",localizedName:"العربية (ليبيا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_MA:{locale3:"ary",englishName:"Arabic, Morocco",localizedName:"العربية (المغرب)",direction:"rtl",fallbackLocales:["ar"]},ar_MR:{englishName:"Arabic (Mauritania)",localizedName:"العربية (موريتانيا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_OM:{englishName:"Arabic (Oman)",localizedName:"العربية (عُمان)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_QA:{englishName:"Arabic (Qatar)",localizedName:"العربية (قطر)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SA:{englishName:"Arabic, Saudi Arabia",localizedName:"العربية (السعودية)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SD:{englishName:"Arabic (Sudan)",localizedName:"العربية (السودان)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SO:{englishName:"Arabic (Somalia)",localizedName:"العربية (الصومال)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_SY:{englishName:"Arabic (Syria)",localizedName:"العربية (سوريا)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_TD:{englishName:"Arabic (Chad)",localizedName:"العربية (تشاد)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_TN:{englishName:"Arabic (Tunisia)",localizedName:"العربية (تونس)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},ar_YE:{englishName:"Arabic (Yemen)",localizedName:"العربية (اليمن)",direction:"rtl",fallbackLocales:["ar","ar_MA"]},as:{locale3:"asm",englishName:"Assamese",localizedName:"অসমীয়া",direction:"ltr"},at:{locale3:"ast",englishName:"Asturian",localizedName:"Asturianu",direction:"ltr"},au:{locale3:"awa",englishName:"Awadhi",localizedName:"अवधी",direction:"ltr"},av:{locale3:"ava",englishName:"Avaric",localizedName:"авар мацӀ",direction:"ltr"},aw:{locale3:"arw",englishName:"Arawak",localizedName:"Lokono",direction:"ltr"},ax:{locale3:"mai",englishName:"Maithili",localizedName:"मैथिली",direction:"ltr"},ay:{locale3:"aym",englishName:"Aymara",localizedName:"aymar aru",direction:"ltr"},az:{locale3:"aze",englishName:"Azerbaijani",localizedName:"azərbaycan dili",direction:"ltr"},ba:{locale3:"bak",englishName:"Bashkir",localizedName:"башҡорт теле",direction:"ltr"},bb:{locale3:"bem",englishName:"Bemba",localizedName:"Chibemba",direction:"ltr"},bc:{locale3:"bal",englishName:"Baluchi",localizedName:"بلۏچی",direction:"rtl"},bd:{locale3:"kmb",englishName:"Kimbundu",localizedName:"North Mbundu",direction:"ltr"},be:{locale3:"bel",englishName:"Belarusian",localizedName:"беларуская мова",direction:"ltr"},bg:{locale3:"bul",englishName:"Bulgarian",localizedName:"български език",direction:"ltr"},bi:{locale3:"bis",englishName:"Bislama",localizedName:"Bislama",direction:"ltr"},bj:{locale3:"bej",englishName:"Beja",localizedName:"Bidhaawyeet",direction:"ltr"},bk:{locale3:"bik",englishName:"Bikol",localizedName:"Bikol",direction:"ltr"},bl:{locale3:"ban",englishName:"Balinese",localizedName:"ᬪᬵᬱᬩᬮᬶ",direction:"ltr"},bm:{locale3:"bam",englishName:"Bambara",localizedName:"bamanankan",direction:"ltr"},bn:{locale3:"ben",englishName:"Bengali",localizedName:"বাংলা",direction:"ltr"},bo:{locale3:"bod",englishName:"Tibetan",localizedName:"བོད་ཡིག",direction:"ltr"},bp:{locale3:"bho",englishName:"Bhojpuri",localizedName:"भोजपुरी",direction:"ltr"},bq:{locale3:"bug",englishName:"Buginese",localizedName:"ᨅᨔ ᨕᨘᨁᨗ",direction:"ltr"},br:{locale3:"bre",englishName:"Breton",localizedName:"brezhoneg",direction:"ltr"},bs:{locale3:"bos",englishName:"Bosnian",localizedName:"bosanski jezik",direction:"ltr"},bt:{locale3:"min",englishName:"Minangkabau",localizedName:"Baso Minang",direction:"ltr"},bu:{locale3:"bua",englishName:"Buriat",localizedName:"буряад хэлэн",direction:"ltr"},bx:{locale3:"bnc",englishName:"Bontok",localizedName:"Finallig",direction:"ltr"},by:{locale3:"byn",englishName:"Blin",localizedName:"ብሊና",direction:"ltr"},ca:{locale3:"cat",englishName:"Catalan",localizedName:"Català",direction:"ltr"},cb:{locale3:"ceb",englishName:"Cebuano",localizedName:"Sinugbuanong Binisayâ",direction:"ltr"},cc:{locale3:"chk",englishName:"Chuukese",localizedName:"Trukese",direction:"ltr"},cd:{locale3:"cad",englishName:"Caddo",localizedName:"Hasí:nay",direction:"ltr"},ce:{locale3:"che",englishName:"Chechen",localizedName:"нохчийн мотт",direction:"ltr"},ch:{locale3:"cha",englishName:"Chamorro",localizedName:"Chamoru",direction:"ltr"},ci:{locale3:"scn",englishName:"Sicilian",localizedName:"Sicilianu",direction:"ltr"},cj:{locale3:"chy",englishName:"Cheyenne",localizedName:"Tsėhésenėstsestȯtse",direction:"ltr"},ck:{locale3:"chr",englishName:"Cherokee",localizedName:"ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ",direction:"ltr"},cl:{locale3:"lun",englishName:"Lunda",localizedName:"Chilunda",direction:"ltr"},cm:{locale3:"chm",englishName:"Mari",localizedName:"марий йылме",direction:"ltr"},cn:{locale3:"chn",englishName:"Chinook jargon",localizedName:"chinuk wawa",direction:"ltr"},co:{locale3:"cos",englishName:"Corsican",localizedName:"corsu",direction:"ltr"},cp:{locale3:"chp",englishName:"Chipewyan",localizedName:"ᑌᓀᓱᒼᕄᓀ (Dënesųłiné)",direction:"ltr"},cq:{locale3:"cak",englishName:"kaqchikel",localizedName:"Kaqchikel Chʼabʼäl",direction:"ltr"},cr:{locale3:"cre",englishName:"Cree",localizedName:"ᓀᐦᐃᔭᐍᐏᐣ",direction:"ltr"},cs:{locale3:"ces",englishName:"Czech",localizedName:"čeština",direction:"ltr"},ct:{locale3:"crh",englishName:"Crimean Tatar",localizedName:"Къырымтатарджа",direction:"ltr"},cv:{locale3:"chv",englishName:"Chuvash",localizedName:"чӑваш чӗлхи",direction:"ltr"},cw:{locale3:"cho",englishName:"Choctaw",localizedName:"Chahta'",direction:"ltr"},cy:{locale3:"cym",englishName:"Welsh",localizedName:"Cymraeg",direction:"ltr"},cz:{locale3:"coz",englishName:"Chocho",localizedName:"Ngiwa",direction:"ltr"},da:{locale3:"dan",englishName:"Danish",localizedName:"dansk",direction:"ltr"},db:{locale3:"dgr",englishName:"Dogrib",localizedName:"Tlicho",direction:"ltr"},de:{locale3:"deu",englishName:"German",localizedName:"Deutsch",direction:"ltr"},de_AT:{englishName:"German (Austria)",localizedName:"Deutsch (Österreich)",direction:"ltr",fallbackLocales:["de"]},de_CH:{englishName:"German (Switzerland)",localizedName:"Deutsch (Schweiz)",direction:"ltr",fallbackLocales:["de"]},de_LI:{englishName:"German (Liechtenstein)",localizedName:"Deutsch (Liechtenstein)",direction:"ltr",fallbackLocales:["de"]},de_LU:{englishName:"German (Luxembourg)",localizedName:"Deutsch (Luxemburg)",direction:"ltr",fallbackLocales:["de"]},dg:{locale3:"ada",englishName:"Adangme",localizedName:"Dangme",direction:"ltr"},di:{locale3:"doi",englishName:"Dogri",localizedName:"डोगरी; ڈوگرى",direction:"rtl"},dk:{locale3:"dak",englishName:"Dakota",localizedName:"Dakhótiyapi",direction:"ltr"},dl:{locale3:"del",englishName:"Delaware",localizedName:"Lënapei èlixsuwakàn",direction:"ltr"},dm:{locale3:"sid",englishName:"Sidamo",localizedName:"Sidaamu Afoo",direction:"ltr"},dn:{locale3:"din",englishName:"Dinka",localizedName:"Thuɔŋjäŋ",direction:"ltr"},dr:{locale3:"dar",englishName:"Dargwa",localizedName:"дарган мез",direction:"ltr"},ds:{locale3:"dsb",englishName:"Lower Sorbian",localizedName:"Dolnoserbski",direction:"ltr"},du:{locale3:"dua",englishName:"Duala",localizedName:"Duālā",direction:"ltr"},dv:{locale3:"div",englishName:"Divehi",localizedName:"ދިވެހި,",direction:"rtl"},dw:{locale3:"sad",englishName:"Sandawe",localizedName:"Sandaweeki",direction:"ltr"},dy:{locale3:"dyu",englishName:"Dyula",localizedName:"Julakan",direction:"ltr"},dz:{locale3:"dzo",englishName:"Dzongkha",localizedName:"རྫོང་ཁ",direction:"ltr"},ed:{locale3:"bin",englishName:"Bini",localizedName:"Ẹ̀dó",direction:"ltr"},ee:{locale3:"ewe",englishName:"Ewe",localizedName:"Eʋegbe",direction:"ltr"},ef:{locale3:"efi",englishName:"Efik",localizedName:"Usem Efịk",direction:"ltr"},ek:{locale3:"eka",englishName:"Ekajuk",localizedName:"Ekajuk",direction:"ltr"},el:{locale3:"ell",englishName:"Greek",localizedName:"Ελληνικά",direction:"ltr"},em:{locale3:"den",englishName:"Slave (Athapascan)",localizedName:"Dene K'e",direction:"ltr"},en:{locale3:"eng",englishName:"English",localizedName:"English",direction:"ltr"},en_AU:{englishName:"English (Australia)",localizedName:"English (Australia)",direction:"ltr"},en_BI:{englishName:"English (Burundi)",localizedName:"English (Burundi)",direction:"ltr"},en_BW:{englishName:"English (Botswana)",localizedName:"English (Botswana)",direction:"ltr"},en_BZ:{englishName:"English (Belize)",localizedName:"English (Belize)",direction:"ltr"},en_CA:{englishName:"English, Canada",localizedName:"English (Canada)",direction:"ltr"},en_CB:{englishName:"English (Caribbean)",localizedName:"English (Caribbean)",direction:"ltr"},en_CM:{englishName:"English (Cameroon)",localizedName:"English (Cameroon)",direction:"ltr"},en_ER:{englishName:"English (Eritrea)",localizedName:"English (Eritrea)",direction:"ltr"},en_ET:{englishName:"English (Ethiopia)",localizedName:"English (Ethiopia)",direction:"ltr"},en_GB:{englishName:"English, United Kingdom",localizedName:"English (United Kingdom)",direction:"ltr"},en_GH:{englishName:"English (Ghana)",localizedName:"English (Ghana)",direction:"ltr"},en_GM:{englishName:"English (Gambia)",localizedName:"English (Gambia)",direction:"ltr"},en_IE:{englishName:"English (Ireland)",localizedName:"English (Ireland)",direction:"ltr"},en_IN:{englishName:"English (India)",localizedName:"English (India)",direction:"ltr"},en_JM:{englishName:"English (Jamaica)",localizedName:"English (Jamaica)",direction:"ltr"},en_KE:{englishName:"English (Kenya)",localizedName:"English (Kenya)",direction:"ltr"},en_LR:{englishName:"English (Liberia)",localizedName:"English (Liberia)",direction:"ltr"},en_LS:{englishName:"English (Lesotho)",localizedName:"English (Lesotho)",direction:"ltr"},en_MU:{englishName:"English (Mauritius)",localizedName:"English (Mauritius)",direction:"ltr"},en_MW:{englishName:"English (Malawi)",localizedName:"English (Malawi)",direction:"ltr"},en_MY:{englishName:"English (Malaysia)",localizedName:"English (Malaysia)",direction:"ltr"},en_NA:{englishName:"English (Namibia)",localizedName:"English (Namibia)",direction:"ltr"},en_NG:{englishName:"English (Nigeria)",localizedName:"English (Nigeria)",direction:"ltr"},en_NZ:{englishName:"English (New Zealand)",localizedName:"English (New Zealand)",direction:"ltr"},en_PH:{englishName:"English (Republic of the Philippines)",localizedName:"English (Republic of the Philippines)",direction:"ltr"},en_RW:{englishName:"English (Rwanda)",localizedName:"English (Rwanda)",direction:"ltr"},en_SC:{englishName:"English (Seychelles)",localizedName:"English (Seychelles)",direction:"ltr"},en_SL:{englishName:"English (Sierra Leone)",localizedName:"English (Sierra Leone)",direction:"ltr"},en_SS:{englishName:"English (South Sudan)",localizedName:"English (South Sudan)",direction:"ltr"},en_SZ:{englishName:"English (Eswatini)",localizedName:"English (Eswatini)",direction:"ltr"},en_TT:{englishName:"English (Trinidad and Tobago)",localizedName:"English (Trinidad and Tobago)",direction:"ltr"},en_TZ:{englishName:"English (Tanzania)",localizedName:"English (Tanzania)",direction:"ltr"},en_UG:{englishName:"English (Uganda)",localizedName:"English (Uganda)",direction:"ltr"},en_ZA:{englishName:"English (South Africa)",localizedName:"English (South Africa)",direction:"ltr"},en_ZM:{englishName:"English (Zambia)",localizedName:"English (Zambia)",direction:"ltr"},en_ZW:{englishName:"English (Zimbabwe)",localizedName:"English (Zimbabwe)",direction:"ltr"},er:{locale3:"srr",englishName:"Serer",localizedName:"Seereer",direction:"ltr"},es:{locale3:"spa",englishName:"Spanish",localizedName:"español",direction:"ltr"},es_AR:{englishName:"Spanish (Argentina)",localizedName:"español (Argentina)",direction:"ltr",fallbackLocales:["es"]},es_BO:{englishName:"Spanish (Bolivia)",localizedName:"español (Bolivia)",direction:"ltr",fallbackLocales:["es"]},es_CL:{englishName:"Spanish (Chile)",localizedName:"español (Chile)",direction:"ltr",fallbackLocales:["es"]},es_CO:{englishName:"Spanish, Colombia",localizedName:"español (Colombia)",direction:"ltr",fallbackLocales:["es"]},es_CR:{englishName:"Spanish, Costa Rica",localizedName:"español (Costa Rica)",direction:"ltr",fallbackLocales:["es"]},es_DO:{englishName:"Spanish (Dominican Republic)",localizedName:"español (Dominican Republic)",direction:"ltr",fallbackLocales:["es"]},es_EC:{englishName:"Spanish (Ecuador)",localizedName:"español (Ecuador)",direction:"ltr",fallbackLocales:["es"]},es_ES:{englishName:"Spanish, Spain",localizedName:"español (España)",direction:"ltr",fallbackLocales:["es"]},es_GQ:{englishName:"Spanish (Equatorial Guinea)",localizedName:"español (Equatorial Guinea)",direction:"ltr",fallbackLocales:["es"]},es_GT:{englishName:"Spanish (Guatemala)",localizedName:"español (Guatemala)",direction:"ltr",fallbackLocales:["es"]},es_HN:{englishName:"Spanish (Honduras)",localizedName:"español (Honduras)",direction:"ltr",fallbackLocales:["es"]},es_MX:{englishName:"Spanish, Mexico",localizedName:"español (México)",direction:"ltr",fallbackLocales:["es"]},es_NI:{englishName:"Spanish (Nicaragua)",localizedName:"español (Nicaragua)",direction:"ltr",fallbackLocales:["es"]},es_PA:{englishName:"Spanish (Panama)",localizedName:"español (Panama)",direction:"ltr",fallbackLocales:["es"]},es_PE:{englishName:"Spanish, Peru",localizedName:"español (Perú)",direction:"ltr",fallbackLocales:["es"]},es_PR:{englishName:"Spanish (Puerto Rico)",localizedName:"español (Puerto Rico)",direction:"ltr",fallbackLocales:["es"]},es_PY:{englishName:"Spanish (Paraguay)",localizedName:"español (Paraguay)",direction:"ltr",fallbackLocales:["es"]},es_SV:{englishName:"Spanish (El Salvador)",localizedName:"español (El Salvador)",direction:"ltr",fallbackLocales:["es"]},es_US:{englishName:"Spanish (United States)",localizedName:"español (United States)",direction:"ltr",fallbackLocales:["es"]},es_UY:{englishName:"Spanish (Uruguay)",localizedName:"español (Uruguay)",direction:"ltr",fallbackLocales:["es"]},es_VE:{englishName:"Spanish (Venezuela)",localizedName:"español (Venezuela)",direction:"ltr",fallbackLocales:["es"]},et:{locale3:"est",englishName:"Estonian",localizedName:"eesti",direction:"ltr"},eu:{locale3:"eus",englishName:"Basque",localizedName:"euskara",direction:"ltr"},ew:{locale3:"ewo",englishName:"Ewondo",localizedName:"Beti",direction:"ltr"},fa:{locale3:"fas",englishName:"Persian",localizedName:"فارسی",direction:"rtl"},fa_DA:{locale3:"prs",englishName:"Persian (Dari)",localizedName:"دری",direction:"rtl"},ff:{locale3:"ful",englishName:"Fulah",localizedName:"Fulfulde",direction:"ltr"},fg:{locale3:"fon",englishName:"Fon",localizedName:"Fon gbè",direction:"ltr"},fi:{locale3:"fin",englishName:"Finnish",localizedName:"suomi",direction:"ltr"},fj:{locale3:"fij",englishName:"Fijian",localizedName:"Vakaviti",direction:"ltr"},fl:{locale3:"fil",englishName:"Filipino",localizedName:"Wikang Filipino",direction:"ltr"},fn:{locale3:"fan",englishName:"Fang",localizedName:"Pangwe",direction:"ltr"},fo:{locale3:"fao",englishName:"Faroese",localizedName:"føroyskt",direction:"ltr"},fr:{locale3:"fra",englishName:"French",localizedName:"français",direction:"ltr"},fr_BE:{englishName:"French (Belgium)",localizedName:"français (Belgium)",direction:"ltr",fallbackLocales:["fr"]},fr_BF:{englishName:"French (Burkina Faso)",localizedName:"français (Burkina Faso)",direction:"ltr",fallbackLocales:["fr"]},fr_BI:{englishName:"French (Burundi)",localizedName:"français (Burundi)",direction:"ltr",fallbackLocales:["fr"]},fr_BJ:{englishName:"French (Benin)",localizedName:"français (Bénin)",direction:"ltr",fallbackLocales:["fr"]},fr_CA:{englishName:"French (Canada)",localizedName:"français (Canada)",direction:"ltr",fallbackLocales:["fr"]},fr_CD:{englishName:"French (DR Congo)",localizedName:"français (RD Congo)",direction:"ltr",fallbackLocales:["fr"]},fr_CF:{englishName:"French (Central African Republic)",localizedName:"français (République centrafricaine)",direction:"ltr",fallbackLocales:["fr"]},fr_CG:{englishName:"French (Congo Republic)",localizedName:"français (République du Congo)",direction:"ltr",fallbackLocales:["fr"]},fr_CH:{englishName:"French (Switzerland)",localizedName:"français (Suisse)",direction:"ltr",fallbackLocales:["fr"]},fr_CI:{englishName:"French (Côte d’Ivoire)",localizedName:"français (Côte d'Ivoire)",direction:"ltr",fallbackLocales:["fr"]},fr_CM:{englishName:"French (Cameroon)",localizedName:"français (Cameroon)",direction:"ltr",fallbackLocales:["fr"]},fr_DJ:{englishName:"French (Djibouti)",localizedName:"français (Djibouti)",direction:"ltr",fallbackLocales:["fr"]},fr_EH:{englishName:"French (Sahrawi Republic)",localizedName:"français (République sahraouie)",direction:"ltr",fallbackLocales:["fr"]},fr_GA:{englishName:"French (Gabon)",localizedName:"français (Gabon)",direction:"ltr",fallbackLocales:["fr"]},fr_GN:{englishName:"French (Guinea)",localizedName:"français (Guinée)",direction:"ltr",fallbackLocales:["fr"]},fr_GQ:{englishName:"French (Equatorial Guinea)",localizedName:"français (Guinée Équatoriale)",direction:"ltr",fallbackLocales:["fr"]},fr_KM:{englishName:"French (Comoros)",localizedName:"français (Comores)",direction:"ltr",fallbackLocales:["fr"]},fr_LU:{englishName:"French (Luxembourg)",localizedName:"français (Luxembourg)",direction:"ltr",fallbackLocales:["fr"]},fr_MC:{englishName:"French (Monaco)",localizedName:"français (Monaco)",direction:"ltr",fallbackLocales:["fr"]},fr_MG:{englishName:"French (Madagascar)",localizedName:"français (Madagascar)",direction:"ltr",fallbackLocales:["fr"]},fr_ML:{englishName:"French (Mali)",localizedName:"français (Mali)",direction:"ltr",fallbackLocales:["fr"]},fr_NE:{englishName:"French (Niger)",localizedName:"français (Niger)",direction:"ltr",fallbackLocales:["fr"]},fr_RW:{englishName:"French (Rwanda)",localizedName:"français (Rwanda)",direction:"ltr",fallbackLocales:["fr"]},fr_SC:{englishName:"French (Seychelles)",localizedName:"français (les Seychelles)",direction:"ltr",fallbackLocales:["fr"]},fr_SN:{englishName:"French (Senegal)",localizedName:"français (Sénégal)",direction:"ltr",fallbackLocales:["fr"]},fr_TD:{englishName:"French (Chad)",localizedName:"français (Tchad)",direction:"ltr",fallbackLocales:["fr"]},fr_TG:{englishName:"French (Togo)",localizedName:"français (Togo)",direction:"ltr",fallbackLocales:["fr"]},fs:{locale3:"frs",englishName:"East Frisian Low Saxon",localizedName:"Oostfreesk",direction:"ltr"},fu:{locale3:"fur",englishName:"Friulian",localizedName:"furlan",direction:"ltr"},fy:{locale3:"fry",englishName:"Western Frisian",localizedName:"Frysk",direction:"ltr"},ga:{locale3:"gle",englishName:"Irish",localizedName:"Gaeilge",direction:"ltr"},gb:{locale3:"gba",englishName:"Gbaya",localizedName:"Gbaya–Manza–Ngbaka",direction:"ltr"},gc:{locale3:"car",englishName:"Galibi Carib",localizedName:"Kari'nja",direction:"ltr"},gd:{locale3:"gla",englishName:"Scottish Gaelic",localizedName:"Gàidhlig",direction:"ltr"},gf:{locale3:"cab",englishName:"Garifuna",localizedName:"Garifuna",direction:"ltr"},gg:{locale3:"gaa",englishName:"Ga",localizedName:"Gã",direction:"ltr"},gk:{locale3:"tkl",englishName:"Tokelau",localizedName:"gagana Tokelau",direction:"ltr"},gl:{locale3:"glg",englishName:"Galician",localizedName:"galego",direction:"ltr"},gn:{locale3:"grn",englishName:"Guarani",localizedName:"avañeʼẽ",direction:"ltr"},go:{locale3:"gon",englishName:"Gondi",localizedName:"గోండి",direction:"ltr"},gr:{locale3:"gor",englishName:"Gorontalo",localizedName:"Bahasa Hulontalo",direction:"ltr"},gs:{locale3:"gsw",englishName:"Swiss German",localizedName:"Schwiizerdütsch",direction:"ltr"},gt:{locale3:"gil",englishName:"Gilbertese",localizedName:"Taetae ni Kiribati",direction:"ltr"},gu:{locale3:"guj",englishName:"Gujarati",localizedName:"ગુજરાતી",direction:"ltr"},gv:{locale3:"glv",englishName:"Manx",localizedName:"Gaelg",direction:"ltr"},gw:{locale3:"gwi",englishName:"Gwich'in",localizedName:"Dinjii Zhu’ Ginjik",direction:"ltr"},gy:{locale3:"gay",englishName:"Gayo",localizedName:"Basa Gayo",direction:"ltr"},ha:{locale3:"hau",englishName:"Hausa",localizedName:"Hausa",direction:"ltr"},hd:{locale3:"mdr",englishName:"Mandar",localizedName:"Mandar",direction:"ltr"},hh:{locale3:"moh",englishName:"Mohawk",localizedName:"Kanien’kéha",direction:"ltr"},hi:{locale3:"hin",englishName:"Hindi",localizedName:"हिन्दी",direction:"ltr"},hk:{locale3:"kru",englishName:"Kurukh",localizedName:"कुड़ुख़",direction:"ltr"},hl:{locale3:"hil",englishName:"Hiligaynon",localizedName:"Ilonggo",direction:"ltr"},hm:{locale3:"hmn",englishName:"Hmong",localizedName:"𖬇𖬰𖬞 𖬌𖬣𖬵",direction:"ltr"},hn:{locale3:"shn",englishName:"Shan",localizedName:"ၵႂၢမ်းတႆးယႂ်",direction:"ltr"},ho:{locale3:"hmo",englishName:"Hiri Motu",localizedName:"Hiri Motu",direction:"ltr"},hp:{locale3:"hup",englishName:"Hupa",localizedName:"Na:tinixwe Mixine:whe'",direction:"ltr"},hr:{locale3:"hrv",englishName:"Croatian",localizedName:"Hrvatski",direction:"ltr"},hr_BA:{englishName:"Croatian (Latin, Bosnia, and Herzegovina)",localizedName:"hrvatski (Latinica, Bosna i Hercegovina)",direction:"ltr",fallbackLocales:["hr"]},hs:{locale3:"hsb",englishName:"Upper Sorbian",localizedName:"hornjoserbšćina",direction:"ltr"},ht:{locale3:"hat",englishName:"Haitian",localizedName:"Kreyòl ayisyen",direction:"ltr"},hu:{locale3:"hun",englishName:"Hungarian",localizedName:"magyar",direction:"ltr"},hw:{locale3:"haw",englishName:"Hawaiian",localizedName:"ʻŌlelo Hawaiʻi",direction:"ltr"},hx:{locale3:"hai",englishName:"Haida",localizedName:"X̱aat Kíl",direction:"ltr"},hy:{locale3:"hye",englishName:"Armenian",localizedName:"Հայերեն",direction:"ltr"},hz:{locale3:"her",englishName:"Herero",localizedName:"Otjiherero",direction:"ltr"},ib:{locale3:"iba",englishName:"Iban",localizedName:"Jaku Iban",direction:"ltr"},ig:{locale3:"ibo",englishName:"Igbo",localizedName:"Asụsụ Igbo",direction:"ltr"},ih:{locale3:"inh",englishName:"Ingush",localizedName:"ГӀалгӀай мотт",direction:"ltr"},ii:{locale3:"iii",englishName:"Sichuan Yi",localizedName:"ꆈꌠ꒿ Nuosuhxop",direction:"ltr"},ik:{locale3:"ipk",englishName:"Inupiaq",localizedName:"Iñupiaq",direction:"ltr"},il:{locale3:"ilo",englishName:"Iloko",localizedName:"Pagsasao nga Ilokano",direction:"ltr"},im:{locale3:"sma",englishName:"Southern Sami",localizedName:"Åarjelsaemien gïele",direction:"ltr"},in:{locale3:"ind",englishName:"Indonesian",localizedName:"Bahasa Indonesia",direction:"ltr"},iq:{locale3:"miq",englishName:"Miskito",localizedName:"Miskitu",direction:"ltr"},is:{locale3:"isl",englishName:"Icelandic",localizedName:"Íslenska",direction:"ltr"},it:{locale3:"ita",englishName:"Italian",localizedName:"italiano",direction:"ltr"},it_CH:{englishName:"Italian (Switzerland)",localizedName:"italiano(Svizzera)",direction:"ltr",fallbackLocales:["it"]},iu:{locale3:"iku",englishName:"Inuktitut",localizedName:"ᐃᓄᒃᑎᑐᑦ",direction:"ltr"},iv:{locale3:"tiv",englishName:"Tiv",localizedName:"Tiv",direction:"ltr"},iw:{locale3:"heb",englishName:"Hebrew",localizedName:"עברית",direction:"rtl"},ix:{locale3:"ixl",englishName:"ixil",localizedName:"Ixhil",direction:"ltr"},ja:{locale3:"jpn",englishName:"Japanese",localizedName:"日本語",direction:"ltr"},jb:{locale3:"kjb",englishName:"q'anjob'al",localizedName:"Kanjobal",direction:"ltr"},jp:{locale3:"jpr",englishName:"Judeo-Persian",localizedName:"Dzhidi",direction:"ltr"},jr:{locale3:"jrb",englishName:"Judeo-Arabic",localizedName:"عربية يهودية",direction:"rtl"},jv:{locale3:"jav",englishName:"Javanese",localizedName:"basa Jawa",direction:"ltr"},ka:{locale3:"kat",englishName:"Georgian",localizedName:"ქართული ენა",direction:"ltr"},kb:{locale3:"kab",englishName:"Kabyle",localizedName:"Taqbaylit",direction:"ltr"},kc:{locale3:"kac",englishName:"Kachin",localizedName:"Jingpho",direction:"ltr"},kd:{locale3:"kbd",englishName:"Kabardian",localizedName:"Къэбэрдейбзэ",direction:"ltr"},ke:{locale3:"kpe",englishName:"Kpelle",localizedName:"Kpɛlɛwoo",direction:"ltr"},kf:{locale3:"krc",englishName:"Karachay-Balkar",localizedName:"Къарачай-Малкъар тил",direction:"ltr"},kg:{locale3:"kon",englishName:"Kongo",localizedName:"Kikongo",direction:"ltr"},kh:{locale3:"kha",englishName:"Khasi",localizedName:"কা কতিয়েন খাশি",direction:"ltr"},ki:{locale3:"kik",englishName:"Kikuyu",localizedName:"Gĩkũyũ",direction:"ltr"},kj:{locale3:"kua",englishName:"Kwanyama",localizedName:"Oshikwanyama",direction:"ltr"},kk:{locale3:"kaz",englishName:"Kazakh",localizedName:"қазақ тілі",direction:"ltr"},kl:{locale3:"kal",englishName:"Kalaallisut",localizedName:"kalaallisut",direction:"ltr"},km:{locale3:"khm",englishName:"Khmer",localizedName:"ខេមរភាសា",direction:"ltr"},kn:{locale3:"kan",englishName:"Kannada",localizedName:"ಕನ್ನಡ",direction:"ltr"},ko:{locale3:"kor",englishName:"Korean",localizedName:"한국어",direction:"ltr"},kp:{locale3:"kaa",englishName:"Kara-Kalpak",localizedName:"Qaraqalpaq tili",direction:"ltr"},kq:{locale3:"kln",englishName:"Kalenjin",localizedName:"Kalenjin",direction:"ltr"},kr:{locale3:"kau",englishName:"Kanuri",localizedName:"Kanuri",direction:"ltr"},ks:{locale3:"kas",englishName:"Kashmiri",localizedName:"कश्मीरी",direction:"ltr"},kt:{locale3:"kut",englishName:"Kutenai",localizedName:"Ktunaxa",direction:"ltr"},ku:{locale3:"kur",englishName:"Kurdish (Sorani)",localizedName:"سۆرانی",direction:"rtl"},ku_TR:{locale3:"ckb",englishName:"Kurdish (Kurmanji)",localizedName:"Kurmancî",direction:"ltr"},kv:{locale3:"kom",englishName:"Komi",localizedName:"коми кыв",direction:"ltr"},kw:{locale3:"cor",englishName:"Cornish",localizedName:"Kernewek",direction:"ltr"},kx:{locale3:"kam",englishName:"Kamba",localizedName:"Kikamba",direction:"ltr"},ky:{locale3:"kir",englishName:"Kirghiz",localizedName:"Кыргыз тили",direction:"ltr"},kz:{locale3:"kos",englishName:"Kosraean",localizedName:"Kosraean",direction:"ltr"},lb:{locale3:"ltz",englishName:"Luxembourgish",localizedName:"Lëtzebuergesch",direction:"ltr"},ld:{locale3:"lad",englishName:"Ladino",localizedName:"Judeo-español",direction:"ltr"},lg:{locale3:"lug",englishName:"Ganda",localizedName:"Luganda",direction:"ltr"},lh:{locale3:"lah",englishName:"Lahnda",localizedName:"بھارت کا",direction:"rtl"},li:{locale3:"lim",englishName:"Limburgish",localizedName:"Limburgs",direction:"ltr"},lk:{locale3:"lak",englishName:"Lakota",localizedName:"Lakȟótiyapi",direction:"ltr"},ll:{locale3:"luo",englishName:"Luo (Kenya and Tanzania)",localizedName:"Dholuo",direction:"ltr"},lm:{locale3:"lam",englishName:"Lamba",localizedName:"Ichilamba",direction:"ltr"},ln:{locale3:"lin",englishName:"Lingala",localizedName:"Lingála",direction:"ltr"},lo:{locale3:"lao",englishName:"Lao",localizedName:"ພາສາລາວ",direction:"ltr"},lp:{locale3:"sel",englishName:"Selkup",localizedName:"чу́мэл шэ",direction:"ltr"},ls:{locale3:"lus",englishName:"Lushai",localizedName:"Mizo ṭawng",direction:"ltr"},lt:{locale3:"lit",englishName:"Lithuanian",localizedName:"lietuvių kalba",direction:"ltr"},lu:{locale3:"lub",englishName:"Luba-Katanga",localizedName:"Kiluba",direction:"ltr"},lv:{locale3:"lav",englishName:"Latvian",localizedName:"latviešu valoda",direction:"ltr"},lw:{locale3:"ach",englishName:"Acoli",localizedName:"Lwo",direction:"ltr"},lx:{locale3:"lua",englishName:"Luba-Lulua",localizedName:"Cilubà",direction:"ltr"},ly:{locale3:"luy",englishName:"Luyia",localizedName:"Luyia",direction:"ltr"},lz:{locale3:"lez",englishName:"Lezghian",localizedName:"Лезги чӏал",direction:"ltr"},ma:{locale3:"mag",englishName:"Magahi",localizedName:"मगही",direction:"ltr"},mb:{locale3:"bas",englishName:"Basa",localizedName:"Mbene",direction:"ltr"},mc:{locale3:"mnc",englishName:"Manchu",localizedName:"Manju gisun",direction:"ltr"},md:{locale3:"mad",englishName:"Madurese",localizedName:"Madhura",direction:"ltr"},me:{locale3:"men",englishName:"Mende",localizedName:"Mɛnde yia",direction:"ltr"},mf:{locale3:"mdf",englishName:"Moksha",localizedName:"мокшень кяль",direction:"ltr"},mg:{locale3:"mlg",englishName:"Malagasy",localizedName:"malagasy",direction:"ltr"},mh:{locale3:"mah",englishName:"Marshallese",localizedName:"Kajin M̧ajeļ",direction:"ltr"},mi:{locale3:"mri",englishName:"Maori",localizedName:"reo Māori",direction:"ltr"},mk:{locale3:"mkd",englishName:"Macedonian",localizedName:"македонски јазик",direction:"ltr"},ml:{locale3:"mal",englishName:"Malayalam",localizedName:"മലയാളം",direction:"ltr"},mm:{locale3:"tem",englishName:"Timne",localizedName:"KʌThemnɛ",direction:"ltr"},mn:{locale3:"mon",englishName:"Mongolian",localizedName:"Монгол хэл",direction:"ltr"},mo:{locale3:"mol",englishName:"Moldavian",localizedName:"Moldavian",direction:"ltr"},mq:{locale3:"mic",englishName:"Mi'kmaq",localizedName:"Míkmawísimk",direction:"ltr"},mr:{locale3:"mar",englishName:"Marathi",localizedName:"मराठी",direction:"ltr"},ms:{locale3:"msa",englishName:"Malay",localizedName:"Bahasa Malaysia",direction:"ltr"},ms_MY:{englishName:"Malay (Standard)",localizedName:"بهاس ملايو مليسيا",direction:"rtl",fallbackLocales:["ms"]},mt:{locale3:"mlt",englishName:"Maltese",localizedName:"Malti",direction:"ltr"},mu:{locale3:"mus",englishName:"Creek",localizedName:"Mvskoke",direction:"ltr"},mv:{locale3:"myv",englishName:"Erzya",localizedName:"эрзянь кель",direction:"ltr"},mw:{locale3:"mwl",englishName:"Mirandese",localizedName:"mirandés",direction:"ltr"},mx:{locale3:"mam",englishName:"mam",localizedName:"Qyool Mam",direction:"ltr"},my:{locale3:"mya",englishName:"Burmese",localizedName:"ဗမာစာ",direction:"ltr"},mz:{locale3:"mau",englishName:"Mazateco",localizedName:"En Ngixo",direction:"ltr"},na:{locale3:"nau",englishName:"Nauru",localizedName:"Ekakairũ Naoero",direction:"ltr"},nb:{locale3:"nob",englishName:"Norwegian Bokmal",localizedName:"Norwegian Bokmål",direction:"ltr"},nc:{locale3:"nyn",englishName:"Nyankole",localizedName:"Orunyankore",direction:"ltr"},nd:{locale3:"nde",englishName:"North Ndebele",localizedName:"North Ndebele",direction:"ltr"},ne:{locale3:"nep",englishName:"Nepali",localizedName:"नेपाली",direction:"ltr"},nf:{locale3:"frr",englishName:"Northern Frisian",localizedName:"Frasch",direction:"ltr"},ng:{locale3:"ndo",englishName:"Ndonga",localizedName:"Owambo",direction:"ltr"},nh:{locale3:"nyo",englishName:"Nyoro",localizedName:"Orunyoro",direction:"ltr"},ni:{locale3:"nia",englishName:"Nias",localizedName:"Li Niha",direction:"ltr"},nk:{locale3:"nor",englishName:"Norwegian",localizedName:"norsk",direction:"ltr"},nl:{locale3:"nld",englishName:"Dutch",localizedName:"Nederlands",direction:"ltr"},nl_BE:{englishName:"Dutch (Belgium)",localizedName:"Nederlands (België)",direction:"ltr",fallbackLocales:["nl"]},nm:{locale3:"smn",englishName:"Inari Sami",localizedName:"anarâškielâ",direction:"ltr"},nn:{locale3:"nno",englishName:"Norwegian Nynorsk",localizedName:"Norsk nynorsk",direction:"ltr"},np:{locale3:"nap",englishName:"Neapolitan",localizedName:"napulitano",direction:"ltr"},nq:{locale3:"nqo",englishName:"N'Ko",localizedName:"ߒߞߏ",direction:"rtl"},nr:{locale3:"nbl",englishName:"South Ndebele",localizedName:"South Ndebele",direction:"ltr"},ns:{locale3:"nds",englishName:"Low German",localizedName:"Plattdütsch",direction:"ltr"},nt:{locale3:"sat",englishName:"Santali",localizedName:"ᱥᱟᱱᱛᱟᱲᱤ",direction:"ltr"},nu:{locale3:"niu",englishName:"Niuean",localizedName:"ko e vagahau Niuē",direction:"ltr"},nv:{locale3:"nav",englishName:"Navajo",localizedName:"Diné bizaad",direction:"ltr"},nw:{locale3:"new",englishName:"Nepal Bhasa",localizedName:"नेपाल भाषा",direction:"ltr"},nx:{locale3:"nym",englishName:"Nyamwezi",localizedName:"Nyamwezi",direction:"ltr"},ny:{locale3:"nya",englishName:"Chichewa",localizedName:"Nyanja",direction:"ltr"},nz:{locale3:"nzi",englishName:"Nzima",localizedName:"Nzima",direction:"ltr"},oa:{locale3:"osa",englishName:"Osage",localizedName:"Wazhazhe ie / 𐓏𐓘𐓻𐓘𐓻𐓟 𐒻𐓟",direction:"ltr"},oc:{locale3:"oci",englishName:"Occitan",localizedName:"occitan",direction:"ltr"},oe:{locale3:"cnr",englishName:"Montenegrin",localizedName:"crnogorski / црногорски",direction:"ltr"},og:{locale3:"man",englishName:"Mandingo",localizedName:"Mandi'nka kango",direction:"ltr"},oi:{locale3:"snk",englishName:"Soninke",localizedName:"Sooninkanxanne",direction:"ltr"},oj:{locale3:"oji",englishName:"Ojibwa",localizedName:"Ojibwa",direction:"ltr"},ok:{locale3:"kok",englishName:"Konkani",localizedName:"कोंकणी",direction:"ltr"},ol:{locale3:"sms",englishName:"Skolt Sami",localizedName:"sääʹmǩiõll",direction:"ltr"},om:{locale3:"orm",englishName:"Oromo",localizedName:"Afaan Oromoo",direction:"ltr"},oo:{locale3:"mos",englishName:"Mossi",localizedName:"Mooré",direction:"ltr"},op:{locale3:"top",englishName:"Totonaca",localizedName:"Totonac–Tepehua",direction:"ltr"},or:{locale3:"ori",englishName:"Oriya",localizedName:"ଓଡ଼ିଆ",direction:"ltr"},os:{locale3:"oss",englishName:"Ossetian",localizedName:"ирон æвзаг",direction:"ltr"},ot:{locale3:"sco",englishName:"Scots",localizedName:"Lallans",direction:"ltr"},ou:{locale3:"alt",englishName:"Southern Altai",localizedName:"Алтай тили",direction:"ltr"},pa:{locale3:"pan",englishName:"Panjabi",localizedName:"ਪੰਜਾਬੀ",direction:"ltr"},pg:{locale3:"pag",englishName:"Pangasinan",localizedName:"Salitan Pangasinan",direction:"ltr"},pl:{locale3:"pol",englishName:"Polish",localizedName:"Polski",direction:"ltr"},pm:{locale3:"pam",englishName:"Pampanga",localizedName:"Amánung Kapampangan",direction:"ltr"},pn:{locale3:"pon",englishName:"Pohnpeian",localizedName:"Lokaiahn Pohnpei",direction:"ltr"},pp:{locale3:"pap",englishName:"Papiamento",localizedName:"Papiamentu",direction:"ltr"},ps:{locale3:"pus",englishName:"Pashto",localizedName:"پښتو",direction:"ltr"},pt:{locale3:"por",englishName:"Portuguese",localizedName:"Português",direction:"ltr",fallbackLocales:["pt_BR"]},pt_AO:{englishName:"Portuguese(Angola)",localizedName:"português(Angola)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_BR:{englishName:"Portuguese, Brazil",localizedName:"português (Brasil)",direction:"ltr"},pt_CV:{englishName:"Portuguese(Cabo verde)",localizedName:"português(Cabo verde)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_GQ:{englishName:"Portuguese(Equatorial Guinea)",localizedName:"português(Guiné Equatorial)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_GW:{englishName:"Portuguese(Guinea-Bissau)",localizedName:"português(Guiné-Bissau)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_MZ:{englishName:"Portuguese(Mozambique)",localizedName:"português(Moçambique)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pt_ST:{englishName:"Portuguese(São Tomé and Príncipe)",localizedName:"português(São Tomé e Príncipe)",direction:"ltr",fallbackLocales:["pt","pt_BR"]},pu:{locale3:"pau",englishName:"Palauan",localizedName:"a tekoi er a Belau",direction:"ltr"},qc:{locale3:"quc",englishName:"k'iche'",localizedName:"Qatzijobʼal",direction:"ltr"},qe:{locale3:"kek",englishName:"q'eqchi'",localizedName:"Kekchi",direction:"ltr"},qu:{locale3:"que",englishName:"Quechua",localizedName:"Qhichwa",direction:"ltr"},ra:{locale3:"bra",englishName:"Braj",localizedName:"ब्रजभाषा",direction:"ltr"},rb:{locale3:"grb",englishName:"Grebo",localizedName:"Kréébo",direction:"ltr"},rc:{locale3:"acr",englishName:"Achi",localizedName:"Achiʼ",direction:"ltr"},re:{locale3:"ter",englishName:"Tereno",localizedName:"Terêna",direction:"ltr"},rh:{locale3:"roh",englishName:"Romansh",localizedName:"Rumantsch",direction:"ltr"},ri:{locale3:"rap",englishName:"Rapanui",localizedName:"Vananga rapa nui",direction:"ltr"},rj:{locale3:"raj",englishName:"Rajasthani",localizedName:"राजस्थानी",direction:"ltr"},rl:{locale3:"krl",englishName:"Karelian",localizedName:"karjal",direction:"ltr"},rn:{locale3:"run",englishName:"Kirundi",localizedName:"Ikirundi",direction:"ltr"},ro:{locale3:"ron",englishName:"Romanian",localizedName:"Română",direction:"ltr"},rp:{locale3:"rup",englishName:"Aromanian",localizedName:"armãneashce",direction:"ltr"},rr:{locale3:"rar",englishName:"Rarotongan (Cook Islands Māori)",localizedName:"Māori Kūki 'Āirani",direction:"ltr"},ru:{locale3:"rus",englishName:"Russian",localizedName:"Русский",direction:"ltr"},rw:{locale3:"kin",englishName:"Kinyarwanda",localizedName:"Ikinyarwanda",direction:"ltr"},ry:{locale3:"rom",englishName:"Romany",localizedName:"romani čhib",direction:"ltr"},rz:{locale3:"loz",englishName:"Lozi",localizedName:"siLozi",direction:"ltr"},sb:{locale3:"csb",englishName:"Kashubian",localizedName:"Kaszëbsczi jãzëk",direction:"ltr"},sc:{locale3:"srd",englishName:"Sardinian",localizedName:"sardu",direction:"ltr"},sd:{locale3:"snd",englishName:"Sindhi",localizedName:"सिन्धी",direction:"ltr"},se:{locale3:"sme",englishName:"Northern Sami",localizedName:"Davvisámegiella",direction:"ltr"},sg:{locale3:"sag",englishName:"Sango",localizedName:"yângâ tî sängö",direction:"ltr"},sh:{locale3:"hbs",englishName:"Serbo-Croatian",localizedName:"Serbo-Croatian",direction:"ltr"},si:{locale3:"sin",englishName:"Sinhalese",localizedName:"සිංහල",direction:"ltr"},sj:{locale3:"smj",englishName:"Lule Sami",localizedName:"julevsámegiella",direction:"ltr"},sk:{locale3:"slk",englishName:"Slovak",localizedName:"slovenčina",direction:"ltr"},sl:{locale3:"slv",englishName:"Slovenian",localizedName:"slovenščina",direction:"ltr"},sm:{locale3:"smo",englishName:"Samoan",localizedName:"Gagana faʻa Sāmoa",direction:"ltr"},sn:{locale3:"sna",englishName:"Shona",localizedName:"chiShona",direction:"ltr"},so:{locale3:"som",englishName:"Somali",localizedName:"Af Soomaali",direction:"ltr"},sp:{locale3:"nso",englishName:"Sepedi",localizedName:"Sesotho sa Leboa",direction:"ltr"},sq:{locale3:"sqi",englishName:"Albanian",localizedName:"Shqip",direction:"ltr"},sr:{locale3:"srp",englishName:"Serbian",localizedName:"српски језик",direction:"ltr"},sr_BA:{englishName:"Serbian (Bosnia and Herzegovina)",localizedName:"Српски (Босна и Херцеговина)",direction:"ltr",fallbackLocales:["sr"]},ss:{locale3:"ssw",englishName:"Swati",localizedName:"SiSwati",direction:"ltr"},st:{locale3:"sot",englishName:"Sotho",localizedName:"Sesotho",direction:"ltr"},su:{locale3:"sun",englishName:"Sundanese",localizedName:"Basa Sunda",direction:"ltr"},sv:{locale3:"swe",englishName:"Swedish",localizedName:"Svenska",direction:"ltr"},sv_FI:{englishName:"Swedish (Finland)",localizedName:"svenska (Finland)",direction:"ltr",fallbackLocales:["sv"]},sw:{locale3:"swa",englishName:"Swahili",localizedName:"Kiswahili",direction:"ltr"},sx:{locale3:"sus",englishName:"Susu",localizedName:"Sosoxui",direction:"ltr"},sy:{locale3:"syr",englishName:"Syriac",localizedName:"ܠܫܢܐ ܣܘܪܝܝܐ Lešānā Suryāyā",direction:"rtl"},sz:{locale3:"sas",englishName:"Sasak",localizedName:"ᬪᬵᬲᬵᬲᬓ᭄ᬱᬓ᭄",direction:"ltr"},ta:{locale3:"tam",englishName:"Tamil",localizedName:"தமிழ்",direction:"ltr"},tc:{locale3:"tog",englishName:"Tonga (Nyasa)",localizedName:"chiTonga",direction:"ltr"},te:{locale3:"tel",englishName:"Telugu",localizedName:"తెలుగు",direction:"ltr"},tg:{locale3:"tgk",englishName:"Tajik",localizedName:"тоҷикӣ",direction:"ltr"},th:{locale3:"tha",englishName:"Thai",localizedName:"ไทย",direction:"ltr"},ti:{locale3:"tir",englishName:"Tigrinya",localizedName:"ትግርኛ",direction:"ltr"},tj:{locale3:"tli",englishName:"Tlingit",localizedName:"Lingít",direction:"ltr"},tk:{locale3:"tuk",englishName:"Turkmen",localizedName:"Türkmen",direction:"ltr"},tl:{locale3:"tgl",englishName:"Tagalog",localizedName:"Wikang Tagalog",direction:"ltr"},tm:{locale3:"tmh",englishName:"Tamashek",localizedName:"Tafaghist",direction:"ltr"},tn:{locale3:"tsn",englishName:"Tswana",localizedName:"Setswana",direction:"ltr"},to:{locale3:"ton",englishName:"Tonga",localizedName:"faka Tonga",direction:"ltr"},tp:{locale3:"tpi",englishName:"Tok Pisin",localizedName:"Tok Pisin",direction:"ltr"},tq:{locale3:"tig",englishName:"Tigre",localizedName:"ትግረ",direction:"ltr"},tr:{locale3:"tur",englishName:"Turkish",localizedName:"Türkçe",direction:"ltr"},ts:{locale3:"tso",englishName:"Tsonga",localizedName:"Xitsonga",direction:"ltr"},tt:{locale3:"tat",englishName:"Tatar",localizedName:"татар теле",direction:"ltr"},tu:{locale3:"tum",englishName:"Tumbuka",localizedName:"chiTumbuka",direction:"ltr"},tv:{locale3:"tvl",englishName:"Tuvalu",localizedName:"Te Ggana Tuuvalu",direction:"ltr"},tw:{locale3:"twi",englishName:"Twi",localizedName:"Twi",direction:"ltr",fallbackLocales:["ak"]},tx:{locale3:"tyv",englishName:"Tuvinian",localizedName:"тыва дыл",direction:"ltr"},ty:{locale3:"tah",englishName:"Tahitian",localizedName:"Reo Tahiti",direction:"ltr"},tz:{locale3:"tsi",englishName:"Tsimshian",localizedName:"Tsmksian",direction:"ltr"},ua:{locale3:"nah",englishName:"Náhuatl",localizedName:"Náhuatl",direction:"ltr"},ud:{locale3:"udm",englishName:"Udmurt",localizedName:"удмурт кыл",direction:"ltr"},ug:{locale3:"uig",englishName:"Uighur",localizedName:"ئۇيغۇرچە‎",direction:"rtl"},ui:{locale3:"mni",englishName:"Manipuri",localizedName:"Meitei",direction:"ltr"},uk:{locale3:"ukr",englishName:"Ukrainian",localizedName:"Українська",direction:"ltr"},um:{locale3:"umb",englishName:"Umbundu",localizedName:"Úmbúndú",direction:"ltr"},un:{locale3:"arn",englishName:"Mapudungun",localizedName:"Mapuche",direction:"ltr"},ur:{locale3:"urd",englishName:"Urdu",localizedName:"اردو",direction:"rtl"},ut:{locale3:"tet",englishName:"Tetum",localizedName:"Lia-Tetun",direction:"ltr"},uy:{locale3:"kum",englishName:"Kumyk",localizedName:"къумукъ тил/qumuq til",direction:"ltr"},uz:{locale3:"uzb",englishName:"Uzbek",localizedName:"ЎзбекЎзбек тили",direction:"ltr"},va:{locale3:"vai",englishName:"Vai",localizedName:"ꕙꔤ",direction:"ltr"},ve:{locale3:"ven",englishName:"Venda",localizedName:"Tshivenḓa",direction:"ltr"},vi:{locale3:"vie",englishName:"Vietnamese",localizedName:"Tiếng Việt",direction:"ltr"},vs:{locale3:"bla",englishName:"Siksika",localizedName:"ᓱᖽᐧᖿ",direction:"ltr"},vt:{locale3:"vot",englishName:"Votic",localizedName:"vađđa ceeli",direction:"ltr"},wa:{locale3:"wln",englishName:"Walloon",localizedName:"walon",direction:"ltr"},wl:{locale3:"wal",englishName:"Wolaitta",localizedName:"Wolayttatto Doonaa",direction:"ltr"},wo:{locale3:"wol",englishName:"Wolof",localizedName:"Wollof",direction:"ltr"},wr:{locale3:"war",englishName:"Waray",localizedName:"Winaray",direction:"ltr"},ws:{locale3:"was",englishName:"Washo",localizedName:"wá:šiw ʔítlu",direction:"ltr"},xa:{locale3:"xal",englishName:"Kalmyk",localizedName:"Хальмг келн",direction:"ltr"},xh:{locale3:"xho",englishName:"Xhosa",localizedName:"isiXhosa",direction:"ltr"},xl:{locale3:"lol",englishName:"Mongo",localizedName:"Lomongo",direction:"ltr"},xr:{locale3:"mwr",englishName:"Marwari",localizedName:"मारवाड़ी",direction:"ltr"},xs:{locale3:"suk",englishName:"Sukuma",localizedName:"Kɪsukuma",direction:"ltr"},xt:{locale3:"srn",englishName:"Sranan Tongo",localizedName:"Sranan Tongo",direction:"ltr"},ya:{locale3:"yao",englishName:"Yao",localizedName:"chiYao",direction:"ltr"},yi:{locale3:"yid",englishName:"Yiddish",localizedName:"ייִדיש",direction:"ltr"},yk:{locale3:"sah",englishName:"Yakut",localizedName:"Сахалыы",direction:"ltr"},yn:{locale3:"myn",englishName:"Mayan",localizedName:"Maya",direction:"ltr"},yo:{locale3:"yor",englishName:"Yoruba",localizedName:"Yorùbá",direction:"ltr"},yp:{locale3:"yap",englishName:"Yapese",localizedName:"Thin nu Wa’ab",direction:"ltr"},za:{locale3:"zha",englishName:"Zhuang",localizedName:"Saɯ cueŋƅ",direction:"ltr"},ze:{locale3:"zen",englishName:"Zenaga",localizedName:"Tuẓẓungiyya",direction:"ltr"},zg:{locale3:"zgh",englishName:"Standard Moroccan Tamazight",localizedName:"ⵜⴰⵎⴰⵣⵉⵖⵜ ⵜⴰⵏⴰⵡⴰⵢⵜ",direction:"ltr"},zh_CN:{locale3:"zho",englishName:"Chinese, Simplified",localizedName:"中文 (中国)",direction:"ltr"},zh_HK:{englishName:"Chinese, Hong Kong",localizedName:"中文 (香港)",direction:"ltr"},zh_MO:{englishName:"Chinese (Macau)",localizedName:"中文（澳门）",direction:"ltr"},zh_SG:{englishName:"Chinese (Singapore)",localizedName:"中文（新加坡）",direction:"ltr"},zh_TW:{englishName:"Chinese, Traditional",localizedName:"中文 (台灣)",direction:"ltr"},zn:{locale3:"zun",englishName:"Zuni",localizedName:"Shiwi'ma",direction:"ltr"},zp:{locale3:"zap",englishName:"Zapotec",localizedName:"Diidxazá",direction:"ltr"},zt:{locale3:"tzj",englishName:"tz'utujil",localizedName:"Tzʼutujiil",direction:"ltr"},zu:{locale3:"zul",englishName:"Zulu",localizedName:"isiZulu",direction:"ltr"},zz:{locale3:"zza",englishName:"Zaza",localizedName:"kirmanckî",direction:"ltr"}};phet.chipper.localeData=vT;self.phet=self.phet||{};self.phet.chipper=self.phet.chipper||{};const mm={aa:{},ab:{},ac:{},ad:{},af:{},ag:{},ah:{},ai:{},aj:{},ak:{},ak_FT:{},al:{},am:{},an:{},ao:{},ap:{},ar:{},ar_AE:{},ar_BH:{},ar_DJ:{},ar_DZ:{},ar_EG:{},ar_EH:{},ar_ER:{},ar_IQ:{},ar_JO:{},ar_KM:{},ar_KW:{},ar_LB:{},ar_LY:{},ar_MA:{},ar_MR:{},ar_OM:{},ar_QA:{},ar_SA:{},ar_SD:{},ar_SO:{},ar_SY:{},ar_TD:{},ar_TN:{},ar_YE:{},as:{},at:{},au:{},av:{},aw:{},ax:{},ay:{},az:{},ba:{},bb:{},bc:{},bd:{},be:{},bg:{},bi:{},bj:{},bk:{},bl:{},bm:{},bn:{},bo:{},bp:{},bq:{},br:{},bs:{},bt:{},bu:{},bx:{},by:{},ca:{},cb:{},cc:{},cd:{},ce:{},ch:{},ci:{},cj:{},ck:{},cl:{},cm:{},cn:{},co:{},cp:{},cq:{},cr:{},cs:{},ct:{},cv:{},cw:{},cy:{},cz:{},da:{},db:{},de:{},de_AT:{},de_CH:{},de_LI:{},de_LU:{},dg:{},di:{},dk:{},dl:{},dm:{},dn:{},dr:{},ds:{},du:{},dv:{},dw:{},dy:{},dz:{},ed:{},ee:{},ef:{},ek:{},el:{},em:{},en:{},en_AU:{},en_BI:{},en_BW:{},en_BZ:{},en_CA:{},en_CB:{},en_CM:{},en_ER:{},en_ET:{},en_GB:{},en_GH:{},en_GM:{},en_IE:{},en_IN:{},en_JM:{},en_KE:{},en_LR:{},en_LS:{},en_MU:{},en_MW:{},en_MY:{},en_NA:{},en_NG:{},en_NZ:{},en_PH:{},en_RW:{},en_SC:{},en_SL:{},en_SS:{},en_SZ:{},en_TT:{},en_TZ:{},en_UG:{},en_ZA:{},en_ZM:{},en_ZW:{},er:{},es:{},es_AR:{},es_BO:{},es_CL:{},es_CO:{},es_CR:{},es_DO:{},es_EC:{},es_ES:{},es_GQ:{},es_GT:{},es_HN:{},es_MX:{},es_NI:{},es_PA:{},es_PE:{},es_PR:{},es_PY:{},es_SV:{},es_US:{},es_UY:{},es_VE:{},et:{},eu:{},ew:{},fa:{},fa_DA:{},ff:{},fg:{},fi:{},fj:{},fl:{},fn:{},fo:{},fr:{},fr_BE:{},fr_BF:{},fr_BI:{},fr_BJ:{},fr_CA:{},fr_CD:{},fr_CF:{},fr_CG:{},fr_CH:{},fr_CI:{},fr_CM:{},fr_DJ:{},fr_EH:{},fr_GA:{},fr_GN:{},fr_GQ:{},fr_KM:{},fr_LU:{},fr_MC:{},fr_MG:{},fr_ML:{},fr_NE:{},fr_RW:{},fr_SC:{},fr_SN:{},fr_TD:{},fr_TG:{},fs:{},fu:{},fy:{},ga:{},gb:{},gc:{},gd:{},gf:{},gg:{},gk:{},gl:{},gn:{},go:{},gr:{},gs:{},gt:{},gu:{},gv:{},gw:{},gy:{},ha:{},hd:{},hh:{},hi:{},hk:{},hl:{},hm:{},hn:{},ho:{},hp:{},hr:{},hr_BA:{},hs:{},ht:{},hu:{},hw:{},hx:{},hy:{},hz:{},ib:{},ig:{},ih:{},ii:{},ik:{},il:{},im:{},in:{},iq:{},is:{},it:{},it_CH:{},iu:{},iv:{},iw:{},ix:{},ja:{},jb:{},jp:{},jr:{},jv:{},ka:{},kb:{},kc:{},kd:{},ke:{},kf:{},kg:{},kh:{},ki:{},kj:{},kk:{},kl:{},km:{},kn:{},ko:{},kp:{},kq:{},kr:{},ks:{},kt:{},ku:{},ku_TR:{},kv:{},kw:{},kx:{},ky:{},kz:{},lb:{},ld:{},lg:{},lh:{},li:{},lk:{},ll:{},lm:{},ln:{},lo:{},lp:{},ls:{},lt:{},lu:{},lv:{},lw:{},lx:{},ly:{},lz:{},ma:{},mb:{},mc:{},md:{},me:{},mf:{},mg:{},mh:{},mi:{},mk:{},ml:{},mm:{},mn:{},mo:{},mq:{},mr:{},ms:{},ms_MY:{},mt:{},mu:{},mv:{},mw:{},mx:{},my:{},mz:{},na:{},nb:{},nc:{},nd:{},ne:{},nf:{},ng:{},nh:{},ni:{},nk:{},nl:{},nl_BE:{},nm:{},nn:{},np:{},nq:{},nr:{},ns:{},nt:{},nu:{},nv:{},nw:{},nx:{},ny:{},nz:{},oa:{},oc:{},oe:{},og:{},oi:{},oj:{},ok:{},ol:{},om:{},oo:{},op:{},or:{},os:{},ot:{},ou:{},pa:{},pg:{},pl:{},pm:{},pn:{},pp:{},ps:{},pt:{},pt_AO:{},pt_BR:{},pt_CV:{},pt_GQ:{},pt_GW:{},pt_MZ:{},pt_ST:{},pu:{},qc:{},qe:{},qu:{},ra:{},rb:{},rc:{},re:{},rh:{},ri:{},rj:{},rl:{},rn:{},ro:{},rp:{},rr:{},ru:{},rw:{},ry:{},rz:{},sb:{},sc:{},sd:{},se:{},sg:{},sh:{},si:{},sj:{},sk:{},sl:{},sm:{},sn:{},so:{},sp:{},sq:{},sr:{},sr_BA:{},ss:{},st:{},su:{},sv:{},sv_FI:{},sw:{},sx:{},sy:{},sz:{},ta:{},tc:{},te:{},tg:{},th:{},ti:{},tj:{},tk:{},tl:{},tm:{},tn:{},to:{},tp:{},tq:{},tr:{},ts:{},tt:{},tu:{},tv:{},tw:{},tx:{},ty:{},tz:{},ua:{},ud:{},ug:{},ui:{},uk:{},um:{},un:{},ur:{},ut:{},uy:{},uz:{},va:{},ve:{},vi:{},vs:{},vt:{},wa:{},wl:{},wo:{},wr:{},ws:{},xa:{},xh:{},xl:{},xr:{},xs:{},xt:{},ya:{},yi:{},yk:{},yn:{},yo:{},yp:{},za:{},ze:{},zg:{},zh_CN:{},zh_HK:{},zh_MO:{},zh_SG:{},zh_TW:{},zn:{},zp:{},zt:{},zu:{},zz:{}};phet.chipper.strings=mm;phet.chipper.availableLocales&&Object.keys(mm).forEach(n=>{phet.chipper.availableLocales.includes(n)||delete mm[n]});(function(){var p,g,A,C;self.phet=self.phet??{},self.phet.preloads=self.phet.preloads||{},self.phet.chipper=self.phet.chipper??{};const e=(phet.chipper.packageObject??{}).phet??{},t=phet.chipper.allowLocaleSwitching??!0,i=e.simFeatures??{},s="default",r="en",o=i.colorProfiles??[s],c={allowLinks:{type:"boolean",defaultValue:!0,public:!0},audio:{type:"string",defaultValue:"enabled",validValues:["enabled","disabled","muted"],public:!0},binder:{type:"flag"},brand:{type:"string",defaultValue:"adapted-from-phet"},buildCompatible:{type:"flag"},continuousTest:{type:"string",defaultValue:""},colorProfile:{type:"string",defaultValue:o[0],validValues:o,public:!0},launchCounter:{type:"flag"},debugger:{type:"flag"},deprecationWarnings:{type:"flag"},dev:{type:"flag"},disableModals:{type:"flag"},ea:{type:"flag"},eall:{type:"flag"},extraSoundInitiallyEnabled:{type:"flag",public:!0},forceSVGRefresh:{type:"flag"},fuzz:{type:"flag"},fuzzBoard:{type:"flag"},fuzzMouse:{type:"flag"},fuzzPointers:{type:"number",defaultValue:1},fuzzTouch:{type:"flag"},fuzzRate:{type:"number",defaultValue:100,isValidValue:function(D){return D>0}},ga4:{type:"string",defaultValue:null,public:!0},gameUp:{type:"flag"},gameUpTestHarness:{type:"flag"},gameUpLogging:{type:"flag"},gaPage:{type:"string",defaultValue:null},homeScreen:{type:"boolean",defaultValue:!0,public:!0},initialScreen:{type:"number",defaultValue:0,public:!0},interruptMultitouch:{type:"boolean",defaultValue:((p=e==null?void 0:e.simFeatures)==null?void 0:p.interruptMultitouch)??!1},legendsOfLearning:{type:"flag"},listenerLimit:{type:"number",defaultValue:Number.POSITIVE_INFINITY,public:!1},locale:{type:"string",defaultValue:self.phet.chipper.locale??r},supportsDynamicLocale:{type:"boolean",defaultValue:t&&!!i.supportsDynamicLocale},log:{type:"flag"},memoryLimit:{type:"number",defaultValue:0},mobileA11yTest:{type:"flag"},"phet-android-app":{type:"flag"},"phet-app":{type:"flag"},playbackMode:{type:"boolean",defaultValue:!1},postMessageOnBeforeUnload:{type:"flag"},postMessageOnError:{type:"flag"},postMessageOnLoad:{type:"flag"},postMessageOnReady:{type:"flag"},preventFullScreen:{type:"flag"},preventMultitouch:{type:"boolean",defaultValue:((g=e==null?void 0:e.simFeatures)==null?void 0:g.preventMultitouch)??!1},profiler:{type:"flag"},qrCode:{type:"flag"},randomSeed:{type:"number",defaultValue:Math.random()},regionAndCulture:{public:!0,type:"string",defaultValue:((A=e==null?void 0:e.simFeatures)==null?void 0:A.defaultRegionAndCulture)??"usa"},rootRenderer:{type:"string",defaultValue:null,validValues:[null,"canvas","svg","dom","webgl","vello"]},sceneryLog:{type:"array",elementSchema:{type:"string"},defaultValue:null},sceneryStringLog:{type:"flag"},screens:{type:"array",elementSchema:{type:"number",isValidValue:Number.isInteger},defaultValue:null,isValidValue:function(D){return D===null||D.length===te.uniq(D).length&&D.length>0},public:!0},showAnswers:{type:"flag",private:!0},showCanvasNodeBounds:{type:"flag"},showFittedBlockBounds:{type:"flag"},showHitAreas:{type:"flag"},showPointerAreas:{type:"flag"},showPointers:{type:"flag"},showVisibleBounds:{type:"flag"},listenerOrder:{type:"string",defaultValue:"default",isValidValue:function(D){const P=/random(?:%28|\()(\d+)(?:%29|\))/;return D==="default"||D==="random"||D==="reverse"||D.match(P)}},speechSynthesisFromParent:{type:"flag"},speed:{type:"number",defaultValue:1,isValidValue:function(D){return D>0}},stringTest:{type:"string",defaultValue:null},keyboardLocaleSwitcher:{type:"flag"},supportsDescriptionPlugin:{type:"boolean",defaultValue:!!i.supportsDescriptionPlugin},supportsInteractiveDescription:{type:"boolean",defaultValue:!!i.supportsInteractiveDescription},supportsInteractiveHighlights:{type:"boolean",defaultValue:i.hasOwnProperty("supportsInteractiveHighlights")?!!i.supportsInteractiveHighlights:!!i.supportsInteractiveDescription},interactiveHighlightsInitiallyEnabled:{type:"flag",public:!0},supportsGestureControl:{type:"boolean",defaultValue:!!i.supportsGestureControl},supportsVoicing:{type:"boolean",defaultValue:!!i.supportsVoicing},supportsTier1Voicing:{type:"boolean",defaultValue:!!i.supportsTier1Voicing},swashText:{type:"boolean",defaultValue:!0},swashTextColor:{type:"string",defaultValue:""},voicingInitiallyEnabled:{type:"flag",public:!0},preferencesStorage:{type:"flag"},printVoicingResponses:{type:"flag"},supportsPanAndZoom:{type:"boolean",public:!0,defaultValue:!i.hasOwnProperty("supportsPanAndZoom")||i.supportsPanAndZoom},supportsSound:{type:"boolean",defaultValue:!!i.supportsSound},supportsExtraSound:{type:"boolean",defaultValue:!!i.supportsExtraSound},vibrationParadigm:{type:"string",defaultValue:null},voicingAddObjectResponses:{type:"flag",public:!0},voicingAddContextResponses:{type:"flag",public:!0},voicingAddHintResponses:{type:"flag",public:!0},voicingCollapseToolbar:{type:"flag",public:!0},voicingRemoveToolbar:{type:"flag",public:!0},webgl:{type:"boolean",defaultValue:!0},yotta:{type:"boolean",defaultValue:!0,public:!0}};self.phet.chipper.queryParameters=wl.getAll(c),self.phet.chipper.isProduction=self.document?((C=self.document.querySelector('meta[name="phet-sim-level"]'))==null?void 0:C.content)==="production":!0,self.phet.chipper.isApp=phet.chipper.queryParameters["phet-app"]||phet.chipper.queryParameters["phet-android-app"],function(){const D=!phet.chipper.isProduction&&phet.chipper.queryParameters.eall;D||!phet.chipper.isProduction&&phet.chipper.queryParameters.ea||phet.chipper.isDebugBuild,D&&enableAssertSlow()}();{self.phet.chipper.colorProfiles=o,self.phet.chipper.isFuzzEnabled=()=>self.phet.chipper.queryParameters.fuzz||self.phet.chipper.queryParameters.fuzzMouse||self.phet.chipper.queryParameters.fuzzTouch||self.phet.chipper.queryParameters.fuzzBoard,self.phet.chipper.supportsAnyVoicing=()=>self.phet.chipper.queryParameters.supportsVoicing||self.phet.chipper.queryParameters.supportsTier1Voicing,self.phet.chipper.queryParameters.log&&(self.phet.log=function(P,F){F=te.assignIn({color:"#009900"},F),console.log(`%c${P}`,`color: ${F.color}`)}),self.phet.chipper.brand=self.phet.chipper.brand||phet.chipper.queryParameters.brand||"adapted-from-phet";const D=typeof self<"u"&&phet.chipper.queryParameters.stringTest?phet.chipper.queryParameters.stringTest:null;self.phet.chipper.mapString=function(P){const F="script";return D===null?P:D==="double"?`${P}:${P}`:D==="long"?"12345678901234567890123456789012345678901234567890":D==="rtl"?"‫تست (زبان)‬":D==="xss"?`${P}<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg==" onload="window.location.href=atob('aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQ==')" />`:D==="xss2"?`${P}<${F}>alert('XSS')</${F}>`:D==="none"||D==="dynamic"?P:D},phet.chipper.remapLocale=(P,F=!1)=>{const K=P;if(P.length<5)P=P.toLowerCase();else{P=P.replace(/-/,"_");const re=P.split("_");re.length===2&&(P=re[0].toLowerCase()+"_"+re[1].toUpperCase())}if(P.length===3){for(const re of Object.keys(phet.chipper.localeData))if(phet.chipper.localeData[re].locale3===P){P=re;break}}const M=/^[a-zA-Z]{2}$/,U=/^[a-zA-Z]{3}$/,$=/^[a-zA-Z]{2}[_-][a-zA-Z]{2}$/;if(!phet.chipper.localeData[P]){const re=K;!M.test(re)&&!U.test(re)&&!$.test(re)&&(F||wl.addWarning("locale",K,`Invalid locale format received: ${re}. ?locale query parameter accepts the following formats: "xx" for ISO-639-1, "xx_XX" for ISO-639-1 and a 2-letter country code, "xxx" for ISO-639-2`)),P=r}return P},phet.chipper.getValidRuntimeLocale=P=>{var M;return[P,...((M=phet.chipper.localeData[P])==null?void 0:M.fallbackLocales)??[],r].find(U=>!!phet.chipper.strings[U])},phet.chipper.checkAndRemapLocale=(P=phet.chipper.queryParameters.locale,F=!1)=>{var U;if(!phet.chipper.localeData||!((U=phet.chipper.strings)!=null&&U.hasOwnProperty(r))||!P)return P;const K=phet.chipper.remapLocale(P,F),M=phet.chipper.getValidRuntimeLocale(K);return phet.chipper.remappedLocale=K,phet.chipper.locale=M,M},phet.chipper.queryParameters.locale===null&&(phet.chipper.queryParameters.locale=r),phet.chipper.checkAndRemapLocale()}self.phet.chipper.makeEverythingSlow=function(){self.setInterval(()=>{},16)},self.phet.chipper.makeRandomSlowness=function(){self.setInterval(()=>{},Math.ceil(100+Math.random()*200))},function(){self.phet.chipper.reportContinuousTestResult=D=>{self.parent&&self.parent.postMessage(JSON.stringify(te.assignIn({continuousTest:JSON.parse(phet.chipper.queryParameters.continuousTest),url:self.location.href},D)),"*")},phet.chipper.queryParameters.continuousTest&&(self.addEventListener("error",D=>{let P="",F="";D&&D.message&&(P=D.message),D&&D.error&&D.error.stack&&(F=D.error.stack),phet.chipper.reportContinuousTestResult({type:"continuous-test-error",message:P,stack:F})}),self.addEventListener("beforeunload",D=>{phet.chipper.reportContinuousTestResult({type:"continuous-test-unload"})}),self.open=()=>({focus:()=>{},blur:()=>{}})),phet.chipper.queryParameters.postMessageOnError&&self.addEventListener("error",D=>{let P="",F="";D&&D.message&&(P=D.message),D&&D.error&&D.error.stack&&(F=D.error.stack),self.parent&&self.parent.postMessage(JSON.stringify({type:"error",url:self.location.href,message:P,stack:F}),"*")}),phet.chipper.queryParameters.postMessageOnBeforeUnload&&self.addEventListener("beforeunload",D=>{self.parent&&self.parent.postMessage(JSON.stringify({type:"beforeUnload"}),"*")})}(),(()=>{const D={supportsInteractiveDescription:{type:"boolean"},supportsVoicing:{type:"boolean"},supportsTier1Voicing:{type:"boolean"},supportsInteractiveHighlights:{type:"boolean"},supportsDescriptionPlugin:{type:"boolean"},supportsSound:{type:"boolean"},supportsExtraSound:{type:"boolean"},supportsDynamicLocale:{type:"boolean"},supportsPanAndZoom:{type:"boolean"},colorProfiles:{type:"array"},supportedRegionsAndCultures:{type:"array"},defaultRegionAndCulture:{type:"string"},preventMultitouch:{type:"boolean"},interruptMultitouch:{type:"boolean"}};if(Object.keys(D).forEach(P=>{}),e.hasOwnProperty("simFeatures")){const P=e.simFeatures;Object.keys(P).forEach(F=>{P[F],D[F]&&(D[F.type]==="boolean"||D[F.type])})}})()})();const tA={},e1=(n,e=self.phet&&self.phet.chipper&&self.phet.chipper.queryParameters&&phet.chipper.queryParameters.deprecationWarnings)=>{e&&!tA.hasOwnProperty(n)&&(tA[n]=!0,console.warn(`Deprecation warning: ${n}`))};class f0{constructor(e){var t,i;if(this.name=e,!!globalThis.self&&globalThis.phet){if(e==="chipper")return globalThis.phet.chipper=globalThis.phet.chipper||{},globalThis.phet.chipper.name="chipper",globalThis.phet.chipper.register=this.register.bind(globalThis.phet.chipper),globalThis.phet.chipper;{const s=!((i=(t=globalThis.phet)==null?void 0:t.chipper)!=null&&i.brand)||e==="joist";Fn()&&!s&&Et(!globalThis.phet[e],`namespace ${e} already exists`),globalThis.phet[e]=this}}}register(e,t){if(!globalThis.self)return t;if(e.includes("."))Et(!this[e],`${e} is already registered for namespace ${this.name}`),this[e]=t;else{const i=e.split(".");let s=this;for(let o=0;o<i.length-1;o++)Et(!!s[i[o]],`${[this.name].concat(i.slice(0,o+1)).join(".")} needs to be defined to register ${e}`),s=s[i[o]];const r=i[i.length-1];Et(!s[r],`${e} is already registered for namespace ${this.name}`),s[r]=t}return t}}class sc{constructor(e){e1("EnumerationDeprecated should be exchanged for classes that extend EnumerationValue, see WilderEnumerationPatterns for examples."),Et(e,"config must be provided");const t=!!e.keys,i=!!e.map;Et(t!==i,"must provide one or the other but not both of keys/map");const s=e.keys||Object.keys(e.map),r=e.map||{};e=dn({phetioDocumentation:null,beforeFreeze:null},e),Et(Array.isArray(s),"Values should be an array"),Et(te.uniq(s).length===s.length,"There should be no duplicated values provided"),Fn()&&s.forEach(o=>Et(typeof o=="string","Each value should be a string")),Fn()&&s.forEach(o=>Et(/^[A-Z][A-Z0-9_]*$/g.test(o),"EnumerationDeprecated values should be uppercase alphanumeric with underscores and begin with a letter")),Et(!te.includes(s,"VALUES"),"This is the name of a built-in provided value, so it cannot be included as an enumeration value"),Et(!te.includes(s,"KEYS"),"This is the name of a built-in provided value, so it cannot be included as an enumeration value"),Et(!te.includes(s,"includes"),"This is the name of a built-in provided value, so it cannot be included as an enumeration value"),this.phetioDocumentation=e.phetioDocumentation,this.KEYS=s,this.VALUES=[],s.forEach(o=>{const c=r[o]||{};Et(c.name===void 0,'"rich" enumeration values cannot provide their own name attribute'),Et(c.toString===Object.prototype.toString,'"rich" enumeration values cannot provide their own toString'),c.name=o,c.toString=()=>o,this[o]=c,this.VALUES.push(c)}),e.beforeFreeze&&e.beforeFreeze(this),Fn()&&Object.freeze(this),Fn()&&Object.freeze(this.VALUES),Fn()&&Object.freeze(this.KEYS),Fn()&&s.forEach(o=>Fn()&&Object.freeze(r[o]))}toString(){return this.KEYS.join(", ")}includes(e){return te.includes(this.VALUES,e)}getValue(e){return this[e]}getKey(e){return e.name}get values(){return this.VALUES}get keys(){return this.KEYS}get enumeration(){return this}static byKeys(e,t){return Et(Array.isArray(e),"keys must be an array"),Et(!t||t.keys===void 0),new sc(dn({keys:e},t))}static byMap(e,t){if(Et(!t||t.map===void 0),Fn()){const i=te.values(e);Et(i.length>=1,"must have at least 2 entries in an enumeration"),Et(te.every(i,s=>s.constructor===i[0].constructor),"Values must have same constructor")}return new sc(dn({map:e},t))}}const VT=["string","number","boolean","function"],Od=["valueType","validValues","valueComparisonStrategy","isValidValue","phetioType","validators"];class zi{static getValidatorValidationError(e){if(!(e instanceof Object))return"validator must be an Object";if(!(e.hasOwnProperty("isValidValue")||e.hasOwnProperty("valueType")||e.hasOwnProperty("validValues")||e.hasOwnProperty("valueComparisonStrategy")||e.hasOwnProperty("phetioType")||e.hasOwnProperty("validators")))return this.combineErrorMessages(`validator must have at least one of: ${Od.join(",")}`,e.validationMessage);if(e.hasOwnProperty("valueType")){const t=zi.getValueOrElementTypeValidationError(e.valueType);if(t)return this.combineErrorMessages(`Invalid valueType: ${e.valueType}, error: ${t}`,e.validationMessage)}if(e.hasOwnProperty("isValidValue")&&!(typeof e.isValidValue=="function"||e.isValidValue===null||e.isValidValue===void 0))return this.combineErrorMessages(`isValidValue must be a function: ${e.isValidValue}`,e.validationMessage);if(e.hasOwnProperty("valueComparisonStrategy")&&!(e.valueComparisonStrategy==="reference"||e.valueComparisonStrategy==="lodashDeep"||e.valueComparisonStrategy==="equalsFunction"||typeof e.valueComparisonStrategy=="function"))return this.combineErrorMessages(`valueComparisonStrategy must be "reference", "lodashDeep", 
        "equalsFunction", or a comparison function: ${e.valueComparisonStrategy}`,e.validationMessage);if(e.validValues!==void 0&&e.validValues!==null){if(!Array.isArray(e.validValues))return this.combineErrorMessages(`validValues must be an array: ${e.validValues}`,e.validationMessage);const t=te.omit(e,"validValues");if(zi.containsValidatorKey(t))for(let i=0;i<e.validValues.length;i++){const s=e.validValues[i],r=zi.getValidationError(s,t);if(r)return this.combineErrorMessages(`Item not valid in validValues: ${s}, error: ${r}`,e.validationMessage)}}if(e.hasOwnProperty("phetioType")){if(!e.phetioType)return this.combineErrorMessages("falsey phetioType provided",e.validationMessage);if(!e.phetioType.validator)return this.combineErrorMessages(`validator needed for phetioType: ${e.phetioType.typeName}`,e.validationMessage);const t=zi.getValidatorValidationError(e.phetioType.validator);if(t)return this.combineErrorMessages(t,e.validationMessage)}if(e.hasOwnProperty("validators")){const t=e.validators;for(let i=0;i<t.length;i++){const s=t[i],r=zi.getValidatorValidationError(s);if(r)return this.combineErrorMessages(`validators[${i}] invalid: ${r}`,e.validationMessage)}}return null}static getValueTypeValidatorValidationError(e){return typeof e=="function"||typeof e=="string"||e instanceof sc||e===null||e===void 0?typeof e=="string"&&!te.includes(VT,e)?`valueType not a supported primitive types: ${e}`:null:`valueType must be {function|string|EnumerationDeprecated|null|undefined}, valueType=${e}`}static validateValidator(e){}static containsValidatorKey(e){if(!(e instanceof Object))return!1;for(let t=0;t<Od.length;t++)if(e.hasOwnProperty(Od[t]))return!0;return!1}static combineErrorMessages(e,t){return t&&(e=`${typeof t=="function"?t():t}: ${e}`),e}static isValueValid(e,t,i){return this.getValidationError(e,t,i)===null}static getValidationError(e,t,i){const s=lt()({validateValidator:!0},i);if(s.validateValidator){const r=zi.getValidatorValidationError(t);if(r)return r}if(t.hasOwnProperty("valueType")){const r=t.valueType;if(Array.isArray(r)){if(!te.some(r.map(o=>!zi.getValueTypeValidationError(e,o,t.validationMessage))))return this.combineErrorMessages(`value not valid for any valueType in ${r.toString().substring(0,100)}, value: ${e}`,t.validationMessage)}else if(r){const o=zi.getValueTypeValidationError(e,r,t.validationMessage);if(o)return o}}if(t.validValues){const r=t.valueComparisonStrategy||"reference";if(!t.validValues.some(c=>zi.equalsForValidationStrategy(c,e,r)))return this.combineErrorMessages(`value not in validValues: ${e}`,t.validationMessage)}if(t.hasOwnProperty("isValidValue")&&!t.isValidValue(e))return this.combineErrorMessages(`value failed isValidValue: ${e}`,t.validationMessage);if(t.hasOwnProperty("phetioType")){const r=zi.getValidationError(e,t.phetioType.validator,s);if(r)return this.combineErrorMessages(`value failed phetioType validator: ${e}, error: ${r}`,t.validationMessage)}if(t.hasOwnProperty("validators")){const r=t.validators;for(let o=0;o<r.length;o++){const c=r[o],p=zi.getValidationError(e,c,s);if(p)return this.combineErrorMessages(`Failed validation for validators[${o}]: ${p}`,t.validationMessage)}}return null}static getValueTypeValidationError(e,t,i){return typeof t=="string"&&typeof e!==t?this.combineErrorMessages(`value should have typeof ${t}, value=${e}`,i):t===Array&&!Array.isArray(e)?this.combineErrorMessages(`value should have been an array, value=${e}`,i):t instanceof sc&&!t.includes(e)?this.combineErrorMessages(`value is not a member of EnumerationDeprecated ${t}`,i):typeof t=="function"&&!(e instanceof t)?this.combineErrorMessages(`value should be instanceof ${t.name}, value=${e}`,i):t===null&&e!==null?this.combineErrorMessages(`value should be null, value=${e}`,i):null}static getValueOrElementTypeValidationError(e){if(Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t],s=zi.getValueTypeValidatorValidationError(i);if(s)return`Array value invalid: ${s}`}else if(e){const t=zi.getValueTypeValidatorValidationError(e);if(t)return`Value type invalid: ${t}`}return null}static equalsForValidationStrategy(e,t,i="reference"){if(i==="reference")return e===t;if(i==="equalsFunction"){if(e!=null&&t!=null){const s=e,r=t,o=s.equals(r);return e.constructor===t.constructor?o:o&&r.equals(e)}return e===t}return i==="lodashDeep"?te.isEqual(e,t):i(e,t)}}zi.VALIDATOR_KEYS=Od;zi.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR={valueType:"string",isValidValue:n=>!/\{\{\w*\}\}/.test(n)};const ST={IO_TYPE_SUFFIX:"IO"},t1="ObjectIO",i1="MODEL",wT={phetioTypeName:t1,phetioDocumentation:"",phetioState:!0,phetioReadOnly:!1,phetioEventType:i1,phetioHighFrequency:!1,phetioPlayback:!1,phetioDynamicElement:!1,phetioIsArchetype:!1,phetioFeatured:!1,phetioDesigned:!1,phetioArchetypePhetioID:null},s1="a-zA-Z0-9[\\],",CT=`${s1}_`,PT=`${CT}\\-`,Tr={OBJECT_IO_TYPE_NAME:t1,EVENT_TYPE_MODEL:i1,PHET_IO_OBJECT_METADATA_DEFAULTS:wT,BASE_TANDEM_CHARACTER_CLASS:s1,BASE_DERIVED_TANDEM_CHARACTER_CLASS:PT};class Ar{constructor(e){const t=lt()({displayString:"",validator:null,compositeSchema:null,apiStateKeys:null},e);this.displayString=t.displayString,this.validator=t.validator,this.compositeSchema=t.compositeSchema,this.apiStateKeys=t.apiStateKeys}defaultApplyState(e,t){for(const i in this.compositeSchema)if(this.compositeSchema.hasOwnProperty(i)){const s=this.compositeSchema[i],r=this.getCoreObjectAccessorName(i,e);s.defaultDeserializationMethod==="fromStateObject"?e[r]=this.compositeSchema[i].fromStateObject(t[i]):this.compositeSchema[i].applyState(e[r],t[i])}}defaultToStateObject(e){const t={};for(const i in this.compositeSchema)if(this.compositeSchema.hasOwnProperty(i)){const s=this.getCoreObjectAccessorName(i,e);t[i]=this.compositeSchema[i].toStateObject(e[s])}return t}getCoreObjectAccessorName(e,t){const i=e.startsWith("_")?e.substring(1):e,s=`_${i}`;let r;return t.hasOwnProperty(s)?r=s:r=i,r}isComposite(){return!!this.compositeSchema}checkStateObjectValid(e,t,i){if(this.isComposite()){const s=e,r=this.compositeSchema;let o=null;return s?(Object.keys(r).forEach(p=>{typeof p=="string"?(s.hasOwnProperty(p)&&r[p].isStateObjectValid(s[p],!1)||(o=!1),i.push(p)):console.error("key should be a string",p)}),o):(o=!1,o)}else{const s=e;return zi.isValueValid(s,this.validator)}}getRelatedTypes(){const e=[];return this.compositeSchema&&Object.keys(this.compositeSchema).forEach(i=>{e.push(this.compositeSchema[i])}),e}getStateSchemaAPI(){return this.isComposite()?te.mapValues(this.compositeSchema,e=>e.typeName):this.displayString}static asValue(e,t){return new Ar({validator:t,displayString:e})}}const ET=n=>!!n;let dg=!1,fg=0;const DT=n=>{const e=n.indexOf(ST.IO_TYPE_SUFFIX);return n.substring(0,e)};class Yt{constructor(e,t){this.typeName=e;const i=t.supertype||Yt.ObjectIO,s=!!t.toStateObject,r=!!t.applyState,o=!!t.stateSchema,c=lt()({supertype:Yt.ObjectIO,methods:{},events:[],metadataDefaults:{},dataDefaults:{},methodOrder:[],parameterTypes:[],documentation:`PhET-iO Type for ${DT(e)}`,isFunctionType:!1,fuzzElement:null,toStateObject:null,fromStateObject:null,stateObjectToCreateElementArguments:null,applyState:null,stateSchema:null,apiStateKeys:null,defaultDeserializationMethod:"fromStateObject",addChildElement:i&&i.addChildElement},t);if(this.supertype=i,this.documentation=c.documentation,this.methods=c.methods,this.events=c.events,this.metadataDefaults=c.metadataDefaults,this.dataDefaults=c.dataDefaults,this.methodOrder=c.methodOrder,this.parameterTypes=c.parameterTypes,this.fuzzElement=c.fuzzElement,this.validator=te.pick(c,zi.VALIDATOR_KEYS),this.validator.validationMessage=this.validator.validationMessage||`Validation failed IOType Validator: ${this.typeName}`,this.defaultDeserializationMethod=c.defaultDeserializationMethod,c.stateSchema===null||c.stateSchema instanceof Ar)this.stateSchema=c.stateSchema;else{const p=typeof c.stateSchema=="function"?c.stateSchema(this):c.stateSchema;this.stateSchema=new Ar({compositeSchema:p,apiStateKeys:c.apiStateKeys})}this.toStateObjectOption=c.toStateObject,this.fromStateObjectOption=c.fromStateObject,this.applyStateOption=c.applyState,this.stateObjectToCreateElementArgumentsOption=c.stateObjectToCreateElementArguments,this.toStateObjectSupplied=s,this.applyStateSupplied=r,this.stateSchemaSupplied=o,this.isFunctionType=c.isFunctionType,this.addChildElement=c.addChildElement}toStateObject(e){fg++;let t;!this.toStateObjectSupplied&&this.stateSchemaSupplied&&this.stateSchema&&this.stateSchema.isComposite()?t=this.defaultToStateObject(e):t=this.toStateObjectOption?this.toStateObjectOption(e):this.supertype.toStateObject(e);let i;return dg&&this.isCompositeStateSchema()&&!(fg>1&&this.apiStateKeysProvided())?i=te.pick(t,this.getAllAPIStateKeys()):i=t,fg--,i}fromStateObject(e){return this.fromStateObjectOption?this.fromStateObjectOption(e):this.supertype.fromStateObject(e)}applyState(e,t){d0(e,this.validator),this.applyStateSupplied||this.stateSchemaSupplied,!this.applyStateSupplied&&this.stateSchemaSupplied&&this.stateSchema&&this.stateSchema.isComposite()?this.defaultApplyState(e,t):this.applyStateOption?this.applyStateOption(e,t):this.supertype.applyState(e,t)}stateObjectToCreateElementArguments(e){return this.stateObjectToCreateElementArgumentsOption?this.stateObjectToCreateElementArgumentsOption(e):this.supertype.stateObjectToCreateElementArguments(e)}defaultToStateObject(e){let t={};return this.supertype&&(t=this.supertype.defaultToStateObject(e)),this.stateSchema&&this.stateSchema.isComposite()?te.merge(t,this.stateSchema.defaultToStateObject(e)):t}defaultApplyState(e,t){this.supertype&&this.supertype.defaultApplyState(e,t),this.stateSchema&&this.stateSchema.isComposite()&&this.stateSchema.defaultApplyState(e,t)}getTypeHierarchy(){const e=[];let t=this;for(;t;)e.push(t),t=t.supertype;return e}extends(e){return this.getTypeHierarchy().includes(e)}getAllMetadataDefaults(){return te.merge({},this.supertype?this.supertype.getAllMetadataDefaults():{},this.metadataDefaults)}getAllDataDefaults(){return te.merge({},this.supertype?this.supertype.getAllDataDefaults():{},this.dataDefaults)}isCompositeStateSchema(){var e,t;return((e=this.supertype)==null?void 0:e.isCompositeStateSchema())||!!((t=this.stateSchema)!=null&&t.compositeSchema)}getAllAPIStateKeyValues(e=[]){var t;return this.supertype&&this.supertype.getAllAPIStateKeyValues(e),e.push(((t=this.stateSchema)==null?void 0:t.apiStateKeys)||null),e}apiStateKeysProvided(){return this.getAllAPIStateKeyValues().filter(ET).length===0}getAllAPIStateKeys(){return te.concat(...this.getAllAPIStateKeyValues().map(e=>e||[]))}toStateObjectForAPI(e){dg=!0;const t=this.toStateObject(e);return dg=!1,t}isStateObjectValid(e,t=!1,i=[]){let s=!0;if(this.stateSchema){const r=this.stateSchema.checkStateObjectValid(e,t,i);if(r!==null)return r}return this.supertype?s&&this.supertype.isStateObjectValid(e,t,i):!this.supertype&&e&&typeof e!="string"&&!Array.isArray(e)?(Object.keys(e).forEach(r=>{i.includes(r)||(s=!1)}),s):!0}validateStateObject(e){this.isStateObjectValid(e,!0)}toString(){return this.typeName}getAPI(){const e={},t=te.keys(this.methods);for(let r=0;r<t.length;r++){const o=t[r],c=this.methods[o],p={returnType:c.returnType.typeName,parameterTypes:c.parameterTypes.map(iA),documentation:c.documentation};c.invocableForReadOnlyElements===!1&&(p.invocableForReadOnlyElements=!1),e[o]=p}const i=this.supertype,s={methods:e,supertype:i&&i.typeName,typeName:this.typeName,documentation:this.documentation,events:this.events,metadataDefaults:this.metadataDefaults,dataDefaults:this.dataDefaults,methodOrder:this.methodOrder};return this.stateSchema&&(s.stateSchema=this.stateSchema.getStateSchemaAPI(),this.stateSchema.apiStateKeys&&this.stateSchema.apiStateKeys.length>0&&(s.apiStateKeys=this.stateSchema.apiStateKeys)),this.parameterTypes&&(s.parameterTypes=this.parameterTypes.map(iA)),s}}const iA=n=>n.typeName,sA=null;Yt.ObjectIO=new Yt(Tr.OBJECT_IO_TYPE_NAME,{isValidValue:()=>!0,supertype:null,documentation:"The root of the PhET-iO Type hierarchy",toStateObject:n=>(phet&&phet.tandem&&phet.tandem.Tandem.VALIDATION,sA),fromStateObject:()=>{throw new Error("ObjectIO.fromStateObject should not be called")},stateObjectToCreateElementArguments:()=>[],applyState:te.noop,metadataDefaults:Tr.PHET_IO_OBJECT_METADATA_DEFAULTS,dataDefaults:{initialState:sA},stateSchema:null});const p0=new Yt("ValueIO",{isValidValue:te.stubTrue,supertype:Yt.ObjectIO,toStateObject:n=>n,fromStateObject:n=>n,stateSchema:Ar.asValue("*",{isValidValue:te.stubTrue})}),hl=new Yt("BooleanIO",{supertype:p0,valueType:"boolean",documentation:"PhET-iO Type for Javascript's boolean primitive type",stateSchema:Ar.asValue("boolean",{valueType:"boolean"}),toStateObject:te.identity});class er extends Map{constructor(e){super(e),er.caches.push(this)}static clearAll(){er.caches.forEach(e=>e.clear())}}er.caches=[];var g0={exports:{}};g0.exports;(function(n){(function(e,t,i){function s(p){var g=this,A=c();g.next=function(){var C=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=C-(g.c=C|0)},g.c=1,g.s0=A(" "),g.s1=A(" "),g.s2=A(" "),g.s0-=A(p),g.s0<0&&(g.s0+=1),g.s1-=A(p),g.s1<0&&(g.s1+=1),g.s2-=A(p),g.s2<0&&(g.s2+=1),A=null}function r(p,g){return g.c=p.c,g.s0=p.s0,g.s1=p.s1,g.s2=p.s2,g}function o(p,g){var A=new s(p),C=g&&g.state,D=A.next;return D.int32=function(){return A.next()*4294967296|0},D.double=function(){return D()+(D()*2097152|0)*11102230246251565e-32},D.quick=D,C&&(typeof C=="object"&&r(C,A),D.state=function(){return r(A,{})}),D}function c(){var p=4022871197,g=function(A){A=A.toString();for(var C=0;C<A.length;C++){p+=A.charCodeAt(C);var D=.02519603282416938*p;p=D>>>0,D-=p,D*=p,p=D>>>0,D-=p,p+=D*4294967296}return(p>>>0)*23283064365386963e-26};return g}t&&t.exports?t.exports=o:this.alea=o})(zn,n)})(g0);var TT=g0.exports,m0={exports:{}};m0.exports;(function(n){(function(e,t,i){function s(c){var p=this,g="";p.x=0,p.y=0,p.z=0,p.w=0,p.next=function(){var C=p.x^p.x<<11;return p.x=p.y,p.y=p.z,p.z=p.w,p.w^=p.w>>>19^C^C>>>8},c===(c|0)?p.x=c:g+=c;for(var A=0;A<g.length+64;A++)p.x^=g.charCodeAt(A)|0,p.next()}function r(c,p){return p.x=c.x,p.y=c.y,p.z=c.z,p.w=c.w,p}function o(c,p){var g=new s(c),A=p&&p.state,C=function(){return(g.next()>>>0)/4294967296};return C.double=function(){do var D=g.next()>>>11,P=(g.next()>>>0)/4294967296,F=(D+P)/(1<<21);while(F===0);return F},C.int32=g.next,C.quick=C,A&&(typeof A=="object"&&r(A,g),C.state=function(){return r(g,{})}),C}t&&t.exports?t.exports=o:this.xor128=o})(zn,n)})(m0);var IT=m0.exports,y0={exports:{}};y0.exports;(function(n){(function(e,t,i){function s(c){var p=this,g="";p.next=function(){var C=p.x^p.x>>>2;return p.x=p.y,p.y=p.z,p.z=p.w,p.w=p.v,(p.d=p.d+362437|0)+(p.v=p.v^p.v<<4^(C^C<<1))|0},p.x=0,p.y=0,p.z=0,p.w=0,p.v=0,c===(c|0)?p.x=c:g+=c;for(var A=0;A<g.length+64;A++)p.x^=g.charCodeAt(A)|0,A==g.length&&(p.d=p.x<<10^p.x>>>4),p.next()}function r(c,p){return p.x=c.x,p.y=c.y,p.z=c.z,p.w=c.w,p.v=c.v,p.d=c.d,p}function o(c,p){var g=new s(c),A=p&&p.state,C=function(){return(g.next()>>>0)/4294967296};return C.double=function(){do var D=g.next()>>>11,P=(g.next()>>>0)/4294967296,F=(D+P)/(1<<21);while(F===0);return F},C.int32=g.next,C.quick=C,A&&(typeof A=="object"&&r(A,g),C.state=function(){return r(g,{})}),C}t&&t.exports?t.exports=o:this.xorwow=o})(zn,n)})(y0);var xT=y0.exports,_0={exports:{}};_0.exports;(function(n){(function(e,t,i){function s(c){var p=this;p.next=function(){var A=p.x,C=p.i,D,P;return D=A[C],D^=D>>>7,P=D^D<<24,D=A[C+1&7],P^=D^D>>>10,D=A[C+3&7],P^=D^D>>>3,D=A[C+4&7],P^=D^D<<7,D=A[C+7&7],D=D^D<<13,P^=D^D<<9,A[C]=P,p.i=C+1&7,P};function g(A,C){var D,P=[];if(C===(C|0))P[0]=C;else for(C=""+C,D=0;D<C.length;++D)P[D&7]=P[D&7]<<15^C.charCodeAt(D)+P[D+1&7]<<13;for(;P.length<8;)P.push(0);for(D=0;D<8&&P[D]===0;++D);for(D==8?P[7]=-1:P[D],A.x=P,A.i=0,D=256;D>0;--D)A.next()}g(p,c)}function r(c,p){return p.x=c.x.slice(),p.i=c.i,p}function o(c,p){c==null&&(c=+new Date);var g=new s(c),A=p&&p.state,C=function(){return(g.next()>>>0)/4294967296};return C.double=function(){do var D=g.next()>>>11,P=(g.next()>>>0)/4294967296,F=(D+P)/(1<<21);while(F===0);return F},C.int32=g.next,C.quick=C,A&&(A.x&&r(A,g),C.state=function(){return r(g,{})}),C}t&&t.exports?t.exports=o:this.xorshift7=o})(zn,n)})(_0);var LT=_0.exports,A0={exports:{}};A0.exports;(function(n){(function(e,t,i){function s(c){var p=this;p.next=function(){var A=p.w,C=p.X,D=p.i,P,F;return p.w=A=A+1640531527|0,F=C[D+34&127],P=C[D=D+1&127],F^=F<<13,P^=P<<17,F^=F>>>15,P^=P>>>12,F=C[D]=F^P,p.i=D,F+(A^A>>>16)|0};function g(A,C){var D,P,F,K,M,U=[],$=128;for(C===(C|0)?(P=C,C=null):(C=C+"\0",P=0,$=Math.max($,C.length)),F=0,K=-32;K<$;++K)C&&(P^=C.charCodeAt((K+32)%C.length)),K===0&&(M=P),P^=P<<10,P^=P>>>15,P^=P<<4,P^=P>>>13,K>=0&&(M=M+1640531527|0,D=U[K&127]^=P+M,F=D==0?F+1:0);for(F>=128&&(U[(C&&C.length||0)&127]=-1),F=127,K=4*128;K>0;--K)P=U[F+34&127],D=U[F=F+1&127],P^=P<<13,D^=D<<17,P^=P>>>15,D^=D>>>12,U[F]=P^D;A.w=M,A.X=U,A.i=F}g(p,c)}function r(c,p){return p.i=c.i,p.w=c.w,p.X=c.X.slice(),p}function o(c,p){c==null&&(c=+new Date);var g=new s(c),A=p&&p.state,C=function(){return(g.next()>>>0)/4294967296};return C.double=function(){do var D=g.next()>>>11,P=(g.next()>>>0)/4294967296,F=(D+P)/(1<<21);while(F===0);return F},C.int32=g.next,C.quick=C,A&&(A.X&&r(A,g),C.state=function(){return r(g,{})}),C}t&&t.exports?t.exports=o:this.xor4096=o})(zn,n)})(A0);var kT=A0.exports,b0={exports:{}};b0.exports;(function(n){(function(e,t,i){function s(c){var p=this,g="";p.next=function(){var C=p.b,D=p.c,P=p.d,F=p.a;return C=C<<25^C>>>7^D,D=D-P|0,P=P<<24^P>>>8^F,F=F-C|0,p.b=C=C<<20^C>>>12^D,p.c=D=D-P|0,p.d=P<<16^D>>>16^F,p.a=F-C|0},p.a=0,p.b=0,p.c=-1640531527,p.d=1367130551,c===Math.floor(c)?(p.a=c/4294967296|0,p.b=c|0):g+=c;for(var A=0;A<g.length+20;A++)p.b^=g.charCodeAt(A)|0,p.next()}function r(c,p){return p.a=c.a,p.b=c.b,p.c=c.c,p.d=c.d,p}function o(c,p){var g=new s(c),A=p&&p.state,C=function(){return(g.next()>>>0)/4294967296};return C.double=function(){do var D=g.next()>>>11,P=(g.next()>>>0)/4294967296,F=(D+P)/(1<<21);while(F===0);return F},C.int32=g.next,C.quick=C,A&&(typeof A=="object"&&r(A,g),C.state=function(){return r(g,{})}),C}t&&t.exports?t.exports=o:this.tychei=o})(zn,n)})(b0);var BT=b0.exports,n1={exports:{}};const RT={},NT=Object.freeze(Object.defineProperty({__proto__:null,default:RT},Symbol.toStringTag,{value:"Module"})),ym=AT(NT);(function(n){(function(e,t){var i=(0,eval)("this"),s=256,r=6,o=52,c="random",p=t.pow(s,r),g=t.pow(2,o),A=g*2,C=s-1,D;function P(pe,ce,T){var Ce=[];ce=ce==!0?{entropy:!0}:ce||{};var ze=U(M(ce.entropy?[pe,re(e)]:pe??$(),3),Ce),be=new F(Ce),Be=function(){for(var xe=be.g(r),Qe=p,Fe=0;xe<g;)xe=(xe+Fe)*s,Qe*=s,Fe=be.g(1);for(;xe>=A;)xe/=2,Qe/=2,Fe>>>=1;return(xe+Fe)/Qe};return Be.int32=function(){return be.g(4)|0},Be.quick=function(){return be.g(4)/4294967296},Be.double=Be,U(re(be.S),e),(ce.pass||T||function(xe,Qe,Fe,Ye){return Ye&&(Ye.S&&K(Ye,be),xe.state=function(){return K(be,{})}),Fe?(t[c]=xe,Qe):xe})(Be,ze,"global"in ce?ce.global:this==t,ce.state)}t["seed"+c]=P;function F(pe){var ce,T=pe.length,Ce=this,ze=0,be=Ce.i=Ce.j=0,Be=Ce.S=[];for(T||(pe=[T++]);ze<s;)Be[ze]=ze++;for(ze=0;ze<s;ze++)Be[ze]=Be[be=C&be+pe[ze%T]+(ce=Be[ze])],Be[be]=ce;(Ce.g=function(xe){for(var Qe,Fe=0,Ye=Ce.i,ut=Ce.j,Me=Ce.S;xe--;)Qe=Me[Ye=C&Ye+1],Fe=Fe*s+Me[C&(Me[Ye]=Me[ut=C&ut+Qe])+(Me[ut]=Qe)];return Ce.i=Ye,Ce.j=ut,Fe})(s)}function K(pe,ce){return ce.i=pe.i,ce.j=pe.j,ce.S=pe.S.slice(),ce}function M(pe,ce){var T=[],Ce=typeof pe,ze;if(ce&&Ce=="object")for(ze in pe)try{T.push(M(pe[ze],ce-1))}catch{}return T.length?T:Ce=="string"?pe:pe+"\0"}function U(pe,ce){for(var T=pe+"",Ce,ze=0;ze<T.length;)ce[C&ze]=C&(Ce^=ce[C&ze]*19)+T.charCodeAt(ze++);return re(ce)}function $(){try{var pe;return D&&(pe=D.randomBytes)?pe=pe(s):(pe=new Uint8Array(s),(i.crypto||i.msCrypto).getRandomValues(pe)),re(pe)}catch{var ce=i.navigator,T=ce&&ce.plugins;return[+new Date,i,T,i.screen,re(e)]}}function re(pe){return String.fromCharCode.apply(0,pe)}if(U(t.random(),e),n.exports){n.exports=P;try{D=ym}catch{}}})([],Math)})(n1);var MT=n1.exports,OT=TT,qT=IT,FT=xT,zT=LT,HT=kT,KT=BT,tu=MT;tu.alea=OT;tu.xor128=qT;tu.xorwow=FT;tu.xorshift7=zT;tu.xor4096=HT;tu.tychei=KT;class us{constructor(e,...t){this.objects=[];const i=lt()({defaultArguments:[],initialize:e.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},t[0]);for(Et(i.maxSize>=0),Et(i.initialSize>=0),this._maxPoolSize=i.maxSize,this.partialConstructor=Function.prototype.bind.bind(e,e),this.DefaultConstructor=this.partialConstructor(...i.defaultArguments),this.initialize=i.initialize,Et(this.initialize,"Either pass in an initialize option, or provide a method named initialize on the type with the proper signature"),this.useDefaultConstruction=i.useDefaultConstruction;this.objects.length<i.initialSize;)this.objects.push(this.createDefaultObject())}createDefaultObject(){return new this.DefaultConstructor}fetch(){return this.objects.length?this.objects.pop():this.createDefaultObject()}create(...e){let t;return this.objects.length?(t=this.objects.pop(),this.initialize.apply(t,e)):this.useDefaultConstruction?(t=this.createDefaultObject(),this.initialize.apply(t,e)):t=new(this.partialConstructor(...e)),t}get poolSize(){return this.objects.length}set maxPoolSize(e){Et(e===Number.POSITIVE_INFINITY||Number.isInteger(e)&&e>=0,"maxPoolSize should be a non-negative integer or infinity"),this._maxPoolSize=e}get maxPoolSize(){return this._maxPoolSize}freeToPool(e){this.objects.length<this.maxPoolSize&&this.objects.push(e)}forEach(e){this.objects.forEach(e)}}const yi=new Yt("NumberIO",{valueType:"number",documentation:"PhET-iO Type for Javascript's number primitive type",toStateObject:te.identity,fromStateObject:n=>n,stateSchema:Ar.asValue("number",{isValidValue:n=>typeof n=="number"&&!isNaN(n)&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY})});function Ys(n){return(n<0?-1:1)*Math.round(Math.abs(n))}function hs(n,e,t){return n<e?e:n>t?t:n}const UT=(n,e)=>n.add(e);class we{constructor(e,t){this.x=e,this.y=t}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.x*this.x+this.y*this.y}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceXY(e,t){const i=this.x-e,s=this.y-t;return Math.sqrt(i*i+s*s)}distanceSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}distanceSquaredXY(e,t){const i=this.x-e,s=this.y-t;return i*i+s*s}dot(e){return this.x*e.x+this.y*e.y}dotXY(e,t){return this.x*e+this.y*t}getAngle(){return Math.atan2(this.y,this.x)}get angle(){return this.getAngle()}angleBetween(e){const t=this.magnitude,i=e.magnitude;return Math.acos(hs((this.x*e.x+this.y*e.y)/(t*i),-1,1))}equals(e){return this.x===e.x&&this.y===e.y}equalsEpsilon(e,t){return t||(t=0),Math.max(Math.abs(this.x-e.x),Math.abs(this.y-e.y))<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)}copy(e){return e?e.set(this):Cn(this.x,this.y)}crossScalar(e){return this.x*e.y-this.y*e.x}normalized(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return Cn(this.x/e,this.y/e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return Cn(this.x*e,this.y*e)}times(e){return this.timesScalar(e)}componentTimes(e){return Cn(this.x*e.x,this.y*e.y)}plus(e){return Cn(this.x+e.x,this.y+e.y)}plusXY(e,t){return Cn(this.x+e,this.y+t)}plusScalar(e){return Cn(this.x+e,this.y+e)}minus(e){return Cn(this.x-e.x,this.y-e.y)}minusXY(e,t){return Cn(this.x-e,this.y-t)}minusScalar(e){return Cn(this.x-e,this.y-e)}dividedScalar(e){return Cn(this.x/e,this.y/e)}negated(){return Cn(-this.x,-this.y)}getPerpendicular(){return Cn(this.y,-this.x)}get perpendicular(){return this.getPerpendicular()}rotated(e){const t=this.angle+e,i=this.magnitude;return Cn(i*Math.cos(t),i*Math.sin(t))}rotateAboutXY(e,t,i){const s=this.x-e,r=this.y-t,o=Math.cos(i),c=Math.sin(i);return this.x=e+s*o-r*c,this.y=t+s*c+r*o,this}rotateAboutPoint(e,t){return this.rotateAboutXY(e.x,e.y,t)}rotatedAboutXY(e,t,i){return Cn(this.x,this.y).rotateAboutXY(e,t,i)}rotatedAboutPoint(e,t){return this.rotatedAboutXY(e.x,e.y,t)}blend(e,t){return Cn(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}average(e){return this.blend(e,.5)}static average(e){return te.reduce(e,UT,new we(0,0)).divideScalar(e.length)}toString(){return`Vector2(${this.x}, ${this.y})`}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}set(e){return this.setXY(e.x,e.y)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXY(this.x+e.x,this.y+e.y)}addXY(e,t){return this.setXY(this.x+e,this.y+t)}addScalar(e){return this.setXY(this.x+e,this.y+e)}subtract(e){return this.setXY(this.x-e.x,this.y-e.y)}subtractXY(e,t){return this.setXY(this.x-e,this.y-t)}subtractScalar(e){return this.setXY(this.x-e,this.y-e)}multiplyScalar(e){return this.setXY(this.x*e,this.y*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXY(this.x*e.x,this.y*e.y)}divideScalar(e){return this.setXY(this.x/e,this.y/e)}negate(){return this.setXY(-this.x,-this.y)}normalize(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXY(Ys(this.x),Ys(this.y))}rotate(e){const t=this.angle+e,i=this.magnitude;return this.setXY(i*Math.cos(t),i*Math.sin(t))}setPolar(e,t){return this.setXY(e*Math.cos(t),e*Math.sin(t))}toStateObject(){return{x:this.x,y:this.y}}freeToPool(){we.pool.freeToPool(this)}static createPolar(e,t){return new we(0,0).setPolar(e,t)}static fromStateObject(e){return we.from(e)}static from(e){return Cn(e.x||0,e.y||0)}static getAngleBetweenVectors(e,t){const i=t.x-e.x,s=t.y-e.y;return Math.atan2(s,i)}static getDistanceBetweenVectors(e,t){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}}we.pool=new us(we,{maxSize:1e3,initialize:we.prototype.setXY,defaultArguments:[0,0]});we.ZERO=new we(0,0);we.X_UNIT=new we(1,0);we.Y_UNIT=new we(0,1);we.prototype.isVector2=!0;we.prototype.dimension=2;const Cn=we.pool.create.bind(we.pool);class Sc extends we{static mutableOverrideHelper(e){Sc.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector2`)}}}Sc.mutableOverrideHelper("setXY");Sc.mutableOverrideHelper("setX");Sc.mutableOverrideHelper("setY");const YT={x:yi,y:yi};we.Vector2IO=new Yt("Vector2IO",{valueType:we,stateSchema:YT,toStateObject:n=>n.toStateObject(),fromStateObject:n=>we.fromStateObject(n),documentation:"A numerical object with x and y properties, like {x:3,y:4}"});let pg=!1,nA=0,rA=0;const aA=2*Math.PI;function GT(n,e,t){if(pg=!pg,!pg)return rA*e+n;let i,s;do i=t.nextDouble(),s=t.nextDouble();while(i<=Number.MIN_VALUE);return nA=Math.sqrt(-2*Math.log(i))*Math.cos(aA*s),rA=Math.sqrt(-2*Math.log(i))*Math.sin(aA*s),nA*e+n}class Bh{constructor(e){this.seed=null,this.seedrandom=null,this.numberOfCalls=0;const t=lt()({seed:null},e);this.setSeed(t.seed),Bh.allRandomInstances.add(this)}dispose(){Bh.allRandomInstances.delete(this)}getSeed(){return this.seed}nextBoolean(){return this.nextDouble()>=.5}nextInt(e){const t=this.nextDouble()*e;return Math.floor(t)}nextIntBetween(e,t){const i=t-e;return this.nextInt(i+1)+e}sample(e){const t=this.nextIntBetween(0,e.length-1);return e[t]}shuffle(e){let t=-1;const i=new Array(e.length);return te.forEach(e,s=>{const r=this.nextIntBetween(0,++t);i[t]=i[r],i[r]=s}),i}nextDouble(){return this.numberOfCalls++,this.seedrandom()}nextDoubleBetween(e,t){return e+this.nextDouble()*(t-e)}nextGaussian(){return GT(0,1,this)}nextDoubleInRange(e){return e.min<e.max?this.nextDoubleBetween(e.min,e.max):e.min}nextPointInBounds(e){return new we(this.nextDoubleBetween(e.minX,e.maxX),this.nextDoubleBetween(e.minY,e.maxY))}setSeed(e){typeof e=="number"||(e=Math.random()),this.seed=e,this.seedrandom=Math.seedrandom?new Math.seedrandom(`${e}`):()=>Math.random()}sampleProbabilities(e){const i=te.sum(e)*this.nextDouble();let s=0;for(let r=0;r<e.length;r++)if(s+=e[r],s>=i)return r;return e.length-1}}Bh.allRandomInstances=new Set;const cl=new Bh({seed:te.hasIn(self,"phet.chipper.queryParameters.randomSeed")?self.phet.chipper.queryParameters.randomSeed:null}),gg=te.hasIn(self,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.listenerOrder;te.hasIn(self,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.listenerLimit;if(gg&&gg.startsWith("random")){const n=gg.match(/random(?:%28|\()(\d+)(?:%29|\))/),e=n?Number(n[1]):cl.nextInt(1e6);new Bh({seed:e}),console.log("listenerOrder random seed: "+e)}class Ai{constructor(e,t,i){this.emitContexts=[],e&&(this.onBeforeNotify=e),t&&(this.hasListenerOrderDependencies=t),i&&(this.reentrantNotificationStrategy=i),this.listeners=new Set}dispose(){this.removeAllListeners()}emit(...e){var t,i;if(this.onBeforeNotify&&this.onBeforeNotify.apply(null,e),this.listeners.size>0){const s=dl.create(0,e);if(this.emitContexts.push(s),this.reentrantNotificationStrategy==="queue"){if(this.emitContexts.length===1)for(;this.emitContexts.length;){const r=this.emitContexts[0],o=r.hasListenerArray?r.listenerArray:this.listeners;this.notifyLoop(r,o),(t=this.emitContexts.shift())==null||t.freeToPool()}}else(!this.reentrantNotificationStrategy||this.reentrantNotificationStrategy==="stack")&&(this.notifyLoop(s,this.listeners),(i=this.emitContexts.pop())==null||i.freeToPool())}}notifyLoop(e,t){const i=e.args;for(const s of t)if(s(...i),e.index++,e.hasListenerArray)break;if(e.hasListenerArray)for(let s=e.index;s<e.listenerArray.length;s++)e.listenerArray[s](...i)}addListener(e){this.guardListeners(),this.listeners.add(e),this.changeCount&&this.changeCount(1)}removeListener(e){this.guardListeners(),this.listeners.delete(e),this.changeCount&&this.changeCount(-1)}removeAllListeners(){const e=this.listeners.size;this.guardListeners(),this.listeners.clear(),this.changeCount&&this.changeCount(-e)}guardListeners(){for(let e=this.emitContexts.length-1;e>=0;e--){const t=this.emitContexts[e];if(t.hasListenerArray)break;t.listenerArray.push(...this.listeners),t.hasListenerArray=!0}}hasListener(e){return this.listeners.has(e)}hasListeners(){return this.listeners.size>0}getListenerCount(){return this.listeners.size}forEachListener(e){this.listeners.forEach(e)}}class dl{constructor(e,t){this.hasListenerArray=!1,this.listenerArray=[],this.initialize(e,t)}initialize(e,t){return this.index=e,this.args=t,this.hasListenerArray=!1,this}freeToPool(){dl.pool.freeToPool(this),this.args=null,this.listenerArray.length=0}static create(e,t){return dl.pool.create(e,t)}}dl.pool=new us(dl,{initialize:dl.prototype.initialize});class ui extends Ai{constructor(e,t,i,s){super(t,i,s||"queue"),this._value=e}get(){return this._value}get value(){return this.get()}set value(e){this.set(e)}set(e){if(!this.equalsValue(e)){const t=this._value;this.setPropertyValue(e),this.notifyListeners(t)}}setPropertyValue(e){this._value=e}equalsValue(e){return this.areValuesEqual(e,this._value)}areValuesEqual(e,t){return zi.equalsForValidationStrategy(e,t,this.valueComparisonStrategy)}notifyListeners(e){this.emit(this._value,e,this)}link(e){this.addListener(e),e(this._value,null,this)}lazyLink(e){this.addListener(e)}unlink(e){this.removeListener(e)}unlinkAll(){this.removeAllListeners()}linkAttribute(e,t){const i=s=>{e[t]=s};return this.link(i),i}isSettable(){return!0}get valueComparisonStrategy(){return this._valueComparisonStrategy||"reference"}set valueComparisonStrategy(e){this._valueComparisonStrategy=e}dispose(){this.unlinkAll(),super.dispose()}}const WT=new ui(!1),XT=new ui(!1);class Nl{constructor(e){if(this._disposeEmitter=new Ai,this._isDisposable=!0,this._isDisposed=!1,e&&this.initializeDisposable(e),Fn()){const t=this.dispose;this.dispose=()=>{Et(!this._isDisposed,"This Disposable has already been disposed, and cannot be disposed again"),t.call(this),Et(this._isDisposed,"Disposable.dispose() call is missing from an overridden dispose method")}}}getDisposeEmitter(){return this._disposeEmitter}get disposeEmitter(){return this.getDisposeEmitter()}get isDisposed(){return this._isDisposed}get isDisposable(){return this._isDisposable}set isDisposable(e){this._isDisposable=e}initializeDisposable(e){e&&e.hasOwnProperty("isDisposable")&&(this._isDisposable=e.isDisposable)}addDisposable(...e){this.disposeEmitter.addListener(()=>{for(let t=0;t<e.length;t++)e[t].dispose()})}dispose(){if(Fn()&&!this._isDisposable&&Nl.assertNotDisposable(),Et(!this._isDisposed,"Disposable can only be disposed once"),this.disposerMap)for(const[e]of this.disposerMap)this.removeAllDisposerActions(e);this._disposeEmitter.emit(),this._disposeEmitter.dispose(),this._isDisposed=!0}addDisposerAction(e,t,i,s){this.disposerMap=this.disposerMap||new Map,this.disposerMap.has(e)||this.disposerMap.set(e,new Map);const r=this.disposerMap.get(e);Et(!r.has(t),`Target already registered for disposer action type: ${e}`,t);const o=()=>{r.delete(t),s()};r.set(t,{disposer:i,unregisterCallback:o}),i.disposeEmitter.addListener(o)}removeDisposerAction(e,t){if(this.disposerMap){const i=this.disposerMap.get(e);if(i){const s=i.get(t);s&&(s.disposer.disposeEmitter.removeListener(s.unregisterCallback),i.delete(t))}}}removeAllDisposerActions(e){if(this.disposerMap){const t=this.disposerMap.get(e);t&&t.forEach((i,s)=>this.removeDisposerAction(e,s))}}static assertNotDisposable(){Et(!1,"dispose is not supported, exists for the lifetime of the sim")}}function Ns(n,e){Et(Array.isArray(n),"arrayRemove takes an Array");const t=te.indexOf(n,e);Et(t>=0,"item not found in Array"),n.splice(t,1)}class Dn{static add(e,t){if(!Dn.ENABLED)return;Dn.map.set(e.phetioID,t);const i=e.phetioID.split(".");let s=Dn.root;for(let r=0;r<i.length;r++){const o=i[r];s[o]||(s[o]={}),s=s[o]}s._value=t,Dn.addedEmitter.emit(e.phetioID,t)}static remove(e){if(!Dn.ENABLED)return;const t=e.phetioID;if(Dn.map.has(t)){Dn.removedEmitter.emit(t,e),Dn.map.delete(t);const i=t.split("."),s=[];let r=Dn.root;for(let o=0;o<i.length;o++){const c=i[o];r&&(r=r[c],r&&s.push(r))}s.length===i.length&&delete r._value;for(let o=s.length-1;o>=0;o--){const c=s[o];c&&Object.keys(c).length===0&&delete s[o]}}}}var zb,Hb,Kb;Dn.ENABLED=!!((Kb=(Hb=(zb=self==null?void 0:self.phet)==null?void 0:zb.chipper)==null?void 0:Hb.queryParameters)!=null&&Kb.supportsDescriptionPlugin);Dn.root={};Dn.map=new Map;Dn.addedEmitter=new Ai;Dn.removedEmitter=new Ai;class bn{toString(){return this.name}isEnumerationValue(){return!0}constructor(){const e=this.constructor;Et(!bn.sealedCache.has(e),"cannot create instanceof of a sealed constructor"),this._name=null,this._enumeration=null}set name(e){Et(!this._name,"name cannot be changed once defined."),this._name=e}get name(){return Et(this._name,"name cannot be retrieved until it has been filled in by Enumeration."),this._name}set enumeration(e){Et(!this._enumeration,"enumeration cannot be changed once defined."),this._enumeration=e}get enumeration(){return Et(this._enumeration,"enumeration cannot be retrieved until it has been filled in by Enumeration."),this._enumeration}}bn.sealedCache=new Set;function r1(n){const e=[n];let t=n.prototype;for(;t&&(t=Object.getPrototypeOf(t));)t.constructor&&e.push(t.constructor);return e}class br{constructor(e,t){const i=lt()({phetioDocumentation:"",instanceType:e},t);this.phetioDocumentation=i.phetioDocumentation;const s=i.instanceType,r=te.reverse(r1(e));Et(r.includes(s),"the specified type should be in its own hierarchy"),this.keys=[],this.values=[],r.forEach(o=>{Object.keys(o).forEach(c=>{const p=o[c];p instanceof s&&(Et(c===c.toUpperCase(),"keys should be upper case by convention"),this.keys.push(c),this.values.push(p),p instanceof e&&(p.name=c,p.enumeration=this))})}),Et(this.keys.length>0,"no keys found"),Et(this.values.length>0,"no values found"),this.Enumeration=e,bn.sealedCache.add(e)}getKey(e){return e.name}getValue(e){return this.Enumeration[e]}includes(e){return this.values.includes(e)}}const mg=new er,oA=n=>n.join("|"),a1=n=>{const e=n.enumeration;if(!mg.has(e)){const t=e.phetioDocumentation?` ${e.phetioDocumentation}`:"",i=e.keys,s=e.values,r=`EnumerationIO(${oA(i)})`;mg.set(e,new Yt(r,{validValues:s,documentation:`Possible values: ${i.join(", ")}.${t}`,toStateObject:o=>e.getKey(o),fromStateObject:o=>e.getValue(o),stateSchema:Ar.asValue(`${oA(i)}`,{isValidValue:o=>i.includes(o)})}))}return mg.get(e)};var o1;class si extends bn{}o1=Tr.EVENT_TYPE_MODEL;si.USER=new si;si[o1]=new si;si.WRAPPER=new si;si.OPT_OUT=new si;si.enumeration=new br(si);si.phetioType=a1(si);const Hi=new Yt("StringIO",{supertype:p0,valueType:"string",documentation:"PhET-iO Type for Javascript's string primitive type",stateSchema:Ar.asValue("string",{valueType:"string"}),toStateObject:te.identity}),jT=new Yt("LinkedElementIO",{isValidValue:()=>!0,documentation:"A LinkedElement",toStateObject:n=>({elementID:n.element.tandem.phetioID}),applyState:te.noop,stateSchema:{elementID:Hi},apiStateKeys:["elementID"]}),ha=".",l1="_",_m="-",QT="general",ZT="global",JT="homeScreen",$T="model",eI="view",tI="colors",iI="strings",sI="controller",lA="Screen",Am="archetype",h1="Capsule";class Zi{constructor(){Et(!1,"should not construct a PhetioIDUtils")}static append(e,...t){return t.forEach(i=>{if(Et(!i.includes(ha),`separator appears in componentName: ${i}`),i==="")return;e+=(e===""?"":ha)+i}),e}static getComponentName(e){Et(e.length>0);const t=e.lastIndexOf(ha);return t===-1?e:e.substring(t+1,e.length)}static getParentID(e){const t=e.lastIndexOf(ha);return t===-1?null:e.substring(0,t)}static getDOMElementID(e){return`phetioID:${e}`}static getScreenID(e){const t=[],i=e.split(ha);for(let s=0;s<i.length;s++){const r=i[s];t.push(r);const o=r.indexOf(lA);if(o>0&&o+lA.length===r.length)return t.join(ha)}return null}static getGroupElementIndex(e){return Et(e.includes(this.GROUP_SEPARATOR),"component name for phetioID should have group element syntax"),Number(e.split(this.GROUP_SEPARATOR)[1])}static isAncestor(e,t){const i=e.split(ha),s=t.split(ha);for(let r=0;r<i.length;r++)if(i[r]!==s[r])return!1;return t!==e}static getArchetypalPhetioID(e){const t=e.split(ha);for(let i=0;i<t.length;i++){const s=t[i];if(s.endsWith(h1)&&i<t.length-1)t[i+1]=Am,i++;else{const r=s.split(_m).map(o=>o.includes(l1)?Am:o);t[i]=r.join(_m)}}return t.join(ha)}}Zi.SEPARATOR=ha;Zi.GROUP_SEPARATOR=l1;Zi.INTER_TERM_SEPARATOR=_m;Zi.GENERAL_COMPONENT_NAME=QT;Zi.GLOBAL_COMPONENT_NAME=ZT;Zi.HOME_SCREEN_COMPONENT_NAME=JT;Zi.MODEL_COMPONENT_NAME=$T;Zi.VIEW_COMPONENT_NAME=eI;Zi.CONTROLLER_COMPONENT_NAME=sI;Zi.COLORS_COMPONENT_NAME=tI;Zi.STRINGS_COMPONENT_NAME=iI;Zi.ARCHETYPE=Am;Zi.CAPSULE_SUFFIX=h1;const nI=te.hasIn(self,"phet.preloads.phetio"),bm=te.hasIn(self,"phet.chipper.packageObject")?phet.chipper.packageObject:{name:"placeholder"},Pl=nI,v0=Pl&&phet.preloads.phetio.queryParameters.phetioPrintMissingTandems,rI=te.hasIn(bm,"phet.phet-io.validation")?!!bm.phet["phet-io"].validation:!0,aI=wl.containsKey("phetioValidation"),oI=Pl&&aI?!!phet.preloads.phetio.queryParameters.phetioValidation:Pl&&rI,u1=Pl&&oI&&!v0,c1="requiredTandem",d1="optionalTandem",f1="test",lI=Zi.INTER_TERM_SEPARATOR,hI=Zi.ARCHETYPE;let uI=!1;const vm={required:[],optional:[]},Bu=[],yd=[];class Xe{constructor(e,t,i){this.children={},this.isDisposed=!1,this.parentTandem=e,this.name=t,this.phetioID=this.parentTandem?Zi.append(this.parentTandem.phetioID,this.name):this.name;const s=lt()({required:!0,supplied:!0,isValidTandemName:r=>Xe.getRegexFromCharacterClass().test(r)},i);this.children={},this.parentTandem&&this.parentTandem.addChild(t,this),this.required=s.required,this.supplied=s.supplied}static getRegexFromCharacterClass(e=Tr.BASE_TANDEM_CHARACTER_CLASS){return new RegExp(`^[${e}]+$`)}static onMissingTandem(e){if(v0&&!e.supplied){const t=Xe.captureStackTrace();e.required?vm.required.push({phetioID:e.phetioID,stack:t}):t.includes("Font")||vm.optional.push({phetioID:e.phetioID,stack:t})}}static captureStackTrace(e=1/0){const t=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");if(t&&(t.writable||t.set&&typeof t.set=="function")){const s=Error.stackTraceLimit;Error.stackTraceLimit=e;const r=new Error().stack;return Error.stackTraceLimit=s,r}else return new Error().stack}addPhetioObject(e){if(Pl){if(!this.required&&!this.supplied)return;if(!Xe.launched)Xe.bufferedPhetioObjects.push(e);else for(let t=0;t<Bu.length;t++)Bu[t].addPhetioObject(e)}}hasAncestor(e){return this.parentTandem===e||!!(this.parentTandem&&this.parentTandem.hasAncestor(e))}removePhetioObject(e){if(this.supplied){if(Pl)if(!Xe.launched)Ns(Xe.bufferedPhetioObjects,e);else for(let t=0;t<Bu.length;t++)Bu[t].removePhetioObject(e);e.tandem.dispose()}}getExtendedOptions(e){return dn({supplied:this.supplied,required:this.required},e)}createTandem(e,t){return t=this.getExtendedOptions(t),this.hasChild(e)?this.children[e]:new Xe(this,e,t)}createTandem1Indexed(e,t,i){return this.createTandem(`${e}${t+1}`,i)}hasChild(e){return this.children.hasOwnProperty(e)}addChild(e,t){this.children[e]=t}iterateDescendants(e){for(const t in this.children)this.children.hasOwnProperty(t)&&(e(this.children[t]),this.children[t].iterateDescendants(e))}removeChild(e){delete this.children[e]}dispose(){this.parentTandem.removeChild(this.name),this.parentTandem=null,this.isDisposed=!0}getArchetypalPhetioID(){return Zi.getArchetypalPhetioID(this.phetioID)}createGroupTandem(e,t=1){return this.children[e]?this.children[e]:new cI(this,e,t)}equals(e){return this.phetioID===e.phetioID}static addPhetioObjectListener(e){Bu.push(e)}static launch(){for(Xe.launched=!0;yd.length>0;)yd.shift()()}static unlaunch(){Xe.launched=!1,Xe.bufferedPhetioObjects.length=0,yd.length=0}static addLaunchListener(e){yd.push(e)}createTandemFromPhetioID(e){return this.createTandem(e.split(Zi.SEPARATOR).join(lI),{isValidTandemName:t=>Xe.getRegexFromCharacterClass(Tr.BASE_DERIVED_TANDEM_CHARACTER_CLASS).test(t)})}static getStringsTandem(e=Xe.ROOT.name){return Xe.STRINGS.createTandem(e)}static getDerivedStringsTandem(e=Xe.ROOT.name){return Xe.getStringsTandem(e).createTandem("derivedStrings")}}Xe.SCREEN_TANDEM_NAME_SUFFIX="Screen";Xe.missingTandems=vm;Xe.PHET_IO_ENABLED=Pl;Xe.VALIDATION=u1;Xe.apiValidationEnabled=uI;Xe.METADATA_KEY="_metadata";Xe.DATA_KEY="_data";Xe.launched=!1;Xe.bufferedPhetioObjects=[];Xe.RootTandem=class extends Xe{createTandem(e,t){return Xe.VALIDATION&&(e===Zi.GLOBAL_COMPONENT_NAME||e===c1||e===d1||e===f1||e===Zi.GENERAL_COMPONENT_NAME||te.endsWith(e,Xe.SCREEN_TANDEM_NAME_SUFFIX)),super.createTandem(e,t)}};Xe.ROOT=new Xe.RootTandem(null,te.camelCase(bm.name));Xe.GENERAL=Xe.ROOT.createTandem(Zi.GENERAL_COMPONENT_NAME);Xe.ROOT_TEST=Xe.ROOT.createTandem(f1);Xe.GENERAL_MODEL=Xe.GENERAL.createTandem(Zi.MODEL_COMPONENT_NAME);Xe.GENERAL_VIEW=Xe.GENERAL.createTandem(Zi.VIEW_COMPONENT_NAME);Xe.GENERAL_CONTROLLER=Xe.GENERAL.createTandem(Zi.CONTROLLER_COMPONENT_NAME);Xe.GLOBAL=Xe.ROOT.createTandem(Zi.GLOBAL_COMPONENT_NAME);Xe.GLOBAL_MODEL=Xe.GLOBAL.createTandem(Zi.MODEL_COMPONENT_NAME);Xe.GLOBAL_VIEW=Xe.GLOBAL.createTandem(Zi.VIEW_COMPONENT_NAME);Xe.COLORS=Xe.GLOBAL_VIEW.createTandem(Zi.COLORS_COMPONENT_NAME);Xe.STRINGS=Xe.GENERAL_MODEL.createTandem(Zi.STRINGS_COMPONENT_NAME);Xe.OPTIONAL=Xe.ROOT.createTandem(d1,{required:!1,supplied:!1});Xe.OPT_OUT=Xe.OPTIONAL;Xe.REQUIRED=Xe.ROOT.createTandem(c1,{required:u1||v0,supplied:!1});Xe.PREFERENCES=Xe.GLOBAL_MODEL.createTandem("preferences");Xe.addLaunchListener(()=>{for(;Xe.bufferedPhetioObjects.length>0;){const n=Xe.bufferedPhetioObjects.shift();n.tandem.addPhetioObject(n)}});class cI extends Xe{constructor(e,t,i){super(e,t),this.groupName=t,this.groupMemberIndex=i}createNextTandem(){const e=this.parentTandem.createTandem(`${this.groupName}${this.groupMemberIndex}`);return this.groupMemberIndex++,e}}const _d=Xe.PHET_IO_ENABLED,dI=n=>n.tandem.phetioID,yg=-1;var Ub,Yb,Gb;const hA=!!((Gb=(Yb=(Ub=self.phet)==null?void 0:Ub.chipper)==null?void 0:Yb.queryParameters)!=null&&Gb.supportsDescriptionPlugin),Vm={tandem:Xe.OPTIONAL,phetioType:Yt.ObjectIO,phetioDocumentation:Tr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDocumentation,phetioState:Tr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioState,phetioReadOnly:Tr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioReadOnly,phetioEventType:si.MODEL,phetioHighFrequency:Tr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioHighFrequency,phetioPlayback:Tr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioPlayback,phetioFeatured:Tr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioFeatured,phetioDynamicElement:Tr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDynamicElement,phetioDesigned:Tr.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDesigned,phetioEventMetadata:null,tandemNameSuffix:null,descriptionTandem:Xe.OPTIONAL};class Gi extends Nl{constructor(e){super(),this.tandem=Vm.tandem,this.phetioID=this.tandem.phetioID,this.phetioObjectInitialized=!1,e&&this.initializePhetioObject({},e)}initializePhetioObject(e,t){if(this.initializeDisposable(t),t.tandem&&Xe.onMissingTandem(t.tandem),hA&&t.tandem&&t.tandem.supplied&&Dn.add(t.tandem,this),!(_d&&t.tandem&&t.tandem.supplied)){t.tandem&&(this.tandem=t.tandem,this.phetioID=this.tandem.phetioID);return}const i=Ci({},Vm,e);let s=lt()(i,t);this.phetioIsArchetype=!1,this.phetioBaselineMetadata=Xe.apiValidationEnabled||phet.preloads.phetio.queryParameters.phetioEmitAPIBaseline?this.getMetadata(dn({phetioIsArchetype:this.phetioIsArchetype,phetioArchetypePhetioID:this.phetioArchetypePhetioID},s)):null;const r=s.tandem.getArchetypalPhetioID();if(self.phet.preloads.phetio.phetioElementsOverrides){const o=self.phet.preloads.phetio.phetioElementsOverrides[r];o&&(s=lt()(s,o))}this.tandem=s.tandem,this.phetioID=this.tandem.phetioID,this._phetioType=s.phetioType,this._phetioState=s.phetioState,this._phetioReadOnly=s.phetioReadOnly,this._phetioDocumentation=s.phetioDocumentation,this._phetioEventType=s.phetioEventType,this._phetioHighFrequency=s.phetioHighFrequency,this._phetioPlayback=s.phetioPlayback,this._phetioDynamicElement=s.phetioDynamicElement,this._phetioFeatured=s.phetioFeatured,this._phetioEventMetadata=s.phetioEventMetadata,this._phetioDesigned=s.phetioDesigned,this.phetioArchetypePhetioID=null,this.linkedElements=[],this.phetioNotifiedObjectCreated=!1,this.phetioMessageStack=[],this._phetioPlayback&&(this._phetioEventMetadata=this._phetioEventMetadata||{},this._phetioEventMetadata.playback=!0),this.tandem.addPhetioObject(this),this.phetioObjectInitialized=!0}static swapCaseOfFirstCharacter(e){const t=e[0];return(t===t.toLowerCase()?t.toUpperCase():t.toLowerCase())+e.substring(1)}get phetioType(){return this._phetioType}get phetioState(){return this._phetioState}get phetioReadOnly(){return this._phetioReadOnly}get phetioDocumentation(){return this._phetioDocumentation}get phetioEventType(){return this._phetioEventType}get phetioHighFrequency(){return this._phetioHighFrequency}get phetioPlayback(){return this._phetioPlayback}get phetioDynamicElement(){return this._phetioDynamicElement}get phetioFeatured(){return this._phetioFeatured}get phetioEventMetadata(){return this._phetioEventMetadata}get phetioDesigned(){return this._phetioDesigned}phetioStartEvent(e,t){if(_d&&this.isPhetioInstrumented()){const i=lt()({data:null,getData:null},t);if(!te.hasIn(self,"phet.phetio.dataStream")){this.phetioMessageStack.push(yg);return}const s=this.phetioHighFrequency&&te.hasIn(self,"phet.preloads.phetio.queryParameters")&&!self.phet.preloads.phetio.queryParameters.phetioEmitHighFrequencyEvents&&!phet.phetio.dataStream.isEmittingLowFrequencyEvent();let r=!te.hasIn(self,"phet.phetio.dataStream");if(s||this.phetioEventType===si.OPT_OUT||r){this.phetioMessageStack.push(yg);return}const o=i.getData?i.getData():i.data;this.phetioMessageStack.push(phet.phetio.dataStream.start(this.phetioEventType,this.tandem.phetioID,this.phetioType,e,o,this.phetioEventMetadata,this.phetioHighFrequency)),this.phetioPlayback&&phet.phetio.dataStream.pushNonPlaybackable()}}phetioEndEvent(e=!1){if(_d&&this.isPhetioInstrumented()){const t=this.phetioMessageStack.pop();if(t===yg)return;this.phetioPlayback&&phet.phetio.dataStream.popNonPlaybackable(),phet.phetio.dataStream.end(t,e)}}propagateDynamicFlagsToDescendants(){const e=phet.phetio.phetioEngine,t=Xe.launched?[]:Xe.bufferedPhetioObjects.map(dI);this.tandem.iterateDescendants(i=>{const s=i.phetioID;if(e.hasPhetioObject(s)||!Xe.launched&&t.includes(s)){const r=e.hasPhetioObject(s)?e.getPhetioElement(s):Xe.bufferedPhetioObjects[t.indexOf(s)];r.phetioIsArchetype=this.phetioIsArchetype,r.setPhetioDynamicElement(this.phetioDynamicElement),r.phetioBaselineMetadata&&(r.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype)}})}setPhetioDynamicElement(e){this._phetioDynamicElement=this.phetioIsArchetype?!1:e,this.phetioArchetypePhetioID=e?this.tandem.getArchetypalPhetioID():null,this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioDynamicElement=this.phetioDynamicElement)}markDynamicElementArchetype(){this.phetioIsArchetype=!0,this.setPhetioDynamicElement(!1),this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype),Xe.PHET_IO_ENABLED&&this.propagateDynamicFlagsToDescendants()}isPhetioInstrumented(){return this.tandem&&this.tandem.supplied}addLinkedElement(e,t){if(!this.isPhetioInstrumented()){this.linkedElements=null;return}if(_d&&e.isPhetioInstrumented()){const i=lt()({},t);let s=null;t&&t.tandem?s=t.tandem:t&&t.tandemName?s=this.tandem.createTandem(t.tandemName):!t&&e.tandem&&(s=this.tandem.createTandem(e.tandem.name)),s&&(i.tandem=s),this.linkedElements.push(new uA(e,i))}}removeLinkedElements(e){this.isPhetioInstrumented()&&this.linkedElements&&this.linkedElements.filter(i=>i.element===e).forEach(i=>{i.dispose(),Ns(this.linkedElements,i)})}onSimulationConstructionCompleted(){this.phetioBaselineMetadata=null}getPhetioMouseHitTarget(e=!1){if(!e&&phet.tandem.phetioElementSelectionProperty.value==="linked"){const t=this.getCorrespondingLinkedElement();if(t!=="noCorrespondingLinkedElement")return t.getPhetioMouseHitTarget(!0);if(this.tandem.parentTandem){const i=phet.phetio.phetioEngine.phetioElementMap[this.tandem.parentTandem.phetioID];if(i){const s=i.getCorrespondingLinkedElement();if(s!=="noCorrespondingLinkedElement")return s.getPhetioMouseHitTarget(!0)}}}return phet.tandem.phetioElementSelectionProperty.value==="string"?"phetioNotSelectable":this.getPhetioMouseHitTargetSelf()}getPhetioMouseHitTargetSelf(){return this.isPhetioMouseHitSelectable()?this:"phetioNotSelectable"}isPhetioMouseHitSelectable(){const e=phet.tandem.phetioElementsDisplayProperty.value!=="featured"||this.isDisplayedInFeaturedTree();return this.isPhetioInstrumented()&&e}isDisplayedInFeaturedTree(){if(this.isPhetioInstrumented()&&this.phetioFeatured)return!0;let e=!1;return this.tandem.iterateDescendants(t=>{const i=phet.phetio.phetioEngine.phetioElementMap[t.phetioID];i&&i.isPhetioInstrumented()&&i.phetioFeatured&&(e=!0)}),e}getCorrespondingLinkedElement(){const e=Object.keys(this.tandem.children),t=[];e.forEach(r=>{const o=Zi.append(this.tandem.phetioID,r),c=phet.phetio.phetioEngine.phetioElementMap[o];c instanceof uA&&t.push(c)});const i=t.map(r=>Zi.getComponentName(r.phetioID));let s=null;if(t.length===1)s=t[0];else if(i.includes("property"))s=t[i.indexOf("property")];else if(i.includes("valueProperty"))s=t[i.indexOf("valueProperty")];else return"noCorrespondingLinkedElement";return s.element}dispose(){hA&&this.tandem&&this.tandem.supplied&&Dn.remove(this),this.tandem.removePhetioObject(this),this.linkedElements&&(this.linkedElements.forEach(e=>e.dispose()),this.linkedElements.length=0),super.dispose()}getMetadata(e){e=e||this;const t={phetioTypeName:e.phetioType.typeName,phetioDocumentation:e.phetioDocumentation,phetioState:e.phetioState,phetioReadOnly:e.phetioReadOnly,phetioEventType:si.phetioType.toStateObject(e.phetioEventType),phetioHighFrequency:e.phetioHighFrequency,phetioPlayback:e.phetioPlayback,phetioDynamicElement:e.phetioDynamicElement,phetioIsArchetype:e.phetioIsArchetype,phetioFeatured:e.phetioFeatured,phetioDesigned:e.phetioDesigned};return e.phetioArchetypePhetioID&&(t.phetioArchetypePhetioID=e.phetioArchetypePhetioID),t}static create(e){return new Gi(e)}}Gi.DEFAULT_OPTIONS=Vm;Gi.METADATA_DOCUMENTATION=`Get metadata about the PhET-iO Element. This includes the following keys:<ul><li><strong>phetioTypeName:</strong> The name of the PhET-iO Type
</li><li><strong>phetioDocumentation:</strong> default - null. Useful notes about a PhET-iO Element, shown in the PhET-iO Studio Wrapper</li><li><strong>phetioState:</strong> default - true. When true, includes the PhET-iO Element in the PhET-iO state
</li><li><strong>phetioReadOnly:</strong> default - false. When true, you can only get values from the PhET-iO Element; no setting allowed.
</li><li><strong>phetioEventType:</strong> default - MODEL. The category of event that this element emits to the PhET-iO Data Stream.
</li><li><strong>phetioDynamicElement:</strong> default - false. If this element is a "dynamic element" that can be created and destroyed throughout the lifetime of the sim (as opposed to existing forever).
</li><li><strong>phetioIsArchetype:</strong> default - false. If this element is an archetype for a dynamic element.
</li><li><strong>phetioFeatured:</strong> default - false. If this is a featured PhET-iO Element.
</li><li><strong>phetioArchetypePhetioID:</strong> default - ''. If an applicable dynamic element, this is the phetioID of its archetype.
</li></ul>`;class uA extends Gi{constructor(e,t){const i=lt()({phetioType:jT,phetioState:!0,phetioFeatured:e.phetioFeatured},t);i.phetioReadOnly=!0,super(i),this.element=e}}const _g=new er,Bo=n=>(_g.has(n)||_g.set(n,new Yt(`ArrayIO<${n.typeName}>`,{valueType:Array,isValidValue:e=>te.every(e,t=>zi.isValueValid(t,n.validator)),parameterTypes:[n],toStateObject:e=>e.map(t=>n.toStateObject(t)),fromStateObject:e=>e.map(t=>n.fromStateObject(t)),documentation:"PhET-iO Type for the built-in JS array type, with the element type specified.",stateSchema:Ar.asValue(`Array<${n.typeName}>`,{isValidValue:e=>te.every(e,t=>n.isStateObjectValid(t))})})),_g.get(n)),Ag=new er,Zu=(n,e)=>{for(let i=0;i<e.length;i++);const t=`${n.typeName}.${e.map(i=>i.typeName).join(",")}`;if(!Ag.has(t)){let i=e.map(r=>r.typeName).join(", ");i===""&&(i="none");const s=e.map(r=>r.typeName).join(",");Ag.set(t,new Yt(`FunctionIO(${s})=>${n.typeName}`,{valueType:"function",isFunctionType:!0,parameterTypes:e.concat([n]),documentation:`Wrapper for the built-in JS function type.<br><strong>Arguments:</strong> ${i}<br><strong>Return Type:</strong> ${n.typeName}`}))}return Ag.get(t)},bg=new er,Zt=n=>(bg.has(n)||bg.set(n,new Yt(`NullableIO<${n.typeName}>`,{documentation:"A PhET-iO Type adding support for null in addition to the behavior of its parameter.",isValidValue:e=>e===null||zi.isValueValid(e,n.validator),parameterTypes:[n],toStateObject:e=>e===null?null:n.toStateObject(e),fromStateObject:e=>e===null?null:n.fromStateObject(e),stateSchema:Ar.asValue(`null|<${n.typeName}>`,{isValidValue:e=>e===null||n.isStateObjectValid(e)})})),bg.get(n)),Jn=new Yt("VoidIO",{isValidValue:()=>!0,documentation:"Type for which there is no instance, usually to mark functions without a return value",toStateObject:()=>{}});class ws extends bn{}ws.UNDEFER=new ws;ws.NOTIFY=new ws;ws.enumeration=new br(ws);class fI{constructor(){this.initialized=!1,this.phaseCallbackSets=new pI,this.undeferBeforeUndeferMapPair=new Ad(ws.UNDEFER,ws.UNDEFER),this.undeferBeforeNotifyMapPair=new Ad(ws.UNDEFER,ws.NOTIFY),this.notifyBeforeUndeferMapPair=new Ad(ws.NOTIFY,ws.UNDEFER),this.notifyBeforeNotifyMapPair=new Ad(ws.NOTIFY,ws.NOTIFY),this.mapPairs=[this.undeferBeforeUndeferMapPair,this.undeferBeforeNotifyMapPair,this.notifyBeforeUndeferMapPair,this.notifyBeforeNotifyMapPair]}initialize(e,t){e.onBeforeApplyStateEmitter.addListener(i=>{if(i instanceof t&&!i.isDeferred){i.setDeferred(!0);const s=i.tandem.phetioID,r=()=>{const o=i.setDeferred(!1);this.phaseCallbackSets.addNotifyPhaseCallback(new cA(s,ws.NOTIFY,o||te.noop))};this.phaseCallbackSets.addUndeferPhaseCallback(new cA(s,ws.UNDEFER,r))}}),e.undeferEmitter.addListener(i=>{this.undeferAndNotifyProperties(new Set(Object.keys(i)))}),e.isSettingStateProperty.lazyLink(i=>{}),this.initialized=!0}static validateInstrumentedProperty(e){}validatePropertyPhasePair(e,t){}getMapPairFromPhases(e,t){return this.mapPairs.filter(s=>e===s.beforePhase&&t===s.afterPhase)[0]}registerPhetioOrderDependency(e,t,i,s){Xe.PHET_IO_ENABLED&&(this.validatePropertyPhasePair(e,t),this.validatePropertyPhasePair(i,s),this.getMapPairFromPhases(t,s).addOrderDependency(e.tandem.phetioID,i.tandem.phetioID))}propertyInAnOrderDependency(e){return te.some(this.mapPairs,t=>t.usesPhetioID(e.tandem.phetioID))}unregisterOrderDependenciesForProperty(e){Xe.PHET_IO_ENABLED&&this.propertyInAnOrderDependency(e)&&this.mapPairs.forEach(t=>t.unregisterOrderDependenciesForProperty(e))}undeferAndNotifyProperties(e){const t={};let i=0;for(;this.phaseCallbackSets.size>0;)i++,i>5e3&&this.errorInUndeferAndNotifyStep(t),this.attemptToApplyPhases(ws.UNDEFER,t,e),this.attemptToApplyPhases(ws.NOTIFY,t,e)}errorInUndeferAndNotifyStep(e){const t=[];this.phaseCallbackSets.forEach(o=>t.push(o.getTerm()));const i=[];this.mapPairs.forEach(o=>{const c=o.beforeMap;for(const[p,g]of c)g.forEach(A=>{const C=p+c.beforePhase,D=A+c.afterPhase;(t.includes(C)||t.includes(D))&&i.push({beforeTerm:C,afterTerm:D})})});let s="";console.log("still to be undeferred",this.phaseCallbackSets.undeferSet),console.log("still to be notified",this.phaseCallbackSets.notifySet),console.log("order dependencies that apply to the still todos",i),i.forEach(o=>{s+=`${o.beforeTerm}	${o.afterTerm}
`}),console.log(`

in graphable form:

`,s);const r="Impossible set state: from undeferAndNotifyProperties; ordering constraints cannot be satisfied";throw new Error(r)}getNumberOfOrderDependencies(){let e=0;return this.mapPairs.forEach(t=>{t.afterMap.forEach(i=>{e+=i.size})}),e}attemptToApplyPhases(e,t,i){const s=this.phaseCallbackSets.getSetFromPhase(e);for(const r of s)this.phetioIDCanApplyPhase(r.phetioID,e,t,i)&&(r.listener(),s.delete(r),t[r.getTerm()]=!0)}phetioIDCanApplyPhase(e,t,i,s){if(t===ws.NOTIFY&&!i[e+ws.UNDEFER])return!1;const r=[];this.mapPairs.forEach(o=>{o.afterPhase===t&&r.push(o.afterMap)});for(let o=0;o<r.length;o++){const c=r[o];if(!c.has(e))return!0;const p=c.get(e);for(const g of p)if(!i[g+c.beforePhase]&&s.has(g)&&s.has(e))return!1}return!0}}class cA{constructor(e,t,i=te.noop){this.phetioID=e,this.phase=t,this.listener=i}getTerm(){return this.phetioID+this.phase}}class Ad{constructor(e,t){this.beforeMap=new Map,this.beforeMap.beforePhase=e,this.beforeMap.afterPhase=t,this.afterMap=new Map,this.afterMap.beforePhase=e,this.afterMap.afterPhase=t,this.beforeMap.otherMap=this.afterMap,this.afterMap.otherMap=this.beforeMap,this.beforePhase=e,this.afterPhase=t}addOrderDependency(e,t){this.beforeMap.has(e)||this.beforeMap.set(e,new Set),this.beforeMap.get(e).add(t),this.afterMap.has(t)||this.afterMap.set(t,new Set),this.afterMap.get(t).add(e)}unregisterOrderDependenciesForProperty(e){const t=e.tandem.phetioID;[this.beforeMap,this.afterMap].forEach(i=>{i.has(t)&&i.get(t).forEach(s=>{const r=i.otherMap.get(s);r&&r.delete(t),r.size===0&&i.otherMap.delete(s)}),i.delete(t)})}usesPhetioID(e){return this.beforeMap.has(e)||this.afterMap.has(e)}}class pI{constructor(){this.undeferSet=new Set,this.notifySet=new Set}get size(){return this.undeferSet.size+this.notifySet.size}forEach(e){this.undeferSet.forEach(e),this.notifySet.forEach(e)}addUndeferPhaseCallback(e){this.undeferSet.add(e)}addNotifyPhaseCallback(e){this.notifySet.add(e)}getSetFromPhase(e){return e===ws.NOTIFY?this.notifySet:this.undeferSet}}const Sm=new fI,gI={validateValidator:!1};let mI=0;const vg=new er;class Ds extends Gi{constructor(e,t){const i=lt()({units:null,reentrant:!1,hasListenerOrderDependencies:!1,reentrantNotificationStrategy:"queue",valueComparisonStrategy:"reference",tandemNameSuffix:["Property",hI],phetioOuterType:Ds.PropertyIO,phetioValueType:Yt.ObjectIO},t);i.units&&(i.phetioEventMetadata=i.phetioEventMetadata||{},i.phetioEventMetadata.units=i.units),i.phetioOuterType&&i.phetioValueType&&(i.phetioType=i.phetioOuterType(i.phetioValueType)),zi.containsValidatorKey(i)||(i.isValidValue=()=>!0),super(i),this.id=mI++,this.units=i.units,this.isPhetioInstrumented(),this.validValues=i.validValues,this.tinyProperty=new ui(e,null,i.hasListenerOrderDependencies,i.reentrantNotificationStrategy),this.tinyProperty.valueComparisonStrategy=i.valueComparisonStrategy,this.notifying=!1,this.reentrant=i.reentrant,this.isDeferred=!1,this.deferredValue=null,this.hasDeferredValue=!1,this.phetioValueType=i.phetioValueType,this.valueValidator=te.pick(i,zi.VALIDATOR_KEYS),this.valueValidator.validationMessage=this.valueValidator.validationMessage||"Property value not valid",this.valueValidator.phetioType&&(this.valueValidator.phetioType=this.valueValidator.phetioType.parameterTypes[0])}isSettable(){return!1}get(){return this.tinyProperty.get()}set(e){XT.value&&!WT.value&&this.isPhetioInstrumented()&&this.phetioState&&this.isSettable()||this.unguardedSet(e)}unguardedSet(e){if(!this.isDisposed){if(this.isDeferred)this.deferredValue=e,this.hasDeferredValue=!0;else if(!this.equalsValue(e)){const t=this.get();this.setPropertyValue(e),this._notifyListeners(t)}}}setPropertyValue(e){this.tinyProperty.setPropertyValue(e)}equalsValue(e){return this.areValuesEqual(e,this.get())}areValuesEqual(e,t){return this.tinyProperty.areValuesEqual(e,t)}_notifyListeners(e){const t=this.get();Xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent(Ds.CHANGED_EVENT_NAME,{getData:()=>{const i=this.phetioType.parameterTypes[0];return{oldValue:Zt(i).toStateObject(e),newValue:i.toStateObject(t)}}}),this.notifying=!0,this.tinyProperty.emit(t,e,this),this.notifying=!1,Xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}notifyListenersStatic(){this._notifyListeners(null)}setDeferred(e){if(e)this.isDeferred=!0;else{this.isDeferred=!1;const t=this.get();if(this.hasDeferredValue&&(this.setPropertyValue(this.deferredValue),this.hasDeferredValue=!1,this.deferredValue=null),!this.equalsValue(t))return()=>!this.isDisposed&&this._notifyListeners(t)}return null}get value(){return this.get()}set value(e){this.set(e)}addPhetioStateDependencies(e){for(let t=0;t<e.length;t++){const i=e[t];i instanceof Ds&&i.isPhetioInstrumented()&&this.isPhetioInstrumented()&&Sm.registerPhetioOrderDependency(i,ws.UNDEFER,this,ws.NOTIFY)}}link(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.addListener(e),this.addPropertyDisposerAction(e,t),e(this.get(),null,this)}lazyLink(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.lazyLink(e),this.addPropertyDisposerAction(e,t)}unlink(e){this.tinyProperty.unlink(e),this.removeDisposerAction("link",e)}unlinkAll(){this.tinyProperty.unlinkAll(),this.removeAllDisposerActions("link")}linkAttribute(e,t){const i=s=>{e[t]=s};return this.link(i),i}toString(){return`Property#${this.id}{${this.get()}}`}debug(e){const t=i=>console.log(e,i);return this.link(t),t}isValueValid(e){return this.getValidationError(e)===null}getValidationError(e){return zi.getValidationError(e,this.valueValidator,gI)}addPropertyDisposerAction(e,t){t!=null&&t.disposer&&this.addDisposerAction("link",e,t.disposer,()=>this.unlink(e))}dispose(){this.isPhetioInstrumented()&&Sm.unregisterOrderDependenciesForProperty(this),super.dispose(),this.tinyProperty.dispose()}hasListener(e){return this.tinyProperty.hasListener(e)}getListenerCount(){return this.tinyProperty.getListenerCount()}forEachListener(e){this.tinyProperty.forEachListener(e)}hasListeners(){return this.tinyProperty.hasListeners()}get valueComparisonStrategy(){return this.tinyProperty.valueComparisonStrategy}set valueComparisonStrategy(e){this.tinyProperty.valueComparisonStrategy=e}toStateObject(){return{value:this.phetioValueType.toStateObject(this.value),validValues:Zt(Bo(this.phetioValueType)).toStateObject(this.validValues===void 0?null:this.validValues),units:Zt(Hi).toStateObject(this.units)}}applyState(e){Zt(Hi).fromStateObject(e.units),this.unguardedSet(this.phetioValueType.fromStateObject(e.value))}static PropertyIO(e){return vg.has(e)||vg.set(e,new Yt(`PropertyIO<${e.typeName}>`,{valueType:Ds,documentation:"Observable values that send out notifications when the value changes. This differs from the traditional listener pattern in that added listeners also receive a callback with the current value when the listeners are registered. This is a widely-used pattern in PhET-iO simulations.",methodOrder:["link","lazyLink"],events:[Ds.CHANGED_EVENT_NAME],parameterTypes:[e],toStateObject:t=>t.toStateObject(),applyState:(t,i)=>{t.applyState(i)},stateSchema:{value:e,validValues:Zt(Bo(e)),units:Zt(Hi)},apiStateKeys:["validValues","units"],methods:{getValue:{returnType:e,parameterTypes:[],implementation:Ds.prototype.get,documentation:"Gets the current value."},getValidationError:{returnType:Zt(Hi),parameterTypes:[e],implementation:function(t){return this.getValidationError(t)},documentation:"Checks to see if a proposed value is valid. Returns the first validation error, or null if the value is valid."},setValue:{returnType:Jn,parameterTypes:[e],implementation:function(t){this.set(t)},documentation:"Sets the value of the Property. If the value differs from the previous value, listeners are notified with the new value.",invocableForReadOnlyElements:!1},link:{returnType:Jn,parameterTypes:[Zu(Jn,[e,Zt(e)])],implementation:Ds.prototype.link,documentation:"Adds a listener which will be called when the value changes. On registration, the listener is also called with the current value. The listener takes two arguments, the new value and the previous value."},lazyLink:{returnType:Jn,parameterTypes:[Zu(Jn,[e,Zt(e)])],implementation:Ds.prototype.lazyLink,documentation:'Adds a listener which will be called when the value changes. This method is like "link", but without the current-value callback on registration. The listener takes two arguments, the new value and the previous value.'},unlink:{returnType:Jn,parameterTypes:[Zu(Jn,[e])],implementation:Ds.prototype.unlink,documentation:"Removes a listener."}},fuzzElement:(t,i)=>{var s;if(((s=t.phetioType.parameterTypes)==null?void 0:s.length)===1&&t.phetioType.parameterTypes[0]===hl&&t.isSettable()){const r=t.value,o=!r;i&&console.log(`${t.phetioID}:`,r,"->",o),t.value=o}}})),vg.get(e)}getPhetioMouseHitTarget(e=!1){return phet.tandem.phetioElementSelectionProperty.value==="string"?this.getPhetioMouseHitTargetSelf():super.getPhetioMouseHitTarget(e)}}Ds.CHANGED_EVENT_NAME="changed";class hi extends Ds{constructor(e,t){super(e,t),this._initialValue=e}getInitialValue(){return this._initialValue}get initialValue(){return this.getInitialValue()}setInitialValue(e){this._initialValue=e}get value(){return super.value}set value(e){super.set(e)}reset(){this.set(this._initialValue)}set(e){super.set(e)}isSettable(){return!0}}class di extends hi{constructor(e,t){const i=lt()({valueType:"boolean",phetioValueType:hl},t);super(e,i)}toggle(){this.value=!this.value}}class yI extends Ai{setTimeout(e,t){let i=0;const s=r=>{i+=r,i*1e3>=t&&this.hasListener(s)&&(e(),this.removeListener(s))};return this.addListener(s),s}clearTimeout(e){this.hasListener(e)&&this.removeListener(e)}setInterval(e,t){let i=0;const s=r=>{for(i+=r;i*1e3>=t&&this.hasListener(s);)e(),i=i-t/1e3};return this.addListener(s),s}clearInterval(e){this.hasListener(e)&&this.removeListener(e)}runOnNextTick(e){this.setTimeout(e,0)}}const fn=new yI;class p1{constructor(e){this.callbacks=[],this._delay=400,this._interval=100,this.delayID=null,this.intervalID=null,this.fired=!1,(e==null?void 0:e.delay)!==void 0&&(this.delay=e.delay),(e==null?void 0:e.interval)!==void 0&&(this.interval=e.interval),e!=null&&e.callback&&this.callbacks.push(e.callback)}isRunning(){return this.delayID!==null||this.intervalID!==null}start(){this.isRunning()||(this.fired=!1,this.delayID=fn.setTimeout(()=>{this.delayID=null,this.intervalID=fn.setInterval(()=>this.fire(),this.interval),this.fire()},this.delay))}stop(e){this.isRunning()&&(this.delayID&&(fn.clearTimeout(this.delayID),this.delayID=null),this.intervalID&&(fn.clearInterval(this.intervalID),this.intervalID=null),e&&!this.fired&&this.fire())}addCallback(e){this.callbacks.includes(e)||this.callbacks.push(e)}removeCallback(e){const t=this.callbacks.indexOf(e);t!==-1&&this.callbacks.splice(t,1)}fire(){const e=this.callbacks.slice(0);for(let t=0;t<e.length;t++)e[t]();this.fired=!0}set delay(e){this._delay=e}get delay(){return this._delay}set interval(e){this._interval=e}get interval(){return this._interval}dispose(){this.stop(!1),this.callbacks.length=0}}var _I=20,AI=1,iu=1e6,bI=1e6,vI=-7,VI=21,SI=!1,wc="[big.js] ",Ml=wc+"Invalid ",Ff=Ml+"decimal places",wI=Ml+"rounding mode",g1=wc+"Division by zero",ns={},Ma=void 0,CI=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function m1(){function n(e){var t=this;if(!(t instanceof n))return e===Ma?m1():new n(e);if(e instanceof n)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(n.strict===!0&&typeof e!="bigint")throw TypeError(Ml+"value");e=e===0&&1/e<0?"-0":String(e)}PI(t,e)}t.constructor=n}return n.prototype=ns,n.DP=_I,n.RM=AI,n.NE=vI,n.PE=VI,n.strict=SI,n.roundDown=0,n.roundHalfUp=1,n.roundHalfEven=2,n.roundUp=3,n}function PI(n,e){var t,i,s;if(!CI.test(e))throw Error(Ml+"number");for(n.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),s=e.length,i=0;i<s&&e.charAt(i)=="0";)++i;if(i==s)n.c=[n.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(n.e=t-i-1,n.c=[],t=0;i<=s;)n.c[t++]=+e.charAt(i++)}return n}function Ol(n,e,t,i){var s=n.c;if(t===Ma&&(t=n.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(wI);if(e<1)i=t===3&&(i||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(i||s[1]!==Ma))),s.length=1,i?(n.e=n.e-e+1,s[0]=1):s[0]=n.e=0;else if(e<s.length){if(i=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(i||s[e+1]!==Ma||s[e-1]&1))||t===3&&(i||!!s[0]),s.length=e,i){for(;++s[--e]>9;)if(s[e]=0,e===0){++n.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return n}function ql(n,e,t){var i=n.e,s=n.c.join(""),r=s.length;if(e)s=s.charAt(0)+(r>1?"."+s.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)s="0"+s;s="0."+s}else if(i>0)if(++i>r)for(i-=r;i--;)s+="0";else i<r&&(s=s.slice(0,i)+"."+s.slice(i));else r>1&&(s=s.charAt(0)+"."+s.slice(1));return n.s<0&&t?"-"+s:s}ns.abs=function(){var n=new this.constructor(this);return n.s=1,n};ns.cmp=function(n){var e,t=this,i=t.c,s=(n=new t.constructor(n)).c,r=t.s,o=n.s,c=t.e,p=n.e;if(!i[0]||!s[0])return i[0]?r:s[0]?-o:0;if(r!=o)return r;if(e=r<0,c!=p)return c>p^e?1:-1;for(o=(c=i.length)<(p=s.length)?c:p,r=-1;++r<o;)if(i[r]!=s[r])return i[r]>s[r]^e?1:-1;return c==p?0:c>p^e?1:-1};ns.div=function(n){var e=this,t=e.constructor,i=e.c,s=(n=new t(n)).c,r=e.s==n.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>iu)throw Error(Ff);if(!s[0])throw Error(g1);if(!i[0])return n.s=r,n.c=[n.e=0],n;var c,p,g,A,C,D=s.slice(),P=c=s.length,F=i.length,K=i.slice(0,c),M=K.length,U=n,$=U.c=[],re=0,pe=o+(U.e=e.e-n.e)+1;for(U.s=r,r=pe<0?0:pe,D.unshift(0);M++<c;)K.push(0);do{for(g=0;g<10;g++){if(c!=(M=K.length))A=c>M?1:-1;else for(C=-1,A=0;++C<c;)if(s[C]!=K[C]){A=s[C]>K[C]?1:-1;break}if(A<0){for(p=M==c?s:D;M;){if(K[--M]<p[M]){for(C=M;C&&!K[--C];)K[C]=9;--K[C],K[M]+=10}K[M]-=p[M]}for(;!K[0];)K.shift()}else break}$[re++]=A?g:++g,K[0]&&A?K[M]=i[P]||0:K=[i[P]]}while((P++<F||K[0]!==Ma)&&r--);return!$[0]&&re!=1&&($.shift(),U.e--,pe--),re>pe&&Ol(U,pe,t.RM,K[0]!==Ma),U};ns.eq=function(n){return this.cmp(n)===0};ns.gt=function(n){return this.cmp(n)>0};ns.gte=function(n){return this.cmp(n)>-1};ns.lt=function(n){return this.cmp(n)<0};ns.lte=function(n){return this.cmp(n)<1};ns.minus=ns.sub=function(n){var e,t,i,s,r=this,o=r.constructor,c=r.s,p=(n=new o(n)).s;if(c!=p)return n.s=-p,r.plus(n);var g=r.c.slice(),A=r.e,C=n.c,D=n.e;if(!g[0]||!C[0])return C[0]?n.s=-p:g[0]?n=new o(r):n.s=1,n;if(c=A-D){for((s=c<0)?(c=-c,i=g):(D=A,i=C),i.reverse(),p=c;p--;)i.push(0);i.reverse()}else for(t=((s=g.length<C.length)?g:C).length,c=p=0;p<t;p++)if(g[p]!=C[p]){s=g[p]<C[p];break}if(s&&(i=g,g=C,C=i,n.s=-n.s),(p=(t=C.length)-(e=g.length))>0)for(;p--;)g[e++]=0;for(p=e;t>c;){if(g[--t]<C[t]){for(e=t;e&&!g[--e];)g[e]=9;--g[e],g[t]+=10}g[t]-=C[t]}for(;g[--p]===0;)g.pop();for(;g[0]===0;)g.shift(),--D;return g[0]||(n.s=1,g=[D=0]),n.c=g,n.e=D,n};ns.mod=function(n){var e,t=this,i=t.constructor,s=t.s,r=(n=new i(n)).s;if(!n.c[0])throw Error(g1);return t.s=n.s=1,e=n.cmp(t)==1,t.s=s,n.s=r,e?new i(t):(s=i.DP,r=i.RM,i.DP=i.RM=0,t=t.div(n),i.DP=s,i.RM=r,this.minus(t.times(n)))};ns.neg=function(){var n=new this.constructor(this);return n.s=-n.s,n};ns.plus=ns.add=function(n){var e,t,i,s=this,r=s.constructor;if(n=new r(n),s.s!=n.s)return n.s=-n.s,s.minus(n);var o=s.e,c=s.c,p=n.e,g=n.c;if(!c[0]||!g[0])return g[0]||(c[0]?n=new r(s):n.s=s.s),n;if(c=c.slice(),e=o-p){for(e>0?(p=o,i=g):(e=-e,i=c),i.reverse();e--;)i.push(0);i.reverse()}for(c.length-g.length<0&&(i=g,g=c,c=i),e=g.length,t=0;e;c[e]%=10)t=(c[--e]=c[e]+g[e]+t)/10|0;for(t&&(c.unshift(t),++p),e=c.length;c[--e]===0;)c.pop();return n.c=c,n.e=p,n};ns.pow=function(n){var e=this,t=new e.constructor("1"),i=t,s=n<0;if(n!==~~n||n<-1e6||n>bI)throw Error(Ml+"exponent");for(s&&(n=-n);n&1&&(i=i.times(e)),n>>=1,!!n;)e=e.times(e);return s?t.div(i):i};ns.prec=function(n,e){if(n!==~~n||n<1||n>iu)throw Error(Ml+"precision");return Ol(new this.constructor(this),n,e)};ns.round=function(n,e){if(n===Ma)n=0;else if(n!==~~n||n<-1e6||n>iu)throw Error(Ff);return Ol(new this.constructor(this),n+this.e+1,e)};ns.sqrt=function(){var n,e,t,i=this,s=i.constructor,r=i.s,o=i.e,c=new s("0.5");if(!i.c[0])return new s(i);if(r<0)throw Error(wc+"No square root");r=Math.sqrt(+ql(i,!0,!0)),r===0||r===1/0?(e=i.c.join(""),e.length+o&1||(e+="0"),r=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),n=new s((r==1/0?"5e":(r=r.toExponential()).slice(0,r.indexOf("e")+1))+o)):n=new s(r+""),o=n.e+(s.DP+=4);do t=n,n=c.times(t.plus(i.div(t)));while(t.c.slice(0,o).join("")!==n.c.slice(0,o).join(""));return Ol(n,(s.DP-=4)+n.e+1,s.RM)};ns.times=ns.mul=function(n){var e,t=this,i=t.constructor,s=t.c,r=(n=new i(n)).c,o=s.length,c=r.length,p=t.e,g=n.e;if(n.s=t.s==n.s?1:-1,!s[0]||!r[0])return n.c=[n.e=0],n;for(n.e=p+g,o<c&&(e=s,s=r,r=e,g=o,o=c,c=g),e=new Array(g=o+c);g--;)e[g]=0;for(p=c;p--;){for(c=0,g=o+p;g>p;)c=e[g]+r[p]*s[g-p-1]+c,e[g--]=c%10,c=c/10|0;e[g]=c}for(c?++n.e:e.shift(),p=e.length;!e[--p];)e.pop();return n.c=e,n};ns.toExponential=function(n,e){var t=this,i=t.c[0];if(n!==Ma){if(n!==~~n||n<0||n>iu)throw Error(Ff);for(t=Ol(new t.constructor(t),++n,e);t.c.length<n;)t.c.push(0)}return ql(t,!0,!!i)};ns.toFixed=function(n,e){var t=this,i=t.c[0];if(n!==Ma){if(n!==~~n||n<0||n>iu)throw Error(Ff);for(t=Ol(new t.constructor(t),n+t.e+1,e),n=n+t.e+1;t.c.length<n;)t.c.push(0)}return ql(t,!1,!!i)};ns[Symbol.for("nodejs.util.inspect.custom")]=ns.toJSON=ns.toString=function(){var n=this,e=n.constructor;return ql(n,n.e<=e.NE||n.e>=e.PE,!!n.c[0])};ns.toNumber=function(){var n=+ql(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(n.toString()))throw Error(wc+"Imprecise conversion");return n};ns.toPrecision=function(n,e){var t=this,i=t.constructor,s=t.c[0];if(n!==Ma){if(n!==~~n||n<1||n>iu)throw Error(Ml+"precision");for(t=Ol(new i(t),n,e);t.c.length<n;)t.c.push(0)}return ql(t,n<=t.e||t.e<=i.NE||t.e>=i.PE,!!s)};ns.valueOf=function(){var n=this,e=n.constructor;if(e.strict===!0)throw Error(wc+"valueOf disallowed");return ql(n,n.e<=e.NE||n.e>=e.PE,!0)};var EI=m1();function zf(n,e){if(isNaN(n))return"NaN";if(n===Number.POSITIVE_INFINITY)return"Infinity";if(n===Number.NEGATIVE_INFINITY)return"-Infinity";const t=new EI(n).toFixed(e);return t.startsWith("-0.")&&Number.parseFloat(t)===0?"0"+t.slice(2):t}function Dt(n){return n instanceof Ds||n instanceof ui}const DI="DerivedPropertyIO";function Vg(n,e){return n(...e.map(t=>t.get()))}class Oi extends Ds{constructor(e,t,i){const s=lt()({phetioReadOnly:!0,phetioOuterType:Oi.DerivedPropertyIO,phetioLinkDependencies:!0},i),r=Vg(t,e);super(r,s),Xe.VALIDATION&&this.isPhetioInstrumented(),this.dependencies=e,this.derivation=t,this.derivedPropertyListener=this.getDerivedPropertyListener.bind(this),e.forEach(o=>{if(o.lazyLink(this.derivedPropertyListener),Xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&o instanceof Gi&&o.isPhetioInstrumented()&&(o instanceof Ds&&Sm.registerPhetioOrderDependency(o,ws.UNDEFER,this,ws.UNDEFER),s.tandem&&s.phetioLinkDependencies)){const c=s.tandem.createTandem("dependencies");this.addLinkedElement(o,{phetioFeatured:Xe.PHET_IO_ENABLED?o.phetioFeatured&&this.phetioFeatured:!1,tandem:c.createTandemFromPhetioID(o.tandem.phetioID)})}})}hasDependency(e){return this.definedDependencies.includes(e)}get definedDependencies(){return this.dependencies}getDerivedPropertyListener(){this.isDisposed||(this.isDeferred?this.hasDeferredValue=!0:super.set(Vg(this.derivation,this.definedDependencies)))}recomputeDerivation(){this.getDerivedPropertyListener()}dispose(){const e=this.definedDependencies;for(let t=0;t<e.length;t++){const i=e[t];i.hasListener(this.derivedPropertyListener)&&i.unlink(this.derivedPropertyListener)}this.dependencies=null,super.dispose()}setDeferred(e){return this.isDeferred&&!e&&(this.deferredValue=Vg(this.derivation,this.definedDependencies)),super.setDeferred(e)}static valueEquals(e,t,i){return new Oi([e,t],(s,r)=>s===r,i)}static valueNotEquals(e,t,i){return new Oi([e,t],(s,r)=>s!==r,i)}static valueEqualsConstant(e,t,i){return new Oi([e],s=>s===t,i)}static valueNotEqualsConstant(e,t,i){return new Oi([e],s=>s!==t,i)}static and(e,t){return Oi.deriveAny(e,()=>te.reduce(e,TI,!0),t)}static or(e,t){return Oi.deriveAny(e,()=>te.reduce(e,II,!1),t)}static multiply(e,t){return Oi.deriveAny(e,()=>te.reduce(e,xI,1),t)}static add(e,t){return Oi.deriveAny(e,()=>te.reduce(e,LI,0),t)}static not(e,t){return new Oi([e],i=>!i,t)}static fromRecord(e,t,i){const s=Object.values(t).filter(r=>Dt(r));return Oi.deriveAny([e,...s],()=>{const r=t[e.value];return Dt(r)?r.value:r},i)}static toFixed(e,t,i){return new Oi([e],s=>zf(s,t),i)}static deriveAny(e,t,i){return new Oi(e,t,i)}}const TI=(n,e)=>n&&e.value,II=(n,e)=>n||e.value,xI=(n,e)=>n*e.value,LI=(n,e)=>n+e.value,Sg=new er;Oi.DerivedPropertyIO=n=>(Sg.has(n)||Sg.set(n,new Yt(`${DI}<${n.typeName}>`,{valueType:Oi,parameterTypes:[n],supertype:hi.PropertyIO(n),documentation:"Like PropertyIO, but not settable.  Instead it is derived from other DerivedPropertyIO or PropertyIO instances",applyState:te.noop,methods:{setValue:{returnType:Jn,parameterTypes:[n],implementation:Oi.prototype.set,documentation:"Errors out when you try to set a derived property.",invocableForReadOnlyElements:!1}}})),Sg.get(n));class y1 extends Oi{}class kI extends Oi{}class BI extends Oi{constructor(e,t,i){const s=lt()({phetioFeatured:!0,phetioValueType:Hi,tandemNameSuffix:"StringProperty"},i);super(e,t,s)}}class _1 extends Ds{constructor(e,t){const i=lt()({bidirectional:!1,defaultValue:null,derive:te.identity,map:te.identity,inverseMap:te.identity},t),s=i.derive,r=i.map,o=i.inverseMap,c=typeof s=="function"?s:C=>C[s],p=typeof r=="function"?r:C=>C[r],g=typeof o=="function"?o:C=>C[o],A=e.value===null?p(i.defaultValue):p(c(e.value).value);super(A,i),this.defaultValue=i.defaultValue,this.derive=c,this.map=p,this.inverseMap=g,this.bidirectional=i.bidirectional,this.valuePropertyProperty=e,this.isExternallyChanging=!1,this.propertyPropertyListener=this.onPropertyPropertyChange.bind(this),this.propertyListener=this.onPropertyChange.bind(this),e.link(this.propertyListener),i.bidirectional&&this.lazyLink(this.onSelfChange.bind(this))}onPropertyPropertyChange(e,t,i){this.bidirectional&&this.valuePropertyProperty.value!==null&&i&&this.derive(this.valuePropertyProperty.value)===i&&i.areValuesEqual(this.inverseMap(this.value),i.get())||super.set(this.map(e))}onPropertyChange(e,t){t&&this.derive(t).unlink(this.propertyPropertyListener),e?this.derive(e).link(this.propertyPropertyListener):this.onPropertyPropertyChange(this.defaultValue,null,null)}onSelfChange(e){if(this.valuePropertyProperty.value!==null){const t=this.derive(this.valuePropertyProperty.value);this.areValuesEqual(e,this.map(t.value))||(t.value=this.inverseMap(e))}}dispose(){this.valuePropertyProperty.unlink(this.propertyListener),this.valuePropertyProperty.value!==null&&this.derive(this.valuePropertyProperty.value).unlink(this.propertyPropertyListener),super.dispose()}reset(){this.valuePropertyProperty.value!==null&&this.derive(this.valuePropertyProperty.value).reset()}set(e){this.isExternallyChanging=!0,super.set(e),this.isExternallyChanging=!1}get value(){return super.value}set value(e){this.set(e)}isSettable(){return super.isSettable()||this.bidirectional}}const RI={validateValidator:!1},NI=[];["name","phetioType","phetioDocumentation","phetioPrivate"].concat(zi.VALIDATOR_KEYS);const dA=n=>n.phetioType,MI=n=>n.name;class Hf extends Gi{constructor(e){const t=lt()({parameters:NI,hasListenerOrderDependencies:!1,phetioPlayback:Gi.DEFAULT_OPTIONS.phetioPlayback,phetioEventMetadata:Gi.DEFAULT_OPTIONS.phetioEventMetadata,phetioDocumentation:""},e),i=t.parameters.filter(dA);t.phetioType=t.phetioOuterType(i.map(dA)),t.phetioPlayback&&(t.phetioEventMetadata=t.phetioEventMetadata||{},t.phetioEventMetadata.dataKeys=t.parameters.map(MI)),t.phetioDocumentation=Hf.getPhetioDocumentation(t.phetioDocumentation,i),super(t),this.parameters=t.parameters}static validateParameters(e,t){let i=!1;for(let s=0;s<e.length;s++){const r=e[s];i=i||r.phetioPrivate,zi.validateValidator(r)}}validateArguments(...e){for(let t=0;t<this.parameters.length;t++){const i=this.parameters[t];i.phetioType&&i.valueType}}getValidationErrors(...e){return this.parameters.map((t,i)=>zi.getValidationError(e[i],t,RI))}getPhetioData(...e){let t=null;if(this.parameters.length>0){t={};for(let i=0;i<this.parameters.length;i++){const s=this.parameters[i];s.phetioPrivate||(t[s.name]=s.phetioType.toStateObject(e[i]))}}return t}static getPhetioDocumentation(e,t){const i=s=>{const r=s.phetioDocumentation?` - ${s.phetioDocumentation}`:"";return`<li>${s.name}: ${te.escape(s.phetioType.typeName)}${r}</li>`};return e+(t.length===0?"<br>No parameters.":`<br>The parameters are:<br/><ol>${t.map(i).join("<br/>")}</ol>`)}}const A1=!1;class Os extends Hf{constructor(e){const t=lt()({reentrantNotificationStrategy:"stack",phetioOuterType:Os.EmitterIO,phetioState:A1},e);super(t),this.tinyEmitter=new Ai(null,t.hasListenerOrderDependencies,t.reentrantNotificationStrategy)}emit(...e){Xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("emitted",{data:this.getPhetioData(...e)}),this.tinyEmitter.emit(...e),Xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}dispose(){this.tinyEmitter.dispose(),super.dispose()}addListener(e,t){this.tinyEmitter.addListener(e),t!=null&&t.disposer&&this.addDisposerAction("listener",e,t.disposer,()=>this.removeListener(e))}removeListener(e){this.tinyEmitter.removeListener(e),this.removeDisposerAction("listener",e)}removeAllListeners(){this.tinyEmitter.removeAllListeners(),this.removeAllDisposerActions("listener")}hasListener(e){return this.tinyEmitter.hasListener(e)}hasListeners(){return this.tinyEmitter.hasListeners()}getListenerCount(){return this.tinyEmitter.getListenerCount()}debug(e){const t=(...i)=>console.log(e,...i);return this.addListener(t),t}}Os.EmitterIO=n=>{const e=n.map(fA).join(",");return wg.has(e)||wg.set(e,new Yt(`EmitterIO<${n.map(fA).join(", ")}>`,{valueType:Os,documentation:"Emits when an event occurs and calls added listeners.",parameterTypes:n,events:["emitted"],metadataDefaults:{phetioState:A1},methods:{addListener:{returnType:Jn,parameterTypes:[Zu(Jn,n)],implementation:Os.prototype.addListener,documentation:"Adds a listener which will be called when the emitter emits."},removeListener:{returnType:Jn,parameterTypes:[Zu(Jn,n)],implementation:Os.prototype.removeListener,documentation:"Remove a listener."},emit:{returnType:Jn,parameterTypes:n,implementation:function(...t){this.emit(...t)},documentation:"Emits a single event to all listeners.",invocableForReadOnlyElements:!1},getValidationErrors:{returnType:Bo(Zt(Hi)),parameterTypes:n,implementation:function(...t){return this.getValidationErrors(...t)},documentation:"Checks to see if the proposed values are valid. Returns an array of length N where each element is an error (string) or null if the value is valid."}}})),wg.get(e)};const fA=n=>n.typeName,wg=new er,OI="enabledProperty";class Gd extends di{constructor(e,t){const i=lt()({phetioDocumentation:"Determines whether the element is enabled (true) or disabled (false).",phetioFeatured:!0,checkTandemName:!0},t);super(e,i)}static get TANDEM_NAME(){return OI}}const qI={enabledProperty:null,enabled:!0,enabledPropertyOptions:null,phetioEnabledPropertyInstrumented:!0,tandem:Gi.DEFAULT_OPTIONS.tandem};class Kf extends Nl{constructor(e){const t=ko()({},qI,e),i=!t.enabledProperty;super(t),this.enabledProperty=t.enabledProperty||new Gd(t.enabled,dn({tandem:t.phetioEnabledPropertyInstrumented?t.tandem.createTandem(Gd.TANDEM_NAME):Xe.OPT_OUT},t.enabledPropertyOptions)),this.disposeEnabledComponent=()=>{i&&this.enabledProperty.dispose()}}setEnabled(e){this.enabledProperty.value=e}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this.enabledProperty.value}dispose(){this.disposeEnabledComponent(),super.dispose()}}class _n{constructor(e,t,i){if(this.dependencies=e,this.dependencyListeners=new Map,e.forEach(s=>{const r=()=>{if(!this.isDisposed){const o=e.map(c=>c.get());t(...o)}};this.dependencyListeners.set(s,r),s.lazyLink(r,{phetioDependencies:te.without(e,s)})}),!i){const s=e.map(r=>r.get());t(...s)}this.isDisposed=!1}get definedDependencies(){return this.dependencies}dispose(){const e=this.definedDependencies;for(let t=0;t<e.length;t++){const i=e[t],s=this.dependencyListeners.get(i);i.hasListener(s)&&i.unlink(s)}this.dependencies=null,this.dependencyListeners.clear(),this.isDisposed=!0}static multilink(e,t){return new _n(e,t,!1)}static multilinkAny(e,t){return new _n(e,t)}static lazyMultilink(e,t){return new _n(e,t,!0)}static lazyMultilinkAny(e,t){return new _n(e,t,!0)}static unmultilink(e){e.dispose()}}const rn=new Yt("InfiniteNumberIO",{valueType:"number",documentation:"PhET-iO Type for Javascript's number primitive type",toStateObject:n=>n===Number.POSITIVE_INFINITY?"POSITIVE_INFINITY":n===Number.NEGATIVE_INFINITY?"NEGATIVE_INFINITY":n,fromStateObject:n=>n==="POSITIVE_INFINITY"?Number.POSITIVE_INFINITY:n==="NEGATIVE_INFINITY"?Number.NEGATIVE_INFINITY:n,stateSchema:Ar.asValue("'POSITIVE_INFINITY'|'NEGATIVE_INFINITY'|number",{isValidValue:n=>n==="POSITIVE_INFINITY"||n==="NEGATIVE_INFINITY"||typeof n=="number"&&!isNaN(n)})}),FI={min:rn,max:rn};class xi{constructor(e,t){this._min=e,this._max=t}getMin(){return this._min}get min(){return this.getMin()}set min(e){this.setMin(e)}setMin(e){this._min=e}getMax(){return this._max}get max(){return this.getMax()}set max(e){this.setMax(e)}setMax(e){this._max=e}setMinMax(e,t){return this._min=e,this._max=t,this}set(e){return this.setMinMax(e.min,e.max),this}addValue(e){this._min=Math.min(this._min,e),this._max=Math.max(this._max,e)}withValue(e){return new xi(Math.min(this._min,e),Math.max(this._max,e))}copy(){return new xi(this._min,this._max)}getLength(){return this._max-this._min}getCenter(){return(this._max+this._min)/2}contains(e){return e>=this._min&&e<=this._max}containsRange(e){return this._min<=e.min&&this._max>=e.max}intersects(e){return this._max>=e.min&&e.max>=this._min}intersectsExclusive(e){return this._max>e.min&&e.max>this._min}union(e){return new xi(Math.min(this.min,e.min),Math.max(this.max,e.max))}intersection(e){return new xi(Math.max(this.min,e.min),Math.min(this.max,e.max))}includeRange(e){return this.setMinMax(Math.min(this.min,e.min),Math.max(this.max,e.max))}constrainRange(e){return this.setMinMax(Math.max(this.min,e.min),Math.min(this.max,e.max))}shifted(e){return new xi(this.min+e,this.max+e)}toString(){return`[Range (min:${this._min} max:${this._max})]`}constrainValue(e){return Math.min(Math.max(e,this._min),this._max)}times(e){return new xi(this._min*e,this._max*e)}multiply(e){return this.setMinMax(this._min*e,this._max*e),this}equals(e){return this.constructor===e.constructor&&this._min===e.min&&this._max===e.max}equalsEpsilon(e,t){return this.constructor===e.constructor&&Math.abs(this._min-e.min)<=t&&Math.abs(this._max-e.max)<=t}getNormalizedValue(e){return(e-this.min)/this.getLength()}expandNormalizedValue(e){return e*this.getLength()+this.min}get defaultValue(){throw new Error("defaultValue is undefined, did you mean to use RangeWithValue?")}toStateObject(){return{min:rn.toStateObject(this.min),max:rn.toStateObject(this.max)}}clampDelta(e,t){return e+t<this.min?this.min-e:e+t>this.max?this.max-e:t}static fromStateObject(e){return new xi(rn.fromStateObject(e.min),rn.fromStateObject(e.max))}}xi.RangeIO=new Yt("RangeIO",{valueType:xi,documentation:'A range with "min" and "max" members.',stateSchema:FI,toStateObject:n=>n.toStateObject(),fromStateObject:n=>xi.fromStateObject(n)});xi.EVERYTHING=new xi(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY);xi.NOTHING=new xi(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);const zI={valueType:"number",isValidValue:n=>n%1===0,validationMessage:"Should be a valid integer"},HI={isValidValue:n=>!isNaN(n),validationMessage:"Should not be NaN"},KI=["FloatingPoint","Integer"],UI="rangeProperty",pA=xi.EVERYTHING,gA=hi.PropertyIO(yi);class Kn extends hi{constructor(e,t){var p;const i=lt()({numberType:"FloatingPoint",range:pA,validators:[],phetioOuterType:()=>Kn.NumberPropertyIO},t);i.rangePropertyOptions=lt()({phetioDocumentation:"Provides the range of possible values for the parent NumberPropertyIO",phetioValueType:xi.RangeIO,phetioReadOnly:!0,tandem:i.range!==pA?(p=i.tandem)==null?void 0:p.createTandem(UI):Xe.OPT_OUT},i.rangePropertyOptions),i.valueType="number",i.phetioValueType=yi;const r=!(i.range&&i.range instanceof Ds),o=i.range instanceof Ds?i.range:new hi(i.range,i.rangePropertyOptions);i.validators.push(HI),i.numberType==="Integer"&&i.validators.push(zI);let c=!1;if(i.validators.push({isValidValue:g=>o.value.contains(g),validationMessage:()=>`Number value ${c?this.value:e} must be within rangeProperty value: ${o.value}`}),super(e,i),c=!0,this.numberType=i.numberType,this.rangeProperty=o,this.rangeProperty.addPhetioStateDependencies([this]),this.addPhetioStateDependencies([this.rangeProperty]),i.validValues&&this.validateNumberAndRangeProperty)for(let g=0;g<i.validValues.length;g++){const A=i.validValues[g];this.validateNumberAndRangeProperty(A)}this.disposeNumberProperty=()=>{r&&this.rangeProperty.dispose()},this.resetNumberProperty=()=>{r&&this.rangeProperty.reset()}}get range(){return this.rangeProperty.value}set range(e){this.rangeProperty.value=e}reset(){this.resetValueAndRange(),super.reset()}dispose(){this.disposeNumberProperty(),super.dispose()}setValueAndRange(e,t){this.setDeferred(!0),this.rangeProperty.setDeferred(!0),this.set(e),this.rangeProperty.set(t);const i=this.setDeferred(!1),s=this.rangeProperty.setDeferred(!1);i&&i(),s&&s()}resetValueAndRange(){this.setValueAndRange(this.initialValue,this.rangeProperty.initialValue)}toStateObject(){const e=super.toStateObject();return te.assignIn({numberType:this.numberType,range:xi.RangeIO.toStateObject(this.rangeProperty.value),rangePhetioID:this.rangeProperty&&this.rangeProperty.isPhetioInstrumented()?this.rangeProperty.tandem.phetioID:null},e)}}Kn.NumberPropertyIO=new Yt("NumberPropertyIO",{valueType:Kn,supertype:gA,parameterTypes:[yi],documentation:`Extends PropertyIO to add values for the numeric range ( min, max ) and numberType ( '${KI.join("' | '")}' )`,toStateObject:n=>n.toStateObject(),applyState:(n,e)=>{gA.applyState(n,e)},stateSchema:{numberType:Hi,range:xi.RangeIO,rangePhetioID:Zt(Hi)},apiStateKeys:["numberType","range","rangePhetioID"]});class b1 extends hi{constructor(e,t){const i=lt()({valueType:"string",phetioValueType:Hi},t);super(e,i)}}class Ra extends ui{constructor(e,t=!1,i){super(e,i),t&&(this.targetPropertyInstrumented=t)}setValueOrTargetProperty(e,t,i){if(Dt(i))this.setTargetProperty(i,e,t);else{const s=this.get();this.clearTargetProperty(),this.setPropertyValue(i),this.areValuesEqual(s,i)||this.notifyListeners(s)}}setTargetProperty(e,t=null,i=null){if(this.targetProperty===e)return t;this.targetProperty&&this.targetProperty instanceof Ds&&this.targetProperty.isPhetioInstrumented();const s=this.targetProperty;this.ownedPhetioProperty&&e!==this.ownedPhetioProperty&&this.disposeOwnedPhetioProperty(),t&&i!==null&&t.updateLinkedElementForProperty(i,s,e);const r=this.get();return this.clearTargetProperty(),this.targetProperty=e,this.targetProperty?(this.targetProperty.lazyLink(this.forwardingListener),this.setPropertyValue(this.targetProperty.value)):this.setPropertyValue(r),this.areValuesEqual(r,this.get())||this.notifyListeners(r),t}clearTargetProperty(){this.forwardingListener=this.forwardingListener||this.onTargetPropertyChange.bind(this),this.targetProperty&&this.targetProperty.unlink(this.forwardingListener),this.targetProperty=null}onTargetPropertyChange(e){super.set(e)}set(e){return this.targetProperty?this.targetProperty.set(e):super.set(e),this}setTargetPropertyInstrumented(e,t){return this.targetPropertyInstrumented=e,t}getTargetPropertyInstrumented(){return this.targetPropertyInstrumented||!1}initializePhetio(e,t,i){!this.targetProperty&&this.targetPropertyInstrumented?(this.ownedPhetioProperty=i(),this.setTargetProperty(this.ownedPhetioProperty,e,t)):this.targetProperty&&this.targetProperty instanceof Ds&&this.targetProperty.isPhetioInstrumented()&&e.updateLinkedElementForProperty(t,null,this.targetProperty)}getTargetProperty(){return this.targetProperty||null}isSettable(){return this.targetProperty?this.targetProperty.isSettable():super.isSettable()}disposeOwnedPhetioProperty(){this.ownedPhetioProperty&&(this.ownedPhetioProperty.dispose(),delete this.ownedPhetioProperty)}dispose(){this.clearTargetProperty(),this.disposeOwnedPhetioProperty(),super.dispose()}}class bd extends ui{constructor(e,t){super(e),this.onAccessAttempt=t}get(){return this.onAccessAttempt(),super.get()}set(e){throw new Error("Cannot set a TinyStaticProperty value")}isSettable(){return!1}notifyListeners(e){this.emit(this.get(),e,this)}link(e){this.addListener(e),e(this.get(),null,this)}equalsValue(e){return this.areValuesEqual(e,this.get())}}const Ta=function(n,...e){if(Fn()&&n){const t=e.map(i=>Object.keys(te.pick(n,...i)));t.filter(i=>i.length>0).length>1&&Et(!1,`Cannot simultaneously specify ${t.join(" and ")}`)}},Uf=n=>{var C,D,P,F;Ta(n,["length"],["elements"]);const e=lt()({hasListenerOrderDependencies:!1,length:0,elements:[],elementAddedEmitterOptions:{},elementRemovedEmitterOptions:{},lengthPropertyOptions:{}},n);let t=null;if(e.phetioType)t={name:"value",phetioType:e.phetioType.parameterTypes[0]};else if(zi.getValidatorValidationError(e))t=dn({name:"value"},{isValidValue:te.stubTrue});else{const K=te.pick(e,zi.VALIDATOR_KEYS);t=dn({name:"value"},K)}const i=new Os(Ci({tandem:(C=e.tandem)==null?void 0:C.createTandem("elementAddedEmitter"),parameters:[t],phetioReadOnly:!0,hasListenerOrderDependencies:e.hasListenerOrderDependencies},e.elementAddedEmitterOptions)),s=new Os(Ci({tandem:(D=e.tandem)==null?void 0:D.createTandem("elementRemovedEmitter"),parameters:[t],phetioReadOnly:!0,hasListenerOrderDependencies:e.hasListenerOrderDependencies},e.elementRemovedEmitterOptions)),r=new Kn(0,Ci({numberType:"Integer",tandem:(P=e.tandem)==null?void 0:P.createTandem("lengthProperty"),phetioReadOnly:!0,hasListenerOrderDependencies:e.hasListenerOrderDependencies},e.lengthPropertyOptions)),o=[],c=[],p=(K,M)=>{g.notificationsDeferred?g.deferredActions.push(()=>K.emit(M)):K.emit(M)},g=new Proxy(o,{get:function(K,M,U){return mA.hasOwnProperty(M)?mA[M]:Reflect.get(K,M,U)},set:function(K,M,U){const $=K[M];let re=null;M==="length"&&(re=K.slice(U));const pe=Reflect.set(K,M,U),ce=Number(M);return Number.isInteger(ce)&&ce>=0&&$!==U?(r.value=K.length,$!==void 0&&p(s,K[M]),U!==void 0&&p(i,U)):M==="length"&&(r.value=U,re&&re.forEach(T=>p(s,T))),pe},deleteProperty:function(K,M){const U=Number(M);let $;Number.isInteger(U)&&U>=0&&($=K[M]);const re=Reflect.deleteProperty(K,M);return $!==void 0&&p(s,$),re}});g.targetArray=o,g.notificationsDeferred=!1,g.emitNotification=p,g.deferredActions=c,g.elementAddedEmitter=i,g.elementRemovedEmitter=s,g.lengthProperty=r;const A=()=>{e.length>=0&&(g.length=e.length),e.elements.length>0&&Array.prototype.push.apply(g,e.elements)};if(A(),g.reset=()=>{g.length=0,A()},(F=e.tandem)!=null&&F.supplied&&(g.phetioElementType=e.phetioType.parameterTypes[0],g._observableArrayPhetioObject=new v1(g,e),Xe.PHET_IO_ENABLED)){const K=phet.phetio.phetioEngine.phetioStateEngine;K.clearDynamicElementsEmitter.addListener((M,U)=>{var $;($=g._observableArrayPhetioObject)!=null&&$.tandem.hasAncestor(U)&&(g.length=0,g.setNotificationsDeferred(!0))}),K.undeferEmitter.addListener(()=>{g.notificationsDeferred&&g.setNotificationsDeferred(!1)}),K.addSetStateHelper(()=>g.deferredActions.length>0?(g.deferredActions.shift()(),!0):!1)}return g};class v1 extends Gi{constructor(e,t){super(t),this.observableArray=e}}const mA={pop(...n){const e=this.targetArray.length,t=Array.prototype.pop.apply(this.targetArray,n);return this.lengthProperty.value=this.length,e>0&&this.emitNotification(this.elementRemovedEmitter,t),t},shift(...n){const e=this.targetArray.length,t=Array.prototype.shift.apply(this.targetArray,n);return this.lengthProperty.value=this.length,e>0&&this.emitNotification(this.elementRemovedEmitter,t),t},push(...n){const e=Array.prototype.push.apply(this.targetArray,n);this.lengthProperty.value=this.length;for(let t=0;t<arguments.length;t++)this.emitNotification(this.elementAddedEmitter,n[t]);return e},unshift(...n){const e=Array.prototype.unshift.apply(this.targetArray,n);this.lengthProperty.value=this.length;for(let t=0;t<n.length;t++)this.emitNotification(this.elementAddedEmitter,n[t]);return e},splice(...n){const e=Array.prototype.splice.apply(this.targetArray,n);this.lengthProperty.value=this.length;const t=e;for(let i=2;i<n.length;i++)this.emitNotification(this.elementAddedEmitter,n[i]);return t.forEach(i=>this.emitNotification(this.elementRemovedEmitter,i)),e},copyWithin(...n){const e=this.targetArray.slice(),t=Array.prototype.copyWithin.apply(this.targetArray,n);return yA(e,this),t},fill(...n){const e=this.targetArray.slice(),t=Array.prototype.fill.apply(this.targetArray,n);return yA(e,this),t},get:function(n){return this[n]},addItemAddedListener:function(n){this.elementAddedEmitter.addListener(n)},removeItemAddedListener:function(n){this.elementAddedEmitter.removeListener(n)},addItemRemovedListener:function(n){this.elementRemovedEmitter.addListener(n)},removeItemRemovedListener:function(n){this.elementRemovedEmitter.removeListener(n)},add:function(n){this.push(n)},addAll:function(n){this.push(...n)},remove:function(n){Ns(this,n)},removeAll:function(n){n.forEach(e=>Ns(this,e))},clear:function(){for(;this.length>0;)this.pop()},count:function(n){let e=0;for(let t=0;t<this.length;t++)n(this[t])&&e++;return e},find:function(n,e){return te.find(this,n,e)},shuffle:function(n){const e=n.shuffle(this);this.targetArray.length=0,Array.prototype.push.apply(this.targetArray,e)},getArrayCopy:function(){return this.slice()},dispose:function(){this.elementAddedEmitter.dispose(),this.elementRemovedEmitter.dispose(),this.lengthProperty.dispose(),this._observableArrayPhetioObject&&this._observableArrayPhetioObject.dispose()},toStateObject:function(){return{array:this.map(n=>this.phetioElementType.toStateObject(n))}},applyState:function(n){this.length=0;const e=n.array.map(t=>this.phetioElementType.fromStateObject(t));this.push(...e)},setNotificationsDeferred:function(n){if(!n)for(;this.deferredActions.length>0;)this.deferredActions.shift()();this.notificationsDeferred=n}},yA=(n,e)=>{const t=n,i=e.targetArray.slice();for(let s=0;s<t.length;s++){const r=t[s],o=i.indexOf(r);o>=0&&(t.splice(s,1),i.splice(o,1),s--)}t.forEach(s=>e.emitNotification(e.elementRemovedEmitter,s)),i.forEach(s=>e.emitNotification(e.elementAddedEmitter,s))},Cg=new er,YI=n=>(Cg.has(n)||Cg.set(n,new Yt(`ObservableArrayIO<${n.typeName}>`,{valueType:v1,parameterTypes:[n],toStateObject:e=>e.observableArray.toStateObject(),applyState:(e,t)=>e.observableArray.applyState(t),stateSchema:{array:Bo(n)}})),Cg.get(n));Uf.ObservableArrayIO=YI;class xt extends bn{static fromLayoutOrientation(e){return e==="horizontal"?xt.HORIZONTAL:xt.VERTICAL}constructor(e,t,i,s,r,o,c,p,g,A,C,D,P,F,K,M,U,$,re){super(),this.coordinate=e,this.centerCoordinate=t,this.minCoordinate=i,this.maxCoordinate=s,this.minSide=r,this.maxSide=o,this.minSize=c,this.maxSize=p,this.rectCoordinate=g,this.rectSize=A,this.flowBoxOrientation=C,this.size=D,this.line=P,this.preferredSize=F,this.localPreferredSize=K,this.sizable=M,this.ariaOrientation=C,this.modelToView=U,this.viewToModel=$,this.toVector=re}}xt.HORIZONTAL=new xt("x","centerX","minX","maxX","left","right","minWidth","maxWidth","rectX","rectWidth","horizontal","width","column","preferredWidth","localPreferredWidth","widthSizable",(n,e)=>n.modelToViewX(e),(n,e)=>n.viewToModelX(e),(n,e,t)=>new t(n,e,0,0));xt.VERTICAL=new xt("y","centerY","minY","maxY","top","bottom","minHeight","maxHeight","rectY","rectHeight","vertical","height","row","preferredHeight","localPreferredHeight","heightSizable",(n,e)=>n.modelToViewY(e),(n,e)=>n.viewToModelY(e),(n,e,t)=>new t(e,n,0,0));xt.enumeration=new br(xt,{phetioDocumentation:"Horizontal or vertical orientation"});xt.HORIZONTAL.opposite=xt.VERTICAL;xt.VERTICAL.opposite=xt.HORIZONTAL;const vd=new we(0,0);class Je{constructor(e,t,i,s){this.minX=e,this.minY=t,this.maxX=i,this.maxY=s}getWidth(){return this.maxX-this.minX}get width(){return this.getWidth()}getHeight(){return this.maxY-this.minY}get height(){return this.getHeight()}getX(){return this.minX}get x(){return this.getX()}getY(){return this.minY}get y(){return this.getY()}getMinX(){return this.minX}getMinY(){return this.minY}getMaxX(){return this.maxX}getMaxY(){return this.maxY}getLeft(){return this.minX}get left(){return this.minX}getTop(){return this.minY}get top(){return this.minY}getRight(){return this.maxX}get right(){return this.maxX}getBottom(){return this.maxY}get bottom(){return this.maxY}getCenterX(){return(this.maxX+this.minX)/2}get centerX(){return this.getCenterX()}getCenterY(){return(this.maxY+this.minY)/2}get centerY(){return this.getCenterY()}getLeftTop(){return new we(this.minX,this.minY)}get leftTop(){return this.getLeftTop()}getCenterTop(){return new we(this.getCenterX(),this.minY)}get centerTop(){return this.getCenterTop()}getRightTop(){return new we(this.maxX,this.minY)}get rightTop(){return this.getRightTop()}getLeftCenter(){return new we(this.minX,this.getCenterY())}get leftCenter(){return this.getLeftCenter()}getCenter(){return new we(this.getCenterX(),this.getCenterY())}get center(){return this.getCenter()}getRightCenter(){return new we(this.maxX,this.getCenterY())}get rightCenter(){return this.getRightCenter()}getLeftBottom(){return new we(this.minX,this.maxY)}get leftBottom(){return this.getLeftBottom()}getCenterBottom(){return new we(this.getCenterX(),this.maxY)}get centerBottom(){return this.getCenterBottom()}getRightBottom(){return new we(this.maxX,this.maxY)}get rightBottom(){return this.getRightBottom()}isEmpty(){return this.getWidth()<0||this.getHeight()<0}isFinite(){return isFinite(this.minX)&&isFinite(this.minY)&&isFinite(this.maxX)&&isFinite(this.maxY)}hasNonzeroArea(){return this.getWidth()>0&&this.getHeight()>0}isValid(){return!this.isEmpty()&&this.isFinite()}closestPointTo(e){return this.containsCoordinates(e.x,e.y)?e:this.getConstrainedPoint(e)}closestBoundaryPointTo(e){if(this.containsCoordinates(e.x,e.y)){const t=e.x<this.centerX?this.minX:this.maxX,i=e.y<this.centerY?this.minY:this.maxY;return Math.abs(t-e.x)<Math.abs(i-e.y)?new we(t,e.y):new we(e.x,i)}else return this.getConstrainedPoint(e)}getConstrainedPoint(e){const t=Math.max(Math.min(e.x,this.maxX),this.x),i=Math.max(Math.min(e.y,this.maxY),this.y);return new we(t,i)}containsCoordinates(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}containsPoint(e){return this.containsCoordinates(e.x,e.y)}containsBounds(e){return this.minX<=e.minX&&this.maxX>=e.maxX&&this.minY<=e.minY&&this.maxY>=e.maxY}intersectsBounds(e){const t=Math.max(this.minX,e.minX),i=Math.max(this.minY,e.minY),s=Math.min(this.maxX,e.maxX),r=Math.min(this.maxY,e.maxY);return s-t>=0&&r-i>=0}minimumDistanceToPointSquared(e){const t=e.x<this.minX?this.minX:e.x>this.maxX?this.maxX:null,i=e.y<this.minY?this.minY:e.y>this.maxY?this.maxY:null;let s;if(t===null&&i===null)return 0;if(t===null)return s=i-e.y,s*s;if(i===null)return s=t-e.x,s*s;{const r=t-e.x,o=i-e.y;return r*r+o*o}}maximumDistanceToPointSquared(e){let t=e.x>this.getCenterX()?this.minX:this.maxX,i=e.y>this.getCenterY()?this.minY:this.maxY;return t-=e.x,i-=e.y,t*t+i*i}toString(){return`[x:(${this.minX},${this.maxX}),y:(${this.minY},${this.maxY})]`}equals(e){return this.minX===e.minX&&this.minY===e.minY&&this.maxX===e.maxX&&this.maxY===e.maxY}equalsEpsilon(e,t){t=t!==void 0?t:0;const i=this.isFinite(),s=e.isFinite();return i&&s?Math.abs(this.minX-e.minX)<t&&Math.abs(this.minY-e.minY)<t&&Math.abs(this.maxX-e.maxX)<t&&Math.abs(this.maxY-e.maxY)<t:i!==s?!1:this===e?!0:(isFinite(this.minX+e.minX)?Math.abs(this.minX-e.minX)<t:this.minX===e.minX)&&(isFinite(this.minY+e.minY)?Math.abs(this.minY-e.minY)<t:this.minY===e.minY)&&(isFinite(this.maxX+e.maxX)?Math.abs(this.maxX-e.maxX)<t:this.maxX===e.maxX)&&(isFinite(this.maxY+e.maxY)?Math.abs(this.maxY-e.maxY)<t:this.maxY===e.maxY)}copy(e){return e?e.set(this):ks(this.minX,this.minY,this.maxX,this.maxY)}static create(e){return ks(e.minX,e.minY,e.maxX,e.maxY)}union(e){return ks(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}intersection(e){return ks(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}withCoordinates(e,t){return ks(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}withPoint(e){return this.withCoordinates(e.x,e.y)}withX(e){return this.copy().addX(e)}withY(e){return this.copy().addY(e)}withMinX(e){return ks(e,this.minY,this.maxX,this.maxY)}withMinY(e){return ks(this.minX,e,this.maxX,this.maxY)}withMaxX(e){return ks(this.minX,this.minY,e,this.maxY)}withMaxY(e){return ks(this.minX,this.minY,this.maxX,e)}roundedOut(){return ks(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}roundedIn(){return ks(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}transformed(e){return this.copy().transform(e)}dilated(e){return this.dilatedXY(e,e)}dilatedX(e){return ks(this.minX-e,this.minY,this.maxX+e,this.maxY)}dilatedY(e){return ks(this.minX,this.minY-e,this.maxX,this.maxY+e)}dilatedXY(e,t){return ks(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}eroded(e){return this.dilated(-e)}erodedX(e){return this.dilatedX(-e)}erodedY(e){return this.dilatedY(-e)}erodedXY(e,t){return this.dilatedXY(-e,-t)}withOffsets(e,t,i,s){return ks(this.minX-e,this.minY-t,this.maxX+i,this.maxY+s)}shiftedX(e){return ks(this.minX+e,this.minY,this.maxX+e,this.maxY)}shiftedY(e){return ks(this.minX,this.minY+e,this.maxX,this.maxY+e)}shiftedXY(e,t){return ks(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}shifted(e){return this.shiftedXY(e.x,e.y)}blend(e,t){const i=1-t;return ks(i*this.minX+t*e.minX,i*this.minY+t*e.minY,i*this.maxX+t*e.maxX,i*this.maxY+t*e.maxY)}setMinMax(e,t,i,s){return this.minX=e,this.minY=t,this.maxX=i,this.maxY=s,this}setMinX(e){return this.minX=e,this}setMinY(e){return this.minY=e,this}setMaxX(e){return this.maxX=e,this}setMaxY(e){return this.maxY=e,this}set(e){return this.setMinMax(e.minX,e.minY,e.maxX,e.maxY)}includeBounds(e){return this.setMinMax(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}constrainBounds(e){return this.setMinMax(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}addCoordinates(e,t){return this.setMinMax(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}addPoint(e){return this.addCoordinates(e.x,e.y)}addX(e){return this.minX=Math.min(e,this.minX),this.maxX=Math.max(e,this.maxX),this}addY(e){return this.minY=Math.min(e,this.minY),this.maxY=Math.max(e,this.maxY),this}roundOut(){return this.setMinMax(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}roundIn(){return this.setMinMax(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}transform(e){if(this.isEmpty())return this;if(e.isIdentity())return this;const t=this.minX,i=this.minY,s=this.maxX,r=this.maxY;return this.set(Je.NOTHING),this.addPoint(e.multiplyVector2(vd.setXY(t,i))),this.addPoint(e.multiplyVector2(vd.setXY(t,r))),this.addPoint(e.multiplyVector2(vd.setXY(s,i))),this.addPoint(e.multiplyVector2(vd.setXY(s,r))),this}dilate(e){return this.dilateXY(e,e)}dilateX(e){return this.setMinMax(this.minX-e,this.minY,this.maxX+e,this.maxY)}dilateY(e){return this.setMinMax(this.minX,this.minY-e,this.maxX,this.maxY+e)}dilateXY(e,t){return this.setMinMax(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}erode(e){return this.dilate(-e)}erodeX(e){return this.dilateX(-e)}erodeY(e){return this.dilateY(-e)}erodeXY(e,t){return this.dilateXY(-e,-t)}offset(e,t,i,s){return ks(this.minX-e,this.minY-t,this.maxX+i,this.maxY+s)}shiftX(e){return this.setMinMax(this.minX+e,this.minY,this.maxX+e,this.maxY)}shiftY(e){return this.setMinMax(this.minX,this.minY+e,this.maxX,this.maxY+e)}shiftXY(e,t){return this.setMinMax(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}shift(e){return this.shiftXY(e.x,e.y)}getXRange(){return new xi(this.minX,this.maxX)}setXRange(e){return this.setMinMax(e.min,this.minY,e.max,this.maxY)}get xRange(){return this.getXRange()}set xRange(e){this.setXRange(e)}getYRange(){return new xi(this.minY,this.maxY)}setYRange(e){return this.setMinMax(this.minX,e.min,this.maxX,e.max)}get yRange(){return this.getYRange()}set yRange(e){this.setYRange(e)}getClosestPoint(e,t,i){return i?i.setXY(e,t):i=new we(e,t),i.x<this.minX&&(i.x=this.minX),i.x>this.maxX&&(i.x=this.maxX),i.y<this.minY&&(i.y=this.minY),i.y>this.maxY&&(i.y=this.maxY),i}freeToPool(){Je.pool.freeToPool(this)}static rect(e,t,i,s){return ks(e,t,e+i,t+s)}static oriented(e,t,i,s,r){return e===xt.HORIZONTAL?new Je(t,i,s,r):new Je(i,t,r,s)}static point(e,t){if(e instanceof we){const i=e;return ks(i.x,i.y,i.x,i.y)}else return ks(e,t,e,t)}}Je.pool=new us(Je,{maxSize:1e3,initialize:Je.prototype.setMinMax,defaultArguments:[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]});Je.NOTHING=new Je(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);Je.EVERYTHING=new Je(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);Je.Bounds2IO=new Yt("Bounds2IO",{valueType:Je,documentation:"a 2-dimensional bounds rectangle",toStateObject:n=>({minX:n.minX,minY:n.minY,maxX:n.maxX,maxY:n.maxY}),fromStateObject:n=>new Je(rn.fromStateObject(n.minX),rn.fromStateObject(n.minY),rn.fromStateObject(n.maxX),rn.fromStateObject(n.maxY)),stateSchema:{minX:rn,maxX:rn,minY:rn,maxY:rn}});const ks=Je.pool.create.bind(Je.pool);Je.prototype.isBounds=!0;Je.prototype.dimension=2;class V1{constructor(e){this.rootBin=new Th(e,null)}allocate(e,t){const i=this.rootBin.findAvailableBin(e,t);if(i){const s=i.split(e,t);return s.use(),s}else return null}deallocate(e){e.unuse()}toString(){let e="",t="";function i(s){e+=`${t+s.toString()}
`,t=`${t}  `,te.each(s.children,i),t=t.substring(2)}return i(this.rootBin),e}}class Th{constructor(e,t){this.bounds=e,this.parent=t,this.isSplit=!1,this.isUsed=!1,this.children=[]}findAvailableBin(e,t){if(this.isUsed)return null;if(this.bounds.width<e||this.bounds.height<t)return null;if(this.isSplit){for(let i=0;i<this.children.length;i++){const s=this.children[i].findAvailableBin(e,t);if(s)return s}return null}else return this}split(e,t){if(e===this.bounds.width&&t===this.bounds.height)return this;this.isSplit=!0;const i=this.bounds.minX+e,s=this.bounds.minY+t,r=new Je(this.bounds.minX,this.bounds.minY,i,s),o=new Je(i,this.bounds.minY,this.bounds.maxX,s),c=new Je(this.bounds.minX,s,this.bounds.maxX,this.bounds.maxY),p=new Th(r,this);return this.children.push(p),o.hasNonzeroArea()&&this.children.push(new Th(o,this)),c.hasNonzeroArea()&&this.children.push(new Th(c,this)),p}use(){this.isUsed=!0}unuse(){this.isUsed=!1,this.parent&&this.parent.attemptToCollapse()}attemptToCollapse(){for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.isSplit||t.isUsed)return}this.children=[],this.isSplit=!1,this.parent&&this.parent.attemptToCollapse()}toString(){return this.bounds.toString()+(this.isUsed?" used":"")}}V1.Bin=Th;function _A(n,...e){return te.each(e,t=>{if(t)for(const i in t)Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))}),n}const es={mixInto(n,e){const t=lt()({defaultArguments:[],initialize:n.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},e);Et(t.maxSize>=0),Et(t.initialSize>=0);const i=[];let s=t.maxSize;const r=Function.prototype.bind.bind(n,n),o=r(...t.defaultArguments),c=t.initialize,p=t.useDefaultConstruction,g=n.prototype;for(_A(n,{pool:i,dirtyFromPool(){return i.length?i.pop():new o},createFromPool(...A){let C;return i.length?(C=i.pop(),c.apply(C,A)):p?(C=new o,c.apply(C,A)):C=new(r(...A)),C},get poolSize(){return i.length},set maxPoolSize(A){Et(A===Number.POSITIVE_INFINITY||Number.isInteger(A)&&A>=0,"maxPoolSize should be a non-negative integer or infinity"),s=A},get maxPoolSize(){return s}}),_A(g,{freeToPool(){i.length<s&&i.push(this)}});i.length<t.initialSize;)i.push(new o);return n}},Pg=new f0("dot"),GI=(n,e)=>n.add(e);class Ri{constructor(e,t,i){this.x=e,this.y=t,this.z=i}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.dot(this)}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceXYZ(e,t,i){const s=this.x-e,r=this.y-t,o=this.z-i;return Math.sqrt(s*s+r*r+o*o)}distanceSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}distanceSquaredXYZ(e,t,i){const s=this.x-e,r=this.y-t,o=this.z-i;return s*s+r*r+o*o}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}dotXYZ(e,t,i){return this.x*e+this.y*t+this.z*i}angleBetween(e){return Math.acos(hs(this.normalized().dot(e.normalized()),-1,1))}equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}equalsEpsilon(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)}copy(e){return e?e.set(this):ur(this.x,this.y,this.z)}cross(e){return ur(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}normalized(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return ur(this.x/e,this.y/e,this.z/e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return ur(this.x*e,this.y*e,this.z*e)}times(e){return this.timesScalar(e)}componentTimes(e){return ur(this.x*e.x,this.y*e.y,this.z*e.z)}plus(e){return ur(this.x+e.x,this.y+e.y,this.z+e.z)}plusXYZ(e,t,i){return ur(this.x+e,this.y+t,this.z+i)}plusScalar(e){return ur(this.x+e,this.y+e,this.z+e)}minus(e){return ur(this.x-e.x,this.y-e.y,this.z-e.z)}minusXYZ(e,t,i){return ur(this.x-e,this.y-t,this.z-i)}minusScalar(e){return ur(this.x-e,this.y-e,this.z-e)}dividedScalar(e){return ur(this.x/e,this.y/e,this.z/e)}negated(){return ur(-this.x,-this.y,-this.z)}blend(e,t){return this.plus(e.minus(this).times(t))}average(e){return this.blend(e,.5)}static average(e){return te.reduce(e,GI,new Ri(0,0,0)).divideScalar(e.length)}toString(){return`Vector3(${this.x}, ${this.y}, ${this.z})`}setXYZ(e,t,i){return this.x=e,this.y=t,this.z=i,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}set(e){return this.setXYZ(e.x,e.y,e.z)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXYZ(this.x+e.x,this.y+e.y,this.z+e.z)}addXYZ(e,t,i){return this.setXYZ(this.x+e,this.y+t,this.z+i)}addScalar(e){return this.setXYZ(this.x+e,this.y+e,this.z+e)}subtract(e){return this.setXYZ(this.x-e.x,this.y-e.y,this.z-e.z)}subtractXYZ(e,t,i){return this.setXYZ(this.x-e,this.y-t,this.z-i)}subtractScalar(e){return this.setXYZ(this.x-e,this.y-e,this.z-e)}multiplyScalar(e){return this.setXYZ(this.x*e,this.y*e,this.z*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXYZ(this.x*e.x,this.y*e.y,this.z*e.z)}divideScalar(e){return this.setXYZ(this.x/e,this.y/e,this.z/e)}negate(){return this.setXYZ(-this.x,-this.y,-this.z)}setCross(e){return this.setXYZ(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}normalize(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXYZ(Ys(this.x),Ys(this.y),Ys(this.z))}toStateObject(){return{x:this.x,y:this.y,z:this.z}}freeToPool(){Ri.pool.freeToPool(this)}static slerp(e,t,i){return Pg.Quaternion.slerp(new Pg.Quaternion,Pg.Quaternion.getRotationQuaternion(e,t),i).timesVector3(e)}static fromStateObject(e){return Ri.from(e)}static from(e){return ur(e.x||0,e.y||0,e.z||0)}}Ri.pool=new us(Ri,{maxSize:1e3,initialize:Ri.prototype.setXYZ,defaultArguments:[0,0,0]});Ri.ZERO=new Ri(0,0,0);Ri.X_UNIT=new Ri(1,0,0);Ri.Y_UNIT=new Ri(0,1,0);Ri.Z_UNIT=new Ri(0,0,1);Ri.prototype.isVector3=!0;Ri.prototype.dimension=3;const ur=Ri.pool.create.bind(Ri.pool);class su extends Ri{static mutableOverrideHelper(e){su.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector3`)}}}su.mutableOverrideHelper("setXYZ");su.mutableOverrideHelper("setX");su.mutableOverrideHelper("setY");su.mutableOverrideHelper("setZ");Ri.Vector3IO=new Yt("Vector3IO",{valueType:Ri,documentation:"Basic 3-dimensional vector, represented as (x,y,z)",toStateObject:n=>n.toStateObject(),fromStateObject:n=>Ri.fromStateObject(n),stateSchema:{x:yi,y:yi,z:yi}});function WI(n,e,t){return n.x*(e.y-t.y)+e.x*(t.y-n.y)+t.x*(n.y-e.y)}function XI(n,e,t){return Math.abs(WI(n,e,t))}function Wd(n,e,t,i=0){return XI(n,e,t)<=i}function Un(n,e,t,i,s){return(i-t)/(e-n)*(s-n)+t}function V0(n,e,t,i){if(n.equalsEpsilon(e,1e-10)||t.equalsEpsilon(i,1e-10))return null;const r=n.x-e.x,o=t.x-i.x,c=n.y-e.y,p=t.y-i.y,g=r*p-c*o;if(Math.abs(g)<1e-10)return null;const A=n.x*e.y-n.y*e.x,C=t.x*i.y-t.y*i.x;return new we((A*o-r*C)/g,(A*p-c*C)/g)}class pr{constructor(e){this.points=e.slice();for(let t=0;t<this.points.length-2;t++){const i=this.points[t],s=this.points[t+1],r=this.points[t+2];Wd(i,s,r)&&(this.points.splice(t+1,1),t--)}}findMatchingPair(e){let t=0;for(;t<this.points.length-2&&this.points[t+1].x<e;)t++;return[this.points[t],this.points[t+1]]}evaluate(e){if(this.points.length===1)return this.points[0].y;{const[t,i]=this.findMatchingPair(e);return t.x===e?t.y:i.x===e?i.y:Un(t.x,i.x,t.y,i.y,e)}}getCombinedXValues(e){return pr.sortedUniqueEpsilon(this.points.map(t=>t.x).concat(e.points.map(t=>t.x)))}getIntersectedXValues(e){const t=this.getCombinedXValues(e),i=[];for(let r=0;r<t.length-1;r++){const o=t[r],c=t[r+1],p=V0(new we(o,this.evaluate(o)),new we(c,this.evaluate(c)),new we(o,e.evaluate(o)),new we(c,e.evaluate(c)));p&&(r===0||p.x>o)&&(r===t.length-2||p.x<c)&&i.push(p.x)}const s=pr.sortedUniqueEpsilon([...t,...i]);return[s[0]-1,...s,s[s.length-1]+1]}binaryXOperation(e,t,i){return new pr(i.map(s=>new we(s,t(this.evaluate(s),e.evaluate(s)))))}binaryPointwiseOperation(e,t){return this.binaryXOperation(e,t,this.getCombinedXValues(e))}binaryIntersectingOperation(e,t){return this.binaryXOperation(e,t,this.getIntersectedXValues(e))}plus(e){return this.binaryPointwiseOperation(e,(t,i)=>t+i)}minus(e){return this.binaryPointwiseOperation(e,(t,i)=>t-i)}min(e){return this.binaryIntersectingOperation(e,Math.min)}max(e){return this.binaryIntersectingOperation(e,Math.max)}withXValues(e){return new pr(e.map(t=>new we(t,this.evaluate(t))))}inverted(){const e=this.points.map(t=>new we(t.y,t.x));return e.length>1&&e[0].x>e[1].x&&e.reverse(),new pr(e)}static sum(...e){return e.reduce((t,i)=>t.plus(i))}static min(...e){return e.reduce((t,i)=>t.min(i))}static max(...e){return e.reduce((t,i)=>t.max(i))}static constant(e){return new pr([new we(0,e)])}static linear(e,t){return new pr([new we(0,t),new we(1,e+t)])}static sortedUniqueEpsilon(e,t=1e-10){e=te.sortBy(e);for(let i=0;i<e.length-1;i++)Math.abs(e[i]-e[i+1])<t&&(e.splice(i,1),i--);return e}}function jI(n,e,t,i,s,r,o,c){const p=(D,P,F,K,M,U)=>(U-P)*(F-D)-(K-P)*(M-D);if(p(n,e,s,r,o,c)*p(t,i,s,r,o,c)>0||p(s,r,n,e,t,i)*p(o,c,n,e,t,i)>0)return null;const g=(n-t)*(r-c)-(e-i)*(s-o);if(Math.abs(g)<1e-10)return null;if(n===s&&e===r||n===o&&e===c)return new we(n,e);if(t===s&&i===r||t===o&&i===c)return new we(t,i);const A=((n*i-e*t)*(s-o)-(n-t)*(s*c-r*o))/g,C=((n*i-e*t)*(r-c)-(e-i)*(s*c-r*o))/g;return new we(A,C)}const QI={width:rn,height:rn};class ps{constructor(e,t){this.width=e,this.height=t}toString(){return`[${this.width}w, ${this.height}h]`}set(e){return this.width=e.width,this.height=e.height,this}setWidth(e){return this.width=e,this}setHeight(e){return this.height=e,this}copy(e){return e?e.set(this):new ps(this.width,this.height)}swapped(){return new ps(this.height,this.width)}toBounds(e,t){return e=e!==void 0?e:0,t=t!==void 0?t:0,new Je(e,t,this.width+e,this.height+t)}equals(e){return this.width===e.width&&this.height===e.height}equalsEpsilon(e,t=0){return Math.max(Math.abs(this.width-e.width),Math.abs(this.height-e.height))<=t}toStateObject(){return{width:rn.toStateObject(this.width),height:rn.toStateObject(this.height)}}static fromStateObject(e){return new ps(rn.fromStateObject(e.width),rn.fromStateObject(e.height))}}ps.Dimension2IO=new Yt("Dimension2IO",{valueType:ps,documentation:'A dimension with "width" and "height" members.',stateSchema:QI,toStateObject:n=>n.toStateObject(),fromStateObject:n=>ps.fromStateObject(n)});class ZI{constructor(e,t,i,s,r=!1){this.a1=e,this.a2=t,this.b1=i,this.b2=s,this.clamp=r}evaluate(e){return AA(this.a1,this.a2,this.b1,this.b2,e,this.clamp)}inverse(e){return AA(this.b1,this.b2,this.a1,this.a2,e,this.clamp)}}const AA=(n,e,t,i,s,r)=>{let o=Un(n,e,t,i,s);if(r){const c=Math.max(t,i),p=Math.min(t,i);o=hs(o,p,c)}return o};function JI(n){return Object.prototype.toString.call(n)==="[object Array]"}class bs{constructor(e,t,i,s){this.x=e,this.y=t,this.z=i,this.w=s}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.dot(this)}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return this.minus(e).magnitude}distanceXYZW(e,t,i,s){const r=this.x-e,o=this.y-t,c=this.z-i,p=this.w-s;return Math.sqrt(r*r+o*o+c*c+p*p)}distanceSquared(e){return this.minus(e).magnitudeSquared}distanceSquaredXYZW(e,t,i,s){const r=this.x-e,o=this.y-t,c=this.z-i,p=this.w-s;return r*r+o*o+c*c+p*p}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}dotXYZW(e,t,i,s){return this.x*e+this.y*t+this.z*i+this.w*s}angleBetween(e){return Math.acos(hs(this.normalized().dot(e.normalized()),-1,1))}equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}equalsEpsilon(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)+Math.abs(this.w-e.w)<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)&&isFinite(this.w)}copy(e){return e?e.set(this):Hr(this.x,this.y,this.z,this.w)}normalized(){const e=this.magnitude;return this.dividedScalar(e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return Hr(this.x*e,this.y*e,this.z*e,this.w*e)}times(e){return this.timesScalar(e)}componentTimes(e){return Hr(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}plus(e){return Hr(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}plusXYZW(e,t,i,s){return Hr(this.x+e,this.y+t,this.z+i,this.w+s)}plusScalar(e){return Hr(this.x+e,this.y+e,this.z+e,this.w+e)}minus(e){return Hr(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}minusXYZW(e,t,i,s){return Hr(this.x-e,this.y-t,this.z-i,this.w-s)}minusScalar(e){return Hr(this.x-e,this.y-e,this.z-e,this.w-e)}dividedScalar(e){return Hr(this.x/e,this.y/e,this.z/e,this.w/e)}negated(){return Hr(-this.x,-this.y,-this.z,-this.w)}blend(e,t){return this.plus(e.minus(this).times(t))}average(e){return this.blend(e,.5)}toString(){return`Vector4(${this.x}, ${this.y}, ${this.z}, ${this.w})`}setXYZW(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}set(e){return this.setXYZW(e.x,e.y,e.z,e.w)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXYZW(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}addXYZW(e,t,i,s){return this.setXYZW(this.x+e,this.y+t,this.z+i,this.w+s)}addScalar(e){return this.setXYZW(this.x+e,this.y+e,this.z+e,this.w+e)}subtract(e){return this.setXYZW(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}subtractXYZW(e,t,i,s){return this.setXYZW(this.x-e,this.y-t,this.z-i,this.w-s)}subtractScalar(e){return this.setXYZW(this.x-e,this.y-e,this.z-e,this.w-e)}multiplyScalar(e){return this.setXYZW(this.x*e,this.y*e,this.z*e,this.w*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXYZW(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}divideScalar(e){return this.setXYZW(this.x/e,this.y/e,this.z/e,this.w/e)}negate(){return this.setXYZW(-this.x,-this.y,-this.z,-this.w)}normalize(){const e=this.magnitude;if(e===0)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXYZW(Ys(this.x),Ys(this.y),Ys(this.z),Ys(this.w))}toStateObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}freeToPool(){bs.pool.freeToPool(this)}static fromStateObject(e){return bs.from(e)}static from(e,t=1){return Hr(e.x||0,e.y||0,e.z||0,e.w||t)}}bs.pool=new us(bs,{maxSize:1e3,initialize:bs.prototype.setXYZW,defaultArguments:[0,0,0,0]});bs.ZERO=new bs(0,0,0,0);bs.X_UNIT=new bs(1,0,0,0);bs.Y_UNIT=new bs(0,1,0,0);bs.Z_UNIT=new bs(0,0,1,0);bs.W_UNIT=new bs(0,0,0,1);bs.prototype.isVector4=!0;bs.prototype.dimension=4;const Hr=bs.pool.create.bind(bs.pool);class Fl extends bs{static mutableOverrideHelper(e){Fl.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector3`)}}}Fl.mutableOverrideHelper("setXYZW");Fl.mutableOverrideHelper("setX");Fl.mutableOverrideHelper("setY");Fl.mutableOverrideHelper("setZ");Fl.mutableOverrideHelper("setW");const mr=self.Float64Array||Array;class Qt{constructor(e,t,i,s){this.m=e,this.n=t;const r=e*t;this.size=r;let o;if(s)this.entries=i;else if(i||(i=0),this.entries=new mr(r),JI(i))for(o=0;o<r;o++)this.entries[o]=i[o];else for(o=0;o<r;o++)this.entries[o]=i}copy(){const e=new Qt(this.m,this.n);for(let t=0;t<this.size;t++)e.entries[t]=this.entries[t];return e}getArray(){return this.entries}getArrayCopy(){return new mr(this.entries)}getRowDimension(){return this.m}getColumnDimension(){return this.n}index(e,t){return e*this.n+t}get(e,t){return this.entries[this.index(e,t)]}set(e,t,i){this.entries[this.index(e,t)]=i}getMatrix(e,t,i,s){const r=new Qt(t-e+1,s-i+1);for(let o=e;o<=t;o++)for(let c=i;c<=s;c++)r.entries[r.index(o-e,c-i)]=this.entries[this.index(o,c)];return r}getArrayRowMatrix(e,t,i){const s=new Qt(e.length,i-t+1);for(let r=0;r<e.length;r++)for(let o=t;o<=i;o++)s.entries[s.index(r,o-t)]=this.entries[this.index(e[r],o)];return s}transpose(e){e=e||new Qt(this.n,this.m);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e.entries[e.index(i,t)]=this.entries[this.index(t,i)];return e}norm1(){let e=0;for(let t=0;t<this.n;t++){let i=0;for(let s=0;s<this.m;s++)i+=Math.abs(this.entries[this.index(s,t)]);e=Math.max(e,i)}return e}norm2(){return new fl(this).norm2()}normInf(){let e=0;for(let t=0;t<this.m;t++){let i=0;for(let s=0;s<this.n;s++)i+=Math.abs(this.entries[this.index(t,s)]);e=Math.max(e,i)}return e}normF(){let e=0;for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e=Qt.hypot(e,this.entries[this.index(t,i)]);return e}uminus(){const e=new Qt(this.m,this.n);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=-this.entries[this.index(t,i)];return e}plus(e){this.checkMatrixDimensions(e);const t=new Qt(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=t.index(i,s);t.entries[r]=this.entries[r]+e.entries[r]}return t}plusEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=this.entries[s]+e.entries[s]}return this}blendEquals(e,t){this.checkMatrixDimensions(e);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=this.index(i,s),o=this.entries[r],c=e.entries[r];this.entries[r]=o+(c-o)*t}return this}minus(e){this.checkMatrixDimensions(e);const t=new Qt(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=this.index(i,s);t.entries[r]=this.entries[r]-e.entries[r]}return t}minusEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=this.entries[s]-e.entries[s]}return this}arrayTimes(e){this.checkMatrixDimensions(e);const t=new Qt(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=t.index(i,s);t.entries[r]=this.entries[r]*e.entries[r]}return t}arrayTimesEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=this.entries[s]*e.entries[s]}return this}arrayRightDivide(e){this.checkMatrixDimensions(e);const t=new Qt(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=this.index(i,s);t.entries[r]=this.entries[r]/e.entries[r]}return t}arrayRightDivideEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=this.entries[s]/e.entries[s]}return this}arrayLeftDivide(e){this.checkMatrixDimensions(e);const t=new Qt(this.m,this.n);for(let i=0;i<this.m;i++)for(let s=0;s<this.n;s++){const r=this.index(i,s);t.entries[r]=e.entries[r]/this.entries[r]}return t}arrayLeftDivideEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=e.entries[s]/this.entries[s]}return this}times(e){let t,i,s,r,o,c;if(e.isMatrix){if(c=e,c.m!==this.n)throw new Error("Matrix inner dimensions must agree.");t=new Qt(this.m,c.n);const p=new mr(this.n);for(s=0;s<c.n;s++){for(r=0;r<this.n;r++)p[r]=c.entries[c.index(r,s)];for(i=0;i<this.m;i++){for(o=0,r=0;r<this.n;r++)o+=this.entries[this.index(i,r)]*p[r];t.entries[t.index(i,s)]=o}}return t}else{for(o=e,t=new Qt(this.m,this.n),i=0;i<this.m;i++)for(s=0;s<this.n;s++)t.entries[t.index(i,s)]=o*this.entries[this.index(i,s)];return t}}timesEquals(e){for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const s=this.index(t,i);this.entries[s]=e*this.entries[s]}return this}solve(e){return this.m===this.n?new bA(this).solve(e):new $I(this).solve(e)}solveTranspose(e){return this.transpose().solve(e.transpose())}inverse(){return this.solve(Qt.identity(this.m,this.m))}det(){return new bA(this).det()}rank(){return new fl(this).rank()}cond(){return new fl(this).cond()}trace(){let e=0;for(let t=0;t<Math.min(this.m,this.n);t++)e+=this.entries[this.index(t,t)];return e}checkMatrixDimensions(e){if(e.m!==this.m||e.n!==this.n)throw new Error("Matrix dimensions must agree.")}toString(){let e="";e+=`dim: ${this.getRowDimension()}x${this.getColumnDimension()}
`;for(let t=0;t<this.getRowDimension();t++){for(let i=0;i<this.getColumnDimension();i++)e+=`${this.get(t,i)} `;e+=`
`}return e}extractVector2(e){return new we(this.get(0,e),this.get(1,e))}extractVector3(e){return new Ri(this.get(0,e),this.get(1,e),this.get(2,e))}extractVector4(e){return new bs(this.get(0,e),this.get(1,e),this.get(2,e),this.get(3,e))}setVectors3(e){const t=e.length;for(let i=0;i<t;i++){const s=e[i];this.entries[i]=s.x,this.entries[i+t]=s.y,this.entries[i+2*t]=s.z}return this}static hypot(e,t){let i;return Math.abs(e)>Math.abs(t)?(i=t/e,i=Math.abs(e)*Math.sqrt(1+i*i)):t!==0?(i=e/t,i=Math.abs(t)*Math.sqrt(1+i*i)):i=0,i}static identity(e,t){const i=new Qt(e,t);for(let s=0;s<e;s++)for(let r=0;r<t;r++)i.entries[i.index(s,r)]=s===r?1:0;return i}static diagonalMatrix(e){const t=e.length,i=new Qt(t,t);for(let s=0;s<t;s++)i.entries[i.index(s,s)]=e[s];return i}static rowVector2(e){return new Qt(1,2,[e.x,e.y])}static rowVector3(e){return new Qt(1,3,[e.x,e.y,e.z])}static rowVector4(e){return new Qt(1,4,[e.x,e.y,e.z,e.w])}static rowVector(e){if(e.isVector2)return Qt.rowVector2(e);if(e.isVector3)return Qt.rowVector3(e);if(e.isVector4)return Qt.rowVector4(e);throw new Error(`undetected type of vector: ${e.toString()}`)}static columnVector2(e){return new Qt(2,1,[e.x,e.y])}static columnVector3(e){return new Qt(3,1,[e.x,e.y,e.z])}static columnVector4(e){return new Qt(4,1,[e.x,e.y,e.z,e.w])}static columnVector(e){if(e.isVector2)return Qt.columnVector2(e);if(e.isVector3)return Qt.columnVector3(e);if(e.isVector4)return Qt.columnVector4(e);throw new Error(`undetected type of vector: ${e.toString()}`)}static fromVectors2(e){const i=e.length,s=new mr(2*i);for(let r=0;r<i;r++){const o=e[r];s[r]=o.x,s[r+i]=o.y}return new Qt(2,i,s,!0)}static fromVectors3(e){const i=e.length,s=new mr(3*i);for(let r=0;r<i;r++){const o=e[r];s[r]=o.x,s[r+i]=o.y,s[r+2*i]=o.z}return new Qt(3,i,s,!0)}static fromVectors4(e){const i=e.length,s=new mr(4*i);for(let r=0;r<i;r++){const o=e[r];s[r]=o.x,s[r+i]=o.y,s[r+2*i]=o.z,s[r+3*i]=o.w}return new Qt(4,i,s,!0)}}Qt.prototype.isMatrix=!0;class bA{constructor(e){let t,i,s;this.matrix=e,this.LU=e.getArrayCopy();const r=this.LU;this.m=e.getRowDimension();const o=this.m;this.n=e.getColumnDimension();const c=this.n;for(this.piv=new Uint32Array(o),t=0;t<o;t++)this.piv[t]=t;this.pivsign=1;const p=new mr(o);for(i=0;i<c;i++){for(t=0;t<o;t++)p[t]=r[e.index(t,i)];for(t=0;t<o;t++){const A=Math.min(t,i);let C=0;for(s=0;s<A;s++){const D=e.index(t,s);C+=r[D]*p[s]}p[t]-=C,r[e.index(t,i)]=p[t]}let g=i;for(t=i+1;t<o;t++)Math.abs(p[t])>Math.abs(p[g])&&(g=t);if(g!==i){for(s=0;s<c;s++){const A=e.index(g,s),C=e.index(i,s),D=r[A];r[A]=r[C],r[C]=D}s=this.piv[g],this.piv[g]=this.piv[i],this.piv[i]=s,this.pivsign=-this.pivsign}if(i<o&&r[this.matrix.index(i,i)]!==0)for(t=i+1;t<o;t++)r[e.index(t,i)]/=r[e.index(i,i)]}}isNonsingular(){for(let e=0;e<this.n;e++){const t=this.matrix.index(e,e);if(this.LU[t]===0)return!1}return!0}getL(){const e=new Qt(this.m,this.n);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)t>i?e.entries[e.index(t,i)]=this.LU[this.matrix.index(t,i)]:t===i?e.entries[e.index(t,i)]=1:e.entries[e.index(t,i)]=0;return e}getU(){const e=new Qt(this.n,this.n);for(let t=0;t<this.n;t++)for(let i=0;i<this.n;i++)t<=i?e.entries[e.index(t,i)]=this.LU[this.matrix.index(t,i)]:e.entries[e.index(t,i)]=0;return e}getPivot(){const e=new Uint32Array(this.m);for(let t=0;t<this.m;t++)e[t]=this.piv[t];return e}getDoublePivot(){const e=new mr(this.m);for(let t=0;t<this.m;t++)e[t]=this.piv[t];return e}det(){if(this.m!==this.n)throw new Error("Matrix must be square.");let e=this.pivsign;for(let t=0;t<this.n;t++)e*=this.LU[this.matrix.index(t,t)];return e}solve(e){let t,i,s;if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isNonsingular())throw new Error("Matrix is singular.");const r=e.getColumnDimension(),o=e.getArrayRowMatrix(this.piv,0,r-1);for(s=0;s<this.n;s++)for(t=s+1;t<this.n;t++)for(i=0;i<r;i++)o.entries[o.index(t,i)]-=o.entries[o.index(s,i)]*this.LU[this.matrix.index(t,s)];for(s=this.n-1;s>=0;s--){for(i=0;i<r;i++)o.entries[o.index(s,i)]/=this.LU[this.matrix.index(s,s)];for(t=0;t<s;t++)for(i=0;i<r;i++)o.entries[o.index(t,i)]-=o.entries[o.index(s,i)]*this.LU[this.matrix.index(t,s)]}return o}}class $I{constructor(e){this.matrix=e,this.QR=e.getArrayCopy();const t=this.QR;this.m=e.getRowDimension();const i=this.m;this.n=e.getColumnDimension();const s=this.n;this.Rdiag=new mr(s);let r,o,c;for(c=0;c<s;c++){let p=0;for(r=c;r<i;r++)p=Qt.hypot(p,t[this.matrix.index(r,c)]);if(p!==0){for(t[this.matrix.index(c,c)]<0&&(p=-p),r=c;r<i;r++)t[this.matrix.index(r,c)]/=p;for(t[this.matrix.index(c,c)]+=1,o=c+1;o<s;o++){let g=0;for(r=c;r<i;r++)g+=t[this.matrix.index(r,c)]*t[this.matrix.index(r,o)];for(g=-g/t[this.matrix.index(c,c)],r=c;r<i;r++)t[this.matrix.index(r,o)]+=g*t[this.matrix.index(r,c)]}}this.Rdiag[c]=-p}}isFullRank(){for(let e=0;e<this.n;e++)if(this.Rdiag[e]===0)return!1;return!0}getH(){const e=new Qt(this.m,this.n);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)t>=i?e.entries[e.index(t,i)]=this.QR[this.matrix.index(t,i)]:e.entries[e.index(t,i)]=0;return e}getR(){const e=new Qt(this.n,this.n);for(let t=0;t<this.n;t++)for(let i=0;i<this.n;i++)t<i?e.entries[e.index(t,i)]=this.QR[this.matrix.index(t,i)]:t===i?e.entries[e.index(t,i)]=this.Rdiag[t]:e.entries[e.index(t,i)]=0;return e}getQ(){let e,t,i;const s=new Qt(this.m,this.n);for(i=this.n-1;i>=0;i--){for(e=0;e<this.m;e++)s.entries[s.index(e,i)]=0;for(s.entries[s.index(i,i)]=1,t=i;t<this.n;t++)if(this.QR[this.matrix.index(i,i)]!==0){let r=0;for(e=i;e<this.m;e++)r+=this.QR[this.matrix.index(e,i)]*s.entries[s.index(e,t)];for(r=-r/this.QR[this.matrix.index(i,i)],e=i;e<this.m;e++)s.entries[s.index(e,t)]+=r*this.QR[this.matrix.index(e,i)]}}return s}solve(e){if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isFullRank())throw new Error("Matrix is rank deficient.");let t,i,s;const r=e.getColumnDimension(),o=e.getArrayCopy();for(s=0;s<this.n;s++)for(i=0;i<r;i++){let c=0;for(t=s;t<this.m;t++)c+=this.QR[this.matrix.index(t,s)]*o[e.index(t,i)];for(c=-c/this.QR[this.matrix.index(s,s)],t=s;t<this.m;t++)o[e.index(t,i)]+=c*this.QR[this.matrix.index(t,s)]}for(s=this.n-1;s>=0;s--){for(i=0;i<r;i++)o[e.index(s,i)]/=this.Rdiag[s];for(t=0;t<s;t++)for(i=0;i<r;i++)o[e.index(t,i)]-=o[e.index(s,i)]*this.QR[this.matrix.index(t,s)]}return new Qt(this.n,r,o,!0).getMatrix(0,this.n-1,0,r-1)}}class fl{constructor(e){this.matrix=e;const t=e,i=t.getArrayCopy();this.m=t.getRowDimension(),this.n=t.getColumnDimension();const s=this.m,r=this.n,o=Math.min,c=Math.max,p=Math.pow,g=Math.abs,A=o(s,r);this.s=new mr(o(s+1,r));const C=this.s;this.U=new mr(s*A);const D=this.U;this.V=new mr(r*r);const P=this.V,F=new mr(r),K=new mr(s);let M,U,$,re,pe,ce,T;const Ce=Qt.hypot,ze=o(s-1,r),be=c(0,o(r-2,s));for($=0;$<c(ze,be);$++){if($<ze){for(C[$]=0,M=$;M<s;M++)C[$]=Ce(C[$],i[M*r+$]);if(C[$]!==0){for(i[$*r+$]<0&&(C[$]=-C[$]),M=$;M<s;M++)i[M*r+$]/=C[$];i[$*r+$]+=1}C[$]=-C[$]}for(U=$+1;U<r;U++){if($<ze&&C[$]!==0){for(re=0,M=$;M<s;M++)re+=i[M*r+$]*i[M*r+U];for(re=-re/i[$*r+$],M=$;M<s;M++)i[M*r+U]+=re*i[M*r+$]}F[U]=i[$*r+U]}if($<ze)for(M=$;M<s;M++)D[M*A+$]=i[M*r+$];if($<be){for(F[$]=0,M=$+1;M<r;M++)F[$]=Ce(F[$],F[M]);if(F[$]!==0){for(F[$+1]<0&&(F[$]=-F[$]),M=$+1;M<r;M++)F[M]/=F[$];F[$+1]+=1}if(F[$]=-F[$],$+1<s&&F[$]!==0){for(M=$+1;M<s;M++)K[M]=0;for(U=$+1;U<r;U++)for(M=$+1;M<s;M++)K[M]+=F[U]*i[M*r+U];for(U=$+1;U<r;U++)for(re=-F[U]/F[$+1],M=$+1;M<s;M++)i[M*r+U]+=re*K[M]}for(M=$+1;M<r;M++)P[M*r+$]=F[M]}}let Be=o(r,s+1);ze<r&&(C[ze]=i[ze*r+ze]),s<Be&&(C[Be-1]=0),be+1<Be&&(F[be]=i[be*r+Be-1]),F[Be-1]=0;{for(U=ze;U<A;U++){for(M=0;M<s;M++)D[M*A+U]=0;D[U*A+U]=1}for($=ze-1;$>=0;$--)if(C[$]!==0){for(U=$+1;U<A;U++){for(re=0,M=$;M<s;M++)re+=D[M*A+$]*D[M*A+U];for(re=-re/D[$*A+$],M=$;M<s;M++)D[M*A+U]+=re*D[M*A+$]}for(M=$;M<s;M++)D[M*A+$]=-D[M*A+$];for(D[$*A+$]=1+D[$*A+$],M=0;M<$-1;M++)D[M*A+$]=0}else{for(M=0;M<s;M++)D[M*A+$]=0;D[$*A+$]=1}}for($=r-1;$>=0;$--){if($<be&&F[$]!==0)for(U=$+1;U<A;U++){for(re=0,M=$+1;M<r;M++)re+=P[M*r+$]*P[M*r+U];for(re=-re/P[($+1)*r+$],M=$+1;M<r;M++)P[M*r+U]+=re*P[M*r+$]}for(M=0;M<r;M++)P[M*r+$]=0;P[$*r+$]=1}const xe=Be-1;let Qe=0;const Fe=p(2,-52),Ye=p(2,-966);for(;Be>0;){let ut;if(Qe>500)break;for($=Be-2;$>=-1&&$!==-1;$--)if(g(F[$])<=Ye+Fe*(g(C[$])+g(C[$+1]))){F[$]=0;break}if($===Be-2)ut=4;else{let Me;for(Me=Be-1;Me>=$&&Me!==$;Me--)if(re=(Me!==Be?g(F[Me]):0)+(Me!==$+1?g(F[Me-1]):0),g(C[Me])<=Ye+Fe*re){C[Me]=0;break}Me===$?ut=3:Me===Be-1?ut=1:(ut=2,$=Me)}switch($++,ut){case 1:for(pe=F[Be-2],F[Be-2]=0,U=Be-2;U>=$;U--)for(re=Ce(C[U],pe),ce=C[U]/re,T=pe/re,C[U]=re,U!==$&&(pe=-T*F[U-1],F[U-1]=ce*F[U-1]),M=0;M<r;M++)re=ce*P[M*r+U]+T*P[M*r+Be-1],P[M*r+Be-1]=-T*P[M*r+U]+ce*P[M*r+Be-1],P[M*r+U]=re;break;case 2:for(pe=F[$-1],F[$-1]=0,U=$;U<Be;U++)for(re=Ce(C[U],pe),ce=C[U]/re,T=pe/re,C[U]=re,pe=-T*F[U],F[U]=ce*F[U],M=0;M<s;M++)re=ce*D[M*A+U]+T*D[M*A+$-1],D[M*A+$-1]=-T*D[M*A+U]+ce*D[M*A+$-1],D[M*A+U]=re;break;case 3:{const Me=c(c(c(c(g(C[Be-1]),g(C[Be-2])),g(F[Be-2])),g(C[$])),g(F[$])),Lt=C[Be-1]/Me,at=C[Be-2]/Me,Pe=F[Be-2]/Me,$e=C[$]/Me,gt=F[$]/Me,oi=((at+Lt)*(at-Lt)+Pe*Pe)/2,Mt=Lt*Pe*(Lt*Pe);let Ni=0;(oi!==0||Mt!==0)&&(Ni=Math.sqrt(oi*oi+Mt),oi<0&&(Ni=-Ni),Ni=Mt/(oi+Ni)),pe=($e+Lt)*($e-Lt)+Ni;let qt=$e*gt;for(U=$;U<Be-1;U++){for(re=Ce(pe,qt),ce=pe/re,T=qt/re,U!==$&&(F[U-1]=re),pe=ce*C[U]+T*F[U],F[U]=ce*F[U]-T*C[U],qt=T*C[U+1],C[U+1]=ce*C[U+1],M=0;M<r;M++)re=ce*P[M*r+U]+T*P[M*r+U+1],P[M*r+U+1]=-T*P[M*r+U]+ce*P[M*r+U+1],P[M*r+U]=re;if(re=Ce(pe,qt),ce=pe/re,T=qt/re,C[U]=re,pe=ce*F[U]+T*C[U+1],C[U+1]=-T*F[U]+ce*C[U+1],qt=T*F[U+1],F[U+1]=ce*F[U+1],U<s-1)for(M=0;M<s;M++)re=ce*D[M*A+U]+T*D[M*A+U+1],D[M*A+U+1]=-T*D[M*A+U]+ce*D[M*A+U+1],D[M*A+U]=re}F[Be-2]=pe,Qe=Qe+1}break;case 4:{if(C[$]<=0)for(C[$]=C[$]<0?-C[$]:0,M=0;M<=xe;M++)P[M*r+$]=-P[M*r+$];for(;$<xe&&!(C[$]>=C[$+1]);){if(re=C[$],C[$]=C[$+1],C[$+1]=re,$<r-1)for(M=0;M<r;M++)re=P[M*r+$+1],P[M*r+$+1]=P[M*r+$],P[M*r+$]=re;if($<s-1)for(M=0;M<s;M++)re=D[M*A+$+1],D[M*A+$+1]=D[M*A+$],D[M*A+$]=re;$++}Qe=0,Be--}break;default:throw new Error(`invalid kase: ${ut}`)}}}getU(){return new Qt(this.m,Math.min(this.m+1,this.n),this.U,!0)}getV(){return new Qt(this.n,this.n,this.V,!0)}getSingularValues(){return this.s}getS(){const e=new Qt(this.n,this.n);for(let t=0;t<this.n;t++){for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=0;e.entries[e.index(t,t)]=this.s[t]}return e}norm2(){return this.s[0]}cond(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}rank(){const e=Math.pow(2,-23),t=Math.max(this.m,this.n)*this.s[0]*e;let i=0;for(let s=0;s<this.s.length;s++)this.s[s]>t&&i++;return i}static pseudoinverse(e){const t=new fl(e),i=Qt.diagonalMatrix(t.getSingularValues().map(s=>Math.abs(s)<1e-300?0:1/s));return t.getV().times(i).times(t.getU().transpose())}}const ex=self.Float32Array||Array;class ls{constructor(e,t,i,s,r,o,c,p,g,A,C,D,P,F,K,M,U){this.entries=new ex(16),this.type=mi.OTHER,this.rowMajor(e!==void 0?e:1,t!==void 0?t:0,i!==void 0?i:0,s!==void 0?s:0,r!==void 0?r:0,o!==void 0?o:1,c!==void 0?c:0,p!==void 0?p:0,g!==void 0?g:0,A!==void 0?A:0,C!==void 0?C:1,D!==void 0?D:0,P!==void 0?P:0,F!==void 0?F:0,K!==void 0?K:0,M!==void 0?M:1,U)}rowMajor(e,t,i,s,r,o,c,p,g,A,C,D,P,F,K,M,U){return this.entries[0]=e,this.entries[1]=r,this.entries[2]=g,this.entries[3]=P,this.entries[4]=t,this.entries[5]=o,this.entries[6]=A,this.entries[7]=F,this.entries[8]=i,this.entries[9]=c,this.entries[10]=C,this.entries[11]=K,this.entries[12]=s,this.entries[13]=p,this.entries[14]=D,this.entries[15]=M,this.type=U===void 0?P===0&&F===0&&K===0&&M===1?mi.AFFINE:mi.OTHER:U,this}columnMajor(e,t,i,s,r,o,c,p,g,A,C,D,P,F,K,M,U){return this.rowMajor(e,r,g,P,t,o,A,F,i,c,C,K,s,p,D,M,U)}set(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m03(),e.m10(),e.m11(),e.m12(),e.m13(),e.m20(),e.m21(),e.m22(),e.m23(),e.m30(),e.m31(),e.m32(),e.m33(),e.type)}m00(){return this.entries[0]}m01(){return this.entries[4]}m02(){return this.entries[8]}m03(){return this.entries[12]}m10(){return this.entries[1]}m11(){return this.entries[5]}m12(){return this.entries[9]}m13(){return this.entries[13]}m20(){return this.entries[2]}m21(){return this.entries[6]}m22(){return this.entries[10]}m23(){return this.entries[14]}m30(){return this.entries[3]}m31(){return this.entries[7]}m32(){return this.entries[11]}m33(){return this.entries[15]}isIdentity(){return this.type===mi.IDENTITY||this.equals(ls.IDENTITY)}isFinite(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m03())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m13())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())&&isFinite(this.m23())&&isFinite(this.m30())&&isFinite(this.m31())&&isFinite(this.m32())&&isFinite(this.m33())}getTranslation(){return new Ri(this.m03(),this.m13(),this.m23())}get translation(){return this.getTranslation()}getScaleVector(){const e=this.m00()+this.m03(),t=this.m10()+this.m13(),i=this.m20()+this.m23(),s=this.m30()+this.m33(),r=this.m01()+this.m03(),o=this.m11()+this.m13(),c=this.m21()+this.m23(),p=this.m31()+this.m33(),g=this.m02()+this.m03(),A=this.m12()+this.m13(),C=this.m22()+this.m23(),D=this.m32()+this.m33();return new Ri(Math.sqrt(e*e+t*t+i*i+s*s),Math.sqrt(r*r+o*o+c*c+p*p),Math.sqrt(g*g+A*A+C*C+D*D))}get scaleVector(){return this.getScaleVector()}getCSSTransform(){return`matrix3d(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[2].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[5].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)},${this.entries[8].toFixed(20)},${this.entries[9].toFixed(20)},${this.entries[10].toFixed(20)},${this.entries[11].toFixed(20)},${this.entries[12].toFixed(20)},${this.entries[13].toFixed(20)},${this.entries[14].toFixed(20)},${this.entries[15].toFixed(20)})`}get cssTransform(){return this.getCSSTransform()}equals(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m03()===e.m03()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m13()===e.m13()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()&&this.m23()===e.m23()&&this.m30()===e.m30()&&this.m31()===e.m31()&&this.m32()===e.m32()&&this.m33()===e.m33()}equalsEpsilon(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m03()-e.m03())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m13()-e.m13())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t&&Math.abs(this.m23()-e.m23())<t&&Math.abs(this.m30()-e.m30())<t&&Math.abs(this.m31()-e.m31())<t&&Math.abs(this.m32()-e.m32())<t&&Math.abs(this.m33()-e.m33())<t}copy(){return new ls(this.m00(),this.m01(),this.m02(),this.m03(),this.m10(),this.m11(),this.m12(),this.m13(),this.m20(),this.m21(),this.m22(),this.m23(),this.m30(),this.m31(),this.m32(),this.m33(),this.type)}plus(e){return new ls(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m03()+e.m03(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m13()+e.m13(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22(),this.m23()+e.m23(),this.m30()+e.m30(),this.m31()+e.m31(),this.m32()+e.m32(),this.m33()+e.m33())}minus(e){return new ls(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m03()-e.m03(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m13()-e.m13(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22(),this.m23()-e.m23(),this.m30()-e.m30(),this.m31()-e.m31(),this.m32()-e.m32(),this.m33()-e.m33())}transposed(){return new ls(this.m00(),this.m10(),this.m20(),this.m30(),this.m01(),this.m11(),this.m21(),this.m31(),this.m02(),this.m12(),this.m22(),this.m32(),this.m03(),this.m13(),this.m23(),this.m33())}negated(){return new ls(-this.m00(),-this.m01(),-this.m02(),-this.m03(),-this.m10(),-this.m11(),-this.m12(),-this.m13(),-this.m20(),-this.m21(),-this.m22(),-this.m23(),-this.m30(),-this.m31(),-this.m32(),-this.m33())}inverted(){let e;switch(this.type){case mi.IDENTITY:return this;case mi.TRANSLATION_3D:return new ls(1,0,0,-this.m03(),0,1,0,-this.m13(),0,0,1,-this.m23(),0,0,0,1,mi.TRANSLATION_3D);case mi.SCALING:return new ls(1/this.m00(),0,0,0,0,1/this.m11(),0,0,0,0,1/this.m22(),0,0,0,0,1/this.m33(),mi.SCALING);case mi.AFFINE:case mi.OTHER:if(e=this.getDeterminant(),e!==0)return new ls((-this.m31()*this.m22()*this.m13()+this.m21()*this.m32()*this.m13()+this.m31()*this.m12()*this.m23()-this.m11()*this.m32()*this.m23()-this.m21()*this.m12()*this.m33()+this.m11()*this.m22()*this.m33())/e,(this.m31()*this.m22()*this.m03()-this.m21()*this.m32()*this.m03()-this.m31()*this.m02()*this.m23()+this.m01()*this.m32()*this.m23()+this.m21()*this.m02()*this.m33()-this.m01()*this.m22()*this.m33())/e,(-this.m31()*this.m12()*this.m03()+this.m11()*this.m32()*this.m03()+this.m31()*this.m02()*this.m13()-this.m01()*this.m32()*this.m13()-this.m11()*this.m02()*this.m33()+this.m01()*this.m12()*this.m33())/e,(this.m21()*this.m12()*this.m03()-this.m11()*this.m22()*this.m03()-this.m21()*this.m02()*this.m13()+this.m01()*this.m22()*this.m13()+this.m11()*this.m02()*this.m23()-this.m01()*this.m12()*this.m23())/e,(this.m30()*this.m22()*this.m13()-this.m20()*this.m32()*this.m13()-this.m30()*this.m12()*this.m23()+this.m10()*this.m32()*this.m23()+this.m20()*this.m12()*this.m33()-this.m10()*this.m22()*this.m33())/e,(-this.m30()*this.m22()*this.m03()+this.m20()*this.m32()*this.m03()+this.m30()*this.m02()*this.m23()-this.m00()*this.m32()*this.m23()-this.m20()*this.m02()*this.m33()+this.m00()*this.m22()*this.m33())/e,(this.m30()*this.m12()*this.m03()-this.m10()*this.m32()*this.m03()-this.m30()*this.m02()*this.m13()+this.m00()*this.m32()*this.m13()+this.m10()*this.m02()*this.m33()-this.m00()*this.m12()*this.m33())/e,(-this.m20()*this.m12()*this.m03()+this.m10()*this.m22()*this.m03()+this.m20()*this.m02()*this.m13()-this.m00()*this.m22()*this.m13()-this.m10()*this.m02()*this.m23()+this.m00()*this.m12()*this.m23())/e,(-this.m30()*this.m21()*this.m13()+this.m20()*this.m31()*this.m13()+this.m30()*this.m11()*this.m23()-this.m10()*this.m31()*this.m23()-this.m20()*this.m11()*this.m33()+this.m10()*this.m21()*this.m33())/e,(this.m30()*this.m21()*this.m03()-this.m20()*this.m31()*this.m03()-this.m30()*this.m01()*this.m23()+this.m00()*this.m31()*this.m23()+this.m20()*this.m01()*this.m33()-this.m00()*this.m21()*this.m33())/e,(-this.m30()*this.m11()*this.m03()+this.m10()*this.m31()*this.m03()+this.m30()*this.m01()*this.m13()-this.m00()*this.m31()*this.m13()-this.m10()*this.m01()*this.m33()+this.m00()*this.m11()*this.m33())/e,(this.m20()*this.m11()*this.m03()-this.m10()*this.m21()*this.m03()-this.m20()*this.m01()*this.m13()+this.m00()*this.m21()*this.m13()+this.m10()*this.m01()*this.m23()-this.m00()*this.m11()*this.m23())/e,(this.m30()*this.m21()*this.m12()-this.m20()*this.m31()*this.m12()-this.m30()*this.m11()*this.m22()+this.m10()*this.m31()*this.m22()+this.m20()*this.m11()*this.m32()-this.m10()*this.m21()*this.m32())/e,(-this.m30()*this.m21()*this.m02()+this.m20()*this.m31()*this.m02()+this.m30()*this.m01()*this.m22()-this.m00()*this.m31()*this.m22()-this.m20()*this.m01()*this.m32()+this.m00()*this.m21()*this.m32())/e,(this.m30()*this.m11()*this.m02()-this.m10()*this.m31()*this.m02()-this.m30()*this.m01()*this.m12()+this.m00()*this.m31()*this.m12()+this.m10()*this.m01()*this.m32()-this.m00()*this.m11()*this.m32())/e,(-this.m20()*this.m11()*this.m02()+this.m10()*this.m21()*this.m02()+this.m20()*this.m01()*this.m12()-this.m00()*this.m21()*this.m12()-this.m10()*this.m01()*this.m22()+this.m00()*this.m11()*this.m22())/e);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error(`Matrix4.inverted with unknown type: ${this.type}`)}}timesMatrix(e){if(this.type===mi.IDENTITY||e.type===mi.IDENTITY)return this.type===mi.IDENTITY?e:this;if(this.type===e.type){if(this.type===mi.TRANSLATION_3D)return new ls(1,0,0,this.m03()+e.m02(),0,1,0,this.m13()+e.m12(),0,0,1,this.m23()+e.m23(),0,0,0,1,mi.TRANSLATION_3D);if(this.type===mi.SCALING)return new ls(this.m00()*e.m00(),0,0,0,0,this.m11()*e.m11(),0,0,0,0,this.m22()*e.m22(),0,0,0,0,1,mi.SCALING)}return this.type!==mi.OTHER&&e.type!==mi.OTHER?new ls(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m00()*e.m03()+this.m01()*e.m13()+this.m02()*e.m23()+this.m03(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m10()*e.m03()+this.m11()*e.m13()+this.m12()*e.m23()+this.m13(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22(),this.m20()*e.m03()+this.m21()*e.m13()+this.m22()*e.m23()+this.m23(),0,0,0,1,mi.AFFINE):new ls(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20()+this.m03()*e.m30(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21()+this.m03()*e.m31(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22()+this.m03()*e.m32(),this.m00()*e.m03()+this.m01()*e.m13()+this.m02()*e.m23()+this.m03()*e.m33(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20()+this.m13()*e.m30(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21()+this.m13()*e.m31(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22()+this.m13()*e.m32(),this.m10()*e.m03()+this.m11()*e.m13()+this.m12()*e.m23()+this.m13()*e.m33(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20()+this.m23()*e.m30(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21()+this.m23()*e.m31(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22()+this.m23()*e.m32(),this.m20()*e.m03()+this.m21()*e.m13()+this.m22()*e.m23()+this.m23()*e.m33(),this.m30()*e.m00()+this.m31()*e.m10()+this.m32()*e.m20()+this.m33()*e.m30(),this.m30()*e.m01()+this.m31()*e.m11()+this.m32()*e.m21()+this.m33()*e.m31(),this.m30()*e.m02()+this.m31()*e.m12()+this.m32()*e.m22()+this.m33()*e.m32(),this.m30()*e.m03()+this.m31()*e.m13()+this.m32()*e.m23()+this.m33()*e.m33())}timesVector4(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z+this.m03()*e.w,i=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z+this.m13()*e.w,s=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z+this.m23()*e.w,r=this.m30()*e.x+this.m31()*e.y+this.m32()*e.z+this.m33()*e.w;return new bs(t,i,s,r)}timesVector3(e){return Ri.from(this.timesVector4(bs.from(e)))}timesTransposeVector4(e){const t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z+this.m30()*e.w,i=this.m01()*e.x+this.m11()*e.y+this.m21()*e.z+this.m31()*e.w,s=this.m02()*e.x+this.m12()*e.y+this.m22()*e.z+this.m32()*e.w,r=this.m03()*e.x+this.m13()*e.y+this.m23()*e.z+this.m33()*e.w;return new bs(t,i,s,r)}timesTransposeVector3(e){return Ri.from(this.timesTransposeVector4(bs.from(e)))}timesRelativeVector3(e){const t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z,i=this.m01()*e.y+this.m11()*e.y+this.m21()*e.z,s=this.m02()*e.z+this.m12()*e.y+this.m22()*e.z;return new Ri(t,i,s)}getDeterminant(){return this.m03()*this.m12()*this.m21()*this.m30()-this.m02()*this.m13()*this.m21()*this.m30()-this.m03()*this.m11()*this.m22()*this.m30()+this.m01()*this.m13()*this.m22()*this.m30()+this.m02()*this.m11()*this.m23()*this.m30()-this.m01()*this.m12()*this.m23()*this.m30()-this.m03()*this.m12()*this.m20()*this.m31()+this.m02()*this.m13()*this.m20()*this.m31()+this.m03()*this.m10()*this.m22()*this.m31()-this.m00()*this.m13()*this.m22()*this.m31()-this.m02()*this.m10()*this.m23()*this.m31()+this.m00()*this.m12()*this.m23()*this.m31()+this.m03()*this.m11()*this.m20()*this.m32()-this.m01()*this.m13()*this.m20()*this.m32()-this.m03()*this.m10()*this.m21()*this.m32()+this.m00()*this.m13()*this.m21()*this.m32()+this.m01()*this.m10()*this.m23()*this.m32()-this.m00()*this.m11()*this.m23()*this.m32()-this.m02()*this.m11()*this.m20()*this.m33()+this.m01()*this.m12()*this.m20()*this.m33()+this.m02()*this.m10()*this.m21()*this.m33()-this.m00()*this.m12()*this.m21()*this.m33()-this.m01()*this.m10()*this.m22()*this.m33()+this.m00()*this.m11()*this.m22()*this.m33()}get determinant(){return this.getDeterminant()}toString(){return`${this.m00()} ${this.m01()} ${this.m02()} ${this.m03()}
${this.m10()} ${this.m11()} ${this.m12()} ${this.m13()}
${this.m20()} ${this.m21()} ${this.m22()} ${this.m23()}
${this.m30()} ${this.m31()} ${this.m32()} ${this.m33()}`}makeImmutable(){return this}copyToArray(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m30(),e[4]=this.m01(),e[5]=this.m11(),e[6]=this.m21(),e[7]=this.m31(),e[8]=this.m02(),e[9]=this.m12(),e[10]=this.m22(),e[11]=this.m32(),e[12]=this.m03(),e[13]=this.m13(),e[14]=this.m23(),e[15]=this.m33(),e}static identity(){return new ls(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,mi.IDENTITY)}static translation(e,t,i){return new ls(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1,mi.TRANSLATION_3D)}static translationFromVector(e){return ls.translation(e.x,e.y,e.z)}static scaling(e,t,i){return t=t===void 0?e:t,i=i===void 0?e:i,new ls(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1,mi.SCALING)}static rotationAxisAngle(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i;return new ls(e.x*e.x*r+i,e.x*e.y*r-e.z*s,e.x*e.z*r+e.y*s,0,e.y*e.x*r+e.z*s,e.y*e.y*r+i,e.y*e.z*r-e.x*s,0,e.z*e.x*r-e.y*s,e.z*e.y*r+e.x*s,e.z*e.z*r+i,0,0,0,0,1,mi.AFFINE)}static rotationX(e){const t=Math.cos(e),i=Math.sin(e);return new ls(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1,mi.AFFINE)}static rotationY(e){const t=Math.cos(e),i=Math.sin(e);return new ls(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1,mi.AFFINE)}static rotationZ(e){const t=Math.cos(e),i=Math.sin(e);return new ls(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1,mi.AFFINE)}static gluPerspective(e,t,i,s){const r=Math.cos(e)/Math.sin(e);return new ls(r/t,0,0,0,0,r,0,0,0,0,(s+i)/(i-s),2*s*i/(i-s),0,0,-1,0)}}class mi extends bn{}mi.OTHER=new mi;mi.IDENTITY=new mi;mi.TRANSLATION_3D=new mi;mi.SCALING=new mi;mi.AFFINE=new mi;mi.enumeration=new br(mi);ls.Types=mi;ls.IDENTITY=new ls().makeImmutable();function Ii(n){return n.toFixed(20)}class dt extends bn{}dt.OTHER=new dt;dt.IDENTITY=new dt;dt.TRANSLATION_2D=new dt;dt.SCALING=new dt;dt.AFFINE=new dt;dt.enumeration=new br(dt);class nt{constructor(){this.entries=[1,0,0,0,1,0,0,0,1],this.type=dt.IDENTITY}initialize(){return this}m00(){return this.entries[0]}m01(){return this.entries[3]}m02(){return this.entries[6]}m10(){return this.entries[1]}m11(){return this.entries[4]}m12(){return this.entries[7]}m20(){return this.entries[2]}m21(){return this.entries[5]}m22(){return this.entries[8]}isIdentity(){return this.type===dt.IDENTITY||this.equals(nt.IDENTITY)}isFastIdentity(){return this.type===dt.IDENTITY}isTranslation(){return this.type===dt.TRANSLATION_2D||this.m00()===1&&this.m11()===1&&this.m22()===1&&this.m01()===0&&this.m10()===0&&this.m20()===0&&this.m21()===0}isAffine(){return this.type===dt.AFFINE||this.m20()===0&&this.m21()===0&&this.m22()===1}isAligned(){return this.isAffine()&&this.m01()===0&&this.m10()===0}isAxisAligned(){return this.isAffine()&&(this.m01()===0&&this.m10()===0||this.m00()===0&&this.m11()===0)}isFinite(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())}getDeterminant(){return this.m00()*this.m11()*this.m22()+this.m01()*this.m12()*this.m20()+this.m02()*this.m10()*this.m21()-this.m02()*this.m11()*this.m20()-this.m01()*this.m10()*this.m22()-this.m00()*this.m12()*this.m21()}get determinant(){return this.getDeterminant()}getTranslation(){return new we(this.m02(),this.m12())}get translation(){return this.getTranslation()}getScaleVector(){return new we(Math.sqrt(this.m00()*this.m00()+this.m10()*this.m10()),Math.sqrt(this.m01()*this.m01()+this.m11()*this.m11()))}get scaleVector(){return this.getScaleVector()}getSignedScale(){return this.m00()*this.m11()-this.m10()*this.m01()}getRotation(){return Math.atan2(this.m10(),this.m00())}get rotation(){return this.getRotation()}toMatrix4(){return new ls(this.m00(),this.m01(),this.m02(),0,this.m10(),this.m11(),this.m12(),0,this.m20(),this.m21(),this.m22(),0,0,0,0,1)}toAffineMatrix4(){return new ls(this.m00(),this.m01(),0,this.m02(),this.m10(),this.m11(),0,this.m12(),0,0,1,0,0,0,0,1)}toString(){return`${this.m00()} ${this.m01()} ${this.m02()}
${this.m10()} ${this.m11()} ${this.m12()}
${this.m20()} ${this.m21()} ${this.m22()}`}toSVGMatrix(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix();return e.a=this.m00(),e.b=this.m10(),e.c=this.m01(),e.d=this.m11(),e.e=this.m02(),e.f=this.m12(),e}getCSSTransform(){return`matrix(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)})`}get cssTransform(){return this.getCSSTransform()}getSVGTransform(){switch(this.type){case dt.IDENTITY:return"";case dt.TRANSLATION_2D:return`translate(${Ii(this.entries[6])},${Ii(this.entries[7])})`;case dt.SCALING:return`scale(${Ii(this.entries[0])}${this.entries[0]===this.entries[4]?"":`,${Ii(this.entries[4])}`})`;default:return`matrix(${Ii(this.entries[0])},${Ii(this.entries[1])},${Ii(this.entries[3])},${Ii(this.entries[4])},${Ii(this.entries[6])},${Ii(this.entries[7])})`}}get svgTransform(){return this.getSVGTransform()}getCSSTransformStyles(){const e=this.getCSSTransform();return{"-webkit-perspective":"1000","-webkit-backface-visibility":"hidden","-webkit-transform":`${e} translateZ(0)`,"-moz-transform":`${e} translateZ(0)`,"-ms-transform":e,"-o-transform":e,transform:e,"transform-origin":"top left","-ms-transform-origin":"top left"}}get cssTransformStyles(){return this.getCSSTransformStyles()}equals(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()}equalsEpsilon(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t}copy(){return Pn(this.m00(),this.m01(),this.m02(),this.m10(),this.m11(),this.m12(),this.m20(),this.m21(),this.m22(),this.type)}plus(e){return Pn(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}minus(e){return Pn(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}transposed(){return Pn(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===dt.IDENTITY||this.type===dt.SCALING?this.type:void 0)}negated(){return Pn(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}inverted(){let e;switch(this.type){case dt.IDENTITY:return this;case dt.TRANSLATION_2D:return Pn(1,0,-this.m02(),0,1,-this.m12(),0,0,1,dt.TRANSLATION_2D);case dt.SCALING:return Pn(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),dt.SCALING);case dt.AFFINE:if(e=this.getDeterminant(),e!==0)return Pn((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,dt.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case dt.OTHER:if(e=this.getDeterminant(),e!==0)return Pn((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,dt.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error(`Matrix3.inverted with unknown type: ${this.type}`)}}timesMatrix(e){if(this.type===dt.IDENTITY||e.type===dt.IDENTITY)return this.type===dt.IDENTITY?e:this;if(this.type===e.type){if(this.type===dt.TRANSLATION_2D)return Pn(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,dt.TRANSLATION_2D);if(this.type===dt.SCALING)return Pn(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,dt.SCALING)}return this.type!==dt.OTHER&&e.type!==dt.OTHER?Pn(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,dt.AFFINE):Pn(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}timesVector2(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02(),i=this.m10()*e.x+this.m11()*e.y+this.m12();return new we(t,i)}timesVector3(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,i=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,s=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z;return new Ri(t,i,s)}timesTransposeVector2(e){const t=this.m00()*e.x+this.m10()*e.y,i=this.m01()*e.x+this.m11()*e.y;return new we(t,i)}timesRelativeVector2(e){const t=this.m00()*e.x+this.m01()*e.y,i=this.m10()*e.y+this.m11()*e.y;return new we(t,i)}rowMajor(e,t,i,s,r,o,c,p,g,A){return this.entries[0]=e,this.entries[1]=s,this.entries[2]=c,this.entries[3]=t,this.entries[4]=r,this.entries[5]=p,this.entries[6]=i,this.entries[7]=o,this.entries[8]=g,this.type=A===void 0?c===0&&p===0&&g===1?dt.AFFINE:dt.OTHER:A,this}set(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m10(),e.m11(),e.m12(),e.m20(),e.m21(),e.m22(),e.type)}setArray(e){return this.rowMajor(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}set00(e){return this.entries[0]=e,this}set01(e){return this.entries[3]=e,this}set02(e){return this.entries[6]=e,this}set10(e){return this.entries[1]=e,this}set11(e){return this.entries[4]=e,this}set12(e){return this.entries[7]=e,this}set20(e){return this.entries[2]=e,this}set21(e){return this.entries[5]=e,this}set22(e){return this.entries[8]=e,this}makeImmutable(){return this}columnMajor(e,t,i,s,r,o,c,p,g,A){return this.rowMajor(e,s,c,t,r,p,i,o,g,A)}add(e){return this.rowMajor(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}subtract(e){return this.rowMajor(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}transpose(){return this.rowMajor(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===dt.IDENTITY||this.type===dt.SCALING?this.type:void 0)}negate(){return this.rowMajor(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}invert(){let e;switch(this.type){case dt.IDENTITY:return this;case dt.TRANSLATION_2D:return this.rowMajor(1,0,-this.m02(),0,1,-this.m12(),0,0,1,dt.TRANSLATION_2D);case dt.SCALING:return this.rowMajor(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),dt.SCALING);case dt.AFFINE:if(e=this.getDeterminant(),e!==0)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,dt.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case dt.OTHER:if(e=this.getDeterminant(),e!==0)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,dt.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error(`Matrix3.inverted with unknown type: ${this.type}`)}}multiplyMatrix(e){if(e.type===dt.IDENTITY)return this;if(this.type===dt.IDENTITY)return this.set(e);if(this.type===e.type){if(this.type===dt.TRANSLATION_2D)return this.rowMajor(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,dt.TRANSLATION_2D);if(this.type===dt.SCALING)return this.rowMajor(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,dt.SCALING)}return this.type!==dt.OTHER&&e.type!==dt.OTHER?this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,dt.AFFINE):this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}prependTranslation(e,t){return this.set02(this.m02()+e),this.set12(this.m12()+t),this.type===dt.IDENTITY||this.type===dt.TRANSLATION_2D?this.type=dt.TRANSLATION_2D:this.type===dt.OTHER?this.type=dt.OTHER:this.type=dt.AFFINE,this}setToIdentity(){return this.rowMajor(1,0,0,0,1,0,0,0,1,dt.IDENTITY)}setToTranslation(e,t){return this.rowMajor(1,0,e,0,1,t,0,0,1,dt.TRANSLATION_2D)}setToScale(e,t){return t=t===void 0?e:t,this.rowMajor(e,0,0,0,t,0,0,0,1,dt.SCALING)}setToAffine(e,t,i,s,r,o){return this.rowMajor(e,t,i,s,r,o,0,0,1,dt.AFFINE)}setToRotationAxisAngle(e,t){let i=Math.cos(t),s=Math.sin(t);Math.abs(i)<1e-15&&(i=0),Math.abs(s)<1e-15&&(s=0);const r=1-i;return this.rowMajor(e.x*e.x*r+i,e.x*e.y*r-e.z*s,e.x*e.z*r+e.y*s,e.y*e.x*r+e.z*s,e.y*e.y*r+i,e.y*e.z*r-e.x*s,e.z*e.x*r-e.y*s,e.z*e.y*r+e.x*s,e.z*e.z*r+i,dt.OTHER)}setToRotationX(e){let t=Math.cos(e),i=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(i)<1e-15&&(i=0),this.rowMajor(1,0,0,0,t,-i,0,i,t,dt.OTHER)}setToRotationY(e){let t=Math.cos(e),i=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(i)<1e-15&&(i=0),this.rowMajor(t,0,i,0,1,0,-i,0,t,dt.OTHER)}setToRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(i)<1e-15&&(i=0),this.rowMajor(t,-i,0,i,t,0,0,0,1,dt.AFFINE)}setToTranslationRotation(e,t,i){let s=Math.cos(i),r=Math.sin(i);return Math.abs(s)<1e-15&&(s=0),Math.abs(r)<1e-15&&(r=0),this.rowMajor(s,-r,e,r,s,t,0,0,1,dt.AFFINE)}setToTranslationRotationPoint(e,t){return this.setToTranslationRotation(e.x,e.y,t)}setToScaleTranslationRotation(e,t,i,s){let r=Math.cos(s),o=Math.sin(s);return Math.abs(r)<1e-15&&(r=0),Math.abs(o)<1e-15&&(o=0),r*=e,o*=e,this.rowMajor(r,-o,t,o,r,i,0,0,1,dt.AFFINE)}setToScaleTranslationRotationPoint(e,t,i){return this.setToScaleTranslationRotation(e,t.x,t.y,i)}setToSVGMatrix(e){return this.rowMajor(e.a,e.c,e.e,e.b,e.d,e.f,0,0,1,dt.AFFINE)}setRotationAToB(e,t){const i=e,s=t,r=1e-4;let o=i.cross(s);const c=i.dot(s);if((c<0?-c:c)>1-r){let g=new Ri(i.x>0?i.x:-i.x,i.y>0?i.y:-i.y,i.z>0?i.z:-i.z);g.x<g.y?g.x<g.z?g=Ri.X_UNIT:g=Ri.Z_UNIT:g.y<g.z?g=Ri.Y_UNIT:g=Ri.Z_UNIT;const A=g.minus(i);o=g.minus(s);const C=2/A.dot(A),D=2/o.dot(o),P=C*D*A.dot(o);return this.rowMajor(-C*A.x*A.x-D*o.x*o.x+P*o.x*A.x+1,-C*A.x*A.y-D*o.x*o.y+P*o.x*A.y,-C*A.x*A.z-D*o.x*o.z+P*o.x*A.z,-C*A.y*A.x-D*o.y*o.x+P*o.y*A.x,-C*A.y*A.y-D*o.y*o.y+P*o.y*A.y+1,-C*A.y*A.z-D*o.y*o.z+P*o.y*A.z,-C*A.z*A.x-D*o.z*o.x+P*o.z*A.x,-C*A.z*A.y-D*o.z*o.y+P*o.z*A.y,-C*A.z*A.z-D*o.z*o.z+P*o.z*A.z+1)}else{const g=1/(1+c),A=g*o.x,C=g*o.z,D=A*o.y,P=A*o.z,F=C*o.y;return this.rowMajor(c+A*o.x,D-o.z,P+o.y,D+o.z,c+g*o.y*o.y,F-o.x,P-o.y,F+o.x,c+C*o.z)}}multiplyVector2(e){return e.setXY(this.m00()*e.x+this.m01()*e.y+this.m02(),this.m10()*e.x+this.m11()*e.y+this.m12())}multiplyVector3(e){return e.setXYZ(this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,this.m20()*e.x+this.m21()*e.y+this.m22()*e.z)}multiplyTransposeVector2(e){return e.setXY(this.m00()*e.x+this.m10()*e.y,this.m01()*e.x+this.m11()*e.y)}multiplyRelativeVector2(e){return e.setXY(this.m00()*e.x+this.m01()*e.y,this.m10()*e.y+this.m11()*e.y)}canvasSetTransform(e){e.setTransform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}canvasAppendTransform(e){this.type!==dt.IDENTITY&&e.transform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}copyToArray(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m01(),e[4]=this.m11(),e[5]=this.m21(),e[6]=this.m02(),e[7]=this.m12(),e[8]=this.m22(),e}freeToPool(){nt.pool.freeToPool(this)}static identity(){return cr().setToIdentity()}static translation(e,t){return cr().setToTranslation(e,t)}static translationFromVector(e){return nt.translation(e.x,e.y)}static scaling(e,t){return cr().setToScale(e,t)}static scale(e,t){return nt.scaling(e,t)}static affine(e,t,i,s,r,o){return cr().setToAffine(e,t,i,s,r,o)}static rowMajor(e,t,i,s,r,o,c,p,g,A){return cr().rowMajor(e,t,i,s,r,o,c,p,g,A)}static rotationAxisAngle(e,t){return cr().setToRotationAxisAngle(e,t)}static rotationX(e){return cr().setToRotationX(e)}static rotationY(e){return cr().setToRotationY(e)}static rotationZ(e){return cr().setToRotationZ(e)}static translationRotation(e,t,i){return cr().setToTranslationRotation(e,t,i)}static rotation2(e){return cr().setToRotationZ(e)}static rotationAround(e,t,i){return nt.translation(t,i).timesMatrix(nt.rotation2(e)).timesMatrix(nt.translation(-t,-i))}static rotationAroundPoint(e,t){return nt.rotationAround(e,t.x,t.y)}static fromSVGMatrix(e){return cr().setToSVGMatrix(e)}static rotateAToB(e,t){return cr().setRotationAToB(e,t)}static translationTimesMatrix(e,t,i){let s;return i.type===dt.IDENTITY||i.type===dt.TRANSLATION_2D?Pn(1,0,i.m02()+e,0,1,i.m12()+t,0,0,1,dt.TRANSLATION_2D):(i.type===dt.OTHER?s=dt.OTHER:s=dt.AFFINE,Pn(i.m00(),i.m01(),i.m02()+e,i.m10(),i.m11(),i.m12()+t,i.m20(),i.m21(),i.m22(),s))}static toStateObject(e){return{entries:e.entries,type:e.type.name}}static fromStateObject(e){const t=nt.identity();return t.entries=e.entries,t.type=dt.enumeration.getValue(e.type),t}}nt.pool=new us(nt,{initialize:nt.prototype.initialize,useDefaultConstruction:!0,maxSize:300});const cr=nt.pool.fetch.bind(nt.pool),Pn=(n,e,t,i,s,r,o,c,p,g)=>cr().rowMajor(n,e,t,i,s,r,o,c,p,g);nt.IDENTITY=nt.identity().makeImmutable();nt.X_REFLECTION=Pn(-1,0,0,0,1,0,0,0,1,dt.AFFINE).makeImmutable();nt.Y_REFLECTION=Pn(1,0,0,0,-1,0,0,0,1,dt.AFFINE).makeImmutable();nt.Matrix3IO=new Yt("Matrix3IO",{valueType:nt,documentation:"A 3x3 matrix often used for holding transform data.",toStateObject:n=>nt.toStateObject(n),fromStateObject:n=>nt.fromStateObject(n),stateSchema:{entries:Bo(yi),type:a1(dt)}});class Yr{constructor(e,t){this.position=e,this.direction=t}shifted(e){return new Yr(this.pointAtDistance(e),this.direction)}pointAtDistance(e){return this.position.plus(this.direction.timesScalar(e))}toString(){return`${this.position.toString()} => ${this.direction.toString()}`}}const vA=new nt;class _r{constructor(e){this.matrix=nt.IDENTITY.copy(),this.inverse=nt.IDENTITY.copy(),this.matrixTransposed=nt.IDENTITY.copy(),this.inverseTransposed=nt.IDENTITY.copy(),this.inverseValid=!0,this.transposeValid=!0,this.inverseTransposeValid=!0,this.changeEmitter=new Ai,e&&this.setMatrix(e)}setMatrix(e){this.matrix.set(e),this.invalidate()}validateMatrix(e){}invalidate(){this.inverseValid=!1,this.transposeValid=!1,this.inverseTransposeValid=!1,this.changeEmitter.emit()}prepend(e){vA.set(this.matrix),this.matrix.set(e),this.matrix.multiplyMatrix(vA),this.invalidate()}prependTranslation(e,t){this.matrix.prependTranslation(e,t),this.invalidate()}append(e){this.matrix.multiplyMatrix(e),this.invalidate()}prependTransform(e){this.prepend(e.matrix)}appendTransform(e){this.append(e.matrix)}applyToCanvasContext(e){e.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m02(),this.matrix.m12())}copy(){const e=new _r(this.matrix);e.inverse=this.inverse,e.matrixTransposed=this.matrixTransposed,e.inverseTransposed=this.inverseTransposed,e.inverseValid=this.inverseValid,e.transposeValid=this.transposeValid,e.inverseTransposeValid=this.inverseTransposeValid}getMatrix(){return this.matrix}getInverse(){return this.inverseValid||(this.inverseValid=!0,this.inverse.set(this.matrix),this.inverse.invert()),this.inverse}getMatrixTransposed(){return this.transposeValid||(this.transposeValid=!0,this.matrixTransposed.set(this.matrix),this.matrixTransposed.transpose()),this.matrixTransposed}getInverseTransposed(){return this.inverseTransposeValid||(this.inverseTransposeValid=!0,this.inverseTransposed.set(this.getInverse()),this.inverseTransposed.transpose()),this.inverseTransposed}isIdentity(){return this.matrix.isFastIdentity()}isFinite(){return this.matrix.isFinite()}transformPosition2(e){return this.matrix.timesVector2(e)}transformDelta2(e){const t=this.getMatrix();return new we(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}transformNormal2(e){return this.getInverse().timesTransposeVector2(e).normalize()}transformX(e){const t=this.getMatrix();return t.m00()*e+t.m02()}transformY(e){const t=this.getMatrix();return t.m11()*e+t.m12()}transformDeltaX(e){return this.getMatrix().m00()*e}transformDeltaY(e){return this.getMatrix().m11()*e}transformBounds2(e){return e.transformed(this.matrix)}transformShape(e){return e.transformed(this.matrix)}transformRay2(e){return new Yr(this.transformPosition2(e.position),this.transformDelta2(e.direction).normalized())}inversePosition2(e){return this.getInverse().timesVector2(e)}inverseDelta2(e){const t=this.getInverse();return new we(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}inverseNormal2(e){return this.matrix.timesTransposeVector2(e).normalize()}inverseX(e){const t=this.getInverse();return t.m00()*e+t.m02()}inverseY(e){const t=this.getInverse();return t.m11()*e+t.m12()}inverseDeltaX(e){return this.getInverse().m00()*e}inverseDeltaY(e){return this.getInverse().m11()*e}inverseBounds2(e){return e.transformed(this.getInverse())}inverseShape(e){return e.transformed(this.getInverse())}inverseRay2(e){return new Yr(this.inversePosition2(e.position),this.inverseDelta2(e.direction).normalized())}}const tx={isValidValue:n=>!isNaN(n.x)&&!isNaN(n.y),validationMessage:"Vector2 x/y should not be NaN"};class ix extends hi{constructor(e,t){const i=lt()({valueType:we,validBounds:null,validators:[],phetioValueType:we.Vector2IO},t);i.validators.push(tx),i.validBounds&&i.validators.push({validationMessage:"Vector2 is not within validBounds",isValidValue:s=>i.validBounds.containsPoint(s)}),super(e,i),this.validBounds=i.validBounds}}function sx(n,e,t){const i=new we((n.x+e.x)/2,(n.y+e.y)/2),s=new we((e.x+t.x)/2,(e.y+t.y)/2),r=new we(i.x+(e.y-n.y),i.y-(e.x-n.x)),o=new we(s.x+(t.y-e.y),s.y-(t.x-e.x));return V0(i,r,s,o)}function Eg(n){return n>=0?Math.pow(n,1/3):-Math.pow(-n,1/3)}function VA(n,e,t){const i=e.distanceSquared(t);if(i===0)return n.distanceSquared(e);const s=((n.x-e.x)*(t.x-e.x)+(n.y-e.y)*(t.y-e.y))/i;let r;return s<0?r=n.distanceSquared(e):s>1?r=n.distanceSquared(t):r=n.distanceSquared(new we(e.x+s*(t.x-e.x),e.y+s*(t.y-e.y))),r}function S1(n,e,t){return Math.abs(n-e)<=t}function yr(n,e,t){const i=t-e;let s=(n-e)%i;return s<0&&(s+=i),s+e}function w1(n,e,t){return-yr(-n,-t,-e)}function C1(n){if(Math.floor(n)===n)return 0;{const e=n.toString();if(e.includes("e")){const t=e.split("e"),i=t[0],s=Number(t[1]),r=i.includes(".")?i.split(".")[1].length:0;return Math.max(r-s,0)}else return e.split(".")[1].length}}function nx(n,e){return parseFloat(zf(n,e))}function qd(n,e){return nx(Ys(n/e)*e,C1(e))}function wm(n,e){return n===0?e===0?null:[]:[-e/n]}function pl(n,e,t){if(n===0||Math.abs(e/n)>1e7||Math.abs(t/n)>1e7)return wm(e,t);const s=e*e-4*n*t;if(s<0)return[];const r=Math.sqrt(s);return[(-e-r)/(2*n),(-e+r)/(2*n)]}function rx(n,e,t,i,s=1e-7){let r;if(n===0)r=pl(e,t,i);else if(n===0||Math.abs(e/n)>1e7||Math.abs(t/n)>1e7||Math.abs(i/n)>1e7)r=pl(e,t,i);else if(i===0||Math.abs(n/i)>1e7||Math.abs(e/i)>1e7||Math.abs(t/i)>1e7)r=[0].concat(pl(n,e,t));else{e/=n,t/=n,i/=n;const c=(3*t-e*e)/9,p=(-(27*i)+e*(9*t-2*(e*e)))/54,g=c*c*c+p*p,A=e/3;if(g>s){const C=Math.sqrt(g);r=[Eg(p+C)+Eg(p-C)-A]}else if(g>-s){const C=Eg(p),D=-A-C;r=[-A+2*C,D,D]}else{let C=-c*c*c;C=Math.acos(p/Math.sqrt(C));const D=2*Math.sqrt(-c);r=[-A+D*Math.cos(C/3),-A+D*Math.cos((C+2*Math.PI)/3),-A+D*Math.cos((C+4*Math.PI)/3)]}}return r}function P1(n){return 180*n/Math.PI}class S0{constructor(e,t){this._map=new Map,this._enumeration=e,this._values=e.enumeration.values,this._values.forEach(i=>{Et(!this._map.has(i),"Enumeration key override problem"),this._map.set(i,t(i))})}get(e){return Et(this._values.includes(e)),Et(this._map.has(e)),this._map.get(e)}set(e,t){Et(this._values.includes(e)),this._map.set(e,t)}map(e){return new S0(this._enumeration,t=>e(this.get(t),t))}forEach(e){this._values.forEach(t=>e(this.get(t),t))}values(){return this._values.map(e=>this.get(e))}}class Ju extends S0{constructor(e,t){super(xt,i=>i===xt.HORIZONTAL?e:t)}get horizontal(){return this.get(xt.HORIZONTAL)}set horizontal(e){this.set(xt.HORIZONTAL,e)}get vertical(){return this.get(xt.VERTICAL)}set vertical(e){this.set(xt.VERTICAL,e)}with(e,t){return new Ju(e===xt.HORIZONTAL?t:this.horizontal,e===xt.VERTICAL?t:this.vertical)}static create(e){return new Ju(e(xt.HORIZONTAL),e(xt.VERTICAL))}map(e){return new Ju(e(this.horizontal,xt.HORIZONTAL),e(this.vertical,xt.VERTICAL))}}function Ih(n,e,t,i,s){Et(Array.isArray(n)&&te.uniq(n).length===n.length,"a is not an array of unique items"),Et(Array.isArray(e)&&te.uniq(e).length===e.length,"b is not an array of unique items"),t=t||[],i=i||[],s=s||[],Et(Array.isArray(t)&&t.length===0),Et(Array.isArray(i)&&i.length===0),Et(Array.isArray(s)&&s.length===0),Array.prototype.push.apply(t,n),Array.prototype.push.apply(i,e);e:for(let r=0;r<t.length;r++){const o=t[r];for(let c=0;c<i.length;c++){const p=i[c];if(o===p){if(s.push(o),t.splice(r,1),i.splice(c,1),c=0,r===t.length)break e;r-=1}}}return t}const w0=(n,e)=>{Fn()&&n&&e.forEach(t=>{Et(Object.getOwnPropertyDescriptor(n,t)||te.some(r1(n.constructor).map(i=>Object.getOwnPropertyDescriptor(i.prototype,t))),`property not defined: ${t}`)})};class ax{constructor(){this.pendingLocks=[],this.loadComplete=!1,this.listeners=[],this.stageComplete=this.createLock("stage")}reset(){this.loadComplete=!1,this.stageComplete=this.createLock("stage")}addListener(e){this.listeners.push(e)}proceedIfReady(){this.pendingLocks.length===0&&(Et(!this.loadComplete,"cannot complete load twice without a reset() in-between"),this.loadComplete=!0,this.listeners.forEach(e=>e()))}createLock(e){return Et(!this.loadComplete,"Cannot create more locks after a stage has completed unless reset() is called"),this.pendingLocks.push(e),()=>{Et(this.pendingLocks.includes(e),"invalid lock"),Ns(this.pendingLocks,e),this.proceedIfReady()}}}const vs=new ax;function $t(n){if(Et(!n||Array.isArray(n),"cleanArray either takes an Array"),n){for(;n.length;)n.pop();return n}else return[]}function rs(n,e){if(n[e]!==void 0)return e;if(e=e.charAt(0).toUpperCase()+e.slice(1),n[`moz${e}`]!==void 0)return`moz${e}`;if(n[`Moz${e}`]!==void 0)return`Moz${e}`;if(n[`webkit${e}`]!==void 0)return`webkit${e}`;if(n[`ms${e}`]!==void 0)return`ms${e}`;if(n[`o${e}`]!==void 0)return`o${e}`}function ox(n,e){if(n[`on${e}`]!==void 0)return e;if(n[`onmoz${e}`]!==void 0)return`moz${e}`;if(n[`onMoz${e}`]!==void 0)return`Moz${e}`;if(n[`onwebkit${e}`]!==void 0)return`webkit${e}`;if(n[`onms${e}`]!==void 0)return`ms${e}`;if(n[`ono${e}`]!==void 0)return`o${e}`}function Cm(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/ /g,"&nbsp;")}function $u(n,...e){return te.each(e,t=>{if(t)for(const i in t){const s=Object.getOwnPropertyDescriptor(t,i);s&&(typeof s.get=="function"||t[i]!==void 0)&&Object.defineProperty(n,i,s)}}),n}function Yn(n){const e=new Map;return t=>{if(e.has(t))return e.get(t);{const i=n(t);return e.set(t,i),i}}}function E1(n,e,t){Et(n),Et(Array.isArray(e)),t&&(Et(Object.getPrototypeOf(t)===Object.prototype,"Extra prototype on options object is a code smell"),te.each(e,i=>{Et(!t.hasOwnProperty(i)||t[i]!==void 0,`Undefined not allowed for key: ${i}`),t[i]!==void 0&&(n[i]=t[i])}))}const Xi=navigator.userAgent;function Dg(n){return D1()===n}function SA(){return!!(self.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters["phet-app"]||(Xi.match(/(iPod|iPhone|iPad)/)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>=2)&&Xi.match(/AppleWebKit/))}function D1(){let n=-1,e=null;return navigator.appName==="Microsoft Internet Explorer"?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),e.exec(Xi)!==null&&(n=parseFloat(RegExp.$1))):navigator.appName==="Netscape"&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),e.exec(Xi)!==null&&(n=parseFloat(RegExp.$1))),n}const qs={firefox:Xi.toLowerCase().includes("firefox"),mobileSafari:SA(),safari5:!!(Xi.match(/Version\/5\./)&&Xi.match(/Safari\//)&&Xi.match(/AppleWebKit/)),safari6:!!(Xi.match(/Version\/6\./)&&Xi.match(/Safari\//)&&Xi.match(/AppleWebKit/)),safari7:!!(Xi.match(/Version\/7\./)&&Xi.match(/Safari\//)&&Xi.match(/AppleWebKit/)),safari10:!!(Xi.match(/Version\/10\./)&&Xi.match(/Safari\//)&&Xi.match(/AppleWebKit/)),safari11:!!(Xi.match(/Version\/11\./)&&Xi.match(/Safari\//)&&Xi.match(/AppleWebKit/)),safari9:!!(Xi.match(/Version\/9\./)&&Xi.match(/Safari\//)&&Xi.match(/AppleWebKit/)),safari:SA()||!!(Xi.match(/Version\//)&&Xi.match(/Safari\//)&&Xi.match(/AppleWebKit/)),ie:D1()!==-1,ie9:Dg(9),ie10:Dg(10),ie11:Dg(11),android:Xi.indexOf("Android")>0,edge:!!Xi.match(/Edge\//),chromium:/chrom(e|ium)/.test(Xi.toLowerCase())&&!Xi.match(/Edge\//),chromeOS:Xi.indexOf("CrOS")>0,mac:navigator.platform.includes("Mac")};function C0(n){return n.replace(/\u202a|\u202b|\u202c/g,"")}const Tg={};function wA(n,e,t){const i=Tg;let s=i,r=i;return n.hasOwnProperty(e)&&(s=n[e]),n.hasOwnProperty(t)&&(r=n[t]),s!==Tg?n[t]=s:delete n[t],r!==Tg?n[e]=r:delete n[e],n}const Cc={DISABLED_OPACITY:.45},T1="ArrowRight",I1="ArrowLeft",x1="ArrowUp",L1="ArrowDown",P0="ShiftRight",E0="ShiftLeft",D0="ControlLeft",T0="ControlRight",I0="AltLeft",x0="AltRight",L0="MetaLeft",k0="MetaRight",B0="OSLeft",R0="OSRight",lx="KeyW",hx="KeyA",ux="KeyS",cx="KeyD",k1="Digit0",B1="Digit1",R1="Digit2",N1="Digit3",M1="Digit4",O1="Digit5",q1="Digit6",F1="Digit7",z1="Digit8",H1="Digit9",Pm="Alt",Em="Shift",Dm="Control",Ig=[T1,I1,x1,L1],xg=[lx,ux,hx,cx],dx=[k1,B1,R1,N1,M1,O1,q1,F1,z1,H1],Lg=[E0,P0],kg=[D0,T0],Bg=[I0,x0],CA=[L0,k0,B0,R0],fx=[Pm,Dm,Em],px=[I0,x0,D0,T0,E0,P0,L0,k0,B0,R0],Tm=[],Ne={KEY_SPACE:"Space",KEY_ENTER:"Enter",KEY_TAB:"Tab",KEY_RIGHT_ARROW:T1,KEY_LEFT_ARROW:I1,KEY_UP_ARROW:x1,KEY_DOWN_ARROW:L1,KEY_SHIFT_LEFT:E0,KEY_SHIFT_RIGHT:P0,KEY_ALT_LEFT:I0,KEY_ALT_RIGHT:x0,KEY_CONTROL_LEFT:D0,KEY_CONTROL_RIGHT:T0,KEY_META_LEFT:L0,KEY_META_RIGHT:k0,KEY_META_LEFT_FIREFOX:B0,KEY_META_RIGHT_FIREFOX:R0,KEY_SHIFT:Em,KEY_ALT:Pm,KEY_CONTROL:Dm,KEY_ESCAPE:"Escape",KEY_DELETE:"Delete",KEY_BACKSPACE:"Backspace",KEY_PAGE_UP:"PageUp",KEY_PAGE_DOWN:"PageDown",KEY_END:"End",KEY_HOME:"Home",KEY_0:k1,KEY_1:B1,KEY_2:R1,KEY_3:N1,KEY_4:M1,KEY_5:O1,KEY_6:q1,KEY_7:F1,KEY_8:z1,KEY_9:H1,KEY_NUMPAD_0:"Numpad0",KEY_NUMPAD_1:"Numpad1",KEY_NUMPAD_2:"Numpad2",KEY_NUMPAD_3:"Numpad3",KEY_NUMPAD_4:"Numpad4",KEY_NUMPAD_5:"Numpad5",KEY_NUMPAD_6:"Numpad6",KEY_NUMPAD_7:"Numpad7",KEY_NUMPAD_8:"Numpad8",KEY_NUMPAD_9:"Numpad9",KEY_NUMPAD_DECIMAL:"NumpadDecimal",KEY_NUMPAD_PLUS:"NumpadAdd",KEY_NUMPAD_MINUS:"NumpadSubtract",KEY_A:"KeyA",KEY_B:"KeyB",KEY_C:"KeyC",KEY_D:"KeyD",KEY_E:"KeyE",KEY_F:"KeyF",KEY_G:"KeyG",KEY_H:"KeyH",KEY_I:"KeyI",KEY_J:"KeyJ",KEY_K:"KeyK",KEY_L:"KeyL",KEY_M:"KeyM",KEY_N:"KeyN",KEY_O:"KeyO",KEY_P:"KeyP",KEY_Q:"KeyQ",KEY_R:"KeyR",KEY_S:"KeyS",KEY_T:"KeyT",KEY_U:"KeyU",KEY_V:"KeyV",KEY_W:"KeyW",KEY_X:"KeyX",KEY_Y:"KeyY",KEY_Z:"KeyZ",KEY_EQUALS:"Equal",KEY_PLUS:"Equal",KEY_MINUS:"Minus",KEY_PERIOD:"Period",ARROW_KEYS:Ig,WASD_KEYS:xg,MOVEMENT_KEYS:Ig.concat(xg),SHIFT_KEYS:Lg,CONTROL_KEYS:kg,ALT_KEYS:Bg,META_KEYS:CA,MODIFIER_KEY_CODES:px,MODIFIER_KEY_TO_CODE_MAP:new Map([[Pm,Bg],[Em,Lg],[Dm,kg]]),isArrowKey(n){return Ne.isAnyKeyEvent(n,Ig)},isRangeKey(n){return Ne.isArrowKey(n)||Ne.isAnyKeyEvent(n,[Ne.KEY_PAGE_UP,Ne.KEY_PAGE_DOWN,Ne.KEY_HOME,Ne.KEY_END])},isNumberKey(n){return Ne.isAnyKeyEvent(n,dx)},getNumberFromCode(n){return Ne.isNumberKey(n)&&n instanceof KeyboardEvent?Number(n.code.replace("Digit","")):null},isShiftKey(n){return Ne.isAnyKeyEvent(n,Lg)},isAltKey(n){return Ne.isAnyKeyEvent(n,Bg)},isControlKey(n){return Ne.isAnyKeyEvent(n,kg)},isMetaKey(n){return Ne.isAnyKeyEvent(n,CA)},isWASDKey(n){return Ne.isAnyKeyEvent(n,xg)},isMovementKey(n){return Ne.isAnyKeyEvent(n,Ne.MOVEMENT_KEYS)},isAnyKeyEvent(n,e){const t=Ne.getEventCode(n);return t?e.includes(t):!1},isKeyEvent(n,e){return Ne.getEventCode(n)===e},getEventCode(n){let e=null;return n instanceof KeyboardEvent&&n.code&&(e=n.code,e.startsWith("Numpad")&&Tm.includes(n.key)&&(e=n.key)),e},isModifierKey(n){return fx.includes(n)},ALL_KEYS:Tm};for(const n in Ne)Ne.hasOwnProperty(n)&&typeof Ne[n]=="string"&&Tm.push(Ne[n]);const Fd={q:[Ne.KEY_Q],w:[Ne.KEY_W],e:[Ne.KEY_E],r:[Ne.KEY_R],t:[Ne.KEY_T],y:[Ne.KEY_Y],u:[Ne.KEY_U],i:[Ne.KEY_I],o:[Ne.KEY_O],p:[Ne.KEY_P],a:[Ne.KEY_A],s:[Ne.KEY_S],d:[Ne.KEY_D],f:[Ne.KEY_F],g:[Ne.KEY_G],h:[Ne.KEY_H],j:[Ne.KEY_J],k:[Ne.KEY_K],l:[Ne.KEY_L],z:[Ne.KEY_Z],x:[Ne.KEY_X],c:[Ne.KEY_C],v:[Ne.KEY_V],b:[Ne.KEY_B],n:[Ne.KEY_N],m:[Ne.KEY_M],0:[Ne.KEY_0,Ne.KEY_NUMPAD_0],1:[Ne.KEY_1,Ne.KEY_NUMPAD_1],2:[Ne.KEY_2,Ne.KEY_NUMPAD_2],3:[Ne.KEY_3,Ne.KEY_NUMPAD_3],4:[Ne.KEY_4,Ne.KEY_NUMPAD_4],5:[Ne.KEY_5,Ne.KEY_NUMPAD_5],6:[Ne.KEY_6,Ne.KEY_NUMPAD_6],7:[Ne.KEY_7,Ne.KEY_NUMPAD_7],8:[Ne.KEY_8,Ne.KEY_NUMPAD_8],9:[Ne.KEY_9,Ne.KEY_NUMPAD_9],enter:[Ne.KEY_ENTER],tab:[Ne.KEY_TAB],equals:[Ne.KEY_EQUALS],plus:[Ne.KEY_PLUS,Ne.KEY_NUMPAD_PLUS],minus:[Ne.KEY_MINUS,Ne.KEY_NUMPAD_MINUS],period:[Ne.KEY_PERIOD,Ne.KEY_NUMPAD_DECIMAL],escape:[Ne.KEY_ESCAPE],delete:[Ne.KEY_DELETE],backspace:[Ne.KEY_BACKSPACE],pageUp:[Ne.KEY_PAGE_UP],pageDown:[Ne.KEY_PAGE_DOWN],end:[Ne.KEY_END],home:[Ne.KEY_HOME],space:[Ne.KEY_SPACE],arrowLeft:[Ne.KEY_LEFT_ARROW],arrowRight:[Ne.KEY_RIGHT_ARROW],arrowUp:[Ne.KEY_UP_ARROW],arrowDown:[Ne.KEY_DOWN_ARROW],ctrl:Ne.CONTROL_KEYS,alt:Ne.ALT_KEYS,shift:Ne.SHIFT_KEYS,meta:Ne.META_KEYS},K1=["ctrl","alt","shift","meta"],Xd=n=>{for(const e in Fd)if(Fd.hasOwnProperty(e)&&Fd[e].includes(n))return e;return null};class Ia{constructor(e,t){this.display=e,this.trail=t}}Ia.FocusIO=new Yt("FocusIO",{valueType:Ia,documentation:"A PhET-iO Type for the instance in the simulation which currently has keyboard focus. FocusIO is serialized into and Object with key `focusedPhetioElement` that is a list of PhET-iO Elements, from parent-most to child-most corresponding to the PhET-iO Element that was instrumented.",toStateObject:n=>{const e=[];return n.trail.nodes.forEach((t,i)=>{t.isPhetioInstrumented()&&e.push(t.tandem.phetioID)}),{focusedPhetioElement:e}},stateSchema:{focusedPhetioElement:Bo(Hi)}});class gx{constructor(e,t){t=dn({isStatic:!1},t),this.isStatic=t.isStatic,this.trail=e,this._listeners=[],this.trailVisibleProperty=new ui(this.trail.isVisible()),this._nodeVisibilityListeners=[];for(let i=0;i<this.trail.length;i++){const s=()=>{this.trailVisibleProperty.set(e.isVisible())};this._nodeVisibilityListeners.push(s),e.nodes[i].visibleProperty.link(s)}this.boundTrailVisibilityChangedListener=this.onVisibilityChange.bind(this),this.trailVisibleProperty.link(this.boundTrailVisibilityChangedListener)}addListener(e){this._listeners.push(e)}removeListener(e){const t=te.indexOf(this._listeners,e);this._listeners.splice(t,1)}dispose(){for(let e=0;e<this.trail.length;e++){const t=this._nodeVisibilityListeners[e];this.trail.nodes[e].visibleProperty.hasListener(t)&&this.trail.nodes[e].visibleProperty.removeListener(t)}this.trailVisibleProperty.unlink(this.boundTrailVisibilityChangedListener)}onVisibilityChange(){this.notifyListeners()}notifyListeners(){let e=this._listeners;this._isStatic||(e=e.slice());const t=e.length;for(let i=0;i<t;i++)e[i]()}}class Rg{constructor(e){this.node=null,this.visibilityTracker=null,this.focusProperty=e,this.boundVisibilityListener=this.handleTrailVisibilityChange.bind(this),this.boundInstancesChangedListener=this.handleInstancesChange.bind(this),this.boundNodeDisposedListener=this.handleNodeDisposed.bind(this),this.boundFocusListener=this.handleFocusChange.bind(this),this.focusProperty.link(this.boundFocusListener)}handleFocusChange(e){this.removeDisplayedListeners(),e&&this.addDisplayedListeners(e)}handleTrailVisibilityChange(){this.visibilityTracker&&!this.visibilityTracker.trailVisibleProperty.value&&(this.focusProperty.value=null)}handleInstancesChange(e){e.node&&e.node.instances.length===0&&(this.focusProperty.value=null)}handleNodeDisposed(){this.focusProperty.value=null}addDisplayedListeners(e){this.visibilityTracker=new gx(e.trail),this.visibilityTracker.addListener(this.boundVisibilityListener),this.node=e.trail.lastNode(),this.node.changedInstanceEmitter.addListener(this.boundInstancesChangedListener),this.node.disposeEmitter.addListener(this.boundNodeDisposedListener)}removeDisplayedListeners(){this.visibilityTracker&&(this.visibilityTracker.removeListener(this.boundVisibilityListener),this.visibilityTracker.dispose(),this.visibilityTracker=null),this.node&&(this.node.changedInstanceEmitter.removeListener(this.boundInstancesChangedListener),this.node.disposeEmitter.removeListener(this.boundNodeDisposedListener),this.node=null)}dispose(){this.removeDisplayedListeners(),this.focusProperty.unlink(this.boundFocusListener),this.node=null,this.visibilityTracker=null}}let Ng,zd;const mx=()=>{Ng=document.createElement("style"),document.head.appendChild(Ng),zd=Ng.sheet};mx();const yx=n=>{try{zd.insertRule(n,0)}catch{try{zd.insertRule(n,zd.cssRules.length)}catch{console.log("Error adding CSS rule: "+n)}}},N0=n=>{yx(n)},U1="a11y-pdom-element",Y1="a11y-pdom-root",_x="a11y-pdom-list-item",Ax="position: fixed;top: 0px;left: 0px;transform-origin: left top 0px;border-width: 0px;border: 0px;padding: 1px 1px;margin: 0px;white-space: nowrap;outline: none;box-shadow:none;border-color:transparent;font-size: 1px;clip: rect(1px, 1px, 1px, 1px);";N0(`.${U1}{${Ax}}`);N0(`.${Y1}{position: absolute;pointer-events: none;z-index: 1;opacity: 0.0001;}`);N0(`.${_x}{list-style: none;`);const M0={SIBLING_CLASS_NAME:U1,ROOT_CLASS_NAME:Y1},G1="NEXT",bx="PREVIOUS",jd="INPUT",vx="LABEL",Im="BUTTON",xm="TEXTAREA",Lm="SELECT",PA="OPTGROUP",EA="DATALIST",DA="OUTPUT",TA="DIV",km="A",Vx="AREA",Mg="P",Sx="IFRAME",W1="B",X1="STRONG",j1="I",Q1="EM",Z1="MARK",J1="SMALL",$1="DEL",ev="INS",tv="SUB",iv="SUP",wx="BR",Cx=[km,Vx,jd,Lm,xm,Im,Sx],IA=[W1,X1,j1,Q1,Z1,J1,$1,ev,tv,iv,wx],Px=[jd],Ex=["focusin","focusout","input","change","click","keydown","keyup"],Dx=["input","change","click","keydown","keyup"],Tx=["touchstart","touchend","touchmove","touchcancel","mousedown","mouseup","mousemove","mouseover","mouseout","pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"],Ix="aria-labelledby",xx="aria-describedby",Lx="aria-activedescendant",xA="data-focusable",kx="data-unique-id",Bx=[Ix,xx,Lx];function Bm(n){const e=n.getElementsByTagName("*"),t=[];for(let i=0;i<e.length;i++)e[i].nodeType===Node.ELEMENT_NODE&&(t[i]=e[i]);return t}function sv(n){return n.hidden?!0:n===document.body?!1:sv(n.parentElement)}function LA(n,e){const t=e||document.body,i=Bm(t),s=document.activeElement,r=i.indexOf(s),o=n===G1?1:-1;let c=r+o;for(;c<i.length&&c>=0;){const p=i[c];if(c+=o,Jt.isElementFocusable(p))return p}return s}function Rx(n){return n.replace(/^\s+/,"")}function kA(n){return!te.includes(Px,n.toUpperCase())}const Jt={unwrapStringProperty(n){return n===null?null:typeof n=="string"?n:n.value},getNextFocusable(n){return LA(G1,n)},getPreviousFocusable(n){return LA(bx,n)},getFirstFocusable(n){const e=n||document.body,t=Bm(e);let i=document.body,s=0;for(;s<t.length;){const r=t[s];if(s++,Jt.isElementFocusable(r)){i=r;break}}return i},getRandomFocusable(n){const e=Bm(document.body),t=[];for(let i=0;i<e.length;i++)Jt.isElementFocusable(e[i])&&t.push(e[i]);return t[n.nextInt(t.length)]},unwrapProperty(n){return Dt(n)?n.value:n},containsFormattingTags(n){if(n===null)return!1;let e=0;const t=[],i=[];for(;e<n.length;){const o=n.indexOf("<",e),c=n.indexOf(">",e);o>-1&&(t.push(o),e=o+1),c>-1?(i.push(c),e=c+1):e++}if(t.length!==i.length||t.length===0)return!1;let s=!0;const r=n.toUpperCase();for(let o=0;o<t.length;o++){let c=r.substring(t[o]+1,i[o]);c=c.replace("/","");const p=Rx(c);c.length-p.length>0||te.includes(IA,c)||(s=!1)}return s},setTextContent(n,e){if(e===null)n.innerHTML="";else{const t=e.replaceAll("<br>","<br/>"),i=C0(t);d0(i,zi.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR),kA(n.tagName)&&(Jt.containsFormattingTags(i)?n.innerHTML=i:n.textContent=i)}},tagIsDefaultFocusable(n){return te.includes(Cx,n.toUpperCase())},isElementFocusable(n){return!document.body.contains(n)||sv(n)||te.includes(IA,n.tagName)?!1:n.getAttribute(xA)==="true"},tagNameSupportsContent(n){return kA(n)},removeElements(n,e){for(let t=0;t<e.length;t++){const i=e[t];n.removeChild(i)}},insertElements(n,e,t){for(let i=0;i<e.length;i++){const s=e[i];n.insertBefore(s,t||null)}},createElement(n,e,t){t=dn({namespace:null,id:null},t);const i=t.namespace?document.createElementNS(t.namespace,n):document.createElement(n);return t.id&&(i.id=t.id),Jt.overrideFocusWithTabIndex(i,e),i.classList.add(M0.SIBLING_CLASS_NAME),i},overrideFocusWithTabIndex(n,e){Jt.tagIsDefaultFocusable(n.tagName)!==e?n.tabIndex=e?0:-1:n.removeAttribute("tabindex"),n.setAttribute(xA,e)},TAGS:{INPUT:jd,LABEL:vx,BUTTON:Im,TEXTAREA:xm,SELECT:Lm,OPTGROUP:PA,DATALIST:EA,OUTPUT:DA,DIV:TA,A:km,P:Mg,B:W1,STRONG:X1,I:j1,EM:Q1,MARK:Z1,SMALL:J1,DEL:$1,INS:ev,SUB:tv,SUP:iv},FORM_ELEMENTS:[jd,Im,xm,Lm,PA,EA,DA,km],DEFAULT_CONTAINER_TAG_NAME:TA,DEFAULT_DESCRIPTION_TAG_NAME:Mg,DEFAULT_LABEL_TAG_NAME:Mg,ASSOCIATION_ATTRIBUTES:Bx,INPUT_TYPES_THAT_SUPPORT_CHECKED:["RADIO","CHECKBOX"],DOM_EVENTS:Ex,USER_GESTURE_EVENTS:Dx,BLOCKED_DOM_EVENTS:Tx,DATA_PDOM_UNIQUE_ID:kx,PDOM_UNIQUE_ID_SEPARATOR:"-",DATA_EXCLUDE_FROM_INPUT:"data-exclude-from-input"},Og=new er,nc=n=>{const e=n.map(i=>i.typeName),t=e.join(",");if(!Og.has(t)){const i=s=>{for(let r=0;r<n.length;r++){const o=n[r];if(zi.isValueValid(s,o.validator))return!0}return!1};Og.set(t,new Yt(`OrIO<${e.join(", ")}>`,{documentation:"A PhET-iO Type adding support for a composite type that can be any of its parameters.",parameterTypes:n,isValidValue:i,toStateObject:s=>{for(let r=0;r<n.length;r++){const o=n[r];if(zi.isValueValid(s,o.validator))return{index:r,state:o.toStateObject(s)}}throw new Error("somehow the instance was not valid, we should not get here. Why was isValidValue not used before this step?")},fromStateObject:s=>n[s.index].fromStateObject(s.state),stateSchema:Ar.asValue(`${e.join("|")}`,{isValidValue:s=>typeof s.index=="number"?n[s.index].isStateObjectValid(s.state):!1})}))}return Og.get(t)},Vd="‪",Sd="‫",dh="‬",Da={format:function(n){const e=arguments;return n.replace(/{(\d)}/g,(t,i)=>e[+i+1])},fillIn:function(n,e){n=n&&n.get?n.get():n;let t=n;const i=n.match(/\{\{[^{}]+\}\}/g)||[];for(let s=0;s<i.length;s++){const r=i[s],o=r.replace("{{","").replace("}}","");if(e[o]!==void 0){const c=e[o]&&e[o].get?e[o].get():e[o];t=t.replace(r,c)}}return t},isEmbeddingMark:function(n){return n===Vd||n===Sd||n===dh},embeddedSlice:function(n,e,t){const i=[];let s;for(t===void 0&&(t=n.length),t<0&&(t+=n.length);e<n.length&&Da.isEmbeddingMark(n.charAt(e));)e++;for(;t>=1&&Da.isEmbeddingMark(n.charAt(t-1));)t--;if(e>=t||e>=n.length)return"";for(let D=0;D<e;D++)s=n.charAt(D),s===Vd||s===Sd?i.push(s):s===dh&&i.pop();let r=i.length,o=i.slice();const c=n.slice(e,t);for(let D=0;D<c.length;D++)s=c.charAt(D),s===Vd||s===Sd?i.push(s):s===dh&&(i.pop(),r=Math.min(i.length,r));let p=i;const g=Math.max(0,r-1);o=o.slice(g),p=p.slice(g);const A=o.join(""),C=p.join("").replace(/./g,dh);return A+c+C},embeddedSplit:function(n,e,t){if(e===void 0)return[n];let i=[],s,r=n;function o(){let p,g;if(e instanceof self.RegExp){const A=r.match(e);A?(p=A.index,g=A[0].length):p=-1}else p=r.indexOf(e),g=e.length;return{index:p,length:g}}let c=0;for(;(s=o()).index>=0;){i.push(Da.embeddedSlice(n,c,c+s.index));const p=s.index+s.length;r=r.slice(p),c+=p}return i.push(Da.embeddedSlice(n,c)),t!==void 0&&(i=te.first(i,t)),i},embeddedDebugString:function(n){return n.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")},wrapLTR:function(n){return Vd+n+dh},wrapRTL:function(n){return Sd+n+dh},wrapDirection:function(n,e){return e==="ltr"?Da.wrapLTR(n):Da.wrapRTL(n)},localeToLocalizedName:function(n){return Da.wrapDirection(phet.chipper.localeData[n].localizedName,phet.chipper.localeData[n].direction)},capitalize(n){const e=n.search(/[A-Za-z0-9]/);if(e===-1)return n.slice(0);const t=e>0?n.slice(0,e):"",i=n.charAt(e).toUpperCase(),s=e+1<n.length?n.slice(e+1):"";return t+i+s}},Nx="NAME",Mx="OBJECT",Ox="CONTEXT",qx="HINT",Fx={nameObjectContextHint:"{{NAME}}, {{OBJECT}}, {{CONTEXT}} {{HINT}}",nameObjectContext:"{{NAME}}, {{OBJECT}}, {{CONTEXT}}",nameObjectHint:"{{NAME}}, {{OBJECT}}, {{HINT}}",nameContextHint:"{{NAME}}, {{CONTEXT}} {{HINT}}",nameObject:"{{NAME}}, {{OBJECT}}",nameContext:"{{NAME}}, {{CONTEXT}}",nameHint:"{{NAME}}, {{HINT}}",name:"{{NAME}}",objectContextHint:"{{OBJECT}}, {{CONTEXT}} {{HINT}}",objectContext:"{{OBJECT}}, {{CONTEXT}}",objectHint:"{{OBJECT}}, {{HINT}}",contextHint:"{{CONTEXT}} {{HINT}}",object:"{{OBJECT}}",context:"{{CONTEXT}}",hint:"{{HINT}}"};class Qd{constructor(e){const t=ko()({},Fx,e);this.nameObjectContextHint=t.nameObjectContextHint,this.nameObjectContext=t.nameObjectContext,this.nameObjectHint=t.nameObjectHint,this.nameContextHint=t.nameContextHint,this.nameObject=t.nameObject,this.nameContext=t.nameContext,this.nameHint=t.nameHint,this.name=t.name,this.objectContextHint=t.objectContextHint,this.objectContext=t.objectContext,this.objectHint=t.objectHint,this.contextHint=t.contextHint,this.object=t.object,this.context=t.context,this.hint=t.hint}getResponsePattern(e){return this[e]}static createPatternKey(e,t,i,s){let r="";return e&&(r=r.concat(Nx.concat("_"))),t&&(r=r.concat(Mx.concat("_"))),i&&(r=r.concat(Ox.concat("_"))),s&&(r=r.concat(qx.concat("_"))),te.camelCase(r)}}Qd.DEFAULT_RESPONSE_PATTERNS=new Qd;const nv={nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null,ignoreProperties:!1,responsePatternCollection:Qd.DEFAULT_RESPONSE_PATTERNS};class xa{constructor(e){const t=ko()({},nv,e);this._nameResponse=t.nameResponse,this._objectResponse=t.objectResponse,this._contextResponse=t.contextResponse,this._hintResponse=t.hintResponse,this.ignoreProperties=t.ignoreProperties,this.responsePatternCollection=t.responsePatternCollection}getNameResponse(){return xa.getResponseText(this._nameResponse)}get nameResponse(){return this.getNameResponse()}set nameResponse(e){this.setNameResponse(e)}setNameResponse(e){this._nameResponse=e}getObjectResponse(){return xa.getResponseText(this._objectResponse)}get objectResponse(){return this.getObjectResponse()}set objectResponse(e){this.setObjectResponse(e)}setObjectResponse(e){this._objectResponse=e}getContextResponse(){return xa.getResponseText(this._contextResponse)}get contextResponse(){return this.getContextResponse()}set contextResponse(e){this.setContextResponse(e)}setContextResponse(e){this._contextResponse=e}getHintResponse(){return xa.getResponseText(this._hintResponse)}get hintResponse(){return this.getHintResponse()}set hintResponse(e){this.setHintResponse(e)}setHintResponse(e){this._hintResponse=e}static getResponseText(e){return Dt(e)?e.value:typeof e=="function"?e():e}copy(){return new xa(this.serialize())}serialize(){return{nameResponse:this.nameResponse,objectResponse:this.objectResponse,contextResponse:this.contextResponse,hintResponse:this.hintResponse,ignoreProperties:this.ignoreProperties,responsePatternCollection:this.responsePatternCollection}}}xa.DEFAULT_OPTIONS=nv;class zx extends Gi{constructor(e){super(),this.nameResponsesEnabledProperty=new di(!0),this.objectResponsesEnabledProperty=new di(!1),this.contextResponsesEnabledProperty=new di(!1),this.hintResponsesEnabledProperty=new di(!1)}reset(){this.nameResponsesEnabledProperty.reset(),this.objectResponsesEnabledProperty.reset(),this.contextResponsesEnabledProperty.reset(),this.hintResponsesEnabledProperty.reset()}collectResponses(e){const t=ko()({},xa.DEFAULT_OPTIONS,e),i=!!(t.nameResponse&&(this.nameResponsesEnabledProperty.get()||t.ignoreProperties)),s=!!(t.objectResponse&&(this.objectResponsesEnabledProperty.get()||t.ignoreProperties)),r=!!(t.contextResponse&&(this.contextResponsesEnabledProperty.get()||t.ignoreProperties)),o=!!(t.hintResponse&&(this.hintResponsesEnabledProperty.get()||t.ignoreProperties)),c=Qd.createPatternKey(i,s,r,o);let p="";if(c){const g=t.responsePatternCollection.getResponsePattern(c);p=Da.fillIn(g,{NAME:t.nameResponse,OBJECT:t.objectResponse,CONTEXT:t.contextResponse,HINT:t.hintResponse})}return p}}const rv=new zx,av=1;let Hx=1;class Ws extends Nl{constructor(e){const t=lt()({alert:null,predicate:function(){return!0},canAnnounceProperties:[],descriptionCanAnnounceProperties:[],voicingCanAnnounceProperties:[],alertStableDelay:200,alertMaximumDelay:Number.MAX_VALUE,announcerOptions:{},priority:av},e);super(t),this.id=Hx++,this._alert=t.alert,this.predicate=t.predicate,this.canAnnounceProperty=new qg({dependentProperties:t.canAnnounceProperties}),this.descriptionCanAnnounceProperty=new qg({dependentProperties:t.descriptionCanAnnounceProperties}),this.voicingCanAnnounceProperty=new qg({dependentProperties:t.voicingCanAnnounceProperties}),this.alertStableDelay=t.alertStableDelay,this.alertMaximumDelay=t.alertMaximumDelay,this.announcerOptions=t.announcerOptions,this.priorityProperty=new Kn(t.priority),this.previousAlertText=null}static getAlertStringFromResponsePacket(e,t){const i=e.serialize();return t||(i.ignoreProperties=!0),rv.collectResponses(i)}getAlertText(e=!1){const t=Ws.alertableToText(this._alert,e);return this.previousAlertText=t,t}getAlert(){return this._alert}get alert(){return this.getAlert()}set alert(e){this.setAlert(e)}setAlert(e){this._alert=e}setAlertStableDelay(e){this.alertStableDelay=e}toString(){return`Utterance_${this.id}#${this.getAlertText()}`}toStateObject(){return{alert:Zt(nc([Hi,yi])).toStateObject(this.getAlertText())}}reset(){this.previousAlertText=null}setCanAnnounceProperties(e){this.canAnnounceProperty.setDependentProperties(e)}set canAnnounceProperties(e){this.setCanAnnounceProperties(e)}get canAnnounceProperties(){return this.getCanAnnounceProperties()}getCanAnnounceProperties(){return this.canAnnounceProperty.getDependentProperties()}setDescriptionCanAnnounceProperties(e){this.descriptionCanAnnounceProperty.setDependentProperties(e)}set descriptionCanAnnounceProperties(e){this.setDescriptionCanAnnounceProperties(e)}get descriptionCanAnnounceProperties(){return this.getDescriptionCanAnnounceProperties()}getDescriptionCanAnnounceProperties(){return this.descriptionCanAnnounceProperty.getDependentProperties()}setVoicingCanAnnounceProperties(e){this.voicingCanAnnounceProperty.setDependentProperties(e)}set voicingCanAnnounceProperties(e){this.setVoicingCanAnnounceProperties(e)}get voicingCanAnnounceProperties(){return this.getVoicingCanAnnounceProperties()}getVoicingCanAnnounceProperties(){return this.voicingCanAnnounceProperty.getDependentProperties()}dispose(){this.canAnnounceProperty.dispose(),this.descriptionCanAnnounceProperty.dispose(),this.voicingCanAnnounceProperty.dispose(),this.priorityProperty.dispose(),super.dispose()}static alertableToText(e,t=!1){let i;if(typeof e=="function")i=e();else if(e instanceof xa)i=Ws.getAlertStringFromResponsePacket(e,t);else{if(e instanceof Ws)return e.getAlertText(t);Dt(e)?i=e.value:i=e}return i}}Ws.TOP_PRIORITY=10;Ws.HIGH_PRIORITY=5;Ws.MEDIUM_PRIORITY=2;Ws.DEFAULT_PRIORITY=av;Ws.LOW_PRIORITY=0;Ws.UtteranceIO=new Yt("UtteranceIO",{valueType:Ws,documentation:"Announces text to a specific browser technology (like aria-live or web speech)",toStateObject:n=>n.toStateObject(),stateSchema:{alert:Zt(nc([Hi,yi]))}});class qg extends _1{constructor(e){const t=lt()({dependentProperties:[]},e),i=new hi(new ui(!1));super(i),this._dependentProperties=[],this.implementationProperty=i,this.setDependentProperties(t.dependentProperties)}setDependentProperties(e){const t=this.implementationProperty.value,i=e.length===0?[new ui(!0)]:e;this.implementationProperty.value=Oi.and(i),t.dispose(),this._dependentProperties=e}set dependentProperties(e){this.setDependentProperties(e)}get dependentProperties(){return this.getDependentProperties()}getDependentProperties(){return this._dependentProperties.slice(0)}dispose(){this.implementationProperty.dispose(),this._dependentProperties=[],super.dispose()}}class BA extends Ws{constructor(e,t){super(t),this.readingBlockFocus=e}}class Rh extends Gi{constructor(e){var i;const t=lt()({respectResponseCollectorProperties:!0,phetioType:Rh.AnnouncerIO,phetioState:!1},e);super(t),this.readyToAnnounce=!0,this.hasSpoken=!1,this.respectResponseCollectorProperties=t.respectResponseCollectorProperties,this.announcementCompleteEmitter=new Os({parameters:[{name:"utterance",phetioType:Ws.UtteranceIO},{name:"text",phetioType:Zt(nc([Hi,yi]))}],tandem:(i=t.tandem)==null?void 0:i.createTandem("announcementCompleteEmitter"),phetioReadOnly:!0,phetioDocumentation:"The announcement that has just completed. The Utterance text could potentially differ from the exact text that was announced, so both are emitted. Use `text` for an exact match of what was announced."})}shouldUtteranceCancelOther(e,t){return t.priorityProperty.value<e.priorityProperty.value}onUtterancePriorityChange(e){}}Rh.AnnouncerIO=new Yt("AnnouncerIO",{valueType:Rh,documentation:"Announces text to a specific browser technology (like aria-live or web speech)"});const Kx={initialize(){if(self.speechSynthesis||self.SpeechSynthesis||self.SpeechSynthesisUtterance)throw new Error("SpeechSynthesis is supported here, the polyfill should not overwrite it");self.SpeechSynthesis=self.parent.SpeechSynthesis,self.speechSynthesis=new self.parent.SpeechSynthesis,self.SpeechSynthesisUtterance=self.parent.SpeechSynthesisUtterance}};self.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters.speechSynthesisFromParent&&Kx.initialize();const RA=5e3,Ux=5e3,Yx=1e4,NA=125,Gx=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Good News","Jester","Organ","Superstar","Trinoids","Whisper","Wobble","Zarvox","Flo","Grandma","Grandpa","Junior"],MA={cmn:"zh_CN",yue:"zh_HK","yue-HK":"zh_HK",yue_HK:"zh_HK","fil-PH":"tl",fil_PH:"tl"},OA={cancelSelf:!0,cancelOther:!0,voice:null};class Wx extends Rh{constructor(e){var i,s,r,o;const t=lt()({respectResponseCollectorProperties:!1,debug:!1},e);super(t),this.debug=t.debug,this.voiceProperty=new hi(null,{tandem:(i=t.tandem)==null?void 0:i.createTandem("voiceProperty"),phetioValueType:Zt(Qx),phetioState:!1,phetioReadOnly:!0,phetioDocumentation:"the voice that is currently voicing responses"}),this.voiceRateProperty=new Kn(1,{range:new xi(.75,2),tandem:(s=t.tandem)==null?void 0:s.createTandem("voiceRateProperty"),phetioState:!1,phetioDocumentation:"changes the rate of the voicing-feature voice"}),this.voicePitchProperty=new Kn(1,{range:new xi(.5,2),tandem:(r=t.tandem)==null?void 0:r.createTandem("voicePitchProperty"),phetioState:!1,phetioDocumentation:"changes the pitch of the voicing-feature voice"}),this.voiceVolumeProperty=new Kn(1,{range:new xi(0,1)}),this.hasSpoken=!1,this.timeSinceWakingEngine=0,this.timeSincePauseResume=0,this.timeSincePendingUtterance=0,this.timeSinceUtteranceEnd=NA,this.startSpeakingEmitter=new Os({parameters:[{valueType:"string"},{valueType:Ws}]}),this.endSpeakingEmitter=new Os({parameters:[{valueType:"string"},{valueType:Ws}]}),this.enabledComponentImplementation=new Kf({enabled:!1,tandem:t.tandem,enabledPropertyOptions:{phetioDocumentation:"toggles this controller of SpeechSynthesis on and off",phetioState:!1,phetioFeatured:!1}}),this.enabledProperty=this.enabledComponentImplementation.enabledProperty,this.mainWindowVoicingEnabledProperty=new di(!0,{tandem:(o=t.tandem)==null?void 0:o.createTandem("mainWindowVoicingEnabledProperty"),phetioState:!1,phetioDocumentation:"toggles the voicing feature on and off for the simulation screen (not the voicing preferences and toolbar controls)"}),this.voicingFullyEnabledProperty=Oi.and([this.enabledProperty,this.mainWindowVoicingEnabledProperty]),this._speechAllowedAndFullyEnabledProperty=new di(!1),this.speechAllowedAndFullyEnabledProperty=this._speechAllowedAndFullyEnabledProperty,this.synth=null,this.voicesProperty=new hi([]),this.speakingSpeechSynthesisUtteranceWrapper=null,this.isInitializedProperty=new di(!1),this.canSpeakProperty=null,this.boundHandleCanSpeakChange=this.handleCanSpeakChange.bind(this),this.boundHandleCanAnnounceChange=this.handleCanAnnounceChange.bind(this),this.debug&&(this.announcementCompleteEmitter.addListener((c,p)=>{console.log("announcement complete",p)}),this.startSpeakingEmitter.addListener(c=>{this.debug&&console.log("startSpeakingListener",c)}),this.endSpeakingEmitter.addListener(c=>{this.debug&&console.log("endSpeakingListener",c)}))}get initialized(){return this.isInitializedProperty.value}initialize(e,t){const i=lt()({speechAllowedProperty:new di(!0)},t);this.synth=self.speechSynthesis,this.canSpeakProperty=Oi.and([i.speechAllowedProperty,this.enabledProperty]),this.canSpeakProperty.link(this.boundHandleCanSpeakChange),_n.multilink([i.speechAllowedProperty,this.voicingFullyEnabledProperty],(o,c)=>{this._speechAllowedAndFullyEnabledProperty.value=o&&c});const s=this.getSynth();s.addEventListener&&s.addEventListener("voiceschanged",()=>{this.populateVoices()}),this.populateVoices();const r=()=>{this.timeSinceWakingEngine=RA,e.removeListener(r)};e.addListener(r),fn.addListener(this.step.bind(this)),this.isInitializedProperty.value=!0}step(e){e*=1e3;const t=this.getSynth();this.initialized&&t&&(this.hasSpoken||(this.hasSpoken=t.speaking),this.timeSinceUtteranceEnd=t.speaking?0:this.timeSinceUtteranceEnd+e,this.timeSincePendingUtterance=this.speakingSpeechSynthesisUtteranceWrapper&&!this.speakingSpeechSynthesisUtteranceWrapper.started?this.timeSincePendingUtterance+e:0,this.timeSincePendingUtterance>Ux&&(this.handleSpeechSynthesisEnd(this.speakingSpeechSynthesisUtteranceWrapper.announceText,this.speakingSpeechSynthesisUtteranceWrapper),this.speakingSpeechSynthesisUtteranceWrapper=null,this.cancelSynth()),this.timeSinceUtteranceEnd>NA&&!this.speakingSpeechSynthesisUtteranceWrapper&&(this.readyToAnnounce=!0),qs.chromium&&!qs.android&&this.voiceProperty.value&&!this.voiceProperty.value.localService&&(this.timeSincePauseResume=t.speaking?this.timeSincePauseResume+e:0,this.timeSincePauseResume>Yx&&(this.timeSincePauseResume=0,t.pause(),t.resume())),qs.chromeOS&&(this.timeSinceWakingEngine+=e,!t.speaking&&this.timeSinceWakingEngine>RA&&(this.timeSinceWakingEngine=0,t.speak(new SpeechSynthesisUtterance(" ")))))}handleCanSpeakChange(e){e||this.cancel()}populateVoices(){const e=this.getSynth();e&&(this.voicesProperty.value=te.uniqBy(e.getVoices(),t=>t.name))}getPrioritizedVoices(){const e=this.voicesProperty.value.slice(),t=te.filter(e,s=>!te.some(Gx,r=>s.name.includes(r))),i=s=>s.name.includes("Google")?-1:s.name.includes("Fred")?t.length:t.indexOf(s);return t.sort((s,r)=>i(s)-i(r))}getEnglishPrioritizedVoices(){return te.filter(this.getPrioritizedVoices(),e=>e.lang==="en-US"||e.lang==="en_US")}getPrioritizedVoicesForLocale(e){const t=e,i=e.replace("_","-");return te.filter(this.getPrioritizedVoices(),s=>{const r=MA.hasOwnProperty(s.lang)?MA[s.lang]:s.lang;let o=!1;return(r.includes("_")||r.includes("-"))&&(o=t===r.slice(0,2)),o||t===r||i===r})}announce(e,t){this.initialized&&this.canSpeakProperty&&this.canSpeakProperty.value?this.requestSpeech(e,t):this.handleAnnouncementFailure(t,e)}handleAnnouncementFailure(e,t){this.debug&&console.log("announcement failure",t),this.announcementCompleteEmitter.emit(e,t)}speakIgnoringEnabled(e){this.initialized&&(this.cancel(),this.requestSpeech(e.getAlertText(this.respectResponseCollectorProperties),e))}requestSpeech(e,t){if(this.debug&&console.log("requestSpeech",e),!e){this.handleAnnouncementFailure(t,e);return}const i=ko()({},OA,t.announcerOptions),s=jx(C0(e+""));d0(s,zi.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR);const r=new SpeechSynthesisUtterance(s);r.voice=i.voice||this.voiceProperty.value,r.pitch=this.voicePitchProperty.value,r.rate=this.voiceRateProperty.value,r.volume=this.voiceVolumeProperty.value;const o=()=>{this.startSpeakingEmitter.emit(s,t),this.speakingSpeechSynthesisUtteranceWrapper.started=!0,r.removeEventListener("start",o)},c=()=>{this.handleSpeechSynthesisEnd(s,p)},p=new Xx(t,e,r,!1,c,o);this.speakingSpeechSynthesisUtteranceWrapper=p,r.addEventListener("start",o),r.addEventListener("end",c),r.addEventListener("error",c),this.readyToAnnounce=!1,this.timeSinceUtteranceEnd=0,t.canAnnounceProperty.link(this.boundHandleCanAnnounceChange),t.voicingCanAnnounceProperty.link(this.boundHandleCanAnnounceChange),this.getSynth().speak(r)}handleCanAnnounceChange(){this.speakingSpeechSynthesisUtteranceWrapper&&this.cancelUtteranceIfCanAnnounceFalse(this.speakingSpeechSynthesisUtteranceWrapper.utterance)}cancelUtteranceIfCanAnnounceFalse(e){(!e.canAnnounceProperty.value||!e.voicingCanAnnounceProperty.value)&&this.cancelUtterance(e)}handleSpeechSynthesisEnd(e,t){this.endSpeakingEmitter.emit(e,t.utterance),this.announcementCompleteEmitter.emit(t.utterance,t.speechSynthesisUtterance.text),t.speechSynthesisUtterance.removeEventListener("error",t.endListener),t.speechSynthesisUtterance.removeEventListener("end",t.endListener),t.speechSynthesisUtterance.removeEventListener("start",t.startListener);const i=t.utterance.canAnnounceProperty;i.hasListener(this.boundHandleCanAnnounceChange)&&i.unlink(this.boundHandleCanAnnounceChange);const s=t.utterance.voicingCanAnnounceProperty;s.hasListener(this.boundHandleCanAnnounceChange)&&s.unlink(this.boundHandleCanAnnounceChange),this.speakingSpeechSynthesisUtteranceWrapper=null}getSynth(){return this.synth}cancel(){this.initialized&&this.speakingSpeechSynthesisUtteranceWrapper&&this.cancelUtterance(this.speakingSpeechSynthesisUtteranceWrapper.utterance)}cancelUtterance(e){const t=this.speakingSpeechSynthesisUtteranceWrapper;t&&e===t.utterance&&(this.handleSpeechSynthesisEnd(t.announceText,t),this.cancelSynth())}shouldUtteranceCancelOther(e,t){const i=ko()({},OA,e.announcerOptions);let s;return t.priorityProperty.value!==e.priorityProperty.value?s=t.priorityProperty.value<e.priorityProperty.value:(s=i.cancelOther,t&&t===e&&(s=i.cancelSelf)),s}onUtterancePriorityChange(e){const t=this.speakingSpeechSynthesisUtteranceWrapper;t&&this.shouldUtteranceCancelOther(e,t.utterance)&&this.cancelUtterance(t.utterance)}cancelSynth(){const e=this.getSynth();e&&e.cancel()}static isSpeechSynthesisSupported(){return!!self.speechSynthesis&&!!self.SpeechSynthesisUtterance}}class Xx{constructor(e,t,i,s,r,o){this.utterance=e,this.announceText=t,this.speechSynthesisUtterance=i,this.started=s,this.endListener=r,this.startListener=o}}function jx(n){return n.split("<br/>").join(" ").split("<br>").join(" ")}const Qx=new Yt("SpeechSynthesisVoiceIO",{isValidValue:n=>!0,toStateObject:n=>n.name}),Zx=[],ov=!1;class Ti extends Hf{constructor(e,t){var s;const i=lt()({parameters:Zx,phetioOuterType:Ti.PhetioActionIO,phetioState:ov,phetioReadOnly:Gi.DEFAULT_OPTIONS.phetioReadOnly,phetioHighFrequency:Gi.DEFAULT_OPTIONS.phetioHighFrequency,phetioEventType:Gi.DEFAULT_OPTIONS.phetioEventType,phetioDocumentation:"A class that wraps a function, adding API to execute that function and data stream capture."},t);super(i),this.action=e,this.isExecutingCount=0,this.disposeOnExecuteCompletion=!1,this.executedEmitter=new Os({parameters:i.parameters,tandem:(s=i.tandem)==null?void 0:s.createTandem("executedEmitter"),hasListenerOrderDependencies:i.hasListenerOrderDependencies,phetioState:i.phetioState,phetioReadOnly:i.phetioReadOnly,phetioHighFrequency:i.phetioHighFrequency,phetioEventType:i.phetioEventType,phetioDocumentation:"Emitter that emits when this actions work is complete"}),this.disposePhetioAction=()=>{this.executedEmitter.dispose()}}execute(...e){this.isExecutingCount++,Xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("executed",{data:this.getPhetioData(...e)}),this.action.apply(null,e),this.executedEmitter.emit(...e),Xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent(),this.isExecutingCount--,this.disposeOnExecuteCompletion&&this.isExecutingCount===0&&(this.disposePhetioAction(),this.disposeOnExecuteCompletion=!1)}dispose(){this.isExecutingCount>0?this.disposeOnExecuteCompletion=!0:this.disposePhetioAction(),super.dispose()}}Ti.PhetioActionIO=n=>{const e=n.map(qA).join(",");return Fg.has(e)||Fg.set(e,new Yt(`PhetioActionIO<${n.map(qA).join(", ")}>`,{valueType:Ti,documentation:"Executes when an event occurs",events:["executed"],parameterTypes:n,metadataDefaults:{phetioState:ov},methods:{execute:{returnType:Jn,parameterTypes:n,implementation:function(...t){this.execute(...t)},documentation:"Executes the function the PhetioAction is wrapping.",invocableForReadOnlyElements:!1},getValidationErrors:{returnType:Bo(Zt(Hi)),parameterTypes:n,implementation:function(...t){return this.getValidationErrors(...t)},documentation:"Checks to see if the proposed values are valid. Returns an array of length N where each element is an error (string) or null if the value is valid."}}})),Fg.get(e)};const qA=n=>n.typeName,Fg=new er,FA=n=>Object.getPrototypeOf(n)===Object.prototype,zA=new Yt("ObjectLiteralIO",{documentation:"PhET-iO Type for object literals",isValidValue:FA,supertype:p0,stateSchema:Ar.asValue("object",{valueType:Object,isValidValue:FA}),toStateObject:te.identity}),Zd="targetSubstitute",Jx=["altKey","button","charCode","clientX","clientY","code","ctrlKey","deltaMode","deltaX","deltaY","deltaZ","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","scale","shiftKey","target","type","relatedTarget","which"],HA=["deltaMode","deltaX","deltaY","deltaZ","altKey","button","charCode","clientX","clientY","code","ctrlKey","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","shiftKey","type","relatedTarget","which"],$x=["target","relatedTarget"],lv=n=>{const e={constructorName:n.constructor.name};return Jx.forEach(t=>{const i=n[t];i==null?e[t]=null:i instanceof Element&&$x.includes(t)&&typeof i.getAttribute=="function"&&i.hasAttribute(Jt.DATA_PDOM_UNIQUE_ID)?e[t]={[Jt.DATA_PDOM_UNIQUE_ID]:i.getAttribute(Jt.DATA_PDOM_UNIQUE_ID),id:i.getAttribute("id")}:e[t]=typeof i=="object"?{}:JSON.parse(JSON.stringify(i))}),e},hv=n=>{const e=n.constructorName||"Event",t=te.pick(n,HA);if(t.relatedTarget){const s=document.getElementById(t.relatedTarget.id);t.relatedTarget=s}const i=new window[e](e,t);for(const s in n)n.hasOwnProperty(s)&&!HA.includes(s)&&(s==="target"?(i[Zd]=te.clone(n[s])||{},i[Zd].getAttribute=function(r){return this[r]}):i[s]=n[s]);return i},El=new Yt("EventIO",{valueType:self.Event,documentation:"A DOM Event",toStateObject:n=>lv(n),fromStateObject:n=>hv(n),stateSchema:()=>({constructorName:Hi,altKey:Zt(hl),button:Zt(yi),charCode:Zt(yi),clientX:Zt(yi),clientY:Zt(yi),code:Zt(Hi),ctrlKey:Zt(hl),deltaMode:Zt(yi),deltaX:Zt(yi),deltaY:Zt(yi),deltaZ:Zt(yi),key:Zt(Hi),keyCode:Zt(yi),metaKey:Zt(hl),pageX:Zt(yi),pageY:Zt(yi),pointerId:Zt(yi),pointerType:Zt(Hi),scale:Zt(yi),shiftKey:Zt(hl),target:Zt(zA),type:Zt(Hi),relatedTarget:Zt(zA),which:Zt(yi)})});class eL{constructor(e){var i,s;this.keyState={},this._lastKeyDown=null,this.attachedToDocument=!1,this.documentKeyupListener=null,this.documentKeydownListener=null,this.documentBlurListener=null,this._enabled=!0,this.keydownEmitter=new Os({parameters:[{valueType:KeyboardEvent}]}),this.keyupEmitter=new Os({parameters:[{valueType:KeyboardEvent}]}),this.keyDownStateChangedEmitter=new Os({parameters:[{valueType:[KeyboardEvent,null]}]}),this.keydownUpdateAction=new Ti(r=>{const o=Ne.getEventCode(r);if(o){if(this.correctModifierKeys(r),!this.isKeyDown(o)){const c=Ne.getEventCode(r);this.keyState[c]={key:c,timeDown:0}}this._lastKeyDown=o,this.keydownEmitter.emit(r),this.keyDownStateChangedEmitter.emit(r)}},{phetioPlayback:!0,tandem:(i=e==null?void 0:e.tandem)==null?void 0:i.createTandem("keydownUpdateAction"),parameters:[{name:"event",phetioType:El}],phetioEventType:si.USER,phetioDocumentation:"Action that executes whenever a keydown occurs from the input listeners this keyStateTracker adds (most likely to the document)."}),this.keyupUpdateAction=new Ti(r=>{const o=Ne.getEventCode(r);o&&(this.correctModifierKeys(r),this.isKeyDown(o)&&delete this.keyState[o],qs.mac&&Ne.isMetaKey(r)&&this.clearState(!0),this.keyupEmitter.emit(r),this.keyDownStateChangedEmitter.emit(r))},{phetioPlayback:!0,tandem:(s=e==null?void 0:e.tandem)==null?void 0:s.createTandem("keyupUpdateAction"),parameters:[{name:"event",phetioType:El}],phetioEventType:si.USER,phetioDocumentation:"Action that executes whenever a keyup occurs from the input listeners this keyStateTracker adds (most likely to the document)."});const t=this.step.bind(this);fn.addListener(t),this.disposeKeyStateTracker=()=>{fn.removeListener(t),this.attachedToDocument&&this.detachFromDocument()}}keydownUpdate(e){this.enabled&&this.keydownUpdateAction.execute(e)}correctModifierKeys(e){const t=Ne.getEventCode(e);let i=!1;e.shiftKey&&!Ne.isShiftKey(e)&&!this.shiftKeyDown&&(i=i||!this.keyState[Ne.KEY_SHIFT_LEFT],this.keyState[Ne.KEY_SHIFT_LEFT]={key:t,timeDown:0}),e.altKey&&!Ne.isAltKey(e)&&!this.altKeyDown&&(i=i||!this.keyState[Ne.KEY_ALT_LEFT],this.keyState[Ne.KEY_ALT_LEFT]={key:t,timeDown:0}),e.ctrlKey&&!Ne.isControlKey(e)&&!this.ctrlKeyDown&&(i=i||!this.keyState[Ne.KEY_CONTROL_LEFT],this.keyState[Ne.KEY_CONTROL_LEFT]={key:t,timeDown:0}),e.metaKey&&!Ne.isMetaKey(e)&&!this.metaKeyDown&&(i=i||!this.keyState[Ne.KEY_META_LEFT],this.keyState[Ne.KEY_META_LEFT]={key:t,timeDown:0}),!e.shiftKey&&this.shiftKeyDown&&(i=i||!!this.keyState[Ne.KEY_SHIFT_LEFT]||!!this.keyState[Ne.KEY_SHIFT_RIGHT],delete this.keyState[Ne.KEY_SHIFT_LEFT],delete this.keyState[Ne.KEY_SHIFT_RIGHT]),!e.altKey&&this.altKeyDown&&(i=i||!!this.keyState[Ne.KEY_ALT_LEFT]||!!this.keyState[Ne.KEY_ALT_RIGHT],delete this.keyState[Ne.KEY_ALT_LEFT],delete this.keyState[Ne.KEY_ALT_RIGHT]),!e.ctrlKey&&this.ctrlKeyDown&&(i=i||!!this.keyState[Ne.KEY_CONTROL_LEFT]||!!this.keyState[Ne.KEY_CONTROL_RIGHT],delete this.keyState[Ne.KEY_CONTROL_LEFT],delete this.keyState[Ne.KEY_CONTROL_RIGHT]),!e.metaKey&&this.metaKeyDown&&(i=i||Ne.META_KEYS.some(s=>!!this.keyState[s]),Ne.META_KEYS.forEach(s=>{delete this.keyState[s]})),i&&this.keyDownStateChangedEmitter.emit(e)}keyupUpdate(e){this.enabled&&this.keyupUpdateAction.execute(e)}get movementKeysDown(){return this.isAnyKeyInListDown(Ne.MOVEMENT_KEYS)}getLastKeyDown(){return this._lastKeyDown}isKeyDown(e){return!!this.keyState[e]}isEnglishKeyDown(e){return this.isAnyKeyInListDown(Fd[e])}getKeysDown(){return Object.keys(this.keyState)}getEnglishKeysDown(){const e=new Set;for(const t of this.getKeysDown()){const i=Xd(t);i&&e.add(i)}return e}isAnyKeyInListDown(e){for(let t=0;t<e.length;t++)if(this.isKeyDown(e[t]))return!0;return!1}areKeysDown(e){for(let i=0;i<e.length;i++)if(!this.isKeyDown(e[i]))return!1;return!0}areKeysExclusivelyDown(e){const t=Object.keys(this.keyState);if(t.length!==e.length)return!1;let i=!0;for(let s=0;s<e.length;s++){const r=e[s];let o=[r];Ne.isModifierKey(r)&&(o=Ne.MODIFIER_KEY_TO_CODE_MAP.get(r)),te.intersection(t,o).length===0&&(i=!1)}return i}areKeysDownWithoutExtraModifiers(e){for(let t=0;t<Ne.MODIFIER_KEY_CODES.length;t++){const i=Ne.MODIFIER_KEY_CODES[t];if(this.isKeyDown(i)&&!e.includes(i))return!1}return this.areKeysDown(e)}keysAreDown(){return Object.keys(this.keyState).length>0}get enterKeyDown(){return this.isKeyDown(Ne.KEY_ENTER)}get shiftKeyDown(){return this.isAnyKeyInListDown(Ne.SHIFT_KEYS)}get altKeyDown(){return this.isAnyKeyInListDown(Ne.ALT_KEYS)}get ctrlKeyDown(){return this.isAnyKeyInListDown(Ne.CONTROL_KEYS)}get metaKeyDown(){return this.isAnyKeyInListDown(Ne.META_KEYS)}timeDownForKey(e){return this.keyState[e].timeDown}clearState(e){this.keyState={},e||this.keyDownStateChangedEmitter.emit(null)}step(e){if(this.keysAreDown()){const t=e*1e3;for(const i in this.keyState)this.keyState[i]&&(this.keyState[i].timeDown+=t)}}attachToWindow(){this.documentKeydownListener=t=>{this.keydownUpdate(t)},this.documentKeyupListener=t=>{this.keyupUpdate(t)},this.documentBlurListener=t=>{this.clearState()};const e=()=>{self.addEventListener("keyup",this.documentKeyupListener,{capture:!0}),self.addEventListener("keydown",this.documentKeydownListener,{capture:!0}),self.addEventListener("blur",this.documentBlurListener,{capture:!0}),this.attachedToDocument=!0};if(document)e();else{const t=()=>{e(),self.removeEventListener("load",t)};self.addEventListener("load",t)}}setEnabled(e){this._enabled!==e&&(this._enabled=e,!e&&this.clearState())}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabled}detachFromDocument(){self.removeEventListener("keyup",this.documentKeyupListener),self.removeEventListener("keydown",this.documentKeydownListener),self.removeEventListener("blur",this.documentBlurListener),this.documentKeyupListener=null,this.documentKeydownListener=null,this.documentBlurListener=null,this.attachedToDocument=!1}dispose(){this.disposeKeyStateTracker()}}class tL extends eL{constructor(e){super(e)}}const Xr=new tL({tandem:Xe.GENERAL_CONTROLLER.createTandem("keyStateTracker")});class iL extends Wx{constructor(e){const t=lt()({respectResponseCollectorProperties:!0,phetioDocumentation:"Announcer that manages the voicing feature, providing audio responses via WebAudio."},e);super(t)}initialize(e,t){super.initialize(e,t),Xr.keyupEmitter.addListener(i=>{Ne.isControlKey(i)&&this.cancel()})}voicingSupportedForLocale(e){return e.startsWith("en")}}const al=new iL,rc=(n,e)=>{n.reindex();const t=n.indices.lastIndexOf(-1);if(t<0)return n;const i=t+1,r=n.nodes[i].getTrailsTo(e);if(r.length===0)return n;const o=r[0];for(let c=i+1;c<n.length;c++)o.addDescendant(n.nodes[c]);return o};class jr extends bn{}jr.INDICES=new jr;jr.TRAIL_ID=new jr;jr.enumeration=new br(jr);const Gu=jr.TRAIL_ID,Yf="-",zg=Yf;class bi{constructor(e){if(e instanceof bi){const t=e;this.nodes=t.nodes.slice(0),this.length=t.length,this.uniqueId=t.uniqueId,this.indices=t.indices.slice(0);return}if(this.nodes=[],this.length=0,this.uniqueId="",this.indices=[],e)if(e&&!Array.isArray(e)){const t=e;this.addDescendant(t)}else{const t=e.length;for(let i=0;i<t;i++)this.addDescendant(e[i])}}copy(){return new bi(this)}isPainted(){return this.lastNode().isPainted()}isValid(){this.reindex();const e=this.indices.length;for(let t=0;t<e;t++)if(this.indices[t]<0)return!1;return!0}isVisible(){let e=this.nodes.length;for(;e--;)if(!this.nodes[e].isVisible())return!1;return!0}isPDOMVisible(){let e=this.nodes.length;for(;e--;)if(!this.nodes[e].isVisible()||!this.nodes[e].isPDOMVisible())return!1;return!0}getOpacity(){let e=1,t=this.nodes.length;for(;t--;)e*=this.nodes[t].getOpacity();return e}isPickable(){return te.some(this.nodes,e=>e.pickable===!1||!e.visible)?!1:!!te.some(this.nodes,e=>e._inputListeners.length>0||e.pickableProperty.value===!0)}get(e){return e>=0?this.nodes[e]:this.nodes[this.nodes.length+e]}slice(e,t){return new bi(this.nodes.slice(e,t))}subtrailTo(e,t=!1){return this.slice(0,te.indexOf(this.nodes,e)+(t?0:1))}isEmpty(){return this.nodes.length===0}getMatrixConcatenation(e,t){const i=nt.identity(),s=this.nodes;for(let r=e;r<t;r++)i.multiplyMatrix(s[r].getMatrix());return i}getMatrix(){return this.getMatrixConcatenation(0,this.nodes.length)}getAncestorMatrix(){return this.getMatrixConcatenation(1,this.nodes.length)}getParentMatrix(){return this.getMatrixConcatenation(0,this.nodes.length-1)}getAncestorParentMatrix(){return this.getMatrixConcatenation(1,this.nodes.length-1)}getTransform(){return new _r(this.getMatrix())}getParentTransform(){return new _r(this.getParentMatrix())}addAncestor(e,t){if(this.nodes.length){const i=this.nodes[0];this.indices.unshift(t===void 0?te.indexOf(e._children,i):t)}return this.nodes.unshift(e),this.length++,this.uniqueId=this.uniqueId?e.id+zg+this.uniqueId:`${e.id}`,this}removeAncestor(){return this.nodes.shift(),this.indices.length&&this.indices.shift(),this.length--,this.updateUniqueId(),this}addDescendant(e,t){if(this.nodes.length){const i=this.lastNode();this.indices.push(t===void 0?te.indexOf(i._children,e):t)}return this.nodes.push(e),this.length++,this.uniqueId=this.uniqueId?this.uniqueId+zg+e.id:`${e.id}`,this}removeDescendant(){return this.nodes.pop(),this.indices.length&&this.indices.pop(),this.length--,this.updateUniqueId(),this}addDescendantTrail(e){const t=e.length;t&&this.addDescendant(e.nodes[0]);for(let i=1;i<t;i++)this.addDescendant(e.nodes[i],this.indices[i-1])}removeDescendantTrail(e){const t=e.length;for(let i=t-1;i>=0;i--)this.removeDescendant()}reindex(){const e=this.length;for(let t=1;t<e;t++){const i=this.indices[t-1],s=this.nodes[t-1];s._children[i]!==this.nodes[t]&&(this.indices[t-1]=te.indexOf(s._children,this.nodes[t]))}}setImmutable(){return this}setMutable(){return this}areIndicesValid(){for(let e=1;e<this.length;e++){const t=this.indices[e-1];if(this.nodes[e-1]._children[t]!==this.nodes[e])return!1}return!0}equals(e){if(this.length!==e.length)return!1;for(let t=0;t<this.nodes.length;t++)if(this.nodes[t]!==e.nodes[t])return!1;return!0}upToNode(e){return te.indexOf(this.nodes,e),this.slice(0,te.indexOf(this.nodes,e)+1)}isExtensionOf(e,t){if(this.length<=e.length-(t?1:0))return!1;for(let i=0;i<e.nodes.length;i++)if(this.nodes[i]!==e.nodes[i])return!1;return!0}containsNode(e){return te.includes(this.nodes,e)}getTransformTo(e){return new _r(this.getMatrixTo(e))}getMatrixTo(e){this.reindex(),e.reindex();const t=this.getBranchIndexTo(e);let i,s=nt.IDENTITY;for(i=this.length-1;i>=t;i--)s=this.nodes[i].getMatrix().timesMatrix(s);for(i=t;i<e.length;i++)s=e.nodes[i].getTransform().getInverse().timesMatrix(s);return s}getBranchIndexTo(e){let t;const i=Math.min(this.length,e.length);for(t=0;t<i&&this.nodes[t]===e.nodes[t];t++);return t}getLastInputEnabledIndex(){let e=-1;for(let t=0;t<this.length&&this.nodes[t].inputEnabled;t++)e=t;return e}getCursorCheckIndex(){return this.getLastInputEnabledIndex()}nodeFromTop(e){return this.nodes[this.length-1-e]}lastNode(){return this.nodeFromTop(0)}rootNode(){return this.nodes[0]}previous(){if(this.nodes.length<=1)return null;const e=this.nodeFromTop(0),t=this.nodeFromTop(1),i=te.indexOf(t._children,e),s=this.nodes.slice(0,this.nodes.length-1);if(i===0)return new bi(s);for(s.push(t._children[i-1]);s[s.length-1]._children.length!==0;){const r=s[s.length-1];s.push(r._children[r._children.length-1])}return new bi(s)}previousPainted(){let e=this.previous();for(;e&&!e.isPainted();)e=e.previous();return e}next(){const e=this.nodes.slice(0),t=this.nodeFromTop(0);if(t._children.length>0)return e.push(t._children[0]),new bi(e);{let i=this.nodes.length-1;for(;i>0;){const s=this.nodes[i],r=this.nodes[i-1];e.pop();const o=te.indexOf(r._children,s);if(o!==r._children.length-1)return e.push(r._children[o+1]),new bi(e);i--}return null}}nextPainted(){let e=this.next();for(;e&&!e.isPainted();)e=e.next();return e}compare(e){const t=Math.min(this.nodes.length,e.nodes.length);for(let i=0;i<t;i++)if(this.nodes[i]!==e.nodes[i])return this.nodes[i-1].children.indexOf(this.nodes[i])<e.nodes[i-1].children.indexOf(e.nodes[i])?-1:1;return this.nodes.length<e.nodes.length?-1:this.nodes.length>e.nodes.length?1:0}isBefore(e){return this.compare(e)===-1}isAfter(e){return this.compare(e)===1}localToGlobalPoint(e){return this.getMatrix().timesVector2(e)}localToGlobalBounds(e){return e.transformed(this.getMatrix())}globalToLocalPoint(e){return this.getTransform().inversePosition2(e)}globalToLocalBounds(e){return this.getTransform().inverseBounds2(e)}parentToGlobalPoint(e){return this.getParentMatrix().timesVector2(e)}parentToGlobalBounds(e){return e.transformed(this.getParentMatrix())}globalToParentPoint(e){return this.getParentTransform().inversePosition2(e)}globalToParentBounds(e){return this.getParentTransform().inverseBounds2(e)}updateUniqueId(){let e="";const t=this.nodes.length;t>0&&(e+=this.nodes[0]._id);for(let i=1;i<t;i++)e+=zg+this.nodes[i]._id;this.uniqueId=e}getUniqueId(){return this.uniqueId}toString(){return this.reindex(),this.length?`[Trail ${this.indices.join(".")} ${this.getUniqueId()}]`:"Empty Trail"}toPathString(){return te.map(this.nodes,e=>{let t=e.constructor.name;return t==="Node"&&(t="."),t}).join("/")}toDebugString(){return`${this.toString()} ${this.toPathString()}`}static branchIndex(e,t){let i;const s=Math.min(e.length,t.length);for(i=0;i<s&&e.nodes[i]===t.nodes[i];i++);return i}static sharedTrail(e,t){return e.slice(0,bi.branchIndex(e,t))}static appendAncestorTrailsWithPredicate(e,t,i){const s=t.rootNode();i(s)&&e.push(t.copy());const r=s._parents.length;for(let o=0;o<r;o++){const c=s._parents[o];t.addAncestor(c),bi.appendAncestorTrailsWithPredicate(e,t,i),t.removeAncestor()}}static appendDescendantTrailsWithPredicate(e,t,i){const s=t.lastNode();i(s)&&e.push(t.copy());const r=s._children.length;for(let o=0;o<r;o++){const c=s._children[o];t.addDescendant(c,o),bi.appendDescendantTrailsWithPredicate(e,t,i),t.removeDescendant()}}static spannedSubtrees(e,t){}}const sL=(n,e)=>{const i=e.split(Yf).map(o=>Number(o));let s=n;i.shift();const r=[s];for(;i.length>0;){const o=i.shift(),p=(s.pdomOrder||[]).concat(s.children);for(let g=0;g<p.length;g++)if(p[g]!==null&&p[g].id===o){const A=p[g];r.push(A),s=A;break}}return new bi(r)},Hd=(n,e)=>Gu===jr.INDICES?n.getTrailFromPDOMIndicesString(e):sL(n.rootNode,e),In=new hi(null,{tandem:Xe.GENERAL_MODEL.createTandem("pdomFocusProperty"),phetioDocumentation:"Stores the current focus in the Parallel DOM, null if nothing has focus. This is not updated based on mouse or touch input, only keyboard and other alternative inputs. Note that this only applies to simulations that support alternative input.",phetioValueType:Zt(Ia.FocusIO),phetioState:!1,phetioFeatured:!0,phetioReadOnly:!0}),ac=()=>{let n=null;const e=In.value;return e&&(n=e.trail.lastNode()),n};function Ro(n){return typeof n=="object"&&n._isInteractiveHighlighting}class Ui{constructor(){this.pointerFocusProperty=new hi(null),this.readingBlockFocusProperty=new hi(null),this.lockedPointerFocusProperty=new hi(null),this.pdomFocusHighlightsVisibleProperty=new di(!0),this.interactiveHighlightsVisibleProperty=new di(!1),this.readingBlockHighlightsVisibleProperty=new di(!1),this.voicingFullyEnabledListener=e=>{this.readingBlockHighlightsVisibleProperty.value=e},al.voicingFullyEnabledProperty.link(this.voicingFullyEnabledListener),this.pointerHighlightsVisibleProperty=new Oi([this.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty],(e,t)=>e||t),this.readingBlockFocusController=new Rg(this.readingBlockFocusProperty),this.startSpeakingListener=(e,t)=>{this.readingBlockFocusProperty.value=t instanceof BA?t.readingBlockFocus:null},al.startSpeakingEmitter.addListener(this.startSpeakingListener),this.endSpeakingListener=(e,t)=>{t instanceof BA&&this.readingBlockFocusProperty.value&&t.readingBlockFocus.trail.equals(this.readingBlockFocusProperty.value.trail)&&(this.readingBlockFocusProperty.value=null)},al.endSpeakingEmitter.addListener(this.endSpeakingListener),this.pointerFocusDisplayedController=new Rg(this.pointerFocusProperty),this.lockedPointerFocusDisplayedController=new Rg(this.lockedPointerFocusProperty),[this.pointerFocusProperty,this.lockedPointerFocusProperty].forEach(e=>{e.link(this.onPointerFocusChange.bind(this))})}dispose(){this.pointerFocusProperty.dispose(),this.readingBlockFocusProperty.dispose(),this.lockedPointerFocusProperty.dispose(),this.pdomFocusHighlightsVisibleProperty.dispose(),this.interactiveHighlightsVisibleProperty.dispose(),this.readingBlockHighlightsVisibleProperty.dispose(),this.readingBlockFocusController.dispose(),this.pointerFocusDisplayedController.dispose(),this.pointerHighlightsVisibleProperty.dispose(),this.lockedPointerFocusDisplayedController.dispose(),al.startSpeakingEmitter.removeListener(this.startSpeakingListener),al.endSpeakingEmitter.removeListener(this.endSpeakingListener),al.voicingFullyEnabledProperty.unlink(this.voicingFullyEnabledListener)}static updatePDOMFocusFromEvent(e,t,i){if(i)for(let s=0;s<e.length;s++){const r=e[s],o=document.activeElement;if(r.isElementUnderPDOM(o,!1)){const c=o.getAttribute(Jt.DATA_PDOM_UNIQUE_ID),p=Hd(r,c),g=rc(p,r.rootNode);g.lastNode().focusable?Ui.pdomFocus=new Ia(r,g):(t.target.blur(),t.stopImmediatePropagation());break}}else for(let s=0;s<e.length;s++){const r=e[s],o=r._input.getRelatedTargetTrail(t);o&&o.lastNode().focusable?Ui.pdomFocus=new Ia(r,rc(o,r.rootNode)):Ui.pdomFocus=null}}onPointerFocusChange(e,t){const i=e==null?void 0:e.trail.lastNode();i&&Ro(i)&&i.handleHighlightActiveChange();const s=t==null?void 0:t.trail.lastNode();s&&Ro(s)&&s.handleHighlightActiveChange()}static set pdomFocus(e){if(In.value!==e){let t;In.value&&(t=ac()),In.value=e,t&&!e&&t.blur()}}static get pdomFocus(){return In.value}static attachToWindow(){Ui.attachedWindowFocusListener=()=>{Ui._windowHasFocusProperty.value=!0},Ui.attachedWindowBlurListener=()=>{Ui._windowHasFocusProperty.value=!1},self.addEventListener("focus",Ui.attachedWindowFocusListener),self.addEventListener("blur",Ui.attachedWindowBlurListener),Ui._windowHasFocusProperty.value=document.hasFocus(),Ui.globallyAttached=!0}static detachFromWindow(){self.removeEventListener("focus",Ui.attachedWindowFocusListener),self.removeEventListener("blur",Ui.attachedWindowBlurListener),Ui._windowHasFocusProperty.value=!1,Ui.globallyAttached=!1}}Ui.attachedWindowFocusListener=null;Ui.attachedWindowBlurListener=null;Ui.globallyAttached=!1;Ui._windowHasFocusProperty=new di(!1);Ui.windowHasFocusProperty=Ui._windowHasFocusProperty;class nL{constructor(e){this._focusWasInGroup=!1,this.focusInGroupProperty=new di(!1),this.focusTargetProperty=new hi(null),this.groupParent=e}focusin(e){this.focusInGroupProperty.value=!0,this.focusTargetProperty.value=e.target,this._focusWasInGroup=!0}focusout(e){var i;const t=(i=In.value)==null?void 0:i.trail;t&&t.containsNode(this.groupParent)||(this.focusInGroupProperty.value=!1,this.focusTargetProperty.value=null,this._focusWasInGroup=!1)}get focusWasInGroup(){return this._focusWasInGroup}dispose(){this.focusInGroupProperty.dispose(),this.focusTargetProperty.dispose()}}class Hg{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let i=this.length++;for(;i>0;){const s=i-1>>1,r=this.values[s];if(t>=r)break;this.ids[i]=this.ids[s],this.values[i]=r,i=s}this.ids[i]=e,this.values[i]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],i=this.values[0]=this.values[this.length],s=this.length>>1;let r=0;for(;r<s;){let o=(r<<1)+1;const c=o+1;let p=this.ids[o],g=this.values[o];const A=this.values[c];if(c<this.length&&A<g&&(o=c,p=this.ids[c],g=A),g>=i)break;this.ids[r]=p,this.values[r]=g,r=o}this.ids[r]=t,this.values[r]=i}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}function rL(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uv={exports:{}},wd={exports:{}},KA;function aL(){return KA||(KA=1,function(n,e){(function(t,i){i(e)})(zn,function(t){var i=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],s=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],r="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",o="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",c={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},p="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",g={5:p,"5module":p+" export import",6:p+" const class extends export import super"},A=/^in(stanceof)?$/,C=new RegExp("["+o+"]"),D=new RegExp("["+o+r+"]");function P(u,b){for(var O=65536,Q=0;Q<b.length;Q+=2){if(O+=b[Q],O>u)return!1;if(O+=b[Q+1],O>=u)return!0}return!1}function F(u,b){return u<65?u===36:u<91?!0:u<97?u===95:u<123?!0:u<=65535?u>=170&&C.test(String.fromCharCode(u)):b===!1?!1:P(u,s)}function K(u,b){return u<48?u===36:u<58?!0:u<65?!1:u<91?!0:u<97?u===95:u<123?!0:u<=65535?u>=170&&D.test(String.fromCharCode(u)):b===!1?!1:P(u,s)||P(u,i)}var M=function(b,O){O===void 0&&(O={}),this.label=b,this.keyword=O.keyword,this.beforeExpr=!!O.beforeExpr,this.startsExpr=!!O.startsExpr,this.isLoop=!!O.isLoop,this.isAssign=!!O.isAssign,this.prefix=!!O.prefix,this.postfix=!!O.postfix,this.binop=O.binop||null,this.updateContext=null};function U(u,b){return new M(u,{beforeExpr:!0,binop:b})}var $={beforeExpr:!0},re={startsExpr:!0},pe={};function ce(u,b){return b===void 0&&(b={}),b.keyword=u,pe[u]=new M(u,b)}var T={num:new M("num",re),regexp:new M("regexp",re),string:new M("string",re),name:new M("name",re),privateId:new M("privateId",re),eof:new M("eof"),bracketL:new M("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new M("]"),braceL:new M("{",{beforeExpr:!0,startsExpr:!0}),braceR:new M("}"),parenL:new M("(",{beforeExpr:!0,startsExpr:!0}),parenR:new M(")"),comma:new M(",",$),semi:new M(";",$),colon:new M(":",$),dot:new M("."),question:new M("?",$),questionDot:new M("?."),arrow:new M("=>",$),template:new M("template"),invalidTemplate:new M("invalidTemplate"),ellipsis:new M("...",$),backQuote:new M("`",re),dollarBraceL:new M("${",{beforeExpr:!0,startsExpr:!0}),eq:new M("=",{beforeExpr:!0,isAssign:!0}),assign:new M("_=",{beforeExpr:!0,isAssign:!0}),incDec:new M("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new M("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:U("||",1),logicalAND:U("&&",2),bitwiseOR:U("|",3),bitwiseXOR:U("^",4),bitwiseAND:U("&",5),equality:U("==/!=/===/!==",6),relational:U("</>/<=/>=",7),bitShift:U("<</>>/>>>",8),plusMin:new M("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:U("%",10),star:U("*",10),slash:U("/",10),starstar:new M("**",{beforeExpr:!0}),coalesce:U("??",1),_break:ce("break"),_case:ce("case",$),_catch:ce("catch"),_continue:ce("continue"),_debugger:ce("debugger"),_default:ce("default",$),_do:ce("do",{isLoop:!0,beforeExpr:!0}),_else:ce("else",$),_finally:ce("finally"),_for:ce("for",{isLoop:!0}),_function:ce("function",re),_if:ce("if"),_return:ce("return",$),_switch:ce("switch"),_throw:ce("throw",$),_try:ce("try"),_var:ce("var"),_const:ce("const"),_while:ce("while",{isLoop:!0}),_with:ce("with"),_new:ce("new",{beforeExpr:!0,startsExpr:!0}),_this:ce("this",re),_super:ce("super",re),_class:ce("class",re),_extends:ce("extends",$),_export:ce("export"),_import:ce("import",re),_null:ce("null",re),_true:ce("true",re),_false:ce("false",re),_in:ce("in",{beforeExpr:!0,binop:7}),_instanceof:ce("instanceof",{beforeExpr:!0,binop:7}),_typeof:ce("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ce("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ce("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ce=/\r\n?|\n|\u2028|\u2029/,ze=new RegExp(Ce.source,"g");function be(u){return u===10||u===13||u===8232||u===8233}function Be(u,b,O){O===void 0&&(O=u.length);for(var Q=b;Q<O;Q++){var ue=u.charCodeAt(Q);if(be(ue))return Q<O-1&&ue===13&&u.charCodeAt(Q+1)===10?Q+2:Q+1}return-1}var xe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Qe=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Fe=Object.prototype,Ye=Fe.hasOwnProperty,ut=Fe.toString,Me=Object.hasOwn||function(u,b){return Ye.call(u,b)},Lt=Array.isArray||function(u){return ut.call(u)==="[object Array]"},at=Object.create(null);function Pe(u){return at[u]||(at[u]=new RegExp("^(?:"+u.replace(/ /g,"|")+")$"))}function $e(u){return u<=65535?String.fromCharCode(u):(u-=65536,String.fromCharCode((u>>10)+55296,(u&1023)+56320))}var gt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,oi=function(b,O){this.line=b,this.column=O};oi.prototype.offset=function(b){return new oi(this.line,this.column+b)};var Mt=function(b,O,Q){this.start=O,this.end=Q,b.sourceFile!==null&&(this.source=b.sourceFile)};function Ni(u,b){for(var O=1,Q=0;;){var ue=Be(u,Q,b);if(ue<0)return new oi(O,b-Q);++O,Q=ue}}var qt={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},as=!1;function qi(u){var b={};for(var O in qt)b[O]=u&&Me(u,O)?u[O]:qt[O];if(b.ecmaVersion==="latest"?b.ecmaVersion=1e8:b.ecmaVersion==null?(!as&&typeof console=="object"&&console.warn&&(as=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),b.ecmaVersion=11):b.ecmaVersion>=2015&&(b.ecmaVersion-=2009),b.allowReserved==null&&(b.allowReserved=b.ecmaVersion<5),(!u||u.allowHashBang==null)&&(b.allowHashBang=b.ecmaVersion>=14),Lt(b.onToken)){var Q=b.onToken;b.onToken=function(ue){return Q.push(ue)}}return Lt(b.onComment)&&(b.onComment=Vs(b,b.onComment)),b}function Vs(u,b){return function(O,Q,ue,ke,Oe,pt){var _t={type:O?"Block":"Line",value:Q,start:ue,end:ke};u.locations&&(_t.loc=new Mt(this,Oe,pt)),u.ranges&&(_t.range=[ue,ke]),b.push(_t)}}var Gt=1,fi=2,ft=4,vn=8,Ps=16,Ki=32,js=64,V=128,ae=256,le=512,me=Gt|fi|ae;function ve(u,b){return fi|(u?ft:0)|(b?vn:0)}var rt=0,Ue=1,je=2,xn=3,Rt=4,a=5,h=function(b,O,Q){this.options=b=qi(b),this.sourceFile=b.sourceFile,this.keywords=Pe(g[b.ecmaVersion>=6?6:b.sourceType==="module"?"5module":5]);var ue="";b.allowReserved!==!0&&(ue=c[b.ecmaVersion>=6?6:b.ecmaVersion===5?5:3],b.sourceType==="module"&&(ue+=" await")),this.reservedWords=Pe(ue);var ke=(ue?ue+" ":"")+c.strict;this.reservedWordsStrict=Pe(ke),this.reservedWordsStrictBind=Pe(ke+" "+c.strictBind),this.input=String(O),this.containsEsc=!1,Q?(this.pos=Q,this.lineStart=this.input.lastIndexOf(`
`,Q-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ce).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=T.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=b.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&b.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Gt),this.regexpState=null,this.privateNameStack=[]},d={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};h.prototype.parse=function(){var b=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(b)},d.inFunction.get=function(){return(this.currentVarScope().flags&fi)>0},d.inGenerator.get=function(){return(this.currentVarScope().flags&vn)>0},d.inAsync.get=function(){return(this.currentVarScope().flags&ft)>0},d.canAwait.get=function(){for(var u=this.scopeStack.length-1;u>=0;u--){var b=this.scopeStack[u],O=b.flags;if(O&(ae|le))return!1;if(O&fi)return(O&ft)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},d.allowSuper.get=function(){var u=this.currentThisScope(),b=u.flags;return(b&js)>0||this.options.allowSuperOutsideMethod},d.allowDirectSuper.get=function(){return(this.currentThisScope().flags&V)>0},d.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},d.allowNewDotTarget.get=function(){for(var u=this.scopeStack.length-1;u>=0;u--){var b=this.scopeStack[u],O=b.flags;if(O&(ae|le)||O&fi&&!(O&Ps))return!0}return!1},d.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&ae)>0},h.extend=function(){for(var b=[],O=arguments.length;O--;)b[O]=arguments[O];for(var Q=this,ue=0;ue<b.length;ue++)Q=b[ue](Q);return Q},h.parse=function(b,O){return new this(O,b).parse()},h.parseExpressionAt=function(b,O,Q){var ue=new this(Q,b,O);return ue.nextToken(),ue.parseExpression()},h.tokenizer=function(b,O){return new this(O,b)},Object.defineProperties(h.prototype,d);var m=h.prototype,y=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;m.strictDirective=function(u){if(this.options.ecmaVersion<5)return!1;for(;;){Qe.lastIndex=u,u+=Qe.exec(this.input)[0].length;var b=y.exec(this.input.slice(u));if(!b)return!1;if((b[1]||b[2])==="use strict"){Qe.lastIndex=u+b[0].length;var O=Qe.exec(this.input),Q=O.index+O[0].length,ue=this.input.charAt(Q);return ue===";"||ue==="}"||Ce.test(O[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(ue)||ue==="!"&&this.input.charAt(Q+1)==="=")}u+=b[0].length,Qe.lastIndex=u,u+=Qe.exec(this.input)[0].length,this.input[u]===";"&&u++}},m.eat=function(u){return this.type===u?(this.next(),!0):!1},m.isContextual=function(u){return this.type===T.name&&this.value===u&&!this.containsEsc},m.eatContextual=function(u){return this.isContextual(u)?(this.next(),!0):!1},m.expectContextual=function(u){this.eatContextual(u)||this.unexpected()},m.canInsertSemicolon=function(){return this.type===T.eof||this.type===T.braceR||Ce.test(this.input.slice(this.lastTokEnd,this.start))},m.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},m.semicolon=function(){!this.eat(T.semi)&&!this.insertSemicolon()&&this.unexpected()},m.afterTrailingComma=function(u,b){if(this.type===u)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),b||this.next(),!0},m.expect=function(u){this.eat(u)||this.unexpected()},m.unexpected=function(u){this.raise(u??this.start,"Unexpected token")};var v=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};m.checkPatternErrors=function(u,b){if(u){u.trailingComma>-1&&this.raiseRecoverable(u.trailingComma,"Comma is not permitted after the rest element");var O=b?u.parenthesizedAssign:u.parenthesizedBind;O>-1&&this.raiseRecoverable(O,b?"Assigning to rvalue":"Parenthesized pattern")}},m.checkExpressionErrors=function(u,b){if(!u)return!1;var O=u.shorthandAssign,Q=u.doubleProto;if(!b)return O>=0||Q>=0;O>=0&&this.raise(O,"Shorthand property assignments are valid only in destructuring patterns"),Q>=0&&this.raiseRecoverable(Q,"Redefinition of __proto__ property")},m.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},m.isSimpleAssignTarget=function(u){return u.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(u.expression):u.type==="Identifier"||u.type==="MemberExpression"};var S=h.prototype;S.parseTopLevel=function(u){var b=Object.create(null);for(u.body||(u.body=[]);this.type!==T.eof;){var O=this.parseStatement(null,!0,b);u.body.push(O)}if(this.inModule)for(var Q=0,ue=Object.keys(this.undefinedExports);Q<ue.length;Q+=1){var ke=ue[Q];this.raiseRecoverable(this.undefinedExports[ke].start,"Export '"+ke+"' is not defined")}return this.adaptDirectivePrologue(u.body),this.next(),u.sourceType=this.options.sourceType,this.finishNode(u,"Program")};var w={kind:"loop"},E={kind:"switch"};S.isLet=function(u){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Qe.lastIndex=this.pos;var b=Qe.exec(this.input),O=this.pos+b[0].length,Q=this.input.charCodeAt(O);if(Q===91||Q===92)return!0;if(u)return!1;if(Q===123||Q>55295&&Q<56320)return!0;if(F(Q,!0)){for(var ue=O+1;K(Q=this.input.charCodeAt(ue),!0);)++ue;if(Q===92||Q>55295&&Q<56320)return!0;var ke=this.input.slice(O,ue);if(!A.test(ke))return!0}return!1},S.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Qe.lastIndex=this.pos;var u=Qe.exec(this.input),b=this.pos+u[0].length,O;return!Ce.test(this.input.slice(this.pos,b))&&this.input.slice(b,b+8)==="function"&&(b+8===this.input.length||!(K(O=this.input.charCodeAt(b+8))||O>55295&&O<56320))},S.parseStatement=function(u,b,O){var Q=this.type,ue=this.startNode(),ke;switch(this.isLet(u)&&(Q=T._var,ke="let"),Q){case T._break:case T._continue:return this.parseBreakContinueStatement(ue,Q.keyword);case T._debugger:return this.parseDebuggerStatement(ue);case T._do:return this.parseDoStatement(ue);case T._for:return this.parseForStatement(ue);case T._function:return u&&(this.strict||u!=="if"&&u!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(ue,!1,!u);case T._class:return u&&this.unexpected(),this.parseClass(ue,!0);case T._if:return this.parseIfStatement(ue);case T._return:return this.parseReturnStatement(ue);case T._switch:return this.parseSwitchStatement(ue);case T._throw:return this.parseThrowStatement(ue);case T._try:return this.parseTryStatement(ue);case T._const:case T._var:return ke=ke||this.value,u&&ke!=="var"&&this.unexpected(),this.parseVarStatement(ue,ke);case T._while:return this.parseWhileStatement(ue);case T._with:return this.parseWithStatement(ue);case T.braceL:return this.parseBlock(!0,ue);case T.semi:return this.parseEmptyStatement(ue);case T._export:case T._import:if(this.options.ecmaVersion>10&&Q===T._import){Qe.lastIndex=this.pos;var Oe=Qe.exec(this.input),pt=this.pos+Oe[0].length,_t=this.input.charCodeAt(pt);if(_t===40||_t===46)return this.parseExpressionStatement(ue,this.parseExpression())}return this.options.allowImportExportEverywhere||(b||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),Q===T._import?this.parseImport(ue):this.parseExport(ue,O);default:if(this.isAsyncFunction())return u&&this.unexpected(),this.next(),this.parseFunctionStatement(ue,!0,!u);var ni=this.value,Pt=this.parseExpression();return Q===T.name&&Pt.type==="Identifier"&&this.eat(T.colon)?this.parseLabeledStatement(ue,ni,Pt,u):this.parseExpressionStatement(ue,Pt)}},S.parseBreakContinueStatement=function(u,b){var O=b==="break";this.next(),this.eat(T.semi)||this.insertSemicolon()?u.label=null:this.type!==T.name?this.unexpected():(u.label=this.parseIdent(),this.semicolon());for(var Q=0;Q<this.labels.length;++Q){var ue=this.labels[Q];if((u.label==null||ue.name===u.label.name)&&(ue.kind!=null&&(O||ue.kind==="loop")||u.label&&O))break}return Q===this.labels.length&&this.raise(u.start,"Unsyntactic "+b),this.finishNode(u,O?"BreakStatement":"ContinueStatement")},S.parseDebuggerStatement=function(u){return this.next(),this.semicolon(),this.finishNode(u,"DebuggerStatement")},S.parseDoStatement=function(u){return this.next(),this.labels.push(w),u.body=this.parseStatement("do"),this.labels.pop(),this.expect(T._while),u.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(T.semi):this.semicolon(),this.finishNode(u,"DoWhileStatement")},S.parseForStatement=function(u){this.next();var b=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(w),this.enterScope(0),this.expect(T.parenL),this.type===T.semi)return b>-1&&this.unexpected(b),this.parseFor(u,null);var O=this.isLet();if(this.type===T._var||this.type===T._const||O){var Q=this.startNode(),ue=O?"let":this.value;return this.next(),this.parseVar(Q,!0,ue),this.finishNode(Q,"VariableDeclaration"),(this.type===T._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&Q.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===T._in?b>-1&&this.unexpected(b):u.await=b>-1),this.parseForIn(u,Q)):(b>-1&&this.unexpected(b),this.parseFor(u,Q))}var ke=this.isContextual("let"),Oe=!1,pt=this.containsEsc,_t=new v,ni=this.start,Pt=b>-1?this.parseExprSubscripts(_t,"await"):this.parseExpression(!0,_t);return this.type===T._in||(Oe=this.options.ecmaVersion>=6&&this.isContextual("of"))?(b>-1?(this.type===T._in&&this.unexpected(b),u.await=!0):Oe&&this.options.ecmaVersion>=8&&(Pt.start===ni&&!pt&&Pt.type==="Identifier"&&Pt.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(u.await=!1)),ke&&Oe&&this.raise(Pt.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Pt,!1,_t),this.checkLValPattern(Pt),this.parseForIn(u,Pt)):(this.checkExpressionErrors(_t,!0),b>-1&&this.unexpected(b),this.parseFor(u,Pt))},S.parseFunctionStatement=function(u,b,O){return this.next(),this.parseFunction(u,N|(O?0:q),!1,b)},S.parseIfStatement=function(u){return this.next(),u.test=this.parseParenExpression(),u.consequent=this.parseStatement("if"),u.alternate=this.eat(T._else)?this.parseStatement("if"):null,this.finishNode(u,"IfStatement")},S.parseReturnStatement=function(u){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(T.semi)||this.insertSemicolon()?u.argument=null:(u.argument=this.parseExpression(),this.semicolon()),this.finishNode(u,"ReturnStatement")},S.parseSwitchStatement=function(u){this.next(),u.discriminant=this.parseParenExpression(),u.cases=[],this.expect(T.braceL),this.labels.push(E),this.enterScope(0);for(var b,O=!1;this.type!==T.braceR;)if(this.type===T._case||this.type===T._default){var Q=this.type===T._case;b&&this.finishNode(b,"SwitchCase"),u.cases.push(b=this.startNode()),b.consequent=[],this.next(),Q?b.test=this.parseExpression():(O&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),O=!0,b.test=null),this.expect(T.colon)}else b||this.unexpected(),b.consequent.push(this.parseStatement(null));return this.exitScope(),b&&this.finishNode(b,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(u,"SwitchStatement")},S.parseThrowStatement=function(u){return this.next(),Ce.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),u.argument=this.parseExpression(),this.semicolon(),this.finishNode(u,"ThrowStatement")};var I=[];S.parseCatchClauseParam=function(){var u=this.parseBindingAtom(),b=u.type==="Identifier";return this.enterScope(b?Ki:0),this.checkLValPattern(u,b?Rt:je),this.expect(T.parenR),u},S.parseTryStatement=function(u){if(this.next(),u.block=this.parseBlock(),u.handler=null,this.type===T._catch){var b=this.startNode();this.next(),this.eat(T.parenL)?b.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),b.param=null,this.enterScope(0)),b.body=this.parseBlock(!1),this.exitScope(),u.handler=this.finishNode(b,"CatchClause")}return u.finalizer=this.eat(T._finally)?this.parseBlock():null,!u.handler&&!u.finalizer&&this.raise(u.start,"Missing catch or finally clause"),this.finishNode(u,"TryStatement")},S.parseVarStatement=function(u,b,O){return this.next(),this.parseVar(u,!1,b,O),this.semicolon(),this.finishNode(u,"VariableDeclaration")},S.parseWhileStatement=function(u){return this.next(),u.test=this.parseParenExpression(),this.labels.push(w),u.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(u,"WhileStatement")},S.parseWithStatement=function(u){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),u.object=this.parseParenExpression(),u.body=this.parseStatement("with"),this.finishNode(u,"WithStatement")},S.parseEmptyStatement=function(u){return this.next(),this.finishNode(u,"EmptyStatement")},S.parseLabeledStatement=function(u,b,O,Q){for(var ue=0,ke=this.labels;ue<ke.length;ue+=1){var Oe=ke[ue];Oe.name===b&&this.raise(O.start,"Label '"+b+"' is already declared")}for(var pt=this.type.isLoop?"loop":this.type===T._switch?"switch":null,_t=this.labels.length-1;_t>=0;_t--){var ni=this.labels[_t];if(ni.statementStart===u.start)ni.statementStart=this.start,ni.kind=pt;else break}return this.labels.push({name:b,kind:pt,statementStart:this.start}),u.body=this.parseStatement(Q?Q.indexOf("label")===-1?Q+"label":Q:"label"),this.labels.pop(),u.label=O,this.finishNode(u,"LabeledStatement")},S.parseExpressionStatement=function(u,b){return u.expression=b,this.semicolon(),this.finishNode(u,"ExpressionStatement")},S.parseBlock=function(u,b,O){for(u===void 0&&(u=!0),b===void 0&&(b=this.startNode()),b.body=[],this.expect(T.braceL),u&&this.enterScope(0);this.type!==T.braceR;){var Q=this.parseStatement(null);b.body.push(Q)}return O&&(this.strict=!1),this.next(),u&&this.exitScope(),this.finishNode(b,"BlockStatement")},S.parseFor=function(u,b){return u.init=b,this.expect(T.semi),u.test=this.type===T.semi?null:this.parseExpression(),this.expect(T.semi),u.update=this.type===T.parenR?null:this.parseExpression(),this.expect(T.parenR),u.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(u,"ForStatement")},S.parseForIn=function(u,b){var O=this.type===T._in;return this.next(),b.type==="VariableDeclaration"&&b.declarations[0].init!=null&&(!O||this.options.ecmaVersion<8||this.strict||b.kind!=="var"||b.declarations[0].id.type!=="Identifier")&&this.raise(b.start,(O?"for-in":"for-of")+" loop variable declaration may not have an initializer"),u.left=b,u.right=O?this.parseExpression():this.parseMaybeAssign(),this.expect(T.parenR),u.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(u,O?"ForInStatement":"ForOfStatement")},S.parseVar=function(u,b,O,Q){for(u.declarations=[],u.kind=O;;){var ue=this.startNode();if(this.parseVarId(ue,O),this.eat(T.eq)?ue.init=this.parseMaybeAssign(b):!Q&&O==="const"&&!(this.type===T._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!Q&&ue.id.type!=="Identifier"&&!(b&&(this.type===T._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):ue.init=null,u.declarations.push(this.finishNode(ue,"VariableDeclarator")),!this.eat(T.comma))break}return u},S.parseVarId=function(u,b){u.id=this.parseBindingAtom(),this.checkLValPattern(u.id,b==="var"?Ue:je,!1)};var N=1,q=2,B=4;S.parseFunction=function(u,b,O,Q,ue){this.initFunction(u),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!Q)&&(this.type===T.star&&b&q&&this.unexpected(),u.generator=this.eat(T.star)),this.options.ecmaVersion>=8&&(u.async=!!Q),b&N&&(u.id=b&B&&this.type!==T.name?null:this.parseIdent(),u.id&&!(b&q)&&this.checkLValSimple(u.id,this.strict||u.generator||u.async?this.treatFunctionsAsVar?Ue:je:xn));var ke=this.yieldPos,Oe=this.awaitPos,pt=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ve(u.async,u.generator)),b&N||(u.id=this.type===T.name?this.parseIdent():null),this.parseFunctionParams(u),this.parseFunctionBody(u,O,!1,ue),this.yieldPos=ke,this.awaitPos=Oe,this.awaitIdentPos=pt,this.finishNode(u,b&N?"FunctionDeclaration":"FunctionExpression")},S.parseFunctionParams=function(u){this.expect(T.parenL),u.params=this.parseBindingList(T.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},S.parseClass=function(u,b){this.next();var O=this.strict;this.strict=!0,this.parseClassId(u,b),this.parseClassSuper(u);var Q=this.enterClassBody(),ue=this.startNode(),ke=!1;for(ue.body=[],this.expect(T.braceL);this.type!==T.braceR;){var Oe=this.parseClassElement(u.superClass!==null);Oe&&(ue.body.push(Oe),Oe.type==="MethodDefinition"&&Oe.kind==="constructor"?(ke&&this.raiseRecoverable(Oe.start,"Duplicate constructor in the same class"),ke=!0):Oe.key&&Oe.key.type==="PrivateIdentifier"&&k(Q,Oe)&&this.raiseRecoverable(Oe.key.start,"Identifier '#"+Oe.key.name+"' has already been declared"))}return this.strict=O,this.next(),u.body=this.finishNode(ue,"ClassBody"),this.exitClassBody(),this.finishNode(u,b?"ClassDeclaration":"ClassExpression")},S.parseClassElement=function(u){if(this.eat(T.semi))return null;var b=this.options.ecmaVersion,O=this.startNode(),Q="",ue=!1,ke=!1,Oe="method",pt=!1;if(this.eatContextual("static")){if(b>=13&&this.eat(T.braceL))return this.parseClassStaticBlock(O),O;this.isClassElementNameStart()||this.type===T.star?pt=!0:Q="static"}if(O.static=pt,!Q&&b>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===T.star)&&!this.canInsertSemicolon()?ke=!0:Q="async"),!Q&&(b>=9||!ke)&&this.eat(T.star)&&(ue=!0),!Q&&!ke&&!ue){var _t=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Oe=_t:Q=_t)}if(Q?(O.computed=!1,O.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),O.key.name=Q,this.finishNode(O.key,"Identifier")):this.parseClassElementName(O),b<13||this.type===T.parenL||Oe!=="method"||ue||ke){var ni=!O.static&&X(O,"constructor"),Pt=ni&&u;ni&&Oe!=="method"&&this.raise(O.key.start,"Constructor can't have get/set modifier"),O.kind=ni?"constructor":Oe,this.parseClassMethod(O,ue,ke,Pt)}else this.parseClassField(O);return O},S.isClassElementNameStart=function(){return this.type===T.name||this.type===T.privateId||this.type===T.num||this.type===T.string||this.type===T.bracketL||this.type.keyword},S.parseClassElementName=function(u){this.type===T.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),u.computed=!1,u.key=this.parsePrivateIdent()):this.parsePropertyName(u)},S.parseClassMethod=function(u,b,O,Q){var ue=u.key;u.kind==="constructor"?(b&&this.raise(ue.start,"Constructor can't be a generator"),O&&this.raise(ue.start,"Constructor can't be an async method")):u.static&&X(u,"prototype")&&this.raise(ue.start,"Classes may not have a static property named prototype");var ke=u.value=this.parseMethod(b,O,Q);return u.kind==="get"&&ke.params.length!==0&&this.raiseRecoverable(ke.start,"getter should have no params"),u.kind==="set"&&ke.params.length!==1&&this.raiseRecoverable(ke.start,"setter should have exactly one param"),u.kind==="set"&&ke.params[0].type==="RestElement"&&this.raiseRecoverable(ke.params[0].start,"Setter cannot use rest params"),this.finishNode(u,"MethodDefinition")},S.parseClassField=function(u){return X(u,"constructor")?this.raise(u.key.start,"Classes can't have a field named 'constructor'"):u.static&&X(u,"prototype")&&this.raise(u.key.start,"Classes can't have a static field named 'prototype'"),this.eat(T.eq)?(this.enterScope(le|js),u.value=this.parseMaybeAssign(),this.exitScope()):u.value=null,this.semicolon(),this.finishNode(u,"PropertyDefinition")},S.parseClassStaticBlock=function(u){u.body=[];var b=this.labels;for(this.labels=[],this.enterScope(ae|js);this.type!==T.braceR;){var O=this.parseStatement(null);u.body.push(O)}return this.next(),this.exitScope(),this.labels=b,this.finishNode(u,"StaticBlock")},S.parseClassId=function(u,b){this.type===T.name?(u.id=this.parseIdent(),b&&this.checkLValSimple(u.id,je,!1)):(b===!0&&this.unexpected(),u.id=null)},S.parseClassSuper=function(u){u.superClass=this.eat(T._extends)?this.parseExprSubscripts(null,!1):null},S.enterClassBody=function(){var u={declared:Object.create(null),used:[]};return this.privateNameStack.push(u),u.declared},S.exitClassBody=function(){var u=this.privateNameStack.pop(),b=u.declared,O=u.used;if(this.options.checkPrivateFields)for(var Q=this.privateNameStack.length,ue=Q===0?null:this.privateNameStack[Q-1],ke=0;ke<O.length;++ke){var Oe=O[ke];Me(b,Oe.name)||(ue?ue.used.push(Oe):this.raiseRecoverable(Oe.start,"Private field '#"+Oe.name+"' must be declared in an enclosing class"))}};function k(u,b){var O=b.key.name,Q=u[O],ue="true";return b.type==="MethodDefinition"&&(b.kind==="get"||b.kind==="set")&&(ue=(b.static?"s":"i")+b.kind),Q==="iget"&&ue==="iset"||Q==="iset"&&ue==="iget"||Q==="sget"&&ue==="sset"||Q==="sset"&&ue==="sget"?(u[O]="true",!1):Q?!0:(u[O]=ue,!1)}function X(u,b){var O=u.computed,Q=u.key;return!O&&(Q.type==="Identifier"&&Q.name===b||Q.type==="Literal"&&Q.value===b)}S.parseExportAllDeclaration=function(u,b){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(u.exported=this.parseModuleExportName(),this.checkExport(b,u.exported,this.lastTokStart)):u.exported=null),this.expectContextual("from"),this.type!==T.string&&this.unexpected(),u.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(u.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(u,"ExportAllDeclaration")},S.parseExport=function(u,b){if(this.next(),this.eat(T.star))return this.parseExportAllDeclaration(u,b);if(this.eat(T._default))return this.checkExport(b,"default",this.lastTokStart),u.declaration=this.parseExportDefaultDeclaration(),this.finishNode(u,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())u.declaration=this.parseExportDeclaration(u),u.declaration.type==="VariableDeclaration"?this.checkVariableExport(b,u.declaration.declarations):this.checkExport(b,u.declaration.id,u.declaration.id.start),u.specifiers=[],u.source=null,this.options.ecmaVersion>=16&&(u.attributes=[]);else{if(u.declaration=null,u.specifiers=this.parseExportSpecifiers(b),this.eatContextual("from"))this.type!==T.string&&this.unexpected(),u.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(u.attributes=this.parseWithClause());else{for(var O=0,Q=u.specifiers;O<Q.length;O+=1){var ue=Q[O];this.checkUnreserved(ue.local),this.checkLocalExport(ue.local),ue.local.type==="Literal"&&this.raise(ue.local.start,"A string literal cannot be used as an exported binding without `from`.")}u.source=null,this.options.ecmaVersion>=16&&(u.attributes=[])}this.semicolon()}return this.finishNode(u,"ExportNamedDeclaration")},S.parseExportDeclaration=function(u){return this.parseStatement(null)},S.parseExportDefaultDeclaration=function(){var u;if(this.type===T._function||(u=this.isAsyncFunction())){var b=this.startNode();return this.next(),u&&this.next(),this.parseFunction(b,N|B,!1,u)}else if(this.type===T._class){var O=this.startNode();return this.parseClass(O,"nullableID")}else{var Q=this.parseMaybeAssign();return this.semicolon(),Q}},S.checkExport=function(u,b,O){u&&(typeof b!="string"&&(b=b.type==="Identifier"?b.name:b.value),Me(u,b)&&this.raiseRecoverable(O,"Duplicate export '"+b+"'"),u[b]=!0)},S.checkPatternExport=function(u,b){var O=b.type;if(O==="Identifier")this.checkExport(u,b,b.start);else if(O==="ObjectPattern")for(var Q=0,ue=b.properties;Q<ue.length;Q+=1){var ke=ue[Q];this.checkPatternExport(u,ke)}else if(O==="ArrayPattern")for(var Oe=0,pt=b.elements;Oe<pt.length;Oe+=1){var _t=pt[Oe];_t&&this.checkPatternExport(u,_t)}else O==="Property"?this.checkPatternExport(u,b.value):O==="AssignmentPattern"?this.checkPatternExport(u,b.left):O==="RestElement"&&this.checkPatternExport(u,b.argument)},S.checkVariableExport=function(u,b){if(u)for(var O=0,Q=b;O<Q.length;O+=1){var ue=Q[O];this.checkPatternExport(u,ue.id)}},S.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},S.parseExportSpecifier=function(u){var b=this.startNode();return b.local=this.parseModuleExportName(),b.exported=this.eatContextual("as")?this.parseModuleExportName():b.local,this.checkExport(u,b.exported,b.exported.start),this.finishNode(b,"ExportSpecifier")},S.parseExportSpecifiers=function(u){var b=[],O=!0;for(this.expect(T.braceL);!this.eat(T.braceR);){if(O)O=!1;else if(this.expect(T.comma),this.afterTrailingComma(T.braceR))break;b.push(this.parseExportSpecifier(u))}return b},S.parseImport=function(u){return this.next(),this.type===T.string?(u.specifiers=I,u.source=this.parseExprAtom()):(u.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),u.source=this.type===T.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(u.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(u,"ImportDeclaration")},S.parseImportSpecifier=function(){var u=this.startNode();return u.imported=this.parseModuleExportName(),this.eatContextual("as")?u.local=this.parseIdent():(this.checkUnreserved(u.imported),u.local=u.imported),this.checkLValSimple(u.local,je),this.finishNode(u,"ImportSpecifier")},S.parseImportDefaultSpecifier=function(){var u=this.startNode();return u.local=this.parseIdent(),this.checkLValSimple(u.local,je),this.finishNode(u,"ImportDefaultSpecifier")},S.parseImportNamespaceSpecifier=function(){var u=this.startNode();return this.next(),this.expectContextual("as"),u.local=this.parseIdent(),this.checkLValSimple(u.local,je),this.finishNode(u,"ImportNamespaceSpecifier")},S.parseImportSpecifiers=function(){var u=[],b=!0;if(this.type===T.name&&(u.push(this.parseImportDefaultSpecifier()),!this.eat(T.comma)))return u;if(this.type===T.star)return u.push(this.parseImportNamespaceSpecifier()),u;for(this.expect(T.braceL);!this.eat(T.braceR);){if(b)b=!1;else if(this.expect(T.comma),this.afterTrailingComma(T.braceR))break;u.push(this.parseImportSpecifier())}return u},S.parseWithClause=function(){var u=[];if(!this.eat(T._with))return u;this.expect(T.braceL);for(var b={},O=!0;!this.eat(T.braceR);){if(O)O=!1;else if(this.expect(T.comma),this.afterTrailingComma(T.braceR))break;var Q=this.parseImportAttribute(),ue=Q.key.type==="Identifier"?Q.key.name:Q.key.value;Me(b,ue)&&this.raiseRecoverable(Q.key.start,"Duplicate attribute key '"+ue+"'"),b[ue]=!0,u.push(Q)}return u},S.parseImportAttribute=function(){var u=this.startNode();return u.key=this.type===T.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(T.colon),this.type!==T.string&&this.unexpected(),u.value=this.parseExprAtom(),this.finishNode(u,"ImportAttribute")},S.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===T.string){var u=this.parseLiteral(this.value);return gt.test(u.value)&&this.raise(u.start,"An export name cannot include a lone surrogate."),u}return this.parseIdent(!0)},S.adaptDirectivePrologue=function(u){for(var b=0;b<u.length&&this.isDirectiveCandidate(u[b]);++b)u[b].directive=u[b].expression.raw.slice(1,-1)},S.isDirectiveCandidate=function(u){return this.options.ecmaVersion>=5&&u.type==="ExpressionStatement"&&u.expression.type==="Literal"&&typeof u.expression.value=="string"&&(this.input[u.start]==='"'||this.input[u.start]==="'")};var z=h.prototype;z.toAssignable=function(u,b,O){if(this.options.ecmaVersion>=6&&u)switch(u.type){case"Identifier":this.inAsync&&u.name==="await"&&this.raise(u.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":u.type="ObjectPattern",O&&this.checkPatternErrors(O,!0);for(var Q=0,ue=u.properties;Q<ue.length;Q+=1){var ke=ue[Q];this.toAssignable(ke,b),ke.type==="RestElement"&&(ke.argument.type==="ArrayPattern"||ke.argument.type==="ObjectPattern")&&this.raise(ke.argument.start,"Unexpected token")}break;case"Property":u.kind!=="init"&&this.raise(u.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(u.value,b);break;case"ArrayExpression":u.type="ArrayPattern",O&&this.checkPatternErrors(O,!0),this.toAssignableList(u.elements,b);break;case"SpreadElement":u.type="RestElement",this.toAssignable(u.argument,b),u.argument.type==="AssignmentPattern"&&this.raise(u.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":u.operator!=="="&&this.raise(u.left.end,"Only '=' operator can be used for specifying default value."),u.type="AssignmentPattern",delete u.operator,this.toAssignable(u.left,b);break;case"ParenthesizedExpression":this.toAssignable(u.expression,b,O);break;case"ChainExpression":this.raiseRecoverable(u.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!b)break;default:this.raise(u.start,"Assigning to rvalue")}else O&&this.checkPatternErrors(O,!0);return u},z.toAssignableList=function(u,b){for(var O=u.length,Q=0;Q<O;Q++){var ue=u[Q];ue&&this.toAssignable(ue,b)}if(O){var ke=u[O-1];this.options.ecmaVersion===6&&b&&ke&&ke.type==="RestElement"&&ke.argument.type!=="Identifier"&&this.unexpected(ke.argument.start)}return u},z.parseSpread=function(u){var b=this.startNode();return this.next(),b.argument=this.parseMaybeAssign(!1,u),this.finishNode(b,"SpreadElement")},z.parseRestBinding=function(){var u=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==T.name&&this.unexpected(),u.argument=this.parseBindingAtom(),this.finishNode(u,"RestElement")},z.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case T.bracketL:var u=this.startNode();return this.next(),u.elements=this.parseBindingList(T.bracketR,!0,!0),this.finishNode(u,"ArrayPattern");case T.braceL:return this.parseObj(!0)}return this.parseIdent()},z.parseBindingList=function(u,b,O,Q){for(var ue=[],ke=!0;!this.eat(u);)if(ke?ke=!1:this.expect(T.comma),b&&this.type===T.comma)ue.push(null);else{if(O&&this.afterTrailingComma(u))break;if(this.type===T.ellipsis){var Oe=this.parseRestBinding();this.parseBindingListItem(Oe),ue.push(Oe),this.type===T.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(u);break}else ue.push(this.parseAssignableListItem(Q))}return ue},z.parseAssignableListItem=function(u){var b=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(b),b},z.parseBindingListItem=function(u){return u},z.parseMaybeDefault=function(u,b,O){if(O=O||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(T.eq))return O;var Q=this.startNodeAt(u,b);return Q.left=O,Q.right=this.parseMaybeAssign(),this.finishNode(Q,"AssignmentPattern")},z.checkLValSimple=function(u,b,O){b===void 0&&(b=rt);var Q=b!==rt;switch(u.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(u.name)&&this.raiseRecoverable(u.start,(Q?"Binding ":"Assigning to ")+u.name+" in strict mode"),Q&&(b===je&&u.name==="let"&&this.raiseRecoverable(u.start,"let is disallowed as a lexically bound name"),O&&(Me(O,u.name)&&this.raiseRecoverable(u.start,"Argument name clash"),O[u.name]=!0),b!==a&&this.declareName(u.name,b,u.start));break;case"ChainExpression":this.raiseRecoverable(u.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":Q&&this.raiseRecoverable(u.start,"Binding member expression");break;case"ParenthesizedExpression":return Q&&this.raiseRecoverable(u.start,"Binding parenthesized expression"),this.checkLValSimple(u.expression,b,O);default:this.raise(u.start,(Q?"Binding":"Assigning to")+" rvalue")}},z.checkLValPattern=function(u,b,O){switch(b===void 0&&(b=rt),u.type){case"ObjectPattern":for(var Q=0,ue=u.properties;Q<ue.length;Q+=1){var ke=ue[Q];this.checkLValInnerPattern(ke,b,O)}break;case"ArrayPattern":for(var Oe=0,pt=u.elements;Oe<pt.length;Oe+=1){var _t=pt[Oe];_t&&this.checkLValInnerPattern(_t,b,O)}break;default:this.checkLValSimple(u,b,O)}},z.checkLValInnerPattern=function(u,b,O){switch(b===void 0&&(b=rt),u.type){case"Property":this.checkLValInnerPattern(u.value,b,O);break;case"AssignmentPattern":this.checkLValPattern(u.left,b,O);break;case"RestElement":this.checkLValPattern(u.argument,b,O);break;default:this.checkLValPattern(u,b,O)}};var W=function(b,O,Q,ue,ke){this.token=b,this.isExpr=!!O,this.preserveSpace=!!Q,this.override=ue,this.generator=!!ke},R={b_stat:new W("{",!1),b_expr:new W("{",!0),b_tmpl:new W("${",!1),p_stat:new W("(",!1),p_expr:new W("(",!0),q_tmpl:new W("`",!0,!0,function(u){return u.tryReadTemplateToken()}),f_stat:new W("function",!1),f_expr:new W("function",!0),f_expr_gen:new W("function",!0,!1,null,!0),f_gen:new W("function",!1,!1,null,!0)},Y=h.prototype;Y.initialContext=function(){return[R.b_stat]},Y.curContext=function(){return this.context[this.context.length-1]},Y.braceIsBlock=function(u){var b=this.curContext();return b===R.f_expr||b===R.f_stat?!0:u===T.colon&&(b===R.b_stat||b===R.b_expr)?!b.isExpr:u===T._return||u===T.name&&this.exprAllowed?Ce.test(this.input.slice(this.lastTokEnd,this.start)):u===T._else||u===T.semi||u===T.eof||u===T.parenR||u===T.arrow?!0:u===T.braceL?b===R.b_stat:u===T._var||u===T._const||u===T.name?!1:!this.exprAllowed},Y.inGeneratorContext=function(){for(var u=this.context.length-1;u>=1;u--){var b=this.context[u];if(b.token==="function")return b.generator}return!1},Y.updateContext=function(u){var b,O=this.type;O.keyword&&u===T.dot?this.exprAllowed=!1:(b=O.updateContext)?b.call(this,u):this.exprAllowed=O.beforeExpr},Y.overrideContext=function(u){this.curContext()!==u&&(this.context[this.context.length-1]=u)},T.parenR.updateContext=T.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var u=this.context.pop();u===R.b_stat&&this.curContext().token==="function"&&(u=this.context.pop()),this.exprAllowed=!u.isExpr},T.braceL.updateContext=function(u){this.context.push(this.braceIsBlock(u)?R.b_stat:R.b_expr),this.exprAllowed=!0},T.dollarBraceL.updateContext=function(){this.context.push(R.b_tmpl),this.exprAllowed=!0},T.parenL.updateContext=function(u){var b=u===T._if||u===T._for||u===T._with||u===T._while;this.context.push(b?R.p_stat:R.p_expr),this.exprAllowed=!0},T.incDec.updateContext=function(){},T._function.updateContext=T._class.updateContext=function(u){u.beforeExpr&&u!==T._else&&!(u===T.semi&&this.curContext()!==R.p_stat)&&!(u===T._return&&Ce.test(this.input.slice(this.lastTokEnd,this.start)))&&!((u===T.colon||u===T.braceL)&&this.curContext()===R.b_stat)?this.context.push(R.f_expr):this.context.push(R.f_stat),this.exprAllowed=!1},T.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},T.backQuote.updateContext=function(){this.curContext()===R.q_tmpl?this.context.pop():this.context.push(R.q_tmpl),this.exprAllowed=!1},T.star.updateContext=function(u){if(u===T._function){var b=this.context.length-1;this.context[b]===R.f_expr?this.context[b]=R.f_expr_gen:this.context[b]=R.f_gen}this.exprAllowed=!0},T.name.updateContext=function(u){var b=!1;this.options.ecmaVersion>=6&&u!==T.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(b=!0),this.exprAllowed=b};var x=h.prototype;x.checkPropClash=function(u,b,O){if(!(this.options.ecmaVersion>=9&&u.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(u.computed||u.method||u.shorthand))){var Q=u.key,ue;switch(Q.type){case"Identifier":ue=Q.name;break;case"Literal":ue=String(Q.value);break;default:return}var ke=u.kind;if(this.options.ecmaVersion>=6){ue==="__proto__"&&ke==="init"&&(b.proto&&(O?O.doubleProto<0&&(O.doubleProto=Q.start):this.raiseRecoverable(Q.start,"Redefinition of __proto__ property")),b.proto=!0);return}ue="$"+ue;var Oe=b[ue];if(Oe){var pt;ke==="init"?pt=this.strict&&Oe.init||Oe.get||Oe.set:pt=Oe.init||Oe[ke],pt&&this.raiseRecoverable(Q.start,"Redefinition of property")}else Oe=b[ue]={init:!1,get:!1,set:!1};Oe[ke]=!0}},x.parseExpression=function(u,b){var O=this.start,Q=this.startLoc,ue=this.parseMaybeAssign(u,b);if(this.type===T.comma){var ke=this.startNodeAt(O,Q);for(ke.expressions=[ue];this.eat(T.comma);)ke.expressions.push(this.parseMaybeAssign(u,b));return this.finishNode(ke,"SequenceExpression")}return ue},x.parseMaybeAssign=function(u,b,O){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(u);this.exprAllowed=!1}var Q=!1,ue=-1,ke=-1,Oe=-1;b?(ue=b.parenthesizedAssign,ke=b.trailingComma,Oe=b.doubleProto,b.parenthesizedAssign=b.trailingComma=-1):(b=new v,Q=!0);var pt=this.start,_t=this.startLoc;(this.type===T.parenL||this.type===T.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=u==="await");var ni=this.parseMaybeConditional(u,b);if(O&&(ni=O.call(this,ni,pt,_t)),this.type.isAssign){var Pt=this.startNodeAt(pt,_t);return Pt.operator=this.value,this.type===T.eq&&(ni=this.toAssignable(ni,!1,b)),Q||(b.parenthesizedAssign=b.trailingComma=b.doubleProto=-1),b.shorthandAssign>=ni.start&&(b.shorthandAssign=-1),this.type===T.eq?this.checkLValPattern(ni):this.checkLValSimple(ni),Pt.left=ni,this.next(),Pt.right=this.parseMaybeAssign(u),Oe>-1&&(b.doubleProto=Oe),this.finishNode(Pt,"AssignmentExpression")}else Q&&this.checkExpressionErrors(b,!0);return ue>-1&&(b.parenthesizedAssign=ue),ke>-1&&(b.trailingComma=ke),ni},x.parseMaybeConditional=function(u,b){var O=this.start,Q=this.startLoc,ue=this.parseExprOps(u,b);if(this.checkExpressionErrors(b))return ue;if(this.eat(T.question)){var ke=this.startNodeAt(O,Q);return ke.test=ue,ke.consequent=this.parseMaybeAssign(),this.expect(T.colon),ke.alternate=this.parseMaybeAssign(u),this.finishNode(ke,"ConditionalExpression")}return ue},x.parseExprOps=function(u,b){var O=this.start,Q=this.startLoc,ue=this.parseMaybeUnary(b,!1,!1,u);return this.checkExpressionErrors(b)||ue.start===O&&ue.type==="ArrowFunctionExpression"?ue:this.parseExprOp(ue,O,Q,-1,u)},x.parseExprOp=function(u,b,O,Q,ue){var ke=this.type.binop;if(ke!=null&&(!ue||this.type!==T._in)&&ke>Q){var Oe=this.type===T.logicalOR||this.type===T.logicalAND,pt=this.type===T.coalesce;pt&&(ke=T.logicalAND.binop);var _t=this.value;this.next();var ni=this.start,Pt=this.startLoc,ei=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,ue),ni,Pt,ke,ue),Jr=this.buildBinary(b,O,u,ei,_t,Oe||pt);return(Oe&&this.type===T.coalesce||pt&&(this.type===T.logicalOR||this.type===T.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Jr,b,O,Q,ue)}return u},x.buildBinary=function(u,b,O,Q,ue,ke){Q.type==="PrivateIdentifier"&&this.raise(Q.start,"Private identifier can only be left side of binary expression");var Oe=this.startNodeAt(u,b);return Oe.left=O,Oe.operator=ue,Oe.right=Q,this.finishNode(Oe,ke?"LogicalExpression":"BinaryExpression")},x.parseMaybeUnary=function(u,b,O,Q){var ue=this.start,ke=this.startLoc,Oe;if(this.isContextual("await")&&this.canAwait)Oe=this.parseAwait(Q),b=!0;else if(this.type.prefix){var pt=this.startNode(),_t=this.type===T.incDec;pt.operator=this.value,pt.prefix=!0,this.next(),pt.argument=this.parseMaybeUnary(null,!0,_t,Q),this.checkExpressionErrors(u,!0),_t?this.checkLValSimple(pt.argument):this.strict&&pt.operator==="delete"&&H(pt.argument)?this.raiseRecoverable(pt.start,"Deleting local variable in strict mode"):pt.operator==="delete"&&j(pt.argument)?this.raiseRecoverable(pt.start,"Private fields can not be deleted"):b=!0,Oe=this.finishNode(pt,_t?"UpdateExpression":"UnaryExpression")}else if(!b&&this.type===T.privateId)(Q||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Oe=this.parsePrivateIdent(),this.type!==T._in&&this.unexpected();else{if(Oe=this.parseExprSubscripts(u,Q),this.checkExpressionErrors(u))return Oe;for(;this.type.postfix&&!this.canInsertSemicolon();){var ni=this.startNodeAt(ue,ke);ni.operator=this.value,ni.prefix=!1,ni.argument=Oe,this.checkLValSimple(Oe),this.next(),Oe=this.finishNode(ni,"UpdateExpression")}}if(!O&&this.eat(T.starstar))if(b)this.unexpected(this.lastTokStart);else return this.buildBinary(ue,ke,Oe,this.parseMaybeUnary(null,!1,!1,Q),"**",!1);else return Oe};function H(u){return u.type==="Identifier"||u.type==="ParenthesizedExpression"&&H(u.expression)}function j(u){return u.type==="MemberExpression"&&u.property.type==="PrivateIdentifier"||u.type==="ChainExpression"&&j(u.expression)||u.type==="ParenthesizedExpression"&&j(u.expression)}x.parseExprSubscripts=function(u,b){var O=this.start,Q=this.startLoc,ue=this.parseExprAtom(u,b);if(ue.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return ue;var ke=this.parseSubscripts(ue,O,Q,!1,b);return u&&ke.type==="MemberExpression"&&(u.parenthesizedAssign>=ke.start&&(u.parenthesizedAssign=-1),u.parenthesizedBind>=ke.start&&(u.parenthesizedBind=-1),u.trailingComma>=ke.start&&(u.trailingComma=-1)),ke},x.parseSubscripts=function(u,b,O,Q,ue){for(var ke=this.options.ecmaVersion>=8&&u.type==="Identifier"&&u.name==="async"&&this.lastTokEnd===u.end&&!this.canInsertSemicolon()&&u.end-u.start===5&&this.potentialArrowAt===u.start,Oe=!1;;){var pt=this.parseSubscript(u,b,O,Q,ke,Oe,ue);if(pt.optional&&(Oe=!0),pt===u||pt.type==="ArrowFunctionExpression"){if(Oe){var _t=this.startNodeAt(b,O);_t.expression=pt,pt=this.finishNode(_t,"ChainExpression")}return pt}u=pt}},x.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(T.arrow)},x.parseSubscriptAsyncArrow=function(u,b,O,Q){return this.parseArrowExpression(this.startNodeAt(u,b),O,!0,Q)},x.parseSubscript=function(u,b,O,Q,ue,ke,Oe){var pt=this.options.ecmaVersion>=11,_t=pt&&this.eat(T.questionDot);Q&&_t&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var ni=this.eat(T.bracketL);if(ni||_t&&this.type!==T.parenL&&this.type!==T.backQuote||this.eat(T.dot)){var Pt=this.startNodeAt(b,O);Pt.object=u,ni?(Pt.property=this.parseExpression(),this.expect(T.bracketR)):this.type===T.privateId&&u.type!=="Super"?Pt.property=this.parsePrivateIdent():Pt.property=this.parseIdent(this.options.allowReserved!=="never"),Pt.computed=!!ni,pt&&(Pt.optional=_t),u=this.finishNode(Pt,"MemberExpression")}else if(!Q&&this.eat(T.parenL)){var ei=new v,Jr=this.yieldPos,Fa=this.awaitPos,$r=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Nr=this.parseExprList(T.parenR,this.options.ecmaVersion>=8,!1,ei);if(ue&&!_t&&this.shouldParseAsyncArrow())return this.checkPatternErrors(ei,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Jr,this.awaitPos=Fa,this.awaitIdentPos=$r,this.parseSubscriptAsyncArrow(b,O,Nr,Oe);this.checkExpressionErrors(ei,!0),this.yieldPos=Jr||this.yieldPos,this.awaitPos=Fa||this.awaitPos,this.awaitIdentPos=$r||this.awaitIdentPos;var ga=this.startNodeAt(b,O);ga.callee=u,ga.arguments=Nr,pt&&(ga.optional=_t),u=this.finishNode(ga,"CallExpression")}else if(this.type===T.backQuote){(_t||ke)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var ma=this.startNodeAt(b,O);ma.tag=u,ma.quasi=this.parseTemplate({isTagged:!0}),u=this.finishNode(ma,"TaggedTemplateExpression")}return u},x.parseExprAtom=function(u,b,O){this.type===T.slash&&this.readRegexp();var Q,ue=this.potentialArrowAt===this.start;switch(this.type){case T._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),Q=this.startNode(),this.next(),this.type===T.parenL&&!this.allowDirectSuper&&this.raise(Q.start,"super() call outside constructor of a subclass"),this.type!==T.dot&&this.type!==T.bracketL&&this.type!==T.parenL&&this.unexpected(),this.finishNode(Q,"Super");case T._this:return Q=this.startNode(),this.next(),this.finishNode(Q,"ThisExpression");case T.name:var ke=this.start,Oe=this.startLoc,pt=this.containsEsc,_t=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!pt&&_t.name==="async"&&!this.canInsertSemicolon()&&this.eat(T._function))return this.overrideContext(R.f_expr),this.parseFunction(this.startNodeAt(ke,Oe),0,!1,!0,b);if(ue&&!this.canInsertSemicolon()){if(this.eat(T.arrow))return this.parseArrowExpression(this.startNodeAt(ke,Oe),[_t],!1,b);if(this.options.ecmaVersion>=8&&_t.name==="async"&&this.type===T.name&&!pt&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return _t=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(T.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(ke,Oe),[_t],!0,b)}return _t;case T.regexp:var ni=this.value;return Q=this.parseLiteral(ni.value),Q.regex={pattern:ni.pattern,flags:ni.flags},Q;case T.num:case T.string:return this.parseLiteral(this.value);case T._null:case T._true:case T._false:return Q=this.startNode(),Q.value=this.type===T._null?null:this.type===T._true,Q.raw=this.type.keyword,this.next(),this.finishNode(Q,"Literal");case T.parenL:var Pt=this.start,ei=this.parseParenAndDistinguishExpression(ue,b);return u&&(u.parenthesizedAssign<0&&!this.isSimpleAssignTarget(ei)&&(u.parenthesizedAssign=Pt),u.parenthesizedBind<0&&(u.parenthesizedBind=Pt)),ei;case T.bracketL:return Q=this.startNode(),this.next(),Q.elements=this.parseExprList(T.bracketR,!0,!0,u),this.finishNode(Q,"ArrayExpression");case T.braceL:return this.overrideContext(R.b_expr),this.parseObj(!1,u);case T._function:return Q=this.startNode(),this.next(),this.parseFunction(Q,0);case T._class:return this.parseClass(this.startNode(),!1);case T._new:return this.parseNew();case T.backQuote:return this.parseTemplate();case T._import:return this.options.ecmaVersion>=11?this.parseExprImport(O):this.unexpected();default:return this.parseExprAtomDefault()}},x.parseExprAtomDefault=function(){this.unexpected()},x.parseExprImport=function(u){var b=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===T.parenL&&!u)return this.parseDynamicImport(b);if(this.type===T.dot){var O=this.startNodeAt(b.start,b.loc&&b.loc.start);return O.name="import",b.meta=this.finishNode(O,"Identifier"),this.parseImportMeta(b)}else this.unexpected()},x.parseDynamicImport=function(u){if(this.next(),u.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(T.parenR)?u.options=null:(this.expect(T.comma),this.afterTrailingComma(T.parenR)?u.options=null:(u.options=this.parseMaybeAssign(),this.eat(T.parenR)||(this.expect(T.comma),this.afterTrailingComma(T.parenR)||this.unexpected())));else if(!this.eat(T.parenR)){var b=this.start;this.eat(T.comma)&&this.eat(T.parenR)?this.raiseRecoverable(b,"Trailing comma is not allowed in import()"):this.unexpected(b)}return this.finishNode(u,"ImportExpression")},x.parseImportMeta=function(u){this.next();var b=this.containsEsc;return u.property=this.parseIdent(!0),u.property.name!=="meta"&&this.raiseRecoverable(u.property.start,"The only valid meta property for import is 'import.meta'"),b&&this.raiseRecoverable(u.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(u.start,"Cannot use 'import.meta' outside a module"),this.finishNode(u,"MetaProperty")},x.parseLiteral=function(u){var b=this.startNode();return b.value=u,b.raw=this.input.slice(this.start,this.end),b.raw.charCodeAt(b.raw.length-1)===110&&(b.bigint=b.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(b,"Literal")},x.parseParenExpression=function(){this.expect(T.parenL);var u=this.parseExpression();return this.expect(T.parenR),u},x.shouldParseArrow=function(u){return!this.canInsertSemicolon()},x.parseParenAndDistinguishExpression=function(u,b){var O=this.start,Q=this.startLoc,ue,ke=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Oe=this.start,pt=this.startLoc,_t=[],ni=!0,Pt=!1,ei=new v,Jr=this.yieldPos,Fa=this.awaitPos,$r;for(this.yieldPos=0,this.awaitPos=0;this.type!==T.parenR;)if(ni?ni=!1:this.expect(T.comma),ke&&this.afterTrailingComma(T.parenR,!0)){Pt=!0;break}else if(this.type===T.ellipsis){$r=this.start,_t.push(this.parseParenItem(this.parseRestBinding())),this.type===T.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else _t.push(this.parseMaybeAssign(!1,ei,this.parseParenItem));var Nr=this.lastTokEnd,ga=this.lastTokEndLoc;if(this.expect(T.parenR),u&&this.shouldParseArrow(_t)&&this.eat(T.arrow))return this.checkPatternErrors(ei,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Jr,this.awaitPos=Fa,this.parseParenArrowList(O,Q,_t,b);(!_t.length||Pt)&&this.unexpected(this.lastTokStart),$r&&this.unexpected($r),this.checkExpressionErrors(ei,!0),this.yieldPos=Jr||this.yieldPos,this.awaitPos=Fa||this.awaitPos,_t.length>1?(ue=this.startNodeAt(Oe,pt),ue.expressions=_t,this.finishNodeAt(ue,"SequenceExpression",Nr,ga)):ue=_t[0]}else ue=this.parseParenExpression();if(this.options.preserveParens){var ma=this.startNodeAt(O,Q);return ma.expression=ue,this.finishNode(ma,"ParenthesizedExpression")}else return ue},x.parseParenItem=function(u){return u},x.parseParenArrowList=function(u,b,O,Q){return this.parseArrowExpression(this.startNodeAt(u,b),O,!1,Q)};var J=[];x.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var u=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===T.dot){var b=this.startNodeAt(u.start,u.loc&&u.loc.start);b.name="new",u.meta=this.finishNode(b,"Identifier"),this.next();var O=this.containsEsc;return u.property=this.parseIdent(!0),u.property.name!=="target"&&this.raiseRecoverable(u.property.start,"The only valid meta property for new is 'new.target'"),O&&this.raiseRecoverable(u.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(u.start,"'new.target' can only be used in functions and class static block"),this.finishNode(u,"MetaProperty")}var Q=this.start,ue=this.startLoc;return u.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),Q,ue,!0,!1),this.eat(T.parenL)?u.arguments=this.parseExprList(T.parenR,this.options.ecmaVersion>=8,!1):u.arguments=J,this.finishNode(u,"NewExpression")},x.parseTemplateElement=function(u){var b=u.isTagged,O=this.startNode();return this.type===T.invalidTemplate?(b||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),O.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):O.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),O.tail=this.type===T.backQuote,this.finishNode(O,"TemplateElement")},x.parseTemplate=function(u){u===void 0&&(u={});var b=u.isTagged;b===void 0&&(b=!1);var O=this.startNode();this.next(),O.expressions=[];var Q=this.parseTemplateElement({isTagged:b});for(O.quasis=[Q];!Q.tail;)this.type===T.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(T.dollarBraceL),O.expressions.push(this.parseExpression()),this.expect(T.braceR),O.quasis.push(Q=this.parseTemplateElement({isTagged:b}));return this.next(),this.finishNode(O,"TemplateLiteral")},x.isAsyncProp=function(u){return!u.computed&&u.key.type==="Identifier"&&u.key.name==="async"&&(this.type===T.name||this.type===T.num||this.type===T.string||this.type===T.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===T.star)&&!Ce.test(this.input.slice(this.lastTokEnd,this.start))},x.parseObj=function(u,b){var O=this.startNode(),Q=!0,ue={};for(O.properties=[],this.next();!this.eat(T.braceR);){if(Q)Q=!1;else if(this.expect(T.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(T.braceR))break;var ke=this.parseProperty(u,b);u||this.checkPropClash(ke,ue,b),O.properties.push(ke)}return this.finishNode(O,u?"ObjectPattern":"ObjectExpression")},x.parseProperty=function(u,b){var O=this.startNode(),Q,ue,ke,Oe;if(this.options.ecmaVersion>=9&&this.eat(T.ellipsis))return u?(O.argument=this.parseIdent(!1),this.type===T.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(O,"RestElement")):(O.argument=this.parseMaybeAssign(!1,b),this.type===T.comma&&b&&b.trailingComma<0&&(b.trailingComma=this.start),this.finishNode(O,"SpreadElement"));this.options.ecmaVersion>=6&&(O.method=!1,O.shorthand=!1,(u||b)&&(ke=this.start,Oe=this.startLoc),u||(Q=this.eat(T.star)));var pt=this.containsEsc;return this.parsePropertyName(O),!u&&!pt&&this.options.ecmaVersion>=8&&!Q&&this.isAsyncProp(O)?(ue=!0,Q=this.options.ecmaVersion>=9&&this.eat(T.star),this.parsePropertyName(O)):ue=!1,this.parsePropertyValue(O,u,Q,ue,ke,Oe,b,pt),this.finishNode(O,"Property")},x.parseGetterSetter=function(u){var b=u.key.name;this.parsePropertyName(u),u.value=this.parseMethod(!1),u.kind=b;var O=u.kind==="get"?0:1;if(u.value.params.length!==O){var Q=u.value.start;u.kind==="get"?this.raiseRecoverable(Q,"getter should have no params"):this.raiseRecoverable(Q,"setter should have exactly one param")}else u.kind==="set"&&u.value.params[0].type==="RestElement"&&this.raiseRecoverable(u.value.params[0].start,"Setter cannot use rest params")},x.parsePropertyValue=function(u,b,O,Q,ue,ke,Oe,pt){(O||Q)&&this.type===T.colon&&this.unexpected(),this.eat(T.colon)?(u.value=b?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Oe),u.kind="init"):this.options.ecmaVersion>=6&&this.type===T.parenL?(b&&this.unexpected(),u.method=!0,u.value=this.parseMethod(O,Q),u.kind="init"):!b&&!pt&&this.options.ecmaVersion>=5&&!u.computed&&u.key.type==="Identifier"&&(u.key.name==="get"||u.key.name==="set")&&this.type!==T.comma&&this.type!==T.braceR&&this.type!==T.eq?((O||Q)&&this.unexpected(),this.parseGetterSetter(u)):this.options.ecmaVersion>=6&&!u.computed&&u.key.type==="Identifier"?((O||Q)&&this.unexpected(),this.checkUnreserved(u.key),u.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=ue),b?u.value=this.parseMaybeDefault(ue,ke,this.copyNode(u.key)):this.type===T.eq&&Oe?(Oe.shorthandAssign<0&&(Oe.shorthandAssign=this.start),u.value=this.parseMaybeDefault(ue,ke,this.copyNode(u.key))):u.value=this.copyNode(u.key),u.kind="init",u.shorthand=!0):this.unexpected()},x.parsePropertyName=function(u){if(this.options.ecmaVersion>=6){if(this.eat(T.bracketL))return u.computed=!0,u.key=this.parseMaybeAssign(),this.expect(T.bracketR),u.key;u.computed=!1}return u.key=this.type===T.num||this.type===T.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},x.initFunction=function(u){u.id=null,this.options.ecmaVersion>=6&&(u.generator=u.expression=!1),this.options.ecmaVersion>=8&&(u.async=!1)},x.parseMethod=function(u,b,O){var Q=this.startNode(),ue=this.yieldPos,ke=this.awaitPos,Oe=this.awaitIdentPos;return this.initFunction(Q),this.options.ecmaVersion>=6&&(Q.generator=u),this.options.ecmaVersion>=8&&(Q.async=!!b),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ve(b,Q.generator)|js|(O?V:0)),this.expect(T.parenL),Q.params=this.parseBindingList(T.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(Q,!1,!0,!1),this.yieldPos=ue,this.awaitPos=ke,this.awaitIdentPos=Oe,this.finishNode(Q,"FunctionExpression")},x.parseArrowExpression=function(u,b,O,Q){var ue=this.yieldPos,ke=this.awaitPos,Oe=this.awaitIdentPos;return this.enterScope(ve(O,!1)|Ps),this.initFunction(u),this.options.ecmaVersion>=8&&(u.async=!!O),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,u.params=this.toAssignableList(b,!0),this.parseFunctionBody(u,!0,!1,Q),this.yieldPos=ue,this.awaitPos=ke,this.awaitIdentPos=Oe,this.finishNode(u,"ArrowFunctionExpression")},x.parseFunctionBody=function(u,b,O,Q){var ue=b&&this.type!==T.braceL,ke=this.strict,Oe=!1;if(ue)u.body=this.parseMaybeAssign(Q),u.expression=!0,this.checkParams(u,!1);else{var pt=this.options.ecmaVersion>=7&&!this.isSimpleParamList(u.params);(!ke||pt)&&(Oe=this.strictDirective(this.end),Oe&&pt&&this.raiseRecoverable(u.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var _t=this.labels;this.labels=[],Oe&&(this.strict=!0),this.checkParams(u,!ke&&!Oe&&!b&&!O&&this.isSimpleParamList(u.params)),this.strict&&u.id&&this.checkLValSimple(u.id,a),u.body=this.parseBlock(!1,void 0,Oe&&!ke),u.expression=!1,this.adaptDirectivePrologue(u.body.body),this.labels=_t}this.exitScope()},x.isSimpleParamList=function(u){for(var b=0,O=u;b<O.length;b+=1){var Q=O[b];if(Q.type!=="Identifier")return!1}return!0},x.checkParams=function(u,b){for(var O=Object.create(null),Q=0,ue=u.params;Q<ue.length;Q+=1){var ke=ue[Q];this.checkLValInnerPattern(ke,Ue,b?null:O)}},x.parseExprList=function(u,b,O,Q){for(var ue=[],ke=!0;!this.eat(u);){if(ke)ke=!1;else if(this.expect(T.comma),b&&this.afterTrailingComma(u))break;var Oe=void 0;O&&this.type===T.comma?Oe=null:this.type===T.ellipsis?(Oe=this.parseSpread(Q),Q&&this.type===T.comma&&Q.trailingComma<0&&(Q.trailingComma=this.start)):Oe=this.parseMaybeAssign(!1,Q),ue.push(Oe)}return ue},x.checkUnreserved=function(u){var b=u.start,O=u.end,Q=u.name;if(this.inGenerator&&Q==="yield"&&this.raiseRecoverable(b,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&Q==="await"&&this.raiseRecoverable(b,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&me)&&Q==="arguments"&&this.raiseRecoverable(b,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(Q==="arguments"||Q==="await")&&this.raise(b,"Cannot use "+Q+" in class static initialization block"),this.keywords.test(Q)&&this.raise(b,"Unexpected keyword '"+Q+"'"),!(this.options.ecmaVersion<6&&this.input.slice(b,O).indexOf("\\")!==-1)){var ue=this.strict?this.reservedWordsStrict:this.reservedWords;ue.test(Q)&&(!this.inAsync&&Q==="await"&&this.raiseRecoverable(b,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(b,"The keyword '"+Q+"' is reserved"))}},x.parseIdent=function(u){var b=this.parseIdentNode();return this.next(!!u),this.finishNode(b,"Identifier"),u||(this.checkUnreserved(b),b.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=b.start)),b},x.parseIdentNode=function(){var u=this.startNode();return this.type===T.name?u.name=this.value:this.type.keyword?(u.name=this.type.keyword,(u.name==="class"||u.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=T.name):this.unexpected(),u},x.parsePrivateIdent=function(){var u=this.startNode();return this.type===T.privateId?u.name=this.value:this.unexpected(),this.next(),this.finishNode(u,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(u.start,"Private field '#"+u.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(u)),u},x.parseYield=function(u){this.yieldPos||(this.yieldPos=this.start);var b=this.startNode();return this.next(),this.type===T.semi||this.canInsertSemicolon()||this.type!==T.star&&!this.type.startsExpr?(b.delegate=!1,b.argument=null):(b.delegate=this.eat(T.star),b.argument=this.parseMaybeAssign(u)),this.finishNode(b,"YieldExpression")},x.parseAwait=function(u){this.awaitPos||(this.awaitPos=this.start);var b=this.startNode();return this.next(),b.argument=this.parseMaybeUnary(null,!0,!1,u),this.finishNode(b,"AwaitExpression")};var G=h.prototype;G.raise=function(u,b){var O=Ni(this.input,u);b+=" ("+O.line+":"+O.column+")",this.sourceFile&&(b+=" in "+this.sourceFile);var Q=new SyntaxError(b);throw Q.pos=u,Q.loc=O,Q.raisedAt=this.pos,Q},G.raiseRecoverable=G.raise,G.curPosition=function(){if(this.options.locations)return new oi(this.curLine,this.pos-this.lineStart)};var se=h.prototype,he=function(b){this.flags=b,this.var=[],this.lexical=[],this.functions=[]};se.enterScope=function(u){this.scopeStack.push(new he(u))},se.exitScope=function(){this.scopeStack.pop()},se.treatFunctionsAsVarInScope=function(u){return u.flags&fi||!this.inModule&&u.flags&Gt},se.declareName=function(u,b,O){var Q=!1;if(b===je){var ue=this.currentScope();Q=ue.lexical.indexOf(u)>-1||ue.functions.indexOf(u)>-1||ue.var.indexOf(u)>-1,ue.lexical.push(u),this.inModule&&ue.flags&Gt&&delete this.undefinedExports[u]}else if(b===Rt){var ke=this.currentScope();ke.lexical.push(u)}else if(b===xn){var Oe=this.currentScope();this.treatFunctionsAsVar?Q=Oe.lexical.indexOf(u)>-1:Q=Oe.lexical.indexOf(u)>-1||Oe.var.indexOf(u)>-1,Oe.functions.push(u)}else for(var pt=this.scopeStack.length-1;pt>=0;--pt){var _t=this.scopeStack[pt];if(_t.lexical.indexOf(u)>-1&&!(_t.flags&Ki&&_t.lexical[0]===u)||!this.treatFunctionsAsVarInScope(_t)&&_t.functions.indexOf(u)>-1){Q=!0;break}if(_t.var.push(u),this.inModule&&_t.flags&Gt&&delete this.undefinedExports[u],_t.flags&me)break}Q&&this.raiseRecoverable(O,"Identifier '"+u+"' has already been declared")},se.checkLocalExport=function(u){this.scopeStack[0].lexical.indexOf(u.name)===-1&&this.scopeStack[0].var.indexOf(u.name)===-1&&(this.undefinedExports[u.name]=u)},se.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},se.currentVarScope=function(){for(var u=this.scopeStack.length-1;;u--){var b=this.scopeStack[u];if(b.flags&(me|le|ae))return b}},se.currentThisScope=function(){for(var u=this.scopeStack.length-1;;u--){var b=this.scopeStack[u];if(b.flags&(me|le|ae)&&!(b.flags&Ps))return b}};var de=function(b,O,Q){this.type="",this.start=O,this.end=0,b.options.locations&&(this.loc=new Mt(b,Q)),b.options.directSourceFile&&(this.sourceFile=b.options.directSourceFile),b.options.ranges&&(this.range=[O,0])},_e=h.prototype;_e.startNode=function(){return new de(this,this.start,this.startLoc)},_e.startNodeAt=function(u,b){return new de(this,u,b)};function oe(u,b,O,Q){return u.type=b,u.end=O,this.options.locations&&(u.loc.end=Q),this.options.ranges&&(u.range[1]=O),u}_e.finishNode=function(u,b){return oe.call(this,u,b,this.lastTokEnd,this.lastTokEndLoc)},_e.finishNodeAt=function(u,b,O,Q){return oe.call(this,u,b,O,Q)},_e.copyNode=function(u){var b=new de(this,u.start,this.startLoc);for(var O in u)b[O]=u[O];return b};var ye="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",Ae="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ee=Ae+" Extended_Pictographic",De=Ee,Re=De+" EBase EComp EMod EPres ExtPict",it=Re,ht=it,mt={9:Ae,10:Ee,11:De,12:Re,13:it,14:ht},vt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Ke={9:"",10:"",11:"",12:"",13:"",14:vt},We="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",yt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",St=yt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Vt=St+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Bt=Vt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Nt=Bt+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ft=Nt+" "+ye,ii={9:yt,10:St,11:Vt,12:Bt,13:Nt,14:Ft},zt={};function Ts(u){var b=zt[u]={binary:Pe(mt[u]+" "+We),binaryOfStrings:Pe(Ke[u]),nonBinary:{General_Category:Pe(We),Script:Pe(ii[u])}};b.nonBinary.Script_Extensions=b.nonBinary.Script,b.nonBinary.gc=b.nonBinary.General_Category,b.nonBinary.sc=b.nonBinary.Script,b.nonBinary.scx=b.nonBinary.Script_Extensions}for(var gs=0,Is=[9,10,11,12,13,14];gs<Is.length;gs+=1){var ms=Is[gs];Ts(ms)}var ct=h.prototype,os=function(b,O){this.parent=b,this.base=O||this};os.prototype.separatedFrom=function(b){for(var O=this;O;O=O.parent)for(var Q=b;Q;Q=Q.parent)if(O.base===Q.base&&O!==Q)return!0;return!1},os.prototype.sibling=function(){return new os(this.parent,this.base)};var cs=function(b){this.parser=b,this.validFlags="gim"+(b.options.ecmaVersion>=6?"uy":"")+(b.options.ecmaVersion>=9?"s":"")+(b.options.ecmaVersion>=13?"d":"")+(b.options.ecmaVersion>=15?"v":""),this.unicodeProperties=zt[b.options.ecmaVersion>=14?14:b.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};cs.prototype.reset=function(b,O,Q){var ue=Q.indexOf("v")!==-1,ke=Q.indexOf("u")!==-1;this.start=b|0,this.source=O+"",this.flags=Q,ue&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=ke&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=ke&&this.parser.options.ecmaVersion>=9)},cs.prototype.raise=function(b){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+b)},cs.prototype.at=function(b,O){O===void 0&&(O=!1);var Q=this.source,ue=Q.length;if(b>=ue)return-1;var ke=Q.charCodeAt(b);if(!(O||this.switchU)||ke<=55295||ke>=57344||b+1>=ue)return ke;var Oe=Q.charCodeAt(b+1);return Oe>=56320&&Oe<=57343?(ke<<10)+Oe-56613888:ke},cs.prototype.nextIndex=function(b,O){O===void 0&&(O=!1);var Q=this.source,ue=Q.length;if(b>=ue)return ue;var ke=Q.charCodeAt(b),Oe;return!(O||this.switchU)||ke<=55295||ke>=57344||b+1>=ue||(Oe=Q.charCodeAt(b+1))<56320||Oe>57343?b+1:b+2},cs.prototype.current=function(b){return b===void 0&&(b=!1),this.at(this.pos,b)},cs.prototype.lookahead=function(b){return b===void 0&&(b=!1),this.at(this.nextIndex(this.pos,b),b)},cs.prototype.advance=function(b){b===void 0&&(b=!1),this.pos=this.nextIndex(this.pos,b)},cs.prototype.eat=function(b,O){return O===void 0&&(O=!1),this.current(O)===b?(this.advance(O),!0):!1},cs.prototype.eatChars=function(b,O){O===void 0&&(O=!1);for(var Q=this.pos,ue=0,ke=b;ue<ke.length;ue+=1){var Oe=ke[ue],pt=this.at(Q,O);if(pt===-1||pt!==Oe)return!1;Q=this.nextIndex(Q,O)}return this.pos=Q,!0},ct.validateRegExpFlags=function(u){for(var b=u.validFlags,O=u.flags,Q=!1,ue=!1,ke=0;ke<O.length;ke++){var Oe=O.charAt(ke);b.indexOf(Oe)===-1&&this.raise(u.start,"Invalid regular expression flag"),O.indexOf(Oe,ke+1)>-1&&this.raise(u.start,"Duplicate regular expression flag"),Oe==="u"&&(Q=!0),Oe==="v"&&(ue=!0)}this.options.ecmaVersion>=15&&Q&&ue&&this.raise(u.start,"Invalid regular expression flag")};function xs(u){for(var b in u)return!0;return!1}ct.validateRegExpPattern=function(u){this.regexp_pattern(u),!u.switchN&&this.options.ecmaVersion>=9&&xs(u.groupNames)&&(u.switchN=!0,this.regexp_pattern(u))},ct.regexp_pattern=function(u){u.pos=0,u.lastIntValue=0,u.lastStringValue="",u.lastAssertionIsQuantifiable=!1,u.numCapturingParens=0,u.maxBackReference=0,u.groupNames=Object.create(null),u.backReferenceNames.length=0,u.branchID=null,this.regexp_disjunction(u),u.pos!==u.source.length&&(u.eat(41)&&u.raise("Unmatched ')'"),(u.eat(93)||u.eat(125))&&u.raise("Lone quantifier brackets")),u.maxBackReference>u.numCapturingParens&&u.raise("Invalid escape");for(var b=0,O=u.backReferenceNames;b<O.length;b+=1){var Q=O[b];u.groupNames[Q]||u.raise("Invalid named capture referenced")}},ct.regexp_disjunction=function(u){var b=this.options.ecmaVersion>=16;for(b&&(u.branchID=new os(u.branchID,null)),this.regexp_alternative(u);u.eat(124);)b&&(u.branchID=u.branchID.sibling()),this.regexp_alternative(u);b&&(u.branchID=u.branchID.parent),this.regexp_eatQuantifier(u,!0)&&u.raise("Nothing to repeat"),u.eat(123)&&u.raise("Lone quantifier brackets")},ct.regexp_alternative=function(u){for(;u.pos<u.source.length&&this.regexp_eatTerm(u););},ct.regexp_eatTerm=function(u){return this.regexp_eatAssertion(u)?(u.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(u)&&u.switchU&&u.raise("Invalid quantifier"),!0):(u.switchU?this.regexp_eatAtom(u):this.regexp_eatExtendedAtom(u))?(this.regexp_eatQuantifier(u),!0):!1},ct.regexp_eatAssertion=function(u){var b=u.pos;if(u.lastAssertionIsQuantifiable=!1,u.eat(94)||u.eat(36))return!0;if(u.eat(92)){if(u.eat(66)||u.eat(98))return!0;u.pos=b}if(u.eat(40)&&u.eat(63)){var O=!1;if(this.options.ecmaVersion>=9&&(O=u.eat(60)),u.eat(61)||u.eat(33))return this.regexp_disjunction(u),u.eat(41)||u.raise("Unterminated group"),u.lastAssertionIsQuantifiable=!O,!0}return u.pos=b,!1},ct.regexp_eatQuantifier=function(u,b){return b===void 0&&(b=!1),this.regexp_eatQuantifierPrefix(u,b)?(u.eat(63),!0):!1},ct.regexp_eatQuantifierPrefix=function(u,b){return u.eat(42)||u.eat(43)||u.eat(63)||this.regexp_eatBracedQuantifier(u,b)},ct.regexp_eatBracedQuantifier=function(u,b){var O=u.pos;if(u.eat(123)){var Q=0,ue=-1;if(this.regexp_eatDecimalDigits(u)&&(Q=u.lastIntValue,u.eat(44)&&this.regexp_eatDecimalDigits(u)&&(ue=u.lastIntValue),u.eat(125)))return ue!==-1&&ue<Q&&!b&&u.raise("numbers out of order in {} quantifier"),!0;u.switchU&&!b&&u.raise("Incomplete quantifier"),u.pos=O}return!1},ct.regexp_eatAtom=function(u){return this.regexp_eatPatternCharacters(u)||u.eat(46)||this.regexp_eatReverseSolidusAtomEscape(u)||this.regexp_eatCharacterClass(u)||this.regexp_eatUncapturingGroup(u)||this.regexp_eatCapturingGroup(u)},ct.regexp_eatReverseSolidusAtomEscape=function(u){var b=u.pos;if(u.eat(92)){if(this.regexp_eatAtomEscape(u))return!0;u.pos=b}return!1},ct.regexp_eatUncapturingGroup=function(u){var b=u.pos;if(u.eat(40)){if(u.eat(63)){if(this.options.ecmaVersion>=16){var O=this.regexp_eatModifiers(u),Q=u.eat(45);if(O||Q){for(var ue=0;ue<O.length;ue++){var ke=O.charAt(ue);O.indexOf(ke,ue+1)>-1&&u.raise("Duplicate regular expression modifiers")}if(Q){var Oe=this.regexp_eatModifiers(u);!O&&!Oe&&u.current()===58&&u.raise("Invalid regular expression modifiers");for(var pt=0;pt<Oe.length;pt++){var _t=Oe.charAt(pt);(Oe.indexOf(_t,pt+1)>-1||O.indexOf(_t)>-1)&&u.raise("Duplicate regular expression modifiers")}}}}if(u.eat(58)){if(this.regexp_disjunction(u),u.eat(41))return!0;u.raise("Unterminated group")}}u.pos=b}return!1},ct.regexp_eatCapturingGroup=function(u){if(u.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(u):u.current()===63&&u.raise("Invalid group"),this.regexp_disjunction(u),u.eat(41))return u.numCapturingParens+=1,!0;u.raise("Unterminated group")}return!1},ct.regexp_eatModifiers=function(u){for(var b="",O=0;(O=u.current())!==-1&&Vn(O);)b+=$e(O),u.advance();return b};function Vn(u){return u===105||u===109||u===115}ct.regexp_eatExtendedAtom=function(u){return u.eat(46)||this.regexp_eatReverseSolidusAtomEscape(u)||this.regexp_eatCharacterClass(u)||this.regexp_eatUncapturingGroup(u)||this.regexp_eatCapturingGroup(u)||this.regexp_eatInvalidBracedQuantifier(u)||this.regexp_eatExtendedPatternCharacter(u)},ct.regexp_eatInvalidBracedQuantifier=function(u){return this.regexp_eatBracedQuantifier(u,!0)&&u.raise("Nothing to repeat"),!1},ct.regexp_eatSyntaxCharacter=function(u){var b=u.current();return ir(b)?(u.lastIntValue=b,u.advance(),!0):!1};function ir(u){return u===36||u>=40&&u<=43||u===46||u===63||u>=91&&u<=94||u>=123&&u<=125}ct.regexp_eatPatternCharacters=function(u){for(var b=u.pos,O=0;(O=u.current())!==-1&&!ir(O);)u.advance();return u.pos!==b},ct.regexp_eatExtendedPatternCharacter=function(u){var b=u.current();return b!==-1&&b!==36&&!(b>=40&&b<=43)&&b!==46&&b!==63&&b!==91&&b!==94&&b!==124?(u.advance(),!0):!1},ct.regexp_groupSpecifier=function(u){if(u.eat(63)){this.regexp_eatGroupName(u)||u.raise("Invalid group");var b=this.options.ecmaVersion>=16,O=u.groupNames[u.lastStringValue];if(O)if(b)for(var Q=0,ue=O;Q<ue.length;Q+=1){var ke=ue[Q];ke.separatedFrom(u.branchID)||u.raise("Duplicate capture group name")}else u.raise("Duplicate capture group name");b?(O||(u.groupNames[u.lastStringValue]=[])).push(u.branchID):u.groupNames[u.lastStringValue]=!0}},ct.regexp_eatGroupName=function(u){if(u.lastStringValue="",u.eat(60)){if(this.regexp_eatRegExpIdentifierName(u)&&u.eat(62))return!0;u.raise("Invalid capture group name")}return!1},ct.regexp_eatRegExpIdentifierName=function(u){if(u.lastStringValue="",this.regexp_eatRegExpIdentifierStart(u)){for(u.lastStringValue+=$e(u.lastIntValue);this.regexp_eatRegExpIdentifierPart(u);)u.lastStringValue+=$e(u.lastIntValue);return!0}return!1},ct.regexp_eatRegExpIdentifierStart=function(u){var b=u.pos,O=this.options.ecmaVersion>=11,Q=u.current(O);return u.advance(O),Q===92&&this.regexp_eatRegExpUnicodeEscapeSequence(u,O)&&(Q=u.lastIntValue),Ln(Q)?(u.lastIntValue=Q,!0):(u.pos=b,!1)};function Ln(u){return F(u,!0)||u===36||u===95}ct.regexp_eatRegExpIdentifierPart=function(u){var b=u.pos,O=this.options.ecmaVersion>=11,Q=u.current(O);return u.advance(O),Q===92&&this.regexp_eatRegExpUnicodeEscapeSequence(u,O)&&(Q=u.lastIntValue),Sn(Q)?(u.lastIntValue=Q,!0):(u.pos=b,!1)};function Sn(u){return K(u,!0)||u===36||u===95||u===8204||u===8205}ct.regexp_eatAtomEscape=function(u){return this.regexp_eatBackReference(u)||this.regexp_eatCharacterClassEscape(u)||this.regexp_eatCharacterEscape(u)||u.switchN&&this.regexp_eatKGroupName(u)?!0:(u.switchU&&(u.current()===99&&u.raise("Invalid unicode escape"),u.raise("Invalid escape")),!1)},ct.regexp_eatBackReference=function(u){var b=u.pos;if(this.regexp_eatDecimalEscape(u)){var O=u.lastIntValue;if(u.switchU)return O>u.maxBackReference&&(u.maxBackReference=O),!0;if(O<=u.numCapturingParens)return!0;u.pos=b}return!1},ct.regexp_eatKGroupName=function(u){if(u.eat(107)){if(this.regexp_eatGroupName(u))return u.backReferenceNames.push(u.lastStringValue),!0;u.raise("Invalid named reference")}return!1},ct.regexp_eatCharacterEscape=function(u){return this.regexp_eatControlEscape(u)||this.regexp_eatCControlLetter(u)||this.regexp_eatZero(u)||this.regexp_eatHexEscapeSequence(u)||this.regexp_eatRegExpUnicodeEscapeSequence(u,!1)||!u.switchU&&this.regexp_eatLegacyOctalEscapeSequence(u)||this.regexp_eatIdentityEscape(u)},ct.regexp_eatCControlLetter=function(u){var b=u.pos;if(u.eat(99)){if(this.regexp_eatControlLetter(u))return!0;u.pos=b}return!1},ct.regexp_eatZero=function(u){return u.current()===48&&!Br(u.lookahead())?(u.lastIntValue=0,u.advance(),!0):!1},ct.regexp_eatControlEscape=function(u){var b=u.current();return b===116?(u.lastIntValue=9,u.advance(),!0):b===110?(u.lastIntValue=10,u.advance(),!0):b===118?(u.lastIntValue=11,u.advance(),!0):b===102?(u.lastIntValue=12,u.advance(),!0):b===114?(u.lastIntValue=13,u.advance(),!0):!1},ct.regexp_eatControlLetter=function(u){var b=u.current();return an(b)?(u.lastIntValue=b%32,u.advance(),!0):!1};function an(u){return u>=65&&u<=90||u>=97&&u<=122}ct.regexp_eatRegExpUnicodeEscapeSequence=function(u,b){b===void 0&&(b=!1);var O=u.pos,Q=b||u.switchU;if(u.eat(117)){if(this.regexp_eatFixedHexDigits(u,4)){var ue=u.lastIntValue;if(Q&&ue>=55296&&ue<=56319){var ke=u.pos;if(u.eat(92)&&u.eat(117)&&this.regexp_eatFixedHexDigits(u,4)){var Oe=u.lastIntValue;if(Oe>=56320&&Oe<=57343)return u.lastIntValue=(ue-55296)*1024+(Oe-56320)+65536,!0}u.pos=ke,u.lastIntValue=ue}return!0}if(Q&&u.eat(123)&&this.regexp_eatHexDigits(u)&&u.eat(125)&&pn(u.lastIntValue))return!0;Q&&u.raise("Invalid unicode escape"),u.pos=O}return!1};function pn(u){return u>=0&&u<=1114111}ct.regexp_eatIdentityEscape=function(u){if(u.switchU)return this.regexp_eatSyntaxCharacter(u)?!0:u.eat(47)?(u.lastIntValue=47,!0):!1;var b=u.current();return b!==99&&(!u.switchN||b!==107)?(u.lastIntValue=b,u.advance(),!0):!1},ct.regexp_eatDecimalEscape=function(u){u.lastIntValue=0;var b=u.current();if(b>=49&&b<=57){do u.lastIntValue=10*u.lastIntValue+(b-48),u.advance();while((b=u.current())>=48&&b<=57);return!0}return!1};var kn=0,Es=1,on=2;ct.regexp_eatCharacterClassEscape=function(u){var b=u.current();if(Mo(b))return u.lastIntValue=-1,u.advance(),Es;var O=!1;if(u.switchU&&this.options.ecmaVersion>=9&&((O=b===80)||b===112)){u.lastIntValue=-1,u.advance();var Q;if(u.eat(123)&&(Q=this.regexp_eatUnicodePropertyValueExpression(u))&&u.eat(125))return O&&Q===on&&u.raise("Invalid property name"),Q;u.raise("Invalid property name")}return kn};function Mo(u){return u===100||u===68||u===115||u===83||u===119||u===87}ct.regexp_eatUnicodePropertyValueExpression=function(u){var b=u.pos;if(this.regexp_eatUnicodePropertyName(u)&&u.eat(61)){var O=u.lastStringValue;if(this.regexp_eatUnicodePropertyValue(u)){var Q=u.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(u,O,Q),Es}}if(u.pos=b,this.regexp_eatLoneUnicodePropertyNameOrValue(u)){var ue=u.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(u,ue)}return kn},ct.regexp_validateUnicodePropertyNameAndValue=function(u,b,O){Me(u.unicodeProperties.nonBinary,b)||u.raise("Invalid property name"),u.unicodeProperties.nonBinary[b].test(O)||u.raise("Invalid property value")},ct.regexp_validateUnicodePropertyNameOrValue=function(u,b){if(u.unicodeProperties.binary.test(b))return Es;if(u.switchV&&u.unicodeProperties.binaryOfStrings.test(b))return on;u.raise("Invalid property name")},ct.regexp_eatUnicodePropertyName=function(u){var b=0;for(u.lastStringValue="";fo(b=u.current());)u.lastStringValue+=$e(b),u.advance();return u.lastStringValue!==""};function fo(u){return an(u)||u===95}ct.regexp_eatUnicodePropertyValue=function(u){var b=0;for(u.lastStringValue="";po(b=u.current());)u.lastStringValue+=$e(b),u.advance();return u.lastStringValue!==""};function po(u){return fo(u)||Br(u)}ct.regexp_eatLoneUnicodePropertyNameOrValue=function(u){return this.regexp_eatUnicodePropertyValue(u)},ct.regexp_eatCharacterClass=function(u){if(u.eat(91)){var b=u.eat(94),O=this.regexp_classContents(u);return u.eat(93)||u.raise("Unterminated character class"),b&&O===on&&u.raise("Negated character class may contain strings"),!0}return!1},ct.regexp_classContents=function(u){return u.current()===93?Es:u.switchV?this.regexp_classSetExpression(u):(this.regexp_nonEmptyClassRanges(u),Es)},ct.regexp_nonEmptyClassRanges=function(u){for(;this.regexp_eatClassAtom(u);){var b=u.lastIntValue;if(u.eat(45)&&this.regexp_eatClassAtom(u)){var O=u.lastIntValue;u.switchU&&(b===-1||O===-1)&&u.raise("Invalid character class"),b!==-1&&O!==-1&&b>O&&u.raise("Range out of order in character class")}}},ct.regexp_eatClassAtom=function(u){var b=u.pos;if(u.eat(92)){if(this.regexp_eatClassEscape(u))return!0;if(u.switchU){var O=u.current();(O===99||Rr(O))&&u.raise("Invalid class escape"),u.raise("Invalid escape")}u.pos=b}var Q=u.current();return Q!==93?(u.lastIntValue=Q,u.advance(),!0):!1},ct.regexp_eatClassEscape=function(u){var b=u.pos;if(u.eat(98))return u.lastIntValue=8,!0;if(u.switchU&&u.eat(45))return u.lastIntValue=45,!0;if(!u.switchU&&u.eat(99)){if(this.regexp_eatClassControlLetter(u))return!0;u.pos=b}return this.regexp_eatCharacterClassEscape(u)||this.regexp_eatCharacterEscape(u)},ct.regexp_classSetExpression=function(u){var b=Es,O;if(!this.regexp_eatClassSetRange(u))if(O=this.regexp_eatClassSetOperand(u)){O===on&&(b=on);for(var Q=u.pos;u.eatChars([38,38]);){if(u.current()!==38&&(O=this.regexp_eatClassSetOperand(u))){O!==on&&(b=Es);continue}u.raise("Invalid character in character class")}if(Q!==u.pos)return b;for(;u.eatChars([45,45]);)this.regexp_eatClassSetOperand(u)||u.raise("Invalid character in character class");if(Q!==u.pos)return b}else u.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(u)){if(O=this.regexp_eatClassSetOperand(u),!O)return b;O===on&&(b=on)}},ct.regexp_eatClassSetRange=function(u){var b=u.pos;if(this.regexp_eatClassSetCharacter(u)){var O=u.lastIntValue;if(u.eat(45)&&this.regexp_eatClassSetCharacter(u)){var Q=u.lastIntValue;return O!==-1&&Q!==-1&&O>Q&&u.raise("Range out of order in character class"),!0}u.pos=b}return!1},ct.regexp_eatClassSetOperand=function(u){return this.regexp_eatClassSetCharacter(u)?Es:this.regexp_eatClassStringDisjunction(u)||this.regexp_eatNestedClass(u)},ct.regexp_eatNestedClass=function(u){var b=u.pos;if(u.eat(91)){var O=u.eat(94),Q=this.regexp_classContents(u);if(u.eat(93))return O&&Q===on&&u.raise("Negated character class may contain strings"),Q;u.pos=b}if(u.eat(92)){var ue=this.regexp_eatCharacterClassEscape(u);if(ue)return ue;u.pos=b}return null},ct.regexp_eatClassStringDisjunction=function(u){var b=u.pos;if(u.eatChars([92,113])){if(u.eat(123)){var O=this.regexp_classStringDisjunctionContents(u);if(u.eat(125))return O}else u.raise("Invalid escape");u.pos=b}return null},ct.regexp_classStringDisjunctionContents=function(u){for(var b=this.regexp_classString(u);u.eat(124);)this.regexp_classString(u)===on&&(b=on);return b},ct.regexp_classString=function(u){for(var b=0;this.regexp_eatClassSetCharacter(u);)b++;return b===1?Es:on},ct.regexp_eatClassSetCharacter=function(u){var b=u.pos;if(u.eat(92))return this.regexp_eatCharacterEscape(u)||this.regexp_eatClassSetReservedPunctuator(u)?!0:u.eat(98)?(u.lastIntValue=8,!0):(u.pos=b,!1);var O=u.current();return O<0||O===u.lookahead()&&Yl(O)||Oo(O)?!1:(u.advance(),u.lastIntValue=O,!0)};function Yl(u){return u===33||u>=35&&u<=38||u>=42&&u<=44||u===46||u>=58&&u<=64||u===94||u===96||u===126}function Oo(u){return u===40||u===41||u===45||u===47||u>=91&&u<=93||u>=123&&u<=125}ct.regexp_eatClassSetReservedPunctuator=function(u){var b=u.current();return fa(b)?(u.lastIntValue=b,u.advance(),!0):!1};function fa(u){return u===33||u===35||u===37||u===38||u===44||u===45||u>=58&&u<=62||u===64||u===96||u===126}ct.regexp_eatClassControlLetter=function(u){var b=u.current();return Br(b)||b===95?(u.lastIntValue=b%32,u.advance(),!0):!1},ct.regexp_eatHexEscapeSequence=function(u){var b=u.pos;if(u.eat(120)){if(this.regexp_eatFixedHexDigits(u,2))return!0;u.switchU&&u.raise("Invalid escape"),u.pos=b}return!1},ct.regexp_eatDecimalDigits=function(u){var b=u.pos,O=0;for(u.lastIntValue=0;Br(O=u.current());)u.lastIntValue=10*u.lastIntValue+(O-48),u.advance();return u.pos!==b};function Br(u){return u>=48&&u<=57}ct.regexp_eatHexDigits=function(u){var b=u.pos,O=0;for(u.lastIntValue=0;sr(O=u.current());)u.lastIntValue=16*u.lastIntValue+pa(O),u.advance();return u.pos!==b};function sr(u){return u>=48&&u<=57||u>=65&&u<=70||u>=97&&u<=102}function pa(u){return u>=65&&u<=70?10+(u-65):u>=97&&u<=102?10+(u-97):u-48}ct.regexp_eatLegacyOctalEscapeSequence=function(u){if(this.regexp_eatOctalDigit(u)){var b=u.lastIntValue;if(this.regexp_eatOctalDigit(u)){var O=u.lastIntValue;b<=3&&this.regexp_eatOctalDigit(u)?u.lastIntValue=b*64+O*8+u.lastIntValue:u.lastIntValue=b*8+O}else u.lastIntValue=b;return!0}return!1},ct.regexp_eatOctalDigit=function(u){var b=u.current();return Rr(b)?(u.lastIntValue=b-48,u.advance(),!0):(u.lastIntValue=0,!1)};function Rr(u){return u>=48&&u<=55}ct.regexp_eatFixedHexDigits=function(u,b){var O=u.pos;u.lastIntValue=0;for(var Q=0;Q<b;++Q){var ue=u.current();if(!sr(ue))return u.pos=O,!1;u.lastIntValue=16*u.lastIntValue+pa(ue),u.advance()}return!0};var nr=function(b){this.type=b.type,this.value=b.value,this.start=b.start,this.end=b.end,b.options.locations&&(this.loc=new Mt(b,b.startLoc,b.endLoc)),b.options.ranges&&(this.range=[b.start,b.end])},Wt=h.prototype;Wt.next=function(u){!u&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new nr(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Wt.getToken=function(){return this.next(),new nr(this)},typeof Symbol<"u"&&(Wt[Symbol.iterator]=function(){var u=this;return{next:function(){var b=u.getToken();return{done:b.type===T.eof,value:b}}}}),Wt.nextToken=function(){var u=this.curContext();if((!u||!u.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(T.eof);if(u.override)return u.override(this);this.readToken(this.fullCharCodeAtPos())},Wt.readToken=function(u){return F(u,this.options.ecmaVersion>=6)||u===92?this.readWord():this.getTokenFromCode(u)},Wt.fullCharCodeAtPos=function(){var u=this.input.charCodeAt(this.pos);if(u<=55295||u>=56320)return u;var b=this.input.charCodeAt(this.pos+1);return b<=56319||b>=57344?u:(u<<10)+b-56613888},Wt.skipBlockComment=function(){var u=this.options.onComment&&this.curPosition(),b=this.pos,O=this.input.indexOf("*/",this.pos+=2);if(O===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=O+2,this.options.locations)for(var Q=void 0,ue=b;(Q=Be(this.input,ue,this.pos))>-1;)++this.curLine,ue=this.lineStart=Q;this.options.onComment&&this.options.onComment(!0,this.input.slice(b+2,O),b,this.pos,u,this.curPosition())},Wt.skipLineComment=function(u){for(var b=this.pos,O=this.options.onComment&&this.curPosition(),Q=this.input.charCodeAt(this.pos+=u);this.pos<this.input.length&&!be(Q);)Q=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(b+u,this.pos),b,this.pos,O,this.curPosition())},Wt.skipSpace=function(){e:for(;this.pos<this.input.length;){var u=this.input.charCodeAt(this.pos);switch(u){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(u>8&&u<14||u>=5760&&xe.test(String.fromCharCode(u)))++this.pos;else break e}}},Wt.finishToken=function(u,b){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var O=this.type;this.type=u,this.value=b,this.updateContext(O)},Wt.readToken_dot=function(){var u=this.input.charCodeAt(this.pos+1);if(u>=48&&u<=57)return this.readNumber(!0);var b=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&u===46&&b===46?(this.pos+=3,this.finishToken(T.ellipsis)):(++this.pos,this.finishToken(T.dot))},Wt.readToken_slash=function(){var u=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):u===61?this.finishOp(T.assign,2):this.finishOp(T.slash,1)},Wt.readToken_mult_modulo_exp=function(u){var b=this.input.charCodeAt(this.pos+1),O=1,Q=u===42?T.star:T.modulo;return this.options.ecmaVersion>=7&&u===42&&b===42&&(++O,Q=T.starstar,b=this.input.charCodeAt(this.pos+2)),b===61?this.finishOp(T.assign,O+1):this.finishOp(Q,O)},Wt.readToken_pipe_amp=function(u){var b=this.input.charCodeAt(this.pos+1);if(b===u){if(this.options.ecmaVersion>=12){var O=this.input.charCodeAt(this.pos+2);if(O===61)return this.finishOp(T.assign,3)}return this.finishOp(u===124?T.logicalOR:T.logicalAND,2)}return b===61?this.finishOp(T.assign,2):this.finishOp(u===124?T.bitwiseOR:T.bitwiseAND,1)},Wt.readToken_caret=function(){var u=this.input.charCodeAt(this.pos+1);return u===61?this.finishOp(T.assign,2):this.finishOp(T.bitwiseXOR,1)},Wt.readToken_plus_min=function(u){var b=this.input.charCodeAt(this.pos+1);return b===u?b===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ce.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(T.incDec,2):b===61?this.finishOp(T.assign,2):this.finishOp(T.plusMin,1)},Wt.readToken_lt_gt=function(u){var b=this.input.charCodeAt(this.pos+1),O=1;return b===u?(O=u===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+O)===61?this.finishOp(T.assign,O+1):this.finishOp(T.bitShift,O)):b===33&&u===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(b===61&&(O=2),this.finishOp(T.relational,O))},Wt.readToken_eq_excl=function(u){var b=this.input.charCodeAt(this.pos+1);return b===61?this.finishOp(T.equality,this.input.charCodeAt(this.pos+2)===61?3:2):u===61&&b===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(T.arrow)):this.finishOp(u===61?T.eq:T.prefix,1)},Wt.readToken_question=function(){var u=this.options.ecmaVersion;if(u>=11){var b=this.input.charCodeAt(this.pos+1);if(b===46){var O=this.input.charCodeAt(this.pos+2);if(O<48||O>57)return this.finishOp(T.questionDot,2)}if(b===63){if(u>=12){var Q=this.input.charCodeAt(this.pos+2);if(Q===61)return this.finishOp(T.assign,3)}return this.finishOp(T.coalesce,2)}}return this.finishOp(T.question,1)},Wt.readToken_numberSign=function(){var u=this.options.ecmaVersion,b=35;if(u>=13&&(++this.pos,b=this.fullCharCodeAtPos(),F(b,!0)||b===92))return this.finishToken(T.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+$e(b)+"'")},Wt.getTokenFromCode=function(u){switch(u){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(T.parenL);case 41:return++this.pos,this.finishToken(T.parenR);case 59:return++this.pos,this.finishToken(T.semi);case 44:return++this.pos,this.finishToken(T.comma);case 91:return++this.pos,this.finishToken(T.bracketL);case 93:return++this.pos,this.finishToken(T.bracketR);case 123:return++this.pos,this.finishToken(T.braceL);case 125:return++this.pos,this.finishToken(T.braceR);case 58:return++this.pos,this.finishToken(T.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(T.backQuote);case 48:var b=this.input.charCodeAt(this.pos+1);if(b===120||b===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(b===111||b===79)return this.readRadixNumber(8);if(b===98||b===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(u);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(u);case 124:case 38:return this.readToken_pipe_amp(u);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(u);case 60:case 62:return this.readToken_lt_gt(u);case 61:case 33:return this.readToken_eq_excl(u);case 63:return this.readToken_question();case 126:return this.finishOp(T.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+$e(u)+"'")},Wt.finishOp=function(u,b){var O=this.input.slice(this.pos,this.pos+b);return this.pos+=b,this.finishToken(u,O)},Wt.readRegexp=function(){for(var u,b,O=this.pos;;){this.pos>=this.input.length&&this.raise(O,"Unterminated regular expression");var Q=this.input.charAt(this.pos);if(Ce.test(Q)&&this.raise(O,"Unterminated regular expression"),u)u=!1;else{if(Q==="[")b=!0;else if(Q==="]"&&b)b=!1;else if(Q==="/"&&!b)break;u=Q==="\\"}++this.pos}var ue=this.input.slice(O,this.pos);++this.pos;var ke=this.pos,Oe=this.readWord1();this.containsEsc&&this.unexpected(ke);var pt=this.regexpState||(this.regexpState=new cs(this));pt.reset(O,ue,Oe),this.validateRegExpFlags(pt),this.validateRegExpPattern(pt);var _t=null;try{_t=new RegExp(ue,Oe)}catch{}return this.finishToken(T.regexp,{pattern:ue,flags:Oe,value:_t})},Wt.readInt=function(u,b,O){for(var Q=this.options.ecmaVersion>=12&&b===void 0,ue=O&&this.input.charCodeAt(this.pos)===48,ke=this.pos,Oe=0,pt=0,_t=0,ni=b??1/0;_t<ni;++_t,++this.pos){var Pt=this.input.charCodeAt(this.pos),ei=void 0;if(Q&&Pt===95){ue&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),pt===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),_t===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),pt=Pt;continue}if(Pt>=97?ei=Pt-97+10:Pt>=65?ei=Pt-65+10:Pt>=48&&Pt<=57?ei=Pt-48:ei=1/0,ei>=u)break;pt=Pt,Oe=Oe*u+ei}return Q&&pt===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===ke||b!=null&&this.pos-ke!==b?null:Oe};function Bn(u,b){return b?parseInt(u,8):parseFloat(u.replace(/_/g,""))}function Gn(u){return typeof BigInt!="function"?null:BigInt(u.replace(/_/g,""))}Wt.readRadixNumber=function(u){var b=this.pos;this.pos+=2;var O=this.readInt(u);return O==null&&this.raise(this.start+2,"Expected number in radix "+u),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(O=Gn(this.input.slice(b,this.pos)),++this.pos):F(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(T.num,O)},Wt.readNumber=function(u){var b=this.pos;!u&&this.readInt(10,void 0,!0)===null&&this.raise(b,"Invalid number");var O=this.pos-b>=2&&this.input.charCodeAt(b)===48;O&&this.strict&&this.raise(b,"Invalid number");var Q=this.input.charCodeAt(this.pos);if(!O&&!u&&this.options.ecmaVersion>=11&&Q===110){var ue=Gn(this.input.slice(b,this.pos));return++this.pos,F(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(T.num,ue)}O&&/[89]/.test(this.input.slice(b,this.pos))&&(O=!1),Q===46&&!O&&(++this.pos,this.readInt(10),Q=this.input.charCodeAt(this.pos)),(Q===69||Q===101)&&!O&&(Q=this.input.charCodeAt(++this.pos),(Q===43||Q===45)&&++this.pos,this.readInt(10)===null&&this.raise(b,"Invalid number")),F(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var ke=Bn(this.input.slice(b,this.pos),O);return this.finishToken(T.num,ke)},Wt.readCodePoint=function(){var u=this.input.charCodeAt(this.pos),b;if(u===123){this.options.ecmaVersion<6&&this.unexpected();var O=++this.pos;b=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,b>1114111&&this.invalidStringToken(O,"Code point out of bounds")}else b=this.readHexChar(4);return b},Wt.readString=function(u){for(var b="",O=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var Q=this.input.charCodeAt(this.pos);if(Q===u)break;Q===92?(b+=this.input.slice(O,this.pos),b+=this.readEscapedChar(!1),O=this.pos):Q===8232||Q===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(be(Q)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return b+=this.input.slice(O,this.pos++),this.finishToken(T.string,b)};var Rn={};Wt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(u){if(u===Rn)this.readInvalidTemplateToken();else throw u}this.inTemplateElement=!1},Wt.invalidStringToken=function(u,b){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Rn;this.raise(u,b)},Wt.readTmplToken=function(){for(var u="",b=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var O=this.input.charCodeAt(this.pos);if(O===96||O===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===T.template||this.type===T.invalidTemplate)?O===36?(this.pos+=2,this.finishToken(T.dollarBraceL)):(++this.pos,this.finishToken(T.backQuote)):(u+=this.input.slice(b,this.pos),this.finishToken(T.template,u));if(O===92)u+=this.input.slice(b,this.pos),u+=this.readEscapedChar(!0),b=this.pos;else if(be(O)){switch(u+=this.input.slice(b,this.pos),++this.pos,O){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:u+=`
`;break;default:u+=String.fromCharCode(O);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),b=this.pos}else++this.pos}},Wt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(T.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Wt.readEscapedChar=function(u){var b=this.input.charCodeAt(++this.pos);switch(++this.pos,b){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return $e(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),u){var O=this.pos-1;this.invalidStringToken(O,"Invalid escape sequence in template string")}default:if(b>=48&&b<=55){var Q=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],ue=parseInt(Q,8);return ue>255&&(Q=Q.slice(0,-1),ue=parseInt(Q,8)),this.pos+=Q.length-1,b=this.input.charCodeAt(this.pos),(Q!=="0"||b===56||b===57)&&(this.strict||u)&&this.invalidStringToken(this.pos-1-Q.length,u?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(ue)}return be(b)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(b)}},Wt.readHexChar=function(u){var b=this.pos,O=this.readInt(16,u);return O===null&&this.invalidStringToken(b,"Bad character escape sequence"),O},Wt.readWord1=function(){this.containsEsc=!1;for(var u="",b=!0,O=this.pos,Q=this.options.ecmaVersion>=6;this.pos<this.input.length;){var ue=this.fullCharCodeAtPos();if(K(ue,Q))this.pos+=ue<=65535?1:2;else if(ue===92){this.containsEsc=!0,u+=this.input.slice(O,this.pos);var ke=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Oe=this.readCodePoint();(b?F:K)(Oe,Q)||this.invalidStringToken(ke,"Invalid Unicode escape"),u+=$e(Oe),O=this.pos}else break;b=!1}return u+this.input.slice(O,this.pos)},Wt.readWord=function(){var u=this.readWord1(),b=T.name;return this.keywords.test(u)&&(b=pe[u]),this.finishToken(b,u)};var Zr="8.14.1";h.acorn={Parser:h,version:Zr,defaultOptions:qt,Position:oi,SourceLocation:Mt,getLineInfo:Ni,Node:de,TokenType:M,tokTypes:T,keywordTypes:pe,TokContext:W,tokContexts:R,isIdentifierChar:K,isIdentifierStart:F,Token:nr,isNewLine:be,lineBreak:Ce,lineBreakG:ze,nonASCIIwhitespace:xe};function qo(u,b){return h.parse(u,b)}function Fo(u,b,O){return h.parseExpressionAt(u,b,O)}function go(u,b){return h.tokenizer(u,b)}t.Node=de,t.Parser=h,t.Position=oi,t.SourceLocation=Mt,t.TokContext=W,t.Token=nr,t.TokenType=M,t.defaultOptions=qt,t.getLineInfo=Ni,t.isIdentifierChar=K,t.isIdentifierStart=F,t.isNewLine=be,t.keywordTypes=pe,t.lineBreak=Ce,t.lineBreakG=ze,t.nonASCIIwhitespace=xe,t.parse=qo,t.parseExpressionAt=Fo,t.tokContexts=R,t.tokTypes=T,t.tokenizer=go,t.version=Zr})}(wd,wd.exports)),wd.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(n){(function(e,t){e=e||ym;var i=e.window,s=e.document,r=new function(){var a=/^(statics|enumerable|beans|preserve)$/,h=[],d=h.slice,m=Object.create,y=Object.getOwnPropertyDescriptor,v=Object.defineProperty,S=h.forEach||function(B,k){for(var X=0,z=this.length;X<z;X++)B.call(k,this[X],X,this)},w=function(B,k){for(var X in this)this.hasOwnProperty(X)&&B.call(k,this[X],X,this)},E=Object.assign||function(B){for(var k=1,X=arguments.length;k<X;k++){var z=arguments[k];for(var W in z)z.hasOwnProperty(W)&&(B[W]=z[W])}return B},I=function(B,k,X){if(B){var z=y(B,"length");(z&&typeof z.value=="number"?S:w).call(B,k,X=X||B)}return X};function N(B,k,X,z,W){var R={};function Y(G,se){se=se||(se=y(k,G))&&(se.get?se:se.value),typeof se=="string"&&se[0]==="#"&&(se=B[se.substring(1)]||se);var he=typeof se=="function",de=se,_e=W||he&&!se.base?se&&se.get?G in B:B[G]:null,oe;(!W||!_e)&&(he&&_e&&(se.base=_e),he&&z!==!1&&(oe=G.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(R[oe[3].toLowerCase()+oe[4]]=oe[2]),(!de||he||!de.get||typeof de.get!="function"||!q.isPlainObject(de))&&(de={value:de,writable:!0}),(y(B,G)||{configurable:!0}).configurable&&(de.configurable=!0,de.enumerable=X??!oe),v(B,G,de))}if(k){for(var x in k)k.hasOwnProperty(x)&&!a.test(x)&&Y(x);for(var x in R){var H=R[x],j=B["set"+H],J=B["get"+H]||j&&B["is"+H];J&&(z===!0||J.length===0)&&Y(x,{get:J,set:j})}}return B}function q(){for(var B=0,k=arguments.length;B<k;B++){var X=arguments[B];X&&E(this,X)}return this}return N(q,{inject:function(B){if(B){var k=B.statics===!0?B:B.statics,X=B.beans,z=B.preserve;k!==B&&N(this.prototype,B,B.enumerable,X,z),N(this,k,null,X,z)}for(var W=1,R=arguments.length;W<R;W++)this.inject(arguments[W]);return this},extend:function(){for(var B=this,k,X,z=0,W,R=arguments.length;z<R&&!(k&&X);z++)W=arguments[z],k=k||W.initialize,X=X||W.prototype;return k=k||function(){B.apply(this,arguments)},X=k.prototype=X||m(this.prototype),v(X,"constructor",{value:k,writable:!0,configurable:!0}),N(k,this),arguments.length&&this.inject.apply(k,arguments),k.base=B,k}}).inject({enumerable:!1,initialize:q,set:q,inject:function(){for(var B=0,k=arguments.length;B<k;B++){var X=arguments[B];X&&N(this,X,X.enumerable,X.beans,X.preserve)}return this},extend:function(){var B=m(this);return B.inject.apply(B,arguments)},each:function(B,k){return I(this,B,k)},clone:function(){return new this.constructor(this)},statics:{set:E,each:I,create:m,define:v,describe:y,clone:function(B){return E(new B.constructor,B)},isPlainObject:function(B){var k=B!=null&&B.constructor;return k&&(k===Object||k===q||k.name==="Object")},pick:function(B,k){return B!==t?B:k},slice:function(B,k,X){return d.call(B,k,X)}}})};n.exports=r,r.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+r.each(this,function(a,h){if(!/^_/.test(h)){var d=typeof a;this.push(h+": "+(d==="number"?A.instance.number(a):d==="string"?"'"+a+"'":a))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(a){return r.importJSON(a,this)},exportJSON:function(a){return r.exportJSON(this,a)},toJSON:function(){return r.serialize(this)},set:function(a,h){return a&&r.filter(this,a,h,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function a(){var h=a.base.apply(this,arguments),d=h.prototype._class;return d&&!r.exports[d]&&(r.exports[d]=h),h},equals:function(a,h){if(a===h)return!0;if(a&&a.equals)return a.equals(h);if(h&&h.equals)return h.equals(a);if(a&&h&&typeof a=="object"&&typeof h=="object"){if(Array.isArray(a)&&Array.isArray(h)){var d=a.length;if(d!==h.length)return!1;for(;d--;)if(!r.equals(a[d],h[d]))return!1}else{var m=Object.keys(a),d=m.length;if(d!==Object.keys(h).length)return!1;for(;d--;){var y=m[d];if(!(h.hasOwnProperty(y)&&r.equals(a[y],h[y])))return!1}}return!0}return!1},read:function(a,h,d,m){if(this===r){var y=this.peek(a,h);return a.__index++,y}var v=this.prototype,S=v._readIndex,w=h||S&&a.__index||0,E=a.length,I=a[w];if(m=m||E-w,I instanceof this||d&&d.readNull&&I==null&&m<=1)return S&&(a.__index=w+1),I&&d&&d.clone?I.clone():I;if(I=r.create(v),S&&(I.__read=!0),I=I.initialize.apply(I,w>0||w+m<E?r.slice(a,w,w+m):a)||I,S){a.__index=w+I.__read;var N=I.__filtered;N&&(a.__filtered=N,I.__filtered=t),I.__read=t}return I},peek:function(a,h){return a[a.__index=h||a.__index||0]},remain:function(a){return a.length-(a.__index||0)},readList:function(a,h,d,m){for(var y=[],v,S=h||0,w=m?S+m:a.length,E=S;E<w;E++)y.push(Array.isArray(v=a[E])?this.read(v,0,d):this.read(a,E,d,1));return y},readNamed:function(a,h,d,m,y){var v=this.getNamed(a,h),S=v!==t;if(S){var w=a.__filtered;if(!w){var E=this.getSource(a);w=a.__filtered=r.create(E),w.__unfiltered=E}w[h]=t}return this.read(S?[v]:a,d,m,y)},readSupported:function(a,h){var d=this.getSource(a),m=this,y=!1;return d&&Object.keys(d).forEach(function(v){if(v in h){var S=m.readNamed(a,v);S!==t&&(h[v]=S),y=!0}}),y},getSource:function(a){var h=a.__source;if(h===t){var d=a.length===1&&a[0];h=a.__source=d&&r.isPlainObject(d)?d:null}return h},getNamed:function(a,h){var d=this.getSource(a);if(d)return h?d[h]:a.__filtered||d},hasNamed:function(a,h){return!!this.getNamed(a,h)},filter:function(a,h,d,m){var y;function v(N){if(!(d&&N in d)&&!(y&&N in y)){var q=h[N];q!==t&&(a[N]=q)}}if(m){for(var S={},w=0,E,I=m.length;w<I;w++)(E=m[w])in h&&(v(E),S[E]=!0);y=S}return Object.keys(h.__unfiltered||h).forEach(v),a},isPlainValue:function(a,h){return r.isPlainObject(a)||Array.isArray(a)||h&&typeof a=="string"},serialize:function(a,h,d,m){h=h||{};var y=!m,v;if(y&&(h.formatter=new A(h.precision),m={length:0,definitions:{},references:{},add:function(q,B){var k="#"+q._id,X=this.references[k];if(!X){this.length++;var z=B.call(q),W=q._class;W&&z[0]!==W&&z.unshift(W),this.definitions[k]=z,X=this.references[k]=[k]}return X}}),a&&a._serialize){v=a._serialize(h,m);var S=a._class;S&&!a._compactSerialize&&(y||!d)&&v[0]!==S&&v.unshift(S)}else if(Array.isArray(a)){v=[];for(var w=0,E=a.length;w<E;w++)v[w]=r.serialize(a[w],h,d,m)}else if(r.isPlainObject(a)){v={};for(var I=Object.keys(a),w=0,E=I.length;w<E;w++){var N=I[w];v[N]=r.serialize(a[N],h,d,m)}}else typeof a=="number"?v=h.formatter.number(a,h.precision):v=a;return y&&m.length>0?[["dictionary",m.definitions],v]:v},deserialize:function(a,h,d,m,y){var v=a,S=!d,w=S&&a&&a.length&&a[0][0]==="dictionary";if(d=d||{},Array.isArray(a)){var E=a[0],I=E==="dictionary";if(a.length==1&&/^#/.test(E))return d.dictionary[E];E=r.exports[E],v=[];for(var N=E?1:0,q=a.length;N<q;N++)v.push(r.deserialize(a[N],h,d,I,w));if(E){var B=v;h?v=h(E,B,S||y):v=new E(B)}}else if(r.isPlainObject(a)){v={},m&&(d.dictionary=v);for(var k in a)v[k]=r.deserialize(a[k],h,d)}return w?v[1]:v},exportJSON:function(a,h){var d=r.serialize(a,h);return h&&h.asString==!1?d:JSON.stringify(d)},importJSON:function(a,h){return r.deserialize(typeof a=="string"?JSON.parse(a):a,function(d,m,y){var v=y&&h&&h.constructor===d,S=v?h:r.create(d.prototype);if(m.length===1&&S instanceof T&&(v||!(S instanceof ze))){var w=m[0];r.isPlainObject(w)&&(w.insert=!1,v&&(m=m.concat([T.INSERT])))}return(v?S.set:d).apply(S,m),v&&(h=null),S})},push:function(a,h){var d=h.length;if(d<4096)a.push.apply(a,h);else{var m=a.length;a.length+=d;for(var y=0;y<d;y++)a[m+y]=h[y]}return a},splice:function(a,h,d,m){var y=h&&h.length,v=d===t;d=v?a.length:d,d>a.length&&(d=a.length);for(var S=0;S<y;S++)h[S]._index=d+S;if(v)return r.push(a,h),[];var w=[d,m];h&&r.push(w,h);for(var E=a.splice.apply(a,w),S=0,I=E.length;S<I;S++)E[S]._index=t;for(var S=d+y,I=a.length;S<I;S++)a[S]._index=S;return E},capitalize:function(a){return a.replace(/\b[a-z]/g,function(h){return h.toUpperCase()})},camelize:function(a){return a.replace(/-(.)/g,function(h,d){return d.toUpperCase()})},hyphenate:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var o={on:function(a,h){if(typeof a!="string")r.each(a,function(v,S){this.on(S,v)},this);else{var d=this._eventTypes,m=d&&d[a],y=this._callbacks=this._callbacks||{};y=y[a]=y[a]||[],y.indexOf(h)===-1&&(y.push(h),m&&m.install&&y.length===1&&m.install.call(this,a))}return this},off:function(a,h){if(typeof a!="string"){r.each(a,function(S,w){this.off(w,S)},this);return}var d=this._eventTypes,m=d&&d[a],y=this._callbacks&&this._callbacks[a],v;return y&&(!h||(v=y.indexOf(h))!==-1&&y.length===1?(m&&m.uninstall&&m.uninstall.call(this,a),delete this._callbacks[a]):v!==-1&&y.splice(v,1)),this},once:function(a,h){return this.on(a,function d(){h.apply(this,arguments),this.off(a,d)})},emit:function(a,h){var d=this._callbacks&&this._callbacks[a];if(!d)return!1;var m=r.slice(arguments,1),y=h&&h.target&&!h.currentTarget;d=d.slice(),y&&(h.currentTarget=this);for(var v=0,S=d.length;v<S;v++)if(d[v].apply(this,m)==!1){h&&h.stop&&h.stop();break}return y&&delete h.currentTarget,!0},responds:function(a){return!!(this._callbacks&&this._callbacks[a])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(a){var h=this._eventTypes,d=this._callbacks,m=a?"install":"uninstall";if(h){for(var y in d)if(d[y].length>0){var v=h[y],S=v&&v[m];S&&S.call(this,y)}}},statics:{inject:function a(h){var d=h._events;if(d){var m={};r.each(d,function(y,v){var S=typeof y=="string",w=S?y:v,E=r.capitalize(w),I=w.substring(2).toLowerCase();m[I]=S?{}:y,w="_"+w,h["get"+E]=function(){return this[w]},h["set"+E]=function(N){var q=this[w];q&&this.off(I,q),N&&this.on(I,N),this[w]=N}}),h._eventTypes=m}return a.base.apply(this,arguments)}}},c=r.extend({_class:"PaperScope",initialize:function a(){Rt=this,this.settings=new r({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=a._id++,a._scopes[this._id]=this;var h=a.prototype;if(!this.support){var d=rt.getContext(1,1)||{};h.support={nativeDash:"setLineDash"in d||"mozDash"in d,nativeBlendModes:Ue.nativeModes},rt.release(d)}if(!this.agent){var m=e.navigator.userAgent.toLowerCase(),y=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(m)||[])[0],v=y==="darwin"?"mac":y,S=h.agent=h.browser={platform:v};v&&(S[v]=!0),m.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(w,E,I,N,q){if(!S.chrome){var B=E==="opera"?N:/^(node|trident)$/.test(E)?q:I;S.version=B,S.versionNumber=parseFloat(B),E={trident:"msie",jsdom:"node"}[E]||E,S.name=E,S[E]=!0}}),S.chrome&&delete S.webkit,S.atom&&delete S.chrome}},version:"0.12.18",getView:function(){var a=this.project;return a&&a._view},getPaper:function(){return this},execute:function(a,h){var d=Rt.PaperScript.execute(a,this,h);return ft.updateFocus(),d},install:function(a){var h=this;r.each(["project","view","tool"],function(m){r.define(a,m,{configurable:!0,get:function(){return h[m]}})});for(var d in this)!/^_/.test(d)&&this[d]&&(a[d]=this[d])},setup:function(a){return Rt=this,this.project=new ce(a),this},createCanvas:function(a,h){return rt.getCanvas(a,h)},activate:function(){Rt=this},clear:function(){for(var a=this.projects,h=this.tools,d=a.length-1;d>=0;d--)a[d].remove();for(var d=h.length-1;d>=0;d--)h[d].remove()},remove:function(){this.clear(),delete c._scopes[this._id]},statics:new function(){function a(h){return h+="Attribute",function(d,m){return d[h](m)||d[h]("data-paper-"+m)}}return{_scopes:{},_id:0,get:function(h){return this._scopes[h]||null},getAttribute:a("get"),hasAttribute:a("has")}}}),p=r.extend(o,{initialize:function(a){this._scope=Rt,this._index=this._scope[this._list].push(this)-1,(a||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var a=this._scope[this._reference];return a&&a!==this&&a.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",a),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(r.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),g={findItemBoundsCollisions:function(a,h,d){function m(S){for(var w=new Array(S.length),E=0;E<S.length;E++){var I=S[E].getBounds();w[E]=[I.left,I.top,I.right,I.bottom]}return w}var y=m(a),v=!h||h===a?y:m(h);return this.findBoundsCollisions(y,v,d||0)},findCurveBoundsCollisions:function(a,h,d,m){function y(B){for(var k=Math.min,X=Math.max,z=new Array(B.length),W=0;W<B.length;W++){var R=B[W];z[W]=[k(R[0],R[2],R[4],R[6]),k(R[1],R[3],R[5],R[7]),X(R[0],R[2],R[4],R[6]),X(R[1],R[3],R[5],R[7])]}return z}var v=y(a),S=!h||h===a?v:y(h);if(m){for(var w=this.findBoundsCollisions(v,S,d||0,!1,!0),E=this.findBoundsCollisions(v,S,d||0,!0,!0),I=[],N=0,q=w.length;N<q;N++)I[N]={hor:w[N],ver:E[N]};return I}return this.findBoundsCollisions(v,S,d||0)},findBoundsCollisions:function(a,h,d,m,y){var v=!h||a===h,S=v?a:a.concat(h),w=a.length,E=S.length;function I(ht,mt,vt){for(var Ke=0,We=ht.length;Ke<We;){var yt=We+Ke>>>1;S[ht[yt]][mt]<vt?Ke=yt+1:We=yt}return Ke-1}for(var N=m?1:0,q=N+2,B=m?0:1,k=B+2,X=new Array(E),z=0;z<E;z++)X[z]=z;X.sort(function(ht,mt){return S[ht][N]-S[mt][N]});for(var W=[],R=new Array(w),z=0;z<E;z++){var Y=X[z],x=S[Y],H=v?Y:Y-w,j=Y<w,J=v||!j,G=j?[]:null;if(W.length){var se=I(W,q,x[N]-d)+1;if(W.splice(0,se),v&&y){G=G.concat(W);for(var he=0;he<W.length;he++){var de=W[he];R[de].push(H)}}else for(var _e=x[k],oe=x[B],he=0;he<W.length;he++){var de=W[he],ye=S[de],Ae=de<w,Ee=v||de>=w;(y||(j&&Ee||J&&Ae)&&_e>=ye[B]-d&&oe<=ye[k]+d)&&(j&&Ee&&G.push(v?de:de-w),J&&Ae&&R[de].push(H))}}if(j&&(a===h&&G.push(Y),R[Y]=G),W.length){var De=x[q],Re=I(W,q,De);W.splice(Re+1,0,Y)}else W.push(Y)}for(var z=0;z<R.length;z++){var it=R[z];it&&it.sort(function(mt,vt){return mt-vt})}return R}},A=r.extend({initialize:function(a){this.precision=r.pick(a,5),this.multiplier=Math.pow(10,this.precision)},number:function(a){return this.precision<16?Math.round(a*this.multiplier)/this.multiplier:a},pair:function(a,h,d){return this.number(a)+(d||",")+this.number(h)},point:function(a,h){return this.number(a.x)+(h||",")+this.number(a.y)},size:function(a,h){return this.number(a.width)+(h||",")+this.number(a.height)},rectangle:function(a,h){return this.point(a,h)+(h||",")+this.size(a,h)}});A.instance=new A;var C=new function(){var a=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],h=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],d=Math.abs,m=Math.sqrt,y=Math.pow,v=Math.log2||function(q){return Math.log(q)*Math.LOG2E},S=1e-12,w=112e-18;function E(q,B,k){return q<B?B:q>k?k:q}function I(q,B,k){function X(se){var he=se*134217729,de=se-he,_e=de+he,oe=se-_e;return[_e,oe]}var z=B*B-q*k,W=B*B+q*k;if(d(z)*3<W){var R=X(q),Y=X(B),x=X(k),H=B*B,j=Y[0]*Y[0]-H+2*Y[0]*Y[1]+Y[1]*Y[1],J=q*k,G=R[0]*x[0]-J+R[0]*x[1]+R[1]*x[0]+R[1]*x[1];z=H-J+(j-G)}return z}function N(){var q=Math.max.apply(Math,arguments);return q&&(q<1e-8||q>1e8)?y(2,-Math.round(v(q))):0}return{EPSILON:S,MACHINE_EPSILON:w,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(m(2)-1)/3,isZero:function(q){return q>=-1e-12&&q<=S},isMachineZero:function(q){return q>=-112e-18&&q<=w},clamp:E,integrate:function(q,B,k,X){for(var z=a[X-2],W=h[X-2],R=(k-B)*.5,Y=R+B,x=0,H=X+1>>1,j=X&1?W[x++]*q(Y):0;x<H;){var J=R*z[x];j+=W[x++]*(q(Y+J)+q(Y-J))}return R*j},findRoot:function(q,B,k,X,z,W,R){for(var Y=0;Y<W;Y++){var x=q(k),H=x/B(k),j=k-H;if(d(H)<R){k=j;break}x>0?(z=k,k=j<=X?(X+z)*.5:j):(X=k,k=j>=z?(X+z)*.5:j)}return E(k,X,z)},solveQuadratic:function(q,B,k,X,z,W){var R,Y=1/0;if(d(q)<S){if(d(B)<S)return d(k)<S?-1:0;R=-k/B}else{B*=-.5;var x=I(q,B,k);if(x&&d(x)<w){var H=N(d(q),d(B),d(k));H&&(q*=H,B*=H,k*=H,x=I(q,B,k))}if(x>=-112e-18){var j=x<0?0:m(x),J=B+(B<0?-j:j);J===0?(R=k/q,Y=-R):(R=J/q,Y=k/J)}}var G=0,se=z==null,he=z-S,de=W+S;return isFinite(R)&&(se||R>he&&R<de)&&(X[G++]=se?R:E(R,z,W)),Y!==R&&isFinite(Y)&&(se||Y>he&&Y<de)&&(X[G++]=se?Y:E(Y,z,W)),G},solveCubic:function(q,B,k,X,z,W,R){var Y=N(d(q),d(B),d(k),d(X)),x,H,j,J,G;Y&&(q*=Y,B*=Y,k*=Y,X*=Y);function se(Re){x=Re;var it=q*x;H=it+B,j=H*x+k,J=(it+H)*x+j,G=j*x+X}if(d(q)<S)q=B,H=k,j=X,x=1/0;else if(d(X)<S)H=B,j=k,x=0;else{se(-(B/q)/3);var he=G/q,de=y(d(he),1/3),_e=he<0?-1:1,oe=-J/q,ye=oe>0?1.324717957244746*Math.max(de,m(oe)):de,Ae=x-_e*ye;if(Ae!==x){do se(Ae),Ae=J===0?x:x-G/J/(1+w);while(_e*Ae>_e*x);d(q)*x*x>d(X/x)&&(j=-X/x,H=(j-k)/x)}}var Ee=C.solveQuadratic(q,H,j,z,W,R),De=W==null;return isFinite(x)&&(Ee===0||Ee>0&&x!==z[0]&&x!==z[1])&&(De||x>W-S&&x<R+S)&&(z[Ee++]=De?x:E(x,W,R)),Ee}}},D={_id:1,_pools:{},get:function(a){if(a){var h=this._pools[a];return h||(h=this._pools[a]={_id:1}),h._id++}else return this._id++}},P=r.extend({_class:"Point",_readIndex:!0,initialize:function(h,d){var m=typeof h,y=this.__read,v=0;if(m==="number"){var S=typeof d=="number";this._set(h,S?d:h),y&&(v=S?2:1)}else if(m==="undefined"||h===null)this._set(0,0),y&&(v=h===null?1:0);else{var w=m==="string"?h.split(/[\s,]+/)||[]:h;v=1,Array.isArray(w)?this._set(+w[0],+(w.length>1?w[1]:w[0])):"x"in w?this._set(w.x||0,w.y||0):"width"in w?this._set(w.width||0,w.height||0):"angle"in w?(this._set(w.length||0,0),this.setAngle(w.angle||0)):(this._set(0,0),v=0)}return y&&(this.__read=v),this},set:"#initialize",_set:function(a,h){return this.x=a,this.y=h,this},equals:function(a){return this===a||a&&(this.x===a.x&&this.y===a.y||Array.isArray(a)&&this.x===a[0]&&this.y===a[1])||!1},clone:function(){return new P(this.x,this.y)},toString:function(){var a=A.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+" }"},_serialize:function(a){var h=a.formatter;return[h.number(this.x),h.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(a){if(this.isZero()){var h=this._angle||0;this._set(Math.cos(h)*a,Math.sin(h)*a)}else{var d=a/this.getLength();C.isZero(d)&&this.getAngle(),this._set(this.x*d,this.y*d)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(a){this.setAngleInRadians.call(this,a*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var a=P.read(arguments),h=this.getLength()*a.getLength();if(C.isZero(h))return NaN;var d=this.dot(a)/h;return Math.acos(d<-1?-1:d>1?1:d)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(a){if(this._angle=a,!this.isZero()){var h=this.getLength();this._set(Math.cos(a)*h,Math.sin(a)*h)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var a=P.read(arguments);return Math.atan2(this.cross(a),this.dot(a))*180/Math.PI},getDistance:function(){var a=arguments,h=P.read(a),d=h.x-this.x,m=h.y-this.y,y=d*d+m*m,v=r.read(a);return v?y:Math.sqrt(y)},normalize:function(a){a===t&&(a=1);var h=this.getLength(),d=h!==0?a/h:0,m=new P(this.x*d,this.y*d);return d>=0&&(m._angle=this._angle),m},rotate:function(a,h){if(a===0)return this.clone();a=a*Math.PI/180;var d=h?this.subtract(h):this,m=Math.sin(a),y=Math.cos(a);return d=new P(d.x*y-d.y*m,d.x*m+d.y*y),h?d.add(h):d},transform:function(a){return a?a._transformPoint(this):this},add:function(){var a=P.read(arguments);return new P(this.x+a.x,this.y+a.y)},subtract:function(){var a=P.read(arguments);return new P(this.x-a.x,this.y-a.y)},multiply:function(){var a=P.read(arguments);return new P(this.x*a.x,this.y*a.y)},divide:function(){var a=P.read(arguments);return new P(this.x/a.x,this.y/a.y)},modulo:function(){var a=P.read(arguments);return new P(this.x%a.x,this.y%a.y)},negate:function(){return new P(-this.x,-this.y)},isInside:function(){return U.read(arguments).contains(this)},isClose:function(){var a=arguments,h=P.read(a),d=r.read(a);return this.getDistance(h)<=d},isCollinear:function(){var a=P.read(arguments);return P.isCollinear(this.x,this.y,a.x,a.y)},isColinear:"#isCollinear",isOrthogonal:function(){var a=P.read(arguments);return P.isOrthogonal(this.x,this.y,a.x,a.y)},isZero:function(){var a=C.isZero;return a(this.x)&&a(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(a){return this.x*(a>1&&a<4?-1:1)>=0&&this.y*(a>2?-1:1)>=0},dot:function(){var a=P.read(arguments);return this.x*a.x+this.y*a.y},cross:function(){var a=P.read(arguments);return this.x*a.y-this.y*a.x},project:function(){var a=P.read(arguments),h=a.isZero()?0:this.dot(a)/a.dot(a);return new P(a.x*h,a.y*h)},statics:{min:function(){var a=arguments,h=P.read(a),d=P.read(a);return new P(Math.min(h.x,d.x),Math.min(h.y,d.y))},max:function(){var a=arguments,h=P.read(a),d=P.read(a);return new P(Math.max(h.x,d.x),Math.max(h.y,d.y))},random:function(){return new P(Math.random(),Math.random())},isCollinear:function(a,h,d,m){return Math.abs(a*m-h*d)<=Math.sqrt((a*a+h*h)*(d*d+m*m))*1e-8},isOrthogonal:function(a,h,d,m){return Math.abs(a*d+h*m)<=Math.sqrt((a*a+h*h)*(d*d+m*m))*1e-8}}},r.each(["round","ceil","floor","abs"],function(a){var h=Math[a];this[a]=function(){return new P(h(this.x),h(this.y))}},{})),F=P.extend({initialize:function(h,d,m,y){this._x=h,this._y=d,this._owner=m,this._setter=y},_set:function(a,h,d){return this._x=a,this._y=h,d||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner._changeSelection(this._getSelection(),a)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),K=r.extend({_class:"Size",_readIndex:!0,initialize:function(h,d){var m=typeof h,y=this.__read,v=0;if(m==="number"){var S=typeof d=="number";this._set(h,S?d:h),y&&(v=S?2:1)}else if(m==="undefined"||h===null)this._set(0,0),y&&(v=h===null?1:0);else{var w=m==="string"?h.split(/[\s,]+/)||[]:h;v=1,Array.isArray(w)?this._set(+w[0],+(w.length>1?w[1]:w[0])):"width"in w?this._set(w.width||0,w.height||0):"x"in w?this._set(w.x||0,w.y||0):(this._set(0,0),v=0)}return y&&(this.__read=v),this},set:"#initialize",_set:function(a,h){return this.width=a,this.height=h,this},equals:function(a){return a===this||a&&(this.width===a.width&&this.height===a.height||Array.isArray(a)&&this.width===a[0]&&this.height===a[1])||!1},clone:function(){return new K(this.width,this.height)},toString:function(){var a=A.instance;return"{ width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var h=a.formatter;return[h.number(this.width),h.number(this.height)]},add:function(){var a=K.read(arguments);return new K(this.width+a.width,this.height+a.height)},subtract:function(){var a=K.read(arguments);return new K(this.width-a.width,this.height-a.height)},multiply:function(){var a=K.read(arguments);return new K(this.width*a.width,this.height*a.height)},divide:function(){var a=K.read(arguments);return new K(this.width/a.width,this.height/a.height)},modulo:function(){var a=K.read(arguments);return new K(this.width%a.width,this.height%a.height)},negate:function(){return new K(-this.width,-this.height)},isZero:function(){var a=C.isZero;return a(this.width)&&a(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(a,h){return new K(Math.min(a.width,h.width),Math.min(a.height,h.height))},max:function(a,h){return new K(Math.max(a.width,h.width),Math.max(a.height,h.height))},random:function(){return new K(Math.random(),Math.random())}}},r.each(["round","ceil","floor","abs"],function(a){var h=Math[a];this[a]=function(){return new K(h(this.width),h(this.height))}},{})),M=K.extend({initialize:function(h,d,m,y){this._width=h,this._height=d,this._owner=m,this._setter=y},_set:function(a,h,d){return this._width=a,this._height=h,d||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(a){this._width=a,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(a){this._height=a,this._owner[this._setter](this)}}),U=r.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(h,d,m,y){var v=arguments,S=typeof h,w;if(S==="number"?(this._set(h,d,m,y),w=4):S==="undefined"||h===null?(this._set(0,0,0,0),w=h===null?1:0):v.length===1&&(Array.isArray(h)?(this._set.apply(this,h),w=1):h.x!==t||h.width!==t?(this._set(h.x||0,h.y||0,h.width||0,h.height||0),w=1):h.from===t&&h.to===t&&(this._set(0,0,0,0),r.readSupported(v,this)&&(w=1))),w===t){var E=P.readNamed(v,"from"),I=r.peek(v),N=E.x,q=E.y,B,k;if(I&&I.x!==t||r.hasNamed(v,"to")){var X=P.readNamed(v,"to");B=X.x-N,k=X.y-q,B<0&&(N=X.x,B=-B),k<0&&(q=X.y,k=-k)}else{var z=K.read(v);B=z.width,k=z.height}this._set(N,q,B,k),w=v.__index}var W=v.__filtered;return W&&(this.__filtered=W),this.__read&&(this.__read=w),this},set:"#initialize",_set:function(a,h,d,m){return this.x=a,this.y=h,this.width=d,this.height=m,this},clone:function(){return new U(this.x,this.y,this.width,this.height)},equals:function(a){var h=r.isPlainValue(a)?U.read(arguments):a;return h===this||h&&this.x===h.x&&this.y===h.y&&this.width===h.width&&this.height===h.height||!1},toString:function(){var a=A.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+", width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var h=a.formatter;return[h.number(this.x),h.number(this.y),h.number(this.width),h.number(this.height)]},getPoint:function(a){var h=a?P:F;return new h(this.x,this.y,this,"setPoint")},setPoint:function(){var a=P.read(arguments);this.x=a.x,this.y=a.y},getSize:function(a){var h=a?K:M;return new h(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var a=K.read(arguments),h=this._sx,d=this._sy,m=a.width,y=a.height;h&&(this.x+=(this.width-m)*h),d&&(this.y+=(this.height-y)*d),this.width=m,this.height=y,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(a){if(!this._fw){var h=a-this.x;this.width-=this._sx===.5?h*2:h}this.x=a,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(a){if(!this._fh){var h=a-this.y;this.height-=this._sy===.5?h*2:h}this.y=a,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(a){if(!this._fw){var h=a-this.x;this.width=this._sx===.5?h*2:h}this.x=a-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(a){if(!this._fh){var h=a-this.y;this.height=this._sy===.5?h*2:h}this.y=a-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(a){this._fw||this._sx===.5?this.x=a-this.width/2:(this._sx&&(this.x+=(a-this.x)*2*this._sx),this.width=(a-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(a){this._fh||this._sy===.5?this.y=a-this.height/2:(this._sy&&(this.y+=(a-this.y)*2*this._sy),this.height=(a-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(a){var h=a?P:F;return new h(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var a=P.read(arguments);return this.setCenterX(a.x),this.setCenterY(a.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(a){return a&&a.width!==t||(Array.isArray(a)?a:arguments).length===4?this._containsRectangle(U.read(arguments)):this._containsPoint(P.read(arguments))},_containsPoint:function(a){var h=a.x,d=a.y;return h>=this.x&&d>=this.y&&h<=this.x+this.width&&d<=this.y+this.height},_containsRectangle:function(a){var h=a.x,d=a.y;return h>=this.x&&d>=this.y&&h+a.width<=this.x+this.width&&d+a.height<=this.y+this.height},intersects:function(){var a=U.read(arguments),h=r.read(arguments)||0;return a.x+a.width>this.x-h&&a.y+a.height>this.y-h&&a.x<this.x+this.width+h&&a.y<this.y+this.height+h},intersect:function(){var a=U.read(arguments),h=Math.max(this.x,a.x),d=Math.max(this.y,a.y),m=Math.min(this.x+this.width,a.x+a.width),y=Math.min(this.y+this.height,a.y+a.height);return new U(h,d,m-h,y-d)},unite:function(){var a=U.read(arguments),h=Math.min(this.x,a.x),d=Math.min(this.y,a.y),m=Math.max(this.x+this.width,a.x+a.width),y=Math.max(this.y+this.height,a.y+a.height);return new U(h,d,m-h,y-d)},include:function(){var a=P.read(arguments),h=Math.min(this.x,a.x),d=Math.min(this.y,a.y),m=Math.max(this.x+this.width,a.x),y=Math.max(this.y+this.height,a.y);return new U(h,d,m-h,y-d)},expand:function(){var a=K.read(arguments),h=a.width,d=a.height;return new U(this.x-h/2,this.y-d/2,this.width+h,this.height+d)},scale:function(a,h){return this.expand(this.width*a-this.width,this.height*(h===t?a:h)-this.height)}},r.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(a,h){var d=a.join(""),m=/^[RL]/.test(d);h>=4&&(a[1]+=m?"Y":"X");var y=a[m?0:1],v=a[m?1:0],S="get"+y,w="get"+v,E="set"+y,I="set"+v,N="get"+d,q="set"+d;this[N]=function(B){var k=B?P:F;return new k(this[S](),this[w](),this,q)},this[q]=function(){var B=P.read(arguments);this[E](B.x),this[I](B.y)}},{beans:!0})),$=U.extend({initialize:function(h,d,m,y,v,S){this._set(h,d,m,y,!0),this._owner=v,this._setter=S},_set:function(a,h,d,m,y){return this._x=a,this._y=h,this._width=d,this._height=m,y||this._owner[this._setter](this),this}},new function(){var a=U.prototype;return r.each(["x","y","width","height"],function(h){var d=r.capitalize(h),m="_"+h;this["get"+d]=function(){return this[m]},this["set"+d]=function(y){this[m]=y,this._dontNotify||this._owner[this._setter](this)}},r.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(h){var d="set"+h;this[d]=function(){this._dontNotify=!0,a[d].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(h){var d=this._owner;d._changeSelection&&d._changeSelection(2,h)}}))}),re=r.extend({_class:"Matrix",initialize:function a(h,d){var m=arguments,y=m.length,v=!0;if(y>=6?this._set.apply(this,m):y===1||y===2?h instanceof a?this._set(h._a,h._b,h._c,h._d,h._tx,h._ty,d):Array.isArray(h)?this._set.apply(this,d?h.concat([d]):h):v=!1:y?v=!1:this.reset(),!v)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(a,h,d,m,y,v,S){return this._a=a,this._b=h,this._c=d,this._d=m,this._tx=y,this._ty=v,S||this._changed(),this},_serialize:function(a,h){return r.serialize(this.getValues(),a,!0,h)},_changed:function(){var a=this._owner;a&&(a._applyMatrix?a.transform(null,!0):a._changed(25))},clone:function(){return new re(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(a){return a===this||a&&this._a===a._a&&this._b===a._b&&this._c===a._c&&this._d===a._d&&this._tx===a._tx&&this._ty===a._ty},toString:function(){var a=A.instance;return"[["+[a.number(this._a),a.number(this._c),a.number(this._tx)].join(", ")+"], ["+[a.number(this._b),a.number(this._d),a.number(this._ty)].join(", ")+"]]"},reset:function(a){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,a||this._changed(),this},apply:function(a,h){var d=this._owner;return d?(d.transform(null,r.pick(a,!0),h),this.isIdentity()):!1},translate:function(){var a=P.read(arguments),h=a.x,d=a.y;return this._tx+=h*this._a+d*this._c,this._ty+=h*this._b+d*this._d,this._changed(),this},scale:function(){var a=arguments,h=P.read(a),d=P.read(a,0,{readNull:!0});return d&&this.translate(d),this._a*=h.x,this._b*=h.x,this._c*=h.y,this._d*=h.y,d&&this.translate(d.negate()),this._changed(),this},rotate:function(a){a*=Math.PI/180;var h=P.read(arguments,1),d=h.x,m=h.y,y=Math.cos(a),v=Math.sin(a),S=d-d*y+m*v,w=m-d*v-m*y,E=this._a,I=this._b,N=this._c,q=this._d;return this._a=y*E+v*N,this._b=y*I+v*q,this._c=-v*E+y*N,this._d=-v*I+y*q,this._tx+=S*E+w*N,this._ty+=S*I+w*q,this._changed(),this},shear:function(){var a=arguments,h=P.read(a),d=P.read(a,0,{readNull:!0});d&&this.translate(d);var m=this._a,y=this._b;return this._a+=h.y*this._c,this._b+=h.y*this._d,this._c+=h.x*m,this._d+=h.x*y,d&&this.translate(d.negate()),this._changed(),this},skew:function(){var a=arguments,h=P.read(a),d=P.read(a,0,{readNull:!0}),m=Math.PI/180,y=new P(Math.tan(h.x*m),Math.tan(h.y*m));return this.shear(y,d)},append:function(a,h){if(a){var d=this._a,m=this._b,y=this._c,v=this._d,S=a._a,w=a._c,E=a._b,I=a._d,N=a._tx,q=a._ty;this._a=S*d+E*y,this._c=w*d+I*y,this._b=S*m+E*v,this._d=w*m+I*v,this._tx+=N*d+q*y,this._ty+=N*m+q*v,h||this._changed()}return this},prepend:function(a,h){if(a){var d=this._a,m=this._b,y=this._c,v=this._d,S=this._tx,w=this._ty,E=a._a,I=a._c,N=a._b,q=a._d,B=a._tx,k=a._ty;this._a=E*d+I*m,this._c=E*y+I*v,this._b=N*d+q*m,this._d=N*y+q*v,this._tx=E*S+I*w+B,this._ty=N*S+q*w+k,h||this._changed()}return this},appended:function(a){return this.clone().append(a)},prepended:function(a){return this.clone().prepend(a)},invert:function(){var a=this._a,h=this._b,d=this._c,m=this._d,y=this._tx,v=this._ty,S=a*m-h*d,w=null;return S&&!isNaN(S)&&isFinite(y)&&isFinite(v)&&(this._a=m/S,this._b=-h/S,this._c=-d/S,this._d=a/S,this._tx=(d*v-m*y)/S,this._ty=(h*y-a*v)/S,w=this),w},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new re(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var a=this._a*this._d-this._c*this._b;return a&&!isNaN(a)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(a,h,d){return arguments.length<3?this._transformPoint(P.read(arguments)):this._transformCoordinates(a,h,d)},_transformPoint:function(a,h,d){var m=a.x,y=a.y;return h||(h=new P),h._set(m*this._a+y*this._c+this._tx,m*this._b+y*this._d+this._ty,d)},_transformCoordinates:function(a,h,d){for(var m=0,y=2*d;m<y;m+=2){var v=a[m],S=a[m+1];h[m]=v*this._a+S*this._c+this._tx,h[m+1]=v*this._b+S*this._d+this._ty}return h},_transformCorners:function(a){var h=a.x,d=a.y,m=h+a.width,y=d+a.height,v=[h,d,m,d,m,y,h,y];return this._transformCoordinates(v,v,4)},_transformBounds:function(a,h,d){for(var m=this._transformCorners(a),y=m.slice(0,2),v=y.slice(),S=2;S<8;S++){var w=m[S],E=S&1;w<y[E]?y[E]=w:w>v[E]&&(v[E]=w)}return h||(h=new U),h._set(y[0],y[1],v[0]-y[0],v[1]-y[1],d)},inverseTransform:function(){return this._inverseTransform(P.read(arguments))},_inverseTransform:function(a,h,d){var m=this._a,y=this._b,v=this._c,S=this._d,w=this._tx,E=this._ty,I=m*S-y*v,N=null;if(I&&!isNaN(I)&&isFinite(w)&&isFinite(E)){var q=a.x-this._tx,B=a.y-this._ty;h||(h=new P),N=h._set((q*S-B*v)/I,(B*m-q*y)/I,d)}return N},decompose:function(){var a=this._a,h=this._b,d=this._c,m=this._d,y=a*m-h*d,v=Math.sqrt,S=Math.atan2,w=180/Math.PI,E,I,N;if(a!==0||h!==0){var q=v(a*a+h*h);E=Math.acos(a/q)*(h>0?1:-1),I=[q,y/q],N=[S(a*d+h*m,q*q),0]}else if(d!==0||m!==0){var B=v(d*d+m*m);E=Math.asin(d/B)*(m>0?1:-1),I=[y/B,B],N=[0,S(a*d+h*m,B*B)]}else E=0,N=I=[0,0];return{translation:this.getTranslation(),rotation:E*w,scaling:new P(I),skewing:new P(N[0]*w,N[1]*w)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new P(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(a){this.isIdentity()||a.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},r.each(["a","b","c","d","tx","ty"],function(a){var h=r.capitalize(a),d="_"+a;this["get"+h]=function(){return this[d]},this["set"+h]=function(m){this[d]=m,this._changed()}},{})),pe=r.extend({_class:"Line",initialize:function(h,d,m,y,v){var S=!1;arguments.length>=4?(this._px=h,this._py=d,this._vx=m,this._vy=y,S=v):(this._px=h.x,this._py=h.y,this._vx=d.x,this._vy=d.y,S=m),S||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new P(this._px,this._py)},getVector:function(){return new P(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(a,h){return pe.intersect(this._px,this._py,this._vx,this._vy,a._px,a._py,a._vx,a._vy,!0,h)},getSide:function(a,h){return pe.getSide(this._px,this._py,this._vx,this._vy,a.x,a.y,!0,h)},getDistance:function(a){return Math.abs(this.getSignedDistance(a))},getSignedDistance:function(a){return pe.getSignedDistance(this._px,this._py,this._vx,this._vy,a.x,a.y,!0)},isCollinear:function(a){return P.isCollinear(this._vx,this._vy,a._vx,a._vy)},isOrthogonal:function(a){return P.isOrthogonal(this._vx,this._vy,a._vx,a._vy)},statics:{intersect:function(a,h,d,m,y,v,S,w,E,I){E||(d-=a,m-=h,S-=y,w-=v);var N=d*w-m*S;if(!C.isMachineZero(N)){var q=a-y,B=h-v,k=(S*B-w*q)/N,X=(d*B-m*q)/N,z=1e-12,W=-z,R=1+z;if(I||W<k&&k<R&&W<X&&X<R)return I||(k=k<=0?0:k>=1?1:k),new P(a+k*d,h+k*m)}},getSide:function(a,h,d,m,y,v,S,w){S||(d-=a,m-=h);var E=y-a,I=v-h,N=E*m-I*d;return!w&&C.isMachineZero(N)&&(N=(E*d+E*d)/(d*d+m*m),N>=0&&N<=1&&(N=0)),N<0?-1:N>0?1:0},getSignedDistance:function(a,h,d,m,y,v,S){return S||(d-=a,m-=h),d===0?m>0?y-a:a-y:m===0?d<0?v-h:h-v:((y-a)*m-(v-h)*d)/(m>d?m*Math.sqrt(1+d*d/(m*m)):d*Math.sqrt(1+m*m/(d*d)))},getDistance:function(a,h,d,m,y,v,S){return Math.abs(pe.getSignedDistance(a,h,d,m,y,v,S))}}}),ce=p.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(h){p.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Vs(null,null,this),this._view=ft.create(this,h||rt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(a,h){return r.serialize(this._children,a,!0,h)},_changed:function(a,h){if(a&1){var d=this._view;d&&(d._needsUpdate=!0,!d._requested&&d._autoUpdate&&d.requestUpdate())}var m=this._changes;if(m&&h){var y=this._changesById,v=h._id,S=y[v];S?S.flags|=a:m.push(y[v]={item:h,flags:a})}},clear:function(){for(var a=this._children,h=a.length-1;h>=0;h--)a[h].remove()},isEmpty:function(){return!this._children.length},remove:function a(){return a.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(a){this._currentStyle.set(a)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ze({project:this,insert:!0})},getSymbolDefinitions:function(){var a=[],h={};return this.getItems({class:xe,match:function(d){var m=d._definition,y=m._id;return h[y]||(h[y]=!0,a.push(m)),!1}}),a},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var a=this._selectionItems,h=[];for(var d in a){var m=a[d],y=m._selection;y&1&&m.isInserted()?h.push(m):y||this._updateSelection(m)}return h},_updateSelection:function(a){var h=a._id,d=this._selectionItems;a._selection?d[h]!==a&&(this._selectionCount++,d[h]=a):d[h]===a&&(this._selectionCount--,delete d[h])},selectAll:function(){for(var a=this._children,h=0,d=a.length;h<d;h++)a[h].setFullySelected(!0)},deselectAll:function(){var a=this._selectionItems;for(var h in a)a[h].setFullySelected(!1)},addLayer:function(a){return this.insertLayer(t,a)},insertLayer:function(a,h){if(h instanceof ze){h._remove(!1,!0),r.splice(this._children,[h],a,0),h._setProject(this,!0);var d=h._name;d&&h.setName(d),this._changes&&h._changed(5),this._activeLayer||(this._activeLayer=h)}else h=null;return h},_insertItem:function(a,h,d){return h=this.insertLayer(a,h)||(this._activeLayer||this._insertItem(t,new ze(T.NO_INSERT),!0)).insertChild(a,h),d&&h.activate&&h.activate(),h},getItems:function(a){return T._getItems(this,a)},getItem:function(a){return T._getItems(this,a,null,null,!0)[0]||null},importJSON:function(a){this.activate();var h=this._activeLayer;return r.importJSON(a,h&&h.isEmpty()&&h)},removeOn:function(a){var h=this._removeSets;if(h){a==="mouseup"&&(h.mousedrag=null);var d=h[a];if(d){for(var m in d){var y=d[m];for(var v in h){var S=h[v];S&&S!=d&&delete S[y._id]}y.remove()}h[a]=null}}},draw:function(a,h,d){this._updateVersion++,a.save(),h.applyToContext(a);for(var m=this._children,y=new r({offset:new P(0,0),pixelRatio:d,viewMatrix:h.isIdentity()?null:h,matrices:[new re],updateMatrix:!0}),v=0,S=m.length;v<S;v++)m[v].draw(a,y);if(a.restore(),this._selectionCount>0){a.save(),a.strokeWidth=1;var w=this._selectionItems,E=this._scope.settings.handleSize,I=this._updateVersion;for(var N in w)w[N]._drawSelection(a,h,E,w,I);a.restore()}}}),T=r.extend(o,{statics:{extend:function a(h){return h._serializeFields&&(h._serializeFields=r.set({},this.prototype._serializeFields,h._serializeFields)),a.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new re,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var a=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return r.each(a,function(h){this._events[h]={install:function(d){this.getView()._countItemEvent(d,1)},uninstall:function(d){this.getView()._countItemEvent(d,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:a}})},{initialize:function(){},_initialize:function(a,h){var d=a&&r.isPlainObject(a),m=d&&a.internal===!0,y=this._matrix=new re,v=d&&a.project||Rt.project,S=Rt.settings;return this._id=m?null:D.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&S.applyMatrix,h&&y.translate(h),y._owner=this,this._style=new Vs(v._currentStyle,this,v),m||d&&a.insert==!1||!S.insertItems&&!(d&&a.insert==!0)?this._setProject(v):(d&&a.parent||v)._insertItem(t,this,!0),d&&a!==T.NO_INSERT&&a!==T.INSERT&&this.set(a,{internal:!0,insert:!0,project:!0,parent:!0}),d},_serialize:function(a,h){var d={},m=this;function y(v){for(var S in v){var w=m[S];r.equals(w,S==="leading"?v.fontSize*1.2:v[S])||(d[S]=r.serialize(w,a,S!=="data",h))}}return y(this._serializeFields),this instanceof Ce||y(this._style._defaults),[this._class,d]},_changed:function(a){var h=this._symbol,d=this._parent||h,m=this._project;a&8&&(this._bounds=this._position=this._decomposed=t),a&16&&(this._globalMatrix=t),d&&a&72&&T._clearBoundsCache(d),a&2&&T._clearBoundsCache(this),m&&m._changed(a,this),h&&h._changed(a)},getId:function(){return this._id},getName:function(){return this._name},setName:function(a){if(this._name&&this._removeNamed(),a===+a+"")throw new Error("Names consisting only of numbers are not supported.");var h=this._getOwner();if(a&&h){var d=h._children,m=h._namedChildren;(m[a]=m[a]||[]).push(this),a in d||(d[a]=this)}this._name=a||t,this._changed(256)},getStyle:function(){return this._style},setStyle:function(a){this.getStyle().set(a)}},r.each(["locked","visible","blendMode","opacity","guide"],function(a){var h=r.capitalize(a),d="_"+a,m={locked:256,visible:265};this["get"+h]=function(){return this[d]},this["set"+h]=function(y){y!=this[d]&&(this[d]=y,this._changed(m[a]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(a){if(a!==this._selection){this._selection=a;var h=this._project;h&&(h._updateSelection(this),this._changed(257))}},_changeSelection:function(a,h){var d=this._selection;this.setSelection(h?d|a:d&~a)},isSelected:function(){if(this._selectChildren){for(var a=this._children,h=0,d=a.length;h<d;h++)if(a[h].isSelected())return!0}return!!(this._selection&1)},setSelected:function(a){if(this._selectChildren)for(var h=this._children,d=0,m=h.length;d<m;d++)h[d].setSelected(a);this._changeSelection(1,a)},isFullySelected:function(){var a=this._children,h=!!(this._selection&1);if(a&&h){for(var d=0,m=a.length;d<m;d++)if(!a[d].isFullySelected())return!1;return!0}return h},setFullySelected:function(a){var h=this._children;if(h)for(var d=0,m=h.length;d<m;d++)h[d].setFullySelected(a);this._changeSelection(1,a)},isClipMask:function(){return this._clipMask},setClipMask:function(a){this._clipMask!=(a=!!a)&&(this._clipMask=a,a&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(a){this._data=a},getPosition:function(a){var h=a?P:F,d=this._position||(this._position=this._getPositionFromBounds());return new h(d.x,d.y,this,"setPosition")},setPosition:function(){this.translate(P.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(a){return this._pivot?this._matrix._transformPoint(this._pivot):(a||this.getBounds()).getCenter(!0)},getPivot:function(){var a=this._pivot;return a?new F(a.x,a.y,this,"setPivot"):null},setPivot:function(){this._pivot=P.read(arguments,0,{clone:!0,readNull:!0}),this._position=t}},r.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(a,h){this[h]=function(d){return this.getBounds(d,a)}},{beans:!0,getBounds:function(a,h){var d=h||a instanceof re,m=r.set({},d?h:a,this._boundsOptions);(!m.stroke||this.getStrokeScaling())&&(m.cacheItem=this);var y=this._getCachedBounds(d&&a,m).rect;return arguments.length?y:new $(y.x,y.y,y.width,y.height,this,"setBounds")},setBounds:function(){var a=U.read(arguments),h=this.getBounds(),d=this._matrix,m=new re,y=a.getCenter();m.translate(y),(a.width!=h.width||a.height!=h.height)&&(d.isInvertible()||(d.set(d._backup||new re().translate(d.getTranslation())),h=this.getBounds()),m.scale(h.width!==0?a.width/h.width:0,h.height!==0?a.height/h.height:0)),y=h.getCenter(),m.translate(-y.x,-y.y),this.transform(m)},_getBounds:function(a,h){var d=this._children;return!d||!d.length?new U:(T._updateBoundsCache(this,h.cacheItem),T._getBounds(d,a,h))},_getBoundsCacheKey:function(a,h){return[a.stroke?1:0,a.handle?1:0,h?1:0].join("")},_getCachedBounds:function(a,h,d){a=a&&a._orNullIfIdentity();var m=h.internal&&!d,y=h.cacheItem,v=m?null:this._matrix._orNullIfIdentity(),S=y&&(!a||a.equals(v))&&this._getBoundsCacheKey(h,m),w=this._bounds;if(T._updateBoundsCache(this._parent||this._symbol,y),S&&w&&S in w){var E=w[S];return{rect:E.rect.clone(),nonscaling:E.nonscaling}}var I=this._getBounds(a||v,h),N=I.rect||I,q=this._style,B=I.nonscaling||q.hasStroke()&&!q.getStrokeScaling();if(S){w||(this._bounds=w={});var E=w[S]={rect:N.clone(),nonscaling:B,internal:m}}return{rect:N,nonscaling:B}},_getStrokeMatrix:function(a,h){var d=this.getStrokeScaling()?null:h&&h.internal?this:this._parent||this._symbol&&this._symbol._item,m=d?d.getViewMatrix().invert():a;return m&&m._shiftless()},statics:{_updateBoundsCache:function(a,h){if(a&&h){var d=h._id,m=a._boundsCache=a._boundsCache||{ids:{},list:[]};m.ids[d]||(m.list.push(h),m.ids[d]=h)}},_clearBoundsCache:function(a){var h=a._boundsCache;if(h){a._bounds=a._position=a._boundsCache=t;for(var d=0,m=h.list,y=m.length;d<y;d++){var v=m[d];v!==a&&(v._bounds=v._position=t,v._boundsCache&&T._clearBoundsCache(v))}}},_getBounds:function(a,h,d){var m=1/0,y=-m,v=m,S=y,w=!1;d=d||{};for(var E=0,I=a.length;E<I;E++){var N=a[E];if(N._visible&&!N.isEmpty(!0)){var q=N._getCachedBounds(h&&h.appended(N._matrix),d,!0),B=q.rect;m=Math.min(B.x,m),v=Math.min(B.y,v),y=Math.max(B.x+B.width,y),S=Math.max(B.y+B.height,S),q.nonscaling&&(w=!0)}}return{rect:isFinite(m)?new U(m,v,y-m,S-v):new U,nonscaling:w}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var a=this._decompose();return a?a.rotation:0},setRotation:function(a){var h=this.getRotation();if(h!=null&&a!=null){var d=this._decomposed;this.rotate(a-h),d&&(d.rotation=a,this._decomposed=d)}},getScaling:function(){var a=this._decompose(),h=a&&a.scaling;return new F(h?h.x:1,h?h.y:1,this,"setScaling")},setScaling:function(){var a=this.getScaling(),h=P.read(arguments,0,{clone:!0,readNull:!0});if(a&&h&&!a.equals(h)){var d=this.getRotation(),m=this._decomposed,y=new re,v=C.isZero;if(v(a.x)||v(a.y))y.translate(m.translation),d&&y.rotate(d),y.scale(h.x,h.y),this._matrix.set(y);else{var S=this.getPosition(!0);y.translate(S),d&&y.rotate(d),y.scale(h.x/a.x,h.y/a.y),d&&y.rotate(-d),y.translate(S.negate()),this.transform(y)}m&&(m.scaling=h,this._decomposed=m)}},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.set.apply(a,arguments)},getGlobalMatrix:function(a){var h=this._globalMatrix;if(h)for(var d=this._parent,m=[];d;){if(!d._globalMatrix){h=null;for(var y=0,v=m.length;y<v;y++)m[y]._globalMatrix=null;break}m.push(d),d=d._parent}if(!h){h=this._globalMatrix=this._matrix.clone();var d=this._parent;d&&h.prepend(d.getGlobalMatrix(!0))}return a?h:h.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(a){(this._applyMatrix=this._canApplyMatrix&&!!a)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(a,h){if(this._project!==a){this._project&&this._installEvents(!1),this._project=a;for(var d=this._children,m=0,y=d&&d.length;m<y;m++)d[m]._setProject(a);h=!0}h&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function a(h){a.base.call(this,h);for(var d=this._children,m=0,y=d&&d.length;m<y;m++)d[m]._installEvents(h)},getLayer:function(){for(var a=this;a=a._parent;)if(a instanceof ze)return a;return null},getParent:function(){return this._parent},setParent:function(a){return a.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(a){this.removeChildren(),this.addChildren(a)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var a=this._getOwner();return a&&a._children[this._index+1]||null},getPreviousSibling:function(){var a=this._getOwner();return a&&a._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(a){var h=this._parent,d=h&&h._children;d&&h.insertChildren(a in d?a:t,[this])},equals:function(a){return a===this||a&&this._class===a._class&&this._style.equals(a._style)&&this._matrix.equals(a._matrix)&&this._locked===a._locked&&this._visible===a._visible&&this._blendMode===a._blendMode&&this._opacity===a._opacity&&this._clipMask===a._clipMask&&this._guide===a._guide&&this._equals(a)||!1},_equals:function(a){return r.equals(this._children,a._children)},clone:function(a){var h=new this.constructor(T.NO_INSERT),d=this._children,m=r.pick(a?a.insert:t,a===t||a===!0),y=r.pick(a?a.deep:t,!0);d&&h.copyAttributes(this),(!d||y)&&h.copyContent(this),d||h.copyAttributes(this),m&&h.insertAbove(this);var v=this._name,S=this._parent;if(v&&S){for(var d=S._children,w=v,E=1;d[v];)v=w+" "+E++;v!==w&&h.setName(v)}return h},copyContent:function(a){for(var h=a._children,d=0,m=h&&h.length;d<m;d++)this.addChild(h[d].clone(!1),!0)},copyAttributes:function(a,h){this.setStyle(a._style);for(var d=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],m=0,y=d.length;m<y;m++){var v=d[m];a.hasOwnProperty(v)&&(this[v]=a[v])}h||this._matrix.set(a._matrix,!0),this.setApplyMatrix(a._applyMatrix),this.setPivot(a._pivot),this.setSelection(a._selection);var S=a._data,w=a._name;this._data=S?r.clone(S):null,w&&this.setName(w)},rasterize:function(a,h){var d,m,y;r.isPlainObject(a)?(d=a.resolution,m=a.insert,y=a.raster):(d=a,m=h),y||(y=new Be(T.NO_INSERT));var v=this.getStrokeBounds(),S=(d||this.getView().getResolution())/72,w=v.getTopLeft().floor(),E=v.getBottomRight().ceil(),I=new K(E.subtract(w)),N=I.multiply(S);if(y.setSize(N,!0),!N.isZero()){var q=y.getContext(!0),B=new re().scale(S).translate(w.negate());q.save(),B.applyToContext(q),this.draw(q,new r({matrices:[B]})),q.restore()}return y._matrix.set(new re().translate(w.add(I.divide(2))).scale(1/S)),(m===t||m)&&y.insertAbove(this),y},contains:function(){var a=this._matrix;return a.isInvertible()&&!!this._contains(a._inverseTransform(P.read(arguments)))},_contains:function(a){var h=this._children;if(h){for(var d=h.length-1;d>=0;d--)if(h[d].contains(a))return!0;return!1}return a.isInside(this.getInternalBounds())},isInside:function(){return U.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Pe.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(a,h){return a instanceof T?this._asPathItem().getIntersections(a._asPathItem(),null,h,!0).length>0:!1}},new function(){function a(){var m=arguments;return this._hitTest(P.read(m),Fe.getOptions(m))}function h(){var m=arguments,y=P.read(m),v=Fe.getOptions(m),S=[];return this._hitTest(y,new r({all:S},v)),S}function d(m,y,v,S){var w=this._children;if(w)for(var E=w.length-1;E>=0;E--){var I=w[E],N=I!==S&&I._hitTest(m,y,v);if(N&&!y.all)return N}return null}return ce.inject({hitTest:a,hitTestAll:h,_hitTest:d}),{hitTest:a,hitTestAll:h,_hitTestChildren:d}},{_hitTest:function(a,h,d){if(this._locked||!this._visible||this._guide&&!h.guides||this.isEmpty())return null;var m=this._matrix,y=d?d.appended(m):this.getGlobalMatrix().prepend(this.getView()._matrix),v=Math.max(h.tolerance,1e-12),S=h._tolerancePadding=new K(Pe._getStrokePadding(v,m._shiftless().invert()));if(a=m._inverseTransform(a),!a||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(S.multiply(2))._containsPoint(a))return null;var w=!(h.guides&&!this._guide||h.selected&&!this.isSelected()||h.type&&h.type!==r.hyphenate(this._class)||h.class&&!(this instanceof h.class)),E=h.match,I=this,N,q;function B(x){return x&&E&&!E(x)&&(x=null),x&&h.all&&h.all.push(x),x}function k(x,H){var j=H?N["get"+H]():I.getPosition();if(a.subtract(j).divide(S).length<=1)return new Fe(x,I,{name:H?r.hyphenate(H):x,point:j})}var X=h.position,z=h.center,W=h.bounds;if(w&&this._parent&&(X||z||W)){if((z||W)&&(N=this.getInternalBounds()),q=X&&k("position")||z&&k("center","Center"),!q&&W)for(var R=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],Y=0;Y<8&&!q;Y++)q=k("bounds",R[Y]);q=B(q)}return q||(q=this._hitTestChildren(a,h,y)||w&&B(this._hitTestSelf(a,h,y,this.getStrokeScaling()?null:y._shiftless().invert()))||null),q&&q.point&&(q.point=m.transform(q.point)),q},_hitTestSelf:function(a,h){if(h.fill&&this.hasFill()&&this._contains(a))return new Fe("fill",this)},matches:function(a,h){function d(S,w){for(var E in S)if(S.hasOwnProperty(E)){var I=S[E],N=w[E];if(r.isPlainObject(I)&&r.isPlainObject(N)){if(!d(I,N))return!1}else if(!r.equals(I,N))return!1}return!0}var m=typeof a;if(m==="object"){for(var y in a)if(a.hasOwnProperty(y)&&!this.matches(y,a[y]))return!1;return!0}else{if(m==="function")return a(this);if(a==="match")return h(this);var v=/^(empty|editable)$/.test(a)?this["is"+r.capitalize(a)]():a==="type"?r.hyphenate(this._class):this[a];if(a==="class"){if(typeof h=="function")return this instanceof h;v=this._class}if(typeof h=="function")return!!h(v);if(h){if(h.test)return h.test(v);if(r.isPlainObject(h))return d(h,v)}return r.equals(v,h)}},getItems:function(a){return T._getItems(this,a,this._matrix)},getItem:function(a){return T._getItems(this,a,this._matrix,null,!0)[0]||null},statics:{_getItems:function a(h,d,m,y,v){if(!y){var S=typeof d=="object"&&d,w=S&&S.overlapping,E=S&&S.inside,I=w||E,B=I&&U.read([I]);y={items:[],recursive:S&&S.recursive!==!1,inside:!!E,overlapping:!!w,rect:B,path:w&&new Pe.Rectangle({rectangle:B,insert:!1})},S&&(d=r.filter({},d,{recursive:!0,inside:!0,overlapping:!0}))}var N=h._children,q=y.items,B=y.rect;m=B&&(m||new re);for(var k=0,X=N&&N.length;k<X;k++){var z=N[k],W=m&&m.appended(z._matrix),R=!0;if(B){var I=z.getBounds(W);if(!B.intersects(I))continue;B.contains(I)||y.overlapping&&(I.contains(B)||y.path.intersects(z,W))||(R=!1)}if(R&&z.matches(d)&&(q.push(z),v)||(y.recursive!==!1&&a(z,d,W,y,v),v&&q.length>0))break}return q}}},{importJSON:function(a){var h=r.importJSON(a,this);return h!==this?this.addChild(h):h},addChild:function(a){return this.insertChild(t,a)},insertChild:function(a,h){var d=h?this.insertChildren(a,[h]):null;return d&&d[0]},addChildren:function(a){return this.insertChildren(this._children.length,a)},insertChildren:function(a,h){var d=this._children;if(d&&h&&h.length>0){h=r.slice(h);for(var m={},y=h.length-1;y>=0;y--){var v=h[y],S=v&&v._id;!v||m[S]?h.splice(y,1):(v._remove(!1,!0),m[S]=!0)}r.splice(d,h,a,0);for(var w=this._project,E=w._changes,y=0,I=h.length;y<I;y++){var v=h[y],N=v._name;v._parent=this,v._setProject(w,!0),N&&v.setName(N),E&&v._changed(5)}this._changed(11)}else h=null;return h},_insertItem:"#insertChild",_insertAt:function(a,h){var d=a&&a._getOwner(),m=a!==this&&d?this:null;return m&&(m._remove(!1,!0),d._insertItem(a._index+h,m)),m},insertAbove:function(a){return this._insertAt(a,1)},insertBelow:function(a){return this._insertAt(a,0)},sendToBack:function(){var a=this._getOwner();return a?a._insertItem(0,this):null},bringToFront:function(){var a=this._getOwner();return a?a._insertItem(t,this):null},appendTop:"#addChild",appendBottom:function(a){return this.insertChild(0,a)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(a){return a._insertItem(t,this)},copyTo:function(a){return this.clone(!1).addTo(a)},reduce:function(a){var h=this._children;if(h&&h.length===1){var d=h[0].reduce(a);return this._parent?(d.insertAbove(this),this.remove()):d.remove(),d}return this},_removeNamed:function(){var a=this._getOwner();if(a){var h=a._children,d=a._namedChildren,m=this._name,y=d[m],v=y?y.indexOf(this):-1;v!==-1&&(h[m]==this&&delete h[m],y.splice(v,1),y.length?h[m]=y[0]:delete d[m])}},_remove:function(a,h){var d=this._getOwner(),m=this._project,y=this._index;return this._style&&this._style._dispose(),d?(this._name&&this._removeNamed(),y!=null&&(m._activeLayer===this&&(m._activeLayer=this.getNextSibling()||this.getPreviousSibling()),r.splice(d._children,null,y,1)),this._installEvents(!1),a&&m._changes&&this._changed(5),h&&d._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(a){var h=a&&a.insertBelow(this);return h&&this.remove(),h},removeChildren:function(a,h){if(!this._children)return null;a=a||0,h=r.pick(h,this._children.length);for(var d=r.splice(this._children,null,a,h-a),m=d.length-1;m>=0;m--)d[m]._remove(!0,!1);return d.length>0&&this._changed(11),d},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var a=0,h=this._children.length;a<h;a++)this._children[a]._index=a;this._changed(11)}},isEmpty:function(a){var h=this._children,d=h?h.length:0;if(a){for(var m=0;m<d;m++)if(!h[m].isEmpty(a))return!1;return!0}return!d},isEditable:function(){for(var a=this;a;){if(!a._visible||a._locked)return!1;a=a._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(a){function h(S){var w=[];do w.unshift(S);while(S=S._parent);return w}for(var d=h(this),m=h(a),y=0,v=Math.min(d.length,m.length);y<v;y++)if(d[y]!=m[y])return d[y]._index<m[y]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(a){return this._getOrder(a)===-1},isBelow:function(a){return this._getOrder(a)===1},isParent:function(a){return this._parent===a},isChild:function(a){return a&&a._parent===this},isDescendant:function(a){for(var h=this;h=h._parent;)if(h===a)return!0;return!1},isAncestor:function(a){return a?a.isDescendant(this):!1},isSibling:function(a){return this._parent===a._parent},isGroupedWith:function(a){for(var h=this._parent;h;){if(h._parent&&/^(Group|Layer|CompoundPath)$/.test(h._class)&&a.isDescendant(h))return!0;h=h._parent}return!1}},r.each(["rotate","scale","shear","skew"],function(a){var h=a==="rotate";this[a]=function(){var d=arguments,m=(h?r:P).read(d),y=P.read(d,0,{readNull:!0});return this.transform(new re()[a](m,y||this.getPosition(!0)))}},{translate:function(){var a=new re;return this.transform(a.translate.apply(a,arguments))},transform:function(a,h,d){var m=this._matrix,y=a&&!a.isIdentity(),v=d&&this._canApplyMatrix||this._applyMatrix&&(y||!m.isIdentity()||h&&this._children);if(!y&&!v)return this;if(y){!a.isInvertible()&&m.isInvertible()&&(m._backup=m.getValues()),m.prepend(a,!0);var S=this._style,w=S.getFillColor(!0),E=S.getStrokeColor(!0);w&&w.transform(a),E&&E.transform(a)}if(v&&(v=this._transformContent(m,h,d))){var I=this._pivot;I&&m._transformPoint(I,I,!0),m.reset(!0),d&&this._canApplyMatrix&&(this._applyMatrix=!0)}var N=this._bounds,q=this._position;(y||v)&&this._changed(25);var B=y&&N&&a.decompose();if(B&&B.skewing.isZero()&&B.rotation%90===0){for(var k in N){var X=N[k];if(X.nonscaling)delete N[k];else if(v||!X.internal){var z=X.rect;a._transformBounds(z,z)}}this._bounds=N;var W=N[this._getBoundsCacheKey(this._boundsOptions||{})];W&&(this._position=this._getPositionFromBounds(W.rect))}else y&&q&&this._pivot&&(this._position=a._transformPoint(q,q));return this},_transformContent:function(a,h,d){var m=this._children;if(m){for(var y=0,v=m.length;y<v;y++)m[y].transform(a,h,d);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(P.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(P.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(P.read(arguments))},localToParent:function(){return this._matrix._transformPoint(P.read(arguments))},fitBounds:function(a,h){a=U.read(arguments);var d=this.getBounds(),m=d.height/d.width,y=a.height/a.width,v=(h?m>y:m<y)?a.width/d.width:a.height/d.height,S=new U(new P,new K(d.width*v,d.height*v));S.setCenter(a.getCenter()),this.setBounds(S)}}),{_setStyles:function(a,h,d){var m=this._style,y=this._matrix;if(m.hasFill()&&(a.fillStyle=m.getFillColor().toCanvasStyle(a,y)),m.hasStroke()){a.strokeStyle=m.getStrokeColor().toCanvasStyle(a,y),a.lineWidth=m.getStrokeWidth();var v=m.getStrokeJoin(),S=m.getStrokeCap(),w=m.getMiterLimit();if(v&&(a.lineJoin=v),S&&(a.lineCap=S),w&&(a.miterLimit=w),Rt.support.nativeDash){var E=m.getDashArray(),I=m.getDashOffset();E&&E.length&&("setLineDash"in a?(a.setLineDash(E),a.lineDashOffset=I):(a.mozDash=E,a.mozDashOffset=I))}}if(m.hasShadow()){var N=h.pixelRatio||1,q=d._shiftless().prepend(new re().scale(N,N)),B=q.transform(new P(m.getShadowBlur(),0)),k=q.transform(this.getShadowOffset());a.shadowColor=m.getShadowColor().toCanvasStyle(a),a.shadowBlur=B.getLength(),a.shadowOffsetX=k.x,a.shadowOffsetY=k.y}},draw:function(a,h,d){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var m=h.matrices,y=h.viewMatrix,v=this._matrix,S=m[m.length-1].appended(v);if(S.isInvertible()){y=y?y.appended(S):S,m.push(S),h.updateMatrix&&(this._globalMatrix=S);var w=this._blendMode,E=C.clamp(this._opacity,0,1),I=w==="normal",N=Ue.nativeModes[w],q=I&&E===1||h.dontStart||h.clip||(N||I&&E<1)&&this._canComposite(),B=h.pixelRatio||1,k,X,z;if(!q){var W=this.getStrokeBounds(y);if(!W.width||!W.height){m.pop();return}z=h.offset,X=h.offset=W.getTopLeft().floor(),k=a,a=rt.getContext(W.getSize().ceil().add(1).multiply(B)),B!==1&&a.scale(B,B)}a.save();var R=d?d.appended(v):this._canScaleStroke&&!this.getStrokeScaling(!0)&&y,Y=!q&&h.clipItem,x=!R||Y;if(q?(a.globalAlpha=E,N&&(a.globalCompositeOperation=w)):x&&a.translate(-X.x,-X.y),x&&(q?v:y).applyToContext(a),Y&&h.clipItem.draw(a,h.extend({clip:!0})),R){a.setTransform(B,0,0,B,0,0);var H=h.offset;H&&a.translate(-H.x,-H.y)}this._draw(a,h,y,R),a.restore(),m.pop(),h.clip&&!h.dontFinish&&a.clip(this.getFillRule()),q||(Ue.process(w,a,k,E,X.subtract(z).multiply(B)),rt.release(a),h.offset=z)}}},_isUpdated:function(a){var h=this._parent;if(h instanceof $e)return h._isUpdated(a);var d=this._updateVersion===a;return!d&&h&&h._visible&&h._isUpdated(a)&&(this._updateVersion=a,d=!0),d},_drawSelection:function(a,h,d,m,y){var v=this._selection,S=v&1,w=v&2||S&&this._selectBounds,E=v&4;if(this._drawSelected||(S=!1),(S||w||E)&&this._isUpdated(y)){var I,N=this.getSelectedColor(!0)||(I=this.getLayer())&&I.getSelectedColor(!0),q=h.appended(this.getGlobalMatrix(!0)),B=d/2;if(a.strokeStyle=a.fillStyle=N?N.toCanvasStyle(a):"#009dec",S&&this._drawSelected(a,q,m),E){var k=this.getPosition(!0),X=this._parent,z=X?X.localToGlobal(k):k,W=z.x,R=z.y;a.beginPath(),a.arc(W,R,B,0,Math.PI*2,!0),a.stroke();for(var Y=[[0,-1],[1,0],[0,1],[-1,0]],x=B,H=d+1,j=0;j<4;j++){var J=Y[j],G=J[0],se=J[1];a.moveTo(W+G*x,R+se*x),a.lineTo(W+G*H,R+se*H),a.stroke()}}if(w){var he=q._transformCorners(this.getInternalBounds());a.beginPath();for(var j=0;j<8;j++)a[j?"lineTo":"moveTo"](he[j],he[++j]);a.closePath(),a.stroke();for(var j=0;j<8;j++)a.fillRect(he[j]-B,he[++j]-B,d,d)}}},_canComposite:function(){return!1}},r.each(["down","drag","up","move"],function(a){this["removeOn"+r.capitalize(a)]=function(){var h={};return h[a]=!0,this.removeOn(h)}},{removeOn:function(a){for(var h in a)if(a[h]){var d="mouse"+h,m=this._project,y=m._removeSets=m._removeSets||{};y[d]=y[d]||{},y[d][this._id]=this}return this}}),{tween:function(a,h,d){d||(d=h,h=a,a=null,d||(d=h,h=null));var m=d&&d.easing,y=d&&d.start,v=d!=null&&(typeof d=="number"?d:d.duration),S=new me(this,a,h,v,m,y);function w(E){S._handleFrame(E.time*1e3),S.running||this.off("frame",w)}return v&&this.on("frame",w),S},tweenTo:function(a,h){return this.tween(null,a,h)},tweenFrom:function(a,h){return this.tween(a,null,h)}}),Ce=T.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(h){this._children=[],this._namedChildren={},this._initialize(h)||this.addChildren(Array.isArray(h)?h:arguments)},_changed:function a(h){a.base.call(this,h),h&2050&&(this._clipItem=t)},_getClipItem:function(){var a=this._clipItem;if(a===t){a=null;for(var h=this._children,d=0,m=h.length;d<m;d++)if(h[d]._clipMask){a=h[d];break}this._clipItem=a}return a},isClipped:function(){return!!this._getClipItem()},setClipped:function(a){var h=this.getFirstChild();h&&h.setClipMask(a)},_getBounds:function a(h,d){var m=this._getClipItem();return m?m._getCachedBounds(m._matrix.prepended(h),r.set({},d,{stroke:!1})):a.base.call(this,h,d)},_hitTestChildren:function a(h,d,m){var y=this._getClipItem();return(!y||y.contains(h))&&a.base.call(this,h,d,m,y)},_draw:function(a,h){var d=h.clip,m=!d&&this._getClipItem();h=h.extend({clipItem:m,clip:!1}),d?(a.beginPath(),h.dontStart=h.dontFinish=!0):m&&m.draw(a,h.extend({clip:!0}));for(var y=this._children,v=0,S=y.length;v<S;v++){var w=y[v];w!==m&&w.draw(a,h)}}}),ze=Ce.extend({_class:"Layer",initialize:function(){Ce.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function a(){return this._parent?a.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),be=T.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(h,d){this._initialize(h,d)},_equals:function(a){return this._type===a._type&&this._size.equals(a._size)&&r.equals(this._radius,a._radius)},copyContent:function(a){this.setType(a._type),this.setSize(a._size),this.setRadius(a._radius)},getType:function(){return this._type},setType:function(a){this._type=a},getShape:"#getType",setShape:"#setType",getSize:function(){var a=this._size;return new M(a.width,a.height,this,"setSize")},setSize:function(){var a=K.read(arguments);if(!this._size)this._size=a.clone();else if(!this._size.equals(a)){var h=this._type,d=a.width,m=a.height;h==="rectangle"?this._radius.set(K.min(this._radius,a.divide(2).abs())):h==="circle"?(d=m=(d+m)/2,this._radius=d/2):h==="ellipse"&&this._radius._set(d/2,m/2),this._size._set(d,m),this._changed(9)}},getRadius:function(){var a=this._radius;return this._type==="circle"?a:new M(a.width,a.height,this,"setRadius")},setRadius:function(a){var h=this._type;if(h==="circle"){if(a===this._radius)return;var d=a*2;this._radius=a,this._size._set(d,d)}else if(a=K.read(arguments),!this._radius)this._radius=a.clone();else{if(this._radius.equals(a))return;if(this._radius.set(a),h==="rectangle"){var d=K.max(this._size,a.multiply(2));this._size.set(d)}else h==="ellipse"&&this._size._set(a.width*2,a.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(a){var h=new Pe[r.capitalize(this._type)]({center:new P,size:this._size,radius:this._radius,insert:!1});return h.copyAttributes(this),Rt.settings.applyMatrix&&h.setApplyMatrix(!0),(a===t||a)&&h.insertAbove(this),h},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(a,h,d,m){var y=this._style,v=y.hasFill(),S=y.hasStroke(),w=h.dontFinish||h.clip,E=!m;if(v||S||w){var I=this._type,N=this._radius,q=I==="circle";if(h.dontStart||a.beginPath(),E&&q)a.arc(0,0,N,0,Math.PI*2,!0);else{var B=q?N:N.width,k=q?N:N.height,X=this._size,z=X.width,W=X.height;if(E&&I==="rectangle"&&B===0&&k===0)a.rect(-z/2,-W/2,z,W);else{var R=z/2,Y=W/2,x=1-.5522847498307936,H=B*x,j=k*x,J=[-R,-Y+k,-R,-Y+j,-R+H,-Y,-R+B,-Y,R-B,-Y,R-H,-Y,R,-Y+j,R,-Y+k,R,Y-k,R,Y-j,R-H,Y,R-B,Y,-R+B,Y,-R+H,Y,-R,Y-j,-R,Y-k];m&&m.transform(J,J,32),a.moveTo(J[0],J[1]),a.bezierCurveTo(J[2],J[3],J[4],J[5],J[6],J[7]),R!==B&&a.lineTo(J[8],J[9]),a.bezierCurveTo(J[10],J[11],J[12],J[13],J[14],J[15]),Y!==k&&a.lineTo(J[16],J[17]),a.bezierCurveTo(J[18],J[19],J[20],J[21],J[22],J[23]),R!==B&&a.lineTo(J[24],J[25]),a.bezierCurveTo(J[26],J[27],J[28],J[29],J[30],J[31])}}a.closePath()}!w&&(v||S)&&(this._setStyles(a,h,d),v&&(a.fill(y.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),S&&a.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(a,h){var d=new U(this._size).setCenter(0,0),m=this._style,y=h.stroke&&m.hasStroke()&&m.getStrokeWidth();return a&&(d=a._transformBounds(d)),y?d.expand(Pe._getStrokePadding(y,this._getStrokeMatrix(a,h))):d}},new function(){function a(d,m,y){var v=d._radius;if(!v.isZero())for(var S=d._size.divide(2),w=1;w<=4;w++){var E=new P(w>1&&w<4?-1:1,w>2?-1:1),I=E.multiply(S),N=I.subtract(E.multiply(v)),q=new U(y?I.add(E.multiply(y)):I,N);if(q.contains(m))return{point:N,quadrant:w}}}function h(d,m,y,v){var S=d.divide(m);return(!v||S.isInQuadrant(v))&&S.subtract(S.normalize()).multiply(m).divide(y).length<=1}return{_contains:function d(m){if(this._type==="rectangle"){var y=a(this,m);return y?m.subtract(y.point).divide(this._radius).getLength()<=1:d.base.call(this,m)}else return m.divide(this.size).getLength()<=.5},_hitTestSelf:function d(m,y,v,S){var w=!1,E=this._style,I=y.stroke&&E.hasStroke(),N=y.fill&&E.hasFill();if(I||N){var q=this._type,B=this._radius,k=I?E.getStrokeWidth()/2:0,X=y._tolerancePadding.add(Pe._getStrokePadding(k,!E.getStrokeScaling()&&S));if(q==="rectangle"){var z=X.multiply(2),W=a(this,m,z);if(W)w=h(m.subtract(W.point),B,X,W.quadrant);else{var R=new U(this._size).setCenter(0,0),Y=R.expand(z),x=R.expand(z.negate());w=Y._containsPoint(m)&&!x._containsPoint(m)}}else w=h(m,B,X)}return w?new Fe(I?"stroke":"fill",this):d.base.apply(this,arguments)}}},{statics:new function(){function a(h,d,m,y,v){var S=r.create(be.prototype);return S._type=h,S._size=m,S._radius=y,S._initialize(r.getNamed(v),d),S}return{Circle:function(){var h=arguments,d=P.readNamed(h,"center"),m=r.readNamed(h,"radius");return a("circle",d,new K(m*2),m,h)},Rectangle:function(){var h=arguments,d=U.readNamed(h,"rectangle"),m=K.min(K.readNamed(h,"radius"),d.getSize(!0).divide(2));return a("rectangle",d.getCenter(!0),d.getSize(!0),m,h)},Ellipse:function(){var h=arguments,d=be._readEllipse(h),m=d.radius;return a("ellipse",d.center,m.multiply(2),m,h)},_readEllipse:function(h){var d,m;if(r.hasNamed(h,"radius"))d=P.readNamed(h,"center"),m=K.readNamed(h,"radius");else{var y=U.readNamed(h,"rectangle");d=y.getCenter(!0),m=y.getSize(!0).divide(2)}return{center:d,radius:m}}}}}),Be=T.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(h,d){if(!this._initialize(h,d!==t&&P.read(arguments))){var m,y=typeof h,v=y==="string"?s.getElementById(h):y==="object"?h:null;if(v&&v!==T.NO_INSERT){if(v.getContext||v.naturalHeight!=null)m=v;else if(v){var S=K.read(arguments);S.isZero()||(m=rt.getCanvas(S))}}m?this.setImage(m):this.setSource(h)}this._size||(this._size=new K,this._loaded=!1)},_equals:function(a){return this.getSource()===a.getSource()},copyContent:function(a){var h=a._image,d=a._canvas;if(h)this._setImage(h);else if(d){var m=rt.getCanvas(a._size);m.getContext("2d").drawImage(d,0,0),this._setImage(m)}this._crossOrigin=a._crossOrigin},getSize:function(){var a=this._size;return new M(a?a.width:0,a?a.height:0,this,"setSize")},setSize:function(a,h){var d=K.read(arguments);if(d.equals(this._size))h&&this.clear();else if(d.width>0&&d.height>0){var m=!h&&this.getElement();this._setImage(rt.getCanvas(d)),m&&this.getContext(!0).drawImage(m,0,0,d.width,d.height)}else this._canvas&&rt.release(this._canvas),this._size=d.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(a){this.setSize(a,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(a){this.setSize(this.getWidth(),a)},getLoaded:function(){return this._loaded},isEmpty:function(){var a=this._size;return!a||a.width===0&&a.height===0},getResolution:function(){var a=this._matrix,h=new P(0,0).transform(a),d=new P(1,0).transform(a).subtract(h),m=new P(0,1).transform(a).subtract(h);return new K(72/d.getLength(),72/m.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(a){var h=this;function d(m){var y=h.getView(),v=m&&m.type||"load";y&&h.responds(v)&&(Rt=y._scope,h.emit(v,new Ps(m)))}this._setImage(a),this._loaded?setTimeout(d,0):a&&fi.add(a,{load:function(m){h._setImage(a),d(m)},error:d})},_setImage:function(a){this._canvas&&rt.release(this._canvas),a&&a.getContext?(this._image=null,this._canvas=a,this._loaded=!0):(this._image=a,this._canvas=null,this._loaded=!!(a&&a.src&&a.complete)),this._size=new K(a?a.naturalWidth||a.width:0,a?a.naturalHeight||a.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var a=rt.getContext(this._size);try{this._image&&a.drawImage(this._image,0,0),this._canvas=a.canvas}catch{rt.release(a)}}return this._canvas},setCanvas:"#setImage",getContext:function(a){return this._context||(this._context=this.getCanvas().getContext("2d")),a&&(this._image=null,this._changed(1025)),this._context},setContext:function(a){this._context=a},getSource:function(){var a=this._image;return a&&a.src||this.toDataURL()},setSource:function(a){var h=new e.Image,d=this._crossOrigin;d&&(h.crossOrigin=d),a&&(h.src=a),this.setImage(h)},getCrossOrigin:function(){var a=this._image;return a&&a.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(a){this._crossOrigin=a;var h=this._image;h&&(h.crossOrigin=a)},getSmoothing:function(){return this._smoothing},setSmoothing:function(a){this._smoothing=typeof a=="string"?a:a?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var a=U.read(arguments),h=rt.getContext(a.getSize());return h.drawImage(this.getCanvas(),a.x,a.y,a.width,a.height,0,0,a.width,a.height),h.canvas},getSubRaster:function(){var a=U.read(arguments),h=new Be(T.NO_INSERT);return h._setImage(this.getSubCanvas(a)),h.translate(a.getCenter().subtract(this.getSize().divide(2))),h._matrix.prepend(this._matrix),h.insertAbove(this),h},toDataURL:function(){var a=this._image,h=a&&a.src;if(/^data:/.test(h))return h;var d=this.getCanvas();return d?d.toDataURL.apply(d,arguments):null},drawImage:function(a){var h=P.read(arguments,1);this.getContext(!0).drawImage(a,h.x,h.y)},getAverageColor:function(a){var h,d;if(a?a instanceof at?(d=a,h=a.getBounds()):typeof a=="object"&&("width"in a?h=new U(a):"x"in a&&(h=new U(a.x-.5,a.y-.5,1,1))):h=this.getBounds(),!h)return null;var m=32,y=Math.min(h.width,m),v=Math.min(h.height,m),S=Be._sampleContext;S?S.clearRect(0,0,m+1,m+1):S=Be._sampleContext=rt.getContext(new K(m)),S.save();var w=new re().scale(y/h.width,v/h.height).translate(-h.x,-h.y);w.applyToContext(S),d&&d.draw(S,new r({clip:!0,matrices:[w]})),this._matrix.applyToContext(S);var E=this.getElement(),I=this._size;E&&S.drawImage(E,-I.width/2,-I.height/2),S.restore();for(var N=S.getImageData(.5,.5,Math.ceil(y),Math.ceil(v)).data,q=[0,0,0],B=0,k=0,X=N.length;k<X;k+=4){var z=N[k+3];B+=z,z/=255,q[0]+=N[k]*z,q[1]+=N[k+1]*z,q[2]+=N[k+2]*z}for(var k=0;k<3;k++)q[k]/=B;return B?qt.read(q):null},getPixel:function(){var a=P.read(arguments),h=this.getContext().getImageData(a.x,a.y,1,1).data;return new qt("rgb",[h[0]/255,h[1]/255,h[2]/255],h[3]/255)},setPixel:function(){var a=arguments,h=P.read(a),d=qt.read(a),m=d._convert("rgb"),y=d._alpha,v=this.getContext(!0),S=v.createImageData(1,1),w=S.data;w[0]=m[0]*255,w[1]=m[1]*255,w[2]=m[2]*255,w[3]=y!=null?y*255:255,v.putImageData(S,h.x,h.y)},clear:function(){var a=this._size;this.getContext(!0).clearRect(0,0,a.width+1,a.height+1)},createImageData:function(){var a=K.read(arguments);return this.getContext().createImageData(a.width,a.height)},getImageData:function(){var a=U.read(arguments);return a.isEmpty()&&(a=new U(this._size)),this.getContext().getImageData(a.x,a.y,a.width,a.height)},putImageData:function(a){var h=P.read(arguments,1);this.getContext(!0).putImageData(a,h.x,h.y)},setImageData:function(a){this.setSize(a),this.getContext(!0).putImageData(a,0,0)},_getBounds:function(a,h){var d=new U(this._size).setCenter(0,0);return a?a._transformBounds(d):d},_hitTestSelf:function(a){if(this._contains(a)){var h=this;return new Fe("pixel",h,{offset:a.add(h._size.divide(2)).round(),color:{get:function(){return h.getPixel(this.offset)}}})}},_draw:function(a,h,d){var m=this.getElement();if(m&&m.width>0&&m.height>0){a.globalAlpha=C.clamp(this._opacity,0,1),this._setStyles(a,h,d);var y=this._smoothing,v=y==="off";Gt.setPrefixed(a,v?"imageSmoothingEnabled":"imageSmoothingQuality",v?!1:y),a.drawImage(m,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),xe=T.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(h,d){this._initialize(h,d!==t&&P.read(arguments,1))||this.setDefinition(h instanceof Qe?h:new Qe(h))},_equals:function(a){return this._definition===a._definition},copyContent:function(a){this.setDefinition(a._definition)},getDefinition:function(){return this._definition},setDefinition:function(a){this._definition=a,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(a,h){var d=this._definition._item;return d._getCachedBounds(d._matrix.prepended(a),h)},_hitTestSelf:function(a,h,d){var m=h.extend({all:!1}),y=this._definition._item._hitTest(a,m,d);return y&&(y.item=this),y},_draw:function(a,h){this._definition._item.draw(a,h)}}),Qe=r.extend({_class:"SymbolDefinition",initialize:function(h,d){this._id=D.get(),this.project=Rt.project,h&&this.setItem(h,d)},_serialize:function(a,h){return h.add(this,function(){return r.serialize([this._class,this._item],a,!1,h)})},_changed:function(a){a&8&&T._clearBoundsCache(this),a&1&&this.project._changed(a)},getItem:function(){return this._item},setItem:function(a,h){a._symbol&&(a=a.clone()),this._item&&(this._item._symbol=null),this._item=a,a.remove(),a.setSelected(!1),h||a.setPosition(new P),a._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(a){return new xe(this,a)},clone:function(){return new Qe(this._item.clone(!1))},equals:function(a){return a===this||a&&this._item.equals(a._item)||!1}}),Fe=r.extend({_class:"HitResult",initialize:function(h,d,m){this.type=h,this.item=d,m&&this.inject(m)},statics:{getOptions:function(a){var h=a&&r.read(a);return new r({type:null,tolerance:Rt.settings.hitTolerance,fill:!h,stroke:!h,segments:!h,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},h)}}}),Ye=r.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(h,d,m,y,v,S){var w=arguments.length,E,I,N,q;w>0&&(h==null||typeof h=="object"?w===1&&h&&"point"in h?(E=h.point,I=h.handleIn,N=h.handleOut,q=h.selection):(E=h,I=d,N=m,q=y):(E=[h,d],I=m!==t?[m,y]:null,N=v!==t?[v,S]:null)),new ut(E,this,"_point"),new ut(I,this,"_handleIn"),new ut(N,this,"_handleOut"),q&&this.setSelection(q)},_serialize:function(a,h){var d=this._point,m=this._selection,y=m||this.hasHandles()?[d,this._handleIn,this._handleOut]:d;return m&&y.push(m),r.serialize(y,a,!0,h)},_changed:function(a){var h=this._path;if(h){var d=h._curves,m=this._index,y;d&&((!a||a===this._point||a===this._handleIn)&&(y=m>0?d[m-1]:h._closed?d[d.length-1]:null)&&y._changed(),(!a||a===this._point||a===this._handleOut)&&(y=d[m])&&y._changed()),h._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(P.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(P.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(P.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var a=this._handleIn,h=this._handleOut;return!a.isZero()&&!h.isZero()&&a.isCollinear(h)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(a){var h=this._selection,d=this._path;this._selection=a=a||0,d&&a!==h&&(d._updateSelection(this,h,a),d._changed(257))},_changeSelection:function(a,h){var d=this._selection;this.setSelection(h?d|a:d&~a)},isSelected:function(){return!!(this._selection&7)},setSelected:function(a){this._changeSelection(7,a)},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var a=this._path,h=this._index;return a?(h>0&&!a._closed&&h===a._segments.length-1&&h--,a.getCurves()[h]||null):null},getLocation:function(){var a=this.getCurve();return a?new Lt(a,this===a._segment1?0:1):null},getNext:function(){var a=this._path&&this._path._segments;return a&&(a[this._index+1]||this._path._closed&&a[0])||null},smooth:function(a,h,d){var m=a||{},y=m.type,v=m.factor,S=this.getPrevious(),w=this.getNext(),E=(S||this)._point,I=this._point,N=(w||this)._point,q=E.getDistance(I),B=I.getDistance(N);if(!y||y==="catmull-rom"){var k=v===t?.5:v,X=Math.pow(q,k),z=X*X,W=Math.pow(B,k),R=W*W;if(!h&&S){var Y=2*R+3*W*X+z,x=3*W*(W+X);this.setHandleIn(x!==0?new P((R*E._x+Y*I._x-z*N._x)/x-I._x,(R*E._y+Y*I._y-z*N._y)/x-I._y):new P)}if(!d&&w){var Y=2*z+3*X*W+R,x=3*X*(X+W);this.setHandleOut(x!==0?new P((z*N._x+Y*I._x-R*E._x)/x-I._x,(z*N._y+Y*I._y-R*E._y)/x-I._y):new P)}}else if(y==="geometric"){if(S&&w){var H=E.subtract(N),j=v===t?.4:v,J=j*q/(q+B);h||this.setHandleIn(H.multiply(J)),d||this.setHandleOut(H.multiply(J-j))}}else throw new Error("Smoothing method '"+y+"' not supported.")},getPrevious:function(){var a=this._path&&this._path._segments;return a&&(a[this._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var a=this._path;return a&&this._index===a._segments.length-1||!1},reverse:function(){var a=this._handleIn,h=this._handleOut,d=a.clone();a.set(h),h.set(d)},reversed:function(){return new Ye(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Ye(this._point,this._handleIn,this._handleOut)},equals:function(a){return a===this||a&&this._class===a._class&&this._point.equals(a._point)&&this._handleIn.equals(a._handleIn)&&this._handleOut.equals(a._handleOut)||!1},toString:function(){var a=["point: "+this._point];return this._handleIn.isZero()||a.push("handleIn: "+this._handleIn),this._handleOut.isZero()||a.push("handleOut: "+this._handleOut),"{ "+a.join(", ")+" }"},transform:function(a){this._transformCoordinates(a,new Array(6),!0),this._changed()},interpolate:function(a,h,d){var m=1-d,y=d,v=a._point,S=h._point,w=a._handleIn,E=h._handleIn,I=h._handleOut,N=a._handleOut;this._point._set(m*v._x+y*S._x,m*v._y+y*S._y,!0),this._handleIn._set(m*w._x+y*E._x,m*w._y+y*E._y,!0),this._handleOut._set(m*N._x+y*I._x,m*N._y+y*I._y,!0),this._changed()},_transformCoordinates:function(a,h,d){var m=this._point,y=!d||!this._handleIn.isZero()?this._handleIn:null,v=!d||!this._handleOut.isZero()?this._handleOut:null,S=m._x,w=m._y,E=2;return h[0]=S,h[1]=w,y&&(h[E++]=y._x+S,h[E++]=y._y+w),v&&(h[E++]=v._x+S,h[E++]=v._y+w),a&&(a._transformCoordinates(h,h,E/2),S=h[0],w=h[1],d?(m._x=S,m._y=w,E=2,y&&(y._x=h[E++]-S,y._y=h[E++]-w),v&&(v._x=h[E++]-S,v._y=h[E++]-w)):(y||(h[E++]=S,h[E++]=w),v||(h[E++]=S,h[E++]=w))),h}}),ut=P.extend({initialize:function(h,d,m){var y,v,S;if(!h)y=v=0;else if((y=h[0])!==t)v=h[1];else{var w=h;(y=w.x)===t&&(w=P.read(arguments),y=w.x),v=w.y,S=w.selected}this._x=y,this._y=v,this._owner=d,d[m]=this,S&&this.setSelected(!0)},_set:function(a,h){return this._x=a,this._y=h,this._owner._changed(this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner._changed(this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner._changed(this)},isZero:function(){var a=C.isZero;return a(this._x)&&a(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner._changeSelection(this._getSelection(),a)},_getSelection:function(){var a=this._owner;return this===a._point?1:this===a._handleIn?2:this===a._handleOut?4:0}}),Me=r.extend({_class:"Curve",beans:!0,initialize:function(h,d,m,y,v,S,w,E){var I=arguments.length,N,q,B,k,X,z;I===3?(this._path=h,N=d,q=m):I?I===1?"segment1"in h?(N=new Ye(h.segment1),q=new Ye(h.segment2)):"point1"in h?(B=h.point1,X=h.handle1,z=h.handle2,k=h.point2):Array.isArray(h)&&(B=[h[0],h[1]],k=[h[6],h[7]],X=[h[2]-h[0],h[3]-h[1]],z=[h[4]-h[6],h[5]-h[7]]):I===2?(N=new Ye(h),q=new Ye(d)):I===4?(B=h,X=d,z=m,k=y):I===8&&(B=[h,d],k=[w,E],X=[m-h,y-d],z=[v-w,S-E]):(N=new Ye,q=new Ye),this._segment1=N||new Ye(B,null,X),this._segment2=q||new Ye(k,z,null)},_serialize:function(a,h){return r.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],a,!0,h)},_changed:function(){this._length=this._bounds=t},clone:function(){return new Me(this._segment1,this._segment2)},toString:function(){var a=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||a.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||a.push("handle2: "+this._segment2._handleIn),a.push("point2: "+this._segment2._point),"{ "+a.join(", ")+" }"},classify:function(){return Me.classify(this.getValues())},remove:function(){var a=!1;if(this._path){var h=this._segment2,d=h._handleOut;a=h.remove(),a&&this._segment1._handleOut.set(d)}return a},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(P.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(P.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(P.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(P.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var a=this._path;return a&&this._segment1._index===a._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(a){this.getPoint1().setSelected(a),this.getHandle1().setSelected(a),this.getHandle2().setSelected(a),this.getPoint2().setSelected(a)},getValues:function(a){return Me.getValues(this._segment1,this._segment2,a)},getPoints:function(){for(var a=this.getValues(),h=[],d=0;d<8;d+=2)h.push(new P(a[d],a[d+1]));return h}},{getLength:function(){return this._length==null&&(this._length=Me.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Me.getArea(this.getValues())},getLine:function(){return new pe(this._segment1._point,this._segment2._point)},getPart:function(a,h){return new Me(Me.getPart(this.getValues(),a,h))},getPartLength:function(a,h){return Me.getLength(this.getValues(),a,h)},divideAt:function(a){return this.divideAtTime(a&&a.curve===this?a.time:this.getTimeAt(a))},divideAtTime:function(a,h){var d=1e-8,m=1-d,y=null;if(a>=d&&a<=m){var v=Me.subdivide(this.getValues(),a),S=v[0],w=v[1],E=h||this.hasHandles(),I=this._segment1,N=this._segment2,q=this._path;E&&(I._handleOut._set(S[2]-S[0],S[3]-S[1]),N._handleIn._set(w[4]-w[6],w[5]-w[7]));var B=S[6],k=S[7],X=new Ye(new P(B,k),E&&new P(S[4]-B,S[5]-k),E&&new P(w[2]-B,w[3]-k));q?(q.insert(I._index+1,X),y=this.getNext()):(this._segment2=X,this._changed(),y=new Me(X,N))}return y},splitAt:function(a){var h=this._path;return h?h.splitAt(a):null},splitAtTime:function(a){return this.splitAt(this.getLocationAtTime(a))},divide:function(a,h){return this.divideAtTime(a===t?.5:h?a:this.getTimeAt(a))},split:function(a,h){return this.splitAtTime(a===t?.5:h?a:this.getTimeAt(a))},reversed:function(){return new Me(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(a,h,d,m){var y=a._point,v=a._handleOut,S=h._handleIn,w=h._point,E=y.x,I=y.y,N=w.x,q=w.y,B=m?[E,I,E,I,N,q,N,q]:[E,I,E+v._x,I+v._y,N+S._x,q+S._y,N,q];return d&&d._transformCoordinates(B,B,4),B},subdivide:function(a,h){var d=a[0],m=a[1],y=a[2],v=a[3],S=a[4],w=a[5],E=a[6],I=a[7];h===t&&(h=.5);var N=1-h,q=N*d+h*y,B=N*m+h*v,k=N*y+h*S,X=N*v+h*w,z=N*S+h*E,W=N*w+h*I,R=N*q+h*k,Y=N*B+h*X,x=N*k+h*z,H=N*X+h*W,j=N*R+h*x,J=N*Y+h*H;return[[d,m,q,B,R,Y,j,J],[j,J,x,H,z,W,E,I]]},getMonoCurves:function(a,h){var d=[],m=h?0:1,y=a[m+0],v=a[m+2],S=a[m+4],w=a[m+6];if(y>=v==v>=S&&v>=S==S>=w||Me.isStraight(a))d.push(a);else{var E=3*(v-S)-y+w,I=2*(y+S)-4*v,N=v-y,q=1e-8,B=1-q,k=[],X=C.solveQuadratic(E,I,N,k,q,B);if(!X)d.push(a);else{k.sort();var z=k[0],W=Me.subdivide(a,z);d.push(W[0]),X>1&&(z=(k[1]-z)/(1-z),W=Me.subdivide(W[1],z),d.push(W[0])),d.push(W[1])}}return d},solveCubic:function(a,h,d,m,y,v){var S=a[h],w=a[h+2],E=a[h+4],I=a[h+6],N=0;if(!(S<d&&I<d&&w<d&&E<d||S>d&&I>d&&w>d&&E>d)){var q=3*(w-S),B=3*(E-w)-q,k=I-S-q-B;N=C.solveCubic(k,B,q,S-d,m,y,v)}return N},getTimeOf:function(a,h){var d=new P(a[0],a[1]),m=new P(a[6],a[7]),y=1e-12,v=1e-7,S=h.isClose(d,y)?0:h.isClose(m,y)?1:null;if(S===null)for(var w=[h.x,h.y],E=[],I=0;I<2;I++)for(var N=Me.solveCubic(a,I,w[I],E,0,1),q=0;q<N;q++){var B=E[q];if(h.isClose(Me.getPoint(a,B),v))return B}return h.isClose(d,v)?0:h.isClose(m,v)?1:null},getNearestTime:function(a,h){if(Me.isStraight(a)){var d=a[0],m=a[1],y=a[6],v=a[7],S=y-d,w=v-m,E=S*S+w*w;if(E===0)return 0;var I=((h.x-d)*S+(h.y-m)*w)/E;return I<1e-12?0:I>.999999999999?1:Me.getTimeOf(a,new P(d+I*S,m+I*w))}var N=100,q=1/0,B=0;function k(W){if(W>=0&&W<=1){var R=h.getDistance(Me.getPoint(a,W),!0);if(R<q)return q=R,B=W,!0}}for(var X=0;X<=N;X++)k(X/N);for(var z=1/(N*2);z>1e-8;)!k(B-z)&&!k(B+z)&&(z/=2);return B},getPart:function(a,h,d){var m=h>d;if(m){var y=h;h=d,d=y}return h>0&&(a=Me.subdivide(a,h)[1]),d<1&&(a=Me.subdivide(a,(d-h)/(1-h))[0]),m?[a[6],a[7],a[4],a[5],a[2],a[3],a[0],a[1]]:a},isFlatEnough:function(a,h){var d=a[0],m=a[1],y=a[2],v=a[3],S=a[4],w=a[5],E=a[6],I=a[7],N=3*y-2*d-E,q=3*v-2*m-I,B=3*S-2*E-d,k=3*w-2*I-m;return Math.max(N*N,B*B)+Math.max(q*q,k*k)<=16*h*h},getArea:function(a){var h=a[0],d=a[1],m=a[2],y=a[3],v=a[4],S=a[5],w=a[6],E=a[7];return 3*((E-d)*(m+v)-(w-h)*(y+S)+y*(h-v)-m*(d-S)+E*(v+h/3)-w*(S+d/3))/20},getBounds:function(a){for(var h=a.slice(0,2),d=h.slice(),m=[0,0],y=0;y<2;y++)Me._addBounds(a[y],a[y+2],a[y+4],a[y+6],y,0,h,d,m);return new U(h[0],h[1],d[0]-h[0],d[1]-h[1])},_addBounds:function(a,h,d,m,y,v,S,w,E){function I(j,J){var G=j-J,se=j+J;G<S[y]&&(S[y]=G),se>w[y]&&(w[y]=se)}v/=2;var N=S[y]+v,q=w[y]-v;if(a<N||h<N||d<N||m<N||a>q||h>q||d>q||m>q)if(h<a!=h<m&&d<a!=d<m)I(a,0),I(m,0);else{var B=3*(h-d)-a+m,k=2*(a+d)-4*h,X=h-a,z=C.solveQuadratic(B,k,X,E),W=1e-8,R=1-W;I(m,0);for(var Y=0;Y<z;Y++){var x=E[Y],H=1-x;W<=x&&x<=R&&I(H*H*H*a+3*H*H*x*h+3*H*x*x*d+x*x*x*m,v)}}}}},r.each(["getBounds","getStrokeBounds","getHandleBounds"],function(a){this[a]=function(){this._bounds||(this._bounds={});var h=this._bounds[a];return h||(h=this._bounds[a]=Pe[a]([this._segment1,this._segment2],!1,this._path)),h.clone()}},{}),r.each({isStraight:function(a,h,d,m){if(h.isZero()&&d.isZero())return!0;var y=m.subtract(a);if(y.isZero())return!1;if(y.isCollinear(h)&&y.isCollinear(d)){var v=new pe(a,m),S=1e-7;if(v.getDistance(a.add(h))<S&&v.getDistance(m.add(d))<S){var w=y.dot(y),E=y.dot(h)/w,I=y.dot(d)/w;return E>=0&&E<=1&&I<=0&&I>=-1}}return!1},isLinear:function(a,h,d,m){var y=m.subtract(a).divide(3);return h.equals(y)&&d.negate().equals(y)}},function(a,h){this[h]=function(d){var m=this._segment1,y=this._segment2;return a(m._point,m._handleOut,y._handleIn,y._point,d)},this.statics[h]=function(d,m){var y=d[0],v=d[1],S=d[6],w=d[7];return a(new P(y,v),new P(d[2]-y,d[3]-v),new P(d[4]-S,d[5]-w),new P(S,w),m)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(a){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(a||0)},isCollinear:function(a){return a&&this.isStraight()&&a.isStraight()&&this.getLine().isCollinear(a.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(a,h){return this.getLocationAtTime(h?a:this.getTimeAt(a))},getLocationAtTime:function(a){return a!=null&&a>=0&&a<=1?new Lt(this,a):null},getTimeAt:function(a,h){return Me.getTimeAt(this.getValues(),a,h)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var a=P.read(arguments);return a.isZero()?[]:Me.getTimesWithTangent(this.getValues(),a)},getOffsetAtTime:function(a){return this.getPartLength(0,a)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(P.read(arguments)))},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getTimeOf:function(){return Me.getTimeOf(this.getValues(),P.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var a=P.read(arguments),h=this.getValues(),d=Me.getNearestTime(h,a),m=Me.getPoint(h,d);return new Lt(this,d,m,null,a.getDistance(m))},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a&&a.getPoint()}},new function(){var a=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return r.each(a,function(h){this[h+"At"]=function(d,m){var y=this.getValues();return Me[h](y,m?d:Me.getTimeAt(y,d))},this[h+"AtTime"]=function(d){return Me[h](this.getValues(),d)}},{statics:{_evaluateMethods:a}})},new function(){function a(m){var y=m[0],v=m[1],S=m[2],w=m[3],E=m[4],I=m[5],N=m[6],q=m[7],B=9*(S-E)+3*(N-y),k=6*(y+E)-12*S,X=3*(S-y),z=9*(w-I)+3*(q-v),W=6*(v+I)-12*w,R=3*(w-v);return function(Y){var x=(B*Y+k)*Y+X,H=(z*Y+W)*Y+R;return Math.sqrt(x*x+H*H)}}function h(m,y){return Math.max(2,Math.min(16,Math.ceil(Math.abs(y-m)*32)))}function d(m,y,v,S){if(y==null||y<0||y>1)return null;var w=m[0],E=m[1],I=m[2],N=m[3],q=m[4],B=m[5],k=m[6],X=m[7],z=C.isZero;z(I-w)&&z(N-E)&&(I=w,N=E),z(q-k)&&z(B-X)&&(q=k,B=X);var W=3*(I-w),R=3*(q-I)-W,Y=k-w-W-R,x=3*(N-E),H=3*(B-N)-x,j=X-E-x-H,J,G;if(v===0)J=y===0?w:y===1?k:((Y*y+R)*y+W)*y+w,G=y===0?E:y===1?X:((j*y+H)*y+x)*y+E;else{var se=1e-8,he=1-se;if(y<se?(J=W,G=x):y>he?(J=3*(k-q),G=3*(X-B)):(J=(3*Y*y+2*R)*y+W,G=(3*j*y+2*H)*y+x),S){J===0&&G===0&&(y<se||y>he)&&(J=q-I,G=B-N);var de=Math.sqrt(J*J+G*G);de&&(J/=de,G/=de)}if(v===3){var q=6*Y*y+2*R,B=6*j*y+2*H,_e=Math.pow(J*J+G*G,3/2);J=_e!==0?(J*B-G*q)/_e:0,G=0}}return v===2?new P(G,-J):new P(J,G)}return{statics:{classify:function(m){var y=m[0],v=m[1],S=m[2],w=m[3],E=m[4],I=m[5],N=m[6],q=m[7],B=y*(q-I)+v*(E-N)+N*I-q*E,k=S*(v-q)+w*(N-y)+y*q-v*N,X=E*(w-v)+I*(y-S)+S*v-w*y,z=3*X,W=z-k,R=W-k+B,Y=Math.sqrt(R*R+W*W+z*z),x=Y!==0?1/Y:0,H=C.isZero,j="serpentine";R*=x,W*=x,z*=x;function J(de,_e,oe){var ye=_e!==t,Ae=ye&&_e>0&&_e<1,Ee=ye&&oe>0&&oe<1;return ye&&(!(Ae||Ee)||de==="loop"&&!(Ae&&Ee))&&(de="arch",Ae=Ee=!1),{type:de,roots:Ae||Ee?Ae&&Ee?_e<oe?[_e,oe]:[oe,_e]:[Ae?_e:oe]:null}}if(H(R))return H(W)?J(H(z)?"line":"quadratic"):J(j,z/(3*W));var G=3*W*W-4*R*z;if(H(G))return J("cusp",W/(2*R));var se=G>0?Math.sqrt(G/3):Math.sqrt(-G),he=2*R;return J(G>0?j:"loop",(W+se)/he,(W-se)/he)},getLength:function(m,y,v,S){if(y===t&&(y=0),v===t&&(v=1),Me.isStraight(m)){var w=m;v<1&&(w=Me.subdivide(w,v)[0],y/=v),y>0&&(w=Me.subdivide(w,y)[1]);var E=w[6]-w[0],I=w[7]-w[1];return Math.sqrt(E*E+I*I)}return C.integrate(S||a(m),y,v,h(y,v))},getTimeAt:function(m,y,v){if(v===t&&(v=y<0?1:0),y===0)return v;var S=Math.abs,w=1e-12,E=y>0,I=E?v:0,N=E?1:v,q=a(m),B=Me.getLength(m,I,N,q),k=S(y)-B;if(S(k)<w)return E?N:I;if(k>w)return null;var X=y/B,z=0;function W(R){return z+=C.integrate(q,v,R,h(v,R)),v=R,z-y}return C.findRoot(W,q,v+X,I,N,32,1e-12)},getPoint:function(m,y){return d(m,y,0,!1)},getTangent:function(m,y){return d(m,y,1,!0)},getWeightedTangent:function(m,y){return d(m,y,1,!1)},getNormal:function(m,y){return d(m,y,2,!0)},getWeightedNormal:function(m,y){return d(m,y,2,!1)},getCurvature:function(m,y){return d(m,y,3,!1).x},getPeaks:function(m){var y=m[0],v=m[1],S=m[2],w=m[3],E=m[4],I=m[5],N=m[6],q=m[7],B=-y+3*S-3*E+N,k=3*y-6*S+3*E,X=-3*y+3*S,z=-v+3*w-3*I+q,W=3*v-6*w+3*I,R=-3*v+3*w,Y=1e-8,x=1-Y,H=[];return C.solveCubic(9*(B*B+z*z),9*(B*k+W*z),2*(k*k+W*W)+3*(X*B+R*z),X*k+W*R,H,Y,x),H.sort()}}}},new function(){function a(k,X,z,W,R,Y,x){var H=!x&&z.getPrevious()===R,j=!x&&z!==R&&z.getNext()===R,J=1e-8,G=1-J;if(W!==null&&W>=(H?J:0)&&W<=(j?G:1)&&Y!==null&&Y>=(j?J:0)&&Y<=(H?G:1)){var se=new Lt(z,W,null,x),he=new Lt(R,Y,null,x);se._intersection=he,he._intersection=se,(!X||X(se))&&Lt.insert(k,se,!0)}}function h(k,X,z,W,R,Y,x,H,j,J,G,se,he){if(++j>=4096||++H>=40)return j;var de=1e-9,_e=X[0],oe=X[1],ye=X[6],Ae=X[7],Ee=pe.getSignedDistance,De=Ee(_e,oe,ye,Ae,X[2],X[3]),Re=Ee(_e,oe,ye,Ae,X[4],X[5]),it=De*Re>0?3/4:4/9,ht=it*Math.min(0,De,Re),mt=it*Math.max(0,De,Re),vt=Ee(_e,oe,ye,Ae,k[0],k[1]),Ke=Ee(_e,oe,ye,Ae,k[2],k[3]),We=Ee(_e,oe,ye,Ae,k[4],k[5]),yt=Ee(_e,oe,ye,Ae,k[6],k[7]),St=d(vt,Ke,We,yt),Vt=St[0],Bt=St[1],Nt,Ft;if(De===0&&Re===0&&vt===0&&Ke===0&&We===0&&yt===0||(Nt=m(Vt,Bt,ht,mt))==null||(Ft=m(Vt.reverse(),Bt.reverse(),ht,mt))==null)return j;var ii=J+(G-J)*Nt,zt=J+(G-J)*Ft;if(Math.max(he-se,zt-ii)<de){var Ts=(ii+zt)/2,gs=(se+he)/2;a(R,Y,x?W:z,x?gs:Ts,x?z:W,x?Ts:gs)}else{k=Me.getPart(k,Nt,Ft);var Is=he-se;if(Ft-Nt>.8)if(zt-ii>Is){var ms=Me.subdivide(k,.5),Ts=(ii+zt)/2;j=h(X,ms[0],W,z,R,Y,!x,H,j,se,he,ii,Ts),j=h(X,ms[1],W,z,R,Y,!x,H,j,se,he,Ts,zt)}else{var ms=Me.subdivide(X,.5),gs=(se+he)/2;j=h(ms[0],k,W,z,R,Y,!x,H,j,se,gs,ii,zt),j=h(ms[1],k,W,z,R,Y,!x,H,j,gs,he,ii,zt)}else Is===0||Is>=de?j=h(X,k,W,z,R,Y,!x,H,j,se,he,ii,zt):j=h(k,X,z,W,R,Y,x,H,j,ii,zt,se,he)}return j}function d(k,X,z,W){var R=[0,k],Y=[1/3,X],x=[2/3,z],H=[1,W],j=X-(2*k+W)/3,J=z-(k+2*W)/3,G;if(j*J<0)G=[[R,Y,H],[R,x,H]];else{var se=j/J;G=[se>=2?[R,Y,H]:se<=.5?[R,x,H]:[R,Y,x,H],[R,H]]}return(j||J)<0?G.reverse():G}function m(k,X,z,W){return k[0][1]<z?y(k,!0,z):X[0][1]>W?y(X,!1,W):k[0][0]}function y(k,X,z){for(var W=k[0][0],R=k[0][1],Y=1,x=k.length;Y<x;Y++){var H=k[Y][0],j=k[Y][1];if(X?j>=z:j<=z)return j===z?H:W+(z-R)*(H-W)/(j-R);W=H,R=j}return null}function v(k,X,z,W,R){var Y=C.isZero;if(Y(W)&&Y(R)){var x=Me.getTimeOf(k,new P(X,z));return x===null?[]:[x]}for(var H=Math.atan2(-R,W),j=Math.sin(H),J=Math.cos(H),G=[],se=[],he=0;he<8;he+=2){var de=k[he]-X,_e=k[he+1]-z;G.push(de*J-_e*j,de*j+_e*J)}return Me.solveCubic(G,1,0,se,0,1),se}function S(k,X,z,W,R,Y,x){for(var H=X[0],j=X[1],J=X[6],G=X[7],se=v(k,H,j,J-H,G-j),he=0,de=se.length;he<de;he++){var _e=se[he],oe=Me.getPoint(k,_e),ye=Me.getTimeOf(X,oe);ye!==null&&a(R,Y,x?W:z,x?ye:_e,x?z:W,x?_e:ye)}}function w(k,X,z,W,R,Y){var x=pe.intersect(k[0],k[1],k[6],k[7],X[0],X[1],X[6],X[7]);x&&a(R,Y,z,Me.getTimeOf(k,x),W,Me.getTimeOf(X,x))}function E(k,X,z,W,R,Y){var x=1e-12,H=Math.min,j=Math.max;if(j(k[0],k[2],k[4],k[6])+x>H(X[0],X[2],X[4],X[6])&&H(k[0],k[2],k[4],k[6])-x<j(X[0],X[2],X[4],X[6])&&j(k[1],k[3],k[5],k[7])+x>H(X[1],X[3],X[5],X[7])&&H(k[1],k[3],k[5],k[7])-x<j(X[1],X[3],X[5],X[7])){var J=q(k,X);if(J)for(var G=0;G<2;G++){var se=J[G];a(R,Y,z,se[0],W,se[1],!0)}else{var he=Me.isStraight(k),de=Me.isStraight(X),_e=he&&de,oe=he&&!de,ye=R.length;if((_e?w:he||de?S:h)(oe?X:k,oe?k:X,oe?W:z,oe?z:W,R,Y,oe,0,0,0,1,0,1),!_e||R.length===ye)for(var G=0;G<4;G++){var Ae=G>>1,Ee=G&1,De=Ae*6,Re=Ee*6,it=new P(k[De],k[De+1]),ht=new P(X[Re],X[Re+1]);it.isClose(ht,x)&&a(R,Y,z,Ae,W,Ee)}}}return R}function I(k,X,z,W){var R=Me.classify(k);if(R.type==="loop"){var Y=R.roots;a(z,W,X,Y[0],X,Y[1])}return z}function N(k,X,z,W,R,Y){var x=1e-7,H=!X;H&&(X=k);for(var j=k.length,J=X.length,G=new Array(j),se=H?G:new Array(J),he=[],de=0;de<j;de++)G[de]=k[de].getValues(W);if(!H)for(var de=0;de<J;de++)se[de]=X[de].getValues(R);for(var _e=g.findCurveBoundsCollisions(G,se,x),oe=0;oe<j;oe++){var ye=k[oe],Ae=G[oe];H&&I(Ae,ye,he,z);var Ee=_e[oe];if(Ee)for(var De=0;De<Ee.length;De++){if(Y&&he.length)return he;var Re=Ee[De];if(!H||Re>oe){var it=X[Re],ht=se[Re];E(Ae,ht,ye,it,he,z)}}}return he}function q(k,X){function z(yt){var St=yt[6]-yt[0],Vt=yt[7]-yt[1];return St*St+Vt*Vt}var W=Math.abs,R=pe.getDistance,Y=1e-8,x=1e-7,H=Me.isStraight(k),j=Me.isStraight(X),J=H&&j,G=z(k)<z(X),se=G?X:k,he=G?k:X,de=se[0],_e=se[1],oe=se[6]-de,ye=se[7]-_e;if(R(de,_e,oe,ye,he[0],he[1],!0)<x&&R(de,_e,oe,ye,he[6],he[7],!0)<x)!J&&R(de,_e,oe,ye,se[2],se[3],!0)<x&&R(de,_e,oe,ye,se[4],se[5],!0)<x&&R(de,_e,oe,ye,he[2],he[3],!0)<x&&R(de,_e,oe,ye,he[4],he[5],!0)<x&&(H=j=J=!0);else if(J)return null;if(H^j)return null;for(var Ae=[k,X],Ee=[],De=0;De<4&&Ee.length<2;De++){var Re=De&1,it=Re^1,ht=De>>1,mt=Me.getTimeOf(Ae[Re],new P(Ae[it][ht?6:0],Ae[it][ht?7:1]));if(mt!=null){var vt=Re?[ht,mt]:[mt,ht];(!Ee.length||W(vt[0]-Ee[0][0])>Y&&W(vt[1]-Ee[0][1])>Y)&&Ee.push(vt)}if(De>2&&!Ee.length)break}if(Ee.length!==2)Ee=null;else if(!J){var Ke=Me.getPart(k,Ee[0][0],Ee[1][0]),We=Me.getPart(X,Ee[0][1],Ee[1][1]);(W(We[2]-Ke[2])>x||W(We[3]-Ke[3])>x||W(We[4]-Ke[4])>x||W(We[5]-Ke[5])>x)&&(Ee=null)}return Ee}function B(k,X){var z=k[0],W=k[1],R=k[2],Y=k[3],x=k[4],H=k[5],j=k[6],J=k[7],G=X.normalize(),se=G.x,he=G.y,de=3*j-9*x+9*R-3*z,_e=3*J-9*H+9*Y-3*W,oe=6*x-12*R+6*z,ye=6*H-12*Y+6*W,Ae=3*R-3*z,Ee=3*Y-3*W,De=2*de*he-2*_e*se,Re=[];if(Math.abs(De)<C.CURVETIME_EPSILON){var it=de*Ee-_e*Ae,De=de*ye-_e*oe;if(De!=0){var ht=-it/De;ht>=0&&ht<=1&&Re.push(ht)}}else{var mt=(oe*oe-4*de*Ae)*he*he+(-2*oe*ye+4*_e*Ae+4*de*Ee)*se*he+(ye*ye-4*_e*Ee)*se*se,vt=oe*he-ye*se;if(mt>=0&&De!=0){var Ke=Math.sqrt(mt),We=-(vt+Ke)/De,yt=(-vt+Ke)/De;We>=0&&We<=1&&Re.push(We),yt>=0&&yt<=1&&Re.push(yt)}}return Re}return{getIntersections:function(k){var X=this.getValues(),z=k&&k!==this&&k.getValues();return z?E(X,z,this,k,[]):I(X,this,[])},statics:{getOverlaps:q,getIntersections:N,getCurveLineIntersections:v,getTimesWithTangent:B}}}),Lt=r.extend({_class:"CurveLocation",initialize:function(h,d,m,y,v){if(d>=.99999999){var S=h.getNext();S&&(d=0,h=S)}this._setCurve(h),this._time=d,this._point=m||h.getPointAtTime(d),this._overlap=y,this._distance=v,this._intersection=this._next=this._previous=null},_setPath:function(a){this._path=a,this._version=a?a._version:0},_setCurve:function(a){this._setPath(a._path),this._curve=a,this._segment=null,this._segment1=a._segment1,this._segment2=a._segment2},_setSegment:function(a){var h=a.getCurve();h?this._setCurve(h):(this._setPath(a._path),this._segment1=a,this._segment2=null),this._segment=a,this._time=a===this._segment1?0:1,this._point=a._point.clone()},getSegment:function(){var a=this._segment;if(!a){var h=this.getCurve(),d=this.getTime();d===0?a=h._segment1:d===1?a=h._segment2:d!=null&&(a=h.getPartLength(0,d)<h.getPartLength(d,1)?h._segment1:h._segment2),this._segment=a}return a},getCurve:function(){var a=this._path,h=this;a&&a._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function d(m){var y=m&&m.getCurve();if(y&&(h._time=y.getTimeOf(h._point))!=null)return h._setCurve(y),y}return this._curve||d(this._segment)||d(this._segment1)||d(this._segment2.getPrevious())},getPath:function(){var a=this.getCurve();return a&&a._path},getIndex:function(){var a=this.getCurve();return a&&a.getIndex()},getTime:function(){var a=this.getCurve(),h=this._time;return a&&h==null?this._time=a.getTimeOf(this._point):h},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var a=this._offset;if(a==null){a=0;var h=this.getPath(),d=this.getIndex();if(h&&d!=null)for(var m=h.getCurves(),y=0;y<d;y++)a+=m[y].getLength();this._offset=a+=this.getCurveOffset()}return a},getCurveOffset:function(){var a=this._curveOffset;if(a==null){var h=this.getCurve(),d=this.getTime();this._curveOffset=a=d!=null&&h&&h.getPartLength(0,d)}return a},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var a=this.getCurve(),h=a&&a.divideAtTime(this.getTime());return h&&this._setSegment(h._segment1),h},split:function(){var a=this.getCurve(),h=a._path,d=a&&a.splitAtTime(this.getTime());return d&&this._setSegment(h.getLastSegment()),d},equals:function(a,h){var d=this===a;if(!d&&a instanceof Lt){var m=this.getCurve(),y=a.getCurve(),v=m._path,S=y._path;if(v===S){var w=Math.abs,E=1e-7,I=w(this.getOffset()-a.getOffset()),N=!h&&this._intersection,q=!h&&a._intersection;d=(I<E||v&&w(v.getLength()-I)<E)&&(!N&&!q||N&&q&&N.equals(q,!0))}}return d},toString:function(){var a=[],h=this.getPoint(),d=A.instance;h&&a.push("point: "+h);var m=this.getIndex();m!=null&&a.push("index: "+m);var y=this.getTime();return y!=null&&a.push("time: "+d.number(y)),this._distance!=null&&a.push("distance: "+d.number(this._distance)),"{ "+a.join(", ")+" }"},isTouching:function(){var a=this._intersection;if(a&&this.getTangent().isCollinear(a.getTangent())){var h=this.getCurve(),d=a.getCurve();return!(h.isStraight()&&d.isStraight()&&h.getLine().intersect(d.getLine()))}return!1},isCrossing:function(){var a=this._intersection;if(!a)return!1;var h=this.getTime(),d=a.getTime(),m=1e-8,y=1-m,v=h>=m&&h<=y,S=d>=m&&d<=y;if(v&&S)return!this.isTouching();var w=this.getCurve(),E=w&&h<m?w.getPrevious():w,I=a.getCurve(),N=I&&d<m?I.getPrevious():I;if(h>y&&(w=w.getNext()),d>y&&(I=I.getNext()),!E||!w||!N||!I)return!1;var q=[];function B(se,he){var de=se.getValues(),_e=Me.classify(de).roots||Me.getPeaks(de),oe=_e.length,ye=Me.getLength(de,he&&oe?_e[oe-1]:0,!he&&oe?_e[0]:1);q.push(oe?ye:ye/32)}function k(se,he,de){return he<de?se>he&&se<de:se>he||se<de}v||(B(E,!0),B(w,!1)),S||(B(N,!0),B(I,!1));var X=this.getPoint(),z=Math.min.apply(Math,q),W=v?w.getTangentAtTime(h):w.getPointAt(z).subtract(X),R=v?W.negate():E.getPointAt(-z).subtract(X),Y=S?I.getTangentAtTime(d):I.getPointAt(z).subtract(X),x=S?Y.negate():N.getPointAt(-z).subtract(X),H=R.getAngle(),j=W.getAngle(),J=x.getAngle(),G=Y.getAngle();return!!(v?k(H,J,G)^k(j,J,G)&&k(H,G,J)^k(j,G,J):k(J,H,j)^k(G,H,j)&&k(J,j,H)^k(G,j,H))},hasOverlap:function(){return!!this._overlap}},r.each(Me._evaluateMethods,function(a){var h=a+"At";this[a]=function(){var d=this.getCurve(),m=this.getTime();return m!=null&&d&&d[h](m,!0)}},{preserve:!0}),new function(){function a(h,d,m){var y=h.length,v=0,S=y-1;function w(X,z){for(var W=X+z;W>=-1&&W<=y;W+=z){var R=h[(W%y+y)%y];if(!d.getPoint().isClose(R.getPoint(),1e-7))break;if(d.equals(R))return R}return null}for(;v<=S;){var E=v+S>>>1,I=h[E],N;if(m&&(N=d.equals(I)?I:w(E,-1)||w(E,1)))return d._overlap&&(N._overlap=N._intersection._overlap=!0),N;var q=d.getPath(),B=I.getPath(),k=q!==B?q._id-B._id:d.getIndex()+d.getTime()-(I.getIndex()+I.getTime());k<0?S=E-1:v=E+1}return h.splice(v,0,d),d}return{statics:{insert:a,expand:function(h){for(var d=h.slice(),m=h.length-1;m>=0;m--)a(d,h[m]._intersection,!1);return d}}}}),at=T.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(a){var h,d,m;if(r.isPlainObject(a)?(d=a.segments,h=a.pathData):Array.isArray(a)?d=a:typeof a=="string"&&(h=a),d){var y=d[0];m=y&&Array.isArray(y[0])}else h&&(m=(h.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(h));var v=m?$e:Pe;return new v(a)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(a){this.isClockwise()!=(a=!!a)&&this.reverse()},setPathData:function(a){var h=a&&a.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),d,m=!1,y,v,S=new P,w=new P;function E(x,H){var j=+d[x];return m&&(j+=S[H]),j}function I(x){return new P(E(x,"x"),E(x+1,"y"))}this.clear();for(var N=0,q=h&&h.length;N<q;N++){var B=h[N],k=B[0],X=k.toLowerCase();d=B.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var z=d&&d.length;switch(m=k===X,y==="z"&&!/[mz]/.test(X)&&this.moveTo(S),X){case"m":case"l":for(var W=X==="m",R=0;R<z;R+=2)this[W?"moveTo":"lineTo"](S=I(R)),W&&(w=S,W=!1);v=S;break;case"h":case"v":var Y=X==="h"?"x":"y";S=S.clone();for(var R=0;R<z;R++)S[Y]=E(R,Y),this.lineTo(S);v=S;break;case"c":for(var R=0;R<z;R+=6)this.cubicCurveTo(I(R),v=I(R+2),S=I(R+4));break;case"s":for(var R=0;R<z;R+=4)this.cubicCurveTo(/[cs]/.test(y)?S.multiply(2).subtract(v):S,v=I(R),S=I(R+2)),y=X;break;case"q":for(var R=0;R<z;R+=4)this.quadraticCurveTo(v=I(R),S=I(R+2));break;case"t":for(var R=0;R<z;R+=2)this.quadraticCurveTo(v=/[qt]/.test(y)?S.multiply(2).subtract(v):S,S=I(R)),y=X;break;case"a":for(var R=0;R<z;R+=7)this.arcTo(S=I(R+5),new K(+d[R],+d[R+1]),+d[R+2],+d[R+4],+d[R+3]);break;case"z":this.closePath(1e-12),S=w;break}y=X}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(a){var h=a.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(a):{};return h.onPath||!!(this.getFillRule()==="evenodd"?h.windingL&1||h.windingR&1:h.winding)},getIntersections:function(a,h,d,m){var y=this===a||!a,v=this._matrix._orNullIfIdentity(),S=y?v:(d||a._matrix)._orNullIfIdentity();return y||this.getBounds(v).intersects(a.getBounds(S),1e-12)?Me.getIntersections(this.getCurves(),!y&&a.getCurves(),h,v,S,m):[]},getCrossings:function(a){return this.getIntersections(a,function(h){return h.isCrossing()})},getNearestLocation:function(){for(var a=P.read(arguments),h=this.getCurves(),d=1/0,m=null,y=0,v=h.length;y<v;y++){var S=h[y].getNearestLocation(a);S._distance<d&&(d=S._distance,m=S)}return m},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a&&a.getPoint()},interpolate:function(a,h,d){var m=!this._children,y=m?"_segments":"_children",v=a[y],S=h[y],w=this[y];if(!v||!S||v.length!==S.length)throw new Error("Invalid operands in interpolate() call: "+a+", "+h);var E=w.length,I=S.length;if(E<I)for(var N=m?Ye:Pe,q=E;q<I;q++)this.add(new N);else E>I&&this[m?"removeSegments":"removeChildren"](I,E);for(var q=0;q<I;q++)w[q].interpolate(v[q],S[q],d);m&&(this.setClosed(a._closed),this._changed(9))},compare:function(a){var h=!1;if(a){var d=this._children||[this],m=a._children?a._children.slice():[a],y=d.length,v=m.length,S=[],w=0;h=!0;for(var E=g.findItemBoundsCollisions(d,m,C.GEOMETRIC_EPSILON),I=y-1;I>=0&&h;I--){var N=d[I];h=!1;var q=E[I];if(q)for(var B=q.length-1;B>=0&&!h;B--)N.compare(m[q[B]])&&(S[q[B]]||(S[q[B]]=!0,w++),h=!0)}h=h&&w===v}return h}}),Pe=at.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(h){this._closed=!1,this._segments=[],this._version=0;var d=arguments,m=Array.isArray(h)?typeof h[0]=="object"?h:d:h&&h.size===t&&(h.x!==t||h.point!==t)?d:null;m&&m.length>0?this.setSegments(m):(this._curves=t,this._segmentSelection=0,!m&&typeof h=="string"&&(this.setPathData(h),h=null)),this._initialize(!m&&h)},_equals:function(a){return this._closed===a._closed&&r.equals(this._segments,a._segments)},copyContent:function(a){this.setSegments(a._segments),this._closed=a._closed},_changed:function a(h){if(a.base.call(this,h),h&8){if(this._length=this._area=t,h&32)this._version++;else if(this._curves)for(var d=0,m=this._curves.length;d<m;d++)this._curves[d]._changed()}else h&64&&(this._bounds=t)},getStyle:function(){var a=this._parent;return(a instanceof $e?a:this)._style},getSegments:function(){return this._segments},setSegments:function(a){var h=this.isFullySelected(),d=a&&a.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=t,d){var m=a[d-1];typeof m=="boolean"&&(this.setClosed(m),d--),this._add(Ye.readList(a,0,{},d))}h&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var a=this._curves,h=this._segments;if(!a){var d=this._countCurves();a=this._curves=new Array(d);for(var m=0;m<d;m++)a[m]=new Me(this,h[m],h[m+1]||h[0])}return a},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var a=this.getCurves();return a[a.length-1]},isClosed:function(){return this._closed},setClosed:function(a){if(this._closed!=(a=!!a)){if(this._closed=a,this._curves){var h=this._curves.length=this._countCurves();a&&(this._curves[h-1]=new Me(this,this._segments[h-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(a,h){var d=this._segments,m=d.length,y=new A(h),v=new Array(6),S=!0,w,E,I,N,q,B,k,X,z=[];function W(Y,x){if(Y._transformCoordinates(a,v),w=v[0],E=v[1],S)z.push("M"+y.pair(w,E)),S=!1;else if(q=v[2],B=v[3],q===w&&B===E&&k===I&&X===N){if(!x){var H=w-I,j=E-N;z.push(H===0?"v"+y.number(j):j===0?"h"+y.number(H):"l"+y.pair(H,j))}}else z.push("c"+y.pair(k-I,X-N)+" "+y.pair(q-I,B-N)+" "+y.pair(w-I,E-N));I=w,N=E,k=v[4],X=v[5]}if(!m)return"";for(var R=0;R<m;R++)W(d[R]);return this._closed&&m>0&&(W(d[0],!0),z.push("z")),z.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(a){for(var h=this._segments,d=new Array(6),m=0,y=h.length;m<y;m++)h[m]._transformCoordinates(a,d,!0);return!0},_add:function(a,S){for(var d=this._segments,m=this._curves,y=a.length,v=S==null,S=v?d.length:S,w=0;w<y;w++){var E=a[w];E._path&&(E=a[w]=E.clone()),E._path=this,E._index=S+w,E._selection&&this._updateSelection(E,0,E._selection)}if(v)r.push(d,a);else{d.splice.apply(d,[S,0].concat(a));for(var w=S+y,I=d.length;w<I;w++)d[w]._index=w}if(m){var N=this._countCurves(),q=S>0&&S+y-1===N?S-1:S,B=q,k=Math.min(q+y,N);a._curves&&(m.splice.apply(m,[q,0].concat(a._curves)),B+=a._curves.length);for(var w=B;w<k;w++)m.splice(w,0,new Me(this,null,null));this._adjustCurves(q,k)}return this._changed(41),a},_adjustCurves:function(a,h){for(var d=this._segments,m=this._curves,y,v=a;v<h;v++)y=m[v],y._path=this,y._segment1=d[v],y._segment2=d[v+1]||d[0],y._changed();(y=m[this._closed&&!a?d.length-1:a-1])&&(y._segment2=d[a]||d[0],y._changed()),(y=m[h])&&(y._segment1=d[h],y._changed())},_countCurves:function(){var a=this._segments.length;return!this._closed&&a>0?a-1:a},add:function(a){var h=arguments;return h.length>1&&typeof a!="number"?this._add(Ye.readList(h)):this._add([Ye.read(h)])[0]},insert:function(a,h){var d=arguments;return d.length>2&&typeof h!="number"?this._add(Ye.readList(d,1),a):this._add([Ye.read(d,1)],a)[0]},addSegment:function(){return this._add([Ye.read(arguments)])[0]},insertSegment:function(a){return this._add([Ye.read(arguments,1)],a)[0]},addSegments:function(a){return this._add(Ye.readList(a))},insertSegments:function(a,h){return this._add(Ye.readList(h),a)},removeSegment:function(a){return this.removeSegments(a,a+1)[0]||null},removeSegments:function(a,h,d){a=a||0,h=r.pick(h,this._segments.length);var m=this._segments,y=this._curves,v=m.length,S=m.splice(a,h-a),w=S.length;if(!w)return S;for(var E=0;E<w;E++){var I=S[E];I._selection&&this._updateSelection(I,I._selection,0),I._index=I._path=null}for(var E=a,N=m.length;E<N;E++)m[E]._index=E;if(y){for(var q=a>0&&h===v+(this._closed?1:0)?a-1:a,y=y.splice(q,w),E=y.length-1;E>=0;E--)y[E]._path=null;d&&(S._curves=y.slice(1)),this._adjustCurves(q,q)}return this._changed(41),S},clear:"#removeSegments",hasHandles:function(){for(var a=this._segments,h=0,d=a.length;h<d;h++)if(a[h].hasHandles())return!0;return!1},clearHandles:function(){for(var a=this._segments,h=0,d=a.length;h<d;h++)a[h].clearHandles()},getLength:function(){if(this._length==null){for(var a=this.getCurves(),h=0,d=0,m=a.length;d<m;d++)h+=a[d].getLength();this._length=h}return this._length},getArea:function(){var a=this._area;if(a==null){var h=this._segments,d=this._closed;a=0;for(var m=0,y=h.length;m<y;m++){var v=m+1===y;a+=Me.getArea(Me.getValues(h[m],h[v?0:m+1],null,v&&!d))}this._area=a}return a},isFullySelected:function(){var a=this._segments.length;return this.isSelected()&&a>0&&this._segmentSelection===a*7},setFullySelected:function(a){a&&this._selectSegments(!0),this.setSelected(a)},setSelection:function a(h){h&1||this._selectSegments(!1),a.base.call(this,h)},_selectSegments:function(a){var h=this._segments,d=h.length,m=a?7:0;this._segmentSelection=m*d;for(var y=0;y<d;y++)h[y]._selection=m},_updateSelection:function(a,h,d){a._selection=d;var m=this._segmentSelection+=d-h;m>0&&this.setSelected(!0)},divideAt:function(a){var h=this.getLocationAt(a),d;return h&&(d=h.getCurve().divideAt(h.getCurveOffset()))?d._segment1:null},splitAt:function(a){var h=this.getLocationAt(a),d=h&&h.index,m=h&&h.time,y=1e-8,v=1-y;m>v&&(d++,m=0);var S=this.getCurves();if(d>=0&&d<S.length){m>=y&&S[d++].divideAtTime(m);var w=this.removeSegments(d,this._segments.length,!0),E;return this._closed?(this.setClosed(!1),E=this):(E=new Pe(T.NO_INSERT),E.insertAbove(this),E.copyAttributes(this)),E._add(w,0),this.addSegment(w[0]),E}return null},split:function(a,h){var d,m=h===t?a:(d=this.getCurves()[a])&&d.getLocationAtTime(h);return m!=null?this.splitAt(m):null},join:function(a,h){var d=h||0;if(a&&a!==this){var m=a._segments,y=this.getLastSegment(),v=a.getLastSegment();if(!v)return this;y&&y._point.isClose(v._point,d)&&a.reverse();var S=a.getFirstSegment();if(y&&y._point.isClose(S._point,d))y.setHandleOut(S._handleOut),this._add(m.slice(1));else{var w=this.getFirstSegment();w&&w._point.isClose(S._point,d)&&a.reverse(),v=a.getLastSegment(),w&&w._point.isClose(v._point,d)?(w.setHandleIn(v._handleIn),this._add(m.slice(0,m.length-1),0)):this._add(m.slice())}a._closed&&this._add([m[0]]),a.remove()}var E=this.getFirstSegment(),I=this.getLastSegment();return E!==I&&E._point.isClose(I._point,d)&&(E.setHandleIn(I._handleIn),I.remove(),this.setClosed(!0)),this},reduce:function(a){for(var h=this.getCurves(),d=a&&a.simplify,m=d?1e-7:0,y=h.length-1;y>=0;y--){var v=h[y];!v.hasHandles()&&(!v.hasLength(m)||d&&v.isCollinear(v.getNext()))&&v.remove()}return this},reverse:function(){this._segments.reverse();for(var a=0,h=this._segments.length;a<h;a++){var d=this._segments[a],m=d._handleIn;d._handleIn=d._handleOut,d._handleOut=m,d._index=a}this._curves=null,this._changed(9)},flatten:function(a){for(var h=new gt(this,a||.25,256,!0),d=h.parts,m=d.length,y=[],v=0;v<m;v++)y.push(new Ye(d[v].curve.slice(0,2)));!this._closed&&m>0&&y.push(new Ye(d[m-1].curve.slice(6))),this.setSegments(y)},simplify:function(a){var h=new oi(this).fit(a||2.5);return h&&this.setSegments(h),!!h},smooth:function(a){var h=this,d=a||{},m=d.type||"asymmetric",y=this._segments,v=y.length,S=this._closed;function w(Vt,Bt){var Nt=Vt&&Vt.index;if(Nt!=null){var Ft=Vt.path;if(Ft&&Ft!==h)throw new Error(Vt._class+" "+Nt+" of "+Ft+" is not part of "+h);Bt&&Vt instanceof Me&&Nt++}else Nt=typeof Vt=="number"?Vt:Bt;return Math.min(Nt<0&&S?Nt%v:Nt<0?Nt+v:Nt,v-1)}var E=S&&d.from===t&&d.to===t,I=w(d.from,0),N=w(d.to,v-1);if(I>N)if(S)I-=v;else{var q=I;I=N,N=q}if(/^(?:asymmetric|continuous)$/.test(m)){var B=m==="asymmetric",k=Math.min,X=N-I+1,z=X-1,W=E?k(X,4):1,R=W,Y=W,x=[];if(S||(R=k(1,I),Y=k(1,v-N-1)),z+=R+Y,z<=1)return;for(var H=0,j=I-R;H<=z;H++,j++)x[H]=y[(j<0?j+v:j)%v]._point;for(var J=x[0]._x+2*x[1]._x,G=x[0]._y+2*x[1]._y,se=2,he=z-1,de=[J],_e=[G],oe=[se],ye=[],Ae=[],H=1;H<z;H++){var Ee=H<he,De=Ee||B?1:2,Re=Ee?4:B?2:7,it=Ee?4:B?3:8,ht=Ee?2:B?0:1,mt=De/se;se=oe[H]=Re-mt,J=de[H]=it*x[H]._x+ht*x[H+1]._x-mt*J,G=_e[H]=it*x[H]._y+ht*x[H+1]._y-mt*G}ye[he]=de[he]/oe[he],Ae[he]=_e[he]/oe[he];for(var H=z-2;H>=0;H--)ye[H]=(de[H]-ye[H+1])/oe[H],Ae[H]=(_e[H]-Ae[H+1])/oe[H];ye[z]=(3*x[z]._x-ye[he])/2,Ae[z]=(3*x[z]._y-Ae[he])/2;for(var H=R,vt=z-Y,j=I;H<=vt;H++,j++){var Ke=y[j<0?j+v:j],We=Ke._point,yt=ye[H]-We._x,St=Ae[H]-We._y;(E||H<vt)&&Ke.setHandleOut(yt,St),(E||H>R)&&Ke.setHandleIn(-yt,-St)}}else for(var H=I;H<=N;H++)y[H<0?H+v:H].smooth(d,!E&&H===I,!E&&H===N)},toShape:function(a){if(!this._closed)return null;var h=this._segments,d,m,y,v;function S(B,k){var X=h[B],z=X.getNext(),W=h[k],R=W.getNext();return X._handleOut.isZero()&&z._handleIn.isZero()&&W._handleOut.isZero()&&R._handleIn.isZero()&&z._point.subtract(X._point).isCollinear(R._point.subtract(W._point))}function w(B){var k=h[B],X=k.getPrevious(),z=k.getNext();return X._handleOut.isZero()&&k._handleIn.isZero()&&k._handleOut.isZero()&&z._handleIn.isZero()&&k._point.subtract(X._point).isOrthogonal(z._point.subtract(k._point))}function E(B){var k=h[B],X=k.getNext(),z=k._handleOut,W=X._handleIn,R=.5522847498307936;if(z.isOrthogonal(W)){var Y=k._point,x=X._point,H=new pe(Y,z,!0).intersect(new pe(x,W,!0),!0);return H&&C.isZero(z.getLength()/H.subtract(Y).getLength()-R)&&C.isZero(W.getLength()/H.subtract(x).getLength()-R)}return!1}function I(B,k){return h[B]._point.getDistance(h[k]._point)}if(!this.hasHandles()&&h.length===4&&S(0,2)&&S(1,3)&&w(1)?(d=be.Rectangle,m=new K(I(0,3),I(0,1)),v=h[1]._point.add(h[2]._point).divide(2)):h.length===8&&E(0)&&E(2)&&E(4)&&E(6)&&S(1,5)&&S(3,7)?(d=be.Rectangle,m=new K(I(1,6),I(0,3)),y=m.subtract(new K(I(0,7),I(1,2))).divide(2),v=h[3]._point.add(h[4]._point).divide(2)):h.length===4&&E(0)&&E(1)&&E(2)&&E(3)&&(C.isZero(I(0,2)-I(1,3))?(d=be.Circle,y=I(0,2)/2):(d=be.Ellipse,y=new K(I(2,0)/2,I(3,1)/2)),v=h[1]._point),d){var N=this.getPosition(!0),q=new d({center:N,size:m,radius:y,insert:!1});return q.copyAttributes(this,!0),q._matrix.prepend(this._matrix),q.rotate(v.subtract(N).getAngle()+90),(a===t||a)&&q.insertAbove(this),q}return null},toPath:"#clone",compare:function a(h){if(!h||h instanceof $e)return a.base.call(this,h);var d=this.getCurves(),m=h.getCurves(),y=d.length,v=m.length;if(!y||!v)return y==v;for(var S=d[0].getValues(),w=[],E=0,I,N=0,q,B=0;B<v;B++){var W=m[B].getValues();w.push(W);var k=Me.getOverlaps(S,W);if(k){I=!B&&k[0][0]>0?v-1:B,q=k[0][1];break}}for(var X=Math.abs,z=1e-8,W=w[I],R;S&&W;){var k=Me.getOverlaps(S,W);if(k){var Y=k[0][0];if(X(Y-N)<z){N=k[1][0],N===1&&(S=++E<y?d[E].getValues():null,N=0);var x=k[0][1];if(X(x-q)<z){if(R||(R=[I,x]),q=k[1][1],q===1&&(++I>=v&&(I=0),W=w[I]||m[I].getValues(),q=0),!S)return R[0]===I&&R[1]===q;continue}}}break}return!1},_hitTestSelf:function(a,h,d,m){var y=this,v=this.getStyle(),S=this._segments,w=S.length,E=this._closed,I=h._tolerancePadding,N=I,q,B,k,X,z,W,R=h.stroke&&v.hasStroke(),Y=h.fill&&v.hasFill(),x=h.curves,H=R?v.getStrokeWidth()/2:Y&&h.tolerance>0||x?0:null;H!==null&&(H>0?(q=v.getStrokeJoin(),B=v.getStrokeCap(),k=v.getMiterLimit(),N=N.add(Pe._getStrokePadding(H,m))):q=B="round");function j(ye,Ae){return a.subtract(ye).divide(Ae).length<=1}function J(ye,Ae,Ee){if(!h.selected||Ae.isSelected()){var De=ye._point;if(Ae!==De&&(Ae=Ae.add(De)),j(Ae,N))return new Fe(Ee,y,{segment:ye,point:Ae})}}function G(ye,Ae){return(Ae||h.segments)&&J(ye,ye._point,"segment")||!Ae&&h.handles&&(J(ye,ye._handleIn,"handle-in")||J(ye,ye._handleOut,"handle-out"))}function se(ye){X.add(ye)}function he(ye){var Ae=E||ye._index>0&&ye._index<w-1;if((Ae?q:B)==="round")return j(ye._point,N);if(X=new Pe({internal:!0,closed:!0}),Ae?ye.isSmooth()||Pe._addBevelJoin(ye,q,H,k,null,m,se,!0):B==="square"&&Pe._addSquareCap(ye,B,H,null,m,se,!0),!X.isEmpty()){var Ee;return X.contains(a)||(Ee=X.getNearestLocation(a))&&j(Ee.getPoint(),I)}}if(h.ends&&!h.segments&&!E){if(W=G(S[0],!0)||G(S[w-1],!0))return W}else if(h.segments||h.handles){for(var de=0;de<w;de++)if(W=G(S[de]))return W}if(H!==null){if(z=this.getNearestLocation(a),z){var _e=z.getTime();_e===0||_e===1&&w>1?he(z.getSegment())||(z=null):j(z.getPoint(),N)||(z=null)}if(!z&&q==="miter"&&w>1)for(var de=0;de<w;de++){var oe=S[de];if(a.getDistance(oe._point)<=k*H&&he(oe)){z=oe.getLocation();break}}}return!z&&Y&&this._contains(a)||z&&!R&&!x?new Fe("fill",this):z?new Fe(R?"stroke":"curve",this,{location:z,point:z.getPoint()}):null}},r.each(Me._evaluateMethods,function(a){this[a+"At"]=function(h){var d=this.getLocationAt(h);return d&&d[a]()}},{beans:!1,getLocationOf:function(){for(var a=P.read(arguments),h=this.getCurves(),d=0,m=h.length;d<m;d++){var y=h[d].getLocationOf(a);if(y)return y}return null},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getLocationAt:function(a){if(typeof a=="number"){for(var h=this.getCurves(),d=0,m=0,y=h.length;m<y;m++){var v=d,S=h[m];if(d+=S.getLength(),d>a)return S.getLocationAt(a-v)}if(h.length>0&&a<=this.getLength())return new Lt(h[h.length-1],1)}else if(a&&a.getPath&&a.getPath()===this)return a;return null},getOffsetsWithTangent:function(){var a=P.read(arguments);if(a.isZero())return[];for(var h=[],d=0,m=this.getCurves(),y=0,v=m.length;y<v;y++){for(var S=m[y],w=S.getTimesWithTangent(a),E=0,I=w.length;E<I;E++){var N=d+S.getOffsetAtTime(w[E]);h.indexOf(N)<0&&h.push(N)}d+=S.length}return h}}),new function(){function a(d,m,y,v){if(v<=0)return;var S=v/2,w=v-2,E=S-1,I=new Array(6),N,q;function B(Y){var x=I[Y],H=I[Y+1];(N!=x||q!=H)&&(d.beginPath(),d.moveTo(N,q),d.lineTo(x,H),d.stroke(),d.beginPath(),d.arc(x,H,S,0,Math.PI*2,!0),d.fill())}for(var k=0,X=m.length;k<X;k++){var z=m[k],W=z._selection;if(z._transformCoordinates(y,I),N=I[0],q=I[1],W&2&&B(2),W&4&&B(4),d.fillRect(N-S,q-S,v,v),w>0&&!(W&1)){var R=d.fillStyle;d.fillStyle="#ffffff",d.fillRect(N-E,q-E,w,w),d.fillStyle=R}}}function h(d,m,y){var v=m._segments,S=v.length,w=new Array(6),E=!0,I,N,q,B,k,X,z,W;function R(x){if(y)x._transformCoordinates(y,w),I=w[0],N=w[1];else{var H=x._point;I=H._x,N=H._y}if(E)d.moveTo(I,N),E=!1;else{if(y)k=w[2],X=w[3];else{var j=x._handleIn;k=I+j._x,X=N+j._y}k===I&&X===N&&z===q&&W===B?d.lineTo(I,N):d.bezierCurveTo(z,W,k,X,I,N)}if(q=I,B=N,y)z=w[4],W=w[5];else{var j=x._handleOut;z=q+j._x,W=B+j._y}}for(var Y=0;Y<S;Y++)R(v[Y]);m._closed&&S>0&&R(v[0])}return{_draw:function(d,m,y,v){var S=m.dontStart,w=m.dontFinish||m.clip,E=this.getStyle(),I=E.hasFill(),N=E.hasStroke(),q=E.getDashArray(),B=!Rt.support.nativeDash&&N&&q&&q.length;S||d.beginPath(),(I||N&&!B||w)&&(h(d,this,v),this._closed&&d.closePath());function k(x){return q[(x%B+B)%B]}if(!w&&(I||N)&&(this._setStyles(d,m,y),I&&(d.fill(E.getFillRule()),d.shadowColor="rgba(0,0,0,0)"),N)){if(B){S||d.beginPath();for(var X=new gt(this,.25,32,!1,v),z=X.length,W=-E.getDashOffset(),R,Y=0;W>0;)W-=k(Y--)+k(Y--);for(;W<z;)R=W+k(Y++),(W>0||R>0)&&X.drawPart(d,Math.max(W,0),Math.max(R,0)),W=R+k(Y++)}d.stroke()}},_drawSelected:function(d,m){d.beginPath(),h(d,this,m),d.stroke(),a(d,this._segments,m,Rt.settings.handleSize)}}},new function(){function a(h){var d=h._segments;if(!d.length)throw new Error("Use a moveTo() command first");return d[d.length-1]}return{moveTo:function(){var h=this._segments;h.length===1&&this.removeSegment(0),h.length||this._add([new Ye(P.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Ye(P.read(arguments))])},cubicCurveTo:function(){var h=arguments,d=P.read(h),m=P.read(h),y=P.read(h),v=a(this);v.setHandleOut(d.subtract(v._point)),this._add([new Ye(y,m.subtract(y))])},quadraticCurveTo:function(){var h=arguments,d=P.read(h),m=P.read(h),y=a(this)._point;this.cubicCurveTo(d.add(y.subtract(d).multiply(1/3)),d.add(m.subtract(d).multiply(1/3)),m)},curveTo:function(){var h=arguments,d=P.read(h),m=P.read(h),y=r.pick(r.read(h),.5),v=1-y,S=a(this)._point,w=d.subtract(S.multiply(v*v)).subtract(m.multiply(y*y)).divide(2*y*v);if(w.isNaN())throw new Error("Cannot put a curve through points with parameter = "+y);this.quadraticCurveTo(w,m)},arcTo:function(){var h=arguments,d=Math.abs,m=Math.sqrt,y=a(this),v=y._point,S=P.read(h),w,E=r.peek(h),I=r.pick(E,!0),N,q,B,k;if(typeof I=="boolean")var X=v.add(S).divide(2),w=X.add(X.subtract(v).rotate(I?-90:90));else if(r.remain(h)<=2)w=S,S=P.read(h);else if(!v.equals(S)){var z=K.read(h),W=C.isZero;if(W(z.width)||W(z.height))return this.lineTo(S);var R=r.read(h),I=!!r.read(h),Y=!!r.read(h),X=v.add(S).divide(2),x=v.subtract(X).rotate(-R),H=x.x,j=x.y,J=d(z.width),G=d(z.height),se=J*J,he=G*G,de=H*H,_e=j*j,oe=m(de/se+_e/he);if(oe>1&&(J*=oe,G*=oe,se=J*J,he=G*G),oe=(se*he-se*_e-he*de)/(se*_e+he*de),d(oe)<1e-12&&(oe=0),oe<0)throw new Error("Cannot create an arc with the given arguments");N=new P(J*j/G,-G*H/J).multiply((Y===I?-1:1)*m(oe)).rotate(R).add(X),k=new re().translate(N).rotate(R).scale(J,G),B=k._inverseTransform(v),q=B.getDirectedAngle(k._inverseTransform(S)),!I&&q>0?q-=360:I&&q<0&&(q+=360)}if(w){var ye=new pe(v.add(w).divide(2),w.subtract(v).rotate(90),!0),Ae=new pe(w.add(S).divide(2),S.subtract(w).rotate(90),!0),Ee=new pe(v,S),De=Ee.getSide(w);if(N=ye.intersect(Ae,!0),!N){if(!De)return this.lineTo(S);throw new Error("Cannot create an arc with the given arguments")}B=v.subtract(N),q=B.getDirectedAngle(S.subtract(N));var Re=Ee.getSide(N,!0);Re===0?q=De*d(q):De===Re&&(q+=q<0?360:-360)}if(q){for(var it=1e-5,ht=d(q),mt=ht>=360?4:Math.ceil((ht-it)/90),vt=q/mt,Ke=vt*Math.PI/360,We=4/3*Math.sin(Ke)/(1+Math.cos(Ke)),yt=[],St=0;St<=mt;St++){var x=S,Vt=null;if(St<mt&&(Vt=B.rotate(90).multiply(We),k?(x=k._transformPoint(B),Vt=k._transformPoint(B.add(Vt)).subtract(x)):x=N.add(B)),!St)y.setHandleOut(Vt);else{var Bt=B.rotate(-90).multiply(We);k&&(Bt=k._transformPoint(B.add(Bt)).subtract(x)),yt.push(new Ye(x,Bt,Vt))}B=B.rotate(vt)}this._add(yt)}},lineBy:function(){var h=P.read(arguments),d=a(this)._point;this.lineTo(d.add(h))},curveBy:function(){var h=arguments,d=P.read(h),m=P.read(h),y=r.read(h),v=a(this)._point;this.curveTo(v.add(d),v.add(m),y)},cubicCurveBy:function(){var h=arguments,d=P.read(h),m=P.read(h),y=P.read(h),v=a(this)._point;this.cubicCurveTo(v.add(d),v.add(m),v.add(y))},quadraticCurveBy:function(){var h=arguments,d=P.read(h),m=P.read(h),y=a(this)._point;this.quadraticCurveTo(y.add(d),y.add(m))},arcBy:function(){var h=arguments,d=a(this)._point,m=d.add(P.read(h)),y=r.pick(r.peek(h),!0);typeof y=="boolean"?this.arcTo(m,y):this.arcTo(m,d.add(P.read(h)))},closePath:function(h){this.setClosed(!0),this.join(this,h)}}},{_getBounds:function(a,h){var d=h.handle?"getHandleBounds":h.stroke?"getStrokeBounds":"getBounds";return Pe[d](this._segments,this._closed,this,a,h)},statics:{getBounds:function(a,h,d,m,y,v){var S=a[0];if(!S)return new U;var w=new Array(6),E=S._transformCoordinates(m,new Array(6)),I=E.slice(0,2),N=I.slice(),q=new Array(2);function B(z){z._transformCoordinates(m,w);for(var W=0;W<2;W++)Me._addBounds(E[W],E[W+4],w[W+2],w[W],W,v?v[W]:0,I,N,q);var R=E;E=w,w=R}for(var k=1,X=a.length;k<X;k++)B(a[k]);return h&&B(S),new U(I[0],I[1],N[0]-I[0],N[1]-I[1])},getStrokeBounds:function(a,h,d,m,y){var v=d.getStyle(),S=v.hasStroke(),w=v.getStrokeWidth(),E=S&&d._getStrokeMatrix(m,y),I=S&&Pe._getStrokePadding(w,E),N=Pe.getBounds(a,h,d,m,y,I);if(!S)return N;var q=w/2,B=v.getStrokeJoin(),k=v.getStrokeCap(),X=v.getMiterLimit(),z=new U(new K(I));function W(J){N=N.include(J)}function R(J){N=N.unite(z.setCenter(J._point.transform(m)))}function Y(J,G){G==="round"||J.isSmooth()?R(J):Pe._addBevelJoin(J,G,q,X,m,E,W)}function x(J,G){G==="round"?R(J):Pe._addSquareCap(J,G,q,m,E,W)}var H=a.length-(h?0:1);if(H>0){for(var j=1;j<H;j++)Y(a[j],B);h?Y(a[0],B):(x(a[0],k),x(a[a.length-1],k))}return N},_getStrokePadding:function(a,h){if(!h)return[a,a];var d=new P(a,0).transform(h),m=new P(0,a).transform(h),y=d.getAngleInRadians(),v=d.getLength(),S=m.getLength(),w=Math.sin(y),E=Math.cos(y),I=Math.tan(y),N=Math.atan2(S*I,v),q=Math.atan2(S,I*v);return[Math.abs(v*Math.cos(N)*E+S*Math.sin(N)*w),Math.abs(S*Math.sin(q)*E+v*Math.cos(q)*w)]},_addBevelJoin:function(a,h,d,m,y,v,S,w){var E=a.getCurve(),I=E.getPrevious(),N=E.getPoint1().transform(y),q=I.getNormalAtTime(1).multiply(d).transform(v),B=E.getNormalAtTime(0).multiply(d).transform(v),k=q.getDirectedAngle(B);if((k<0||k>=180)&&(q=q.negate(),B=B.negate()),w&&S(N),S(N.add(q)),h==="miter"){var X=new pe(N.add(q),new P(-q.y,q.x),!0).intersect(new pe(N.add(B),new P(-B.y,B.x),!0),!0);X&&N.getDistance(X)<=m*d&&S(X)}S(N.add(B))},_addSquareCap:function(a,h,d,m,y,v,S){var w=a._point.transform(m),E=a.getLocation(),I=E.getNormal().multiply(E.getTime()===0?d:-d).transform(y);h==="square"&&(S&&(v(w.subtract(I)),v(w.add(I))),w=w.add(I.rotate(-90))),v(w.add(I)),v(w.subtract(I))},getHandleBounds:function(a,h,d,m,y){var v=d.getStyle(),S=y.stroke&&v.hasStroke(),w,E;if(S){var I=d._getStrokeMatrix(m,y),N=v.getStrokeWidth()/2,q=N;v.getStrokeJoin()==="miter"&&(q=N*v.getMiterLimit()),v.getStrokeCap()==="square"&&(q=Math.max(q,N*Math.SQRT2)),w=Pe._getStrokePadding(N,I),E=Pe._getStrokePadding(q,I)}for(var B=new Array(6),k=1/0,X=-k,z=k,W=X,R=0,Y=a.length;R<Y;R++){var x=a[R];x._transformCoordinates(m,B);for(var H=0;H<6;H+=2){var j=H?w:E,J=j?j[0]:0,G=j?j[1]:0,se=B[H],he=B[H+1],de=se-J,_e=se+J,oe=he-G,ye=he+G;de<k&&(k=de),_e>X&&(X=_e),oe<z&&(z=oe),ye>W&&(W=ye)}}return new U(k,z,X-k,W-z)}}});Pe.inject({statics:new function(){var a=.5522847498307936,h=[new Ye([-1,0],[0,a],[0,-.5522847498307936]),new Ye([0,-1],[-.5522847498307936,0],[a,0]),new Ye([1,0],[0,-.5522847498307936],[0,a]),new Ye([0,1],[a,0],[-.5522847498307936,0])];function d(y,v,S){var w=r.getNamed(S),E=new Pe(w&&(w.insert==!0?T.INSERT:w.insert==!1?T.NO_INSERT:null));return E._add(y),E._closed=v,E.set(w,T.INSERT)}function m(y,v,S){for(var w=new Array(4),E=0;E<4;E++){var I=h[E];w[E]=new Ye(I._point.multiply(v).add(y),I._handleIn.multiply(v),I._handleOut.multiply(v))}return d(w,!0,S)}return{Line:function(){var y=arguments;return d([new Ye(P.readNamed(y,"from")),new Ye(P.readNamed(y,"to"))],!1,y)},Circle:function(){var y=arguments,v=P.readNamed(y,"center"),S=r.readNamed(y,"radius");return m(v,new K(S),y)},Rectangle:function(){var y=arguments,v=U.readNamed(y,"rectangle"),S=K.readNamed(y,"radius",0,{readNull:!0}),w=v.getBottomLeft(!0),E=v.getTopLeft(!0),I=v.getTopRight(!0),N=v.getBottomRight(!0),q;if(!S||S.isZero())q=[new Ye(w),new Ye(E),new Ye(I),new Ye(N)];else{S=K.min(S,v.getSize(!0).divide(2));var B=S.width,k=S.height,X=B*a,z=k*a;q=[new Ye(w.add(B,0),null,[-X,0]),new Ye(w.subtract(0,k),[0,z]),new Ye(E.add(0,k),null,[0,-z]),new Ye(E.add(B,0),[-X,0],null),new Ye(I.subtract(B,0),null,[X,0]),new Ye(I.add(0,k),[0,-z],null),new Ye(N.subtract(0,k),null,[0,z]),new Ye(N.subtract(B,0),[X,0])]}return d(q,!0,y)},RoundRectangle:"#Rectangle",Ellipse:function(){var y=arguments,v=be._readEllipse(y);return m(v.center,v.radius,y)},Oval:"#Ellipse",Arc:function(){var y=arguments,v=P.readNamed(y,"from"),S=P.readNamed(y,"through"),w=P.readNamed(y,"to"),E=r.getNamed(y),I=new Pe(E&&E.insert==!1&&T.NO_INSERT);return I.moveTo(v),I.arcTo(S,w),I.set(E)},RegularPolygon:function(){for(var y=arguments,v=P.readNamed(y,"center"),S=r.readNamed(y,"sides"),w=r.readNamed(y,"radius"),E=360/S,I=S%3===0,N=new P(0,I?-w:w),q=I?-1:.5,B=new Array(S),k=0;k<S;k++)B[k]=new Ye(v.add(N.rotate((k+q)*E)));return d(B,!0,y)},Star:function(){for(var y=arguments,v=P.readNamed(y,"center"),S=r.readNamed(y,"points")*2,w=r.readNamed(y,"radius1"),E=r.readNamed(y,"radius2"),I=360/S,N=new P(0,-1),q=new Array(S),B=0;B<S;B++)q[B]=new Ye(v.add(N.rotate(I*B).multiply(B%2?E:w)));return d(q,!0,y)}}}});var $e=at.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(h){this._children=[],this._namedChildren={},this._initialize(h)||(typeof h=="string"?this.setPathData(h):this.addChildren(Array.isArray(h)?h:arguments))},insertChildren:function a(h,d){var m=d,y=m[0];y&&typeof y[0]=="number"&&(m=[m]);for(var v=d.length-1;v>=0;v--){var S=m[v];m===d&&!(S instanceof Pe)&&(m=r.slice(m)),Array.isArray(S)?m[v]=new Pe({segments:S,insert:!1}):S instanceof $e&&(m.splice.apply(m,[v,1].concat(S.removeChildren())),S.remove())}return a.base.call(this,h,m)},reduce:function a(h){for(var d=this._children,m=d.length-1;m>=0;m--){var y=d[m].reduce(h);y.isEmpty()&&y.remove()}if(!d.length){var y=new Pe(T.NO_INSERT);return y.copyAttributes(this),y.insertAbove(this),this.remove(),y}return a.base.call(this)},isClosed:function(){for(var a=this._children,h=0,d=a.length;h<d;h++)if(!a[h]._closed)return!1;return!0},setClosed:function(a){for(var h=this._children,d=0,m=h.length;d<m;d++)h[d].setClosed(a)},getFirstSegment:function(){var a=this.getFirstChild();return a&&a.getFirstSegment()},getLastSegment:function(){var a=this.getLastChild();return a&&a.getLastSegment()},getCurves:function(){for(var a=this._children,h=[],d=0,m=a.length;d<m;d++)r.push(h,a[d].getCurves());return h},getFirstCurve:function(){var a=this.getFirstChild();return a&&a.getFirstCurve()},getLastCurve:function(){var a=this.getLastChild();return a&&a.getLastCurve()},getArea:function(){for(var a=this._children,h=0,d=0,m=a.length;d<m;d++)h+=a[d].getArea();return h},getLength:function(){for(var a=this._children,h=0,d=0,m=a.length;d<m;d++)h+=a[d].getLength();return h},getPathData:function(a,h){for(var d=this._children,m=[],y=0,v=d.length;y<v;y++){var S=d[y],w=S._matrix;m.push(S.getPathData(a&&!w.isIdentity()?a.appended(w):a,h))}return m.join("")},_hitTestChildren:function a(h,d,m){return a.base.call(this,h,d.class===Pe||d.type==="path"?d:r.set({},d,{fill:!1}),m)},_draw:function(a,h,d,m){var y=this._children;if(y.length){h=h.extend({dontStart:!0,dontFinish:!0}),a.beginPath();for(var v=0,S=y.length;v<S;v++)y[v].draw(a,h,m);if(!h.clip){this._setStyles(a,h,d);var w=this._style;w.hasFill()&&(a.fill(w.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),w.hasStroke()&&a.stroke()}}},_drawSelected:function(a,h,d){for(var m=this._children,y=0,v=m.length;y<v;y++){var S=m[y],w=S._matrix;d[S._id]||S._drawSelected(a,w.isIdentity()?h:h.appended(w))}}},new function(){function a(h,d){var m=h._children;if(d&&!m.length)throw new Error("Use a moveTo() command first");return m[m.length-1]}return r.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(h){this[h]=function(){var d=a(this,!0);d[h].apply(d,arguments)}},{moveTo:function(){var h=a(this),d=h&&h.isEmpty()?h:new Pe(T.NO_INSERT);d!==h&&this.addChild(d),d.moveTo.apply(d,arguments)},moveBy:function(){var h=a(this,!0),d=h&&h.getLastSegment(),m=P.read(arguments);this.moveTo(d?m.add(d._point):m)},closePath:function(h){a(this,!0).closePath(h)}})},r.each(["reverse","flatten","simplify","smooth"],function(a){this[a]=function(h){for(var d=this._children,m,y=0,v=d.length;y<v;y++)m=d[y][a](h)||m;return m}},{}));at.inject(new function(){var a=Math.min,h=Math.max,d=Math.abs,m={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function y(R){return R._children||[R]}function v(R,Y){var x=R.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(Y){for(var H=y(x),j=0,J=H.length;j<J;j++){var R=H[j];!R._closed&&!R.isEmpty()&&(R.closePath(1e-12),R.getFirstSegment().setHandleIn(0,0),R.getLastSegment().setHandleOut(0,0))}x=x.resolveCrossings().reorient(x.getFillRule()==="nonzero",!0)}return x}function S(R,Y,x,H,j){var J=new $e(T.NO_INSERT);return J.addChildren(R,!0),J=J.reduce({simplify:Y}),j&&j.insert==!1||J.insertAbove(H&&x.isSibling(H)&&x.getIndex()<H.getIndex()?H:x),J.copyAttributes(x,!0),J}function w(R){return R.hasOverlap()||R.isCrossing()}function E(R,Y,x,H){if(H&&(H.trace==!1||H.stroke)&&/^(subtract|intersect)$/.test(x))return I(R,Y,x);var j=v(R,!0),J=Y&&R!==Y&&v(Y,!0),G=m[x];G[x]=!0,J&&(G.subtract||G.exclude)^(J.isClockwise()^j.isClockwise())&&J.reverse();var se=k(Lt.expand(j.getIntersections(J,w))),he=y(j),de=J&&y(J),_e=[],oe=[],ye;function Ae(Vt){for(var Bt=0,Nt=Vt.length;Bt<Nt;Bt++){var Ft=Vt[Bt];r.push(_e,Ft._segments),r.push(oe,Ft.getCurves()),Ft._overlapsOnly=!0}}function Ee(Vt){for(var Bt=[],Nt=0,Ft=Vt&&Vt.length;Nt<Ft;Nt++)Bt.push(oe[Vt[Nt]]);return Bt}if(se.length){Ae(he),de&&Ae(de);for(var De=new Array(oe.length),Re=0,it=oe.length;Re<it;Re++)De[Re]=oe[Re].getValues();for(var ht=g.findCurveBoundsCollisions(De,De,0,!0),mt={},Re=0;Re<oe.length;Re++){var vt=oe[Re],Ke=vt._path._id,We=mt[Ke]=mt[Ke]||{};We[vt.getIndex()]={hor:Ee(ht[Re].hor),ver:Ee(ht[Re].ver)}}for(var Re=0,it=se.length;Re<it;Re++)z(se[Re]._segment,j,J,mt,G);for(var Re=0,it=_e.length;Re<it;Re++){var yt=_e[Re],St=yt._intersection;yt._winding||z(yt,j,J,mt,G),St&&St._overlap||(yt._path._overlapsOnly=!1)}ye=W(_e,G)}else ye=B(de?he.concat(de):he.slice(),function(Vt){return!!G[Vt]});return S(ye,!0,R,Y,H)}function I(R,Y,x){var H=v(R),j=v(Y),J=H.getIntersections(j,w),G=x==="subtract",se=x==="divide",he={},de=[];function _e(Ae){if(!he[Ae._id]&&(se||j.contains(Ae.getPointAt(Ae.getLength()/2))^G))return de.unshift(Ae),he[Ae._id]=!0}for(var oe=J.length-1;oe>=0;oe--){var ye=J[oe].split();ye&&(_e(ye)&&ye.getFirstSegment().setHandleIn(0,0),H.getLastSegment().setHandleOut(0,0))}return _e(H),S(de,!1,R,Y)}function N(R,Y){for(var x=R;x;){if(x===Y)return;x=x._previous}for(;R._next&&R._next!==Y;)R=R._next;if(!R._next){for(;Y._previous;)Y=Y._previous;R._next=Y,Y._previous=R}}function q(R){for(var Y=R.length-1;Y>=0;Y--)R[Y].clearHandles()}function B(R,Y,x){var H=R&&R.length;if(H){var j=r.each(R,function(ht,mt){this[ht._id]={container:null,winding:ht.isClockwise()?1:-1,index:mt}},{}),J=R.slice().sort(function(ht,mt){return d(mt.getArea())-d(ht.getArea())}),G=J[0],se=g.findItemBoundsCollisions(J,null,C.GEOMETRIC_EPSILON);x==null&&(x=G.isClockwise());for(var he=0;he<H;he++){var de=J[he],_e=j[de._id],oe=0,ye=se[he];if(ye){for(var Ae=null,Ee=ye.length-1;Ee>=0;Ee--)if(ye[Ee]<he){Ae=Ae||de.getInteriorPoint();var De=J[ye[Ee]];if(De.contains(Ae)){var Re=j[De._id];oe=Re.winding,_e.winding+=oe,_e.container=Re.exclude?Re.container:De;break}}}if(Y(_e.winding)===Y(oe))_e.exclude=!0,R[_e.index]=null;else{var it=_e.container;de.setClockwise(it?!it.isClockwise():x)}}}return R}function k(R,Y,x){var H=Y&&[],j=1e-8,J=1-j,G=!1,se=x||[],he=x&&{},de,_e,oe;function ye(Bt){return Bt._path._id+"."+Bt._segment1._index}for(var Ae=(x&&x.length)-1;Ae>=0;Ae--){var Ee=x[Ae];Ee._path&&(he[ye(Ee)]=!0)}for(var Ae=R.length-1;Ae>=0;Ae--){var De=R[Ae],Re=De._time,it=Re,ht=Y&&!Y(De),Ee=De._curve,mt;if(Ee&&(Ee!==_e?(G=!Ee.hasHandles()||he&&he[ye(Ee)],de=[],oe=null,_e=Ee):oe>=j&&(Re/=oe)),ht){de&&de.push(De);continue}else Y&&H.unshift(De);if(oe=it,Re<j)mt=Ee._segment1;else if(Re>J)mt=Ee._segment2;else{var vt=Ee.divideAtTime(Re,!0);G&&se.push(Ee,vt),mt=vt._segment1;for(var Ke=de.length-1;Ke>=0;Ke--){var We=de[Ke];We._time=(We._time-Re)/(1-Re)}}De._setSegment(mt);var yt=mt._intersection,St=De._intersection;if(yt){N(yt,St);for(var Vt=yt;Vt;)N(Vt._intersection,yt),Vt=Vt._next}else mt._intersection=St}return x||q(se),H||R}function X(R,Y,x,H,j){var J=Array.isArray(Y)?Y:Y[x?"hor":"ver"],G=x?1:0,se=G^1,he=[R.x,R.y],de=he[G],_e=he[se],oe=1e-9,ye=1e-6,Ae=de-oe,Ee=de+oe,De=0,Re=0,it=0,ht=0,mt=!1,vt=!1,Ke=1,We=[],yt,St;function Vt(ct){var os=ct[se+0],cs=ct[se+6];if(!(_e<a(os,cs)||_e>h(os,cs))){var xs=ct[G+0],Vn=ct[G+2],ir=ct[G+4],Ln=ct[G+6];if(os===cs){(xs<Ee&&Ln>Ae||Ln<Ee&&xs>Ae)&&(mt=!0);return}var Sn=_e===os?0:_e===cs||Ae>h(xs,Vn,ir,Ln)||Ee<a(xs,Vn,ir,Ln)?1:Me.solveCubic(ct,se,_e,We,0,1)>0?We[0]:1,an=Sn===0?xs:Sn===1?Ln:Me.getPoint(ct,Sn)[x?"y":"x"],pn=os>cs?1:-1,kn=yt[se]>yt[se+6]?1:-1,Es=yt[G+6];return _e!==os?(an<Ae?it+=pn:an>Ee?ht+=pn:mt=!0,an>de-ye&&an<de+ye&&(Ke/=2)):(pn!==kn?xs<Ae?it+=pn:xs>Ee&&(ht+=pn):xs!=Es&&(Es<Ee&&an>Ee?(ht+=pn,mt=!0):Es>Ae&&an<Ae&&(it+=pn,mt=!0)),Ke/=4),yt=ct,!j&&an>Ae&&an<Ee&&Me.getTangent(ct,Sn)[x?"x":"y"]===0&&X(R,Y,!x,H,!0)}}function Bt(ct){var os=ct[se+0],cs=ct[se+2],xs=ct[se+4],Vn=ct[se+6];if(_e<=h(os,cs,xs,Vn)&&_e>=a(os,cs,xs,Vn)){for(var ir=ct[G+0],Ln=ct[G+2],Sn=ct[G+4],an=ct[G+6],pn=Ae>h(ir,Ln,Sn,an)||Ee<a(ir,Ln,Sn,an)?[ct]:Me.getMonoCurves(ct,x),kn,Es=0,on=pn.length;Es<on;Es++)if(kn=Vt(pn[Es]))return kn}}for(var Nt=0,Ft=J.length;Nt<Ft;Nt++){var ii=J[Nt],zt=ii._path,Ts=ii.getValues(),gs;if((!Nt||J[Nt-1]._path!==zt)&&(yt=null,zt._closed||(St=Me.getValues(zt.getLastCurve().getSegment2(),ii.getSegment1(),null,!H),St[se]!==St[se+6]&&(yt=St)),!yt)){yt=Ts;for(var Is=zt.getLastCurve();Is&&Is!==ii;){var ms=Is.getValues();if(ms[se]!==ms[se+6]){yt=ms;break}Is=Is.getPrevious()}}if(gs=Bt(Ts))return gs;if(Nt+1===Ft||J[Nt+1]._path!==zt){if(St&&(gs=Bt(St)))return gs;mt&&!it&&!ht&&(it=ht=zt.isClockwise(H)^x?1:-1),De+=it,Re+=ht,it=ht=0,mt&&(vt=!0,mt=!1),St=null}}return De=d(De),Re=d(Re),{winding:h(De,Re),windingL:De,windingR:Re,quality:Ke,onPath:vt}}function z(R,Y,x,H,j){var J=[],G=R,se=0,oe;do{var he=R.getCurve();if(he){var de=he.getLength();J.push({segment:R,curve:he,length:de}),se+=de}R=R.getNext()}while(R&&!R._intersection&&R!==G);for(var _e=[.5,.25,.75],oe={winding:0,quality:-1},ye=.001,Ae=1-ye,Ee=0;Ee<_e.length&&oe.quality<.5;Ee++)for(var de=se*_e[Ee],De=0,Re=J.length;De<Re;De++){var it=J[De],ht=it.length;if(de<=ht){var he=it.curve,mt=he._path,vt=mt._parent,Ke=vt instanceof $e?vt:mt,We=C.clamp(he.getTimeAt(de),ye,Ae),yt=he.getPointAtTime(We),St=d(he.getTangentAtTime(We).y)<Math.SQRT1_2,Vt=null;if(j.subtract&&x){var Bt=Ke===Y?x:Y,Nt=Bt._getWinding(yt,St,!0);if(Ke===Y&&Nt.winding||Ke===x&&!Nt.winding){if(Nt.quality<1)continue;Vt={winding:0,quality:1}}}Vt=Vt||X(yt,H[mt._id][he.getIndex()],St,!0),Vt.quality>oe.quality&&(oe=Vt);break}de-=ht}for(var De=J.length-1;De>=0;De--)J[De].segment._winding=oe}function W(R,Y){var x=[],H;function j(Ft){var ii;return!!(Ft&&!Ft._visited&&(!Y||Y[(ii=Ft._winding||{}).winding]&&!(Y.unite&&ii.winding===2&&ii.windingL&&ii.windingR)))}function J(Ft){if(Ft){for(var ii=0,zt=H.length;ii<zt;ii++)if(Ft===H[ii])return!0}return!1}function G(Ft){for(var ii=Ft._segments,zt=0,Ts=ii.length;zt<Ts;zt++)ii[zt]._visited=!0}function se(Ft,ii){var zt=Ft._intersection,Ts=zt,gs=[];ii&&(H=[Ft]);function Is(ms,ct){for(;ms&&ms!==ct;){var os=ms._segment,cs=os&&os._path;if(cs){var xs=os.getNext()||cs.getFirstSegment(),Vn=xs._intersection;os!==Ft&&(J(os)||J(xs)||xs&&j(os)&&(j(xs)||Vn&&j(Vn._segment)))&&gs.push(os),ii&&H.push(os)}ms=ms._next}}if(zt){for(Is(zt);zt&&zt._previous;)zt=zt._previous;Is(zt,Ts)}return gs}R.sort(function(Ft,ii){var zt=Ft._intersection,Ts=ii._intersection,gs=!!(zt&&zt._overlap),Is=!!(Ts&&Ts._overlap),ms=Ft._path,ct=ii._path;return gs^Is?gs?1:-1:!zt^!Ts?zt?1:-1:ms!==ct?ms._id-ct._id:Ft._index-ii._index});for(var he=0,de=R.length;he<de;he++){var _e=R[he],oe=j(_e),ye=null,Ae=!1,Ee=!0,De=[],Re,it,ht;if(oe&&_e._path._overlapsOnly){var mt=_e._path,vt=_e._intersection._segment._path;mt.compare(vt)&&(mt.getArea()&&x.push(mt.clone(!1)),G(mt),G(vt),oe=!1)}for(;oe;){var Ke=!ye,We=se(_e,Ke),yt=We.shift(),Ae=!Ke&&(J(_e)||J(yt)),St=!Ae&&yt;if(Ke&&(ye=new Pe(T.NO_INSERT),Re=null),Ae){(_e.isFirst()||_e.isLast())&&(Ee=_e._path._closed),_e._visited=!0;break}if(St&&Re&&(De.push(Re),Re=null),Re||(St&&We.push(_e),Re={start:ye._segments.length,crossings:We,visited:it=[],handleIn:ht}),St&&(_e=yt),!j(_e)){ye.removeSegments(Re.start);for(var Vt=0,Bt=it.length;Vt<Bt;Vt++)it[Vt]._visited=!1;it.length=0;do _e=Re&&Re.crossings.shift(),(!_e||!_e._path)&&(_e=null,Re=De.pop(),Re&&(it=Re.visited,ht=Re.handleIn));while(Re&&!j(_e));if(!_e)break}var Nt=_e.getNext();ye.add(new Ye(_e._point,ht,Nt&&_e._handleOut)),_e._visited=!0,it.push(_e),_e=Nt||_e._path.getFirstSegment(),ht=Nt&&Nt._handleIn}Ae&&(Ee&&(ye.getFirstSegment().setHandleIn(ht),ye.setClosed(Ee)),ye.getArea()!==0&&x.push(ye))}return x}return{_getWinding:function(R,Y,x){return X(R,this.getCurves(),Y,x)},unite:function(R,Y){return E(this,R,"unite",Y)},intersect:function(R,Y){return E(this,R,"intersect",Y)},subtract:function(R,Y){return E(this,R,"subtract",Y)},exclude:function(R,Y){return E(this,R,"exclude",Y)},divide:function(R,Y){return Y&&(Y.trace==!1||Y.stroke)?I(this,R,"divide"):S([this.subtract(R,Y),this.intersect(R,Y)],!0,this,R,Y)},resolveCrossings:function(){var R=this._children,Y=R||[this];function x(Re,it){var ht=Re&&Re._intersection;return ht&&ht._overlap&&ht._path===it}var H=!1,j=!1,J=this.getIntersections(null,function(Re){return Re.hasOverlap()&&(H=!0)||Re.isCrossing()&&(j=!0)}),G=H&&j&&[];if(J=Lt.expand(J),H)for(var se=k(J,function(Re){return Re.hasOverlap()},G),he=se.length-1;he>=0;he--){var de=se[he],_e=de._path,oe=de._segment,ye=oe.getPrevious(),Ae=oe.getNext();x(ye,_e)&&x(Ae,_e)&&(oe.remove(),ye._handleOut._set(0,0),Ae._handleIn._set(0,0),ye!==oe&&!ye.getCurve().hasLength()&&(Ae._handleIn.set(ye._handleIn),ye.remove()))}j&&(k(J,H&&function(Re){var it=Re.getCurve(),ht=Re.getSegment(),mt=Re._intersection,vt=mt._curve,Ke=mt._segment;if(it&&vt&&it._path&&vt._path)return!0;ht&&(ht._intersection=null),Ke&&(Ke._intersection=null)},G),G&&q(G),Y=W(r.each(Y,function(Re){r.push(this,Re._segments)},[])));var Ee=Y.length,De;return Ee>1&&R?(Y!==R&&this.setChildren(Y),De=this):Ee===1&&!R&&(Y[0]!==this&&this.setSegments(Y[0].removeSegments()),De=this),De||(De=new $e(T.NO_INSERT),De.addChildren(Y),De=De.reduce(),De.copyAttributes(this),this.replaceWith(De)),De},reorient:function(R,Y){var x=this._children;return x&&x.length?this.setChildren(B(this.removeChildren(),function(H){return!!(R?H:H&1)},Y)):Y!==t&&this.setClockwise(Y),this},getInteriorPoint:function(){var R=this.getBounds(),Y=R.getCenter(!0);if(!this.contains(Y)){for(var x=this.getCurves(),H=Y.y,j=[],J=[],G=0,se=x.length;G<se;G++){var he=x[G].getValues(),de=he[1],_e=he[3],oe=he[5],ye=he[7];if(H>=a(de,_e,oe,ye)&&H<=h(de,_e,oe,ye))for(var Ae=Me.getMonoCurves(he),Ee=0,De=Ae.length;Ee<De;Ee++){var Re=Ae[Ee],it=Re[1],ht=Re[7];if(it!==ht&&(H>=it&&H<=ht||H>=ht&&H<=it)){var mt=H===it?Re[0]:H===ht?Re[6]:Me.solveCubic(Re,1,H,J,0,1)===1?Me.getPoint(Re,J[0]).x:(Re[0]+Re[6])/2;j.push(mt)}}}j.length>1&&(j.sort(function(vt,Ke){return vt-Ke}),Y.x=(j[0]+j[1])/2)}return Y}}});var gt=r.extend({_class:"PathFlattener",initialize:function(a,h,d,m,y){var v=[],S=[],w=0,E=1/(d||32),I=a._segments,N=I[0],q;function B(W,R){var Y=Me.getValues(W,R,y);v.push(Y),k(Y,W._index,0,1)}function k(W,R,Y,x){if(x-Y>E&&!(m&&Me.isStraight(W))&&!Me.isFlatEnough(W,h||.25)){var H=Me.subdivide(W,.5),j=(Y+x)/2;k(H[0],R,Y,j),k(H[1],R,j,x)}else{var J=W[6]-W[0],G=W[7]-W[1],se=Math.sqrt(J*J+G*G);se>0&&(w+=se,S.push({offset:w,curve:W,index:R,time:x}))}}for(var X=1,z=I.length;X<z;X++)q=I[X],B(N,q),N=q;a._closed&&B(q||N,I[0]),this.curves=v,this.parts=S,this.length=w,this.index=0},_get:function(a){for(var h=this.parts,d=h.length,m,y=this.index;m=y,!(!y||h[--y].offset<a););for(;m<d;m++){var v=h[m];if(v.offset>=a){this.index=m;var S=h[m-1],w=S&&S.index===v.index?S.time:0,E=S?S.offset:0;return{index:v.index,time:w+(v.time-w)*(a-E)/(v.offset-E)}}}return{index:h[d-1].index,time:1}},drawPart:function(a,h,d){for(var m=this._get(h),y=this._get(d),v=m.index,S=y.index;v<=S;v++){var w=Me.getPart(this.curves[v],v===m.index?m.time:0,v===y.index?y.time:1);v===m.index&&a.moveTo(w[0],w[1]),a.bezierCurveTo.apply(a,w.slice(2))}}},r.each(Me._evaluateMethods,function(a){this[a+"At"]=function(h){var d=this._get(h);return Me[a](this.curves[d.index],d.time)}},{})),oi=r.extend({initialize:function(a){for(var h=this.points=[],d=a._segments,m=a._closed,y=0,v,S=d.length;y<S;y++){var w=d[y].point;(!v||!v.equals(w))&&h.push(v=w.clone())}m&&(h.unshift(h[h.length-1]),h.push(h[1])),this.closed=m},fit:function(a){var h=this.points,d=h.length,m=null;return d>0&&(m=[new Ye(h[0])],d>1&&(this.fitCubic(m,a,0,d-1,h[1].subtract(h[0]),h[d-2].subtract(h[d-1])),this.closed&&(m.shift(),m.pop()))),m},fitCubic:function(a,h,d,m,y,v){var S=this.points;if(m-d===1){var w=S[d],E=S[m],I=w.getDistance(E)/3;this.addCurve(a,[w,w.add(y.normalize(I)),E.add(v.normalize(I)),E]);return}for(var N=this.chordLengthParameterize(d,m),q=Math.max(h,h*h),B,k=!0,X=0;X<=4;X++){var z=this.generateBezier(d,m,N,y,v),W=this.findMaxError(d,m,z,N);if(W.error<h&&k){this.addCurve(a,z);return}if(B=W.index,W.error>=q)break;k=this.reparameterize(d,m,N,z),q=W.error}var R=S[B-1].subtract(S[B+1]);this.fitCubic(a,h,d,B,y,R),this.fitCubic(a,h,B,m,R.negate(),v)},addCurve:function(a,h){var d=a[a.length-1];d.setHandleOut(h[1].subtract(h[0])),a.push(new Ye(h[3],h[2].subtract(h[3])))},generateBezier:function(a,h,d,m,y){for(var v=1e-12,S=Math.abs,w=this.points,E=w[a],I=w[h],N=[[0,0],[0,0]],q=[0,0],B=0,k=h-a+1;B<k;B++){var X=d[B],z=1-X,W=3*X*z,R=z*z*z,Y=W*z,x=W*X,H=X*X*X,j=m.normalize(Y),J=y.normalize(x),G=w[a+B].subtract(E.multiply(R+Y)).subtract(I.multiply(x+H));N[0][0]+=j.dot(j),N[0][1]+=j.dot(J),N[1][0]=N[0][1],N[1][1]+=J.dot(J),q[0]+=j.dot(G),q[1]+=J.dot(G)}var se=N[0][0]*N[1][1]-N[1][0]*N[0][1],he,de;if(S(se)>v){var _e=N[0][0]*q[1]-N[1][0]*q[0],oe=q[0]*N[1][1]-q[1]*N[0][1];he=oe/se,de=_e/se}else{var ye=N[0][0]+N[0][1],Ae=N[1][0]+N[1][1];he=de=S(ye)>v?q[0]/ye:S(Ae)>v?q[1]/Ae:0}var Ee=I.getDistance(E),De=v*Ee,Re,it;if(he<De||de<De)he=de=Ee/3;else{var ht=I.subtract(E);Re=m.normalize(he),it=y.normalize(de),Re.dot(ht)-it.dot(ht)>Ee*Ee&&(he=de=Ee/3,Re=it=null)}return[E,E.add(Re||m.normalize(he)),I.add(it||y.normalize(de)),I]},reparameterize:function(a,h,d,m){for(var y=a;y<=h;y++)d[y-a]=this.findRoot(m,this.points[y],d[y-a]);for(var y=1,v=d.length;y<v;y++)if(d[y]<=d[y-1])return!1;return!0},findRoot:function(a,h,d){for(var m=[],y=[],v=0;v<=2;v++)m[v]=a[v+1].subtract(a[v]).multiply(3);for(var v=0;v<=1;v++)y[v]=m[v+1].subtract(m[v]).multiply(2);var S=this.evaluate(3,a,d),w=this.evaluate(2,m,d),E=this.evaluate(1,y,d),I=S.subtract(h),N=w.dot(w)+I.dot(E);return C.isMachineZero(N)?d:d-I.dot(w)/N},evaluate:function(a,h,d){for(var m=h.slice(),y=1;y<=a;y++)for(var v=0;v<=a-y;v++)m[v]=m[v].multiply(1-d).add(m[v+1].multiply(d));return m[0]},chordLengthParameterize:function(a,h){for(var d=[0],m=a+1;m<=h;m++)d[m-a]=d[m-a-1]+this.points[m].getDistance(this.points[m-1]);for(var m=1,y=h-a;m<=y;m++)d[m]/=d[y];return d},findMaxError:function(a,h,d,m){for(var y=Math.floor((h-a+1)/2),v=0,S=a+1;S<h;S++){var w=this.evaluate(3,d,m[S-a]),E=w.subtract(this.points[S]),I=E.x*E.x+E.y*E.y;I>=v&&(v=I,y=S)}return{error:v,index:y}}}),Mt=T.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(h){this._content="",this._lines=[];var d=h&&r.isPlainObject(h)&&h.x===t&&h.y===t;this._initialize(d&&h,!d&&P.read(arguments))},_equals:function(a){return this._content===a._content},copyContent:function(a){this.setContent(a._content)},getContent:function(){return this._content},setContent:function(a){this._content=""+a,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Ni=Mt.extend({_class:"PointText",initialize:function(){Mt.apply(this,arguments)},getPoint:function(){var a=this._matrix.getTranslation();return new F(a.x,a.y,this,"setPoint")},setPoint:function(){var a=P.read(arguments);this.translate(a.subtract(this._matrix.getTranslation()))},_draw:function(a,h,d){if(this._content){this._setStyles(a,h,d);var m=this._lines,y=this._style,v=y.hasFill(),S=y.hasStroke(),w=y.getLeading(),E=a.shadowColor;a.font=y.getFontStyle(),a.textAlign=y.getJustification();for(var I=0,N=m.length;I<N;I++){a.shadowColor=E;var q=m[I];v&&(a.fillText(q,0,0),a.shadowColor="rgba(0,0,0,0)"),S&&a.strokeText(q,0,0),a.translate(0,w)}}},_getBounds:function(a,h){var d=this._style,m=this._lines,y=m.length,v=d.getJustification(),S=d.getLeading(),w=this.getView().getTextWidth(d.getFontStyle(),m),E=0;v!=="left"&&(E-=w/(v==="center"?2:1));var I=new U(E,y?-.75*S:0,w,y*S);return a?a._transformBounds(I,I):I}}),qt=r.extend(new function(){var a={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},h={},d={transparent:[0,0,0,0]},m;function y(w){var E=w.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||w.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),I="rgb",N;if(E){var q=E[4]?4:3;N=new Array(q);for(var B=0;B<q;B++){var k=E[B+1];N[B]=parseInt(k.length==1?k+k:k,16)/255}}else if(E=w.match(/^(rgb|hsl)a?\((.*)\)$/)){I=E[1],N=E[2].trim().split(/[,\s]+/g);for(var X=I==="hsl",B=0,z=Math.min(N.length,4);B<z;B++){var W=N[B],k=parseFloat(W);if(X)if(B===0){var R=W.match(/([a-z]*)$/)[1];k*={turn:360,rad:180/Math.PI,grad:.9}[R]||1}else B<3&&(k/=100);else B<3&&(k/=/%$/.test(W)?100:255);N[B]=k}}else{var Y=d[w];if(!Y)if(i){m||(m=rt.getContext(1,1,{willReadFrequently:!0}),m.globalCompositeOperation="copy"),m.fillStyle="rgba(0,0,0,0)",m.fillStyle=w,m.fillRect(0,0,1,1);var x=m.getImageData(0,0,1,1).data;Y=d[w]=[x[0]/255,x[1]/255,x[2]/255]}else Y=[0,0,0];N=Y.slice()}return[I,N]}var v=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],S={"rgb-hsb":function(w,E,I){var N=Math.max(w,E,I),q=Math.min(w,E,I),B=N-q,k=B===0?0:(N==w?(E-I)/B+(E<I?6:0):N==E?(I-w)/B+2:(w-E)/B+4)*60;return[k,N===0?0:B/N,N]},"hsb-rgb":function(w,E,I){w=(w/60%6+6)%6;var q=Math.floor(w),N=w-q,q=v[q],B=[I,I*(1-E),I*(1-E*N),I*(1-E*(1-N))];return[B[q[0]],B[q[1]],B[q[2]]]},"rgb-hsl":function(w,E,I){var N=Math.max(w,E,I),q=Math.min(w,E,I),B=N-q,k=B===0,X=k?0:(N==w?(E-I)/B+(E<I?6:0):N==E?(I-w)/B+2:(w-E)/B+4)*60,z=(N+q)/2,W=k?0:z<.5?B/(N+q):B/(2-N-q);return[X,W,z]},"hsl-rgb":function(w,E,I){if(w=(w/360%1+1)%1,E===0)return[I,I,I];for(var N=[w+1/3,w,w-1/3],q=I<.5?I*(1+E):I+E-I*E,B=2*I-q,k=[],X=0;X<3;X++){var z=N[X];z<0&&(z+=1),z>1&&(z-=1),k[X]=6*z<1?B+(q-B)*6*z:2*z<1?q:3*z<2?B+(q-B)*(2/3-z)*6:B}return k},"rgb-gray":function(w,E,I){return[w*.2989+E*.587+I*.114]},"gray-rgb":function(w){return[w,w,w]},"gray-hsb":function(w){return[0,0,w]},"gray-hsl":function(w){return[0,0,w]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return r.each(a,function(w,E){h[E]=[],r.each(w,function(I,N){var q=r.capitalize(I),B=/^(hue|saturation)$/.test(I),k=h[E][N]=E==="gradient"?I==="gradient"?function(X){var z=this._components[0];return X=as.read(Array.isArray(X)?X:arguments,0,{readNull:!0}),z!==X&&(z&&z._removeOwner(this),X&&X._addOwner(this)),X}:function(){return P.read(arguments,0,{readNull:I==="highlight",clone:!0})}:function(X){return X==null||isNaN(X)?0:+X};this["get"+q]=function(){return this._type===E||B&&/^hs[bl]$/.test(this._type)?this._components[N]:this._convert(E)[N]},this["set"+q]=function(X){this._type!==E&&!(B&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(E),this._properties=a[E],this._type=E),this._components[N]=k.call(this,X),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function w(E){var I=arguments,N=this.__read,q=0,B,k,X,z;Array.isArray(E)&&(I=E,E=I[0]);var W=E!=null&&typeof E;if(W==="string"&&E in a&&(B=E,E=I[1],Array.isArray(E)?(k=E,X=I[2]):(N&&(q=1),I=r.slice(I,1),W=typeof E)),!k){if(z=W==="number"?I:W==="object"&&E.length!=null?E:null,z){B||(B=z.length>=3?"rgb":"gray");var R=a[B].length;X=z[R],N&&(q+=z===arguments?R+(X!=null?1:0):1),z.length>R&&(z=r.slice(z,0,R))}else if(W==="string"){var Y=y(E);B=Y[0],k=Y[1],k.length===4&&(X=k[3],k.length--)}else if(W==="object")if(E.constructor===w){if(B=E._type,k=E._components.slice(),X=E._alpha,B==="gradient")for(var x=1,H=k.length;x<H;x++){var j=k[x];j&&(k[x]=j.clone())}}else if(E.constructor===as)B="gradient",z=I;else{B="hue"in E?"lightness"in E?"hsl":"hsb":"gradient"in E||"stops"in E||"radial"in E?"gradient":"gray"in E?"gray":"rgb";var J=a[B],G=h[B];this._components=k=[];for(var x=0,H=J.length;x<H;x++){var se=E[J[x]];se==null&&!x&&B==="gradient"&&"stops"in E&&(se={stops:E.stops,radial:E.radial}),se=G[x].call(this,se),se!=null&&(k[x]=se)}X=E.alpha}N&&B&&(q=1)}if(this._type=B||"rgb",!k){this._components=k=[];for(var G=h[this._type],x=0,H=G.length;x<H;x++){var se=G[x].call(this,z&&z[x]);se!=null&&(k[x]=se)}}return this._components=k,this._properties=a[this._type],this._alpha=X,N&&(this.__read=q),this},set:"#initialize",_serialize:function(w,E){var I=this.getComponents();return r.serialize(/^(gray|rgb)$/.test(this._type)?I:[this._type].concat(I),w,!0,E)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(w){var E;return this._type===w?this._components.slice():(E=S[this._type+"-"+w])?E.apply(this,this._components):S["rgb-"+w].apply(this,S[this._type+"-rgb"].apply(this,this._components))},convert:function(w){return new qt(w,this._convert(w),this._alpha)},getType:function(){return this._type},setType:function(w){this._components=this._convert(w),this._properties=a[w],this._type=w},getComponents:function(){var w=this._components.slice();return this._alpha!=null&&w.push(this._alpha),w},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(w){this._alpha=w==null?null:Math.min(Math.max(w,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(w){var E=r.isPlainValue(w,!0)?qt.read(arguments):w;return E===this||E&&this._class===E._class&&this._type===E._type&&this.getAlpha()===E.getAlpha()&&r.equals(this._components,E._components)||!1},toString:function(){for(var w=this._properties,E=[],I=this._type==="gradient",N=A.instance,q=0,B=w.length;q<B;q++){var k=this._components[q];k!=null&&E.push(w[q]+": "+(I?k:N.number(k)))}return this._alpha!=null&&E.push("alpha: "+N.number(this._alpha)),"{ "+E.join(", ")+" }"},toCSS:function(w){var E=this._convert("rgb"),I=w||this._alpha==null?1:this._alpha;function N(q){return Math.round((q<0?0:q>1?1:q)*255)}return E=[N(E[0]),N(E[1]),N(E[2])],I<1&&E.push(I<0?0:I),w?"#"+((1<<24)+(E[0]<<16)+(E[1]<<8)+E[2]).toString(16).slice(1):(E.length==4?"rgba(":"rgb(")+E.join(",")+")"},toCanvasStyle:function(w,E){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var I=this._components,N=I[0],q=N._stops,B=I[1],k=I[2],X=I[3],z=E&&E.inverted(),W;if(z&&(B=z._transformPoint(B),k=z._transformPoint(k),X&&(X=z._transformPoint(X))),N._radial){var R=k.getDistance(B);if(X){var Y=X.subtract(B);Y.getLength()>R&&(X=B.add(Y.normalize(R-.1)))}var x=X||B;W=w.createRadialGradient(x.x,x.y,0,B.x,B.y,R)}else W=w.createLinearGradient(B.x,B.y,k.x,k.y);for(var H=0,j=q.length;H<j;H++){var J=q[H],G=J._offset;W.addColorStop(G??H/(j-1),J._color.toCanvasStyle())}return this._canvasStyle=W},transform:function(w){if(this._type==="gradient"){for(var E=this._components,I=1,N=E.length;I<N;I++){var q=E[I];w._transformPoint(q,q,!0)}this._changed()}},statics:{_types:a,random:function(){var w=Math.random;return new qt(w(),w(),w())},_setOwner:function(w,E,I){return w&&(w._owner&&E&&w._owner!==E&&(w=w.clone()),!w._owner^!E&&(w._owner=E||null,w._setter=I||null)),w}}})},new function(){var a={add:function(h,d){return h+d},subtract:function(h,d){return h-d},multiply:function(h,d){return h*d},divide:function(h,d){return h/d}};return r.each(a,function(h,d){this[d]=function(m){m=qt.read(arguments);for(var y=this._type,v=this._components,S=m._convert(y),w=0,E=v.length;w<E;w++)S[w]=h(v[w],S[w]);return new qt(y,S,this._alpha!=null?h(this._alpha,m.getAlpha()):null)}},{})}),as=r.extend({_class:"Gradient",initialize:function(h,d){this._id=D.get(),h&&r.isPlainObject(h)&&(this.set(h),h=d=null),this._stops==null&&this.setStops(h||["white","black"]),this._radial==null&&this.setRadial(typeof d=="string"&&d==="radial"||d||!1)},_serialize:function(a,h){return h.add(this,function(){return r.serialize([this._stops,this._radial],a,!0,h)})},_changed:function(){for(var a=0,h=this._owners&&this._owners.length;a<h;a++)this._owners[a]._changed()},_addOwner:function(a){this._owners||(this._owners=[]),this._owners.push(a)},_removeOwner:function(a){var h=this._owners?this._owners.indexOf(a):-1;h!=-1&&(this._owners.splice(h,1),this._owners.length||(this._owners=t))},clone:function(){for(var a=[],h=0,d=this._stops.length;h<d;h++)a[h]=this._stops[h].clone();return new as(a,this._radial)},getStops:function(){return this._stops},setStops:function(a){if(a.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var h=this._stops;if(h)for(var d=0,m=h.length;d<m;d++)h[d]._owner=t;h=this._stops=qi.readList(a,0,{clone:!0});for(var d=0,m=h.length;d<m;d++)h[d]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(a){this._radial=a,this._changed()},equals:function(a){if(a===this)return!0;if(a&&this._class===a._class){var h=this._stops,d=a._stops,m=h.length;if(m===d.length){for(var y=0;y<m;y++)if(!h[y].equals(d[y]))return!1;return!0}}return!1}}),qi=r.extend({_class:"GradientStop",initialize:function(h,d){var m=h,y=d;typeof h=="object"&&d===t&&(Array.isArray(h)&&typeof h[0]!="number"?(m=h[0],y=h[1]):("color"in h||"offset"in h||"rampPoint"in h)&&(m=h.color,y=h.offset||h.rampPoint||0)),this.setColor(m),this.setOffset(y)},clone:function(){return new qi(this._color.clone(),this._offset)},_serialize:function(a,h){var d=this._color,m=this._offset;return r.serialize(m==null?[d]:[d,m],a,!0,h)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(a){this._offset=a,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){qt._setOwner(this._color,null),this._color=qt._setOwner(qt.read(arguments,0),this,"setColor"),this._changed()},equals:function(a){return a===this||a&&this._class===a._class&&this._color.equals(a._color)&&this._offset==a._offset||!1}}),Vs=r.extend(new function(){var a={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new P,selectedColor:null},h=r.set({},a,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),d=r.set({},h,{fillColor:new qt}),m={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},y={beans:!0},v={_class:"Style",beans:!0,initialize:function(w,E,I){this._values={},this._owner=E,this._project=E&&E._project||I||Rt.project,this._defaults=!E||E instanceof Ce?h:E instanceof Mt?d:a,w&&this.set(w)}};return r.each(h,function(S,w){var E=/Color$/.test(w),I=w==="shadowOffset",N=r.capitalize(w),q=m[w],B="set"+N,k="get"+N;v[B]=function(X){var z=this._owner,W=z&&z._children,R=W&&W.length>0&&!(z instanceof $e);if(R)for(var Y=0,x=W.length;Y<x;Y++)W[Y]._style[B](X);if((w==="selectedColor"||!R)&&w in this._defaults){var H=this._values[w];H!==X&&(E&&(H&&(qt._setOwner(H,null),H._canvasStyle=null),X&&X.constructor===qt&&(X=qt._setOwner(X,z,R&&B))),this._values[w]=X,z&&z._changed(q||129))}},v[k]=function(X){var z=this._owner,W=z&&z._children,R=W&&W.length>0&&!(z instanceof $e),Y;if(R&&!X)for(var x=0,H=W.length;x<H;x++){var j=W[x]._style[k]();if(!x)Y=j;else if(!r.equals(Y,j))return t}else if(w in this._defaults){var Y=this._values[w];if(Y===t)Y=this._defaults[w],Y&&Y.clone&&(Y=Y.clone());else{var J=E?qt:I?P:null;J&&!(Y&&Y.constructor===J)&&(this._values[w]=Y=J.read([Y],0,{readNull:!0,clone:!0}))}}return Y&&E&&(Y=qt._setOwner(Y,z,R&&B)),Y},y[k]=function(X){return this._style[k](X)},y[B]=function(X){this._style[B](X)}}),r.each({Font:"FontFamily",WindingRule:"FillRule"},function(S,w){var E="get"+w,I="set"+w;v[E]=y[E]="#get"+S,v[I]=y[I]="#set"+S}),T.inject(y),v},{set:function(a){var h=a instanceof Vs,d=h?a._values:a;if(d){for(var m in d)if(m in this._defaults){var y=d[m];this[m]=y&&h&&y.clone?y.clone():y}}},equals:function(a){function h(d,m,y){var v=d._values,S=m._values,w=m._defaults;for(var E in v){var I=v[E],N=S[E];if(!(y&&E in S)&&!r.equals(I,N===t?w[E]:N))return!1}return!0}return a===this||a&&this._class===a._class&&h(this,a)&&h(a,this,!0)||!1},_dispose:function(){var a;a=this.getFillColor(),a&&(a._canvasStyle=null),a=this.getStrokeColor(),a&&(a._canvasStyle=null),a=this.getShadowColor(),a&&(a._canvasStyle=null)},hasFill:function(){var a=this.getFillColor();return!!a&&a.alpha>0},hasStroke:function(){var a=this.getStrokeColor();return!!a&&a.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var a=this.getShadowColor();return!!a&&a.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var a=this.getFontSize();return this.getFontWeight()+" "+a+(/[a-z]/i.test(a+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function a(){var h=a.base.call(this),d=this.getFontSize();return/pt|em|%|px/.test(d)&&(d=this.getView().getPixelSize(d)),h??d*1.2}}),Gt=new function(){function a(h,d,m,y){for(var v=["","webkit","moz","Moz","ms","o"],S=d[0].toUpperCase()+d.substring(1),w=0;w<6;w++){var E=v[w],I=E?E+S:d;if(I in h){if(m)h[I]=y;else return h[I];break}}}return{getStyles:function(h){var d=h&&h.nodeType!==9?h.ownerDocument:h,m=d&&d.defaultView;return m&&m.getComputedStyle(h,"")},getBounds:function(h,d){var m=h.ownerDocument,y=m.body,v=m.documentElement,S;try{S=h.getBoundingClientRect()}catch{S={left:0,top:0,width:0,height:0}}var w=S.left-(v.clientLeft||y.clientLeft||0),E=S.top-(v.clientTop||y.clientTop||0);if(!d){var I=m.defaultView;w+=I.pageXOffset||v.scrollLeft||y.scrollLeft,E+=I.pageYOffset||v.scrollTop||y.scrollTop}return new U(w,E,S.width,S.height)},getViewportBounds:function(h){var d=h.ownerDocument,m=d.defaultView,y=d.documentElement;return new U(0,0,m.innerWidth||y.clientWidth,m.innerHeight||y.clientHeight)},getOffset:function(h,d){return Gt.getBounds(h,d).getPoint()},getSize:function(h){return Gt.getBounds(h,!0).getSize()},isInvisible:function(h){return Gt.getSize(h).equals(new K(0,0))},isInView:function(h){return!Gt.isInvisible(h)&&Gt.getViewportBounds(h).intersects(Gt.getBounds(h,!0))},isInserted:function(h){return s.body.contains(h)},getPrefixed:function(h,d){return h&&a(h,d)},setPrefixed:function(h,d,m){if(typeof d=="object")for(var y in d)a(h,y,!0,d[y]);else a(h,d,!0,m)}}},fi={add:function(a,h){if(a)for(var d in h)for(var m=h[d],y=d.split(/[\s,]+/g),v=0,S=y.length;v<S;v++){var w=y[v],E=a===s&&(w==="touchstart"||w==="touchmove")?{passive:!1}:!1;a.addEventListener(w,m,E)}},remove:function(a,h){if(a)for(var d in h)for(var m=h[d],y=d.split(/[\s,]+/g),v=0,S=y.length;v<S;v++)a.removeEventListener(y[v],m,!1)},getPoint:function(a){var h=a.targetTouches?a.targetTouches.length?a.targetTouches[0]:a.changedTouches[0]:a;return new P(h.pageX||h.clientX+s.documentElement.scrollLeft,h.pageY||h.clientY+s.documentElement.scrollTop)},getTarget:function(a){return a.target||a.srcElement},getRelatedTarget:function(a){return a.relatedTarget||a.toElement},getOffset:function(a,h){return fi.getPoint(a).subtract(Gt.getOffset(h||fi.getTarget(a)))}};fi.requestAnimationFrame=new function(){var a=Gt.getPrefixed(i,"requestAnimationFrame"),h=!1,d=[],m;function y(){var v=d;d=[];for(var S=0,w=v.length;S<w;S++)v[S]();h=a&&d.length,h&&a(y)}return function(v){d.push(v),a?h||(a(y),h=!0):m||(m=setInterval(y,1e3/60))}};var ft=r.extend(o,{_class:"View",initialize:function a(h,d){function m(q){return d[q]||parseInt(d.getAttribute(q),10)}function y(){var q=Gt.getSize(d);return q.isNaN()||q.isZero()?new K(m("width"),m("height")):q}var v;if(i&&d){this._id=d.getAttribute("id"),this._id==null&&d.setAttribute("id",this._id="paper-view-"+a._id++),fi.add(d,this._viewEvents);var S="none";if(Gt.setPrefixed(d.style,{userDrag:S,userSelect:S,touchCallout:S,contentZooming:S,tapHighlightColor:"rgba(0,0,0,0)"}),c.hasAttribute(d,"resize")){var w=this;fi.add(i,this._windowEvents={resize:function(){w.setViewSize(y())}})}if(v=y(),c.hasAttribute(d,"stats")&&typeof Stats<"u"){this._stats=new Stats;var E=this._stats.domElement,I=E.style,N=Gt.getOffset(d);I.position="absolute",I.left=N.x+"px",I.top=N.y+"px",s.body.appendChild(E)}}else v=new K(d),d=null;this._project=h,this._scope=h._scope,this._element=d,this._pixelRatio||(this._pixelRatio=i&&i.devicePixelRatio||1),this._setElementSize(v.width,v.height),this._viewSize=v,a._views.push(this),a._viewsById[this._id]=this,(this._matrix=new re)._owner=this,a._focused||(a._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Rt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;ft._focused===this&&(ft._focused=null),ft._views.splice(ft._views.indexOf(this),1),delete ft._viewsById[this._id];var a=this._project;return a._view===this&&(a._view=null),fi.remove(this._element,this._viewEvents),fi.remove(i,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:r.each(T._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(a){this[a]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(a){this._autoUpdate=a,a&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var a=this;fi.requestAnimationFrame(function(){if(a._requested=!1,a._animate){a.requestUpdate();var h=a._element;(!Gt.getPrefixed(s,"hidden")||c.getAttribute(h,"keepalive")==="true")&&Gt.isInView(h)&&a._handleFrame()}a._autoUpdate&&a.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Rt=this._scope;var a=Date.now()/1e3,h=this._last?a-this._last:0;this._last=a,this.emit("frame",new r({delta:h,time:this._time+=h,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(a,h){var d=this._frameItems;h?(d[a._id]={item:a,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete d[a._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(a){for(var h in this._frameItems){var d=this._frameItems[h];d.item.emit("frame",new r(a,{time:d.time+=a.delta,count:d.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=t},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var a=this._viewSize;return new M(a.width,a.height,this,"setViewSize")},setViewSize:function(){var a=K.read(arguments),h=a.subtract(this._viewSize);h.isZero()||(this._setElementSize(a.width,a.height),this._viewSize.set(a),this._changed(),this.emit("resize",{size:a,delta:h}),this._autoUpdate&&this.update())},_setElementSize:function(a,h){var d=this._element;d&&(d.width!==a&&(d.width=a),d.height!==h&&(d.height=h))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new U(new P,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Gt.isInView(this._element)},isInserted:function(){return Gt.isInserted(this._element)},getPixelSize:function(a){var h=this._element,d;if(h){var m=h.parentNode,y=s.createElement("div");y.style.fontSize=a,m.appendChild(y),d=parseFloat(Gt.getStyles(y).fontSize),m.removeChild(y)}else d=parseFloat(d);return d},getTextWidth:function(a,h){return 0}},r.each(["rotate","scale","shear","skew"],function(a){var h=a==="rotate";this[a]=function(){var d=arguments,m=(h?r:P).read(d),y=P.read(d,0,{readNull:!0});return this.transform(new re()[a](m,y||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var a=new re;return this.transform(a.translate.apply(a,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var a=P.read(arguments);this.translate(this.getCenter().subtract(a))},getZoom:function(){var a=this._decompose().scaling;return(a.x+a.y)/2},setZoom:function(a){this.transform(new re().scale(a/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(a){var h=this.getRotation();h!=null&&a!=null&&this.rotate(a-h)},getScaling:function(){var a=this._decompose().scaling;return new F(a.x,a.y,this,"setScaling")},setScaling:function(){var a=this.getScaling(),h=P.read(arguments,0,{clone:!0,readNull:!0});a&&h&&this.scale(h.x/a.x,h.y/a.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.set.apply(a,arguments)},transform:function(a){this._matrix.append(a)},scrollBy:function(){this.translate(P.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(P.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(P.read(arguments))},getEventPoint:function(a){return this.viewToProject(fi.getOffset(a,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(a,h){s&&typeof h=="string"&&(h=s.getElementById(h));var d=i?vn:ft;return new d(a,h)}}},new function(){if(!i)return;var a,h,d=!1,m=!1;function y(oe){var ye=fi.getTarget(oe);return ye.getAttribute&&ft._viewsById[ye.getAttribute("id")]}function v(){var oe=ft._focused;if(!oe||!oe.isVisible()){for(var ye=0,Ae=ft._views.length;ye<Ae;ye++)if((oe=ft._views[ye]).isVisible()){ft._focused=h=oe;break}}}function S(oe,ye,Ae){oe._handleMouseEvent("mousemove",ye,Ae)}var w=i.navigator,E,I,N;w.pointerEnabled||w.msPointerEnabled?(E="pointerdown MSPointerDown",I="pointermove MSPointerMove",N="pointerup pointercancel MSPointerUp MSPointerCancel"):(E="touchstart",I="touchmove",N="touchend touchcancel","ontouchstart"in i&&w.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(E+=" mousedown",I+=" mousemove",N+=" mouseup"));var q={},B={mouseout:function(oe){var ye=ft._focused,Ae=fi.getRelatedTarget(oe);if(ye&&(!Ae||Ae.nodeName==="HTML")){var Ee=fi.getOffset(oe,ye._element),De=Ee.x,Re=Math.abs,it=Re(De),ht=1<<25,mt=it-ht;Ee.x=Re(mt)<it?mt*(De<0?-1:1):De,S(ye,oe,ye.viewToProject(Ee))}},scroll:v};q[E]=function(oe){var ye=ft._focused=y(oe);d||(d=!0,ye._handleMouseEvent("mousedown",oe))},B[I]=function(oe){var ye=ft._focused;if(!m){var Ae=y(oe);Ae?ye!==Ae&&(ye&&S(ye,oe),a||(a=ye),ye=ft._focused=h=Ae):h&&h===ye&&(a&&!a.isInserted()&&(a=null),ye=ft._focused=a,a=null,v())}ye&&S(ye,oe)},B[E]=function(){m=!0},B[N]=function(oe){var ye=ft._focused;ye&&d&&ye._handleMouseEvent("mouseup",oe),m=d=!1},fi.add(s,B),fi.add(i,{load:v});var k=!1,X=!1,z={doubleclick:"click",mousedrag:"mousemove"},W=!1,R,Y,x,H,j,J,G,se;function he(oe,ye,Ae,Ee,De,Re,it){var ht=!1,mt;function vt(Ke,We){if(Ke.responds(We)){if(mt||(mt=new V(We,Ee,De,ye||Ke,Re?De.subtract(Re):null)),Ke.emit(We,mt)&&(k=!0,mt.prevented&&(X=!0),mt.stopped))return ht=!0}else{var yt=z[We];if(yt)return vt(Ke,yt)}}for(;oe&&oe!==it&&!vt(oe,Ae);)oe=oe._parent;return ht}function de(oe,ye,Ae,Ee,De,Re){return oe._project.removeOn(Ae),X=k=!1,j&&he(j,null,Ae,Ee,De,Re)||ye&&ye!==j&&!ye.isDescendant(j)&&he(ye,null,Ae==="mousedrag"?"mousemove":Ae,Ee,De,Re,j)||he(oe,j||ye||oe,Ae,Ee,De,Re)}var _e={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:q,_handleMouseEvent:function(oe,ye,Ae){var Ee=this._itemEvents,De=Ee.native[oe],Re=oe==="mousemove",it=this._scope.tool,ht=this;function mt(Bt){return Ee.virtual[Bt]||ht.responds(Bt)||it&&it.responds(Bt)}Re&&d&&mt("mousedrag")&&(oe="mousedrag"),Ae||(Ae=this.getEventPoint(ye));var vt=this.getBounds().contains(Ae),Ke=De&&vt&&ht._project.hitTest(Ae,{tolerance:0,fill:!0,stroke:!0}),We=Ke&&Ke.item||null,yt=!1,St={};if(St[oe.substr(5)]=!0,De&&We!==H&&(H&&he(H,null,"mouseleave",ye,Ae),We&&he(We,null,"mouseenter",ye,Ae),H=We),W^vt&&(he(this,null,vt?"mouseenter":"mouseleave",ye,Ae),yt=!0),(vt||St.drag)&&!Ae.equals(Y)&&(de(this,We,Re?oe:"mousemove",ye,Ae,Y),yt=!0),W=vt,St.down&&vt||St.up&&R){if(de(this,We,oe,ye,Ae,R),St.down){if(se=We===J&&Date.now()-G<300,x=J=We,!X&&We){for(var Vt=We;Vt&&!Vt.responds("mousedrag");)Vt=Vt._parent;Vt&&(j=We)}R=Ae}else St.up&&(!X&&We===x&&(G=Date.now(),de(this,We,se?"doubleclick":"click",ye,Ae,R),se=!1),x=j=null);W=!1,yt=!0}Y=Ae,yt&&it&&(k=it._handleMouseEvent(oe,ye,Ae,St)||k),ye.cancelable!==!1&&(k&&!St.move||St.down&&mt("mouseup"))&&ye.preventDefault()},_handleKeyEvent:function(oe,ye,Ae,Ee){var De=this._scope,Re=De.tool,it;function ht(mt){mt.responds(oe)&&(Rt=De,mt.emit(oe,it=it||new Ki(oe,ye,Ae,Ee)))}this.isVisible()&&(ht(this),Re&&Re.responds(oe)&&ht(Re))},_countItemEvent:function(oe,ye){var Ae=this._itemEvents,Ee=Ae.native,De=Ae.virtual;for(var Re in _e)Ee[Re]=(Ee[Re]||0)+(_e[Re][oe]||0)*ye;De[oe]=(De[oe]||0)+ye},statics:{updateFocus:v,_resetState:function(){d=m=k=W=!1,a=h=R=Y=x=H=j=J=G=se=null}}}}),vn=ft.extend({_class:"CanvasView",initialize:function(h,d){if(!(d instanceof i.HTMLCanvasElement)){var m=K.read(arguments,1);if(m.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+r.slice(arguments,1));d=rt.getCanvas(m)}var y=this._context=d.getContext("2d");if(y.save(),this._pixelRatio=1,!/^off|false$/.test(c.getAttribute(d,"hidpi"))){var v=i.devicePixelRatio||1,S=Gt.getPrefixed(y,"backingStorePixelRatio")||1;this._pixelRatio=v/S}ft.call(this,h,d),this._needsUpdate=!0},remove:function a(){return this._context.restore(),a.base.call(this)},_setElementSize:function a(h,d){var m=this._pixelRatio;if(a.base.call(this,h*m,d*m),m!==1){var y=this._element,v=this._context;if(!c.hasAttribute(y,"resize")){var S=y.style;S.width=h+"px",S.height=d+"px"}v.restore(),v.save(),v.scale(m,m)}},getContext:function(){return this._context},getPixelSize:function a(h){var d=Rt.agent,m;if(d&&d.firefox)m=a.base.call(this,h);else{var y=this._context,v=y.font;y.font=h+" serif",m=parseFloat(y.font),y.font=v}return m},getTextWidth:function(a,h){var d=this._context,m=d.font,y=0;d.font=a;for(var v=0,S=h.length;v<S;v++)y=Math.max(y,d.measureText(h[v]).width);return d.font=m,y},update:function(){if(!this._needsUpdate)return!1;var a=this._project,h=this._context,d=this._viewSize;return h.clearRect(0,0,d.width+1,d.height+1),a&&a.draw(h,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Ps=r.extend({_class:"Event",initialize:function(h){this.event=h,this.type=h&&h.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return js.modifiers}}),Ki=Ps.extend({_class:"KeyEvent",initialize:function(h,d,m,y){this.type=h,this.event=d,this.key=m,this.character=y},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),js=new function(){var a={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},h={tab:"	",space:" ",enter:"\r"},d={},m={},y,v,S=new r({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var I=Rt&&Rt.agent;return I&&I.mac?this.meta:this.control}}});function w(I){var N=I.key||I.keyIdentifier;return N=/^U\+/.test(N)?String.fromCharCode(parseInt(N.substr(2),16)):/^Arrow[A-Z]/.test(N)?N.substr(5):N==="Unidentified"||N===t?String.fromCharCode(I.keyCode):N,a[N]||(N.length>1?r.hyphenate(N):N.toLowerCase())}function E(I,N,q,B){var k=ft._focused,X;if(d[N]=I,I?m[N]=q:delete m[N],N.length>1&&(X=r.camelize(N))in S){S[X]=I;var z=Rt&&Rt.agent;if(X==="meta"&&z&&z.mac)if(I)y={};else{for(var W in y)W in m&&E(!1,W,y[W],B);y=null}}else I&&y&&(y[N]=q);k&&k._handleKeyEvent(I?"keydown":"keyup",B,N,q)}return fi.add(s,{keydown:function(I){var N=w(I),q=Rt&&Rt.agent;N.length>1||q&&q.chrome&&(I.altKey||q.mac&&I.metaKey||!q.mac&&I.ctrlKey)?E(!0,N,h[N]||(N.length>1?"":N),I):v=N},keypress:function(I){if(v){var N=w(I),q=I.charCode,B=q>=32?String.fromCharCode(q):N.length>1?"":N;N!==v&&(N=B.toLowerCase()),E(!0,N,B,I),v=null}},keyup:function(I){var N=w(I);N in m&&E(!1,N,m[N],I)}}),fi.add(i,{blur:function(I){for(var N in m)E(!1,N,m[N],I)}}),{modifiers:S,isDown:function(I){return!!d[I]}}},V=Ps.extend({_class:"MouseEvent",initialize:function(h,d,m,y,v){this.type=h,this.event=d,this.point=m,this.target=y,this.delta=v},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ae=Ps.extend({_class:"ToolEvent",_item:null,initialize:function(h,d,m){this.tool=h,this.type=d,this.event=m},_choosePoint:function(a,h){return a||(h?h.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(a){this._point=a},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(a){this._lastPoint=a},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(a){this._downPoint=a},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(a){this._middlePoint=a},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(a){this._delta=a},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(a){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=a},getItem:function(){if(!this._item){var a=this.tool._scope.project.hitTest(this.getPoint());if(a){for(var h=a.item,d=h._parent;/^(Group|CompoundPath)$/.test(d._class);)h=d,d=d._parent;this._item=h}}return this._item},setItem:function(a){this._item=a},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),le=p.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(h){p.call(this),this._moveCount=-1,this._downCount=-1,this.set(h)},getMinDistance:function(){return this._minDistance},setMinDistance:function(a){this._minDistance=a,a!=null&&this._maxDistance!=null&&a>this._maxDistance&&(this._maxDistance=a)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(a){this._maxDistance=a,this._minDistance!=null&&a!=null&&a<this._minDistance&&(this._minDistance=a)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(a){this._minDistance=this._maxDistance=a},_handleMouseEvent:function(a,h,d,m){Rt=this._scope,m.drag&&!this.responds(a)&&(a="mousemove");var y=m.move||m.drag,v=this.responds(a),S=!1,w=this;function E(N,q){var B=d,k=y?w._point:w._downPoint||B;if(y){if(w._moveCount>=0&&B.equals(k))return!1;if(k&&(N!=null||q!=null)){var X=B.subtract(k),z=X.getLength();if(z<(N||0))return!1;q&&(B=k.add(X.normalize(Math.min(z,q))))}w._moveCount++}return w._point=B,w._lastPoint=k||B,m.down&&(w._moveCount=-1,w._downPoint=B,w._downCount++),!0}function I(){v&&(S=w.emit(a,new ae(w,a,h))||S)}if(m.down)E(),I();else if(m.up)E(null,this._maxDistance),I();else if(v)for(;E(this._minDistance,this._maxDistance);)I();return S}}),me=r.extend(o,{_class:"Tween",statics:{easings:new r({linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return a<.5?2*a*a:-1+2*(2-a)*a},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return a<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return a<.5?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return a<.5?16*a*a*a*a*a:1+16*--a*a*a*a*a}})},initialize:function a(h,d,m,y,v,S){this.object=h;var w=typeof v,E=w==="function";this.type=E?w:w==="string"?v:"linear",this.easing=E?v:a.easings[this.type],this.duration=y,this.running=!1,this._then=null,this._startTime=null;var I=d||m;this._keys=I?Object.keys(I):[],this._parsedKeys=this._parseKeys(this._keys),this._from=I&&this._getState(d),this._to=I&&this._getState(m),S!==!1&&this.start()},then:function(a){return this._then=a,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(a){if(this.running){a>=1&&(a=1,this.running=!1);for(var h=this.easing(a),d=this._keys,m=function(N){return typeof N=="function"?N(h,a):N},y=0,v=d&&d.length;y<v;y++){var S=d[y],w=m(this._from[S]),E=m(this._to[S]),I=w&&E&&w.__add&&E.__add?E.__subtract(w).__multiply(h).__add(w):(E-w)*h+w;this._setProperty(this._parsedKeys[S],I)}this.responds("update")&&this.emit("update",new r({progress:a,factor:h})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(a){var h=this._startTime,d=h?(a-h)/this.duration:0;h||(this._startTime=a),this.update(d)},_getState:function(a){for(var h=this._keys,d={},m=0,y=h.length;m<y;m++){var v=h[m],S=this._parsedKeys[v],w=this._getProperty(S),E;if(a){var I=this._resolveValue(w,a[v]);this._setProperty(S,I),E=this._getProperty(S),E=E&&E.clone?E.clone():E,this._setProperty(S,w)}else E=w&&w.clone?w.clone():w;d[v]=E}return d},_resolveValue:function(a,h){if(h){if(Array.isArray(h)&&h.length===2){var d=h[0];return d&&d.match&&d.match(/^[+\-\*\/]=/)?this._calculate(a,d[0],h[1]):h}else if(typeof h=="string"){var m=h.match(/^[+\-*/]=(.*)/);if(m){var y=JSON.parse(m[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(a,h[0],y)}}}return h},_calculate:function(a,h,d){return Rt.PaperScript.calculateBinary(a,h,d)},_parseKeys:function(a){for(var h={},d=0,m=a.length;d<m;d++){var y=a[d],v=y.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");h[y]=v.split("/")}return h},_getProperty:function(a,h){for(var d=this.object,m=0,y=a.length-(h||0);m<y&&d;m++)d=d[a[m]];return d},_setProperty:function(a,h){var d=this._getProperty(a,1);d&&(d[a[a.length-1]]=h)}}),ve={request:function(a){var h=new e.XMLHttpRequest;return h.open((a.method||"get").toUpperCase(),a.url,r.pick(a.async,!0)),a.mimeType&&h.overrideMimeType(a.mimeType),h.onload=function(){var d=h.status;d===0||d===200?a.onLoad&&a.onLoad.call(h,h.responseText):h.onerror()},h.onerror=function(){var d=h.status,m='Could not load "'+a.url+'" (Status: '+d+")";if(a.onError)a.onError(m,d);else throw new Error(m)},h.send(null)}},rt=r.exports.CanvasProvider={canvases:[],getCanvas:function(a,h,d){if(!i)return null;var m,y=!0;typeof a=="object"&&(h=a.height,a=a.width),this.canvases.length?m=this.canvases.pop():(m=s.createElement("canvas"),y=!1);var v=m.getContext("2d",d||{});if(!v)throw new Error("Canvas "+m+" is unable to provide a 2D context.");return m.width===a&&m.height===h?y&&v.clearRect(0,0,a+1,h+1):(m.width=a,m.height=h),v.save(),m},getContext:function(a,h,d){var m=this.getCanvas(a,h,d);return m?m.getContext("2d",d||{}):null},release:function(a){var h=a&&a.canvas?a.canvas:a;h&&h.getContext&&(h.getContext("2d").restore(),this.canvases.push(h))}},Ue=new function(){var a=Math.min,h=Math.max,d=Math.abs,m,y,v,S,w,E,I,N,q,B,k;function X(j,J,G){return .2989*j+.587*J+.114*G}function z(j,J,G,de){var he=de-X(j,J,G);q=j+he,B=J+he,k=G+he;var de=X(q,B,k),_e=a(q,B,k),oe=h(q,B,k);if(_e<0){var ye=de-_e;q=de+(q-de)*de/ye,B=de+(B-de)*de/ye,k=de+(k-de)*de/ye}if(oe>255){var Ae=255-de,Ee=oe-de;q=de+(q-de)*Ae/Ee,B=de+(B-de)*Ae/Ee,k=de+(k-de)*Ae/Ee}}function W(j,J,G){return h(j,J,G)-a(j,J,G)}function R(j,J,G,se){var he=[j,J,G],de=h(j,J,G),_e=a(j,J,G),oe;_e=_e===j?0:_e===J?1:2,de=de===j?0:de===J?1:2,oe=a(_e,de)===0?h(_e,de)===1?2:1:0,he[de]>he[_e]?(he[oe]=(he[oe]-he[_e])*se/(he[de]-he[_e]),he[de]=se):he[oe]=he[de]=0,he[_e]=0,q=he[0],B=he[1],k=he[2]}var Y={multiply:function(){q=w*m/255,B=E*y/255,k=I*v/255},screen:function(){q=w+m-w*m/255,B=E+y-E*y/255,k=I+v-I*v/255},overlay:function(){q=w<128?2*w*m/255:255-2*(255-w)*(255-m)/255,B=E<128?2*E*y/255:255-2*(255-E)*(255-y)/255,k=I<128?2*I*v/255:255-2*(255-I)*(255-v)/255},"soft-light":function(){var j=m*w/255;q=j+w*(255-(255-w)*(255-m)/255-j)/255,j=y*E/255,B=j+E*(255-(255-E)*(255-y)/255-j)/255,j=v*I/255,k=j+I*(255-(255-I)*(255-v)/255-j)/255},"hard-light":function(){q=m<128?2*m*w/255:255-2*(255-m)*(255-w)/255,B=y<128?2*y*E/255:255-2*(255-y)*(255-E)/255,k=v<128?2*v*I/255:255-2*(255-v)*(255-I)/255},"color-dodge":function(){q=w===0?0:m===255?255:a(255,255*w/(255-m)),B=E===0?0:y===255?255:a(255,255*E/(255-y)),k=I===0?0:v===255?255:a(255,255*I/(255-v))},"color-burn":function(){q=w===255?255:m===0?0:h(0,255-(255-w)*255/m),B=E===255?255:y===0?0:h(0,255-(255-E)*255/y),k=I===255?255:v===0?0:h(0,255-(255-I)*255/v)},darken:function(){q=w<m?w:m,B=E<y?E:y,k=I<v?I:v},lighten:function(){q=w>m?w:m,B=E>y?E:y,k=I>v?I:v},difference:function(){q=w-m,q<0&&(q=-q),B=E-y,B<0&&(B=-B),k=I-v,k<0&&(k=-k)},exclusion:function(){q=w+m*(255-w-w)/255,B=E+y*(255-E-E)/255,k=I+v*(255-I-I)/255},hue:function(){R(m,y,v,W(w,E,I)),z(q,B,k,X(w,E,I))},saturation:function(){R(w,E,I,W(m,y,v)),z(q,B,k,X(w,E,I))},luminosity:function(){z(w,E,I,X(m,y,v))},color:function(){z(m,y,v,X(w,E,I))},add:function(){q=a(w+m,255),B=a(E+y,255),k=a(I+v,255)},subtract:function(){q=h(w-m,0),B=h(E-y,0),k=h(I-v,0)},average:function(){q=(w+m)/2,B=(E+y)/2,k=(I+v)/2},negation:function(){q=255-d(255-m-w),B=255-d(255-y-E),k=255-d(255-v-I)}},x=this.nativeModes=r.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(j){this[j]=!0},{}),H=rt.getContext(1,1,{willReadFrequently:!0});H&&(r.each(Y,function(j,J){var G=J==="darken",se=!1;H.save();try{H.fillStyle=G?"#300":"#a00",H.fillRect(0,0,1,1),H.globalCompositeOperation=J,H.globalCompositeOperation===J&&(H.fillStyle=G?"#a00":"#300",H.fillRect(0,0,1,1),se=H.getImageData(0,0,1,1).data[0]!==G?170:51)}catch{}H.restore(),x[J]=se}),rt.release(H)),this.process=function(j,J,G,se,he){var de=J.canvas,_e=j==="normal";if(_e||x[j])G.save(),G.setTransform(1,0,0,1,0,0),G.globalAlpha=se,_e||(G.globalCompositeOperation=j),G.drawImage(de,he.x,he.y),G.restore();else{var oe=Y[j];if(!oe)return;for(var ye=G.getImageData(he.x,he.y,de.width,de.height),Ae=ye.data,Ee=J.getImageData(0,0,de.width,de.height).data,De=0,Re=Ae.length;De<Re;De+=4){m=Ee[De],w=Ae[De],y=Ee[De+1],E=Ae[De+1],v=Ee[De+2],I=Ae[De+2],S=Ee[De+3],N=Ae[De+3],oe();var it=S*se/255,ht=1-it;Ae[De]=it*q+ht*w,Ae[De+1]=it*B+ht*E,Ae[De+2]=it*k+ht*I,Ae[De+3]=S*se+ht*N}G.putImageData(ye,he.x,he.y)}}},je=new function(){var a="http://www.w3.org/2000/svg",h="http://www.w3.org/2000/xmlns",d="http://www.w3.org/1999/xlink",m={href:d,xlink:h,xmlns:h+"/","xmlns:xlink":h+"/"};function y(w,E,I){return S(s.createElementNS(a,w),E,I)}function v(w,E){var I=m[E],N=I?w.getAttributeNS(I,E):w.getAttribute(E);return N==="null"?null:N}function S(w,E,I){for(var N in E){var q=E[N],B=m[N];typeof q=="number"&&I&&(q=I.number(q)),B?w.setAttributeNS(B,N,q):w.setAttribute(N,q)}return w}return{svg:a,xmlns:h,xlink:d,create:y,get:v,set:S}},xn=r.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(a,h){return!h&&(a instanceof at||a instanceof be||a instanceof Mt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(a,h){var d=r.capitalize(h),m=a[2];this[h]={type:a[1],property:h,attribute:a[0],toSVG:m,fromSVG:m&&r.each(m,function(y,v){this[y]=v},{}),exportFilter:a[3],get:"get"+d,set:"set"+d}},{});new function(){var a;function h(Y,x,H){var j=new r,J=Y.getTranslation();if(x){var G;Y.isInvertible()?(Y=Y._shiftless(),G=Y._inverseTransform(J),J=null):G=new P,j[H?"cx":"x"]=G.x,j[H?"cy":"y"]=G.y}if(!Y.isIdentity()){var se=Y.decompose();if(se){var he=[],de=se.rotation,_e=se.scaling,oe=se.skewing;J&&!J.isZero()&&he.push("translate("+a.point(J)+")"),de&&he.push("rotate("+a.number(de)+")"),(!C.isZero(_e.x-1)||!C.isZero(_e.y-1))&&he.push("scale("+a.point(_e)+")"),oe.x&&he.push("skewX("+a.number(oe.x)+")"),oe.y&&he.push("skewY("+a.number(oe.y)+")"),j.transform=he.join(" ")}else j.transform="matrix("+Y.getValues().join(",")+")"}return j}function d(Y,x){for(var H=h(Y._matrix),j=Y._children,J=je.create("g",H,a),G=0,se=j.length;G<se;G++){var he=j[G],de=W(he,x);if(de)if(he.isClipMask()){var _e=je.create("clipPath");_e.appendChild(de),X(he,_e,"clip"),je.set(J,{"clip-path":"url(#"+_e.id+")"})}else J.appendChild(de)}return J}function m(Y,x){var H=h(Y._matrix,!0),j=Y.getSize(),J=Y.getImage();return H.x-=j.width/2,H.y-=j.height/2,H.width=j.width,H.height=j.height,H.href=x.embedImages==!1&&J&&J.src||Y.toDataURL(),je.create("image",H,a)}function y(Y,x){var H=x.matchShapes;if(H){var j=Y.toShape(!1);if(j)return v(j)}var J=Y._segments,G=J.length,se,he=h(Y._matrix);if(H&&G>=2&&!Y.hasHandles())if(G>2){se=Y._closed?"polygon":"polyline";for(var de=[],_e=0;_e<G;_e++)de.push(a.point(J[_e]._point));he.points=de.join(" ")}else{se="line";var oe=J[0]._point,ye=J[1]._point;he.set({x1:oe.x,y1:oe.y,x2:ye.x,y2:ye.y})}else se="path",he.d=Y.getPathData(null,x.precision);return je.create(se,he,a)}function v(Y){var x=Y._type,H=Y._radius,j=h(Y._matrix,!0,x!=="rectangle");if(x==="rectangle"){x="rect";var J=Y._size,G=J.width,se=J.height;j.x-=G/2,j.y-=se/2,j.width=G,j.height=se,H.isZero()&&(H=null)}return H&&(x==="circle"?j.r=H:(j.rx=H.width,j.ry=H.height)),je.create(x,j,a)}function S(Y,x){var H=h(Y._matrix),j=Y.getPathData(null,x.precision);return j&&(H.d=j),je.create("path",H,a)}function w(Y,x){var H=h(Y._matrix,!0),j=Y._definition,J=k(j,"symbol"),G=j._item,se=G.getStrokeBounds();return J||(J=je.create("symbol",{viewBox:a.rectangle(se)}),J.appendChild(W(G,x)),X(j,J,"symbol")),H.href="#"+J.id,H.x+=se.x,H.y+=se.y,H.width=se.width,H.height=se.height,H.overflow="visible",je.create("use",H,a)}function E(Y){var x=k(Y,"color");if(!x){var H=Y.getGradient(),j=H._radial,J=Y.getOrigin(),G=Y.getDestination(),se;if(j){se={cx:J.x,cy:J.y,r:J.getDistance(G)};var he=Y.getHighlight();he&&(se.fx=he.x,se.fy=he.y)}else se={x1:J.x,y1:J.y,x2:G.x,y2:G.y};se.gradientUnits="userSpaceOnUse",x=je.create((j?"radial":"linear")+"Gradient",se,a);for(var de=H._stops,_e=0,oe=de.length;_e<oe;_e++){var ye=de[_e],Ae=ye._color,Ee=Ae.getAlpha(),De=ye._offset;se={offset:De??_e/(oe-1)},Ae&&(se["stop-color"]=Ae.toCSS(!0)),Ee<1&&(se["stop-opacity"]=Ee),x.appendChild(je.create("stop",se,a))}X(Y,x,"color")}return"url(#"+x.id+")"}function I(Y){var x=je.create("text",h(Y._matrix,!0),a);return x.textContent=Y._content,x}var N={Group:d,Layer:d,Raster:m,Path:y,Shape:v,CompoundPath:S,SymbolItem:w,PointText:I};function q(Y,x,H,j){var J={},G=!j&&Y.getParent(),se=[];return Y._name!=null&&(J.id=Y._name),r.each(xn,function(he){var de=he.get,_e=he.type,oe=Y[de]();if(he.exportFilter?he.exportFilter(Y,oe):H.reduceAttributes==!1||!G||!r.equals(G[de](),oe)){if(_e==="color"&&oe!=null){var ye=oe.getAlpha();ye<1&&(J[he.attribute+"-opacity"]=ye)}_e==="style"?se.push(he.attribute+": "+oe):J[he.attribute]=oe==null?"none":_e==="color"?oe.gradient?E(oe):oe.toCSS(!0):_e==="array"?oe.join(","):_e==="lookup"?he.toSVG[oe]:oe}}),se.length&&(J.style=se.join(";")),J.opacity===1&&delete J.opacity,Y._visible||(J.visibility="hidden"),je.set(x,J,a)}var B;function k(Y,x){return B||(B={ids:{},svgs:{}}),Y&&B.svgs[x+"-"+(Y._id||Y.__id||(Y.__id=D.get("svg")))]}function X(Y,x,H){B||k();var j=B.ids[H]=(B.ids[H]||0)+1;x.id=H+"-"+j,B.svgs[H+"-"+(Y._id||Y.__id)]=x}function z(Y,x){var H=Y,j=null;if(B){H=Y.nodeName.toLowerCase()==="svg"&&Y;for(var J in B.svgs)j||(H||(H=je.create("svg"),H.appendChild(Y)),j=H.insertBefore(je.create("defs"),H.firstChild)),j.appendChild(B.svgs[J]);B=null}return x.asString?new e.XMLSerializer().serializeToString(H):H}function W(Y,x,H){var j=N[Y._class],J=j&&j(Y,x);if(J){var G=x.onExport;G&&(J=G(Y,J,x)||J);var se=JSON.stringify(Y._data);se&&se!=="{}"&&se!=="null"&&J.setAttribute("data-paper-data",se)}return J&&q(Y,J,x,H)}function R(Y){return Y||(Y={}),a=new A(Y.precision),Y}T.inject({exportSVG:function(Y){return Y=R(Y),z(W(this,Y,!0),Y)}}),ce.inject({exportSVG:function(Y){Y=R(Y);var x=this._children,H=this.getView(),j=r.pick(Y.bounds,"view"),J=Y.matrix||j==="view"&&H._matrix,G=J&&re.read([J]),se=j==="view"?new U([0,0],H.getViewSize()):j==="content"?T._getBounds(x,G,{stroke:!0}).rect:U.read([j],0,{readNull:!0}),he={version:"1.1",xmlns:je.svg,"xmlns:xlink":je.xlink};se&&(he.width=se.width,he.height=se.height,(se.x||se.x===0||se.y||se.y===0)&&(he.viewBox=a.rectangle(se)));var de=je.create("svg",he,a),_e=de;G&&!G.isIdentity()&&(_e=de.appendChild(je.create("g",h(G),a)));for(var oe=0,ye=x.length;oe<ye;oe++)_e.appendChild(W(x[oe],Y,!0));return z(de,Y)}})},new function(){var a={},h;function d(x,H,j,J,G,se){var he=je.get(x,H)||se,de=he==null?J?null:j?"":0:j?he:parseFloat(he);return/%\s*$/.test(he)?de/100*(G?1:h[/x|^width/.test(H)?"width":"height"]):de}function m(x,H,j,J,G,se,he){return H=d(x,H||"x",!1,J,G,se),j=d(x,j||"y",!1,J,G,he),J&&(H==null||j==null)?null:new P(H,j)}function y(x,H,j,J,G){return H=d(x,H||"width",!1,J,G),j=d(x,j||"height",!1,J,G),J&&(H==null||j==null)?null:new K(H,j)}function v(x,H,j){return x==="none"?null:H==="number"?parseFloat(x):H==="array"?x?x.split(/[\s,]+/g).map(parseFloat):[]:H==="color"?W(x)||x:H==="lookup"?j[x]:x}function S(x,H,j,J){var G=x.childNodes,se=H==="clippath",he=H==="defs",de=new Ce,_e=de._project,oe=_e._currentStyle,ye=[];if(!se&&!he&&(de=z(de,x,J),_e._currentStyle=de._style.clone()),J)for(var Ae=x.querySelectorAll("defs"),Ee=0,De=Ae.length;Ee<De;Ee++)R(Ae[Ee],j,!1);for(var Ee=0,De=G.length;Ee<De;Ee++){var Re=G[Ee],it;Re.nodeType===1&&!/^defs$/i.test(Re.nodeName)&&(it=R(Re,j,!1))&&!(it instanceof Qe)&&ye.push(it)}return de.addChildren(ye),se&&(de=z(de.reduce(),x,J)),_e._currentStyle=oe,(se||he)&&(de.remove(),de=null),de}function w(x,H){for(var j=x.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),J=[],G=0,se=j.length;G<se;G+=2)J.push(new P(parseFloat(j[G]),parseFloat(j[G+1])));var he=new Pe(J);return H==="polygon"&&he.closePath(),he}function E(x){return at.create(x.getAttribute("d"))}function I(x,H){var j=(d(x,"href",!0)||"").substring(1),J=H==="radialgradient",G;if(j)G=a[j].getGradient(),G._radial^J&&(G=G.clone(),G._radial=J);else{for(var se=x.childNodes,he=[],de=0,_e=se.length;de<_e;de++){var oe=se[de];oe.nodeType===1&&he.push(z(new qi,oe))}G=new as(he,J)}var ye,Ae,Ee,De=d(x,"gradientUnits",!0)!=="userSpaceOnUse";J?(ye=m(x,"cx","cy",!1,De,"50%","50%"),Ae=ye.add(d(x,"r",!1,!1,De,"50%"),0),Ee=m(x,"fx","fy",!0,De)):(ye=m(x,"x1","y1",!1,De,"0%","0%"),Ae=m(x,"x2","y2",!1,De,"100%","0%"));var Re=z(new qt(G,ye,Ae,Ee),x);return Re._scaleToBounds=De,null}var N={"#document":function(x,H,j,J){for(var G=x.childNodes,se=0,he=G.length;se<he;se++){var de=G[se];if(de.nodeType===1)return R(de,j,J)}},g:S,svg:S,clippath:S,polygon:w,polyline:w,path:E,lineargradient:I,radialgradient:I,image:function(x){var H=new Be(d(x,"href",!0));return H.on("load",function(){var j=y(x);this.setSize(j);var J=m(x).add(j.divide(2));this._matrix.append(new re().translate(J))}),H},symbol:function(x,H,j,J){return new Qe(S(x,H,j,J),!0)},defs:S,use:function(x){var H=(d(x,"href",!0)||"").substring(1),j=a[H],J=m(x);return j?j instanceof Qe?j.place(J):j.clone().translate(J):null},circle:function(x){return new be.Circle(m(x,"cx","cy"),d(x,"r"))},ellipse:function(x){return new be.Ellipse({center:m(x,"cx","cy"),radius:y(x,"rx","ry")})},rect:function(x){return new be.Rectangle(new U(m(x),y(x)),y(x,"rx","ry"))},line:function(x){return new Pe.Line(m(x,"x1","y1"),m(x,"x2","y2"))},text:function(x){var H=new Ni(m(x).add(m(x,"dx","dy")));return H.setContent(x.textContent.trim()||""),H},switch:S};function q(x,H,j,J){if(x.transform){for(var G=(J.getAttribute(j)||"").split(/\)\s*/g),se=new re,he=0,de=G.length;he<de;he++){var _e=G[he];if(!_e)break;for(var oe=_e.split(/\(\s*/),ye=oe[0].trim(),Ae=oe[1].split(/[\s,]+/g),Ee=0,De=Ae.length;Ee<De;Ee++)Ae[Ee]=parseFloat(Ae[Ee]);switch(ye){case"matrix":se.append(new re(Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5]));break;case"rotate":se.rotate(Ae[0],Ae[1]||0,Ae[2]||0);break;case"translate":se.translate(Ae[0],Ae[1]||0);break;case"scale":se.scale(Ae);break;case"skewX":se.skew(Ae[0],0);break;case"skewY":se.skew(0,Ae[0]);break}}x.transform(se)}}function B(x,H,j){var J=j==="fill-opacity"?"getFillColor":"getStrokeColor",G=x[J]&&x[J]();G&&G.setAlpha(parseFloat(H))}var k=r.set(r.each(xn,function(x){this[x.attribute]=function(H,j){if(H[x.set]&&(H[x.set](v(j,x.type,x.fromSVG)),x.type==="color")){var J=H[x.get]();if(J&&J._scaleToBounds){var G=H.getBounds();J.transform(new re().translate(G.getPoint()).scale(G.getSize()))}}}},{}),{id:function(x,H){a[H]=x,x.setName&&x.setName(H)},"clip-path":function(x,H){var j=W(H);if(j)if(j=j.clone(),j.setClipMask(!0),x instanceof Ce)x.insertChild(0,j);else return new Ce(j,x)},gradientTransform:q,transform:q,"fill-opacity":B,"stroke-opacity":B,visibility:function(x,H){x.setVisible&&x.setVisible(H==="visible")},display:function(x,H){x.setVisible&&x.setVisible(H!==null)},"stop-color":function(x,H){x.setColor&&x.setColor(H)},"stop-opacity":function(x,H){x._color&&x._color.setAlpha(parseFloat(H))},offset:function(x,H){if(x.setOffset){var j=H.match(/(.*)%$/);x.setOffset(j?j[1]/100:parseFloat(H))}},viewBox:function(x,H,j,J,G){var se=new U(v(H,"array")),he=y(J,null,null,!0),de,_e;if(x instanceof Ce){var oe=he?he.divide(se.getSize()):1,_e=new re().scale(oe).translate(se.getPoint().negate());de=x}else x instanceof Qe&&(he&&se.setSize(he),de=x._item);if(de){if(X(J,"overflow",G)!=="visible"){var ye=new be.Rectangle(se);ye.setClipMask(!0),de.addChild(ye)}_e&&de.transform(_e)}}});function X(x,H,j){var J=x.attributes[H],G=J&&J.value;if(!G&&x.style){var se=r.camelize(H);G=x.style[se],!G&&j.node[se]!==j.parent[se]&&(G=j.node[se])}return G?G==="none"?null:G:t}function z(x,H,j){var J=H.parentNode,G={node:Gt.getStyles(H)||{},parent:!j&&!/^defs$/i.test(J.tagName)&&Gt.getStyles(J)||{}};return r.each(k,function(se,he){var de=X(H,he,G);x=de!==t&&se(x,de,he,H,G)||x}),x}function W(x){var H=x&&x.match(/\((?:["'#]*)([^"')]+)/),j=H&&H[1],J=j&&a[i?j.replace(i.location.href.split("#")[0]+"#",""):j];return J&&J._scaleToBounds&&(J=J.clone(),J._scaleToBounds=!0),J}function R(x,H,j){var J=x.nodeName.toLowerCase(),G=J!=="#document",se=s.body,he,de,_e;j&&G&&(h=Rt.getView().getSize(),h=y(x,null,null,!0)||h,he=je.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),de=x.parentNode,_e=x.nextSibling,he.appendChild(x),se.appendChild(he));var oe=Rt.settings,ye=oe.applyMatrix,Ae=oe.insertItems;oe.applyMatrix=!1,oe.insertItems=!1;var Ee=N[J],De=Ee&&Ee(x,J,H,j)||null;if(oe.insertItems=Ae,oe.applyMatrix=ye,De){G&&!(De instanceof Ce)&&(De=z(De,x,j));var Re=H.onImport,it=G&&x.getAttribute("data-paper-data");Re&&(De=Re(x,De,H)||De),H.expandShapes&&De instanceof be&&(De.remove(),De=De.toPath()),it&&(De._data=JSON.parse(it))}return he&&(se.removeChild(he),de&&(_e?de.insertBefore(x,_e):de.appendChild(x))),j&&(a={},De&&r.pick(H.applyMatrix,ye)&&De.matrix.apply(!0,!0)),De}function Y(x,H,j){if(!x)return null;H=typeof H=="function"?{onLoad:H}:H||{};var J=Rt,G=null;function se(oe){try{var ye=typeof oe=="object"?oe:new e.DOMParser().parseFromString(oe.trim(),"image/svg+xml");if(!ye.nodeName)throw ye=null,new Error("Unsupported SVG source: "+x);Rt=J,G=R(ye,H,!0),(!H||H.insert!==!1)&&j._insertItem(t,G);var Ae=H.onLoad;Ae&&Ae(G,oe)}catch(Ee){he(Ee)}}function he(oe,ye){var Ae=H.onError;if(Ae)Ae(oe,ye);else throw new Error(oe)}if(typeof x=="string"&&!/^[\s\S]*</.test(x)){var de=s.getElementById(x);de?se(de):ve.request({url:x,async:!0,onLoad:se,onError:he})}else if(typeof File<"u"&&x instanceof File){var _e=new FileReader;return _e.onload=function(){se(_e.result)},_e.onerror=function(){he(_e.error)},_e.readAsText(x)}else se(x);return G}T.inject({importSVG:function(x,H){return Y(x,H,this)}}),ce.inject({importSVG:function(x,H){return this.activate(),Y(x,H,this)}})},r.exports.PaperScript=(function(){var a=this,h=a.acorn;if(!h&&typeof rL<"u")try{h=aL()}catch{}if(!h){var d,m;h=d=m={},function(z,W){if(typeof d=="object"&&typeof m=="object")return W(d);if(typeof t=="function"&&t.amd)return t(["exports"],W);W(z.acorn||(z.acorn={}))}(this,function(z){z.version="0.5.0";var W,R,Y,x;z.parse=function(ne,fe){return R=String(ne),Y=R.length,j(fe),du(),dp(W.program)};var H=z.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function j(ne){W=ne||{};for(var fe in H)Object.prototype.hasOwnProperty.call(W,fe)||(W[fe]=H[fe]);x=W.sourceFile||null}var J=z.getLineInfo=function(ne,fe){for(var Le=1,He=0;;){za.lastIndex=He;var bt=za.exec(ne);if(bt&&bt.index<fe)++Le,He=bt.index+bt[0].length;else break}return{line:Le,column:fe-He}};z.tokenize=function(ne,fe){R=String(ne),Y=R.length,j(fe),du();var Le={};function He(bt){return it=he,Ha(bt),Le.start=se,Le.end=he,Le.startLoc=de,Le.endLoc=_e,Le.type=oe,Le.value=ye,Le}return He.jumpTo=function(bt,Ht){if(G=bt,W.locations){Ee=1,De=za.lastIndex=0;for(var ti;(ti=za.exec(R))&&ti.index<bt;)++Ee,De=ti.index+ti[0].length}Ae=Ht,mo()},He};var G,se,he,de,_e,oe,ye,Ae,Ee,De,Re,it,ht,mt,vt,Ke;function We(ne,fe){var Le=J(R,ne);fe+=" ("+Le.line+":"+Le.column+")";var He=new SyntaxError(fe);throw He.pos=ne,He.loc=Le,He.raisedAt=G,He}var yt=[],St={type:"num"},Vt={type:"regexp"},Bt={type:"string"},Nt={type:"name"},Ft={type:"eof"},ii={keyword:"break"},zt={keyword:"case",beforeExpr:!0},Ts={keyword:"catch"},gs={keyword:"continue"},Is={keyword:"debugger"},ms={keyword:"default"},ct={keyword:"do",isLoop:!0},os={keyword:"else",beforeExpr:!0},cs={keyword:"finally"},xs={keyword:"for",isLoop:!0},Vn={keyword:"function"},ir={keyword:"if"},Ln={keyword:"return",beforeExpr:!0},Sn={keyword:"switch"},an={keyword:"throw",beforeExpr:!0},pn={keyword:"try"},kn={keyword:"var"},Es={keyword:"while",isLoop:!0},on={keyword:"with"},Mo={keyword:"new",beforeExpr:!0},fo={keyword:"this"},po={keyword:"null",atomValue:null},Yl={keyword:"true",atomValue:!0},Oo={keyword:"false",atomValue:!1},fa={keyword:"in",binop:7,beforeExpr:!0},Br={break:ii,case:zt,catch:Ts,continue:gs,debugger:Is,default:ms,do:ct,else:os,finally:cs,for:xs,function:Vn,if:ir,return:Ln,switch:Sn,throw:an,try:pn,var:kn,while:Es,with:on,null:po,true:Yl,false:Oo,new:Mo,in:fa,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:fo,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},sr={type:"[",beforeExpr:!0},pa={type:"]"},Rr={type:"{",beforeExpr:!0},nr={type:"}"},Wt={type:"(",beforeExpr:!0},Bn={type:")"},Gn={type:",",beforeExpr:!0},Rn={type:";",beforeExpr:!0},Zr={type:":",beforeExpr:!0},qo={type:"."},Fo={type:"?",beforeExpr:!0},go={binop:10,beforeExpr:!0},u={isAssign:!0,beforeExpr:!0},b={isAssign:!0,beforeExpr:!0},O={postfix:!0,prefix:!0,isUpdate:!0},Q={prefix:!0,beforeExpr:!0},ue={binop:1,beforeExpr:!0},ke={binop:2,beforeExpr:!0},Oe={binop:3,beforeExpr:!0},pt={binop:4,beforeExpr:!0},_t={binop:5,beforeExpr:!0},ni={binop:6,beforeExpr:!0},Pt={binop:7,beforeExpr:!0},ei={binop:8,beforeExpr:!0},Jr={binop:9,prefix:!0,beforeExpr:!0},Fa={binop:10,beforeExpr:!0};z.tokTypes={bracketL:sr,bracketR:pa,braceL:Rr,braceR:nr,parenL:Wt,parenR:Bn,comma:Gn,semi:Rn,colon:Zr,dot:qo,question:Fo,slash:go,eq:u,name:Nt,eof:Ft,num:St,regexp:Vt,string:Bt};for(var $r in Br)z.tokTypes["_"+$r]=Br[$r];function Nr(ne){ne=ne.split(" ");var fe="",Le=[];e:for(var He=0;He<ne.length;++He){for(var bt=0;bt<Le.length;++bt)if(Le[bt][0].length==ne[He].length){Le[bt].push(ne[He]);continue e}Le.push([ne[He]])}function Ht(li){if(li.length==1)return fe+="return str === "+JSON.stringify(li[0])+";";fe+="switch(str){";for(var Mn=0;Mn<li.length;++Mn)fe+="case "+JSON.stringify(li[Mn])+":";fe+="return true}return false;"}if(Le.length>3){Le.sort(function(li,Mn){return Mn.length-li.length}),fe+="switch(str.length){";for(var He=0;He<Le.length;++He){var ti=Le[He];fe+="case "+ti[0].length+":",Ht(ti)}fe+="}"}else Ht(ne);return new Function("str",fe)}var ga=Nr("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),ma=Nr("class enum extends super const export import"),hu=Nr("implements interface let package private protected public static yield"),Gl=Nr("eval arguments"),ln=Nr("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),uu=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ya="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Rc="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Wl=new RegExp("["+ya+"]"),rr=new RegExp("["+ya+Rc+"]"),zo=/[\n\r\u2028\u2029]/,za=/\r\n|[\n\r\u2028\u2029]/g,Ho=z.isIdentifierStart=function(ne){return ne<65?ne===36:ne<91?!0:ne<97?ne===95:ne<123?!0:ne>=170&&Wl.test(String.fromCharCode(ne))},cu=z.isIdentifierChar=function(ne){return ne<48?ne===36:ne<58?!0:ne<65?!1:ne<91?!0:ne<97?ne===95:ne<123?!0:ne>=170&&rr.test(String.fromCharCode(ne))};function _a(){this.line=Ee,this.column=G-De}function du(){Ee=1,G=De=0,Ae=!0,mo()}function Wi(ne,fe){he=G,W.locations&&(_e=new _a),oe=ne,mo(),ye=fe,Ae=ne.beforeExpr}function hp(){var ne=W.onComment&&W.locations&&new _a,fe=G,Le=R.indexOf("*/",G+=2);if(Le===-1&&We(G-2,"Unterminated comment"),G=Le+2,W.locations){za.lastIndex=fe;for(var He;(He=za.exec(R))&&He.index<G;)++Ee,De=He.index+He[0].length}W.onComment&&W.onComment(!0,R.slice(fe+2,Le),fe,G,ne,W.locations&&new _a)}function Nn(){for(var ne=G,fe=W.onComment&&W.locations&&new _a,Le=R.charCodeAt(G+=2);G<Y&&Le!==10&&Le!==13&&Le!==8232&&Le!==8233;)++G,Le=R.charCodeAt(G);W.onComment&&W.onComment(!1,R.slice(ne+2,G),ne,G,fe,W.locations&&new _a)}function mo(){for(;G<Y;){var ne=R.charCodeAt(G);if(ne===32)++G;else if(ne===13){++G;var fe=R.charCodeAt(G);fe===10&&++G,W.locations&&(++Ee,De=G)}else if(ne===10||ne===8232||ne===8233)++G,W.locations&&(++Ee,De=G);else if(ne>8&&ne<14)++G;else if(ne===47){var fe=R.charCodeAt(G+1);if(fe===42)hp();else if(fe===47)Nn();else break}else if(ne===160)++G;else if(ne>=5760&&uu.test(String.fromCharCode(ne)))++G;else break}}function Nc(){var ne=R.charCodeAt(G+1);return ne>=48&&ne<=57?Ka(!0):(++G,Wi(qo))}function Aa(){var ne=R.charCodeAt(G+1);return Ae?(++G,Mc()):ne===61?tn(b,2):tn(go,1)}function Xl(){var ne=R.charCodeAt(G+1);return ne===61?tn(b,2):tn(Fa,1)}function fu(ne){var fe=R.charCodeAt(G+1);return fe===ne?tn(ne===124?ue:ke,2):fe===61?tn(b,2):tn(ne===124?Oe:_t,1)}function ys(){var ne=R.charCodeAt(G+1);return ne===61?tn(b,2):tn(pt,1)}function ba(ne){var fe=R.charCodeAt(G+1);return fe===ne?fe==45&&R.charCodeAt(G+2)==62&&zo.test(R.slice(it,G))?(G+=3,Nn(),mo(),Ha()):tn(O,2):fe===61?tn(b,2):tn(Jr,1)}function pu(ne){var fe=R.charCodeAt(G+1),Le=1;return fe===ne?(Le=ne===62&&R.charCodeAt(G+2)===62?3:2,R.charCodeAt(G+Le)===61?tn(b,Le+1):tn(ei,Le)):fe==33&&ne==60&&R.charCodeAt(G+2)==45&&R.charCodeAt(G+3)==45?(G+=4,Nn(),mo(),Ha()):(fe===61&&(Le=R.charCodeAt(G+2)===61?3:2),tn(Pt,Le))}function up(ne){var fe=R.charCodeAt(G+1);return fe===61?tn(ni,R.charCodeAt(G+2)===61?3:2):tn(ne===61?u:Q,1)}function gu(ne){switch(ne){case 46:return Nc();case 40:return++G,Wi(Wt);case 41:return++G,Wi(Bn);case 59:return++G,Wi(Rn);case 44:return++G,Wi(Gn);case 91:return++G,Wi(sr);case 93:return++G,Wi(pa);case 123:return++G,Wi(Rr);case 125:return++G,Wi(nr);case 58:return++G,Wi(Zr);case 63:return++G,Wi(Fo);case 48:var fe=R.charCodeAt(G+1);if(fe===120||fe===88)return jl();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Ka(!1);case 34:case 39:return cp(ne);case 47:return Aa();case 37:case 42:return Xl();case 124:case 38:return fu(ne);case 94:return ys();case 43:case 45:return ba(ne);case 60:case 62:return pu(ne);case 61:case 33:return up(ne);case 126:return tn(Q,1)}return!1}function Ha(ne){if(ne?G=se+1:se=G,W.locations&&(de=new _a),ne)return Mc();if(G>=Y)return Wi(Ft);var fe=R.charCodeAt(G);if(Ho(fe)||fe===92)return Zl();var Le=gu(fe);if(Le===!1){var He=String.fromCharCode(fe);if(He==="\\"||Wl.test(He))return Zl();We(G,"Unexpected character '"+He+"'")}return Le}function tn(ne,fe){var Le=R.slice(G,G+fe);G+=fe,Wi(ne,Le)}function Mc(){for(var bt="",ne,fe,Le=G;;){G>=Y&&We(Le,"Unterminated regular expression");var He=R.charAt(G);if(zo.test(He)&&We(Le,"Unterminated regular expression"),ne)ne=!1;else{if(He==="[")fe=!0;else if(He==="]"&&fe)fe=!1;else if(He==="/"&&!fe)break;ne=He==="\\"}++G}var bt=R.slice(Le,G);++G;var Ht=Ql();Ht&&!/^[gmsiy]*$/.test(Ht)&&We(Le,"Invalid regexp flag");try{var ti=new RegExp(bt,Ht)}catch(li){li instanceof SyntaxError&&We(Le,li.message),We(li)}return Wi(Vt,ti)}function yo(ne,fe){for(var Le=G,He=0,bt=0,Ht=fe??1/0;bt<Ht;++bt){var ti=R.charCodeAt(G),li;if(ti>=97?li=ti-97+10:ti>=65?li=ti-65+10:ti>=48&&ti<=57?li=ti-48:li=1/0,li>=ne)break;++G,He=He*ne+li}return G===Le||fe!=null&&G-Le!==fe?null:He}function jl(){G+=2;var ne=yo(16);return ne==null&&We(se+2,"Expected hexadecimal number"),Ho(R.charCodeAt(G))&&We(G,"Identifier directly after number"),Wi(St,ne)}function Ka(ne){var fe=G,Le=!1,He=R.charCodeAt(G)===48;!ne&&yo(10)===null&&We(fe,"Invalid number"),R.charCodeAt(G)===46&&(++G,yo(10),Le=!0);var bt=R.charCodeAt(G);(bt===69||bt===101)&&(bt=R.charCodeAt(++G),(bt===43||bt===45)&&++G,yo(10)===null&&We(fe,"Invalid number"),Le=!0),Ho(R.charCodeAt(G))&&We(G,"Identifier directly after number");var Ht=R.slice(fe,G),ti;return Le?ti=parseFloat(Ht):!He||Ht.length===1?ti=parseInt(Ht,10):/[89]/.test(Ht)||Ke?We(fe,"Invalid number"):ti=parseInt(Ht,8),Wi(St,ti)}function cp(ne){G++;for(var fe="";;){G>=Y&&We(se,"Unterminated string constant");var Le=R.charCodeAt(G);if(Le===ne)return++G,Wi(Bt,fe);if(Le===92){Le=R.charCodeAt(++G);var He=/^[0-7]+/.exec(R.slice(G,G+3));for(He&&(He=He[0]);He&&parseInt(He,8)>255;)He=He.slice(0,-1);if(He==="0"&&(He=null),++G,He)Ke&&We(G-2,"Octal literal in strict mode"),fe+=String.fromCharCode(parseInt(He,8)),G+=He.length-1;else switch(Le){case 110:fe+=`
`;break;case 114:fe+="\r";break;case 120:fe+=String.fromCharCode(Ko(2));break;case 117:fe+=String.fromCharCode(Ko(4));break;case 85:fe+=String.fromCharCode(Ko(8));break;case 116:fe+="	";break;case 98:fe+="\b";break;case 118:fe+="\v";break;case 102:fe+="\f";break;case 48:fe+="\0";break;case 13:R.charCodeAt(G)===10&&++G;case 10:W.locations&&(De=G,++Ee);break;default:fe+=String.fromCharCode(Le);break}}else(Le===13||Le===10||Le===8232||Le===8233)&&We(se,"Unterminated string constant"),fe+=String.fromCharCode(Le),++G}}function Ko(ne){var fe=yo(16,ne);return fe===null&&We(se,"Bad character escape sequence"),fe}var Ua;function Ql(){Ua=!1;for(var ne,fe=!0,Le=G;;){var He=R.charCodeAt(G);if(cu(He))Ua&&(ne+=R.charAt(G)),++G;else if(He===92){Ua||(ne=R.slice(Le,G)),Ua=!0,R.charCodeAt(++G)!=117&&We(G,"Expecting Unicode escape sequence \\uXXXX"),++G;var bt=Ko(4),Ht=String.fromCharCode(bt);Ht||We(G-1,"Invalid Unicode escape"),(fe?Ho(bt):cu(bt))||We(G-4,"Invalid Unicode escape"),ne+=Ht}else break;fe=!1}return Ua?ne:R.slice(Le,G)}function Zl(){var ne=Ql(),fe=Nt;return!Ua&&ln(ne)&&(fe=Br[ne]),Wi(fe,ne)}function Li(){Re=se,it=he,ht=_e,Ha()}function mu(ne){if(Ke=ne,G=se,W.locations)for(;G<De;)De=R.lastIndexOf(`
`,De-2)+1,--Ee;mo(),Ha()}function Jl(){this.type=null,this.start=se,this.end=null}function $l(){this.start=de,this.end=null,x!==null&&(this.source=x)}function hn(){var ne=new Jl;return W.locations&&(ne.loc=new $l),W.directSourceFile&&(ne.sourceFile=W.directSourceFile),W.ranges&&(ne.range=[se,0]),ne}function ea(ne){var fe=new Jl;return fe.start=ne.start,W.locations&&(fe.loc=new $l,fe.loc.start=ne.loc.start),W.ranges&&(fe.range=[ne.range[0],0]),fe}function Ot(ne,fe){return ne.type=fe,ne.end=it,W.locations&&(ne.loc.end=ht),W.ranges&&(ne.range[1]=it),ne}function Uo(ne){return W.ecmaVersion>=5&&ne.type==="ExpressionStatement"&&ne.expression.type==="Literal"&&ne.expression.value==="use strict"}function ts(ne){if(oe===ne)return Li(),!0}function Yo(){return!W.strictSemicolons&&(oe===Ft||oe===nr||zo.test(R.slice(it,se)))}function va(){!ts(Rn)&&!Yo()&&ta()}function Hs(ne){oe===ne?Li():ta()}function ta(){We(se,"Unexpected token")}function eh(ne){ne.type!=="Identifier"&&ne.type!=="MemberExpression"&&We(ne.start,"Assigning to rvalue"),Ke&&ne.type==="Identifier"&&Gl(ne.name)&&We(ne.start,"Assigning to "+ne.name+" in strict mode")}function dp(ne){Re=it=G,W.locations&&(ht=new _a),mt=Ke=null,vt=[],Ha();var fe=ne||hn(),Le=!0;for(ne||(fe.body=[]);oe!==Ft;){var He=vr();fe.body.push(He),Le&&Uo(He)&&mu(!0),Le=!1}return Ot(fe,"Program")}var yu={kind:"loop"},_o={kind:"switch"};function vr(){(oe===go||oe===b&&ye=="/=")&&Ha(!0);var ne=oe,fe=hn();switch(ne){case ii:case gs:Li();var Le=ne===ii;ts(Rn)||Yo()?fe.label=null:oe!==Nt?ta():(fe.label=qe(),va());for(var He=0;He<vt.length;++He){var bt=vt[He];if((fe.label==null||bt.name===fe.label.name)&&(bt.kind!=null&&(Le||bt.kind==="loop")||fe.label&&Le))break}return He===vt.length&&We(fe.start,"Unsyntactic "+ne.keyword),Ot(fe,Le?"BreakStatement":"ContinueStatement");case Is:return Li(),va(),Ot(fe,"DebuggerStatement");case ct:return Li(),vt.push(yu),fe.body=vr(),vt.pop(),Hs(Es),fe.test=Go(),va(),Ot(fe,"DoWhileStatement");case xs:if(Li(),vt.push(yu),Hs(Wt),oe===Rn)return th(fe,null);if(oe===kn){var Ht=hn();return Li(),Wo(Ht,!0),Ot(Ht,"VariableDeclaration"),Ht.declarations.length===1&&ts(fa)?ia(fe,Ht):th(fe,Ht)}var Ht=gn(!1,!0);return ts(fa)?(eh(Ht),ia(fe,Ht)):th(fe,Ht);case Vn:return Li(),Te(fe,!0);case ir:return Li(),fe.test=Go(),fe.consequent=vr(),fe.alternate=ts(os)?vr():null,Ot(fe,"IfStatement");case Ln:return!mt&&!W.allowReturnOutsideFunction&&We(se,"'return' outside of function"),Li(),ts(Rn)||Yo()?fe.argument=null:(fe.argument=gn(),va()),Ot(fe,"ReturnStatement");case Sn:Li(),fe.discriminant=Go(),fe.cases=[],Hs(Rr),vt.push(_o);for(var ti,li;oe!=nr;)if(oe===zt||oe===ms){var Mn=oe===zt;ti&&Ot(ti,"SwitchCase"),fe.cases.push(ti=hn()),ti.consequent=[],Li(),Mn?ti.test=gn():(li&&We(Re,"Multiple default clauses"),li=!0,ti.test=null),Hs(Zr)}else ti||ta(),ti.consequent.push(vr());return ti&&Ot(ti,"SwitchCase"),Li(),vt.pop(),Ot(fe,"SwitchStatement");case an:return Li(),zo.test(R.slice(it,se))&&We(it,"Illegal newline after throw"),fe.argument=gn(),va(),Ot(fe,"ThrowStatement");case pn:if(Li(),fe.block=Ya(),fe.handler=null,oe===Ts){var Wa=hn();Li(),Hs(Wt),Wa.param=qe(),Ke&&Gl(Wa.param.name)&&We(Wa.param.start,"Binding "+Wa.param.name+" in strict mode"),Hs(Bn),Wa.guard=null,Wa.body=Ya(),fe.handler=Ot(Wa,"CatchClause")}return fe.guardedHandlers=yt,fe.finalizer=ts(cs)?Ya():null,!fe.handler&&!fe.finalizer&&We(fe.start,"Missing catch or finally clause"),Ot(fe,"TryStatement");case kn:return Li(),Wo(fe),va(),Ot(fe,"VariableDeclaration");case Es:return Li(),fe.test=Go(),vt.push(yu),fe.body=vr(),vt.pop(),Ot(fe,"WhileStatement");case on:return Ke&&We(se,"'with' in strict mode"),Li(),fe.object=Go(),fe.body=vr(),Ot(fe,"WithStatement");case Rr:return Ya();case Rn:return Li(),Ot(fe,"EmptyStatement");default:var Va=ye,Xa=gn();if(ne===Nt&&Xa.type==="Identifier"&&ts(Zr)){for(var He=0;He<vt.length;++He)vt[He].name===Va&&We(Xa.start,"Label '"+Va+"' is already declared");var sh=oe.isLoop?"loop":oe===Sn?"switch":null;return vt.push({name:Va,kind:sh}),fe.body=vr(),vt.pop(),fe.label=Xa,Ot(fe,"LabeledStatement")}else return fe.expression=Xa,va(),Ot(fe,"ExpressionStatement")}}function Go(){Hs(Wt);var ne=gn();return Hs(Bn),ne}function Ya(ne){var fe=hn(),Le=!0,He=!1,bt;for(fe.body=[],Hs(Rr);!ts(nr);){var Ht=vr();fe.body.push(Ht),Le&&ne&&Uo(Ht)&&(bt=He,mu(He=!0)),Le=!1}return He&&!bt&&mu(!1),Ot(fe,"BlockStatement")}function th(ne,fe){return ne.init=fe,Hs(Rn),ne.test=oe===Rn?null:gn(),Hs(Rn),ne.update=oe===Bn?null:gn(),Hs(Bn),ne.body=vr(),vt.pop(),Ot(ne,"ForStatement")}function ia(ne,fe){return ne.left=fe,ne.right=gn(),Hs(Bn),ne.body=vr(),vt.pop(),Ot(ne,"ForInStatement")}function Wo(ne,fe){for(ne.declarations=[],ne.kind="var";;){var Le=hn();if(Le.id=qe(),Ke&&Gl(Le.id.name)&&We(Le.id.start,"Binding "+Le.id.name+" in strict mode"),Le.init=ts(u)?gn(!0,fe):null,ne.declarations.push(Ot(Le,"VariableDeclarator")),!ts(Gn))break}return ne}function gn(ne,fe){var Le=_u(fe);if(!ne&&oe===Gn){var He=ea(Le);for(He.expressions=[Le];ts(Gn);)He.expressions.push(_u(fe));return Ot(He,"SequenceExpression")}return Le}function _u(ne){var fe=fp(ne);if(oe.isAssign){var Le=ea(fe);return Le.operator=ye,Le.left=fe,Li(),Le.right=_u(ne),eh(fe),Ot(Le,"AssignmentExpression")}return fe}function fp(ne){var fe=Ao(ne);if(ts(Fo)){var Le=ea(fe);return Le.test=fe,Le.consequent=gn(!0),Hs(Zr),Le.alternate=gn(!0,ne),Ot(Le,"ConditionalExpression")}return fe}function Ao(ne){return Wn(ih(),-1,ne)}function Wn(ne,fe,Le){var He=oe.binop;if(He!=null&&(!Le||oe!==fa)&&He>fe){var bt=ea(ne);bt.left=ne,bt.operator=ye;var Ht=oe;Li(),bt.right=Wn(ih(),He,Le);var ti=Ot(bt,Ht===ue||Ht===ke?"LogicalExpression":"BinaryExpression");return Wn(ti,fe,Le)}return ne}function ih(){if(oe.prefix){var ne=hn(),fe=oe.isUpdate;return ne.operator=ye,ne.prefix=!0,Ae=!0,Li(),ne.argument=ih(),fe?eh(ne.argument):Ke&&ne.operator==="delete"&&ne.argument.type==="Identifier"&&We(ne.start,"Deleting local variable in strict mode"),Ot(ne,fe?"UpdateExpression":"UnaryExpression")}for(var Le=pp();oe.postfix&&!Yo();){var ne=ea(Le);ne.operator=ye,ne.prefix=!1,ne.argument=Le,eh(Le),Li(),Le=Ot(ne,"UpdateExpression")}return Le}function pp(){return Xo(Au())}function Xo(ne,fe){if(ts(qo)){var Le=ea(ne);return Le.object=ne,Le.property=qe(!0),Le.computed=!1,Xo(Ot(Le,"MemberExpression"),fe)}else if(ts(sr)){var Le=ea(ne);return Le.object=ne,Le.property=gn(),Le.computed=!0,Hs(pa),Xo(Ot(Le,"MemberExpression"),fe)}else if(!fe&&ts(Wt)){var Le=ea(ne);return Le.callee=ne,Le.arguments=Ge(Bn,!1),Xo(Ot(Le,"CallExpression"),fe)}else return ne}function Au(){switch(oe){case fo:var He=hn();return Li(),Ot(He,"ThisExpression");case Nt:return qe();case St:case Bt:case Vt:var He=hn();return He.value=ye,He.raw=R.slice(se,he),Li(),Ot(He,"Literal");case po:case Yl:case Oo:var He=hn();return He.value=oe.atomValue,He.raw=oe.keyword,Li(),Ot(He,"Literal");case Wt:var ne=de,fe=se;Li();var Le=gn();return Le.start=fe,Le.end=he,W.locations&&(Le.loc.start=ne,Le.loc.end=_e),W.ranges&&(Le.range=[fe,he]),Hs(Bn),Le;case sr:var He=hn();return Li(),He.elements=Ge(pa,!0,!0),Ot(He,"ArrayExpression");case Rr:return mp();case Vn:var He=hn();return Li(),Te(He,!1);case Mo:return gp();default:ta()}}function gp(){var ne=hn();return Li(),ne.callee=Xo(Au(),!0),ts(Wt)?ne.arguments=Ge(Bn,!1):ne.arguments=yt,Ot(ne,"NewExpression")}function mp(){var ne=hn(),fe=!0,Le=!1;for(ne.properties=[],Li();!ts(nr);){if(fe)fe=!1;else if(Hs(Gn),W.allowTrailingCommas&&ts(nr))break;var He={key:Ga()},bt=!1,Ht;if(ts(Zr)?(He.value=gn(!0),Ht=He.kind="init"):W.ecmaVersion>=5&&He.key.type==="Identifier"&&(He.key.name==="get"||He.key.name==="set")?(bt=Le=!0,Ht=He.kind=He.key.name,He.key=Ga(),oe!==Wt&&ta(),He.value=Te(hn(),!1)):ta(),He.key.type==="Identifier"&&(Ke||Le))for(var ti=0;ti<ne.properties.length;++ti){var li=ne.properties[ti];if(li.key.name===He.key.name){var Mn=Ht==li.kind||bt&&li.kind==="init"||Ht==="init"&&(li.kind==="get"||li.kind==="set");Mn&&!Ke&&Ht==="init"&&li.kind==="init"&&(Mn=!1),Mn&&We(He.key.start,"Redefinition of property")}}ne.properties.push(He)}return Ot(ne,"ObjectExpression")}function Ga(){return oe===St||oe===Bt?Au():qe(!0)}function Te(ne,fe){oe===Nt?ne.id=qe():fe?ta():ne.id=null,ne.params=[];var Le=!0;for(Hs(Wt);!ts(Bn);)Le?Le=!1:Hs(Gn),ne.params.push(qe());var He=mt,bt=vt;if(mt=!0,vt=[],ne.body=Ya(!0),mt=He,vt=bt,Ke||ne.body.body.length&&Uo(ne.body.body[0]))for(var Ht=ne.id?-1:0;Ht<ne.params.length;++Ht){var ti=Ht<0?ne.id:ne.params[Ht];if((hu(ti.name)||Gl(ti.name))&&We(ti.start,"Defining '"+ti.name+"' in strict mode"),Ht>=0)for(var li=0;li<Ht;++li)ti.name===ne.params[li].name&&We(ti.start,"Argument name clash in strict mode")}return Ot(ne,fe?"FunctionDeclaration":"FunctionExpression")}function Ge(ne,fe,Le){for(var He=[],bt=!0;!ts(ne);){if(bt)bt=!1;else if(Hs(Gn),fe&&W.allowTrailingCommas&&ts(ne))break;Le&&oe===Gn?He.push(null):He.push(gn(!0))}return He}function qe(ne){var fe=hn();return ne&&W.forbidReserved=="everywhere"&&(ne=!1),oe===Nt?(!ne&&(W.forbidReserved&&(W.ecmaVersion===3?ga:ma)(ye)||Ke&&hu(ye))&&R.slice(se,he).indexOf("\\")==-1&&We(se,"The keyword '"+ye+"' is reserved"),fe.name=ye):ne&&oe.keyword?fe.name=oe.keyword:ta(),Ae=!1,Li(),Ot(fe,"Identifier")}}),h.version||(h=null)}function y(z,W){return(a.acorn||h).parse(z,W)}var v={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},S={"-":"__negate","+":"__self"},w=r.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(z){this["__"+z]="#"+z},{__self:function(){return this}});P.inject(w),K.inject(w),qt.inject(w);function E(z,W,R){var Y=v[W];if(z&&z[Y]){var x=z[Y](R);return W==="!="?!x:x}switch(W){case"+":return z+R;case"-":return z-R;case"*":return z*R;case"/":return z/R;case"%":return z%R;case"==":return z==R;case"!=":return z!=R}}function I(z,W){var R=S[z];if(W&&W[R])return W[R]();switch(z){case"+":return+W;case"-":return-W}}function N(z,W){if(!z)return"";W=W||{};var R=[];function Y(Ke){for(var We=0,yt=R.length;We<yt;We++){var St=R[We];if(St[0]>=Ke)break;Ke+=St[1]}return Ke}function x(Ke){return z.substring(Y(Ke.range[0]),Y(Ke.range[1]))}function H(Ke,We){return z.substring(Y(Ke.range[1]),Y(We.range[0]))}function j(Ke,We){for(var yt=Y(Ke.range[0]),St=Y(Ke.range[1]),Vt=0,Bt=R.length-1;Bt>=0;Bt--)if(yt>R[Bt][0]){Vt=Bt+1;break}R.splice(Vt,0,[yt,We.length-St+yt]),z=z.substring(0,yt)+We+z.substring(St)}function J(Ke,We){switch(Ke.type){case"UnaryExpression":if(Ke.operator in S&&Ke.argument.type!=="Literal"){var yt=x(Ke.argument);j(Ke,'$__("'+Ke.operator+'", '+yt+")")}break;case"BinaryExpression":if(Ke.operator in v&&Ke.left.type!=="Literal"){var St=x(Ke.left),Vt=x(Ke.right),Bt=H(Ke.left,Ke.right),Nt=Ke.operator;j(Ke,"__$__("+St+","+Bt.replace(new RegExp("\\"+Nt),'"'+Nt+'"')+", "+Vt+")")}break;case"UpdateExpression":case"AssignmentExpression":var Ft=We&&We.type;if(!(Ft==="ForStatement"||Ft==="BinaryExpression"&&/^[=!<>]/.test(We.operator)||Ft==="MemberExpression"&&We.computed)){if(Ke.type==="UpdateExpression"){var yt=x(Ke.argument),ii="__$__("+yt+', "'+Ke.operator[0]+'", 1)',zt=yt+" = "+ii;Ke.prefix?zt="("+zt+")":(Ft==="AssignmentExpression"||Ft==="VariableDeclarator"||Ft==="BinaryExpression")&&(x(We.left||We.id)===yt&&(zt=ii),zt=yt+"; "+zt),j(Ke,zt)}else if(/^.=$/.test(Ke.operator)&&Ke.left.type!=="Literal"){var St=x(Ke.left),Vt=x(Ke.right),ii=St+" = __$__("+St+', "'+Ke.operator[0]+'", '+Vt+")";j(Ke,/^\(.*\)$/.test(x(Ke))?"("+ii+")":ii)}}break}}function G(Ke){switch(Ke.type){case"ExportDefaultDeclaration":j({range:[Ke.start,Ke.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var We=Ke.declaration,yt=Ke.specifiers;if(We){var St=We.declarations;St&&(St.forEach(function(Bt){j(Bt,"module.exports."+x(Bt))}),j({range:[Ke.start,We.start+We.kind.length]},""))}else if(yt){var Vt=yt.map(function(Bt){var Nt=x(Bt);return"module.exports."+Nt+" = "+Nt+"; "}).join("");Vt&&j(Ke,Vt)}break}}function se(Ke,We,yt){if(Ke){for(var St in Ke)if(St!=="range"&&St!=="loc"){var Vt=Ke[St];if(Array.isArray(Vt))for(var Bt=0,Nt=Vt.length;Bt<Nt;Bt++)se(Vt[Bt],Ke,yt);else Vt&&typeof Vt=="object"&&se(Vt,Ke,yt)}yt.operatorOverloading!==!1&&J(Ke,We),yt.moduleExports!==!1&&G(Ke)}}function he(Ke){var We="",yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ke=(Math.abs(Ke)<<1)+(Ke<0?1:0);Ke||!We;){var St=Ke&31;Ke>>=5,Ke&&(St|=32),We+=yt[St]}return We}var de=W.url||"",_e=W.sourceMaps,oe=W.paperFeatures||{},ye=W.source||z,Ae=W.offset||0,Ee=Rt.agent,De=Ee.versionNumber,Re=!1,it=/\r\n|\n|\r/mg,ht;if(_e&&(Ee.chrome&&De>=30||Ee.webkit&&De>=537.76||Ee.firefox&&De>=23||Ee.node)){if(Ee.node)Ae-=2;else if(i&&de&&!i.location.href.indexOf(de)){var mt=s.getElementsByTagName("html")[0].innerHTML;Ae=mt.substr(0,mt.indexOf(z)+1).match(it).length+1}Re=Ae>0&&!(Ee.chrome&&De>=36||Ee.safari&&De>=600||Ee.firefox&&De>=40||Ee.node);var vt=["AA"+he(Re?0:Ae)+"A"];vt.length=(z.match(it)||[]).length+1+(Re?Ae:0),ht={version:3,file:de,names:[],mappings:vt.join(";AACA"),sourceRoot:"",sources:[de],sourcesContent:[ye]}}return(oe.operatorOverloading!==!1||oe.moduleExports!==!1)&&se(y(z,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,oe),ht&&(Re&&(z=new Array(Ae+1).join(`
`)+z),/^(inline|both)$/.test(_e)&&(z+=`
//# sourceMappingURL=data:application/json;base64,`+e.btoa(unescape(encodeURIComponent(JSON.stringify(ht))))),z+=`
//# sourceURL=`+(de||"paperscript")),{url:de,source:ye,code:z,map:ht}}function q(z,W,R){Rt=W;var Y=W.getView(),x=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(z)&&!/\bnew\s+Tool\b/.test(z)?new le:null,H=x?x._events:[],j=["onFrame","onResize"].concat(H),J=[],G=[],se,he=typeof z=="object"?z:N(z,R);z=he.code;function de(De,Re){for(var it in De)(Re||!/^_/.test(it))&&new RegExp("([\\b\\s\\W]|^)"+it.replace(/\$/g,"\\$")+"\\b").test(z)&&(J.push(it),G.push(De[it]))}de({__$__:E,$__:I,paper:W,tool:x},!0),de(W),z="var module = { exports: {} }; "+z;var Ae=r.each(j,function(De){new RegExp("\\s+"+De+"\\b").test(z)&&(J.push(De),this.push("module.exports."+De+" = "+De+";"))},[]).join(`
`);Ae&&(z+=`
`+Ae),z+=`
return module.exports;`;var _e=Rt.agent;if(s&&(_e.chrome||_e.firefox&&_e.versionNumber<40)){var oe=s.createElement("script"),ye=s.head||s.getElementsByTagName("head")[0];_e.firefox&&(z=`
`+z),oe.appendChild(s.createTextNode("document.__paperscript__ = function("+J+") {"+z+`
}`)),ye.appendChild(oe),se=s.__paperscript__,delete s.__paperscript__,ye.removeChild(oe)}else se=Function(J,z);var Ae=se&&se.apply(W,G),Ee=Ae||{};return r.each(H,function(De){var Re=Ee[De];Re&&(x[De]=Re)}),Y&&(Ee.onResize&&Y.setOnResize(Ee.onResize),Y.emit("resize",{size:Y.size,delta:new P}),Ee.onFrame&&Y.setOnFrame(Ee.onFrame),Y.requestUpdate()),Ae}function B(z){if(/^text\/(?:x-|)paperscript$/.test(z.type)&&c.getAttribute(z,"ignore")!=="true"){var W=c.getAttribute(z,"canvas"),R=s.getElementById(W),Y=z.src||z.getAttribute("data-src"),x=c.hasAttribute(z,"async"),H="data-paper-scope";if(!R)throw new Error('Unable to find canvas with id "'+W+'"');var j=c.get(R.getAttribute(H))||new c().setup(R);return R.setAttribute(H,j._id),Y?ve.request({url:Y,async:x,mimeType:"text/plain",onLoad:function(J){q(J,j,Y)}}):q(z.innerHTML,j,z.baseURI),z.setAttribute("data-paper-ignore","true"),j}}function k(){r.each(s&&s.getElementsByTagName("script"),B)}function X(z){return z?B(z):k()}return i&&(s.readyState==="complete"?setTimeout(k):fi.add(i,{load:k})),{compile:N,execute:q,load:X,parse:y,calculateBinary:E,calculateUnary:I}}).call(this);var Rt=new(c.inject(r.exports,{Base:r,Numerical:C,Key:js,DomEvent:fi,DomElement:Gt,document:s,window:i,Symbol:Qe,PlacedSymbol:xe}));return Rt.agent.node&&ym(Rt),typeof t=="function"&&t.amd?t("paper",Rt):n&&(n.exports=Rt),Rt}).call(zn,typeof self=="object"?self:null)})(uv);var oL=uv.exports;const UA=qf(oL);class gl{constructor(e,t,i,s,r){this.point=t,this.normal=i,this.distance=e,this.wind=s,this.t=hs(r,0,1)}}class Hn{constructor(e,t,i){this.point=e,this.aT=hs(t,0,1),this.bT=hs(i,0,1)}getSwapped(){return new Hn(this.point,this.bT,this.aT)}}class sn{constructor(e,t,i,s,r,o,c,p,g,A){this.initialize(e,t,i,s,r,o,c,p,g,A)}initialize(e,t,i,s,r,o,c,p,g,A){return this.a=e,this.b=t,this.atMin=i,this.atMax=s,this.btMin=r,this.btMax=o,this.aMin=c,this.aMax=p,this.bMin=g,this.bMax=A,this}pushSubdivisions(e){const t=this,i=(t.atMax+t.atMin)/2,s=(t.btMax+t.btMin)/2;if(i===this.atMin||i===this.atMax||s===this.btMin||s===this.btMax){e.push(this);return}const r=t.a.positionAt(i),o=t.b.positionAt(s);sn.boxIntersects(t.aMin,r,t.bMin,o)&&e.push(sn.pool.create(t.a,t.b,t.atMin,i,t.btMin,s,t.aMin,r,t.bMin,o)),sn.boxIntersects(r,t.aMax,t.bMin,o)&&e.push(sn.pool.create(t.a,t.b,i,t.atMax,t.btMin,s,r,t.aMax,t.bMin,o)),sn.boxIntersects(t.aMin,r,o,t.bMax)&&e.push(sn.pool.create(t.a,t.b,t.atMin,i,s,t.btMax,t.aMin,r,o,t.bMax)),sn.boxIntersects(r,t.aMax,o,t.bMax)&&e.push(sn.pool.create(t.a,t.b,i,t.atMax,s,t.btMax,r,t.aMax,o,t.bMax)),this.freeToPool()}distance(e){const t=this.atMin-e.atMin,i=this.atMax-e.atMax,s=this.btMin-e.btMin,r=this.btMax-e.btMax;return t*t+i*i+s*s+r*r}clean(){this.a=null,this.b=null,this.aMin=null,this.aMax=null,this.bMin=null,this.bMax=null}static intersect(e,t){if(!e.bounds.intersectsBounds(t.bounds))return[];const i=sn.getIntersectionRanges(e,t),s=[];for(let o=0;o<i.length;o++){const c=i[o];let p=!1;e:for(let g=0;g<s.length;g++){const A=s[g];for(let C=0;C<A.length;C++){const D=A[C];if(c.distance(D)<1e-13){A.push(c),p=!0;break e}}}p||s.push([c])}const r=[];for(let o=0;o<s.length;o++){const c=s[o];let p=0,g=0;for(let D=0;D<c.length;D++)p+=c[D].atMin+c[D].atMax,g+=c[D].btMin+c[D].btMax;p/=2*c.length,g/=2*c.length;const A=e.positionAt(p),C=t.positionAt(g);r.push(new Hn(A.average(C),p,g))}for(let o=0;o<i.length;o++)i[o].freeToPool();return sn.cleanPool(),r}static getIntersectionRanges(e,t){const i=e.getInteriorExtremaTs(),s=t.getInteriorExtremaTs(),r=te.zip([0].concat(i),i.concat([1])),o=te.zip([0].concat(s),s.concat([1]));let c=[];for(let p=0;p<r.length;p++)for(let g=0;g<o.length;g++){const A=r[p][0],C=r[p][1],D=o[g][0],P=o[g][1],F=e.positionAt(A),K=e.positionAt(C),M=t.positionAt(D),U=t.positionAt(P);sn.boxIntersects(F,K,M,U)&&c.push(sn.pool.create(e,t,A,C,D,P,F,K,M,U))}for(let p=0;p<50;p++){const g=[];for(let A=c.length-1;A>=0;A--)c[A].pushSubdivisions(g);c=g}return c}static boxIntersects(e,t,i,s){const r=Math.max(Math.min(e.x,t.x),Math.min(i.x,s.x)),o=Math.max(Math.min(e.y,t.y),Math.min(i.y,s.y)),c=Math.min(Math.max(e.x,t.x),Math.max(i.x,s.x)),p=Math.min(Math.max(e.y,t.y),Math.max(i.y,s.y));return c-r>=0&&p-o>=0}static cleanPool(){sn.pool.forEach(e=>e.clean())}freeToPool(){sn.pool.freeToPool(this)}}sn.pool=new us(sn);const Gf=new f0("kite");class nu{constructor(e,t){this.a=e,this.b=t;let i=0,s=1,r=this.apply(i),o=this.apply(s);r>1&&(r=1,i=this.applyInverse(r)),r<0&&(r=0,i=this.applyInverse(r)),o>1&&(o=1,s=this.applyInverse(o)),o<0&&(o=0,s=this.applyInverse(o)),this.t0=i,this.t1=s,e>0?(this.qt0=r,this.qt1=o):(this.qt0=o,this.qt1=r),this.t0<0&&this.t0>-1e-8&&(this.t0=0),this.t0>1&&this.t0<1+1e-8&&(this.t0=1),this.t1<0&&this.t1>-1e-8&&(this.t1=0),this.t1>1&&this.t1<1+1e-8&&(this.t1=1),this.qt0<0&&this.qt0>-1e-8&&(this.qt0=0),this.qt0>1&&this.qt0<1+1e-8&&(this.qt0=1),this.qt1<0&&this.qt1>-1e-8&&(this.qt1=0),this.qt1>1&&this.qt1<1+1e-8&&(this.qt1=1)}apply(e){return this.a*e+this.b}applyInverse(e){return(e-this.b)/this.a}static createLinear(e,t,i,s){const r=(s-t)/(i-e);return new nu(r,t-e*r)}}const Si=n=>n.toFixed(20),Cd=new we(0,0),Rm=new we(0,0),lL=new we(0,0);function ec(n){return n>=0&&n<=1}class Gs{constructor(){this.invalidationEmitter=new Ai}areStrokedBoundsDilated(){return Math.abs(this.startTangent.x*this.startTangent.y)<1e-7&&Math.abs(this.endTangent.x*this.endTangent.y)<1e-7}getBoundsWithTransform(e){return this.transformed(e).getBounds()}slice(e,t){let i=this;return t<1&&(i=i.subdivided(t)[0]),e>0&&(i=i.subdivided(Un(0,t,0,1,e))[1]),i}subdivisions(e){let t=this;const i=[];for(let s=0;s<e.length;s++){const r=e[s],o=t.subdivided(r);i.push(o[0]),t=o[1];for(let c=s+1;c<e.length;c++)e[c]=Un(r,1,0,1,e[c])}return i.push(t),i}subdividedIntoMonotone(){return this.subdivisions(this.getInteriorExtremaTs())}isSufficientlyFlat(e,t){const i=this.start,s=this.positionAt(.5),r=this.end;return Gs.isSufficientlyFlat(e,t,i,s,r)}getArcLength(e,t,i){if(e=e===void 0?1e-10:e,t=t===void 0?1e-8:t,i=i===void 0?15:i,i<=0||this.isSufficientlyFlat(e,t))return this.start.distance(this.end);{const s=this.subdivided(.5);return s[0].getArcLength(e,t,i-1)+s[1].getArcLength(e,t,i-1)}}getDashValues(e,t,i,s){const r=this,o=[];let c=0;const p=te.sum(e);t=t%p,t<0&&(t+=p);let g=0,A=0,C=!0;function D(){g=(g+1)%e.length,C=!C}for(;t>0;)t>=e[g]?(t-=e[g],D()):(A=t,t=0);const P=C;return function F(K,M,U,$,re){const pe=(K+M)/2,ce=r.positionAt(pe);if(re>14||Gs.isSufficientlyFlat(i,s,U,ce,$)){const T=U.distance(ce)+ce.distance($);c+=T;let Ce=T;for(;A+Ce>=e[g];){const ze=Un(0,T,K,M,T-Ce+e[g]-A);o.push(ze),Ce-=e[g]-A,A=0,D()}A=A+Ce}else F(K,pe,U,ce,re+1),F(pe,M,ce,$,re+1)}(0,1,this.start,this.end,0),{values:o,arcLength:c,initiallyInside:P}}toPiecewiseLinearSegments(e,t,i,s,r,o){t=t===void 0?e.minLevels:t,i=i===void 0?e.maxLevels:i,s=s||[];const c=e.pointMap||te.identity;r=r||c(this.start),o=o||c(this.end);const p=c(this.positionAt(.5));let g=i===0;if(!g&&t<=0&&(g=this.isSufficientlyFlat(e.distanceEpsilon===null||e.distanceEpsilon===void 0?Number.POSITIVE_INFINITY:e.distanceEpsilon,e.curveEpsilon===null||e.curveEpsilon===void 0?Number.POSITIVE_INFINITY:e.curveEpsilon)),g)s.push(new ri(r,o));else{const A=this.subdivided(.5);A[0].toPiecewiseLinearSegments(e,t-1,i-1,s,r,p),A[1].toPiecewiseLinearSegments(e,t-1,i-1,s,p,o)}return s}toPiecewiseLinearOrArcSegments(e){const t=lt()({minLevels:2,maxLevels:7,curvatureThreshold:.02,errorThreshold:10,errorPoints:[.25,.75]},e),i=[];return this.toPiecewiseLinearOrArcRecursion(t,t.minLevels,t.maxLevels,i,0,1,this.positionAt(0),this.positionAt(1),this.curvatureAt(0),this.curvatureAt(1)),i}toPiecewiseLinearOrArcRecursion(e,t,i,s,r,o,c,p,g,A){const C=(r+o)/2,D=this.positionAt(C),P=this.curvatureAt(C);if(i<=0||t<=0&&Math.abs(g-P)+Math.abs(P-A)<e.curvatureThreshold*2){const F=Bi.createFromPoints(c,D,p);let K=!1;if(F instanceof Bi){const M=F.radius*F.radius;for(let U=0;U<e.errorPoints.length;U++){const $=e.errorPoints[U],re=this.positionAt(r*(1-$)+o*$);if(Math.abs(re.distanceSquared(F.center)-M)>e.errorThreshold){K=!0;break}}}if(!K){s.push(F);return}}this.toPiecewiseLinearOrArcRecursion(e,t-1,i-1,s,r,C,c,D,g,P),this.toPiecewiseLinearOrArcRecursion(e,t-1,i-1,s,C,o,D,p,P,A)}getClosestPoints(e){return Gs.closestToPoint([this],e,1e-7)}static closestToPoint(e,t,i){const s=i*i;let r=[],o=[],c=Number.POSITIVE_INFINITY,p=!1;for(te.each(e,g=>{if(g instanceof ri){const A=g.explicitClosestToPoint(t);te.each(A,C=>{C.distanceSquared<c?(o=[C],c=C.distanceSquared):C.distanceSquared===c&&o.push(C)})}else{const A=[0].concat(g.getInteriorExtremaTs()).concat([1]);for(let C=0;C<A.length-1;C++){const D=A[C],P=A[C+1],F=g.positionAt(D),K=g.positionAt(P),M=Je.point(F).addPoint(K),U=M.minimumDistanceToPointSquared(t);if(U<=c){const $=M.maximumDistanceToPointSquared(t);$<c&&(c=$,o=[]),r.push({ta:D,tb:P,pa:F,pb:K,segment:g,bounds:M,min:U,max:$})}}}});r.length&&!p;){const g=r;r=[],p=!0;for(const A of g){if(A.min>c)continue;p&&A.pa.distanceSquared(A.pb)>s&&(p=!1);const C=(A.ta+A.tb)/2,D=A.segment.positionAt(C),P=Je.point(A.pa).addPoint(D),F=Je.point(A.pb).addPoint(D),K=P.minimumDistanceToPointSquared(t),M=F.minimumDistanceToPointSquared(t);if(K<=c){const U=P.maximumDistanceToPointSquared(t);U<c&&(c=U,o=[]),r.push({ta:A.ta,tb:C,pa:A.pa,pb:D,segment:A.segment,bounds:P,min:K,max:U})}if(M<=c){const U=F.maximumDistanceToPointSquared(t);U<c&&(c=U,o=[]),r.push({ta:C,tb:A.tb,pa:D,pb:A.pb,segment:A.segment,bounds:F,min:M,max:U})}}}return te.each(r,g=>{const A=(g.ta+g.tb)/2,C=g.segment.positionAt(A);o.push({segment:g.segment,t:A,closestPoint:C,distanceSquared:t.distanceSquared(C)})}),o}static polynomialGetOverlapCubic(e,t,i,s,r,o,c,p){if(p===0)return Gs.polynomialGetOverlapQuadratic(e,t,i,r,o,c);const g=Math.sign(s/p)*Math.pow(Math.abs(s/p),1/3);if(g===0)return null;const A=(i-g*g*c)/(3*g*g*p);return{a:g,b:A}}static polynomialGetOverlapQuadratic(e,t,i,s,r,o){if(o===0)return Gs.polynomialGetOverlapLinear(e,t,s,r);if(i/o<0)return null;const p=Math.sqrt(i/o);if(p===0)return null;const g=(t-p*r)/(2*p*o);return{a:p,b:g}}static polynomialGetOverlapLinear(e,t,i,s){if(s===0)return e===i?!0:null;const r=t/s;if(r===0)return null;const o=(e-i)/s;return{a:r,b:o}}static intersect(e,t){if(ri&&e instanceof ri&&t instanceof ri)return ri.intersect(e,t);if(ri&&e instanceof ri)return ri.intersectOther(e,t);if(ri&&t instanceof ri)return ri.intersectOther(t,e).map(hL);if(Bi&&e instanceof Bi&&t instanceof Bi)return Bi.intersect(e,t);if($s&&e instanceof $s&&t instanceof $s)return $s.intersect(e,t);if(Rs&&nn&&(e instanceof Rs||e instanceof nn)&&(t instanceof Rs||t instanceof nn)){const i=e instanceof nn?e:e.degreeElevated(),s=t instanceof nn?t:t.degreeElevated(),r=new UA.Curve(i.start.x,i.start.y,i.control1.x,i.control1.y,i.control2.x,i.control2.y,i.end.x,i.end.y),o=new UA.Curve(s.start.x,s.start.y,s.control1.x,s.control1.y,s.control2.x,s.control2.y,s.end.x,s.end.y);return r.getIntersections(o).map(p=>{const g=new we(p.point.x,p.point.y);return new Hn(g,p.time,p.intersection.time)})}else return sn.intersect(e,t)}static deserialize(e){return Gf[e.type].deserialize(e)}static isSufficientlyFlat(e,t,i,s,r){return!(VA(s,i,r)/i.distanceSquared(r)>t||VA(s,i,r)>e)}static filterClosestToPointResult(e){if(e.length===0)return[];const t=te.minBy(e,i=>i.distanceSquared).distanceSquared;return te.uniqWith(e.filter(i=>Math.abs(i.distanceSquared-t)<1e-11),(i,s)=>i.closestPoint.distanceSquared(s.closestPoint)<1e-11)}}function hL(n){return n.getSwapped()}const sl=Math.PI*2;class Bi extends Gs{constructor(e,t,i,s,r){super(),this._center=e,this._radius=t,this._startAngle=i,this._endAngle=s,this._anticlockwise=r,this.invalidate()}setCenter(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this._center}setRadius(e){return this._radius!==e&&(this._radius=e,this.invalidate()),this}set radius(e){this.setRadius(e)}get radius(){return this.getRadius()}getRadius(){return this._radius}setStartAngle(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}set startAngle(e){this.setStartAngle(e)}get startAngle(){return this.getStartAngle()}getStartAngle(){return this._startAngle}setEndAngle(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}set endAngle(e){this.setEndAngle(e)}get endAngle(){return this.getEndAngle()}getEndAngle(){return this._endAngle}setAnticlockwise(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}set anticlockwise(e){this.setAnticlockwise(e)}get anticlockwise(){return this.getAnticlockwise()}getAnticlockwise(){return this._anticlockwise}positionAt(e){return this.positionAtAngle(this.angleAt(e))}tangentAt(e){return this.tangentAtAngle(this.angleAt(e))}curvatureAt(e){return(this._anticlockwise?-1:1)/this._radius}subdivided(e){if(e===0||e===1)return[this];const t=this.angleAt(0),i=this.angleAt(e),s=this.angleAt(1);return[new Bi(this._center,this._radius,t,i,this._anticlockwise),new Bi(this._center,this._radius,i,s,this._anticlockwise)]}invalidate(){this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._bounds=null,this._svgPathFragment=null,this._radius<0&&(this._radius=-this._radius,this._startAngle+=Math.PI,this._endAngle+=Math.PI),this.invalidationEmitter.emit()}getStart(){return this._start===null&&(this._start=this.positionAtAngle(this._startAngle)),this._start}get start(){return this.getStart()}getEnd(){return this._end===null&&(this._end=this.positionAtAngle(this._endAngle)),this._end}get end(){return this.getEnd()}getStartTangent(){return this._startTangent===null&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this._endTangent===null&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}get endTangent(){return this.getEndTangent()}getActualEndAngle(){return this._actualEndAngle===null&&(this._actualEndAngle=Bi.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}get actualEndAngle(){return this.getActualEndAngle()}getIsFullPerimeter(){return this._isFullPerimeter===null&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=Math.PI*2||this._anticlockwise&&this._startAngle-this._endAngle>=Math.PI*2),this._isFullPerimeter}get isFullPerimeter(){return this.getIsFullPerimeter()}getAngleDifference(){return this._angleDifference===null&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=Math.PI*2)),this._angleDifference}get angleDifference(){return this.getAngleDifference()}getBounds(){return this._bounds===null&&(this._bounds=Je.NOTHING.copy().withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle&&(this.includeBoundsAtAngle(0),this.includeBoundsAtAngle(Math.PI/2),this.includeBoundsAtAngle(Math.PI),this.includeBoundsAtAngle(3*Math.PI/2))),this._bounds}get bounds(){return this.getBounds()}getNondegenerateSegments(){return this._radius<=0||this._startAngle===this._endAngle?[]:[this]}includeBoundsAtAngle(e){this.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this._center.plus(we.createPolar(this._radius,e))))}mapAngle(e){return Math.abs(yr(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(yr(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?w1(e,this._startAngle-2*Math.PI,this._startAngle):yr(e,this._startAngle,this._startAngle+2*Math.PI)}tAtAngle(e){return(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle)}angleAt(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}positionAtAngle(e){return this._center.plus(we.createPolar(this._radius,e))}tangentAtAngle(e){const t=we.createPolar(1,e);return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}containsAngle(e){const t=this._anticlockwise?e-this._endAngle:e-this._startAngle;return yr(t,0,Math.PI*2)<=this.angleDifference}getSVGPathFragment(){if(!this._svgPathFragment){const t=this._anticlockwise?"0":"1";let i;if(this.angleDifference<Math.PI*2-.01)i=this.angleDifference<Math.PI?"0":"1",this._svgPathFragment=`A ${Si(this._radius)} ${Si(this._radius)} 0 ${i} ${t} ${Si(this.end.x)} ${Si(this.end.y)}`;else{const s=(this._startAngle+this._endAngle)/2,r=this._center.plus(we.createPolar(this._radius,s));i="0";const o=`A ${Si(this._radius)} ${Si(this._radius)} 0 ${i} ${t} ${Si(r.x)} ${Si(r.y)}`,c=`A ${Si(this._radius)} ${Si(this._radius)} 0 ${i} ${t} ${Si(this.end.x)} ${Si(this.end.y)}`;this._svgPathFragment=`${o} ${c}`}}return this._svgPathFragment}strokeLeft(e){return[new Bi(this._center,this._radius+(this._anticlockwise?1:-1)*e/2,this._startAngle,this._endAngle,this._anticlockwise)]}strokeRight(e){return[new Bi(this._center,this._radius+(this._anticlockwise?-1:1)*e/2,this._endAngle,this._startAngle,!this._anticlockwise)]}getInteriorExtremaTs(){const e=[];return te.each([0,Math.PI/2,Math.PI,3*Math.PI/2],t=>{if(this.containsAngle(t)){const i=this.tAtAngle(t),s=1e-10;i>s&&i<1-s&&e.push(i)}}),e.sort()}intersection(e){const t=[],s=e.position.minus(this._center),r=e.direction.dot(s),o=s.magnitudeSquared,c=4*r*r-4*(o-this._radius*this._radius);if(c<0)return t;const p=e.direction.dot(this._center)-e.direction.dot(e.position),g=Math.sqrt(c)/2,A=p-g,C=p+g;if(C<0)return t;const D=e.pointAtDistance(C),P=D.minus(this._center).normalized(),F=P.angle;if(A<0)this.containsAngle(F)&&t.push(new gl(C,D,P.negated(),this._anticlockwise?-1:1,this.tAtAngle(F)));else{const K=e.pointAtDistance(A),M=K.minus(this._center).normalized(),U=M.angle;this.containsAngle(U)&&t.push(new gl(A,K,M,this._anticlockwise?1:-1,this.tAtAngle(U))),this.containsAngle(F)&&t.push(new gl(C,D,P.negated(),this._anticlockwise?-1:1,this.tAtAngle(F)))}return t}windingIntersection(e){let t=0;const i=this.intersection(e);return te.each(i,s=>{t+=s.wind}),t}writeToContext(e){e.arc(this._center.x,this._center.y,this._radius,this._startAngle,this._endAngle,this._anticlockwise)}transformed(e){const t=e.timesVector2(we.createPolar(1,this._startAngle)).minus(e.timesVector2(we.ZERO)).angle;let i=e.timesVector2(we.createPolar(1,this._endAngle)).minus(e.timesVector2(we.ZERO)).angle;const s=e.getDeterminant()>=0?this._anticlockwise:!this._anticlockwise;Math.abs(this._endAngle-this._startAngle)===Math.PI*2&&(i=s?t-Math.PI*2:t+Math.PI*2);const r=e.getScaleVector();if(r.x!==r.y){const o=r.x*this._radius,c=r.y*this._radius;return new $s(e.timesVector2(this._center),o,c,0,t,i,s)}else{const o=r.x*this._radius;return new Bi(e.timesVector2(this._center),o,t,i,s)}}getSignedAreaFragment(){const e=this._startAngle,t=this.getActualEndAngle();return .5*this._radius*(this._radius*(t-e)+this._center.x*(Math.sin(t)-Math.sin(e))-this._center.y*(Math.cos(t)-Math.cos(e)))}reversed(){return new Bi(this._center,this._radius,this._endAngle,this._startAngle,!this._anticlockwise)}getArcLength(){return this.getAngleDifference()*this._radius}toPiecewiseLinearOrArcSegments(){return[this]}serialize(){return{type:"Arc",centerX:this._center.x,centerY:this._center.y,radius:this._radius,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}getOverlaps(e,t=1e-6){return e instanceof Bi?Bi.getOverlaps(this,e):null}getConicMatrix(){const e=this.center.x,t=this.center.y,i=1,s=0,r=1,o=-2*e,c=-2*t,p=e*e+t*t-this.radius*this.radius;return nt.rowMajor(i,s/2,o/2,s/2,r,c/2,o/2,c/2,p)}static deserialize(e){return new Bi(new we(e.centerX,e.centerY),e.radius,e.startAngle,e.endAngle,e.anticlockwise)}static computeActualEndAngle(e,t,i){return i?e>t?t:e<t?t-2*Math.PI:e:e<t?t:e>t?t+Math.PI*2:e}static getPartialOverlap(e,t,i,s,r){const o=i<t,c=o?i:t,p=o?t:i,g=c,A=Math.min(e,p);return A<g+1e-8?[]:[nu.createLinear(hs(Un(0,e,0,1,g),0,1),hs(Un(t,i,s,r,g),0,1),hs(Un(0,e,0,1,A),0,1),hs(Un(t,i,s,r,A),0,1))]}static getAngularOverlaps(e,t,i,s){let r=t-e;const o=r<0?-1:1;r*=o;const c=yr(o*(i-e),0,sl),p=o*(s-i)+c;let g;return p<-1e-10?(g=-c/(p-c),Bi.getPartialOverlap(r,c,0,0,g).concat(Bi.getPartialOverlap(r,sl,p+sl,g,1))):p>sl+1e-10?(g=(sl-c)/(p-c),Bi.getPartialOverlap(r,c,sl,0,g).concat(Bi.getPartialOverlap(r,0,p-sl,g,1))):Bi.getPartialOverlap(r,c,p,0,1)}static getOverlaps(e,t){return e._center.distance(t._center)>1e-4||Math.abs(e._radius-t._radius)>1e-4?[]:Bi.getAngularOverlaps(e._startAngle,e.getActualEndAngle(),t._startAngle,t.getActualEndAngle())}static getCircleIntersectionPoint(e,t,i,s){const r=i.minus(e),o=r.magnitude;let c=[];if(!(o<1e-10||o>t+s+1e-10))if(o>t+s-1e-10)c=[e.blend(i,t/o)];else{const p=.5*(o*o-s*s+t*t)/o,g=o*o-s*s+t*t,A=4*o*o*t*t-g*g,C=e.blend(i,p/o);if(A>=1e-10){const D=Math.sqrt(A)/o/2,P=r.perpendicular.setMagnitude(D);c=[C.plus(P),C.minus(P)]}else A>-1e-10&&(c=[C])}return c}static intersect(e,t){const s=[];if(e._center.equalsEpsilon(t._center,1e-7)&&Math.abs(e._radius-t._radius)<1e-7){const r=e.positionAt(0),o=e.positionAt(1),c=t.positionAt(0),p=t.positionAt(1);r.equalsEpsilon(c,1e-7)&&s.push(new Hn(r.average(c),0,0)),r.equalsEpsilon(p,1e-7)&&s.push(new Hn(r.average(p),0,1)),o.equalsEpsilon(c,1e-7)&&s.push(new Hn(o.average(c),1,0)),o.equalsEpsilon(p,1e-7)&&s.push(new Hn(o.average(p),1,1))}else{const r=Bi.getCircleIntersectionPoint(e._center,e._radius,t._center,t._radius);for(let o=0;o<r.length;o++){const c=r[o],p=c.minus(e._center).angle,g=c.minus(t._center).angle;e.containsAngle(p)&&t.containsAngle(g)&&s.push(new Hn(c,e.tAtAngle(p),t.tAtAngle(g)))}}return s}static createFromPoints(e,t,i){const s=sx(e,t,i);if(s===null)return new ri(e,i);{const r=e.minus(s),o=t.minus(s),c=i.minus(s),p=r.angle,g=o.angle,A=c.angle,C=(r.magnitude+o.magnitude+c.magnitude)/3,D=new Bi(s,C,p,A,!1);return D.containsAngle(g)?D:new Bi(s,C,p,A,!0)}}}const uL=nt.rowMajor(1,0,0,0,1,0,0,0,-1);class $s extends Gs{constructor(e,t,i,s,r,o,c){super(),this._center=e,this._radiusX=t,this._radiusY=i,this._rotation=s,this._startAngle=r,this._endAngle=o,this._anticlockwise=c,this.invalidate()}setCenter(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this._center}setRadiusX(e){return this._radiusX!==e&&(this._radiusX=e,this.invalidate()),this}set radiusX(e){this.setRadiusX(e)}get radiusX(){return this.getRadiusX()}getRadiusX(){return this._radiusX}setRadiusY(e){return this._radiusY!==e&&(this._radiusY=e,this.invalidate()),this}set radiusY(e){this.setRadiusY(e)}get radiusY(){return this.getRadiusY()}getRadiusY(){return this._radiusY}setRotation(e){return this._rotation!==e&&(this._rotation=e,this.invalidate()),this}set rotation(e){this.setRotation(e)}get rotation(){return this.getRotation()}getRotation(){return this._rotation}setStartAngle(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}set startAngle(e){this.setStartAngle(e)}get startAngle(){return this.getStartAngle()}getStartAngle(){return this._startAngle}setEndAngle(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}set endAngle(e){this.setEndAngle(e)}get endAngle(){return this.getEndAngle()}getEndAngle(){return this._endAngle}setAnticlockwise(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}set anticlockwise(e){this.setAnticlockwise(e)}get anticlockwise(){return this.getAnticlockwise()}getAnticlockwise(){return this._anticlockwise}positionAt(e){return this.positionAtAngle(this.angleAt(e))}tangentAt(e){return this.tangentAtAngle(this.angleAt(e))}curvatureAt(e){const t=this.angleAt(e),i=this._radiusX*Math.sin(t),s=this._radiusY*Math.cos(t),r=Math.pow(s*s+i*i,3/2);return(this._anticlockwise?-1:1)*this._radiusX*this._radiusY/r}subdivided(e){if(e===0||e===1)return[this];const t=this.angleAt(0),i=this.angleAt(e),s=this.angleAt(1);return[new $s(this._center,this._radiusX,this._radiusY,this._rotation,t,i,this._anticlockwise),new $s(this._center,this._radiusX,this._radiusY,this._rotation,i,s,this._anticlockwise)]}invalidate(){if(this._unitTransform=null,this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._unitArcSegment=null,this._bounds=null,this._svgPathFragment=null,this._radiusX<0&&(this._radiusX=-this._radiusX,this._startAngle=Math.PI-this._startAngle,this._endAngle=Math.PI-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusY<0&&(this._radiusY=-this._radiusY,this._startAngle=-this._startAngle,this._endAngle=-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusX<this._radiusY){this._rotation+=Math.PI/2,this._startAngle-=Math.PI/2,this._endAngle-=Math.PI/2;const e=this._radiusX;this._radiusX=this._radiusY,this._radiusY=e}if(this._radiusX<this._radiusY)throw new Error("Not verified to work if radiusX < radiusY");this.invalidationEmitter.emit()}getUnitTransform(){return this._unitTransform===null&&(this._unitTransform=$s.computeUnitTransform(this._center,this._radiusX,this._radiusY,this._rotation)),this._unitTransform}get unitTransform(){return this.getUnitTransform()}getStart(){return this._start===null&&(this._start=this.positionAtAngle(this._startAngle)),this._start}get start(){return this.getStart()}getEnd(){return this._end===null&&(this._end=this.positionAtAngle(this._endAngle)),this._end}get end(){return this.getEnd()}getStartTangent(){return this._startTangent===null&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this._endTangent===null&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}get endTangent(){return this.getEndTangent()}getActualEndAngle(){return this._actualEndAngle===null&&(this._actualEndAngle=Bi.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}get actualEndAngle(){return this.getActualEndAngle()}getIsFullPerimeter(){return this._isFullPerimeter===null&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=Math.PI*2||this._anticlockwise&&this._startAngle-this._endAngle>=Math.PI*2),this._isFullPerimeter}get isFullPerimeter(){return this.getIsFullPerimeter()}getAngleDifference(){return this._angleDifference===null&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=Math.PI*2)),this._angleDifference}get angleDifference(){return this.getAngleDifference()}getUnitArcSegment(){return this._unitArcSegment===null&&(this._unitArcSegment=new Bi(we.ZERO,1,this._startAngle,this._endAngle,this._anticlockwise)),this._unitArcSegment}get unitArcSegment(){return this.getUnitArcSegment()}getBounds(){if(this._bounds===null&&(this._bounds=Je.NOTHING.withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle)){const e=Math.atan(-(this._radiusY/this._radiusX)*Math.tan(this._rotation)),t=Math.atan(this._radiusY/this._radiusX/Math.tan(this._rotation));this.possibleExtremaAngles=[e,e+Math.PI,t,t+Math.PI],te.each(this.possibleExtremaAngles,this.includeBoundsAtAngle.bind(this))}return this._bounds}get bounds(){return this.getBounds()}getNondegenerateSegments(){if(this._radiusX<=0||this._radiusY<=0||this._startAngle===this._endAngle)return[];if(this._radiusX===this._radiusY){const e=this._startAngle+this._rotation;let t=this._endAngle+this._rotation;return Math.abs(this._endAngle-this._startAngle)===Math.PI*2&&(t=this._anticlockwise?e-Math.PI*2:e+Math.PI*2),[new Bi(this._center,this._radiusX,e,t,this._anticlockwise)]}else return[this]}includeBoundsAtAngle(e){this.unitArcSegment.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this.positionAtAngle(e)))}mapAngle(e){return Math.abs(yr(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(yr(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?w1(e,this._startAngle-2*Math.PI,this._startAngle):yr(e,this._startAngle,this._startAngle+2*Math.PI)}tAtAngle(e){return(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle)}angleAt(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}positionAtAngle(e){return this.getUnitTransform().transformPosition2(we.createPolar(1,e))}tangentAtAngle(e){const t=this.getUnitTransform().transformNormal2(we.createPolar(1,e));return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}offsetTo(e,t){const s=[],r=[];for(let o=0;o<32;o++){let c=o/31;t&&(c=1-c);const p=this.angleAt(c);s.push(this.positionAtAngle(p).plus(this.tangentAtAngle(p).perpendicular.normalized().times(e))),o>0&&r.push(new ri(s[o-1],s[o]))}return r}getSVGPathFragment(){if(!this._svgPathFragment){const t=this._anticlockwise?"0":"1";let i;const s=P1(this._rotation);if(this.getAngleDifference()<Math.PI*2-.01)i=this.getAngleDifference()<Math.PI?"0":"1",this._svgPathFragment=`A ${Si(this._radiusX)} ${Si(this._radiusY)} ${s} ${i} ${t} ${Si(this.getEnd().x)} ${Si(this.getEnd().y)}`;else{const r=(this._startAngle+this._endAngle)/2,o=this.positionAtAngle(r);i="0";const c=`A ${Si(this._radiusX)} ${Si(this._radiusY)} ${s} ${i} ${t} ${Si(o.x)} ${Si(o.y)}`,p=`A ${Si(this._radiusX)} ${Si(this._radiusY)} ${s} ${i} ${t} ${Si(this.getEnd().x)} ${Si(this.getEnd().y)}`;this._svgPathFragment=`${c} ${p}`}}return this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=[];return te.each(this.possibleExtremaAngles,t=>{if(this.unitArcSegment.containsAngle(t)){const i=this.tAtAngle(t),s=1e-10;i>s&&i<1-s&&e.push(i)}}),e.sort()}intersection(e){const t=this.getUnitTransform(),i=t.inverseRay2(e),s=this.getUnitArcSegment().intersection(i);return te.map(s,r=>{const o=t.transformPosition2(r.point),c=e.position.distance(o),p=t.inverseNormal2(r.normal);return new gl(c,o,p,r.wind,r.t)})}windingIntersection(e){const t=this.getUnitTransform().inverseRay2(e);return this.getUnitArcSegment().windingIntersection(t)}writeToContext(e){e.ellipse?e.ellipse(this._center.x,this._center.y,this._radiusX,this._radiusY,this._rotation,this._startAngle,this._endAngle,this._anticlockwise):(this.getUnitTransform().getMatrix().canvasAppendTransform(e),e.arc(0,0,1,this._startAngle,this._endAngle,this._anticlockwise),this.getUnitTransform().getInverse().canvasAppendTransform(e))}transformed(e){const t=e.timesVector2(we.createPolar(this._radiusX,this._rotation)).minus(e.timesVector2(we.ZERO)),i=e.timesVector2(we.createPolar(this._radiusY,this._rotation+Math.PI/2)).minus(e.timesVector2(we.ZERO)),s=t.angle,r=t.magnitude,o=i.magnitude,c=e.getDeterminant()<0,p=c?!this._anticlockwise:this._anticlockwise,g=c?-this._startAngle:this._startAngle;let A=c?-this._endAngle:this._endAngle;return Math.abs(this._endAngle-this._startAngle)===Math.PI*2&&(A=p?g-Math.PI*2:g+Math.PI*2),new $s(e.timesVector2(this._center),r,o,s,g,A,p)}getSignedAreaFragment(){const e=this._startAngle,t=this.getActualEndAngle(),i=Math.sin(e),s=Math.sin(t),r=Math.cos(e),o=Math.cos(t);return .5*(this._radiusX*this._radiusY*(t-e)+Math.cos(this._rotation)*(this._radiusX*this._center.y*(r-o)+this._radiusY*this._center.x*(s-i))+Math.sin(this._rotation)*(this._radiusX*this._center.x*(o-r)+this._radiusY*this._center.y*(s-i)))}reversed(){return new $s(this._center,this._radiusX,this._radiusY,this._rotation,this._endAngle,this._startAngle,!this._anticlockwise)}serialize(){return{type:"EllipticalArc",centerX:this._center.x,centerY:this._center.y,radiusX:this._radiusX,radiusY:this._radiusY,rotation:this._rotation,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}getOverlaps(e,t=1e-6){return e instanceof $s?$s.getOverlaps(this,e):null}getConicMatrix(){const t=$s.computeUnitMatrix(this._center,this._radiusX,this._radiusY,this._rotation).inverted();return t.transposed().multiplyMatrix(uL).multiplyMatrix(t)}static deserialize(e){return new $s(new we(e.centerX,e.centerY),e.radiusX,e.radiusY,e.rotation,e.startAngle,e.endAngle,e.anticlockwise)}static getOverlapType(e,t,i=1e-4){if(e._center.distance(t._center)<i){const s=Math.abs(e._radiusX-t._radiusX)<i&&Math.abs(e._radiusY-t._radiusY)<i,r=Math.abs(e._radiusX-t._radiusY)<i&&Math.abs(e._radiusY-t._radiusX)<i;if(s&&Math.abs(yr(e._rotation-t._rotation+Math.PI/2,0,Math.PI)-Math.PI/2)<i)return Lr.MATCHING_OVERLAP;if(r&&Math.abs(yr(e._rotation-t._rotation,0,Math.PI)-Math.PI/2)<i)return Lr.OPPOSITE_OVERLAP}return Lr.NONE}static getOverlaps(e,t){return $s.getOverlapType(e,t)===Lr.NONE?[]:Bi.getAngularOverlaps(e._startAngle+e._rotation,e.getActualEndAngle()+e._rotation,t._startAngle+t._rotation,t.getActualEndAngle()+t._rotation)}static intersect(e,t,i=1e-10){if($s.getOverlapType(e,t,i)===Lr.NONE)return sn.intersect(e,t);{const r=[],o=e.positionAt(0),c=e.positionAt(1),p=t.positionAt(0),g=t.positionAt(1);return o.equalsEpsilon(p,i)&&r.push(new Hn(o.average(p),0,0)),o.equalsEpsilon(g,i)&&r.push(new Hn(o.average(g),0,1)),c.equalsEpsilon(p,i)&&r.push(new Hn(c.average(p),1,0)),c.equalsEpsilon(g,i)&&r.push(new Hn(c.average(g),1,1)),r}}static computeUnitMatrix(e,t,i,s){return nt.translationFromVector(e).timesMatrix(nt.rotation2(s)).timesMatrix(nt.scaling(t,i))}static computeUnitTransform(e,t,i,s){return new _r($s.computeUnitMatrix(e,t,i,s))}}class Lr extends bn{}Lr.MATCHING_OVERLAP=new Lr;Lr.OPPOSITE_OVERLAP=new Lr;Lr.NONE=new Lr;Lr.enumeration=new br(Lr);let ri=class Kr extends Gs{constructor(e,t){super(),this._start=e,this._end=t,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){return this._start.plus(this._end.minus(this._start).times(e))}tangentAt(e){return this.getStartTangent()}curvatureAt(e){return 0}subdivided(e){if(e===0||e===1)return[this];const t=this.positionAt(e);return[new Kr(this._start,t),new Kr(t,this._end)]}invalidate(){this._tangent=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){return this._tangent===null&&(this._tangent=this._end.minus(this._start).normalized()),this._tangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this.getStartTangent()}get endTangent(){return this.getEndTangent()}getBounds(){return this._bounds===null&&(this._bounds=Je.NOTHING.copy().addPoint(this._start).addPoint(this._end)),this._bounds}get bounds(){return this.getBounds()}getBoundsWithTransform(e){const t=Je.NOTHING.copy();return t.addPoint(e.multiplyVector2(Rm.set(this._start))),t.addPoint(e.multiplyVector2(Rm.set(this._end))),t}getNondegenerateSegments(){return this._start.equals(this._end)?[]:[this]}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`L ${Si(this._end.x)} ${Si(this._end.y)}`),this._svgPathFragment}strokeLeft(e){const t=this.getEndTangent().perpendicular.negated().times(e/2);return[new Kr(this._start.plus(t),this._end.plus(t))]}strokeRight(e){const t=this.getStartTangent().perpendicular.times(e/2);return[new Kr(this._end.plus(t),this._start.plus(t))]}getInteriorExtremaTs(){return[]}intersection(e){const t=[],i=this._start,r=this._end.minus(i);if(r.magnitudeSquared===0)return t;const o=e.direction.y*r.x-e.direction.x*r.y;if(o===0)return t;const c=(e.direction.x*(i.y-e.position.y)-e.direction.y*(i.x-e.position.x))/o;if(c<0||c>=1)return t;const p=(r.x*(i.y-e.position.y)-r.y*(i.x-e.position.x))/o;if(p<1e-8)return t;const g=r.perpendicular,A=i.plus(r.times(c)),C=(g.dot(e.direction)>0?g.negated():g).normalized(),D=e.direction.perpendicular.dot(r)<0?1:-1;return t.push(new gl(p,A,C,D,c)),t}windingIntersection(e){const t=this.intersection(e);return t.length?t[0].wind:0}writeToContext(e){e.lineTo(this._end.x,this._end.y)}transformed(e){return new Kr(e.timesVector2(this._start),e.timesVector2(this._end))}explicitClosestToPoint(e){const t=this._end.minus(this._start);let i=e.minus(this._start).dot(t)/t.magnitudeSquared;i=hs(i,0,1);const s=this.positionAt(i);return[{segment:this,t:i,closestPoint:s,distanceSquared:e.distanceSquared(s)}]}getSignedAreaFragment(){return 1/2*(this._start.x*this._end.y-this._start.y*this._end.x)}reparameterized(e,t){return new Kr(this.positionAt(t),this.positionAt(e+t))}reversed(){return new Kr(this._end,this._start)}polarToCartesian(e){return this._start.x===this._end.x?[new Kr(we.createPolar(this._start.y,this._start.x),we.createPolar(this._end.y,this._end.x))]:this._start.y===this._end.y?[new Bi(we.ZERO,this._start.y,this._start.x,this._end.x,this._start.x>this._end.x)]:this.toPiecewiseLinearSegments(e)}getArcLength(){return this.start.distance(this.end)}toPiecewiseLinearOrArcSegments(){return[this]}serialize(){return{type:"Line",startX:this._start.x,startY:this._start.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e,t=1e-6){return e instanceof Kr?Kr.getOverlaps(this,e):null}getClosestPoints(e){const t=this._end.minus(this._start),i=t.normalized(),s=e.minus(this._start).dot(i),r=hs(s/t.magnitude,0,1),o=this.positionAt(r);return[{segment:this,t:r,closestPoint:o,distanceSquared:o.distanceSquared(e)}]}static deserialize(e){return new Kr(new we(e.startX,e.startY),new we(e.endX,e.endY))}static getOverlaps(e,t,i=1e-6){const s=[],r=e._start.x,o=-1*e._start.x+e._end.x,c=e._start.y,p=-1*e._start.y+e._end.y,g=t._start.x,A=-1*t._start.x+t._end.x,C=t._start.y,D=-1*t._start.y+t._end.y,P=Math.abs(Math.max(e._start.x,e._end.x,t._start.x,t._end.x)-Math.min(e._start.x,e._end.x,t._start.x,t._end.x)),F=Math.abs(Math.max(e._start.y,e._end.y,t._start.y,t._end.y)-Math.min(e._start.y,e._end.y,t._start.y,t._end.y)),K=Gs.polynomialGetOverlapLinear(r,o,g,A),M=Gs.polynomialGetOverlapLinear(c,p,C,D);let U;if(P>F?U=K===null||K===!0?M:K:U=M===null||M===!0?K:M,U===null||U===!0)return s;const $=U.a,re=U.b,pe=g+re*A-r,ce=$*A-o,T=C+re*D-c,Ce=$*D-p;if(Math.abs(pe)>i||Math.abs(ce+pe)>i||Math.abs(T)>i||Math.abs(Ce+T)>i)return s;const ze=re,be=$+re;return ze>1&&be>1||ze<0&&be<0?s:[new nu($,re)]}static intersect(e,t){const i=jI(e.start.x,e.start.y,e.end.x,e.end.y,t.start.x,t.start.y,t.end.x,t.end.y);if(i!==null){const s=e.explicitClosestToPoint(i)[0].t,r=t.explicitClosestToPoint(i)[0].t;return[new Hn(i,s,r)]}else return[]}static intersectOther(e,t){const i=e.end.minus(e.start),s=i.magnitude,r=new Yr(e.start,i.normalize()),o=t.intersection(r),c=[];for(let p=0;p<o.length;p++){const g=o[p],A=g.distance/s;A>1e-8&&A<1-1e-8&&c.push(new Hn(g.point,A,g.t))}return c}};class Rs extends Gs{constructor(e,t,i){super(),this._start=e,this._control=t,this._end=i,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setControl(e){return this._control.equals(e)||(this._control=e,this.invalidate()),this}set control(e){this.setControl(e)}get control(){return this.getControl()}getControl(){return this._control}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){const t=1-e;return this._start.times(t*t).plus(this._control.times(2*t*e)).plus(this._end.times(e*e))}tangentAt(e){return this._control.minus(this._start).times(2*(1-e)).plus(this._end.minus(this._control).times(2*e))}curvatureAt(e){if(Math.abs(e-.5)>.5-1e-7){const i=e<.5,s=i?this._start:this._end,r=this._control,o=i?this._end:this._start,c=r.minus(s),p=c.magnitude;return(i?-1:1)*c.perpendicular.normalized().dot(o.minus(r))*(this.degree-1)/(this.degree*p*p)}else return this.subdivided(e)[0].curvatureAt(1)}subdivided(e){if(e===0||e===1)return[this];const t=this._start.blend(this._control,e),i=this._control.blend(this._end,e),s=t.blend(i,e);return[new Rs(this._start,t,s),new Rs(s,i,this._end)]}invalidate(){this._startTangent=null,this._endTangent=null,this._tCriticalX=null,this._tCriticalY=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){if(this._startTangent===null){const e=this._start.equals(this._control);this._startTangent=e?this._end.minus(this._start).normalized():this._control.minus(this._start).normalized()}return this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){if(this._endTangent===null){const e=this._end.equals(this._control);this._endTangent=e?this._end.minus(this._start).normalized():this._end.minus(this._control).normalized()}return this._endTangent}get endTangent(){return this.getEndTangent()}getTCriticalX(){return this._tCriticalX===null&&(this._tCriticalX=Rs.extremaT(this._start.x,this._control.x,this._end.x)),this._tCriticalX}get tCriticalX(){return this.getTCriticalX()}getTCriticalY(){return this._tCriticalY===null&&(this._tCriticalY=Rs.extremaT(this._start.y,this._control.y,this._end.y)),this._tCriticalY}get tCriticalY(){return this.getTCriticalY()}getNondegenerateSegments(){const e=this._start,t=this._control,i=this._end,s=e.equals(i),r=e.equals(t),o=e.equals(t);if(s&&r)return[];if(s){const c=this.positionAt(.5);return[new ri(e,c),new ri(c,i)]}else if(Wd(e,t,i)){if(r||o)return[new ri(e,i)];const c=i.minus(e),p=t.minus(e).dot(c.normalized())/c.magnitude,g=Rs.extremaT(0,p,1);if(!isNaN(g)&&g>0&&g<1){const A=this.positionAt(g);return te.flatten([new ri(e,A).getNondegenerateSegments(),new ri(A,i).getNondegenerateSegments()])}else return[new ri(e,i)]}else return[this]}getBounds(){if(this._bounds===null){this._bounds=new Je(Math.min(this._start.x,this._end.x),Math.min(this._start.y,this._end.y),Math.max(this._start.x,this._end.x),Math.max(this._start.y,this._end.y));const e=this.getTCriticalX(),t=this.getTCriticalY();!isNaN(e)&&e>0&&e<1&&(this._bounds=this._bounds.withPoint(this.positionAt(e))),!isNaN(t)&&t>0&&t<1&&(this._bounds=this._bounds.withPoint(this.positionAt(t)))}return this._bounds}get bounds(){return this.getBounds()}offsetTo(e,t){let i=[this];const s=5;for(let o=0;o<s;o++)i=te.flatten(te.map(i,c=>c.subdivided(.5)));let r=te.map(i,o=>o.approximateOffset(e));return t&&(r.reverse(),r=te.map(r,o=>o.reversed())),r}degreeElevated(){return new nn(this._start,this._start.plus(this._control.timesScalar(2)).dividedScalar(3),this._end.plus(this._control.timesScalar(2)).dividedScalar(3),this._end)}approximateOffset(e){return new Rs(this._start.plus((this._start.equals(this._control)?this._end.minus(this._start):this._control.minus(this._start)).perpendicular.normalized().times(e)),this._control.plus(this._end.minus(this._start).perpendicular.normalized().times(e)),this._end.plus((this._end.equals(this._control)?this._end.minus(this._start):this._end.minus(this._control)).perpendicular.normalized().times(e)))}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`Q ${Si(this._control.x)} ${Si(this._control.y)} ${Si(this._end.x)} ${Si(this._end.y)}`),this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=[],i=this.getTCriticalX(),s=this.getTCriticalY();return!isNaN(i)&&i>1e-10&&i<1-1e-10&&e.push(this.tCriticalX),!isNaN(s)&&s>1e-10&&s<1-1e-10&&e.push(this.tCriticalY),e.sort()}intersection(e){const t=[],i=nt.rotation2(-e.direction.angle).timesMatrix(nt.translation(-e.position.x,-e.position.y)),s=i.timesVector2(this._start),r=i.timesVector2(this._control),o=i.timesVector2(this._end),c=s.y-2*r.y+o.y,p=-2*s.y+2*r.y,g=s.y,A=pl(c,p,g);return te.each(A,C=>{if(C>=0&&C<=1){const D=this.positionAt(C),P=this.tangentAt(C).normalized(),F=P.perpendicular,K=D.minus(e.position);if(K.dot(e.direction)>0){const M=F.dot(e.direction)>0?F.negated():F,U=e.direction.perpendicular.dot(P)<0?1:-1;t.push(new gl(K.magnitude,D,M,U,C))}}}),t}windingIntersection(e){let t=0;const i=this.intersection(e);return te.each(i,s=>{t+=s.wind}),t}writeToContext(e){e.quadraticCurveTo(this._control.x,this._control.y,this._end.x,this._end.y)}transformed(e){return new Rs(e.timesVector2(this._start),e.timesVector2(this._control),e.timesVector2(this._end))}getSignedAreaFragment(){return 1/6*(this._start.x*(2*this._control.y+this._end.y)+this._control.x*(-2*this._start.y+2*this._end.y)+this._end.x*(-this._start.y-2*this._control.y))}reparameterized(e,t){const i=this._start.plus(this._end.plus(this._control.timesScalar(-2))),s=this._control.minus(this._start).timesScalar(2),r=this._start,o=i.timesScalar(e*e),c=i.timesScalar(e*t).timesScalar(2).plus(s.timesScalar(e)),p=i.timesScalar(t*t).plus(s.timesScalar(t)).plus(r);return new Rs(p,c.timesScalar(.5).plus(p),o.plus(c).plus(p))}reversed(){return new Rs(this._end,this._control,this._start)}serialize(){return{type:"Quadratic",startX:this._start.x,startY:this._start.y,controlX:this._control.x,controlY:this._control.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e,t=1e-6){return e instanceof Rs?Rs.getOverlaps(this,e):null}static deserialize(e){return new Rs(new we(e.startX,e.startY),new we(e.controlX,e.controlY),new we(e.endX,e.endY))}static extremaT(e,t,i){const s=2*(i-2*t+e);return s!==0?-2*(t-e)/s:NaN}static getOverlaps(e,t,i=1e-6){const s=[],r=e._start.x,o=-2*e._start.x+2*e._control.x,c=e._start.x-2*e._control.x+e._end.x,p=e._start.y,g=-2*e._start.y+2*e._control.y,A=e._start.y-2*e._control.y+e._end.y,C=t._start.x,D=-2*t._start.x+2*t._control.x,P=t._start.x-2*t._control.x+t._end.x,F=t._start.y,K=-2*t._start.y+2*t._control.y,M=t._start.y-2*t._control.y+t._end.y,U=Math.abs(Math.max(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)-Math.min(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)),$=Math.abs(Math.max(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)-Math.min(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)),re=Gs.polynomialGetOverlapQuadratic(r,o,c,C,D,P),pe=Gs.polynomialGetOverlapQuadratic(p,g,A,F,K,M);let ce;if(U>$?ce=re===null||re===!0?pe:re:ce=pe===null||pe===!0?re:pe,ce===null||ce===!0)return s;const T=ce.a,Ce=ce.b,ze=T*T,be=Ce*Ce,Be=2*T*Ce,xe=C+Ce*D+be*P-r,Qe=T*D+Be*P-o,Fe=ze*P-c,Ye=F+Ce*K+be*M-p,ut=T*K+Be*M-g,Me=ze*M-A,Lt=wm(2*Fe,Qe),at=wm(2*Me,ut),Pe=te.uniq([0,1].concat(Lt?Lt.filter(ec):[])),$e=te.uniq([0,1].concat(at?at.filter(ec):[]));for(let Mt=0;Mt<Pe.length;Mt++){const Ni=Pe[Mt];if(Math.abs((Fe*Ni+Qe)*Ni+xe)>i)return s}for(let Mt=0;Mt<$e.length;Mt++){const Ni=$e[Mt];if(Math.abs((Me*Ni+ut)*Ni+Ye)>i)return s}const gt=Ce,oi=T+Ce;return gt>1&&oi>1||gt<0&&oi<0?s:[new nu(T,Ce)]}}Rs.prototype.degree=2;class nn extends Gs{constructor(e,t,i,s){super(),this._start=e,this._control1=t,this._control2=i,this._end=s,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setControl1(e){return this._control1.equals(e)||(this._control1=e,this.invalidate()),this}set control1(e){this.setControl1(e)}get control1(){return this.getControl1()}getControl1(){return this._control1}setControl2(e){return this._control2.equals(e)||(this._control2=e,this.invalidate()),this}set control2(e){this.setControl2(e)}get control2(){return this.getControl2()}getControl2(){return this._control2}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){const t=1-e,i=t*t*t,s=3*t*t*e,r=3*t*e*e,o=e*e*e;return new we(this._start.x*i+this._control1.x*s+this._control2.x*r+this._end.x*o,this._start.y*i+this._control1.y*s+this._control2.y*r+this._end.y*o)}tangentAt(e){const t=1-e;return new we(0,0).set(this._start).multiplyScalar(-3*t*t).add(Cd.set(this._control1).multiplyScalar(3*t*t-6*t*e)).add(Cd.set(this._control2).multiplyScalar(6*t*e-3*e*e)).add(Cd.set(this._end).multiplyScalar(3*e*e))}curvatureAt(e){if(Math.abs(e-.5)>.5-1e-7){const i=e<.5,s=i?this._start:this._end,r=i?this._control1:this._control2,o=i?this._control2:this._control1,c=r.minus(s),p=c.magnitude;return(i?-1:1)*c.perpendicular.normalized().dot(o.minus(r))*(this.degree-1)/(this.degree*p*p)}else return this.subdivided(e)[0].curvatureAt(1)}subdivided(e){if(e===0||e===1)return[this];const t=this._start.blend(this._control1,e),i=this._control2.blend(this._end,e),s=this._control1.blend(this._control2,e),r=t.blend(s,e),o=s.blend(i,e),c=r.blend(o,e);return[new nn(this._start,t,r,c),new nn(c,o,i,this._end)]}invalidate(){this._startTangent=null,this._endTangent=null,this._r=null,this._s=null,this._tCusp=null,this._tDeterminant=null,this._tInflection1=null,this._tInflection2=null,this._quadratics=null,this._xExtremaT=null,this._yExtremaT=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){return this._startTangent===null&&(this._startTangent=this.tangentAt(0).normalized()),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this._endTangent===null&&(this._endTangent=this.tangentAt(1).normalized()),this._endTangent}get endTangent(){return this.getEndTangent()}getR(){return this._r===null&&(this._r=this._control1.minus(this._start).normalized()),this._r}get r(){return this.getR()}getS(){return this._s===null&&(this._s=this.getR().perpendicular),this._s}get s(){return this.getS()}getTCusp(){return this._tCusp===null&&this.computeCuspInfo(),this._tCusp}get tCusp(){return this.getTCusp()}getTDeterminant(){return this._tDeterminant===null&&this.computeCuspInfo(),this._tDeterminant}get tDeterminant(){return this.getTDeterminant()}getTInflection1(){return this._tInflection1===null&&this.computeCuspInfo(),this._tInflection1}get tInflection1(){return this.getTInflection1()}getTInflection2(){return this._tInflection2===null&&this.computeCuspInfo(),this._tInflection2}get tInflection2(){return this.getTInflection2()}getQuadratics(){return this._quadratics===null&&this.computeCuspSegments(),this._quadratics}getXExtremaT(){return this._xExtremaT===null&&(this._xExtremaT=nn.extremaT(this._start.x,this._control1.x,this._control2.x,this._end.x)),this._xExtremaT}get xExtremaT(){return this.getXExtremaT()}getYExtremaT(){return this._yExtremaT===null&&(this._yExtremaT=nn.extremaT(this._start.y,this._control1.y,this._control2.y,this._end.y)),this._yExtremaT}get yExtremaT(){return this.getYExtremaT()}getBounds(){return this._bounds===null&&(this._bounds=Je.NOTHING,this._bounds=this._bounds.withPoint(this._start),this._bounds=this._bounds.withPoint(this._end),te.each(this.getXExtremaT(),e=>{e>=0&&e<=1&&(this._bounds=this._bounds.withPoint(this.positionAt(e)))}),te.each(this.getYExtremaT(),e=>{e>=0&&e<=1&&(this._bounds=this._bounds.withPoint(this.positionAt(e)))}),this.hasCusp()&&(this._bounds=this._bounds.withPoint(this.positionAt(this.getTCusp())))),this._bounds}get bounds(){return this.getBounds()}computeCuspInfo(){const e=this._start.times(-1).plus(this._control1.times(3)).plus(this._control2.times(-3)).plus(this._end),t=this._start.times(3).plus(this._control1.times(-6)).plus(this._control2.times(3)),i=this._start.times(-3).plus(this._control1.times(3)),s=e.perpendicular,r=t.perpendicular,o=s.dot(t);if(this._tCusp=-.5*(s.dot(i)/o),this._tDeterminant=this._tCusp*this._tCusp-1/3*(r.dot(i)/o),this._tDeterminant>=0){const c=Math.sqrt(this._tDeterminant);this._tInflection1=this._tCusp-c,this._tInflection2=this._tCusp+c}else this._tInflection1=NaN,this._tInflection2=NaN}computeCuspSegments(){if(this.hasCusp()){this._quadratics=[];const e=this.getTCusp();if(e===0)this._quadratics.push(new Rs(this.start,this.control2,this.end));else if(e===1)this._quadratics.push(new Rs(this.start,this.control1,this.end));else{const t=this.subdivided(e);this._quadratics.push(new Rs(t[0].start,t[0].control1,t[0].end)),this._quadratics.push(new Rs(t[1].start,t[1].control2,t[1].end))}}else this._quadratics=null}getNondegenerateSegments(){const e=this._start,t=this._control1,i=this._control2,s=this._end,r=this.degreeReduced(1e-9);if(e.equals(s)&&e.equals(t)&&e.equals(i))return[];if(this.hasCusp())return te.flatten(this.getQuadratics().map(o=>o.getNondegenerateSegments()));if(r)return r.getNondegenerateSegments();if(Wd(e,t,s)&&Wd(e,i,s)&&!e.equalsEpsilon(s,1e-7)){const o=this.getXExtremaT().concat(this.getYExtremaT()).sort().map(g=>this.positionAt(g)),c=[];let p=e;o.length&&(c.push(new ri(e,o[0])),p=o[0]);for(let g=1;g<o.length;g++)c.push(new ri(o[g-1],o[g])),p=o[g];return c.push(new ri(p,s)),te.flatten(c.map(g=>g.getNondegenerateSegments()))}else return[this]}hasCusp(){const e=this.getTCusp();return e>=0&&e<=1&&this.tangentAt(e).magnitude<1e-7}toRS(e){const t=e.minus(this._start);return new we(t.dot(this.getR()),t.dot(this.getS()))}offsetTo(e,t){const s=[],r=[];for(let o=0;o<32;o++){let c=o/31;t&&(c=1-c),s.push(this.positionAt(c).plus(this.tangentAt(c).perpendicular.normalized().times(e))),o>0&&r.push(new ri(s[o-1],s[o]))}return r}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`C ${Si(this._control1.x)} ${Si(this._control1.y)} ${Si(this._control2.x)} ${Si(this._control2.y)} ${Si(this._end.x)} ${Si(this._end.y)}`),this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=this.getXExtremaT().concat(this.getYExtremaT()),t=[];return te.each(e,i=>{i>1e-10&&i<1-1e-10&&te.every(t,r=>Math.abs(i-r)>1e-10)&&t.push(i)}),t.sort()}intersection(e){const t=[],i=nt.rotation2(-e.direction.angle).timesMatrix(nt.translation(-e.position.x,-e.position.y)),s=i.timesVector2(this._start),r=i.timesVector2(this._control1),o=i.timesVector2(this._control2),c=i.timesVector2(this._end),p=-s.y+3*r.y-3*o.y+c.y,g=3*s.y-6*r.y+3*o.y,A=-3*s.y+3*r.y,C=s.y,D=rx(p,g,A,C);return te.each(D,P=>{if(P>=0&&P<=1){const F=this.positionAt(P),K=this.tangentAt(P).normalized(),M=K.perpendicular,U=F.minus(e.position);if(U.dot(e.direction)>0){const $=M.dot(e.direction)>0?M.negated():M,re=e.direction.perpendicular.dot(K)<0?1:-1;t.push(new gl(U.magnitude,F,$,re,P))}}}),t}windingIntersection(e){let t=0;const i=this.intersection(e);return te.each(i,s=>{t+=s.wind}),t}writeToContext(e){e.bezierCurveTo(this._control1.x,this._control1.y,this._control2.x,this._control2.y,this._end.x,this._end.y)}transformed(e){return new nn(e.timesVector2(this._start),e.timesVector2(this._control1),e.timesVector2(this._control2),e.timesVector2(this._end))}degreeReduced(e){e=e||0;const t=Cd.set(this._control1).multiplyScalar(3).subtract(this._start).divideScalar(2),i=Rm.set(this._control2).multiplyScalar(3).subtract(this._end).divideScalar(2);return lL.set(t).subtract(i).magnitude<=e?new Rs(this._start,t.average(i),this._end):null}getSignedAreaFragment(){return 1/20*(this._start.x*(6*this._control1.y+3*this._control2.y+this._end.y)+this._control1.x*(-6*this._start.y+3*this._control2.y+3*this._end.y)+this._control2.x*(-3*this._start.y-3*this._control1.y+6*this._end.y)+this._end.x*(-this._start.y-3*this._control1.y-6*this._control2.y))}reversed(){return new nn(this._end,this._control2,this._control1,this._start)}getSelfIntersection(){const e=this.getInteriorExtremaTs(),t=[0].concat(e).concat([1]),i=this.subdivisions(e);if(i.length<3)return null;for(let s=0;s<i.length;s++){const r=i[s];for(let o=s+1;o<i.length;o++){const c=i[o],p=sn.intersect(r,c);if(p.length){const g=p[0];if(g.aT>1e-7&&g.aT<1-1e-7&&g.bT>1e-7&&g.bT<1-1e-7){const A=t[s]+g.aT*(t[s+1]-t[s]),C=t[o]+g.bT*(t[o+1]-t[o]);return new Hn(g.point,A,C)}}}}return null}serialize(){return{type:"Cubic",startX:this._start.x,startY:this._start.y,control1X:this._control1.x,control1Y:this._control1.y,control2X:this._control2.x,control2Y:this._control2.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e,t=1e-6){return e instanceof nn?nn.getOverlaps(this,e):null}static deserialize(e){return new nn(new we(e.startX,e.startY),new we(e.control1X,e.control1Y),new we(e.control2X,e.control2Y),new we(e.endX,e.endY))}static extremaT(e,t,i,s){if(e===t&&e===i&&e===s)return[];const r=-3*e+9*t-9*i+3*s,o=6*e-12*t+6*i,c=-3*e+3*t;return te.filter(pl(r,o,c),ec)}static getOverlaps(e,t,i=1e-6){const s=[],r=e._start.x,o=-3*e._start.x+3*e._control1.x,c=3*e._start.x-6*e._control1.x+3*e._control2.x,p=-1*e._start.x+3*e._control1.x-3*e._control2.x+e._end.x,g=e._start.y,A=-3*e._start.y+3*e._control1.y,C=3*e._start.y-6*e._control1.y+3*e._control2.y,D=-1*e._start.y+3*e._control1.y-3*e._control2.y+e._end.y,P=t._start.x,F=-3*t._start.x+3*t._control1.x,K=3*t._start.x-6*t._control1.x+3*t._control2.x,M=-1*t._start.x+3*t._control1.x-3*t._control2.x+t._end.x,U=t._start.y,$=-3*t._start.y+3*t._control1.y,re=3*t._start.y-6*t._control1.y+3*t._control2.y,pe=-1*t._start.y+3*t._control1.y-3*t._control2.y+t._end.y,ce=Math.abs(Math.max(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)-Math.min(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)),T=Math.abs(Math.max(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)-Math.min(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)),Ce=Gs.polynomialGetOverlapCubic(r,o,c,p,P,F,K,M),ze=Gs.polynomialGetOverlapCubic(g,A,C,D,U,$,re,pe);let be;if(ce>T?be=Ce===null||Ce===!0?ze:Ce:be=ze===null||ze===!0?Ce:ze,be===null||be===!0)return s;const Be=be.a,xe=be.b,Qe=Be*Be,Fe=Be*Be*Be,Ye=xe*xe,ut=xe*xe*xe,Me=2*Be*xe,Lt=3*Be*Ye,at=3*Qe*xe,Pe=P+xe*F+Ye*K+ut*M-r,$e=Be*F+Me*K+Lt*M-o,gt=Qe*K+at*M-c,oi=Fe*M-p,Mt=U+xe*$+Ye*re+ut*pe-g,Ni=Be*$+Me*re+Lt*pe-A,qt=Qe*re+at*pe-C,as=Fe*pe-D,qi=pl(3*oi,2*gt,$e),Vs=pl(3*as,2*qt,Ni),Gt=te.uniq([0,1].concat(qi!==null?qi.filter(ec):[])),fi=te.uniq([0,1].concat(Vs!==null?Vs.filter(ec):[]));for(let Ps=0;Ps<Gt.length;Ps++){const Ki=Gt[Ps];if(Math.abs(((oi*Ki+gt)*Ki+$e)*Ki+Pe)>i)return s}for(let Ps=0;Ps<fi.length;Ps++){const Ki=fi[Ps];if(Math.abs(((as*Ki+qt)*Ki+Ni)*Ki+Mt)>i)return s}const ft=xe,vn=Be+xe;return ft>1&&vn>1||ft<0&&vn<0?s:[new nu(Be,xe)]}}nn.prototype.degree=3;const wh={lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:[],lineDashOffset:0,miterLimit:10};class oc{constructor(e){const t=dn({},wh,e);this.lineWidth=t.lineWidth,this.lineCap=t.lineCap,this.lineJoin=t.lineJoin,this.lineDash=t.lineDash,this.lineDashOffset=t.lineDashOffset,this.miterLimit=t.miterLimit}equals(e){if(!(this.lineWidth===e.lineWidth&&this.lineCap===e.lineCap&&this.lineJoin===e.lineJoin&&this.miterLimit===e.miterLimit&&this.lineDashOffset===e.lineDashOffset))return!1;if(this.lineDash.length===e.lineDash.length){for(let i=0;i<this.lineDash.length;i++)if(this.lineDash[i]!==e.lineDash[i])return!1}else return!1;return!0}copy(){return new oc({lineWidth:this.lineWidth,lineCap:this.lineCap,lineJoin:this.lineJoin,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,miterLimit:this.miterLimit})}leftJoin(e,t,i){t=t.normalized(),i=i.normalized();const s=e.plus(t.perpendicular.negated().times(this.lineWidth/2)),r=e.plus(i.perpendicular.negated().times(this.lineWidth/2)),o=s.equals(r)?[]:[new ri(s,r)];let c,p,g;if(t.perpendicular.dot(i)>1e-12)switch(this.lineJoin){case"round":return c=t.angle+Math.PI/2,p=i.angle+Math.PI/2,[new Bi(e,this.lineWidth/2,c,p,!0)];case"miter":if(g=t.angleBetween(i.negated()),1/Math.sin(g/2)<=this.miterLimit&&g<Math.PI-1e-5){const A=V0(s,s.plus(t),r,r.plus(i));return A?[new ri(s,A),new ri(A,r)]:[new ri(s,r)]}else return o;case"bevel":return o;default:throw new Error(`invalid lineJoin: ${this.lineJoin}`)}else return o}rightJoin(e,t,i){return this.leftJoin(e,i.negated(),t.negated())}cap(e,t){t=t.normalized();const i=e.plus(t.perpendicular.times(-this.lineWidth/2)),s=e.plus(t.perpendicular.times(this.lineWidth/2));let r,o,c,p,g,A;switch(this.lineCap){case"butt":return[new ri(i,s)];case"round":return r=t.angle,[new Bi(e,this.lineWidth/2,r+Math.PI/2,r-Math.PI/2,!0)];case"square":return o=t.perpendicular.negated().times(this.lineWidth/2),c=t.perpendicular.times(this.lineWidth/2),p=t.times(this.lineWidth/2),g=e.plus(o).plus(p),A=e.plus(c).plus(p),[new ri(i,g),new ri(g,A),new ri(A,s)];default:throw new Error(`invalid lineCap: ${this.lineCap}`)}}}class Yi{constructor(e,t,i){if(this.segments=[],this.invalidatedEmitter=new Ai,this._bounds=null,this._strokedSubpaths=null,this._strokedSubpathsComputed=!1,this._strokedStyles=null,this._invalidatingPoints=!1,this.points=t||(e&&e.length?te.map(e,s=>s.start).concat(e[e.length-1].end):[]),this.closed=!!i,this._invalidateListener=this.invalidate.bind(this),e)for(let s=0;s<e.length;s++)te.each(e[s].getNondegenerateSegments(),r=>{this.addSegmentDirectly(r)})}getBounds(){if(this._bounds===null){const e=Je.NOTHING.copy();te.each(this.segments,t=>{e.includeBounds(t.getBounds())}),this._bounds=e}return this._bounds}get bounds(){return this.getBounds()}getArcLength(e,t,i){let s=0;for(let r=0;r<this.segments.length;r++)s+=this.segments[r].getArcLength(e,t,i);return s}copy(){return new Yi(this.segments.slice(0),this.points.slice(0),this.closed)}invalidatePoints(){this._invalidatingPoints=!0;const e=this.segments.length;for(let t=0;t<e;t++)this.segments[t].invalidate();this._invalidatingPoints=!1,this.invalidate()}invalidate(){this._invalidatingPoints||(this._bounds=null,this._strokedSubpathsComputed=!1,this.invalidatedEmitter.emit())}addPoint(e){return this.points.push(e),this}addSegmentDirectly(e){return this.segments.push(e),e.invalidationEmitter.addListener(this._invalidateListener),this}addSegment(e){const i=e.getNondegenerateSegments().length;for(let s=0;s<i;s++)this.addSegmentDirectly(e);return this.invalidate(),this}addClosingSegment(){if(this.hasClosingSegment()){const e=this.getClosingSegment();this.addSegmentDirectly(e),this.invalidate(),this.addPoint(this.getFirstPoint()),this.closed=!0}}close(){this.closed=!0,this.addClosingSegment()}getLength(){return this.points.length}getFirstPoint(){return te.first(this.points)}getLastPoint(){return te.last(this.points)}getFirstSegment(){return te.first(this.segments)}getLastSegment(){return te.last(this.segments)}getFillSegments(){const e=this.segments.slice();return this.hasClosingSegment()&&e.push(this.getClosingSegment()),e}isDrawable(){return this.segments.length>0}isClosed(){return this.closed}hasClosingSegment(){return!this.getFirstPoint().equalsEpsilon(this.getLastPoint(),1e-9)}getClosingSegment(){return new ri(this.getLastPoint(),this.getFirstPoint())}getClosestPoints(e){return Gs.filterClosestToPointResult(te.flatten(this.segments.map(t=>t.getClosestPoints(e))))}writeToContext(e){if(this.isDrawable()){const t=this.getFirstSegment().start;e.moveTo(t.x,t.y);let i=this.segments.length;this.closed&&i>=2&&this.segments[i-1]instanceof ri&&i--;for(let s=0;s<i;s++)this.segments[s].writeToContext(e);this.closed&&e.closePath()}}toPiecewiseLinear(e){return new Yi(te.flatten(te.map(this.segments,t=>t.toPiecewiseLinearSegments(e))),void 0,this.closed)}transformed(e){return new Yi(te.map(this.segments,t=>t.transformed(e)),te.map(this.points,t=>e.timesVector2(t)),this.closed)}nonlinearTransformed(e){return new Yi(te.flatten(te.map(this.segments,t=>e.methodName&&t[e.methodName]?t[e.methodName](e):t.toPiecewiseLinearSegments(e))),void 0,this.closed)}getBoundsWithTransform(e){const t=Je.NOTHING.copy(),i=this.segments.length;for(let s=0;s<i;s++)t.includeBounds(this.segments[s].getBoundsWithTransform(e));return t}offset(e){if(!this.isDrawable())return new Yi([],void 0,this.closed);if(e===0)return new Yi(this.segments.slice(),void 0,this.closed);let t;const i=this.segments.slice(),s=[];for(t=0;t<i.length;t++)s.push(i[t].strokeLeft(2*e));let r=[];for(t=0;t<i.length;t++){if(this.closed||t>0){const o=(t>0?t:i.length)-1,c=i[t].start,p=i[o].endTangent,g=i[t].startTangent,A=p.perpendicular.negated().times(e).angle,C=g.perpendicular.negated().times(e).angle,D=p.perpendicular.dot(g)>0;r.push(new Bi(c,Math.abs(e),A,C,D))}r=r.concat(s[t])}return new Yi(r,void 0,this.closed)}stroked(e){if(!this.isDrawable())return[];if(e===void 0&&(e=new oc),this._strokedSubpathsComputed&&this._strokedStyles.equals(e))return this._strokedSubpaths;const t=e.lineWidth;let i,s=[],r=[];const o=this.getFirstSegment(),c=this.getLastSegment(),p=P=>{s=s.concat(P)},g=P=>{r=r.concat(P)},A=c.end.equals(o.start),C=A?null:new ri(this.segments[this.segments.length-1].end,this.segments[0].start);for(i=0;i<this.segments.length;i++)i>0&&p(e.leftJoin(this.segments[i].start,this.segments[i-1].endTangent,this.segments[i].startTangent)),p(this.segments[i].strokeLeft(t));for(i=this.segments.length-1;i>=0;i--)i<this.segments.length-1&&g(e.rightJoin(this.segments[i].end,this.segments[i].endTangent,this.segments[i+1].startTangent)),g(this.segments[i].strokeRight(t));let D;return this.closed?(A?(p(e.leftJoin(c.end,c.endTangent,o.startTangent)),g(e.rightJoin(c.end,c.endTangent,o.startTangent))):(p(e.leftJoin(C.start,c.endTangent,C.startTangent)),p(C.strokeLeft(t)),p(e.leftJoin(C.end,C.endTangent,o.startTangent)),g(e.rightJoin(C.end,C.endTangent,o.startTangent)),g(C.strokeRight(t)),g(e.rightJoin(C.start,c.endTangent,C.startTangent))),D=[new Yi(s,void 0,!0),new Yi(r,void 0,!0)]):D=[new Yi(s.concat(e.cap(c.end,c.endTangent)).concat(r).concat(e.cap(o.start,o.startTangent.negated())),void 0,!0)],this._strokedSubpaths=D,this._strokedSubpathsComputed=!0,this._strokedStyles=e.copy(),D}dashed(e,t,i,s){const r=(p,g)=>{const A=p[p.length-1].concat(g[0]);return p.slice(0,p.length-1).concat([A]).concat(g.slice(1))},o=(p,g)=>{if(!p.hasRightFilled||!g.hasLeftFilled)return!1;const A=te.last(te.last(p.segmentArrays)),C=g.segmentArrays[0][0];return A.end.distance(C.start)<1e-5},c=[];for(let p=0;p<this.segments.length;p++){const g=this.segments[p],A=g.getDashValues(e,t,i,s);c.push(A),t+=A.arcLength;const C=[0].concat(A.values).concat([1]),D=A.initiallyInside;A.hasLeftFilled=D,A.hasRightFilled=C.length%2===0?D:!D,A.segmentArrays=[];for(let P=D?0:1;P<C.length-1;P+=2)C[P]!==C[P+1]&&A.segmentArrays.push([g.slice(C[P],C[P+1])])}for(let p=c.length-1;p>=1;p--){const g=c[p-1],A=c[p];o(g,A)&&c.splice(p-1,2,{segmentArrays:r(g.segmentArrays,A.segmentArrays),hasLeftFilled:g.hasLeftFilled,hasRightFilled:A.hasRightFilled})}if(c.length>1&&o(c[c.length-1],c[0])){const p=c.pop(),g=c.shift();c.push({segmentArrays:r(p.segmentArrays,g.segmentArrays),hasLeftFilled:p.hasLeftFilled,hasRightFilled:g.hasRightFilled})}return this.closed&&c.length===1&&c[0].segmentArrays.length===1&&c[0].hasLeftFilled&&c[0].hasRightFilled?[new Yi(c[0].segmentArrays[0],void 0,!0)]:te.flatten(c.map(p=>p.segmentArrays)).map(p=>new Yi(p))}static fromBoundary(e){const t=[];for(let i=0;i<e.halfEdges.length;i++)t.push(e.halfEdges[i].getDirectionalSegment());return new Yi(t,void 0,!0)}static fromLoop(e){const t=[];for(let i=0;i<e.halfEdges.length;i++)t.push(e.halfEdges[i].getDirectionalSegment());return new Yi(t,void 0,e.closed)}serialize(){return{type:"Subpath",segments:this.segments.map(e=>e.serialize()),points:this.points.map(e=>({x:e.x,y:e.y})),closed:this.closed}}static deserialize(e){return new Yi(e.segments.map(Gs.deserialize),e.points.map(t=>new we(t.x,t.y)),e.closed)}}function cv(n){return'"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}const O0={parse:function(n,e){const t={svgPath:c,movetoDrawtoCommandGroups:p,movetoDrawtoCommandGroup:g,drawtoCommands:A,drawtoCommand:C,moveto:D,movetoArgumentSequence:P,closepath:F,lineto:K,linetoArgumentSequence:M,horizontalLineto:U,horizontalLinetoArgumentSequence:$,verticalLineto:re,verticalLinetoArgumentSequence:pe,curveto:ce,curvetoArgumentSequence:T,curvetoArgument:Ce,smoothCurveto:ze,smoothCurvetoArgumentSequence:be,smoothCurvetoArgument:Be,quadraticBezierCurveto:xe,quadraticBezierCurvetoArgumentSequence:Qe,quadraticBezierCurvetoArgument:Fe,smoothQuadraticBezierCurveto:Ye,smoothQuadraticBezierCurvetoArgumentSequence:ut,ellipticalArc:Me,ellipticalArcArgumentSequence:Lt,ellipticalArcArgument:at,coordinatePair:Pe,nonnegativeNumber:$e,number:gt,flag:oi,commaWsp:Mt,comma:Ni,floatingPointConstant:qt,fractionalConstant:as,exponent:qi,sign:Vs,digitSequence:Gt,digit:fi,wsp:ft};if(e!==void 0){if(t[e]===void 0)throw new Error("Invalid rule name: "+cv(e)+".")}else e="svgPath";let i=0,s=0,r=[];function o(V){i<s||(i>s&&(s=i,r=[]),r.push(V))}function c(){let V,ae,le,me,ve,rt;for(ve=i,rt=i,V=[],ae=ft();ae!==null;)V.push(ae),ae=ft();if(V!==null)if(ae=p(),ae=ae!==null?ae:"",ae!==null){for(le=[],me=ft();me!==null;)le.push(me),me=ft();le!==null?V=[V,ae,le]:(V=null,i=rt)}else V=null,i=rt;else V=null,i=rt;return V!==null&&(V=function(Ue,je){return je||[]}(ve,V[1])),V===null&&(i=ve),V}function p(){let V,ae,le,me,ve;if(me=i,ve=i,V=g(),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=p(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;return V!==null&&(V=function(rt,Ue,je){return Ue.concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=g(),V!==null&&(V=function(rt,Ue){return Ue}(me,V)),V===null&&(i=me)),V}function g(){let V,ae,le,me,ve;if(me=i,ve=i,V=D(),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=A(),le=le!==null?le:"",le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;return V!==null&&(V=function(rt,Ue,je){return je.length?Ue.concat(je):Ue}(me,V[0],V[2])),V===null&&(i=me),V}function A(){let V,ae,le,me,ve;if(me=i,ve=i,V=C(),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=A(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;return V!==null&&(V=function(rt,Ue,je){return Ue.concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=C(),V!==null&&(V=function(rt,Ue){return Ue}(me,V)),V===null&&(i=me)),V}function C(){let V;return V=F(),V===null&&(V=K(),V===null&&(V=U(),V===null&&(V=re(),V===null&&(V=ce(),V===null&&(V=ze(),V===null&&(V=xe(),V===null&&(V=Ye(),V===null&&(V=Me())))))))),V}function D(){let V,ae,le,me,ve;if(me=i,ve=i,n.charCodeAt(i)===77?(V="M",i++):(V=null,o('"M"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=P(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;if(V!==null&&(V=function(rt,Ue){return Ki(Ue,!1)}(me,V[2])),V===null&&(i=me),V===null){if(me=i,ve=i,n.charCodeAt(i)===109?(V="m",i++):(V=null,o('"m"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=P(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;V!==null&&(V=function(rt,Ue){return Ki(Ue,!0)}(me,V[2])),V===null&&(i=me)}return V}function P(){let V,ae,le,me,ve;return me=i,ve=i,V=Pe(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=M(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue].concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=Pe(),V!==null&&(V=function(rt,Ue){return[Ue]}(me,V)),V===null&&(i=me)),V}function F(){let V,ae;return ae=i,n.charCodeAt(i)===90?(V="Z",i++):(V=null,o('"Z"')),V===null&&(n.charCodeAt(i)===122?(V="z",i++):(V=null,o('"z"'))),V!==null&&(V=function(le,me){return{cmd:"close"}}()),V===null&&(i=ae),V}function K(){let V,ae,le,me,ve;if(me=i,ve=i,n.charCodeAt(i)===76?(V="L",i++):(V=null,o('"L"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=M(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;if(V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"lineTo",args:[je.x,je.y]}))}(me,V[2])),V===null&&(i=me),V===null){if(me=i,ve=i,n.charCodeAt(i)===108?(V="l",i++):(V=null,o('"l"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=M(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"lineToRelative",args:[je.x,je.y]}))}(me,V[2])),V===null&&(i=me)}return V}function M(){let V,ae,le,me,ve;return me=i,ve=i,V=Pe(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=M(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue].concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=Pe(),V!==null&&(V=function(rt,Ue){return[Ue]}(me,V)),V===null&&(i=me)),V}function U(){let V,ae,le,me,ve;if(me=i,ve=i,n.charCodeAt(i)===72?(V="H",i++):(V=null,o('"H"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=$(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;if(V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"horizontalLineTo",args:[je]}))}(me,V[2])),V===null&&(i=me),V===null){if(me=i,ve=i,n.charCodeAt(i)===104?(V="h",i++):(V=null,o('"h"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=$(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"horizontalLineToRelative",args:[je]}))}(me,V[2])),V===null&&(i=me)}return V}function $(){let V,ae,le,me,ve;return me=i,ve=i,V=gt(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=$(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue].concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=gt(),V!==null&&(V=function(rt,Ue){return[Ue]}(me,V)),V===null&&(i=me)),V}function re(){let V,ae,le,me,ve;if(me=i,ve=i,n.charCodeAt(i)===86?(V="V",i++):(V=null,o('"V"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=pe(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;if(V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"verticalLineTo",args:[je]}))}(me,V[2])),V===null&&(i=me),V===null){if(me=i,ve=i,n.charCodeAt(i)===118?(V="v",i++):(V=null,o('"v"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=pe(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"verticalLineToRelative",args:[je]}))}(me,V[2])),V===null&&(i=me)}return V}function pe(){let V,ae,le,me,ve;return me=i,ve=i,V=gt(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=pe(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue].concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=gt(),V!==null&&(V=function(rt,Ue){return[Ue]}(me,V)),V===null&&(i=me)),V}function ce(){let V,ae,le,me,ve;if(me=i,ve=i,n.charCodeAt(i)===67?(V="C",i++):(V=null,o('"C"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=T(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;if(V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"cubicCurveTo",args:je}))}(me,V[2])),V===null&&(i=me),V===null){if(me=i,ve=i,n.charCodeAt(i)===99?(V="c",i++):(V=null,o('"c"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=T(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"cubicCurveToRelative",args:je}))}(me,V[2])),V===null&&(i=me)}return V}function T(){let V,ae,le,me,ve;return me=i,ve=i,V=Ce(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=T(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue].concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=Ce(),V!==null&&(V=function(rt,Ue){return[Ue]}(me,V)),V===null&&(i=me)),V}function Ce(){let V,ae,le,me,ve,rt,Ue;return rt=i,Ue=i,V=Pe(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=Pe(),le!==null?(me=Mt(),me=me!==null?me:"",me!==null?(ve=Pe(),ve!==null?V=[V,ae,le,me,ve]:(V=null,i=Ue)):(V=null,i=Ue)):(V=null,i=Ue)):(V=null,i=Ue)):(V=null,i=Ue),V!==null&&(V=function(je,xn,Rt,a){return[xn.x,xn.y,Rt.x,Rt.y,a.x,a.y]}(rt,V[0],V[2],V[4])),V===null&&(i=rt),V}function ze(){let V,ae,le,me,ve;if(me=i,ve=i,n.charCodeAt(i)===83?(V="S",i++):(V=null,o('"S"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=be(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;if(V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"smoothCubicCurveTo",args:je}))}(me,V[2])),V===null&&(i=me),V===null){if(me=i,ve=i,n.charCodeAt(i)===115?(V="s",i++):(V=null,o('"s"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=be(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"smoothCubicCurveToRelative",args:je}))}(me,V[2])),V===null&&(i=me)}return V}function be(){let V,ae,le,me,ve;return me=i,ve=i,V=Be(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=be(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue].concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=Be(),V!==null&&(V=function(rt,Ue){return[Ue]}(me,V)),V===null&&(i=me)),V}function Be(){let V,ae,le,me,ve;return me=i,ve=i,V=Pe(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=Pe(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue.x,Ue.y,je.x,je.y]}(me,V[0],V[2])),V===null&&(i=me),V}function xe(){let V,ae,le,me,ve;if(me=i,ve=i,n.charCodeAt(i)===81?(V="Q",i++):(V=null,o('"Q"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=Qe(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;if(V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"quadraticCurveTo",args:je}))}(me,V[2])),V===null&&(i=me),V===null){if(me=i,ve=i,n.charCodeAt(i)===113?(V="q",i++):(V=null,o('"q"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=Qe(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"quadraticCurveToRelative",args:je}))}(me,V[2])),V===null&&(i=me)}return V}function Qe(){let V,ae,le,me,ve;return me=i,ve=i,V=Fe(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=Qe(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue].concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=Fe(),V!==null&&(V=function(rt,Ue){return[Ue]}(me,V)),V===null&&(i=me)),V}function Fe(){let V,ae,le,me,ve;return me=i,ve=i,V=Pe(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=Pe(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue.x,Ue.y,je.x,je.y]}(me,V[0],V[2])),V===null&&(i=me),V}function Ye(){let V,ae,le,me,ve;if(me=i,ve=i,n.charCodeAt(i)===84?(V="T",i++):(V=null,o('"T"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=ut(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;if(V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"smoothQuadraticCurveTo",args:[je.x,je.y]}))}(me,V[2])),V===null&&(i=me),V===null){if(me=i,ve=i,n.charCodeAt(i)===116?(V="t",i++):(V=null,o('"t"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=ut(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;V!==null&&(V=function(rt,Ue){return Ue.map(je=>({cmd:"smoothQuadraticCurveToRelative",args:[je.x,je.y]}))}(me,V[2])),V===null&&(i=me)}return V}function ut(){let V,ae,le,me,ve;return me=i,ve=i,V=Pe(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=ut(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue].concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=Pe(),V!==null&&(V=function(rt,Ue){return[Ue]}(me,V)),V===null&&(i=me)),V}function Me(){let V,ae,le,me,ve;if(me=i,ve=i,n.charCodeAt(i)===65?(V="A",i++):(V=null,o('"A"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=Lt(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;if(V!==null&&(V=function(rt,Ue){return Ue.map(je=>(je[2]*=Math.PI/180,{cmd:"ellipticalArcTo",args:je}))}(me,V[2])),V===null&&(i=me),V===null){if(me=i,ve=i,n.charCodeAt(i)===97?(V="a",i++):(V=null,o('"a"')),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?(le=Lt(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)}else V=null,i=ve;V!==null&&(V=function(rt,Ue){return Ue.map(je=>(je[2]*=Math.PI/180,{cmd:"ellipticalArcToRelative",args:je}))}(me,V[2])),V===null&&(i=me)}return V}function Lt(){let V,ae,le,me,ve;return me=i,ve=i,V=at(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=Lt(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return[Ue].concat(je)}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,V=at(),V!==null&&(V=function(rt,Ue){return[Ue]}(me,V)),V===null&&(i=me)),V}function at(){let V,ae,le,me,ve,rt,Ue,je,xn,Rt,a,h,d;return h=i,d=i,V=$e(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=$e(),le!==null?(me=Mt(),me=me!==null?me:"",me!==null?(ve=gt(),ve!==null?(rt=Mt(),rt!==null?(Ue=oi(),Ue!==null?(je=Mt(),je=je!==null?je:"",je!==null?(xn=oi(),xn!==null?(Rt=Mt(),Rt=Rt!==null?Rt:"",Rt!==null?(a=Pe(),a!==null?V=[V,ae,le,me,ve,rt,Ue,je,xn,Rt,a]:(V=null,i=d)):(V=null,i=d)):(V=null,i=d)):(V=null,i=d)):(V=null,i=d)):(V=null,i=d)):(V=null,i=d)):(V=null,i=d)):(V=null,i=d)):(V=null,i=d)):(V=null,i=d),V!==null&&(V=function(m,y,v,S,w,E,I){return[y,v,S,w,E,I.x,I.y]}(h,V[0],V[2],V[4],V[6],V[8],V[10])),V===null&&(i=h),V}function Pe(){let V,ae,le,me,ve;return me=i,ve=i,V=gt(),V!==null?(ae=Mt(),ae=ae!==null?ae:"",ae!==null?(le=gt(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return{x:Ue,y:je}}(me,V[0],V[2])),V===null&&(i=me),V}function $e(){let V,ae;return ae=i,V=qt(),V!==null&&(V=function(le,me){return parseFloat(me)}(ae,V)),V===null&&(i=ae),V===null&&(ae=i,V=Gt(),V!==null&&(V=function(le,me){return Number(me)}(ae,V)),V===null&&(i=ae)),V}function gt(){let V,ae,le,me;return le=i,me=i,V=Vs(),V=V!==null?V:"",V!==null?(ae=qt(),ae!==null?V=[V,ae]:(V=null,i=me)):(V=null,i=me),V!==null&&(V=function(ve,rt,Ue){return parseFloat(rt+Ue)}(le,V[0],V[1])),V===null&&(i=le),V===null&&(le=i,me=i,V=Vs(),V=V!==null?V:"",V!==null?(ae=Gt(),ae!==null?V=[V,ae]:(V=null,i=me)):(V=null,i=me),V!==null&&(V=function(ve,rt,Ue){return Number(rt+Ue)}(le,V[0],V[1])),V===null&&(i=le)),V}function oi(){let V,ae;return ae=i,n.charCodeAt(i)===48?(V="0",i++):(V=null,o('"0"')),V!==null&&(V=function(le){return!1}()),V===null&&(i=ae),V===null&&(ae=i,n.charCodeAt(i)===49?(V="1",i++):(V=null,o('"1"')),V!==null&&(V=function(le){return!0}()),V===null&&(i=ae)),V}function Mt(){let V,ae,le,me,ve;if(ve=i,ae=ft(),ae!==null)for(V=[];ae!==null;)V.push(ae),ae=ft();else V=null;if(V!==null)if(ae=Ni(),ae=ae!==null?ae:"",ae!==null){for(le=[],me=ft();me!==null;)le.push(me),me=ft();le!==null?V=[V,ae,le]:(V=null,i=ve)}else V=null,i=ve;else V=null,i=ve;if(V===null)if(ve=i,V=Ni(),V!==null){for(ae=[],le=ft();le!==null;)ae.push(le),le=ft();ae!==null?V=[V,ae]:(V=null,i=ve)}else V=null,i=ve;return V}function Ni(){let V;return n.charCodeAt(i)===44?(V=",",i++):(V=null,o('","')),V}function qt(){let V,ae,le,me;return le=i,me=i,V=as(),V!==null?(ae=qi(),ae=ae!==null?ae:"",ae!==null?V=[V,ae]:(V=null,i=me)):(V=null,i=me),V!==null&&(V=function(ve,rt,Ue){return rt+Ue}(le,V[0],V[1])),V===null&&(i=le),V===null&&(le=i,me=i,V=Gt(),V!==null?(ae=qi(),ae!==null?V=[V,ae]:(V=null,i=me)):(V=null,i=me),V!==null&&(V=function(ve,rt,Ue){return rt+Ue}(le,V[0],V[1])),V===null&&(i=le)),V}function as(){let V,ae,le,me,ve;return me=i,ve=i,V=Gt(),V=V!==null?V:"",V!==null?(n.charCodeAt(i)===46?(ae=".",i++):(ae=null,o('"."')),ae!==null?(le=Gt(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je){return Ue+"."+je}(me,V[0],V[2])),V===null&&(i=me),V===null&&(me=i,ve=i,V=Gt(),V!==null?(n.charCodeAt(i)===46?(ae=".",i++):(ae=null,o('"."')),ae!==null?V=[V,ae]:(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue){return Ue}(me,V[0])),V===null&&(i=me)),V}function qi(){let V,ae,le,me,ve;return me=i,ve=i,n.charCodeAt(i)===101?(V="e",i++):(V=null,o('"e"')),V===null&&(n.charCodeAt(i)===69?(V="E",i++):(V=null,o('"E"'))),V!==null?(ae=Vs(),ae=ae!==null?ae:"",ae!==null?(le=Gt(),le!==null?V=[V,ae,le]:(V=null,i=ve)):(V=null,i=ve)):(V=null,i=ve),V!==null&&(V=function(rt,Ue,je,xn){return Ue+je+xn}(me,V[0],V[1],V[2])),V===null&&(i=me),V}function Vs(){let V;return n.charCodeAt(i)===43?(V="+",i++):(V=null,o('"+"')),V===null&&(n.charCodeAt(i)===45?(V="-",i++):(V=null,o('"-"'))),V}function Gt(){let V,ae,le,me;return le=i,me=i,V=fi(),V!==null?(ae=Gt(),ae!==null?V=[V,ae]:(V=null,i=me)):(V=null,i=me),V!==null&&(V=function(ve,rt,Ue){return rt+Ue}(le,V[0],V[1])),V===null&&(i=le),V===null&&(V=fi()),V}function fi(){let V;return/^[0-9]/.test(n.charAt(i))?(V=n.charAt(i),i++):(V=null,o("[0-9]")),V}function ft(){let V;return n.charCodeAt(i)===32?(V=" ",i++):(V=null,o('" "')),V===null&&(n.charCodeAt(i)===9?(V="	",i++):(V=null,o('"\\t"')),V===null&&(n.charCodeAt(i)===13?(V="\r",i++):(V=null,o('"\\r"')),V===null&&(n.charCodeAt(i)===10?(V=`
`,i++):(V=null,o('"\\n"'))))),V}function vn(V){V.sort();let ae=null;const le=[];for(let me=0;me<V.length;me++)V[me]!==ae&&(le.push(V[me]),ae=V[me]);return le}function Ps(){let V=1,ae=1,le=!1;for(let me=0;me<Math.max(i,s);me++){const ve=n.charAt(me);ve===`
`?(le||V++,ae=1,le=!1):ve==="\r"||ve==="\u2028"||ve==="\u2029"?(V++,ae=1,le=!0):(ae++,le=!1)}return{line:V,column:ae}}function Ki(V,ae){const le=[{cmd:ae?"moveToRelative":"moveTo",args:[V[0].x,V[0].y]}];if(V.length>1)for(let me=1;me<V.length;me++)le.push({cmd:ae?"lineToRelative":"lineTo",args:[V[me].x,V[me].y]});return le}const js=t[e]();if(js===null||i!==n.length){const V=Math.max(i,s),ae=V<n.length?n.charAt(V):null,le=Ps();throw new this.SyntaxError(vn(r),ae,V,le.line,le.column)}return js},toSource:function(){return this._source}};O0.SyntaxError=function(n,e,t,i,s){function r(o,c){let p,g;switch(o.length){case 0:p="end of input";break;case 1:p=o[0];break;default:p=o.slice(0,o.length-1).join(", ")+" or "+o[o.length-1]}return g=c?cv(c):"end of input","Expected "+p+" but "+g+" found."}this.name="SyntaxError",this.expected=n,this.found=e,this.message=r(n,e),this.offset=t,this.line=i,this.column=s};O0.SyntaxError.prototype=Error.prototype;Gf.register("svgPath",O0);const cL=Gf.svgPath;let dL=0;class ml{constructor(e){this.id=++dL,this.halfEdges=[],this.signedArea=0,this.bounds=Je.NOTHING,this.childBoundaries=[],this.initialize(e)}initialize(e){return this.halfEdges=e,this.signedArea=this.computeSignedArea(),this.bounds=this.computeBounds(),this.childBoundaries=$t(this.childBoundaries),this}serialize(){return{type:"Boundary",id:this.id,halfEdges:this.halfEdges.map(e=>e.id),signedArea:this.signedArea,bounds:Je.Bounds2IO.toStateObject(this.bounds),childBoundaries:this.childBoundaries.map(e=>e.id)}}dispose(){this.halfEdges=[],$t(this.childBoundaries),this.freeToPool()}isInner(){return this.signedArea>0}computeSignedArea(){let e=0;for(let t=0;t<this.halfEdges.length;t++)e+=this.halfEdges[t].signedAreaFragment;return e}computeBounds(){const e=Je.NOTHING.copy();for(let t=0;t<this.halfEdges.length;t++)e.includeBounds(this.halfEdges[t].edge.segment.getBounds());return e}computeExtremePoint(e){const t=[];for(let s=0;s<this.halfEdges.length;s++)t.push(this.halfEdges[s].edge.segment.transformed(e.getMatrix()));const i=Je.NOTHING.copy();for(let s=0;s<t.length;s++)i.includeBounds(t[s].getBounds());for(let s=0;s<t.length;s++){const r=t[s];if(r.getBounds().top===i.top){let o=new we(0,Number.POSITIVE_INFINITY);const c=[0,1].concat(r.getInteriorExtremaTs());for(let p=0;p<c.length;p++){const g=r.positionAt(c[p]);g.y<o.y&&(o=g)}return e.inversePosition2(o)}}throw new Error("Should not reach here if we have segments")}computeExtremeRay(e){const t=this.computeExtremePoint(e),i=e.inverseDelta2(new we(0,-1)).normalized();return new Yr(t.plus(i.timesScalar(1e-4)),i)}hasHalfEdge(e){for(let t=0;t<this.halfEdges.length;t++)if(this.halfEdges[t]===e)return!0;return!1}freeToPool(){ml.pool.freeToPool(this)}}ml.pool=new us(ml,{initialize:ml.prototype.initialize});let fL=0;class yl{constructor(e,t){this.id=++fL,this.edge=null,this.face=null,this.isReversed=!1,this.signedAreaFragment=0,this.startVertex=null,this.endVertex=null,this.sortVector=new we(0,0),this.data=null,this.initialize(e,t)}initialize(e,t){return this.edge=e,this.face=null,this.isReversed=t,this.signedAreaFragment=e.signedAreaFragment*(t?-1:1),this.startVertex=null,this.endVertex=null,this.data=null,this.updateReferences(),this}serialize(){return{type:"HalfEdge",id:this.id,edge:this.edge.id,face:this.face===null?null:this.face.id,isReversed:this.isReversed,signedAreaFragment:this.signedAreaFragment,startVertex:this.startVertex===null?null:this.startVertex.id,endVertex:this.endVertex===null?null:this.endVertex.id,sortVector:we.Vector2IO.toStateObject(this.sortVector),data:this.data}}dispose(){this.edge=null,this.face=null,this.startVertex=null,this.endVertex=null,this.data=null,this.freeToPool()}getNext(e){for(let t=1;;t++){let i=this.endVertex.incidentHalfEdges.indexOf(this)-t;i<0&&(i+=this.endVertex.incidentHalfEdges.length);const s=this.endVertex.incidentHalfEdges[i].getReversed();if(!(e&&!e(s.edge)))return s}}updateReferences(){this.startVertex=this.isReversed?this.edge.endVertex:this.edge.startVertex,this.endVertex=this.isReversed?this.edge.startVertex:this.edge.endVertex}getEndTangent(){return this.isReversed?this.edge.segment.startTangent:this.edge.segment.endTangent.negated()}getEndCurvature(){return this.isReversed?-this.edge.segment.curvatureAt(0):this.edge.segment.curvatureAt(1)}getReversed(){return this.isReversed?this.edge.forwardHalf:this.edge.reversedHalf}getDirectionalSegment(){return this.isReversed?this.edge.segment.reversed():this.edge.segment}freeToPool(){yl.pool.freeToPool(this)}}yl.pool=new us(yl,{initialize:yl.prototype.initialize});let pL=0;class Js{constructor(e,t,i){this.id=++pL,this.segment=null,this.startVertex=null,this.endVertex=null,this.signedAreaFragment=0,this.forwardHalf=null,this.reversedHalf=null,this.visited=!1,this.data=null,this.internalData=null,this.initialize(e,t,i)}initialize(e,t,i){return this.segment=e,this.startVertex=t,this.endVertex=i,this.signedAreaFragment=e.getSignedAreaFragment(),this.forwardHalf=yl.pool.create(this,!1),this.reversedHalf=yl.pool.create(this,!0),this.visited=!1,this.data=null,this.internalData={},this}serialize(){return{type:"Edge",id:this.id,segment:this.segment.serialize(),startVertex:this.startVertex===null?null:this.startVertex.id,endVertex:this.endVertex===null?null:this.endVertex.id,signedAreaFragment:this.signedAreaFragment,forwardHalf:this.forwardHalf.serialize(),reversedHalf:this.reversedHalf.serialize(),visited:this.visited,data:this.data}}dispose(){this.segment=null,this.startVertex=null,this.endVertex=null,this.forwardHalf.dispose(),this.reversedHalf.dispose(),this.forwardHalf=null,this.reversedHalf=null,this.data=null,this.freeToPool()}getOtherVertex(e){return this.startVertex===e?this.endVertex:this.startVertex}updateReferences(){this.forwardHalf.updateReferences(),this.reversedHalf.updateReferences()}freeToPool(){Js.pool.freeToPool(this)}}Js.pool=new us(Js,{initialize:Js.prototype.initialize});Gf.register("Edge",Js);let gL=1;const YA=[];class dv{constructor(e=1e-6){this.rootNode=_l.pool.create(this,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this.rootNode.isBlack=!0,this.epsilon=e,this.items=new Set}query(e,t){const i=gL++;return this.rootNode?this.rootNode.query(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon),i,t):!1}addItem(e){const t=this.getMinX(e,this.epsilon),i=this.getMaxX(e,this.epsilon);this.rootNode.split(t,this),this.rootNode.split(i,this),this.rootNode.addItem(e,t,i),this.items.add(e)}removeItem(e){this.rootNode.removeItem(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon)),this.items.delete(e)}audit(){this.rootNode.audit(this.epsilon,this.items,[])}toString(){let e=0,t="";return function i(s){t+=`${te.repeat("  ",e)}${s.toString()}
`,e++,s.hasChildren()&&(i(s.left),i(s.right)),e--}(this.rootNode),t}}class _l{constructor(e,t,i){this.items=[],this.initialize(e,t,i)}initialize(e,t,i){return this.min=t,this.max=i,this.splitValue=null,this.left=null,this.right=null,this.parent=null,this.tree=e,this.isBlack=!1,$t(this.items),this}contains(e){return e>=this.min&&e<=this.max}hasChildren(){return this.splitValue!==null}query(e,t,i,s,r){var c,p;let o=!1;if(this.min<=i&&this.max>=t){for(let g=0;g<this.items.length;g++){const A=this.items[g];if((!((c=A.internalData)!=null&&c.segmentId)||((p=A.internalData)==null?void 0:p.segmentId)<s)&&(A.internalData.segmentId=s,o=r(A),o))return!0}this.hasChildren()&&(o||(o=this.left.query(e,t,i,s,r)),o||(o=this.right.query(e,t,i,s,r)))}return o}swapChild(e,t){this.left===e?this.left=t:this.right=t}hasChild(e){return this.left===e||this.right===e}otherChild(e){return this.left===e?this.right:this.left}leftRotate(e){if(this.right.hasChildren()){const t=this.right,i=this.left,s=t.left,r=t.right;t.parent=this.parent,this.parent?this.parent.swapChild(this,t):e.rootNode=t,this.parent=t,s.parent=this,t.left=this,this.left=i,this.right=s,this.max=s.max,this.splitValue=i.max,t.min=this.min,t.splitValue=this.max;const o=$t(YA);o.push(...this.items),$t(this.items);for(let c=i.items.length-1;c>=0;c--){const p=i.items[c],g=s.items.indexOf(p);g>=0&&(i.items.splice(c,1),s.items.splice(g,1),this.items.push(p))}s.items.push(...t.items),r.items.push(...t.items),$t(t.items),t.items.push(...o)}}rightRotate(e){const t=this.left,i=this.right,s=t.left,r=t.right;t.parent=this.parent,this.parent?this.parent.swapChild(this,t):e.rootNode=t,this.parent=t,r.parent=this,t.right=this,this.left=r,this.right=i,this.min=r.min,this.splitValue=i.min,t.max=this.max,t.splitValue=this.min;const o=$t(YA);o.push(...this.items),$t(this.items);for(let c=i.items.length-1;c>=0;c--){const p=i.items[c],g=r.items.indexOf(p);g>=0&&(i.items.splice(c,1),r.items.splice(g,1),this.items.push(p))}s.items.push(...t.items),r.items.push(...t.items),$t(t.items),t.items.push(...o)}fixRedBlack(e){if(!this.parent)this.isBlack=!0;else{const t=this.parent;if(!t.isBlack){const i=t.parent,s=i.otherChild(t);s.isBlack?t===i.left?this===t.right?(t.leftRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.rightRotate(e)):(t.isBlack=!0,i.isBlack=!1,i.rightRotate(e)):this===t.left?(t.rightRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.leftRotate(e)):(t.isBlack=!0,i.isBlack=!1,i.leftRotate(e)):(t.isBlack=!0,s.isBlack=!0,i.isBlack=!1,i.fixRedBlack(e))}}}split(e,t){if(!(e===this.min||e===this.max))if(this.hasChildren())this.splitValue!==e&&(e>this.splitValue?this.right:this.left).split(e,t);else{this.splitValue=e;const i=_l.pool.create(this.tree,this.min,e);i.parent=this,this.left=i;const s=_l.pool.create(this.tree,e,this.max);if(s.parent=this,this.right=s,!this.isBlack&&this.parent){const r=this.parent,o=r.otherChild(this);o.isBlack?(this===r.left?(r.rightRotate(t),i.isBlack=!0):(r.leftRotate(t),s.isBlack=!0),this.fixRedBlack(t)):(this.isBlack=!0,o.isBlack=!0,r.isBlack=!1,r.fixRedBlack(t))}}}addItem(e,t,i){this.min>i||this.max<t||(this.min>=t&&this.max<=i?this.items.push(e):this.hasChildren()&&(this.left.addItem(e,t,i),this.right.addItem(e,t,i)))}removeItem(e,t,i){this.min>i||this.max<t||(this.min>=t&&this.max<=i?Ns(this.items,e):this.hasChildren()&&(this.left.removeItem(e,t,i),this.right.removeItem(e,t,i)))}audit(e,t,i=[]){}toString(){return`[${this.min} ${this.max}] split:${this.splitValue} ${this.isBlack?"black":"red"} ${this.items}`}freeToPool(){_l.pool.freeToPool(this)}}_l.pool=new us(_l);class GA extends dv{getMinX(e,t){return e.segment.bounds.left-t}getMaxX(e,t){return e.segment.bounds.right+t}}let mL=0;class xo{constructor(e){this.id=++mL,this.boundary=null,this.holes=[],this.windingMap=null,this.filled=null,this.initialize(e)}initialize(e){return this.boundary=e,$t(this.holes),this.windingMap=null,this.filled=null,e&&this.addBoundaryFaceReferences(e),this}serialize(){return{type:"Face",id:this.id,boundary:this.boundary===null?null:this.boundary.id,holes:this.holes.map(e=>e.id),windingMap:this.windingMap,filled:this.filled}}dispose(){this.boundary=null,$t(this.holes),this.windingMap=null,this.filled=null,this.freeToPool()}addBoundaryFaceReferences(e){for(let t=0;t<e.halfEdges.length;t++)e.halfEdges[t].face=this}recursivelyAddHoles(e){this.holes.push(e),this.addBoundaryFaceReferences(e);for(let t=0;t<e.childBoundaries.length;t++)this.recursivelyAddHoles(e.childBoundaries[t])}freeToPool(){xo.pool.freeToPool(this)}}xo.pool=new us(xo,{initialize:xo.prototype.initialize});let yL=0;class Al{constructor(e,t){this.id=++yL,this.shapeId=0,this.closed=!1,this.halfEdges=[],this.initialize(e,t)}initialize(e,t){return this.shapeId=e,this.closed=t,$t(this.halfEdges),this}serialize(){return{type:"Loop",id:this.id,shapeId:this.shapeId,closed:this.closed,halfEdges:this.halfEdges.map(e=>e.id)}}dispose(){$t(this.halfEdges),this.freeToPool()}freeToPool(){Al.pool.freeToPool(this)}}Al.pool=new us(Al,{initialize:Al.prototype.initialize});let _L=0;class En{constructor(e){this.id=++_L,this.point=we.ZERO,this.incidentHalfEdges=[],this.visited=!1,this.visitIndex=0,this.lowIndex=0,this.data=null,this.internalData=null,this.initialize(e)}initialize(e){return this.point=e,$t(this.incidentHalfEdges),this.visited=!1,this.visitIndex=0,this.lowIndex=0,this.data=null,this.internalData={},this}serialize(){return{type:"Vertex",id:this.id,point:we.Vector2IO.toStateObject(this.point),incidentHalfEdges:this.incidentHalfEdges.map(e=>e.id),visited:this.visited,visitIndex:this.visitIndex,lowIndex:this.lowIndex}}dispose(){this.point=we.ZERO,$t(this.incidentHalfEdges),this.freeToPool()}sortEdges(){const e=[];for(let s=0;s<this.incidentHalfEdges.length;s++){const r=this.incidentHalfEdges[s];e.push(r.sortVector.setXY(r.getEndTangent().angle,r.getEndCurvature()))}const t=-Math.PI+1e-4;let i=!1;for(;!i;){i=!0;for(let s=0;s<e.length;s++)e[s].x<t&&(i=!1);if(!i)for(let s=0;s<e.length;s++){const r=e[s];r.x-=1.62594024516,r.x<-Math.PI-1e-4&&(r.x+=Math.PI*2)}}this.incidentHalfEdges.sort(En.edgeComparison)}static edgeComparison(e,t){const i=e.sortVector.x,s=t.sortVector.x;if(Math.abs(i-s)>1e-5||i!==s&&e.edge.segment instanceof ri&&t.edge.segment instanceof ri)return i<s?-1:1;{const r=e.sortVector.y,o=t.sortVector.y;if(Math.abs(r-o)>1e-5)return r<o?1:-1;{const p=e.getDirectionalSegment().subdivided(.999)[1].curvatureAt(0),g=t.getDirectionalSegment().subdivided(.999)[1].curvatureAt(0);return p<g?1:-1}}}freeToPool(){En.pool.freeToPool(this)}}En.pool=new us(En,{initialize:En.prototype.initialize});class AL extends dv{getMinX(e,t){return e.point.x-t}getMaxX(e,t){return e.point.x+t}}const Pd=Math.random,ss=(n,e)=>new we(n,e),WA=(n,e,t,i)=>t.copy().subtract(n).multiplyScalar((1-i)/6).add(e);class Tt{constructor(e,t){if(this.subpaths=[],this._invalidatingPoints=!1,this._immutable=!1,this.invalidatedEmitter=new Ai,this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=null,this._bounds=t?t.copy():null,this.resetControlPoints(),this._invalidateListener=this.invalidate.bind(this),typeof e=="object")for(let i=0;i<e.length;i++)this.addSubpath(e[i]);e&&typeof e!="object"&&te.each(cL.parse(e),i=>{this[i.cmd].apply(this,i.args)}),this.invalidate()}resetControlPoints(){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=null}setQuadraticControlPoint(e){this.lastQuadraticControlPoint=e,this.lastCubicControlPoint=null}setCubicControlPoint(e){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=e}moveTo(e,t){return this.moveToPoint(ss(e,t))}moveToRelative(e,t){return this.moveToPointRelative(ss(e,t))}moveToPointRelative(e){return this.moveToPoint(this.getRelativePoint().plus(e))}moveToPoint(e){return this.addSubpath(new Yi().addPoint(e)),this.resetControlPoints(),this}lineTo(e,t){return this.lineToPoint(ss(e,t))}lineToRelative(e,t){return this.lineToPointRelative(ss(e,t))}lineToPointRelative(e){return this.lineToPoint(this.getRelativePoint().plus(e))}lineToPoint(e){if(this.hasSubpaths()){const t=this.getLastSubpath().getLastPoint(),i=e,s=new ri(t,i);this.getLastSubpath().addPoint(i),this.addSegmentAndBounds(s)}else this.ensure(e);return this.resetControlPoints(),this}horizontalLineTo(e){return this.lineTo(e,this.getRelativePoint().y)}horizontalLineToRelative(e){return this.lineToRelative(e,0)}verticalLineTo(e){return this.lineTo(this.getRelativePoint().x,e)}verticalLineToRelative(e){return this.lineToRelative(0,e)}zigZagTo(e,t,i,s,r){return this.zigZagToPoint(new we(e,t),i,s,r)}zigZagToPoint(e,t,i,s){this.ensure(e);const r=this.getLastPoint(),o=e.minus(r),c=o.normalized(),p=c.perpendicular.times(t);let g;s?g=o.magnitude/(i+.5):g=o.magnitude/i;for(let A=0;A<i;A++){const C=c.times(A*g).plus(r),D=C.plus(c.times(g/4)).plus(p),P=C.plus(c.times(3*g/4)).minus(p);this.lineToPoint(D),this.lineToPoint(P)}if(s){const C=c.times(i*g).plus(r).plus(c.times(g/4)).plus(p);this.lineToPoint(C)}return this.lineToPoint(e)}quadraticCurveTo(e,t,i,s){return this.quadraticCurveToPoint(ss(e,t),ss(i,s))}quadraticCurveToRelative(e,t,i,s){return this.quadraticCurveToPointRelative(ss(e,t),ss(i,s))}quadraticCurveToPointRelative(e,t){const i=this.getRelativePoint();return this.quadraticCurveToPoint(i.plus(e),i.plus(t))}smoothQuadraticCurveTo(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),ss(e,t))}smoothQuadraticCurveToRelative(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),ss(e,t).plus(this.getRelativePoint()))}quadraticCurveToPoint(e,t){this.ensure(e);const i=this.getLastSubpath().getLastPoint(),s=new Rs(i,e,t);this.getLastSubpath().addPoint(t);const r=s.getNondegenerateSegments();return te.each(r,o=>{this.addSegmentAndBounds(o)}),this.setQuadraticControlPoint(e),this}cubicCurveTo(e,t,i,s,r,o){return this.cubicCurveToPoint(ss(e,t),ss(i,s),ss(r,o))}cubicCurveToRelative(e,t,i,s,r,o){return this.cubicCurveToPointRelative(ss(e,t),ss(i,s),ss(r,o))}cubicCurveToPointRelative(e,t,i){const s=this.getRelativePoint();return this.cubicCurveToPoint(s.plus(e),s.plus(t),s.plus(i))}smoothCubicCurveTo(e,t,i,s){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),ss(e,t),ss(i,s))}smoothCubicCurveToRelative(e,t,i,s){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),ss(e,t).plus(this.getRelativePoint()),ss(i,s).plus(this.getRelativePoint()))}cubicCurveToPoint(e,t,i){this.ensure(e);const s=this.getLastSubpath().getLastPoint(),o=new nn(s,e,t,i).getNondegenerateSegments();return te.each(o,c=>{this.addSegmentAndBounds(c)}),this.getLastSubpath().addPoint(i),this.setCubicControlPoint(t),this}arc(e,t,i,s,r,o){return this.arcPoint(ss(e,t),i,s,r,o)}arcPoint(e,t,i,s,r){r===void 0&&(r=!1);const o=new Bi(e,t,i,s,r),c=o.getStart(),p=o.getEnd();return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!c.equals(this.getLastSubpath().getLastPoint())&&this.addSegmentAndBounds(new ri(this.getLastSubpath().getLastPoint(),c)),this.hasSubpaths()||this.addSubpath(new Yi),this.getLastSubpath().addPoint(c),this.getLastSubpath().addPoint(p),this.addSegmentAndBounds(o),this.resetControlPoints(),this}ellipticalArc(e,t,i,s,r,o,c,p){return this.ellipticalArcPoint(ss(e,t),i,s,r,o,c,p)}ellipticalArcPoint(e,t,i,s,r,o,c){c===void 0&&(c=!1);const p=new $s(e,t,i,s,r,o,c),g=p.start,A=p.end;return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!g.equals(this.getLastSubpath().getLastPoint())&&this.addSegmentAndBounds(new ri(this.getLastSubpath().getLastPoint(),g)),this.hasSubpaths()||this.addSubpath(new Yi),this.getLastSubpath().addPoint(g),this.getLastSubpath().addPoint(A),this.addSegmentAndBounds(p),this.resetControlPoints(),this}close(){if(this.hasSubpaths()){const e=this.getLastSubpath(),t=new Yi;e.close(),this.addSubpath(t),t.addPoint(e.getFirstPoint())}return this.resetControlPoints(),this}newSubpath(){return this.addSubpath(new Yi),this.resetControlPoints(),this}makeImmutable(){return this._immutable=!0,this.notifyInvalidationListeners(),this}isImmutable(){return this._immutable}ellipticalArcToRelative(e,t,i,s,r,o,c){const p=this.getRelativePoint();return this.ellipticalArcTo(e,t,i,s,r,o+p.x,c+p.y)}ellipticalArcTo(e,t,i,s,r,o,c){const p=new we(o,c);this.ensure(p);const g=this.getLastSubpath().getLastPoint();this.getLastSubpath().addPoint(p),e<0&&(e*=-1),t<0&&(t*=-1);let A=e*e,C=t*t;const D=g.minus(p).dividedScalar(2).rotated(-i),P=D.x*D.x,F=D.y*D.y;let K=new we(e*D.y/t,-t*D.x/e);const M=P/A+F/C;M>1&&(e*=Math.sqrt(M),t*=Math.sqrt(M),A=e*e,C=t*t,K=new we(e*D.y/t,-t*D.x/e)),K.multiplyScalar(Math.sqrt(Math.max(0,(A*C-A*F-C*P)/(A*F+C*P)))),s===r&&K.multiplyScalar(-1);const U=g.blend(p,.5).plus(K.rotated(i)),$=(be,Be)=>(be.x*Be.y-be.y*Be.x>0?1:-1)*be.angleBetween(Be),re=new we((D.x-K.x)/e,(D.y-K.y)/t),pe=new we((-D.x-K.x)/e,(-D.y-K.y)/t),ce=$(we.X_UNIT,re);let T=$(re,pe)%(Math.PI*2);!r&&T>0&&(T-=Math.PI*2),r&&T<0&&(T+=Math.PI*2);const ze=new $s(U,e,t,i,ce,ce+T,!r).getNondegenerateSegments();return te.each(ze,be=>{this.addSegmentAndBounds(be)}),this}circle(e,t,i){if(typeof e=="object"){const s=e;return i=t,this.arcPoint(s,i,0,Math.PI*2,!1).close()}else return this.arcPoint(ss(e,t),i,0,Math.PI*2,!1).close()}ellipse(e,t,i,s,r){if(typeof e=="object"){const o=e;return r=s,s=i,i=t,this.ellipticalArcPoint(o,i,s,r||0,0,Math.PI*2,!1).close()}else return this.ellipticalArcPoint(ss(e,t),i,s,r||0,0,Math.PI*2,!1).close()}rect(e,t,i,s){const r=new Yi;return this.addSubpath(r),r.addPoint(ss(e,t)),r.addPoint(ss(e+i,t)),r.addPoint(ss(e+i,t+s)),r.addPoint(ss(e,t+s)),this.addSegmentAndBounds(new ri(r.points[0],r.points[1])),this.addSegmentAndBounds(new ri(r.points[1],r.points[2])),this.addSegmentAndBounds(new ri(r.points[2],r.points[3])),r.close(),this.addSubpath(new Yi),this.getLastSubpath().addPoint(ss(e,t)),this.resetControlPoints(),this}roundRect(e,t,i,s,r,o){const c=e+r,p=e+i-r,g=t+o,A=t+s-o;return r===o?this.arc(p,g,r,-Math.PI/2,0,!1).arc(p,A,r,0,Math.PI/2,!1).arc(c,A,r,Math.PI/2,Math.PI,!1).arc(c,g,r,Math.PI,Math.PI*3/2,!1).close():this.ellipticalArc(p,g,r,o,0,-Math.PI/2,0,!1).ellipticalArc(p,A,r,o,0,0,Math.PI/2,!1).ellipticalArc(c,A,r,o,0,Math.PI/2,Math.PI,!1).ellipticalArc(c,g,r,o,0,Math.PI,Math.PI*3/2,!1).close(),this}polygon(e){const t=e.length;if(t>0){this.moveToPoint(e[0]);for(let i=1;i<t;i++)this.lineToPoint(e[i])}return this.close()}cardinalSpline(e,t){const i=lt()({tension:0,isClosedLineSegments:!1},t),s=e.length,r=i.isClosedLineSegments?s:s-1;for(let o=0;o<r;o++){let c;o===0&&!i.isClosedLineSegments?c=[e[0],e[0],e[1],e[2]]:o===r-1&&!i.isClosedLineSegments?c=[e[o-1],e[o],e[o+1],e[o+1]]:c=[e[(o-1+s)%s],e[o%s],e[(o+1)%s],e[(o+2)%s]];const p=[c[1],WA(c[0],c[1],c[2],i.tension),WA(c[3],c[2],c[1],i.tension),c[2]];o===0&&(this.ensure(p[0]),this.getLastSubpath().addPoint(p[0])),this.cubicCurveToPoint(p[1],p[2],p[3])}return this}copy(){return new Tt(te.map(this.subpaths,e=>e.copy()),this.bounds)}writeToContext(e){const t=this.subpaths.length;for(let i=0;i<t;i++)this.subpaths[i].writeToContext(e)}getSVGPath(){let e="";const t=this.subpaths.length;for(let i=0;i<t;i++){const s=this.subpaths[i];if(s.isDrawable()){const r=s.segments[0].start;e+=`M ${Si(r.x)} ${Si(r.y)} `;for(let o=0;o<s.segments.length;o++)e+=`${s.segments[o].getSVGPathFragment()} `;s.isClosed()&&(e+="Z ")}}return e}transformed(e){const t=te.map(this.subpaths,s=>s.transformed(e)),i=te.reduce(t,(s,r)=>s.union(r.bounds),Je.NOTHING);return new Tt(t,i)}nonlinearTransformed(e){const t=Ci({minLevels:0,maxLevels:7,distanceEpsilon:.16,curveEpsilon:e&&e.includeCurvature?.002:null},e),i=te.map(this.subpaths,r=>r.nonlinearTransformed(t)),s=te.reduce(i,(r,o)=>r.union(o.bounds),Je.NOTHING);return new Tt(i,s)}polarToCartesian(e){return this.nonlinearTransformed(Ci({pointMap:t=>we.createPolar(t.y,t.x),methodName:"polarToCartesian"},e))}toPiecewiseLinear(e){return this.nonlinearTransformed(e)}containsPoint(e){const t=we.X_UNIT.copy();let i=0;for(;i<5&&(i++,te.some(this.subpaths,r=>te.some(r.segments,o=>{const c=o.start.minus(e),p=c.magnitude;return p!==0?(c.divideScalar(p),c.subtract(t),c.magnitudeSquared<1e-9):!1})));)t.rotate(cl.nextDouble());return this.windingIntersection(new Yr(e,t))!==0}intersection(e){let t=[];const i=this.subpaths.length;for(let s=0;s<i;s++){const r=this.subpaths[s];if(r.isDrawable()){const o=r.segments.length;for(let c=0;c<o;c++){const p=r.segments[c];t=t.concat(p.intersection(e))}r.hasClosingSegment()&&(t=t.concat(r.getClosingSegment().intersection(e)))}}return te.sortBy(t,s=>s.distance)}interiorIntersectsLineSegment(e,t){const i=e.blend(t,.5);if(this.containsPoint(i))return!0;const s=t.minus(e),r=s.magnitude;if(r===0)return!1;s.normalize();const o=this.intersection(new Yr(e,s));for(let c=0;c<o.length;c++)if(o[c].distance<=r)return!0;return!1}windingIntersection(e){let t=0;const i=this.subpaths.length;for(let s=0;s<i;s++){const r=this.subpaths[s];if(r.isDrawable()){const o=r.segments.length;for(let c=0;c<o;c++)t+=r.segments[c].windingIntersection(e);r.hasClosingSegment()&&(t+=r.getClosingSegment().windingIntersection(e))}}return t}intersectsBounds(e){if(this.bounds.intersection(e).equals(this.bounds))return!0;const t=new Yr(new we(e.minX,e.minY),new we(1,0)),i=new Yr(new we(e.minX,e.minY),new we(0,1)),s=new Yr(new we(e.maxX,e.maxY),new we(-1,0)),r=new Yr(new we(e.maxX,e.maxY),new we(0,-1));let o,c;const p=this.intersection(t).concat(this.intersection(s));for(c=0;c<p.length;c++)if(o=p[c].point,o.x>=e.minX&&o.x<=e.maxX)return!0;const g=this.intersection(i).concat(this.intersection(r));for(c=0;c<g.length;c++)if(o=g[c].point,o.y>=e.minY&&o.y<=e.maxY)return!0;return!1}getStrokedShape(e){let t=[];const i=Je.NOTHING.copy();let s=this.subpaths.length;for(let r=0;r<s;r++){const c=this.subpaths[r].stroked(e);t=t.concat(c)}s=t.length;for(let r=0;r<s;r++)i.includeBounds(t[r].bounds);return new Tt(t,i)}getOffsetShape(e){const t=[],i=Je.NOTHING.copy();let s=this.subpaths.length;for(let r=0;r<s;r++)t.push(this.subpaths[r].offset(e));s=t.length;for(let r=0;r<s;r++)i.includeBounds(t[r].bounds);return new Tt(t,i)}getDashedShape(e,t,i){const s=lt()({distanceEpsilon:1e-10,curveEpsilon:1e-8},i);return new Tt(te.flatten(this.subpaths.map(r=>r.dashed(e,t,s.distanceEpsilon,s.curveEpsilon))))}getBounds(){if(this._bounds===null){const e=Je.NOTHING.copy();te.each(this.subpaths,t=>{e.includeBounds(t.getBounds())}),this._bounds=e}return this._bounds}get bounds(){return this.getBounds()}getStrokedBounds(e){let t=!0;for(let i=0;i<this.subpaths.length;i++){const s=this.subpaths[i];if(s.isDrawable()&&!s.isClosed()){t=!1;break}for(let r=0;r<s.segments.length;r++)if(!s.segments[r].areStrokedBoundsDilated()){t=!1;break}}if(t)return this.bounds.dilated(e.lineWidth/2);{const i=this.bounds.copy();for(let s=0;s<this.subpaths.length;s++){const r=this.subpaths[s].stroked(e);for(let o=0;o<r.length;o++)i.includeBounds(r[o].bounds)}return i}}getSimplifiedAreaShape(){return fs.simplifyNonZero(this)}getBoundsWithTransform(e,t){const i=Je.NOTHING.copy(),s=this.subpaths.length;for(let r=0;r<s;r++){const o=this.subpaths[r];i.includeBounds(o.getBoundsWithTransform(e))}return t&&i.includeBounds(this.getStrokedShape(t).getBoundsWithTransform(e)),i}getApproximateArea(e){const t=this.bounds.minX,i=this.bounds.minY,s=this.bounds.width,r=this.bounds.height,o=s*r;let c=0;const p=new we(0,0);for(let g=0;g<e;g++)p.x=t+Pd()*s,p.y=i+Pd()*r,this.containsPoint(p)&&c++;return o*c/e}getNonoverlappingArea(){return Math.abs(te.sum(this.subpaths.map(e=>te.sum(e.getFillSegments().map(t=>t.getSignedAreaFragment())))))}getArea(){return this.getSimplifiedAreaShape().getNonoverlappingArea()}getApproximateCentroid(e){const t=this.bounds.minX,i=this.bounds.minY,s=this.bounds.width,r=this.bounds.height;let o=0;const c=new we(0,0),p=new we(0,0);for(let g=0;g<e;g++)p.x=t+Pd()*s,p.y=i+Pd()*r,this.containsPoint(p)&&(c.add(p),o++);return c.dividedScalar(o)}getClosestPoints(e){return Gs.filterClosestToPointResult(te.flatten(this.subpaths.map(t=>t.getClosestPoints(e))))}getClosestPoint(e){return this.getClosestPoints(e)[0].closestPoint}invalidatePoints(){this._invalidatingPoints=!0;const e=this.subpaths.length;for(let t=0;t<e;t++)this.subpaths[t].invalidatePoints();this._invalidatingPoints=!1,this.invalidate()}toString(){return`new phet.kite.Shape( '${this.getSVGPath().trim()}' )`}invalidate(){this._invalidatingPoints||(this._bounds=null,this.notifyInvalidationListeners())}notifyInvalidationListeners(){this.invalidatedEmitter.emit()}addSegmentAndBounds(e){this.getLastSubpath().addSegment(e),this.invalidate()}ensure(e){this.hasSubpaths()||(this.addSubpath(new Yi),this.getLastSubpath().addPoint(e))}addSubpath(e){return this.subpaths.push(e),e.invalidatedEmitter.addListener(this._invalidateListener),this.invalidate(),this}hasSubpaths(){return this.subpaths.length>0}getLastSubpath(){return te.last(this.subpaths)}getLastPoint(){return this.getLastSubpath().getLastPoint()}getLastSegment(){if(!this.hasSubpaths())return null;const e=this.getLastSubpath();return e.isDrawable()?e.getLastSegment():null}getSmoothQuadraticControlPoint(){const e=this.getLastPoint();return this.lastQuadraticControlPoint?e.plus(e.minus(this.lastQuadraticControlPoint)):e}getSmoothCubicControlPoint(){const e=this.getLastPoint();return this.lastCubicControlPoint?e.plus(e.minus(this.lastCubicControlPoint)):e}getRelativePoint(){let e=we.ZERO;if(this.hasSubpaths()){const t=this.getLastSubpath();t.points.length&&(e=t.getLastPoint())}return e}shapeUnion(e){return fs.binaryResult(this,e,fs.BINARY_NONZERO_UNION)}shapeIntersection(e){return fs.binaryResult(this,e,fs.BINARY_NONZERO_INTERSECTION)}shapeDifference(e){return fs.binaryResult(this,e,fs.BINARY_NONZERO_DIFFERENCE)}shapeXor(e){return fs.binaryResult(this,e,fs.BINARY_NONZERO_XOR)}shapeClip(e,t){return fs.clipShape(e,this,t)}getArcLength(e,t,i){let s=0;for(let r=0;r<this.subpaths.length;r++)s+=this.subpaths[r].getArcLength(e,t,i);return s}serialize(){return{type:"Shape",subpaths:this.subpaths.map(e=>e.serialize())}}static deserialize(e){return new Tt(e.subpaths.map(Yi.deserialize))}static rectangle(e,t,i,s){return new Tt().rect(e,t,i,s)}static roundRect(e,t,i,s,r,o){return new Tt().roundRect(e,t,i,s,r,o)}static roundedRectangleWithRadii(e,t,i,s,r){let o=r&&r.topLeft||0,c=r&&r.topRight||0,p=r&&r.bottomLeft||0,g=r&&r.bottomRight||0;const A=o+c;A>i&&A>0&&(o=o/A*i,c=c/A*i);const C=p+g;C>i&&C>0&&(p=p/C*i,g=g/C*i);const D=o+p;D>s&&D>0&&(o=o/D*s,p=p/D*s);const P=c+g;P>s&&P>0&&(c=c/P*s,g=g/P*s);const F=new Tt,K=e+i,M=t+s;return g>0?F.arc(K-g,M-g,g,0,Math.PI/2,!1):F.moveTo(K,M),p>0?F.arc(e+p,M-p,p,Math.PI/2,Math.PI,!1):F.lineTo(e,M),o>0?F.arc(e+o,t+o,o,Math.PI,3*Math.PI/2,!1):F.lineTo(e,t),c>0?F.arc(K-c,t+c,c,3*Math.PI/2,2*Math.PI,!1):F.lineTo(K,t),F.close(),F}static boundsOffsetWithRadii(e,t,i){const s=e.withOffsets(t.left,t.top,t.right,t.bottom);return Tt.roundedRectangleWithRadii(s.minX,s.minY,s.width,s.height,i)}static polygon(e){return new Tt().polygon(e)}static bounds(e){return new Tt().rect(e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY)}static lineSegment(e,t,i,s){return typeof e=="number"?new Tt().moveTo(e,t).lineTo(i,s):new Tt().moveToPoint(e).lineToPoint(t)}static regularPolygon(e,t){const i=new Tt;return te.each(te.range(e),s=>{const r=we.createPolar(t,2*Math.PI*s/e);s===0?i.moveToPoint(r):i.lineToPoint(r)}),i.close()}static circle(e,t,i){return t===void 0?new Tt().circle(0,0,e):new Tt().circle(e,t,i)}static ellipse(e,t,i,s,r){return s===void 0?new Tt().ellipse(0,0,e,t,i):new Tt().ellipse(e,t,i,s,r)}static arc(e,t,i,s,r,o){return new Tt().arc(e,t,i,s,r,o)}static union(e){return fs.unionNonZero(e)}static intersection(e){return fs.intersectionNonZero(e)}static xor(e){return fs.xorNonZero(e)}static segments(e,t){return new Tt([new Yi(e,void 0,!!t)])}static fromGraph(e){const t=[];for(let i=0;i<e.faces.length;i++){const s=e.faces[i];if(s.filled){t.push(Yi.fromBoundary(s.boundary));for(let r=0;r<s.holes.length;r++)t.push(Yi.fromBoundary(s.holes[r]))}}return new Tt(t)}static fromSegment(e){return new Tt([new Yi([e])])}}Tt.rect=Tt.rectangle;Tt.roundRectangle=Tt.roundRect;let bL=0,Kg=0;const Jd=1e-5,XA=.1*Jd,jA=.01*Jd,Ed=1e-6;class fs{constructor(){this.vertices=[],this.edges=[],this.innerBoundaries=[],this.outerBoundaries=[],this.boundaries=[],this.shapeIds=[],this.loops=[],this.unboundedFace=xo.pool.create(null),this.faces=[this.unboundedFace]}serialize(){return{type:"Graph",vertices:this.vertices.map(e=>e.serialize()),edges:this.edges.map(e=>e.serialize()),boundaries:this.boundaries.map(e=>e.serialize()),innerBoundaries:this.innerBoundaries.map(e=>e.id),outerBoundaries:this.outerBoundaries.map(e=>e.id),shapeIds:this.shapeIds,loops:this.loops.map(e=>e.serialize()),unboundedFace:this.unboundedFace.id,faces:this.faces.map(e=>e.serialize())}}static deserialize(e){const t=new fs,i={},s={},r={},o={},c={},p={};return t.vertices=e.vertices.map(g=>{const A=new En(we.Vector2IO.fromStateObject(g.point));return i[g.id]=A,A.visited=g.visited,A.visitIndex=g.visitIndex,A.lowIndex=g.lowIndex,A}),t.edges=e.edges.map(g=>{const A=new Js(Gs.deserialize(g.segment),i[g.startVertex],i[g.endVertex]);s[g.id]=A,A.signedAreaFragment=g.signedAreaFragment;const C=(D,P)=>{r[P.id]=D,D.isReversed=P.isReversed,D.signedAreaFragment=P.signedAreaFragment,D.startVertex=i[P.startVertex.id],D.endVertex=i[P.endVertex.id],D.sortVector=we.Vector2IO.fromStateObject(P.sortVector),D.data=P.data};return C(A.forwardHalf,g.forwardHalf),C(A.reversedHalf,g.reversedHalf),A.visited=g.visited,A.data=g.data,A}),e.vertices.forEach((g,A)=>{const C=t.vertices[A];C.incidentHalfEdges=g.incidentHalfEdges.map(D=>r[D])}),t.boundaries=e.boundaries.map(g=>{const A=ml.pool.create(g.halfEdges.map(C=>r[C]));return o[g.id]=A,A.signedArea=g.signedArea,A.bounds=Je.Bounds2IO.fromStateObject(g.bounds),A}),e.boundaries.forEach((g,A)=>{const C=t.boundaries[A];C.childBoundaries=g.childBoundaries.map(D=>o[D])}),t.innerBoundaries=e.innerBoundaries.map(g=>o[g]),t.outerBoundaries=e.outerBoundaries.map(g=>o[g]),t.shapeIds=e.shapeIds,t.loops=e.loops.map(g=>{const A=new Al(g.shapeId,g.closed);return c[g.id]=A,A.halfEdges=g.halfEdges.map(C=>r[C]),A}),t.faces=e.faces.map((g,A)=>{const C=A===0?t.unboundedFace:new xo(o[g.boundary]);return p[g.id]=C,C.holes=g.holes.map(D=>o[D]),C.windingMap=g.windingMap,C.filled=g.filled,C}),e.edges.forEach((g,A)=>{const C=t.edges[A];C.forwardHalf.face=g.forwardHalf.face===null?null:p[g.forwardHalf.face],C.reversedHalf.face=g.reversedHalf.face===null?null:p[g.reversedHalf.face]}),t}addShape(e,t,i){for(let s=0;s<t.subpaths.length;s++)this.addSubpath(e,t.subpaths[s],i)}addSubpath(e,t,i){const s=lt()({ensureClosed:!0},i);if(this.shapeIds.includes(e)||this.shapeIds.push(e),t.segments.length===0)return;const r=t.closed||s.ensureClosed,o=s.ensureClosed?t.getFillSegments():t.segments;let c;const p=[];for(c=0;c<o.length;c++){let A=c-1;A<0&&(A=o.length-1);let C=o[A].end;const D=o[c].start;!r&&c===0&&(C=D),D.equals(C)?p.push(En.pool.create(D)):p.push(En.pool.create(D.average(C)))}r||p.push(En.pool.create(o[o.length-1].end));const g=Al.pool.create(e,r);for(c=0;c<o.length;c++){let A=c+1;r&&A===o.length&&(A=0);const C=Js.pool.create(o[c],p[c],p[A]);g.halfEdges.push(C.forwardHalf),this.addEdge(C)}this.loops.push(g),this.vertices.push(...p)}computeSimplifiedFaces(){this.eliminateOverlap(),this.eliminateSelfIntersection(),this.eliminateIntersection(),this.collapseVertices(),this.removeBridges(),this.removeLowOrderVertices(),this.orderVertexEdges(),this.extractFaces(),this.computeBoundaryTree(),this.computeWindingMap()}computeFaceInclusion(e){for(let t=0;t<this.faces.length;t++){const i=this.faces[t];i.filled=e(i.windingMap)}}createFilledSubGraph(){const e=new fs,t={};for(let i=0;i<this.edges.length;i++){const s=this.edges[i];if(s.forwardHalf.face.filled!==s.reversedHalf.face.filled){if(!t[s.startVertex.id]){const c=En.pool.create(s.startVertex.point);e.vertices.push(c),t[s.startVertex.id]=c}if(!t[s.endVertex.id]){const c=En.pool.create(s.endVertex.point);e.vertices.push(c),t[s.endVertex.id]=c}const r=t[s.startVertex.id],o=t[s.endVertex.id];e.addEdge(Js.pool.create(s.segment,r,o))}}return e.collapseAdjacentEdges(),e.orderVertexEdges(),e.extractFaces(),e.computeBoundaryTree(),e.fillAlternatingFaces(),e}facesToShape(){const e=[];for(let t=0;t<this.faces.length;t++){const i=this.faces[t];if(i.filled){e.push(Yi.fromBoundary(i.boundary));for(let s=0;s<i.holes.length;s++)e.push(Yi.fromBoundary(i.holes[s]))}}return new Tt(e)}dispose(){for(;this.boundaries.length;)this.boundaries.pop().dispose();for($t(this.innerBoundaries),$t(this.outerBoundaries);this.loops.length;)this.loops.pop().dispose();for(;this.faces.length;)this.faces.pop().dispose();for(;this.vertices.length;)this.vertices.pop().dispose();for(;this.edges.length;)this.edges.pop().dispose()}addEdge(e){this.edges.push(e),e.startVertex.incidentHalfEdges.push(e.reversedHalf),e.endVertex.incidentHalfEdges.push(e.forwardHalf)}removeEdge(e){Ns(this.edges,e),Ns(e.startVertex.incidentHalfEdges,e.reversedHalf),Ns(e.endVertex.incidentHalfEdges,e.forwardHalf)}replaceEdgeInLoops(e,t){const i=[];for(let s=0;s<t.length;s++)i.push(t[t.length-1-s].getReversed());for(let s=0;s<this.loops.length;s++){const r=this.loops[s];for(let o=r.halfEdges.length-1;o>=0;o--){const c=r.halfEdges[o];if(c.edge===e){const p=c===e.forwardHalf?t:i;r.halfEdges.splice(o,1,...p)}}}}collapseAdjacentEdges(){let e=!0;for(;e;){e=!1;for(let t=0;t<this.vertices.length;t++){const i=this.vertices[t];if(i.incidentHalfEdges.length===2){const s=i.incidentHalfEdges[0].edge,r=i.incidentHalfEdges[1].edge;let o=s.segment,c=r.segment;const p=s.getOtherVertex(i),g=r.getOtherVertex(i);if(s.startVertex===i&&(o=o.reversed()),r.endVertex===i&&(c=c.reversed()),o instanceof ri&&c instanceof ri&&o.tangentAt(0).normalized().distance(c.tangentAt(0).normalized())<1e-6){this.removeEdge(s),this.removeEdge(r),s.dispose(),r.dispose(),Ns(this.vertices,i),i.dispose();const A=new ri(p.point,g.point);this.addEdge(new Js(A,p,g)),e=!0;break}}}}}eliminateOverlap(){const t=new Hg,i=new GA(1e-4),s=Kg++,r=p=>{const g=p.segment.bounds;t.push({start:!0,edge:p},g.minY-1e-4),t.push({start:!1,edge:p},g.maxY+1e-4)},o=p=>{p.internalData.removedId=s};for(let p=0;p<this.edges.length;p++)r(this.edges[p]);const c=[];for(;t.length;){const p=t.pop(),g=p.edge;if(g.internalData.removedId!==s)if(p.start){let A=!1,C,D;if(i.query(g,P=>{const F=g.segment.getOverlaps(P.segment);if(F!==null&&F.length)for(let K=0;K<F.length;K++){const M=F[K];if(Math.abs(M.t1-M.t0)>1e-5&&Math.abs(M.qt1-M.qt0)>1e-5)return D=this.splitOverlap(g,P,M),A=!0,C=P,!0}return!1}),A){i.removeItem(C),o(C),o(g);for(let P=0;P<D.length;P++)r(D[P]);c.push(g),c.push(C)}else i.addItem(g)}else i.removeItem(g)}for(let p=0;p<c.length;p++)c[p].dispose()}splitOverlap(e,t,i){const s=[],r=e.segment,o=t.segment;this.removeEdge(e),this.removeEdge(t);let c=i.t0,p=i.t1,g=i.qt0,A=i.qt1;c<1e-5&&(c=0),p>1-1e-5&&(p=1),g<1e-5&&(g=0),A>1-1e-5&&(A=1);const C=c>0?r.subdivided(c)[0]:null,D=g>0?o.subdivided(g)[0]:null,P=p<1?r.subdivided(p)[1]:null,F=A<1?o.subdivided(A)[1]:null;let K=r;c>0&&(K=K.subdivided(c)[1]),p<1&&(K=K.subdivided(Un(c,1,0,1,p))[0]);let M;C&&D?(M=En.pool.create(K.start),this.vertices.push(M)):C?M=i.a>0?t.startVertex:t.endVertex:M=e.startVertex;let U;P&&F?(U=En.pool.create(K.end),this.vertices.push(U)):P?U=i.a>0?t.endVertex:t.startVertex:U=e.endVertex;const $=Js.pool.create(K,M,U);s.push($);let re,pe,ce,T;C&&(re=Js.pool.create(C,e.startVertex,M),s.push(re)),P&&(pe=Js.pool.create(P,U,e.endVertex),s.push(pe)),D&&(ce=Js.pool.create(D,t.startVertex,i.a>0?M:U),s.push(ce)),F&&(T=Js.pool.create(F,i.a>0?U:M,t.endVertex),s.push(T));for(let xe=0;xe<s.length;xe++)this.addEdge(s[xe]);const Ce=(C?[re]:[]).concat([$]).concat(P?[pe]:[]),ze=(D?[ce]:[]).concat([$]).concat(F?[T]:[]),be=[],Be=[];for(let xe=0;xe<Ce.length;xe++)be.push(Ce[xe].forwardHalf);for(let xe=0;xe<ze.length;xe++){const Qe=ze[xe]!==$||i.a>0;Be.push(Qe?ze[xe].forwardHalf:ze[xe].reversedHalf)}return this.replaceEdgeInLoops(e,be),this.replaceEdgeInLoops(t,Be),s}eliminateSelfIntersection(){for(let e=this.edges.length-1;e>=0;e--){const t=this.edges[e],i=t.segment;if(i instanceof nn){const s=i.getSelfIntersection();if(s){const r=i.subdivisions([s.aT,s.bT]),o=En.pool.create(s.point);this.vertices.push(o);const c=Js.pool.create(r[0],t.startVertex,o),p=Js.pool.create(r[1],o,o),g=Js.pool.create(r[2],o,t.endVertex);this.removeEdge(t),this.addEdge(c),this.addEdge(p),this.addEdge(g),this.replaceEdgeInLoops(t,[c.forwardHalf,p.forwardHalf,g.forwardHalf]),t.dispose()}}}}eliminateIntersection(){const t=new Hg,i=new GA(1e-4),s=Kg++,r=p=>{const g=p.segment.bounds;t.push({start:!0,edge:p},g.minY-1e-4),t.push({start:!1,edge:p},g.maxY+1e-4)},o=p=>{p.internalData.removedId=s};for(let p=0;p<this.edges.length;p++)r(this.edges[p]);const c=[];for(;t.length;){const p=t.pop(),g=p.edge;if(g.internalData.removedId!==s)if(p.start){let A=!1,C,D,P;if(i.query(g,F=>{const K=g.segment,M=F.segment;let U=Gs.intersect(K,M);if(U=U.filter($=>{const re=$.point;return fs.isInternal(re,$.aT,K,XA,Ed)||fs.isInternal(re,$.bT,M,XA,Ed)}),U.length){const $=U[0],re=this.simpleSplit(g,F,$.aT,$.bT,$.point);if(re)return A=!0,C=F,D=re.addedEdges,P=re.removedEdges,!0}return!1}),A){P.includes(g)?(o(g),c.push(g)):i.addItem(g),P.includes(C)&&(i.removeItem(C),o(C),c.push(C));for(let F=0;F<D.length;F++)r(D[F])}else i.addItem(g)}else i.removeItem(g)}for(let p=0;p<c.length;p++)c[p].dispose()}simpleSplit(e,t,i,s,r){const o=fs.isInternal(r,i,e.segment,jA,Ed),c=fs.isInternal(r,s,t.segment,jA,Ed);let p=null;o?c?(p=En.pool.create(r),this.vertices.push(p)):p=s<.5?t.startVertex:t.endVertex:p=i<.5?e.startVertex:e.endVertex;let g=!1;const A=[],C=[];return o&&p!==e.startVertex&&p!==e.endVertex&&(A.push(...this.splitEdge(e,i,p)),C.push(e),g=!0),c&&p!==t.startVertex&&p!==t.endVertex&&(A.push(...this.splitEdge(t,s,p)),C.push(t),g=!0),g?{addedEdges:A,removedEdges:C}:null}splitEdge(e,t,i){const s=e.segment.subdivided(t),r=Js.pool.create(s[0],e.startVertex,i),o=Js.pool.create(s[1],i,e.endVertex);return this.removeEdge(e),this.addEdge(r),this.addEdge(o),this.replaceEdgeInLoops(e,[r.forwardHalf,o.forwardHalf]),[r,o]}collapseVertices(){const e=10*Jd,t=new Hg,i=new AL(e),s=Kg++,r=p=>{t.push({start:!0,vertex:p},p.point.y-e),t.push({start:!1,vertex:p},p.point.y+e)},o=p=>{p.internalData.removedId=s};for(let p=0;p<this.vertices.length;p++)r(this.vertices[p]);const c=[];for(;t.length;){const p=t.pop(),g=p.vertex;if(g.internalData.removedId!==s)if(p.start){let A=!1,C,D;if(i.query(g,P=>{const F=g.point.distance(P.point);if(F<Jd){const K=En.pool.create(F===0?g.point:g.point.average(P.point));this.vertices.push(K),Ns(this.vertices,g),Ns(this.vertices,P);for(let M=this.edges.length-1;M>=0;M--){const U=this.edges[M],$=U.startVertex===g||U.startVertex===P,re=U.endVertex===g||U.endVertex===P;if($&&re){if((U.segment.bounds.width>1e-5||U.segment.bounds.height>1e-5)&&(U.segment instanceof nn||U.segment instanceof Bi||U.segment instanceof $s)){const pe=Js.pool.create(U.segment,K,K);this.addEdge(pe),this.replaceEdgeInLoops(U,[pe.forwardHalf])}else this.replaceEdgeInLoops(U,[]);this.removeEdge(U),U.dispose()}else $?(U.startVertex=K,K.incidentHalfEdges.push(U.reversedHalf),U.updateReferences()):re&&(U.endVertex=K,K.incidentHalfEdges.push(U.forwardHalf),U.updateReferences())}return D=[K],A=!0,C=P,!0}return!1}),A){i.removeItem(C),o(C),o(g);for(let P=0;P<D.length;P++)r(D[P]);c.push(g),c.push(C)}else i.addItem(g)}else i.removeItem(g)}for(let p=0;p<c.length;p++)c[p].dispose()}markBridges(e,t){t.visited=!0,t.visitIndex=t.lowIndex=bL++;for(let i=0;i<t.incidentHalfEdges.length;i++){const s=t.incidentHalfEdges[i].edge,r=t.incidentHalfEdges[i].startVertex;r.visited?s.visited||(t.lowIndex=Math.min(t.lowIndex,r.visitIndex)):(s.visited=!0,this.markBridges(e,r),t.lowIndex=Math.min(t.lowIndex,r.lowIndex),r.lowIndex>t.visitIndex&&e.push(s))}}removeBridges(){const e=[];for(let t=0;t<this.vertices.length;t++){const i=this.vertices[t];i.visited||this.markBridges(e,i)}for(let t=0;t<e.length;t++){const i=e[t];this.removeEdge(i),this.replaceEdgeInLoops(i,[]),i.dispose()}}removeLowOrderVertices(){let e=!0;for(;e;){e=!1;for(let t=this.vertices.length-1;t>=0;t--){const i=this.vertices[t];if(i.incidentHalfEdges.length<2){for(let s=0;s<i.incidentHalfEdges.length;s++){const r=i.incidentHalfEdges[s].edge;this.removeEdge(r),this.replaceEdgeInLoops(r,[]),r.dispose()}this.vertices.splice(t,1),i.dispose(),e=!0;break}}}}orderVertexEdges(){for(let e=0;e<this.vertices.length;e++)this.vertices[e].sortEdges()}extractFaces(){const e=[];for(let t=0;t<this.edges.length;t++)e.push(this.edges[t].forwardHalf),e.push(this.edges[t].reversedHalf);for(;e.length;){const t=[];let i=e[0];const s=i;for(;i&&(Ns(e,i),t.push(i),i=i.getNext(),i!==s););const r=ml.pool.create(t);(r.signedArea>0?this.innerBoundaries:this.outerBoundaries).push(r),this.boundaries.push(r)}for(let t=0;t<this.innerBoundaries.length;t++)this.faces.push(xo.pool.create(this.innerBoundaries[t]))}computeBoundaryTree(){const e=[],t=new _r(nt.rotation2(1.5729657));for(let i=0;i<this.outerBoundaries.length;i++){const s=this.outerBoundaries[i],r=s.computeExtremeRay(t);let o=null,c=Number.POSITIVE_INFINITY,p;for(let g=0;g<this.edges.length;g++){const A=this.edges[g],C=A.segment.intersection(r);for(let D=0;D<C.length;D++){const P=C[D];P.distance<c&&(o=A,c=P.distance,p=P.wind)}}if(o===null)e.push(s);else{const A=p<0?o.reversedHalf:o.forwardHalf;this.getBoundaryOfHalfEdge(A).childBoundaries.push(s)}}e.forEach(this.unboundedFace.recursivelyAddHoles.bind(this.unboundedFace));for(let i=0;i<this.faces.length;i++){const s=this.faces[i];s.boundary!==null&&s.boundary.childBoundaries.forEach(s.recursivelyAddHoles.bind(s))}}computeWindingMap(){const e=this.edges.slice(),t={};for(let i=0;i<this.shapeIds.length;i++)t[this.shapeIds[i]]=0;for(this.unboundedFace.windingMap=t;e.length;)for(let i=e.length-1;i>=0;i--){const s=e[i],r=s.forwardHalf,o=s.reversedHalf,c=r.face,p=o.face,g=c.windingMap!==null,A=p.windingMap!==null;if(g&&A)e.splice(i,1);else{if(!g&&!A)continue;{const C=g?c:p,D=g?p:c,P={};for(let F=0;F<this.shapeIds.length;F++){const K=this.shapeIds[F],M=this.computeDifferential(s,K);P[K]=C.windingMap[K]+M*(g?-1:1)}D.windingMap=P}}}}computeDifferential(e,t){let i=0;for(let s=0;s<this.loops.length;s++){const r=this.loops[s];if(r.shapeId===t)for(let o=0;o<r.halfEdges.length;o++){const c=r.halfEdges[o];c===e.forwardHalf?i++:c===e.reversedHalf&&i--}}return i}fillAlternatingFaces(){let e=0;for(let t=0;t<this.faces.length;t++)this.faces[t].filled=null,e++;for(this.unboundedFace.filled=!1,e--;e;)for(let t=0;t<this.edges.length;t++){const i=this.edges[t],s=i.forwardHalf.face,r=i.reversedHalf.face,o=s.filled===null,c=r.filled===null;o&&!c?(s.filled=!r.filled,e--):!o&&c&&(r.filled=!s.filled,e--)}}getBoundaryOfHalfEdge(e){for(let t=0;t<this.boundaries.length;t++){const i=this.boundaries[t];if(i.hasHalfEdge(e))return i}throw new Error("Could not find boundary")}static isInternal(e,t,i,s,r){return t>r&&t<1-r&&e.distance(i.start)>s&&e.distance(i.end)>s}static BINARY_NONZERO_UNION(e){return e[0]!==0||e[1]!==0}static BINARY_NONZERO_INTERSECTION(e){return e[0]!==0&&e[1]!==0}static BINARY_NONZERO_DIFFERENCE(e){return e[0]!==0&&e[1]===0}static BINARY_NONZERO_XOR(e){return e[0]!==0!=(e[1]!==0)}static binaryResult(e,t,i){const s=new fs;s.addShape(0,e),s.addShape(1,t),s.computeSimplifiedFaces(),s.computeFaceInclusion(i);const r=s.createFilledSubGraph(),o=r.facesToShape();return s.dispose(),r.dispose(),o}static unionNonZero(e){const t=new fs;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>{for(let o=0;o<e.length;o++)if(r[o]!==0)return!0;return!1});const i=t.createFilledSubGraph(),s=i.facesToShape();return t.dispose(),i.dispose(),s}static intersectionNonZero(e){const t=new fs;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>{for(let o=0;o<e.length;o++)if(r[o]===0)return!1;return!0});const i=t.createFilledSubGraph(),s=i.facesToShape();return t.dispose(),i.dispose(),s}static xorNonZero(e){const t=new fs;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>{let o=!1;for(let c=0;c<e.length;c++)r[c]!==0&&(o=!o);return o});const i=t.createFilledSubGraph(),s=i.facesToShape();return t.dispose(),i.dispose(),s}static simplifyNonZero(e){const t=new fs;t.addShape(0,e),t.computeSimplifiedFaces(),t.computeFaceInclusion(r=>r[0]!==0);const i=t.createFilledSubGraph(),s=i.facesToShape();return t.dispose(),i.dispose(),s}static clipShape(e,t,i){let s,r,o;const g=lt()({includeExterior:!1,includeBoundary:!0,includeInterior:!0},i),A=fs.simplifyNonZero(e),C=new fs;for(C.addShape(0,t,{ensureClosed:!1}),C.addShape(1,A),C.eliminateOverlap(),C.eliminateSelfIntersection(),C.eliminateIntersection(),C.collapseVertices(),s=0;s<C.loops.length;s++)if(o=C.loops[s],o.shapeId===1)for(r=0;r<o.halfEdges.length;r++)o.halfEdges[r].edge.data=!0;const D=[];for(s=0;s<C.loops.length;s++)if(o=C.loops[s],o.shapeId===0){let P=[];for(r=0;r<o.halfEdges.length;r++){const F=o.halfEdges[r];(F.edge.data?g.includeBoundary:A.containsPoint(F.edge.segment.positionAt(.5))?g.includeInterior:g.includeExterior)?P.push(F.getDirectionalSegment()):P.length&&(D.push(new Yi(P,void 0,o.closed)),P=[])}P.length&&D.push(new Yi(P,void 0,o.closed))}return C.dispose(),new Tt(D)}}const vL=new ui(!1),Pc=vL;class Tn extends bn{}Tn.DRAG=new Tn;Tn.KEYBOARD_DRAG=new Tn;Tn.enumeration=new br(Tn,{phetioDocumentation:"entries when signifying Intent of the pointer"});class Dl{constructor(e,t){this.point=e,this.type=t,this.trail=null,this.inputEnabledTrail=null,this.isDownProperty=new di(!1),this.attachedProperty=new di(!1),this._listeners=[],this._attachedListener=null,this._cursor=null,this.lastEventContext=null,this._intents=[],this._pointerCaptured=!1,this._listenerForDragReserve=null,this._listenerForKeyboardDragReserve=null}setCursor(e){return this._cursor=e,this}set cursor(e){this.setCursor(e)}get cursor(){return this.getCursor()}getCursor(){return this._cursor}getListeners(){return this._listeners.slice()}get listeners(){return this.getListeners()}addInputListener(e,t){this._listeners.push(e),t&&this.attach(e)}removeInputListener(e){const t=te.indexOf(this._listeners,e);this.isAttached()&&e===this._attachedListener&&this.detach(e),this._listeners.splice(t,1)}getAttachedListener(){return this._attachedListener}get attachedListener(){return this.getAttachedListener()}isAttached(){return this.attachedProperty.value}isTouchLike(){return!1}set isDown(e){this.isDownProperty.value=e}get isDown(){return this.isDownProperty.value}interruptAttached(){this.isAttached()&&this._attachedListener.interrupt()}interruptAll(){const e=this._listeners.slice();for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}}attach(e){this.attachedProperty.value=!0,this._attachedListener=e}updatePoint(e,t="event"){const i=this.hasPointChanged(e);return this.point=e,i}down(e){this.isDown=!0}up(e,t){return this.isDown=!1,this.updatePoint(e,"up")}cancel(e){return this.isDown=!1,this.updatePoint(e,"cancel")}detach(e){this.attachedProperty.value=!1,this._attachedListener=null}hasPointChanged(e){return this.point!==e&&(!e||!this.point||!this.point.equals(e))}addIntent(e){this._intents.includes(e)||this._intents.push(e)}removeIntent(e){if(this._intents.includes(e)){const t=this._intents.indexOf(e);this._intents.splice(t,1)}}hasIntent(e){return this._intents.includes(e)}reserveForDrag(){if(!this._intents.includes(Tn.DRAG)){this.addIntent(Tn.DRAG);const e={up:t=>{this.removeIntent(Tn.DRAG),this.removeInputListener(this._listenerForDragReserve),this._listenerForDragReserve=null}};this._listenerForDragReserve=e,this.addInputListener(this._listenerForDragReserve)}}reserveForKeyboardDrag(){if(!this._intents.includes(Tn.KEYBOARD_DRAG)){this.addIntent(Tn.KEYBOARD_DRAG);const e={keyup:i=>t(),blur:i=>t()},t=()=>{this.removeIntent(Tn.KEYBOARD_DRAG),this.removeInputListener(this._listenerForKeyboardDragReserve),this._listenerForKeyboardDragReserve=null};this._listenerForKeyboardDragReserve=e,this.addInputListener(this._listenerForKeyboardDragReserve)}}onGotPointerCapture(){this._pointerCaptured=!0}onLostPointerCapture(){this._pointerCaptured&&this.interruptAll(),this._pointerCaptured=!1}hasPointerCaptured(){return this._pointerCaptured}dispose(){this._listenerForDragReserve&&this._listeners.includes(this._listenerForDragReserve)&&this.removeInputListener(this._listenerForDragReserve),this._listenerForKeyboardDragReserve&&this._listeners.includes(this._listenerForKeyboardDragReserve)&&this.removeInputListener(this._listenerForKeyboardDragReserve)}toString(){return`Pointer#${this.type}_at_${this.point}`}}Dl.PointerIO=new Yt("PointerIO",{valueType:Dl,toStateObject:n=>({point:n.point.toStateObject(),type:n.type}),stateSchema:{point:we.Vector2IO,type:Hi}});const Dd="?";class q0{constructor(e){const t=lt()({modifierKeys:[],ignoredModifierKeys:[]},e);this.key=t.key,this.modifierKeys=t.modifierKeys,this.ignoredModifierKeys=t.ignoredModifierKeys}getHotkeyString(){return[...this.modifierKeys,this.key].join("+")}static keyStrokeToKeyDescriptor(e){const t=e.split("+");t.forEach(c=>{c.length>1&&c.includes(Dd)});const i=[],s=[];t.forEach(c=>{if(c.includes(Dd)){const p=c.replace(Dd,"");if(c.startsWith(Dd)){const g=K1.filter(A=>A!==p);s.push(...g),i.push(p)}else s.push(p)}else i.push(c)});const r=i.pop(),o=i.filter(c=>!s.includes(c));return new q0({key:r,modifierKeys:o,ignoredModifierKeys:s})}}class yn{constructor(e){const t=lt()({keyboardHelpDialogPDOMLabelStringProperty:null,keyboardHelpDialogLabelStringProperty:null,global:!1,binderName:""},e);this.keyStringProperties=t.keyStringProperties,this.keyboardHelpDialogLabelStringProperty=t.keyboardHelpDialogLabelStringProperty,this.keyboardHelpDialogPDOMLabelStringProperty=t.keyboardHelpDialogPDOMLabelStringProperty,this.repoName=t.repoName,this.global=t.global,this.binderName=t.binderName,this.keyDescriptorsProperty=Oi.deriveAny(this.keyStringProperties,()=>this.keyStringProperties.map(i=>q0.keyStrokeToKeyDescriptor(i.value)))}hasKeyStroke(e){return this.keyStringProperties.some(t=>t.value===e)}serialize(){var e;return{keyStrings:this.keyStringProperties.map(t=>t.value),binderName:this.binderName||((e=this.keyboardHelpDialogLabelStringProperty)==null?void 0:e.value),repoName:this.repoName,global:this.global}}dispose(){this.keyDescriptorsProperty.dispose()}static combineKeyStringProperties(e){return e.reduce((t,i)=>t.concat(i.keyStringProperties),[])}static anyHaveKeyStroke(e,t){return e.some(i=>i.hasKeyStroke(t))}}const xh={isPlatformMac:()=>te.includes(self.navigator.platform,"Mac"),getPlatformZoomMetaKey:()=>xh.isPlatformMac()?"metaKey":"ctrlKey",isZoomCommand:(n,e)=>{const t=e?Ne.KEY_EQUALS:Ne.KEY_MINUS,i=xh.getPlatformZoomMetaKey();return n[i]&&Ne.isKeyEvent(n,t)},isZoomResetCommand:n=>{const e=xh.getPlatformZoomMetaKey();return n[e]&&Ne.isKeyEvent(n,Ne.KEY_0)},ZOOM_IN_HOTKEY_DATA:new yn({keyStringProperties:[new hi("ctrl+equals"),new hi("meta+equals")],binderName:"Zoom in",repoName:"scenery",global:!0}),ZOOM_OUT_HOTKEY_DATA:new yn({keyStringProperties:[new hi("ctrl+minus"),new hi("meta+minus")],binderName:"Zoom in",repoName:"scenery",global:!0}),RESET_ZOOM_HOTKEY_DATA:new yn({keyStringProperties:[new hi("ctrl+0"),new hi("meta+0")],binderName:"Reset zoom",repoName:"scenery",global:!0})};class lc extends Dl{constructor(e){super(e,"mouse"),this.id=null,this.leftDown=!1,this.middleDown=!1,this.rightDown=!1,this.wheelDelta=new Ri(0,0,0),this.wheelDeltaMode=0}down(e){switch(e.button){case 0:this.leftDown=!0;break;case 1:this.middleDown=!0;break;case 2:this.rightDown=!0;break}return super.down(e)}up(e,t){switch(t.button){case 0:this.leftDown=!1;break;case 1:this.middleDown=!1;break;case 2:this.rightDown=!1;break}return super.up(e,t)}move(e){const t=this.hasPointChanged(e);return this.point=e,t}over(e){const t=this.hasPointChanged(e);return this.point=e,t}out(e){return this.hasPointChanged(e)}wheel(e){const t=e;this.wheelDelta.setXYZ(t.deltaX,t.deltaY,t.deltaZ),this.wheelDeltaMode=t.deltaMode}toString(){return"Mouse"}}class Ea extends _r{modelToViewPosition(e){return this.transformPosition2(e)}modelToViewXY(e,t){return new we(this.modelToViewX(e),this.modelToViewY(t))}modelToViewX(e){return this.matrix.m00()*e+this.matrix.m02()}modelToViewY(e){return this.matrix.m11()*e+this.matrix.m12()}modelToViewDelta(e){return this.transformDelta2(e)}modelToViewNormal(e){return this.transformNormal2(e)}modelToViewDeltaX(e){return this.transformDeltaX(e)}modelToViewDeltaY(e){return this.transformDeltaY(e)}modelToViewBounds(e){return this.transformBounds2(e)}modelToViewShape(e){return this.transformShape(e)}modelToViewRay(e){return this.transformRay2(e)}viewToModelPosition(e){return this.inversePosition2(e)}viewToModelXY(e,t){return new we(this.viewToModelX(e),this.viewToModelY(t))}viewToModelX(e){const t=this.getInverse();return t.m00()*e+t.m02()}viewToModelY(e){const t=this.getInverse();return t.m11()*e+t.m12()}viewToModelDelta(e){return this.inverseDelta2(e)}viewToModelDeltaXY(e,t){return new we(this.viewToModelDeltaX(e),this.viewToModelDeltaY(t))}viewToModelNormal(e){return this.inverseNormal2(e)}viewToModelDeltaX(e){return this.inverseDeltaX(e)}viewToModelDeltaY(e){return this.inverseDeltaY(e)}viewToModelBounds(e){return this.inverseBounds2(e)}viewToModelShape(e){return this.inverseShape(e)}viewToModelRay(e){return this.inverseRay2(e)}validateMatrix(e){super.validateMatrix(e)}setToRectangleMapping(e,t){const i=t.width/e.width,s=t.x-i*e.x,r=t.height/e.height,o=t.y-r*e.y;return this.setMatrix(nt.affine(i,0,s,0,r,o)),this}setToRectangleInvertedYMapping(e,t){const i=t.width/e.width,s=t.x-i*e.x,r=-t.height/e.height,o=t.y-r*e.getMaxY();return this.setMatrix(nt.affine(i,0,s,0,r,o)),this}static createIdentity(){return new Ea(nt.IDENTITY)}static createOffsetScaleMapping(e,t){return new Ea(nt.affine(t,0,e.x,0,t,e.y))}static createOffsetXYScaleMapping(e,t,i){return new Ea(nt.affine(t,0,e.x,0,i,e.y))}static createSinglePointXYScaleMapping(e,t,i,s){const r=t.x-e.x*i,o=t.y-e.y*s;return Ea.createOffsetXYScaleMapping(new we(r,o),i,s)}static createSinglePointScaleMapping(e,t,i){return Ea.createSinglePointXYScaleMapping(e,t,i,i)}static createSinglePointScaleInvertedYMapping(e,t,i){return Ea.createSinglePointXYScaleMapping(e,t,i,-i)}static createRectangleMapping(e,t){return new Ea().setToRectangleMapping(e,t)}static createRectangleInvertedYMapping(e,t){return new Ea().setToRectangleInvertedYMapping(e,t)}}class VL{constructor(e,t){this.pointer=e,this.trail=t,this.interrupted=!1,this.initialPoint=e.point,this.localPoint=null,this.recomputeLocalPoint()}recomputeLocalPoint(){this.localPoint=this.trail.globalToLocalPoint(this.pointer.point)}get targetPoint(){return this.trail.globalToParentPoint(this.pointer.point)}}const SL=25;class wL{constructor(e,t){const i=lt()({mouseButton:0,pressCursor:"pointer",allowScale:!0,allowRotation:!0,allowMultitouchInterruption:!1,allowMoveInterruption:!0,minScale:1,maxScale:4,tandem:Xe.REQUIRED},t);this._targetNode=e,this._minScale=i.minScale,this._maxScale=i.maxScale,this._mouseButton=i.mouseButton,this._pressCursor=i.pressCursor,this._allowScale=i.allowScale,this._allowRotation=i.allowRotation,this._allowMultitouchInterruption=i.allowMultitouchInterruption,this._allowMoveInterruption=i.allowMoveInterruption,this._presses=[],this._backgroundPresses=[],this.matrixProperty=new hi(e.matrix.copy(),{phetioValueType:nt.Matrix3IO,tandem:i.tandem.createTandem("matrixProperty"),phetioReadOnly:!0}),this.matrixProperty.link(s=>{this._targetNode.matrix=s}),this._interrupted=!1,this._pressListener={move:s=>{const r=this.findPress(s.pointer);this.movePress(r)},up:s=>{const r=this.findPress(s.pointer);this.removePress(r)},cancel:s=>{const r=this.findPress(s.pointer);r.interrupted=!0,this.removePress(r)},interrupt:()=>{this.interrupt()}},this._backgroundListener={up:s=>{if(!this._interrupted){const r=this.findBackgroundPress(s.pointer);this.removeBackgroundPress(r)}},move:s=>{const r=this._backgroundPresses.filter(o=>!o.pointer.hasIntent(Tn.DRAG)&&o.initialPoint.distance(o.pointer.point)>SL);(this.getCurrentScale()!==1||r.length>=2)&&r.forEach(o=>{this.removeBackgroundPress(o),this.interruptOtherListeners(o.pointer),this.addPress(o)})},cancel:s=>{if(!this._interrupted){const r=this.findBackgroundPress(s.pointer);this.removeBackgroundPress(r)}},interrupt:()=>{this.interrupt()}}}findPress(e){for(let t=0;t<this._presses.length;t++)if(this._presses[t].pointer===e)return this._presses[t];return null}findBackgroundPress(e){for(let t=0;t<this._backgroundPresses.length;t++)if(this._backgroundPresses[t].pointer===e)return this._backgroundPresses[t];return null}hasPress(e){return te.some(this._presses.concat(this._backgroundPresses),t=>t.pointer===e.pointer)}interruptOtherListeners(e){const t=e.getListeners();for(let i=0;i<t.length;i++){const s=t[i];s!==this._backgroundListener&&s.interrupt&&s.interrupt()}}down(e){if(e.pointer instanceof lc&&e.domEvent instanceof MouseEvent&&e.domEvent.button!==this._mouseButton)return;this._interrupted=!1;let t;te.includes(e.trail.nodes,this._targetNode)?t=e.trail.subtrailTo(this._targetNode,!1):t=this._targetNode.getUniqueTrailTo(e.target);const i=new VL(e.pointer,t);!this._allowMoveInterruption&&!this._allowMultitouchInterruption?e.pointer.isAttached()||this.addPress(i):this.addBackgroundPress(i)}addPress(e){this.hasPress(e)||(this._presses.push(e),e.pointer.cursor=this._pressCursor,e.pointer.addInputListener(this._pressListener,!0),this.recomputeLocals(),this.reposition())}movePress(e){this.reposition()}removePress(e){e.pointer.removeInputListener(this._pressListener),e.pointer.cursor=null,Ns(this._presses,e),this.recomputeLocals(),this.reposition()}addBackgroundPress(e){this.hasPress(e)||(this._backgroundPresses.push(e),e.pointer.addInputListener(this._backgroundListener,!1))}removeBackgroundPress(e){e.pointer.removeInputListener(this._backgroundListener),Ns(this._backgroundPresses,e)}reposition(){this.matrixProperty.set(this.computeMatrix())}recomputeLocals(){for(let e=0;e<this._presses.length;e++)this._presses[e].recomputeLocalPoint()}interrupt(){for(;this._presses.length;)this.removePress(this._presses[this._presses.length-1]);for(;this._backgroundPresses.length;)this.removeBackgroundPress(this._backgroundPresses[this._backgroundPresses.length-1]);this._interrupted=!0}computeMatrix(){return this._presses.length===0?this._targetNode.getMatrix():this._presses.length===1?this.computeSinglePressMatrix():this._allowScale&&this._allowRotation?this.computeTranslationRotationScaleMatrix():this._allowScale?this.computeTranslationScaleMatrix():this._allowRotation?this.computeTranslationRotationMatrix():this.computeTranslationMatrix()}computeSinglePressMatrix(){const e=this._presses[0].targetPoint,t=this._presses[0].localPoint,i=this._targetNode.localToParentPoint(t),s=e.minus(i);return nt.translationFromVector(s).timesMatrix(this._targetNode.getMatrix())}computeTranslationMatrix(){const e=new we(0,0);for(let t=0;t<this._presses.length;t++){e.add(this._presses[t].targetPoint);const i=this._presses[t].localPoint;e.subtract(i)}return nt.translationFromVector(e.dividedScalar(this._presses.length))}computeTranslationScaleMatrix(){const e=this._presses.map(A=>A.localPoint),t=this._presses.map(A=>A.targetPoint),i=new we(0,0),s=new we(0,0);e.forEach(A=>{i.add(A)}),t.forEach(A=>{s.add(A)}),i.divideScalar(this._presses.length),s.divideScalar(this._presses.length);let r=0,o=0;e.forEach(A=>{r+=A.distanceSquared(i)}),t.forEach(A=>{o+=A.distanceSquared(s)});let c=this.getCurrentScale();o!==0&&(c=this.limitScale(Math.sqrt(o/r)));const p=nt.translation(s.x,s.y),g=nt.translation(-i.x,-i.y);return p.timesMatrix(nt.scaling(c)).timesMatrix(g)}limitScale(e){let t=Math.max(e,this._minScale);return t=Math.min(t,this._maxScale),t}computeTranslationRotationMatrix(){let e;const t=new Qt(2,this._presses.length),i=new Qt(2,this._presses.length),s=new we(0,0),r=new we(0,0);for(e=0;e<this._presses.length;e++){const C=this._presses[e].localPoint,D=this._presses[e].targetPoint;s.add(C),r.add(D),t.set(0,e,C.x),t.set(1,e,C.y),i.set(0,e,D.x),i.set(1,e,D.y)}for(s.divideScalar(this._presses.length),r.divideScalar(this._presses.length),e=0;e<this._presses.length;e++)t.set(0,e,t.get(0,e)-s.x),t.set(1,e,t.get(1,e)-s.y),i.set(0,e,i.get(0,e)-r.x),i.set(1,e,i.get(1,e)-r.y);const o=t.times(i.transpose()),c=new fl(o);let p=c.getV().times(c.getU().transpose());p.det()<0&&(p=c.getV().times(Qt.diagonalMatrix([1,-1])).times(c.getU().transpose()));const g=new nt().rowMajor(p.get(0,0),p.get(0,1),0,p.get(1,0),p.get(1,1),0,0,0,1),A=r.minus(g.timesVector2(s));return g.set02(A.x),g.set12(A.y),g}computeTranslationRotationScaleMatrix(){let e;const t=new Qt(this._presses.length*2,4);for(e=0;e<this._presses.length;e++){const g=this._presses[e].localPoint;t.set(2*e+0,0,g.x),t.set(2*e+0,1,g.y),t.set(2*e+0,2,1),t.set(2*e+1,0,g.y),t.set(2*e+1,1,-g.x),t.set(2*e+1,3,1)}const i=new Qt(this._presses.length*2,1);for(e=0;e<this._presses.length;e++){const g=this._presses[e].targetPoint;i.set(2*e+0,0,g.x),i.set(2*e+1,0,g.y)}const s=fl.pseudoinverse(t).times(i),r=s.get(0,0),o=s.get(1,0),c=s.get(2,0),p=s.get(3,0);return new nt().rowMajor(r,o,c,-o,r,p,0,0,1)}getCurrentScale(){return this._targetNode.getScaleVector().x}resetTransform(){this._targetNode.resetTransform(),this.matrixProperty.set(this._targetNode.matrix.copy())}}const QA=new nt;class CL extends wL{constructor(e,t){var s;const i=lt()({panBounds:Je.NOTHING,targetBounds:null,targetScale:1,allowRotation:!1},t);super(e,i),this._panBounds=i.panBounds,this._targetBounds=i.targetBounds||e.globalBounds.copy(),this._targetScale=i.targetScale,this.sourceFramePanBoundsProperty=new hi(this._panBounds,{tandem:(s=i.tandem)==null?void 0:s.createTandem("sourceFramePanBoundsProperty"),phetioReadOnly:!0,phetioValueType:Je.Bounds2IO}),this.sourceFramePanBoundsProperty.lazyLink(()=>{if(Pc.value){const r=Ea.createRectangleMapping(this.sourceFramePanBoundsProperty.get(),this._panBounds),o=this._targetNode.matrix.translation.componentMultiply(r.matrix.getScaleVector()),c=this.matrixProperty.get().getScaleVector();this.matrixProperty.set(nt.translationFromVector(o).timesMatrix(nt.scaling(c.x,c.y)))}},{phetioDependencies:[this.matrixProperty]})}correctReposition(){QA.set(this._targetNode.matrix);const e=this._targetBounds.transformed(this._targetNode.getMatrix());e.left>this._panBounds.left&&(this._targetNode.left=this._panBounds.left-(e.left-this._targetNode.left)),e.top>this._panBounds.top&&(this._targetNode.top=this._panBounds.top-(e.top-this._targetNode.top)),e.right<this._panBounds.right&&(this._targetNode.right=this._panBounds.right+(this._targetNode.right-e.right)),e.bottom<this._panBounds.bottom&&(this._targetNode.bottom=this._panBounds.bottom+(this._targetNode.bottom-e.bottom)),QA.equals(this._targetNode.matrix)||this.matrixProperty.set(this._targetNode.matrix.copy())}addPress(e){super.addPress(e);const i=this._targetBounds.transformed(this._targetNode.getMatrix()).equalsEpsilon(this._panBounds,1e-8);e.pointer.cursor=i?null:this._pressCursor}reposition(){super.reposition(),this.correctReposition()}resetTransform(){super.resetTransform(),this.correctReposition()}setPanBounds(e){this._panBounds=e,this.sourceFramePanBoundsProperty.set(this._panBounds),this.correctReposition()}setTargetBounds(e){this._targetBounds=e,this.correctReposition()}setTargetScale(e){this._targetScale=e}getTargetBounds(){return this._targetBounds}}class $d extends Dl{constructor(e){super(we.ZERO,"pdom"),this.display=e,this.initializeListeners(),this.blockTrustedEvents=!1,this.keydownTargetNode=null}initializeListeners(){this.addInputListener({focus:e=>{const t=this.trail.lastNode();if(t.focusable){const i=rc(this.trail,this.display.rootNode);this.point=i.parentToGlobalPoint(t.center),isNaN(this.point.x)&&this.point.setXY(0,0)}},blur:e=>{this.trail=null,this.keydownTargetNode=null},keydown:e=>{this.blockTrustedEvents&&e.domEvent.isTrusted||(this.keydownTargetNode=e.target)},keyup:e=>{this.blockTrustedEvents&&e.domEvent.isTrusted||this.keydownTargetNode!==e.target&&e.abort()}})}updateTrail(e){return this.trail&&this.trail.equals(e)||(this.trail=e),this.trail}}class bl{constructor(e,t){this._matrices=null,this._dirtyIndex=0,this._listeners=[],this._nodeTransformListeners=[];const i=lt()({isStatic:!1},t);this._isStatic=i.isStatic,this.trail=e,this._nodeTransformListeners=[];for(let s=1;s<this.trail.length;s++){const r=(o=>()=>{this.onTransformChange(o)})(s-1);this._nodeTransformListeners.push(r),e.nodes[s].transformEmitter.addListener(r)}}dispose(){for(let e=1;e<this.trail.length;e++){const t=this._nodeTransformListeners[e-1];this.trail.nodes[e].transformEmitter.hasListener(t)&&this.trail.nodes[e].transformEmitter.removeListener(t)}}addListener(e){this._listeners.push(e)}removeListener(e){const t=te.indexOf(this._listeners,e);this._listeners.splice(t,1)}notifyListeners(){let e=this._listeners;this._isStatic||(e=e.slice());const t=e.length;for(let i=0;i<t;i++)e[i]()}onTransformChange(e){this._dirtyIndex=Math.min(this._dirtyIndex,e),this.notifyListeners()}getMatrix(){if(this._matrices===null){this._matrices=[];for(let t=1;t<this.trail.length;t++)this._matrices.push(new nt)}if(this._matrices.length<=0)return nt.IDENTITY;const e=this._matrices.length;for(let t=this._dirtyIndex;t<e;t++){const i=this.trail.nodes[t+1].matrix;t===0?this._matrices[t].set(i):(this._matrices[t].set(this._matrices[t-1]),this._matrices[t].multiplyMatrix(i))}return this._dirtyIndex=e,this._matrices[e-1]}get matrix(){return this.getMatrix()}}const ZA="all-scroll",PL=150,EL=1e3,Wu=new we(0,0),Td=new we(0,0),JA=new we(0,0),$A=new Je(0,0,0,0);class F0 extends CL{constructor(e,t){const i=lt()({tandem:Xe.REQUIRED,stepEmitter:fn},t);super(e,i),this.trackpadGestureStartScale=1,this.animatingProperty=new di(!1),this._transformTracker=null,this._focusBoundsListener=null,this.sourcePosition=null,this.destinationPosition=null,this.sourceScale=this.getCurrentScale(),this.destinationScale=this.getCurrentScale(),this.scaleGestureTargetPosition=null,this.discreteScales=IL(this._minScale,this._maxScale),this.middlePress=null,this._dragBounds=null,this._transformedPanBounds=this._panBounds.transformed(this._targetNode.matrix.inverted()),this._draggingInDragBounds=!1,this._attachedPointers=[],this.boundsFinite=!1;let s=null,r=null;this.gestureStartAction=new Ti(p=>{p.preventDefault(),this.trackpadGestureStartScale=p.scale,this.scaleGestureTargetPosition=new we(p.pageX,p.pageY)},{phetioPlayback:!0,tandem:i.tandem.createTandem("gestureStartAction"),parameters:[{name:"event",phetioType:El}],phetioEventType:si.USER,phetioDocumentation:"Action that executes whenever a gesture starts on a trackpad in macOS Safari."}),this.gestureChangeAction=new Ti(p=>{p.preventDefault();const g=this.sourceScale+p.scale-this.trackpadGestureStartScale;this.setDestinationScale(g)},{phetioPlayback:!0,tandem:i.tandem.createTandem("gestureChangeAction"),parameters:[{name:"event",phetioType:El}],phetioEventType:si.USER,phetioDocumentation:"Action that executes whenever a gesture changes on a trackpad in macOS Safari."}),qs.safari&&!qs.mobileSafari&&(s=this.handleGestureStartEvent.bind(this),r=this.handleGestureChangeEvent.bind(this),this.trackpadGestureStartScale=this.getCurrentScale(),self.addEventListener("gesturestart",s),self.addEventListener("gesturechange",r)),Xr.keydownEmitter.addListener(this.windowKeydown.bind(this));const o=this.handleFocusChange.bind(this);In.link(o),this.sourceFramePanBoundsProperty.lazyLink(()=>{Pc.value&&(this.initializePositions(),this.sourceScale=this.getCurrentScale(),this.setDestinationScale(this.sourceScale))},{phetioDependencies:[this.matrixProperty]});const c=this.step.bind(this);i.stepEmitter&&i.stepEmitter.addListener(c),this.disposeAnimatedPanZoomListener=()=>{s&&self.removeEventListener("gesturestart",s),r&&self.removeEventListener("gestureChange",r),i.stepEmitter&&i.stepEmitter.removeListener(c),this.animatingProperty.dispose(),this._transformTracker&&this._transformTracker.dispose(),In.unlink(o)}}step(e){this.middlePress&&this.handleMiddlePress(e),this._attachedPointers.length>0&&this.getCurrentScale()>1&&(this._attachedPointers.length>0&&(this._attachedPointers=this._attachedPointers.filter(t=>t.attachedListener)),(this._draggingInDragBounds||this._attachedPointers.some(t=>t instanceof $d))&&this.repositionDuringDrag()),this.animateToTargets(e)}down(e){super.down(e),this._dragBounds!==null&&e.pointer.hasIntent(Tn.DRAG)&&(this._attachedPointers.length===0&&(this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point)),e.pointer.attachedListener&&(this._attachedPointers.includes(e.pointer)||this._attachedPointers.push(e.pointer))),e.pointer.type==="mouse"&&e.pointer instanceof lc&&e.pointer.middleDown&&!this.middlePress?(this.middlePress=new TL(e.pointer,e.trail),e.pointer.cursor=ZA):this.cancelMiddlePress()}cancelMiddlePress(){this.middlePress&&(this.middlePress.pointer.cursor=null,this.middlePress=null,this.stopInProgressAnimation())}movePress(e){this.middlePress||super.movePress(e)}move(e){if(this._attachedPointers.length>0&&this.getCurrentScale()>1)if(this._draggingInDragBounds){if(!this._attachedPointers.includes(e.pointer)){const t=this.hasDragIntent(e.pointer);e.currentTarget!==null&&t&&e.pointer.attachedListener&&this._attachedPointers.push(e.pointer)}}else this._dragBounds&&(this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point))}getTargetNodeDuringDrag(){if(this._attachedPointers.length>0){const e=this._attachedPointers[0].attachedListener;if(e2(e.listener)){const t=e.listener;if(t.isPressed)return t.getCurrentTarget()}}return null}getGlobalBoundsToViewDuringDrag(){let e=null;if(this._attachedPointers.length>0){const t=this._attachedPointers[0].attachedListener;if(t.createPanTargetBounds)e=t.createPanTargetBounds();else if(e2(t.listener)){const i=t.listener;if(i.isPressed){const s=i.getCurrentTarget();s.instances.length===1&&(e=s.instances[0].trail.parentToGlobalBounds(s.visibleBounds))}}}return e}repositionDuringDrag(){const e=this.getGlobalBoundsToViewDuringDrag(),t=this.getTargetNodeDuringDrag();e&&this.keepBoundsInView(e,this._attachedPointers.some(i=>i instanceof $d),t==null?void 0:t.limitPanDirection)}cancelPanningDuringDrag(e){if(e){const t=this._attachedPointers.indexOf(e.pointer);t>-1&&this._attachedPointers.splice(t,1)}else this._attachedPointers=[];this._draggingInDragBounds=!1}up(e){this.cancelPanningDuringDrag(e)}wheel(e){if(!this.middlePress){const t=new DL(e,this._targetScale);this.repositionFromWheel(t,e)}}windowKeydown(e){this.cancelMiddlePress();const t=te.get(self,"phet.joist.sim",null);if((!t||!t.display._accessible||!t.display.pdomRootElement.contains(e.target))&&(this.handleZoomCommands(e),Ne.isArrowKey(e))){const i=new Ug(Xr,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(i)}}keydown(e){const t=e.domEvent;this.cancelMiddlePress(),this.handleZoomCommands(t);const i=e.pointer.hasIntent(Tn.KEYBOARD_DRAG);if(Ne.isArrowKey(t)&&!i){const s=new Ug(Xr,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(s)}}handleFocusChange(e,t){if(this._transformTracker&&(this._transformTracker.dispose(),this._transformTracker=null),t&&t.trail.lastNode()&&t.trail.lastNode().focusPanTargetBoundsProperty&&(t.trail.lastNode().focusPanTargetBoundsProperty.unlink(this._focusBoundsListener),this._focusBoundsListener=null),e){const i=e.trail.lastNode();let s=e.trail;if(e.trail.containsNode(this._targetNode)){const o=e.trail.nodes.indexOf(this._targetNode),c=e.trail.nodes.length;s=e.trail.slice(o,c)}this._transformTracker=new bl(s);const r=()=>{if(this.getCurrentScale()>1){let o;if(i.focusPanTargetBoundsProperty){const c=i.focusPanTargetBoundsProperty.value;o=e.trail.localToGlobalBounds(c)}else o=e.trail.localToGlobalBounds(e.trail.lastNode().localBounds);this.keepBoundsInView(o,!0,i.limitPanDirection)}};this._transformTracker.addListener(r),i.focusPanTargetBoundsProperty&&(this._focusBoundsListener=r,i.focusPanTargetBoundsProperty.link(this._focusBoundsListener)),this.keepTrailInView(e.trail,i.limitPanDirection)}}handleZoomCommands(e){const t=xh.isZoomCommand(e,!0),i=xh.isZoomCommand(e,!1);if(t||i){e.preventDefault();const s=this.getNextDiscreteScale(t),r=new Ug(Xr,s,this._targetScale);this.repositionFromKeys(r)}else xh.isZoomResetCommand(e)&&(e.preventDefault(),this.resetTransform())}handleGestureStartEvent(e){this.gestureStartAction.execute(e)}handleGestureChangeEvent(e){this.gestureChangeAction.execute(e)}handleMiddlePress(e){const t=this.middlePress,i=this.sourcePosition;if(e>0){const r=t.pointer.point.minus(t.initialPoint),o=r.magnitude/100;o>0&&(r.setMagnitude(Math.min(o/e,PL*this._targetScale)),this.setDestinationPosition(i.plus(r)))}}translateScaleToTarget(e,t){const i=this._targetNode.globalToLocalPoint(e),s=this._targetNode.globalToParentPoint(e),r=nt.translation(-i.x,-i.y),o=nt.translation(s.x,s.y),c=this.limitScale(this.getCurrentScale()+t),p=o.timesMatrix(nt.scaling(c)).timesMatrix(r);this.matrixProperty.set(p),this.correctReposition()}setTranslationScaleToTarget(e,t){const i=this._targetNode.globalToLocalPoint(e),s=this._targetNode.globalToParentPoint(e),r=nt.translation(-i.x,-i.y),o=nt.translation(s.x,s.y),c=this.limitScale(t),p=o.timesMatrix(nt.scaling(c)).timesMatrix(r);this.matrixProperty.set(p),this.correctReposition()}translateDelta(e){const t=this._targetNode.globalToParentPoint(this._panBounds.center),i=t.plus(e);this.translateToTarget(i,t)}translateToTarget(e,t){const i=this._targetNode.globalToParentPoint(e),r=this._targetNode.globalToParentPoint(t).minus(i);this.matrixProperty.set(nt.translationFromVector(r).timesMatrix(this._targetNode.getMatrix())),this.correctReposition()}repositionFromKeys(e){const t=this.sourcePosition,i=e.scale,s=this.getCurrentScale();i!==s?(this.setDestinationScale(i),this.scaleGestureTargetPosition=e.computeScaleTargetFromKeyPress()):e.translationVector.equals(we.ZERO)||this.setDestinationPosition(t.plus(e.translationVector)),this.correctReposition()}repositionFromWheel(e,t){const i=t.domEvent,s=this.sourcePosition;if(i.preventDefault(),e.isCtrlKeyDown){const r=this.limitScale(this.getCurrentScale()+e.scaleDelta);this.scaleGestureTargetPosition=e.targetPoint,this.setDestinationScale(r)}else this.setDestinationPosition(s.plus(e.translationVector));this.correctReposition()}correctReposition(){super.correctReposition(),this._panBounds.isFinite()&&(this._transformedPanBounds=this._panBounds.transformed(this._targetNode.matrix.inverted()),this.sourcePosition=this._transformedPanBounds.center,this.sourceScale=this.getCurrentScale())}addPress(e){super.addPress(e),this.stopInProgressAnimation()}removePress(e){super.removePress(e),this.middlePress&&(e.pointer.cursor=ZA),this._presses.length===0&&this.stopInProgressAnimation()}interrupt(){this.cancelPanningDuringDrag(),this.cancelMiddlePress(),super.interrupt()}cancel(){this.interrupt()}hasDragIntent(e){return e.hasIntent(Tn.KEYBOARD_DRAG)||e.hasIntent(Tn.DRAG)}panToNode(e,t,i){this.keepBoundsInView(e.globalBounds,t,i)}keepBoundsInView(e,t,i){const s=this.sourcePosition,r=this._targetNode.globalToLocalBounds(e),o=new we(0,0);let c=0,p=0,g=0,A=0;if(t)c=this._transformedPanBounds.centerX-r.centerX,p=this._transformedPanBounds.centerX-r.centerX,g=this._transformedPanBounds.centerY-r.centerY,A=this._transformedPanBounds.centerY-r.centerY;else if((i==="vertical"||r.width<this._transformedPanBounds.width)&&(i==="horizontal"||r.height<this._transformedPanBounds.height)){const P=150/this.getCurrentScale();c=this._transformedPanBounds.left-r.left+P,p=this._transformedPanBounds.right-r.right-P,g=this._transformedPanBounds.top-r.top+P,A=this._transformedPanBounds.bottom-r.bottom-P}i!=="vertical"&&(p<0&&(o.x=-p),c>0&&(o.x=-c)),i!=="horizontal"&&(A<0&&(o.y=-A),g>0&&(o.y=-g)),this.setDestinationPosition(s.plus(o))}keepTrailInView(e,t){if(this._panBounds.isFinite()&&e.lastNode().bounds.isFinite()){const i=e.localToGlobalBounds(e.lastNode().localBounds);this._panBounds.containsBounds(i)||this.keepBoundsInView(i,!0,t)}}animateToTargets(e){const t=this.sourcePosition,i=this.destinationPosition,s=!i.equalsEpsilon(t,.1),r=!S1(this.sourceScale,this.destinationScale,.001);if(this.animatingProperty.value=s||r,this._presses.length===0||this.middlePress!==null){if(s){const o=i.minus(t);let c=o;o.magnitude!==0&&(c=o.normalized());const p=this.getTranslationSpeed(o.magnitude);JA.setXY(p,p);const g=JA.multiplyScalar(e),A=c.componentTimes(g);A.magnitude>o.magnitude&&A.set(o),this.translateDelta(A)}if(r){const o=this.destinationScale-this.sourceScale;let c=o*e*6;Math.abs(c)>Math.abs(o)&&(c=o),this.translateScaleToTarget(this.scaleGestureTargetPosition,c),this.setDestinationPosition(t)}else this.destinationScale!==this.sourceScale&&(this.setTranslationScaleToTarget(this.scaleGestureTargetPosition,this.destinationScale),this.setDestinationPosition(t))}}stopInProgressAnimation(){this.boundsFinite&&this.sourcePosition&&(this.setDestinationScale(this.sourceScale),this.setDestinationPosition(this.sourcePosition))}initializePositions(){this.boundsFinite=this._transformedPanBounds.isFinite(),this.boundsFinite?(this.sourcePosition=this._transformedPanBounds.center,this.setDestinationPosition(this.sourcePosition)):(this.sourcePosition=null,this.destinationPosition=null)}setPanBounds(e){super.setPanBounds(e),this.initializePositions(),this._dragBounds=e.erodedXY(e.width*.1,e.height*.1)}setTargetBounds(e){super.setTargetBounds(e),this.initializePositions()}setDestinationPosition(e){const t=this.sourcePosition;$A.setMinMax(t.x-this._transformedPanBounds.left-this._panBounds.left,t.y-this._transformedPanBounds.top-this._panBounds.top,t.x+this._panBounds.right-this._transformedPanBounds.right,t.y+this._panBounds.bottom-this._transformedPanBounds.bottom),this.destinationPosition=$A.closestPointTo(e)}setDestinationScale(e){this.destinationScale=this.limitScale(e)}getTranslationSpeed(e){const t=e*this.getCurrentScale(),i=5,s=t*(1/(Math.pow(t,2)-Math.pow(i,2))+i);return Math.min(Math.abs(s),EL*this.getCurrentScale())}resetTransform(){super.resetTransform(),this.stopInProgressAnimation()}getNextDiscreteScale(e){const t=this.getCurrentScale();let i=null,s=Number.POSITIVE_INFINITY;for(let o=0;o<this.discreteScales.length;o++){const c=Math.abs(this.discreteScales[o]-t);c<s&&(s=c,i=o)}i=i;let r=e?i+1:i-1;return r=hs(r,0,this.discreteScales.length-1),this.discreteScales[r]}dispose(){this.disposeAnimatedPanZoomListener()}}class Ug{constructor(e,t,i,s){const r=lt()({translationMagnitude:80},s);let o=0;o+=e.isKeyDown(Ne.KEY_RIGHT_ARROW)?1:0,o-=e.isKeyDown(Ne.KEY_LEFT_ARROW)?1:0;let c=0;if(c+=e.isKeyDown(Ne.KEY_DOWN_ARROW)?1:0,c-=e.isKeyDown(Ne.KEY_UP_ARROW)?1:0,Wu.setXY(o,c),!Wu.equals(we.ZERO)){const p=r.translationMagnitude*i;Wu.setMagnitude(p)}this.translationVector=Wu,this.scale=t}computeScaleTargetFromKeyPress(){Td.setXY(0,0);const e=In.value;if(e){const t=e.trail,i=t.lastNode();i.bounds.isFinite()&&Td.set(t.parentToGlobalPoint(i.center))}else{const t=Jt.getNextFocusable();if(t!==document.body){const i=t.offsetLeft+t.offsetWidth/2,s=t.offsetTop+t.offsetHeight/2;Td.setXY(i,s)}}return Td}}class DL{constructor(e,t){const i=e.domEvent;this.isCtrlKeyDown=i.ctrlKey,this.scaleDelta=i.deltaY>0?-.5:.5,this.targetPoint=e.pointer.point;let s=i.deltaX*.5,r=i.deltaY*.5;i.deltaMode===self.WheelEvent.DOM_DELTA_LINE&&(s=s*25,r=r*25),i.shiftKey&&([s,r]=[r,-s]),this.translationVector=Wu.setXY(s*t,r*t)}}class TL{constructor(e,t){this.pointer=e,this.trail=t,this.initialPoint=e.point.copy()}}const IL=(n,e)=>{const i=[];for(let r=0;r<8;r++)i[r]=(e-n)/8*(r*r);const s=i[7];for(let r=0;r<i.length;r++)i[r]=n+i[r]*(e-n)/s;return i},e2=n=>typeof n=="object"&&(n._isPressListener||n._isKeyboardDragListener);class xL{constructor(){this._listener=null}initialize(e,t){this._listener=new F0(e,t)}dispose(){this._listener.dispose(),this._listener=null}get listener(){return this._listener}get initialized(){return!!this._listener}}const ef=new xL,fh="(-?\\d{1,3}%?)",t2="(\\d+|\\d*\\.\\d+)",ph="(\\d{1,3})";function gh(n){let e=1;return n.endsWith("%")&&(e=2.55,n=n.slice(0,n.length-1)),Ys(Number(n)*e)}class et{constructor(e,t,i,s){this.changeEmitter=new Ai,this.set(e,t,i,s)}copy(){return new et(this.r,this.g,this.b,this.a)}set(e,t,i,s){if(e===null)this.setRGBA(0,0,0,0);else if(typeof e=="string")this.setCSS(e);else if(e instanceof et)this.setRGBA(e.r,e.g,e.b,e.a);else if(i===void 0){const r=e>>16&255,o=e>>8&255,c=e>>0&255,p=t===void 0?1:t;this.setRGBA(r,o,c,p)}else this.setRGBA(e,t,i,s===void 0?1:s);return this}getRed(){return this.r}get red(){return this.getRed()}set red(e){this.setRed(e)}setRed(e){return this.setRGBA(e,this.g,this.b,this.a)}getGreen(){return this.g}get green(){return this.getGreen()}set green(e){this.setGreen(e)}setGreen(e){return this.setRGBA(this.r,e,this.b,this.a)}getBlue(){return this.b}get blue(){return this.getBlue()}set blue(e){this.setBlue(e)}setBlue(e){return this.setRGBA(this.r,this.g,e,this.a)}getAlpha(){return this.a}get alpha(){return this.getAlpha()}set alpha(e){this.setAlpha(e)}setAlpha(e){return this.setRGBA(this.r,this.g,this.b,e)}setRGBA(e,t,i,s){return this.r=Ys(hs(e,0,255)),this.g=Ys(hs(t,0,255)),this.b=Ys(hs(i,0,255)),this.a=hs(s,0,1),this.updateColor(),this}blend(e,t){const s=Math.pow(this.r,2.4),r=Math.pow(e.r,2.4),o=Math.pow(this.g,2.4),c=Math.pow(e.g,2.4),p=Math.pow(this.b,2.4),g=Math.pow(e.b,2.4),A=Math.pow(s+(r-s)*t,1/2.4),C=Math.pow(o+(c-o)*t,1/2.4),D=Math.pow(p+(g-p)*t,1/2.4),P=this.a+(e.a-this.a)*t;return new et(A,C,D,P)}computeCSS(){if(this.a===1)return`rgb(${this.r},${this.g},${this.b})`;{let e=this.a.toFixed(20);for(;e.length>=2&&e.endsWith("0")&&e[e.length-2]!==".";)e=e.slice(0,e.length-1);const t=this.a===0||this.a===1?this.a:e;return`rgba(${this.r},${this.g},${this.b},${t})`}}toCSS(){return this._css}setCSS(e){let t=!1;const i=et.preprocessCSS(e);for(let s=0;s<et.formatParsers.length;s++){const r=et.formatParsers[s],o=r.regexp.exec(i);if(o){r.apply(this,o),t=!0;break}}if(!t)throw new Error(`Color unable to parse color string: ${e}`);return this.updateColor(),this}toNumber(){return(this.r<<16)+(this.g<<8)+this.b}updateColor(){const e=this._css;this._css=this.computeCSS(),e!==this._css&&this.changeEmitter.emit()}setImmutable(){return this}getCanvasStyle(){return this.toCSS()}setHSLA(e,t,i,s){e=e%360/360,t=hs(t/100,0,1),i=hs(i/100,0,1);let r;i<.5?r=i*(t+1):r=i+t-i*t;const o=i*2-r;return this.r=Ys(et.hueToRGB(o,r,e+1/3)*255),this.g=Ys(et.hueToRGB(o,r,e)*255),this.b=Ys(et.hueToRGB(o,r,e-1/3)*255),this.a=hs(s,0,1),this.updateColor(),this}getHSLA(){return[this.getHue(),this.getSaturation(),this.getLightness(),this.getAlpha()]}getHue(){const e=this.r/255,t=this.g/255,i=this.b/255,s=Math.max(e,t,i),r=Math.min(e,t,i),o=s-r;let c=0;return o!==0&&(s===e?c=(t-i)/o%6:s===t?c=(i-e)/o+2:c=(e-t)/o+4,c=Ys(c*60),c<0&&(c+=360)),c}getSaturation(){const e=this.r/255,t=this.g/255,i=this.b/255,s=Math.max(e,t,i),r=Math.min(e,t,i),o=s-r,c=(s+r)/2;let p=0;return o!==0&&(p=c>.5?o/(2-s-r):o/(s+r)),Ys(p*100)}getLightness(){const e=this.r/255,t=this.g/255,i=this.b/255,s=Math.max(e,t,i),r=Math.min(e,t,i),o=(s+r)/2;return Ys(o*100)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}withAlpha(e){return new et(this.r,this.g,this.b,e)}checkFactor(e){return e===void 0?.7:e}brighterColor(e){e=this.checkFactor(e);const t=Math.min(255,Math.floor(this.r/e)),i=Math.min(255,Math.floor(this.g/e)),s=Math.min(255,Math.floor(this.b/e));return new et(t,i,s,this.a)}colorUtilsBrighter(e){e=this.checkFactor(e);const t=Math.min(255,this.getRed()+Math.floor(e*(255-this.getRed()))),i=Math.min(255,this.getGreen()+Math.floor(e*(255-this.getGreen()))),s=Math.min(255,this.getBlue()+Math.floor(e*(255-this.getBlue())));return new et(t,i,s,this.getAlpha())}darkerColor(e){e=this.checkFactor(e);const t=Math.max(0,Math.floor(e*this.r)),i=Math.max(0,Math.floor(e*this.g)),s=Math.max(0,Math.floor(e*this.b));return new et(t,i,s,this.a)}colorUtilsDarker(e){e=this.checkFactor(e);const t=Math.max(0,this.getRed()-Math.floor(e*this.getRed())),i=Math.max(0,this.getGreen()-Math.floor(e*this.getGreen())),s=Math.max(0,this.getBlue()-Math.floor(e*this.getBlue()));return new et(t,i,s,this.getAlpha())}colorUtilsBrightness(e){return e===0?this:e>0?this.colorUtilsBrighter(e):this.colorUtilsDarker(-e)}toString(){return`${this.constructor.name}[r:${this.r} g:${this.g} b:${this.b} a:${this.a}]`}toHexString(){let e=this.toNumber().toString(16);for(;e.length<6;)e=`0${e}`;return`#${e}`}toStateObject(){return{r:this.r,g:this.g,b:this.b,a:this.a}}static hueToRGB(e,t,i){return i<0&&(i=i+1),i>1&&(i=i-1),i*6<1?e+(t-e)*i*6:i*2<1?t:i*3<2?e+(t-e)*(2/3-i)*6:e}static toColor(e){return e===null?et.TRANSPARENT:e instanceof et?e:typeof e=="string"?new et(e):et.toColor(e.value)}static interpolateRGBA(e,t,i){if(i<0||i>1)throw new Error(`distance must be between 0 and 1: ${i}`);const s=Math.floor(Un(0,1,e.r,t.r,i)),r=Math.floor(Un(0,1,e.g,t.g,i)),o=Math.floor(Un(0,1,e.b,t.b,i)),c=Un(0,1,e.a,t.a,i);return new et(s,r,o,c)}static supersampleBlend(e){const i=e.map(D=>Math.pow(D.r/255,2.2)),s=e.map(D=>Math.pow(D.g/255,2.2)),r=e.map(D=>Math.pow(D.b/255,2.2)),o=e.map(D=>Math.pow(D.a,2.2)),c=te.sum(o);if(c===0)return new et(0,0,0,0);const p=te.sum(te.range(0,e.length).map(D=>i[D]*o[D]))/c,g=te.sum(te.range(0,e.length).map(D=>s[D]*o[D]))/c,A=te.sum(te.range(0,e.length).map(D=>r[D]*o[D]))/c,C=c/e.length;return new et(Math.floor(Math.pow(p,1/2.2)*255),Math.floor(Math.pow(g,1/2.2)*255),Math.floor(Math.pow(A,1/2.2)*255),Math.pow(C,1/2.2))}static fromStateObject(e){return new et(e.r,e.g,e.b,e.a)}static hsla(e,t,i,s){return new et(0,0,0,1).setHSLA(e,t,i,s)}static checkPaintString(e){}static checkPaint(e){typeof e=="string"?et.checkPaintString(e):Dt(e)&&typeof e.value=="string"&&et.checkPaintString(e.value)}static getLuminance(e){const t=et.toColor(e);return t.red*.2126+t.green*.7152+t.blue*.0722}static toGrayscale(e){const t=et.getLuminance(e);return new et(t,t,t)}static isDarkColor(e,t=186){return et.getLuminance(e)<t}static isLightColor(e,t){return!et.isDarkColor(e,t)}static grayColor(e,t){return new et(e,e,e,t)}static preprocessCSS(e){let t=e.replace(/ /g,"").toLowerCase();const i=et.colorKeywords[t];return i&&(t=`#${i}`),t}static isCSSColorString(e){const t=et.preprocessCSS(e);for(let i=0;i<et.formatParsers.length;i++)if(et.formatParsers[i].regexp.exec(t))return!0;return!1}}et.formatParsers=[{regexp:/^transparent$/,apply:(n,e)=>{n.setRGBA(0,0,0,0)}},{regexp:/^#(\w{1})(\w{1})(\w{1})$/,apply:(n,e)=>{n.setRGBA(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1)}},{regexp:/^#(\w{2})(\w{2})(\w{2})$/,apply:(n,e)=>{n.setRGBA(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1)}},{regexp:new RegExp(`^rgb\\(${fh},${fh},${fh}\\)$`),apply:(n,e)=>{n.setRGBA(gh(e[1]),gh(e[2]),gh(e[3]),1)}},{regexp:new RegExp(`^rgba\\(${fh},${fh},${fh},${t2}\\)$`),apply:(n,e)=>{n.setRGBA(gh(e[1]),gh(e[2]),gh(e[3]),Number(e[4]))}},{regexp:new RegExp(`^hsl\\(${ph},${ph}%,${ph}%\\)$`),apply:(n,e)=>{n.setHSLA(Number(e[1]),Number(e[2]),Number(e[3]),1)}},{regexp:new RegExp(`^hsla\\(${ph},${ph}%,${ph}%,${t2}\\)$`),apply:(n,e)=>{n.setHSLA(Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4]))}}];et.basicColorKeywords={aqua:"00ffff",black:"000000",blue:"0000ff",fuchsia:"ff00ff",gray:"808080",green:"008000",lime:"00ff00",maroon:"800000",navy:"000080",olive:"808000",purple:"800080",red:"ff0000",silver:"c0c0c0",teal:"008080",white:"ffffff",yellow:"ffff00"};et.colorKeywords={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};et.BLACK=et.black=new et(0,0,0).setImmutable();et.BLUE=et.blue=new et(0,0,255).setImmutable();et.CYAN=et.cyan=new et(0,255,255).setImmutable();et.DARK_GRAY=et.darkGray=new et(64,64,64).setImmutable();et.GRAY=et.gray=new et(128,128,128).setImmutable();et.GREEN=et.green=new et(0,255,0).setImmutable();et.LIGHT_GRAY=et.lightGray=new et(192,192,192).setImmutable();et.MAGENTA=et.magenta=new et(255,0,255).setImmutable();et.ORANGE=et.orange=new et(255,200,0).setImmutable();et.PINK=et.pink=new et(255,175,175).setImmutable();et.RED=et.red=new et(255,0,0).setImmutable();et.WHITE=et.white=new et(255,255,255).setImmutable();et.YELLOW=et.yellow=new et(255,255,0).setImmutable();et.TRANSPARENT=et.transparent=new et(0,0,0,0).setImmutable();new et("blue");et.ColorIO=new Yt("ColorIO",{valueType:et,documentation:"A color, with rgba",toStateObject:n=>n.toStateObject(),fromStateObject:n=>new et(n.r,n.g,n.b,n.a),stateSchema:{r:yi,g:yi,b:yi,a:yi}});const Se={};Se.numActiveRenderers=4;Se.bitsPerRenderer=5;Se.bitmaskRendererArea=255;Se.bitmaskCurrentRendererArea=15;Se.bitmaskLacksOffset=65536;Se.bitmaskLacksShift=16;Se.bitmaskNodeDefault=Se.bitmaskRendererArea;Se.bitmaskCanvas=1;Se.bitmaskSVG=2;Se.bitmaskDOM=4;Se.bitmaskWebGL=8;Se.bitmaskSingleCanvas=256;Se.bitmaskSingleSVG=512;Se.bitmaskNotPainted=4096;Se.bitmaskBoundsValid=8192;Se.bitmaskNoPDOM=16384;Se.bitmaskLacksCanvas=Se.bitmaskCanvas<<Se.bitmaskLacksShift;Se.bitmaskLacksSVG=Se.bitmaskSVG<<Se.bitmaskLacksShift;Se.bitmaskLacksDOM=Se.bitmaskDOM<<Se.bitmaskLacksShift;Se.bitmaskLacksWebGL=Se.bitmaskWebGL<<Se.bitmaskLacksShift;Se.isCanvas=function(n){return(n&Se.bitmaskCanvas)!==0};Se.isSVG=function(n){return(n&Se.bitmaskSVG)!==0};Se.isDOM=function(n){return(n&Se.bitmaskDOM)!==0};Se.isWebGL=function(n){return(n&Se.bitmaskWebGL)!==0};const LL={canvas:Se.bitmaskCanvas,svg:Se.bitmaskSVG,dom:Se.bitmaskDOM,webgl:Se.bitmaskWebGL};Se.fromName=function(n){return LL[n]};Se.stripBitmask=function(n){return n&Se.bitmaskRendererArea};Se.createOrderBitmask=function(n,e,t,i){return n=n||0,e=e||0,t=t||0,i=i||0,n|e<<5|t<<10|i<<15};Se.bitmaskOrder=function(n,e){return e>0&&(n=n>>5*e),n&Se.bitmaskCurrentRendererArea};Se.bitmaskOrderFirst=function(n){return n&Se.bitmaskCurrentRendererArea};Se.bitmaskOrderSecond=function(n){return n>>5&Se.bitmaskCurrentRendererArea};Se.bitmaskOrderThird=function(n){return n>>10&Se.bitmaskCurrentRendererArea};Se.bitmaskOrderFourth=function(n){return n>>15&Se.bitmaskCurrentRendererArea};Se.pushOrderBitmask=function(n,e){let t=e;const i=Se.bitsPerRenderer*Se.numActiveRenderers;for(let s=0;s<=i;s+=Se.bitsPerRenderer){const r=n>>s&Se.bitmaskCurrentRendererArea;if(r===t)return n;if(r===0)return n=n|t<<s,n;if(n=n&~(Se.bitmaskCurrentRendererArea<<s),n=n|t<<s,t=r,t===e)return n}throw new Error("pushOrderBitmask overflow")};Se.createSelfDrawable=function(n,e,t,i){let s;if(Se.isCanvas(t))s=e.createCanvasDrawable(t,n);else if(Se.isSVG(t))s=e.createSVGDrawable(t,n);else if(Se.isDOM(t))s=e.createDOMDrawable(t,n);else if(Se.isWebGL(t))s=e.createWebGLDrawable(t,n);else throw new Error(`Unrecognized renderer: ${t}`);return s.setFittable(i),s};Se.webglCustom=1;Se.webglTexturedTriangles=2;Se.webglVertexColorPolygons=3;let kL=1;class kr{initialize(e){return this.id=this.id||kL++,this.clean(),this.renderer=e,this.dirty=!0,this.isDisposed=!1,this.linksDirty=!1,this.visibleProperty=new ui(!0),this.fittableProperty=new ui(!0),this}clean(){this.parentDrawable=null,this.backbone=null,this.pendingParentDrawable=null,this.pendingBackbone=null,this.pendingAddition=!1,this.pendingRemoval=!1,this.previousDrawable=null,this.nextDrawable=null,this.oldPreviousDrawable=null,this.oldNextDrawable=null,this.visibleProperty&&this.visibleProperty.removeAllListeners(),this.fittableProperty&&this.fittableProperty.removeAllListeners()}update(){let e=!1;return this.dirty&&!this.isDisposed&&(this.dirty=!1,e=!0),e}setVisible(e){this.visibleProperty.value=e}set visible(e){this.setVisible(e)}isVisible(){return this.visibleProperty.value}get visible(){return this.isVisible()}setFittable(e){this.fittableProperty.value=e}set fittable(e){this.setFittable(e)}isFittable(){return this.fittableProperty.value}get fittable(){return this.isFittable()}setBlockBackbone(e){this.parentDrawable=e,this.backbone=e,this.pendingParentDrawable=e,this.pendingBackbone=e,this.pendingAddition=!1,this.pendingRemoval=!1}notePendingAddition(e,t,i){this.pendingParentDrawable=t,this.pendingBackbone=i,this.pendingAddition=!0,this.pendingRemoval||e.markDrawableChangedBlock(this)}notePendingRemoval(e){this.pendingRemoval=!0,this.pendingAddition||e.markDrawableChangedBlock(this)}notePendingMove(e,t){this.pendingParentDrawable=t,(!this.pendingRemoval||!this.pendingAddition)&&e.markDrawableChangedBlock(this),this.pendingAddition=!0,this.pendingRemoval=!0}updateBlock(){let e=!1;return(this.pendingRemoval||this.pendingAddition)&&(e=!this.pendingRemoval||!this.pendingAddition||this.parentDrawable!==this.pendingParentDrawable||this.backbone!==this.pendingBackbone,e?(this.pendingRemoval&&(this.parentDrawable.removeDrawable(this),this.pendingAddition||(this.pendingParentDrawable=null,this.pendingBackbone=null)),this.parentDrawable=this.pendingParentDrawable,this.backbone=this.pendingBackbone,this.pendingAddition&&this.parentDrawable.addDrawable(this)):this.pendingAddition&&Se.isCanvas(this.renderer)&&this.parentDrawable.onPotentiallyMovedDrawable(this),this.pendingAddition=!1,this.pendingRemoval=!1),e}updateLinks(){this.oldNextDrawable=this.nextDrawable,this.oldPreviousDrawable=this.previousDrawable,this.linksDirty=!1}markDirty(){this.dirty||(this.dirty=!0,this.parentDrawable&&this.parentDrawable.markDirtyDrawable(this))}markLinksDirty(e){this.linksDirty||(this.linksDirty=!0,e.markDrawableForLinksUpdate(this))}markForDisposal(e){kr.disconnectBefore(this,e),kr.disconnectAfter(this,e),e.markDrawableForDisposal(this)}disposeImmediately(e){kr.disconnectBefore(this,e),kr.disconnectAfter(this,e),this.dispose()}dispose(){this.clean(),this.isDisposed=!0,this.freeToPool()}audit(e,t,i){}toString(){return`${this.constructor.name}#${this.id}`}toDetailedString(){return this.toString()}static connectDrawables(e,t,i){e.nextDrawable!==t&&(e.nextDrawable&&(e.nextDrawable.markLinksDirty(i),e.nextDrawable.previousDrawable=null),t.previousDrawable&&(t.previousDrawable.markLinksDirty(i),t.previousDrawable.nextDrawable=null),e.nextDrawable=t,t.previousDrawable=e,e.markLinksDirty(i),t.markLinksDirty(i))}static disconnectBefore(e,t){e.previousDrawable&&(e.markLinksDirty(t),e.previousDrawable.markLinksDirty(t),e.previousDrawable.nextDrawable=null,e.previousDrawable=null)}static disconnectAfter(e,t){e.nextDrawable&&(e.markLinksDirty(t),e.nextDrawable.markLinksDirty(t),e.nextDrawable.previousDrawable=null,e.nextDrawable=null)}static listToArray(e,t){const i=[];for(let s=e;i.push(s),s!==t;s=s.nextDrawable);return i}static oldListToArray(e,t){const i=[];for(let s=e;i.push(s),s!==t;s=s.oldNextDrawable);return i}}class Wf extends kr{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return super.initialize(e),this.drawableVisibilityListener=this.drawableVisibilityListener||this.updateSelfVisibility.bind(this),this.instance=t,this.node=t.trail.lastNode(),this.node.attachDrawable(this),this.instance.selfVisibleEmitter.addListener(this.drawableVisibilityListener),this.updateSelfVisibility(),this}dispose(){this.instance.selfVisibleEmitter.removeListener(this.drawableVisibilityListener),this.node.detachDrawable(this),this.instance=null,this.node=null,super.dispose()}updateSelfVisibility(){this.visible=this.instance.selfVisible}toDetailedString(){return`${this.toString()} (${this.instance.trail.toPathString()})`}}class zl extends Wf{initialize(e,t){super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute()}markTransformDirty(){this.markDirty()}markPaintDirty(){this.markDirty()}updateSelfVisibility(){super.updateSelfVisibility(),this.markDirty()}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}let BL=1;class Lo{constructor(){this.id=`paint${BL++}`,this.transformMatrix=null}setTransformMatrix(e){return this.transformMatrix!==e&&(this.transformMatrix=e),this}toString(){return this.id}}Lo.prototype.isPaint=!0;class Oa extends Lo{constructor(){super(),this.stops=[],this.lastStopRatio=0,this.canvasGradient=null,this.colorStopsDirty=!1,this.lastColorStopValues=[]}addColorStop(e,t){if(this.lastStopRatio>e)throw new Error("Color stops not specified in the order of increasing ratios");return this.lastStopRatio=e,this.stops.push({ratio:e,color:t}),this.lastColorStopValues.push(""),this}getSVGStops(){return this.stops}invalidateCanvasGradient(){this.colorStopsDirty=!0}haveCanvasColorStopsChanged(){if(this.lastColorStopValues===null)return!0;for(let e=0;e<this.stops.length;e++)if(Oa.colorToString(this.stops[e].color)!==this.lastColorStopValues[e])return!0;return!1}getCanvasStyle(){if(!this.canvasGradient||this.colorStopsDirty&&this.haveCanvasColorStopsChanged()){this.colorStopsDirty=!1,$t(this.lastColorStopValues),this.canvasGradient=this.createCanvasGradient();for(let e=0;e<this.stops.length;e++){const t=this.stops[e],i=Oa.colorToString(t.color);this.canvasGradient.addColorStop(t.ratio,i),this.lastColorStopValues.push(i)}}return this.canvasGradient}static colorToString(e){return Dt(e)&&(e=e.value),e===null&&(e="transparent"),e instanceof et&&(e=e.toCSS()),e}}Oa.prototype.isGradient=!0;class hc{constructor(e){this.primary=null,this.changeCallback=e,this.notifyChangeCallback=this.notifyChanged.bind(this),this.updateSecondaryListener=this.updateSecondary.bind(this),this.secondaryPropertyCountsMap={}}setPrimary(e){e!==this.primary&&(this.detachPrimary(this.primary),this.primary=e,this.attachPrimary(e),this.notifyChangeCallback())}clean(){this.detachPrimary(this.primary),this.primary=null}updateSecondary(e,t,i){const s=this.secondaryPropertyCountsMap[i.id];for(let r=0;r<s;r++)this.attachSecondary(e);this.notifyChangeCallback()}attachPrimary(e){if(Dt(e))this.secondaryLazyLinkProperty(e),this.attachSecondary(e.get());else if(e instanceof et)e.setImmutable();else if(e instanceof Oa)for(let t=0;t<e.stops.length;t++)this.attachPrimary(e.stops[t].color)}detachPrimary(e){if(Dt(e))this.secondaryUnlinkProperty(e);else if(e instanceof Oa)for(let t=0;t<e.stops.length;t++)this.detachPrimary(e.stops[t].color)}attachSecondary(e){e instanceof et&&e.setImmutable()}notifyChanged(){this.primary instanceof Oa&&this.primary.invalidateCanvasGradient(),this.changeCallback()}secondaryLazyLinkProperty(e){const t=e.id;this.secondaryPropertyCountsMap[t]?this.secondaryPropertyCountsMap[t]++:(this.secondaryPropertyCountsMap[t]=1,e.lazyLink(this.updateSecondaryListener))}secondaryUnlinkProperty(e){const t=e.id;--this.secondaryPropertyCountsMap[t]===0&&(delete this.secondaryPropertyCountsMap[t],e.isDisposed||e.unlink(this.updateSecondaryListener))}}const Ec=Yn(n=>class extends n{initialize(e,t,...i){super.initialize(e,t,...i),this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new hc(this.fillCallback),this.strokeObserver=this.strokeObserver||new hc(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}dispose(){this.fillObserver.clean(),this.strokeObserver.clean(),super.dispose()}markDirtyFill(){this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}markDirtyStroke(){this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}markDirtyLineWidth(){this.markPaintDirty()}markDirtyLineOptions(){this.markPaintDirty()}markDirtyCachedPaints(){this.markPaintDirty()}});class Nm extends Ec(zl){paintCanvas(e,t,i){const s=e.context;t.hasShape()&&(s.beginPath(),t._shape.writeToContext(s),t.hasFill()&&(t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e)))}markDirtyShape(){this.markPaintDirty()}}es.mixInto(Nm);const Dc=Yn(n=>class extends n{initialize(e,t,...i){super.initialize(e,t,...i),this.dirtyFill=!0,this.hadStroke=!1,this.dirtyStroke=!0,this.dirtyLineWidth=!0,this.dirtyLineOptions=!0,this.dirtyCachedPaints=!0,this.lastCachedPaints=[],this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new hc(this.fillCallback),this.strokeObserver=this.strokeObserver||new hc(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}cleanPaintableState(){this.dirtyFill=!1,this.dirtyStroke=!1,this.dirtyLineWidth=!1,this.dirtyLineOptions=!1,this.dirtyCachedPaints=!1,this.hadStroke=this.node.getStroke()!==null}dispose(){super.dispose(),this.fillObserver.clean(),this.strokeObserver.clean()}markDirtyFill(){this.dirtyFill=!0,this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}markDirtyStroke(){this.dirtyStroke=!0,this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}markDirtyLineWidth(){this.dirtyLineWidth=!0,this.markPaintDirty()}markDirtyLineOptions(){this.dirtyLineOptions=!0,this.markPaintDirty()}markDirtyCachedPaints(){this.dirtyCachedPaints=!0,this.markPaintDirty()}}),RL=Yn(n=>class extends Dc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyShape=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyShape(){this.dirtyShape=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyShape=!1}}),Qi="http://www.w3.org/2000/svg";class NL{constructor(){this.initialize()}initialize(){this.svgBlock=null,this.fillStyle="none",this.strokeStyle="none",this.fillPaint=null,this.strokePaint=null,this.updateBaseStyle(),this.strokeDetailStyle=""}dispose(){this.releaseFillPaint(),this.releaseStrokePaint()}releaseFillPaint(){this.fillPaint&&(this.svgBlock.decrementPaint(this.fillPaint),this.fillPaint=null)}releaseStrokePaint(){this.strokePaint&&(this.svgBlock.decrementPaint(this.strokePaint),this.strokePaint=null)}updateFill(e,t){const i=i2(t,e);t!==this.fillPaint&&(this.releaseFillPaint(),t&&t.isPaint&&(this.fillPaint=t,e.incrementPaint(t))),i!==this.fillStyle&&(this.fillStyle=i,this.updateBaseStyle())}updateStroke(e,t){const i=i2(t,e);t!==this.strokePaint&&(this.releaseStrokePaint(),t&&t.isPaint&&(this.strokePaint=t,e.incrementPaint(t))),i!==this.strokeStyle&&(this.strokeStyle=i,this.updateBaseStyle())}updateBaseStyle(){this.baseStyle=`fill: ${this.fillStyle}; stroke: ${this.strokeStyle};`}updateStrokeDetailStyle(e){let t="";const i=e.getLineWidth();i!==1&&(t+=`stroke-width: ${i};`);const s=e.getLineCap();s!=="butt"&&(t+=`stroke-linecap: ${s};`);const r=e.getLineJoin();r!=="miter"&&(t+=`stroke-linejoin: ${r};`);const o=e.getMiterLimit();t+=`stroke-miterlimit: ${o};`,e.hasLineDash()&&(t+=`stroke-dasharray: ${e.getLineDash().join(",")};`,t+=`stroke-dashoffset: ${e.getLineDashOffset()};`),this.strokeDetailStyle=t}updateSVGBlock(e){const t=this.svgBlock;t&&(this.fillPaint&&t.decrementPaint(this.fillPaint),this.strokePaint&&t.decrementPaint(this.strokePaint)),this.svgBlock=e,this.fillPaint&&e.incrementPaint(this.fillPaint),this.strokePaint&&e.incrementPaint(this.strokePaint)}}function i2(n,e){return n?n.toCSS?n.toCSS():n.isPaint?`url(#${n.id}-${e?e.id:"noblock"})`:n:"none"}const Id=[],xd=[],s2=[],ML=[];class ru extends Wf{initialize(e,t,i,s){return super.initialize(e,t),this.usesPaint=i,this.keepElements=s,this.svgElement=null,this.svgBlock=null,this.usesPaint&&(this.paintState?this.paintState.initialize():this.paintState=new NL),this}update(){return super.update()?(this.updateSVG(),!0):!1}setCachedPaints(e){Ih(this.lastCachedPaints,e,Id,xd,s2);for(let t=0;t<xd.length;t++)this.svgBlock.incrementPaint(xd[t]);for(let t=0;t<Id.length;t++)this.svgBlock.decrementPaint(Id[t]);Id.length=0,xd.length=0,s2.length=0,this.lastCachedPaints.length=0,this.lastCachedPaints.push(...e)}updateSVG(){this.usesPaint&&this.dirtyCachedPaints&&this.setCachedPaints(this.node._cachedPaints),this.paintDirty&&this.updateSVGSelf(this.node,this.svgElement),this.setToCleanState()}updateFillStrokeStyle(e){if(!this.usesPaint)return;this.dirtyFill&&this.paintState.updateFill(this.svgBlock,this.node.getFillValue()),this.dirtyStroke&&this.paintState.updateStroke(this.svgBlock,this.node.getStrokeValue());const t=this.dirtyLineWidth||this.dirtyLineOptions;t&&this.paintState.updateStrokeDetailStyle(this.node),(this.dirtyFill||this.dirtyStroke||t)&&e.setAttribute("style",this.paintState.baseStyle+this.paintState.strokeDetailStyle),this.cleanPaintableState()}updateSVGBlock(e){const t=this.svgBlock;if(this.usesPaint&&t)for(let i=0;i<this.lastCachedPaints.length;i++)t.decrementPaint(this.lastCachedPaints[i]);if(this.svgBlock=e,this.usesPaint)for(let i=0;i<this.lastCachedPaints.length;i++)e.incrementPaint(this.lastCachedPaints[i]);this.updateDefsSelf&&this.updateDefsSelf(e),this.usesPaint&&this.paintState.updateSVGBlock(e),this.usesPaint&&this.markDirtyFill(),this.usesPaint&&this.markDirtyStroke()}dispose(){this.keepElements||(this.svgElement=null),this.updateDefsSelf&&this.updateDefsSelf(null),this.usesPaint&&(this.setCachedPaints(ML),this.paintState.dispose()),this.defs=null,this.svgBlock=null,super.dispose()}}const OL=!0;class fv extends RL(ru){initialize(e,t){super.initialize(e,t,!0,OL),this.svgElement=this.svgElement||document.createElementNS(Qi,"path")}updateSVGSelf(){const e=this.svgElement;if(this.dirtyShape){let t=this.node.hasShape()?this.node._shape.getSVGPath():"";t||(t="M0 0"),e.setAttribute("d",`${t}${qs.safari?" M0 0":""}`)}this.updateFillStrokeStyle(e)}}es.mixInto(fv);class qL{constructor(e){this.node=e,this.pdomDisplays=[]}onAddChild(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.addPDOMDisplays(this.pdomDisplays)}onRemoveChild(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.removePDOMDisplays(this.pdomDisplays)}onSummaryChange(e,t){if(this.node.visible&&this.node.pdomVisible){const i=!(Se.bitmaskNoPDOM&e),s=!(Se.bitmaskNoPDOM&t);s&&!i&&this.addAllPDOMDisplays(),!s&&i&&this.removeAllPDOMDisplays()}}onVisibilityChange(e){this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}onPDOMVisibilityChange(e){this.node.visible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}onAddedRootedDisplay(e){e._accessible&&this.canHavePDOMDisplays()&&this.addPDOMDisplays([e])}onRemovedRootedDisplay(e){e._accessible&&this.canHavePDOMDisplays()&&this.removePDOMDisplays([e])}canHavePDOMDisplays(){return this.node.visible&&this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()}addAllPDOMDisplays(){let e;const t=[];for(e=0;e<this.node._parents.length;e++)Array.prototype.push.apply(t,this.node._parents[e]._pdomDisplaysInfo.pdomDisplays);for(e=0;e<this.node._rootedDisplays.length;e++){const i=this.node._rootedDisplays[e];i._accessible&&t.push(i)}this.addPDOMDisplays(t)}removeAllPDOMDisplays(){this.removePDOMDisplays(this.pdomDisplays.slice())}addPDOMDisplays(e){if(e.length!==0){Array.prototype.push.apply(this.pdomDisplays,e);for(let t=0;t<this.node._children.length;t++)this.node._children[t]._pdomDisplaysInfo.canHavePDOMDisplays()&&this.node._children[t]._pdomDisplaysInfo.addPDOMDisplays(e);this.node.pdomDisplaysEmitter.emit()}}removePDOMDisplays(e){if(e.length!==0){let t;for(t=e.length-1;t>=0;t--)this.pdomDisplays.lastIndexOf(e[t]),this.pdomDisplays.splice(t,1);for(t=0;t<this.node._children.length;t++){const i=this.node._children[t];i._pdomDisplaysInfo.canHavePDOMDisplays()&&!i._isGettingRemovedFromParent&&i._pdomDisplaysInfo.removePDOMDisplays(e)}this.node.pdomDisplaysEmitter.emit()}}}class n2{constructor(e,t,i){this.pdomInstance=e,this.trail=t,this.isRoot=i,this.isRoot=i,this.fullTrail=this.pdomInstance.trail.copy();for(let s=this.isRoot?0:1;s<this.trail.length;s++)this.fullTrail.addDescendant(this.trail.nodes[s])}}const FL="PARAGRAPH_SIBLING",Mm="CONTAINER_PARENT",zL="DESCRIPTION_SIBLING",HL="HEADING_SIBLING",KL="LABEL_SIBLING",Ch="PRIMARY_SIBLING",Xu=Ch,pv=HL,UL=KL,YL=zL,GL=FL,WL=Mm,XL=Jt.TAGS.LABEL,jL=Jt.TAGS.INPUT,r2="disabled",QL={attributes:!1,childList:!0,characterData:!0};let ZL=1;const nl=new Je(0,0,0,0),no=new Je(0,0,0,0),a2=new nt,o2=new nt,JL=new nt;class cn{constructor(e,t){this.initializePDOMPeer(e,t)}initializePDOMPeer(e,t){return t=dn({primarySibling:null},t),this.id=this.id||ZL++,this.pdomInstance=e,this.node=this.pdomInstance.node,this.display=e.display,this.trail=e.trail,this.visible=null,this.focusable=null,this._headingSibling=null,this._labelSibling=null,this._descriptionSibling=null,this._accessibleParagraphSibling=null,this._containerParent=null,this.topLevelElements=[],this.positionDirty=!1,this.forceReflowWorkaround=!1,this.childPositionDirty=!1,this.positionInPDOM=!1,this.mutationObserver=this.mutationObserver||new MutationObserver(this.invalidateCSSPositioning.bind(this,!1)),this.transformListener=this.transformListener||this.invalidateCSSPositioning.bind(this,!1),this.pdomInstance.transformTracker.addListener(this.transformListener),this._preservedDisabledValue=null,this.isDisposed=!1,this.pdomInstance.isRootInstance&&(this._primarySibling=t.primarySibling,this._primarySibling.classList.add(M0.ROOT_CLASS_NAME),Jt.BLOCKED_DOM_EVENTS.forEach(i=>{this._primarySibling.addEventListener(i,s=>{s.stopPropagation()})})),this}update(e){let t=this.node.getBaseOptions();const i=[];this.mutationObserver.disconnect(),(this.node.accessibleName!==null||this.node._accessibleNameDirty)&&(this.node.accessibleName===null?this.node.accessibleNameBehavior(this.node,{},this.node.accessibleName,i):t=this.node.accessibleNameBehavior(this.node,t,this.node.accessibleName,i),this.node._accessibleNameDirty=!1),(this.node.accessibleHelpText!==null||this.node._accessibleHelpTextDirty)&&(this.node.accessibleHelpText===null?this.node.accessibleHelpTextBehavior(this.node,{},this.node.accessibleHelpText,i):t=this.node.accessibleHelpTextBehavior(this.node,t,this.node.accessibleHelpText,i),this.node._accessibleHelpTextDirty=!1),(this.node.accessibleParagraph!==null||this.node._accessibleParagraphDirty)&&(this.node.accessibleParagraph===null?this.node.accessibleParagraphBehavior(this.node,{},this.node.accessibleParagraph,i):t=this.node.accessibleParagraphBehavior(this.node,t,this.node.accessibleParagraph,i),this.node._accessibleParagraphDirty=!1),t.accessibleParagraph&&(this._accessibleParagraphSibling=mh(Jt.TAGS.P,!1),this.setAccessibleParagraphContent(t.accessibleParagraph)),t.tagName&&(this._primarySibling=mh(t.tagName,this.node.focusable,{namespace:t.pdomNamespace}),t.containerTagName&&(this._containerParent=mh(t.containerTagName,!1)),t.accessibleHeading&&(this._headingSibling=mh(`h${this.pdomInstance.pendingHeadingLevel}`,!1)),t.labelTagName&&(this._labelSibling=mh(t.labelTagName,!1,{excludeFromInput:this.node._excludeLabelSiblingFromInput})),t.descriptionTagName&&(this._descriptionSibling=mh(t.descriptionTagName,!1))),e&&this.updateIndicesStringAndElementIds(),this.orderElements(t),this._primarySibling&&(this.mutationObserver.observe(this._primarySibling,QL),t.accessibleHeading!==null&&this.setHeadingContent(t.accessibleHeading),t.labelContent&&t.labelTagName!==null&&this.setLabelSiblingContent(t.labelContent),t.innerContent&&t.tagName!==null&&this.setPrimarySiblingContent(t.innerContent),t.descriptionContent&&t.descriptionTagName!==null&&this.setDescriptionSiblingContent(t.descriptionContent),t.tagName.toUpperCase()===jL&&t.inputType&&this.setAttributeToElement("type",t.inputType),t.labelTagName&&t.labelTagName.toUpperCase()===XL&&this.setAttributeToElement("for",this._primarySibling.id,{elementName:cn.LABEL_SIBLING}),this.setFocusable(this.node.focusable),this.setPositionInPDOM(this.node.positionInPDOM),this.onAriaLabelledbyAssociationChange(),this.onAriaDescribedbyAssociationChange(),this.onActiveDescendantAssociationChange(),this.onAttributeChange(t),this.onClassChange(),this.onInputValueChange(),this.node.updateOtherNodesAriaLabelledby(),this.node.updateOtherNodesAriaDescribedby(),this.node.updateOtherNodesActiveDescendant()),i.forEach(s=>{s()})}orderElements(e){this._containerParent?(this._containerParent.insertBefore(this._primarySibling,this._containerParent.children[0]||null),this.topLevelElements=[this._containerParent]):this.topLevelElements=[this._headingSibling,this._labelSibling,this._descriptionSibling,this._primarySibling,this._accessibleParagraphSibling].filter(te.identity),this._headingSibling&&this.arrangeContentElement(this._headingSibling,!1),this._labelSibling&&this.arrangeContentElement(this._labelSibling,e.appendLabel),this._descriptionSibling&&this.arrangeContentElement(this._descriptionSibling,e.appendDescription),this._accessibleParagraphSibling&&this.arrangeContentElement(this._accessibleParagraphSibling,!0)}getPlaceableSibling(){return this._primarySibling||this._accessibleParagraphSibling}getPrimarySibling(){return this._primarySibling}get primarySibling(){return this.getPrimarySibling()}getHeadingSibling(){return this._headingSibling}get headingSibling(){return this.getHeadingSibling()}getLabelSibling(){return this._labelSibling}get labelSibling(){return this.getLabelSibling()}getDescriptionSibling(){return this._descriptionSibling}get descriptionSibling(){return this.getDescriptionSibling()}getContainerParent(){return this._containerParent}get containerParent(){return this.getContainerParent()}getTopLevelElementContainingPrimarySibling(){return this._containerParent||this._primarySibling}onAriaLabelledbyAssociationChange(){this.removeAttributeFromAllElements("aria-labelledby");for(let e=0;e<this.node.ariaLabelledbyAssociations.length;e++){const t=this.node.ariaLabelledbyAssociations[e];this.setAssociationAttribute("aria-labelledby",t)}}onAriaDescribedbyAssociationChange(){this.removeAttributeFromAllElements("aria-describedby");for(let e=0;e<this.node.ariaDescribedbyAssociations.length;e++){const t=this.node.ariaDescribedbyAssociations[e];this.setAssociationAttribute("aria-describedby",t)}}onActiveDescendantAssociationChange(){this.removeAttributeFromAllElements("aria-activedescendant");for(let e=0;e<this.node.activeDescendantAssociations.length;e++){const t=this.node.activeDescendantAssociations[e];this.setAssociationAttribute("aria-activedescendant",t)}}handleAttributeWithPDOMOption(e,t){typeof t=="string"?this.setAttributeToElement(e,t):this.removeAttributeFromElement(e)}onAttributeChange(e){for(let t=0;t<this.node.pdomAttributes.length;t++){const i=this.node.pdomAttributes[t];this.setAttributeToElement(i.attribute,i.value,i.options)}this.handleAttributeWithPDOMOption("aria-label",e.ariaLabel),this.handleAttributeWithPDOMOption("role",e.ariaRole)}onClassChange(){for(let e=0;e<this.node.pdomClasses.length;e++){const t=this.node.pdomClasses[e];this.setClassToElement(t.className,t.options)}}onInputValueChange(){if(this.node.inputValue===null)this.removeAttributeFromElement("value");else{const e=`${this.node.inputValue}`;this.setAttributeToElement("value",e,{type:"property"})}}getElementByName(e){if(e===cn.PRIMARY_SIBLING)return this._primarySibling;if(e===cn.LABEL_SIBLING)return this._labelSibling;if(e===cn.DESCRIPTION_SIBLING)return this._descriptionSibling;if(e===cn.CONTAINER_PARENT)return this._containerParent;if(e===GL)return this._accessibleParagraphSibling;if(e===pv)return this._headingSibling;throw new Error(`invalid elementName name: ${e}`)}setAttributeToElement(e,t,i){i=dn({namespace:null,type:"attribute",elementName:Xu,element:null},i);const s=i.element||this.getElementByName(i.elementName);if(!s)return;const r=Jt.unwrapProperty(t);let o=r;typeof r=="string"&&(o=C0(r)),e===r2&&!this.display.interactive&&(this._preservedDisabledValue=i.type==="property"?o:!0),i.namespace?s.setAttributeNS(i.namespace,e,o):i.type==="property"?s[e]=o:s.setAttribute(e,o)}removeAttributeFromElement(e,t){t=dn({namespace:null,elementName:Xu,element:null},t);const i=t.element||this.getElementByName(t.elementName);t.namespace?i.removeAttributeNS(t.namespace,e):e===r2&&!this.display.interactive?this._preservedDisabledValue=!1:i.removeAttribute(e)}removeAttributeFromAllElements(e){this._primarySibling&&this._primarySibling.removeAttribute(e),this._labelSibling&&this._labelSibling.removeAttribute(e),this._descriptionSibling&&this._descriptionSibling.removeAttribute(e),this._accessibleParagraphSibling&&this._accessibleParagraphSibling.removeAttribute(e),this._containerParent&&this._containerParent.removeAttribute(e)}setClassToElement(e,t){t=dn({elementName:Xu},t),this.getElementByName(t.elementName).classList.add(e)}removeClassFromElement(e,t){t=dn({elementName:Xu},t),this.getElementByName(t.elementName).classList.remove(e)}setAssociationAttribute(e,t){const i=t.otherNode.getPDOMInstances();if(i.length>0){const s=i[0];s===this.pdomInstance&&(s.peer=this);const r=s.peer.getElementByName(t.otherElementName),o=this.getElementByName(t.thisElementName);if(o&&r){const p=[(o.getAttribute(e)||"").trim(),r.id].join(" ").trim();this.setAttributeToElement(e,p,{elementName:t.thisElementName})}}}arrangeContentElement(e,t){if(this.topLevelElements[0]===this._containerParent)t?this._containerParent.appendChild(e):this._containerParent.insertBefore(e,this._primarySibling);else{Ns(this.topLevelElements,e);const i=this.topLevelElements.indexOf(this._primarySibling),s=t?this.topLevelElements.length:i;this.topLevelElements.splice(s,0,e)}}isVisible(){return this.visible===null?!0:this.visible}setVisible(e){if(this.visible!==e){this.visible=e;for(let t=0;t<this.topLevelElements.length;t++){const i=this.topLevelElements[t];e?this.removeAttributeFromElement("hidden",{element:i}):this.setAttributeToElement("hidden","",{element:i})}this.invalidateCSSPositioning(qs.safari)}}isFocused(){const e=rc(this.trail,this.display.rootNode);return In.value&&In.value.trail.equals(e)}focus(){Ui.windowHasFocusProperty.value&&this._primarySibling.focus()}blur(){this._primarySibling.blur()}setFocusable(e){const t=this.isFocused();this.focusable!==e&&this.primarySibling&&(this.focusable=e,Jt.overrideFocusWithTabIndex(this.primarySibling,e),t&&!e&&this.blur(),this.invalidateCSSPositioning())}setHeadingContent(e){this._headingSibling&&Jt.setTextContent(this._headingSibling,e)}setLabelSiblingContent(e){this._labelSibling&&Jt.setTextContent(this._labelSibling,e)}setDescriptionSiblingContent(e){this._descriptionSibling&&Jt.setTextContent(this._descriptionSibling,e)}setAccessibleParagraphContent(e){this._accessibleParagraphSibling&&Jt.setTextContent(this._accessibleParagraphSibling,e)}setPrimarySiblingContent(e){this._primarySibling&&Jt.setTextContent(this._primarySibling,e)}setPDOMTransformSourceNode(e){this.pdomInstance.transformTracker.removeListener(this.transformListener),this.pdomInstance.updateTransformTracker(e),this.pdomInstance.transformTracker.addListener(this.transformListener),this.invalidateCSSPositioning()}setPositionInPDOM(e){this.positionInPDOM=e,this.invalidateCSSPositioning()}getElementId(e,t){return`display${this.display.id}-${e}-${t}`}updateIndicesStringAndElementIds(){const e=this.pdomInstance.getPDOMInstanceUniqueId();this._primarySibling&&(this._primarySibling.setAttribute(Jt.DATA_PDOM_UNIQUE_ID,e),this._primarySibling.id=this.getElementId("primary",e)),this._labelSibling&&(this._labelSibling.setAttribute(Jt.DATA_PDOM_UNIQUE_ID,e),this._labelSibling.id=this.getElementId("label",e)),this._descriptionSibling&&(this._descriptionSibling.setAttribute(Jt.DATA_PDOM_UNIQUE_ID,e),this._descriptionSibling.id=this.getElementId("description",e)),this._headingSibling&&(this._headingSibling.setAttribute(Jt.DATA_PDOM_UNIQUE_ID,e),this._headingSibling.id=this.getElementId("heading",e)),this._accessibleParagraphSibling&&(this._accessibleParagraphSibling.setAttribute(Jt.DATA_PDOM_UNIQUE_ID,e),this._accessibleParagraphSibling.id=this.getElementId("paragraph",e)),this._containerParent&&(this._containerParent.setAttribute(Jt.DATA_PDOM_UNIQUE_ID,e),this._containerParent.id=this.getElementId("container",e))}invalidateCSSPositioning(e=!1){if(!this.positionDirty){if(this.positionDirty=!0,e){this.forceReflowWorkaround=!0;for(let i=0;i<this.topLevelElements.length;i++)this.topLevelElements[i].style.transform="scale(1)"}let t=this.pdomInstance.parent;for(;t;)t.peer.childPositionDirty=!0,t=t.parent}}positionElements(e){const t=this.getPlaceableSibling();if(e){const i=this.node.pdomTransformSourceNode||this.node;if(nl.set(i.localBounds),nl.isFinite()){nl.transform(this.pdomInstance.transformTracker.getMatrix());const s=this.display.bounds;if(s.intersectsBounds(nl)){nl.constrainBounds(s);let r=h2(t),o=r.width,c=r.height;o>0&&c>0&&(no.setMinMax(0,0,o,c),no.transform(l2(o,c,nl)),Ld(t,no)),this.labelSibling&&(r=h2(this._labelSibling),o=r.width,c=r.height,c>0&&o>0&&(no.setMinMax(0,0,o,c),no.transform(l2(o,c,nl)),Ld(this._labelSibling,no)))}}}else no.set(cn.OFFSCREEN_SIBLING_BOUNDS),Ld(t,no),this._labelSibling&&Ld(this._labelSibling,no);this.forceReflowWorkaround&&this.topLevelElements.forEach(i=>{i.style.transform="",i.style.offsetHeight}),this.positionDirty=!1,this.forceReflowWorkaround=!1}updateSubtreePositioning(e=!1){this.childPositionDirty=!1;const t=this.positionInPDOM||e;this.positionDirty&&this.positionElements(t);for(let i=0;i<this.pdomInstance.children.length;i++){const s=this.pdomInstance.children[i].peer;(s.positionDirty||s.childPositionDirty)&&this.pdomInstance.children[i].peer.updateSubtreePositioning(t)}}recursiveDisable(e){this._primarySibling&&(e?(this._preservedDisabledValue=this._primarySibling.disabled,this._primarySibling.disabled=!0):this._primarySibling.disabled=this._preservedDisabledValue);for(let t=0;t<this.pdomInstance.children.length;t++)this.pdomInstance.children[t].peer.recursiveDisable(e)}dispose(){this.isDisposed=!0,this._primarySibling&&(this.blur(),this._primarySibling.removeEventListener("blur",this.blurEventListener),this._primarySibling.removeEventListener("focus",this.focusEventListener)),this.pdomInstance.transformTracker.removeListener(this.transformListener),this.mutationObserver.disconnect(),this.pdomInstance=null,this.node=null,this.display=null,this.trail=null,this._primarySibling=null,this._labelSibling=null,this._descriptionSibling=null,this._headingSibling=null,this._accessibleParagraphSibling=null,this._containerParent=null,this.focusable=null,this.freeToPool()}}cn.PRIMARY_SIBLING=Xu;cn.HEADING_SIBLING=pv;cn.LABEL_SIBLING=UL;cn.DESCRIPTION_SIBLING=YL;cn.CONTAINER_PARENT=WL;cn.OFFSCREEN_SIBLING_BOUNDS=new Je(0,0,1,1);es.mixInto(cn,{initialize:cn.prototype.initializePDOMPeer});function mh(n,e,t){t=dn({siblingName:null,excludeFromInput:!1},t);const i=Jt.createElement(n,e,t);return t.excludeFromInput&&i.setAttribute(Jt.DATA_EXCLUDE_FROM_INPUT,!0),i}function l2(n,e,t){return a2.setToTranslation(t.minX,t.minY),o2.setToScale(t.width/n,t.height/e),a2.multiplyMatrix(o2).multiplyMatrix(JL)}function h2(n){let e=n.clientWidth,t=n.clientHeight;if(e===0&&t===0){const i=n.getBoundingClientRect();e=i.width,t=i.height}return{width:e,height:t}}function Ld(n,e){n.style.top=`${e.top}px`,n.style.left=`${e.left}px`,n.style.width=`${e.width}px`,n.style.height=`${e.height}px`}let $L=1;class vl{constructor(e,t,i,s){this.relativeNodes=[],this.relativeVisibilities=[],this.relativeListeners=[],this.transformTracker=null,this.initializePDOMInstance(e,t,i,s)}initializePDOMInstance(e,t,i,s){if(this.id=this.id||$L++,this.parent=e,this.display=t,this.trail=i,this.isRootInstance=e===null,this.node=this.isRootInstance?null:i.lastNode(),this.children=$t(this.children),this.node&&this.node.addPDOMInstance(this),this.invisibleCount=0,this.relativeNodes=[],this.relativeVisibilities=[],this.relativeListeners=[],this.transformTracker=null,this.updateTransformTracker(this.node?this.node.pdomTransformSourceNode:null),this.isDisposed=!1,this.parentHeadingLevel=this.parent?this.parent.headingLevel??this.parent.parentHeadingLevel:s,this.pendingHeadingLevel=this.parentHeadingLevel+(this.node?this.node.accessibleHeadingIncrement:1),this.isRootInstance){const r=document.createElement("div");this.peer=cn.createFromPool(this,{primarySibling:r}),this.headingLevel=null}else{this.peer=cn.createFromPool(this),this.peer.update(Gu===jr.TRAIL_ID),this.headingLevel=this.peer.headingSibling?this.pendingHeadingLevel:null;const r=this.parent.trail;for(let o=r.length;o<i.length;o++){const c=i.nodes[o];this.relativeNodes.push(c);const p=c._pdomDisplaysInfo.pdomDisplays,g=te.includes(p,t);this.relativeVisibilities.push(g),g||this.invisibleCount++;const A=this.checkAccessibleDisplayVisibility.bind(this,o-r.length);c.pdomDisplaysEmitter.addListener(A),this.relativeListeners.push(A)}this.updateVisibility()}return this}addConsecutiveInstances(e){const t=this.children.length>0;Array.prototype.push.apply(this.children,e);for(let i=0;i<e.length;i++){const s=this.peer.getPlaceableSibling();Jt.insertElements(s,e[i].peer.topLevelElements)}t&&this.sortChildren(),Gu===jr.INDICES&&this.updateDescendantPeerIds(e)}removeInstancesForTrail(e){for(let t=0;t<this.children.length;t++){const i=this.children[t],s=i.trail;let r=s.length<e.length;if(!r){for(let o=this.trail.length;o<e.length;o++)if(e.nodes[o]!==s.nodes[o]){r=!0;break}}r||(this.children.splice(t,1),i.dispose(),t-=1)}}removeAllChildren(){for(;this.children.length;)this.children.pop().dispose()}findChildWithTrail(e){for(let t=0;t<this.children.length;t++){const i=this.children[t];if(i.trail.equals(e))return i}return null}removeSubtree(e){for(let t=this.children.length-1;t>=0;t--){const i=this.children[t];i.trail.isExtensionOf(e,!0)&&(this.children.splice(t,1),i.dispose())}}checkAccessibleDisplayVisibility(e){const t=te.includes(this.relativeNodes[e]._pdomDisplaysInfo.pdomDisplays,this.display),i=this.relativeVisibilities[e];if(t!==i){this.relativeVisibilities[e]=t;const s=this.invisibleCount===0;this.invisibleCount+=t?-1:1,this.invisibleCount===0!==s&&this.updateVisibility()}}updateVisibility(){var e,t;this.peer.setVisible(this.invisibleCount<=0),!this.peer.isVisible()&&((t=(e=ac())==null?void 0:e.pdomInstances[0])!=null&&t.trail.containsNode(this.node))&&(Ui.pdomFocus=null)}isGloballyVisible(){return this.peer.isVisible()?this.parent?this.parent.isGloballyVisible():!0:!1}getChildOrdering(e){const t=e.lastNode(),i=t.getEffectiveChildren();let s;const r=[];if(t.hasPDOMContent&&t!==this.node){const o=t.pdomInstances;e:for(s=0;s<o.length;s++){const c=o[s];if(c.parent===this){for(let p=0;p<e.length;p++)if(e.nodes[p]!==c.trail.nodes[p+c.trail.length-e.length])continue e;r.push(c)}}}else for(s=0;s<i.length;s++)e.addDescendant(i[s],s),Array.prototype.push.apply(r,this.getChildOrdering(e)),e.removeDescendant();return r}sortChildren(){var c,p;let e;this.isRootInstance?e=this.display.rootNode:e=this.node;const t=this.getChildOrdering(new bi(e));this.children=t;const i=this.peer.getPlaceableSibling(),s=((p=(c=ac())==null?void 0:c.pdomInstances[0])==null?void 0:p.trail)||null;let r=i.childNodes.length-1;const o=s&&te.find(this.children,g=>s.containsNode(g.peer.node));if(o){const g=te.flatten(this.children.map(C=>C.peer.topLevelElements));if(!te.every(g,(C,D)=>i.children[D]===C)){const C=o.peer.getTopLevelElementContainingPrimarySibling(),D=g.indexOf(C);for(let P=0;P<D;P++)i.insertBefore(g[P],C);for(let P=D+1;P<g.length;P++)i.appendChild(g[P])}}else for(let g=this.children.length-1;g>=0;g--){const A=this.children[g].peer;for(let C=A.topLevelElements.length-1;C>=0;C--){const D=A.topLevelElements[C];i.childNodes[r]!==D&&i.insertBefore(D,i.childNodes[r+1]),r--}}Gu===jr.INDICES&&this.updateDescendantPeerIds(this.children)}updateTransformTracker(e){this.transformTracker&&this.transformTracker.dispose();let t=null;e?t=e.getUniqueTrail():t=rc(this.trail,this.display.rootNode),this.transformTracker=new bl(t)}getPDOMInstanceUniqueId(){if(Gu===jr.INDICES){const e=[];let t=this;for(;t.parent;){const i=t.parent.children.indexOf(t);if(i===-1)return"STILL_BEING_CREATED"+cl.nextDouble();e.unshift(i),t=t.parent}return e.join(Yf)}else return this.trail.getUniqueId()}updateDescendantPeerIds(e){const t=Array.from(e);for(;t.length>0;){const i=t.shift();i.peer.updateIndicesStringAndElementIds(),t.push(...i.children)}}dispose(){const e=this.peer;if(!this.isRootInstance){Jt.removeElements(this.parent.peer.getPlaceableSibling(),e.topLevelElements);for(let t=0;t<this.relativeNodes.length;t++)this.relativeNodes[t].pdomDisplaysEmitter.removeListener(this.relativeListeners[t])}for(;this.children.length;)this.children.pop().dispose();e.dispose(),this.transformTracker.dispose(),this.transformTracker=null,this.node&&this.node.removePDOMInstance(this),this.relativeNodes=null,this.display=null,this.trail=null,this.node=null,this.peer=null,this.isDisposed=!0,this.freeToPool()}toString(){return`${this.id}#{${this.trail.toString()}}`}auditRoot(){}static createFakePDOMTree(e){function t(i){let s=te.flatten(i.getEffectiveChildren().map(t));return i.hasPDOMContent&&(s=[{node:i,children:s}]),s}return{node:null,children:t(e)}}freeToPool(){vl.pool.freeToPool(this)}}vl.pool=new us(vl,{initialize:vl.prototype.initializePDOMInstance});const ek=n=>n.pointerType===self.MSPointerEvent.MSPOINTER_TYPE_TOUCH?"touch":n.pointerType===self.MSPointerEvent.MSPOINTER_TYPE_PEN?"pen":n.pointerType===self.MSPointerEvent.MSPOINTER_TYPE_MOUSE?"mouse":n.pointerType;class Kt extends bn{}Kt.POINTER_TYPE=new Kt;Kt.MS_POINTER_TYPE=new Kt;Kt.TOUCH_TYPE=new Kt;Kt.MOUSE_TYPE=new Kt;Kt.WHEEL_TYPE=new Kt;Kt.ALT_TYPE=new Kt;Kt.enumeration=new br(Kt,{phetioDocumentation:"The type of batched event"});class uc{constructor(e,t,i){this.initialize(e,t,i)}initialize(e,t,i){return this.eventContext=e,this.type=t,this.callback=i,this}run(e){const t=this.callback;if(e.validatePointers(),this.type===Kt.POINTER_TYPE){const i=this.eventContext,s=i.domEvent;t.call(e,s.pointerId,s.pointerType,e.pointFromEvent(s),i)}else if(this.type===Kt.MS_POINTER_TYPE){const i=this.eventContext,s=i.domEvent;t.call(e,s.pointerId,ek(s),e.pointFromEvent(s),i)}else if(this.type===Kt.TOUCH_TYPE){const i=this.eventContext,s=i.domEvent;for(let r=0;r<s.changedTouches.length;r++){const o=s.changedTouches.item(r);t.call(e,o.identifier,e.pointFromEvent(o),i)}}else if(this.type===Kt.MOUSE_TYPE){const i=this.eventContext,s=e.pointFromEvent(i.domEvent);t===e.mouseDown?t.call(e,null,s,i):t.call(e,s,i)}else if(this.type===Kt.WHEEL_TYPE||this.type===Kt.ALT_TYPE)t.call(e,this.eventContext);else throw new Error(`bad type value: ${this.type}`)}dispose(){this.eventContext=null,this.callback=null,this.freeToPool()}freeToPool(){uc.pool.freeToPool(this)}}uc.pool=new us(uc);class Di{constructor(e){this.domEvent=e,this.activeElement=document.activeElement}static createSynthetic(){return new Di(new self.Event("synthetic"))}allowsDOMInput(){var t,i;const e=(t=this.domEvent)==null?void 0:t.target;if(e instanceof Element){let s=e;for(;s;){if(s instanceof HTMLElement&&((i=s.dataset)==null?void 0:i.sceneryAllowInput)==="true")return!0;s=s.parentNode}}return!1}}const Bs=new Yt("EventContextIO",{valueType:Di,documentation:"A DOM event and its context",toStateObject:n=>({domEvent:lv(n.domEvent)}),fromStateObject:n=>new Di(hv(n.domEvent)),stateSchema:()=>({domEvent:El})}),It={};function Xf(n){try{const e=document.createElement("canvas");e.width=1,e.height=1;const t=e.getContext("2d");t.fillStyle="black",t.fillRect(0,0,1,1);const i=e.toDataURL([n]),s=`data:${n}`;return i.slice(0,s.length)===s}catch{return!1}}function jf(n,e){const t=document.createElement("canvas");t.width=1,t.height=1;const i=t.getContext("2d"),s=document.createElement("img");s.crossOrigin="Anonymous";const r=()=>{try{i.drawImage(s,0,0),t.toDataURL(),It[n]=!0}catch{It[n]=!1}};s.onload=r;try{s.src=e,s.complete&&r()}catch{It[n]=!1}}It.canvasPNGOutput=Xf("image/png");It.canvasJPEGOutput=Xf("image/jpeg");It.canvasGIFOutput=Xf("image/gif");It.canvasICONOutput=Xf("image/x-icon");jf("canvasPNGInput","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg==");jf("canvasJPEGInput","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8qqKKKAP/2Q==");jf("canvasSVGInput","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3cG9ydD0iMCAwIDEgMSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgPg0KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiByeD0iMCIgcnk9IjAiIHN0eWxlPSJmaWxsOiBibGFjazsgc3Ryb2tlOiBub25lOyI+PC9yZWN0Pg0KPC9zdmc+DQo=");jf("canvasGIFInput","data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICRAEAOw==");const gv=document.createElement("canvas"),Tc=gv.getContext("2d");It.toDataURLHD=rs(gv,"toDataURLHD");It.createImageDataHD=rs(Tc,"createImageDataHD");It.getImageDataHD=rs(Tc,"getImageDataHD");It.putImageDataHD=rs(Tc,"putImageDataHD");It.currentTransform=rs(Tc,"currentTransform");It.canvasFilter=rs(Tc,"filter");const z0=document.createElement("span"),qa=document.createElement("div");It.textStroke=rs(z0.style,"textStroke");It.textStrokeColor=rs(z0.style,"textStrokeColor");It.textStrokeWidth=rs(z0.style,"textStrokeWidth");It.transform=rs(qa.style,"transform");It.transformOrigin=rs(qa.style,"transformOrigin");It.backfaceVisibility=rs(qa.style,"backfaceVisibility");It.borderRadius=rs(qa.style,"borderRadius");It.userSelect=rs(qa.style,"userSelect");It.touchAction=rs(qa.style,"touchAction");It.touchCallout=rs(qa.style,"touchCallout");It.userDrag=rs(qa.style,"userDrag");It.tapHighlightColor=rs(qa.style,"tapHighlightColor");It.fontSmoothing=rs(qa.style,"fontSmoothing");It.requestAnimationFrame=rs(self,"requestAnimationFrame");It.cancelAnimationFrame=rs(self,"cancelAnimationFrame");It.setStyle=(n,e,t)=>{e!==void 0&&(n.style[e]=t)};It.passive=!1;window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{It.passive=!0}}));class en{}en.userGestureEmitter=new Os;en.inputListeners=[];const tk=()=>{};let u2=!1;class Ct{static addDisplay(e,t,i){u2||(u2=!0,Xr.attachToWindow(),Ui.attachToWindow()),Ct.attachedDisplays.push(e),t?Ct.attachedDisplays.length===1&&Ct.connectWindowListeners(i):Ct.addOrRemoveListeners(e.domElement,!0,i),e.domElement.addEventListener("wheel",Ct.onwheel,Ct.getEventOptions(i,!0))}static removeDisplay(e,t,i){Ns(Ct.attachedDisplays,e),t?Ct.attachedDisplays.length===0&&Ct.disconnectWindowListeners(i):Ct.addOrRemoveListeners(e.domElement,!1,i),e.domElement.removeEventListener("wheel",Ct.onwheel,Ct.getEventOptions(i,!0))}static getEventOptions(e,t){if(It.passive&&e!==null){const s={passive:e};return t&&(s.capture=!1),s}else return!1}static getNonWheelUsedTypes(e){let t;return!!(self.navigator&&self.navigator.pointerEnabled||self.PointerEvent)?t=this.pointerListenerTypes:this.canUseMSPointerEvents?t=this.msPointerListenerTypes:t=this.touchListenerTypes.concat(this.mouseListenerTypes),t=t.concat(this.altListenerTypes),t}static connectWindowListeners(e){this.addOrRemoveListeners(self,!0,e)}static disconnectWindowListeners(e){this.addOrRemoveListeners(self,!1,e)}static addOrRemoveListeners(e,t,i){const s=e===window,r=t?1:-1;s?Ct.listenersAttachedToWindow+=r:Ct.listenersAttachedToElement+=r;const o=t?"addEventListener":"removeEventListener",c=this.getNonWheelUsedTypes(e===self);for(let p=0;p<c.length;p++){const g=c[p];s&&document[o](g,tk,Ct.getEventOptions(i,!1));const A=Ct[`on${g}`];e[o](g,A,Ct.getEventOptions(i,!0))}}static batchWindowEvent(e,t,i,s){for(let r=0;r<Ct.attachedDisplays.length;r++){const o=Ct.attachedDisplays[r],c=o._input;e.domEvent.currentTarget&&e.domEvent.currentTarget!==self&&e.domEvent.currentTarget!==o.domElement||(!Ct.blockFocusCallbacks||i!=="focusIn"&&i!=="focusOut")&&c.batchEvent(e,t,c[i],s)}}static onpointerdown(e){const t=new Di(e);e.pointerType==="mouse"&&en.userGestureEmitter.emit(),Ct.batchWindowEvent(t,Kt.POINTER_TYPE,"pointerDown",!1)}static onpointerup(e){const t=new Di(e);en.userGestureEmitter.emit(),Ct.batchWindowEvent(t,Kt.POINTER_TYPE,"pointerUp",!0)}static onpointermove(e){Ct.batchWindowEvent(new Di(e),Kt.POINTER_TYPE,"pointerMove",!1)}static onpointerover(e){Ct.batchWindowEvent(new Di(e),Kt.POINTER_TYPE,"pointerOver",!1)}static onpointerout(e){Ct.batchWindowEvent(new Di(e),Kt.POINTER_TYPE,"pointerOut",!1)}static onpointercancel(e){Ct.batchWindowEvent(new Di(e),Kt.POINTER_TYPE,"pointerCancel",!1)}static ongotpointercapture(e){Ct.batchWindowEvent(new Di(e),Kt.POINTER_TYPE,"gotPointerCapture",!1)}static onlostpointercapture(e){Ct.batchWindowEvent(new Di(e),Kt.POINTER_TYPE,"lostPointerCapture",!1)}static onMSPointerDown(e){Ct.batchWindowEvent(new Di(e),Kt.MS_POINTER_TYPE,"pointerDown",!1)}static onMSPointerUp(e){Ct.batchWindowEvent(new Di(e),Kt.MS_POINTER_TYPE,"pointerUp",!0)}static onMSPointerMove(e){Ct.batchWindowEvent(new Di(e),Kt.MS_POINTER_TYPE,"pointerMove",!1)}static onMSPointerOver(e){Ct.batchWindowEvent(new Di(e),Kt.MS_POINTER_TYPE,"pointerOver",!1)}static onMSPointerOut(e){Ct.batchWindowEvent(new Di(e),Kt.MS_POINTER_TYPE,"pointerOut",!1)}static onMSPointerCancel(e){Ct.batchWindowEvent(new Di(e),Kt.MS_POINTER_TYPE,"pointerCancel",!1)}static ontouchstart(e){Ct.batchWindowEvent(new Di(e),Kt.TOUCH_TYPE,"touchStart",!1)}static ontouchend(e){const t=new Di(e);en.userGestureEmitter.emit(),Ct.batchWindowEvent(t,Kt.TOUCH_TYPE,"touchEnd",!0)}static ontouchmove(e){Ct.batchWindowEvent(new Di(e),Kt.TOUCH_TYPE,"touchMove",!1)}static ontouchcancel(e){Ct.batchWindowEvent(new Di(e),Kt.TOUCH_TYPE,"touchCancel",!1)}static onmousedown(e){const t=new Di(e);en.userGestureEmitter.emit(),Ct.batchWindowEvent(t,Kt.MOUSE_TYPE,"mouseDown",!1)}static onmouseup(e){const t=new Di(e);en.userGestureEmitter.emit(),Ct.batchWindowEvent(t,Kt.MOUSE_TYPE,"mouseUp",!0)}static onmousemove(e){Ct.batchWindowEvent(new Di(e),Kt.MOUSE_TYPE,"mouseMove",!1)}static onmouseover(e){Ct.batchWindowEvent(new Di(e),Kt.MOUSE_TYPE,"mouseOver",!1)}static onmouseout(e){Ct.batchWindowEvent(new Di(e),Kt.MOUSE_TYPE,"mouseOut",!1)}static onwheel(e){Ct.batchWindowEvent(new Di(e),Kt.WHEEL_TYPE,"wheel",!1)}static onfocusin(e){Ct.dispatchingFocusEvents=!0,Ui.updatePDOMFocusFromEvent(Ct.attachedDisplays,e,!0),Ct.batchWindowEvent(new Di(e),Kt.ALT_TYPE,"focusIn",!0),Ct.dispatchingFocusEvents=!1}static onfocusout(e){Ct.dispatchingFocusEvents=!0,Ui.updatePDOMFocusFromEvent(Ct.attachedDisplays,e,!1),Ct.batchWindowEvent(new Di(e),Kt.ALT_TYPE,"focusOut",!0),Ct.dispatchingFocusEvents=!1}static oninput(e){Ct.batchWindowEvent(new Di(e),Kt.ALT_TYPE,"input",!0)}static onchange(e){Ct.batchWindowEvent(new Di(e),Kt.ALT_TYPE,"change",!0)}static onclick(e){Ct.batchWindowEvent(new Di(e),Kt.ALT_TYPE,"click",!0)}static onkeydown(e){Ct.batchWindowEvent(new Di(e),Kt.ALT_TYPE,"keyDown",!0)}static onkeyup(e){Ct.batchWindowEvent(new Di(e),Kt.ALT_TYPE,"keyUp",!0)}}Ct.blockFocusCallbacks=!1;Ct.dispatchingFocusEvents=!1;Ct.listenersAttachedToWindow=0;Ct.listenersAttachedToElement=0;Ct.attachedDisplays=[];Ct.canUseMSPointerEvents=self.navigator&&self.navigator.msPointerEnabled;Ct.pointerListenerTypes=["pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"];Ct.msPointerListenerTypes=["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerCancel"];Ct.touchListenerTypes=["touchstart","touchend","touchmove","touchcancel"];Ct.mouseListenerTypes=["mousedown","mouseup","mousemove","mouseover","mouseout"];Ct.wheelListenerTypes=["wheel"];Ct.altListenerTypes=Jt.DOM_EVENTS;class Vi{static addChild(e,t){const i=Vi.beforeOp();t._pdomParent||Vi.addTree(e,t),Vi.afterOp(i)}static removeChild(e,t){const i=Vi.beforeOp();t._pdomParent||Vi.removeTree(e,t),Vi.afterOp(i)}static childrenOrderChange(e){const t=Vi.beforeOp();Vi.reorder(e),Vi.afterOp(t)}static pdomOrderChange(e,t,i){const s=Vi.beforeOp(),r=[],o=[];Ih(t||[],i||[],r,o);let c,p;const g=Vi.findPDOMTrails(e);for(c=0;c<r.length;c++){const A=r[c];A&&(Vi.removeTree(e,A,g),A._pdomParent=null,A.pdomParentChangedEmitter.emit())}for(c=0;c<o.length;c++){const A=o[c];if(A){const C=A._parents;for(p=0;p<C.length;p++)Vi.removeTree(C[p],A);A._pdomParent=e,A.pdomParentChangedEmitter.emit()}}for(c=0;c<r.length;c++){const A=r[c];if(A){const C=A._parents;for(p=0;p<C.length;p++)Vi.addTree(C[p],A)}}for(c=0;c<o.length;c++){const A=o[c];A&&Vi.addTree(e,A,g)}Vi.reorder(e,g),Vi.afterOp(s)}static pdomContentChange(e){const t=Vi.beforeOp();let i;const s=e._pdomParent?[e._pdomParent]:e._parents,r=[];for(i=0;i<s.length;i++){const o=s[i],c=Vi.findPDOMTrails(o);r.push(c),Vi.removeTree(o,e,c)}for(i=0;i<s.length;i++)Vi.addTree(s[i],e,r[i]);for(i=0;i<e._rootedDisplays.length;i++){const o=e._rootedDisplays[i];o._accessible&&Vi.rebuildInstanceTree(o._rootPDOMInstance)}Vi.afterOp(t)}static rebuildInstanceTree(e){const t=e.display.rootNode;e.removeAllChildren(),e.addConsecutiveInstances(Vi.createTree(new bi(t),e.display,e))}static addTree(e,t,i){i=i||Vi.findPDOMTrails(e);for(let s=0;s<i.length;s++){const r=i[s],o=r.pdomInstance;r.fullTrail.addDescendant(t);const c=Vi.createTree(r.fullTrail,o.display,o);r.fullTrail.removeDescendant(),o.addConsecutiveInstances(c)}}static removeTree(e,t,i){i=i||Vi.findPDOMTrails(e);for(let s=0;s<i.length;s++){const r=i[s];r.fullTrail.addDescendant(t),r.pdomInstance.removeInstancesForTrail(r.fullTrail),r.fullTrail.removeDescendant()}}static reorder(e,t){t=t||Vi.findPDOMTrails(e);for(let i=0;i<t.length;i++)t[i].pdomInstance.sortChildren()}static createTree(e,t,i){const s=e.lastNode(),r=s.getEffectiveChildren();let o,c=!1;s.hasPDOMContent&&(o=i.findChildWithTrail(e),o?c=!0:(s._lockedPDOMInstanceCreation=!0,o=vl.pool.create(i,t,e.copy()),s._lockedPDOMInstanceCreation=!1),i=o);const p=[];for(let g=0;g<r.length;g++)e.addDescendant(r[g],g),Array.prototype.push.apply(p,Vi.createTree(e,t,i)),e.removeDescendant();return o?(o.addConsecutiveInstances(p),c?[]:[o]):p}static beforeOp(){return Ct.blockFocusCallbacks=!0,ac()}static afterOp(e){Ct.dispatchingFocusEvents||e&&e.focusable&&e.focus(),Ct.blockFocusCallbacks=!1}static findPDOMTrails(e){const t=[];return Vi.recursivePDOMTrailSearch(t,new bi(e)),t}static recursivePDOMTrailSearch(e,t){const i=t.rootNode();let s;if(i.hasPDOMContent){const c=i.pdomInstances;for(s=0;s<c.length;s++)e.push(new n2(c[s],t.copy(),!1));return}else{const c=i.rootedDisplays;for(s=0;s<c.length;s++){const p=c[s];p._accessible&&e.push(new n2(p._rootPDOMInstance,t.copy(),!0))}}const r=i._pdomParent?[i._pdomParent]:i._parents,o=r.length;for(s=0;s<o;s++){const c=r[s];t.addAncestor(c),Vi.recursivePDOMTrailSearch(e,t),t.removeAncestor()}}static auditPDOMDisplays(e){}static auditNodeForPDOMCycles(e){}static debugOrder(e){return e===null?"null":`[${e.map(t=>t===null?"null":t._id).join(",")}]`}}const mv=Jt.TAGS.P,ik=Jt.TAGS.DIV,sk=ik,nk=mv,rk=mv,ro=n=>n===null?null:typeof n=="string"?n:n.value,Om=["focusable","tagName","accessibleName","accessibleNameBehavior","accessibleHelpText","accessibleHelpTextBehavior","accessibleParagraph","accessibleParagraphBehavior","accessibleHeading","accessibleHeadingIncrement","accessibleRoleDescription","containerTagName","containerAriaRole","innerContent","inputType","inputValue","pdomChecked","pdomNamespace","ariaLabel","ariaRole","ariaValueText","labelTagName","labelContent","appendLabel","descriptionTagName","descriptionContent","appendDescription","accessibleParagraphContent","focusHighlight","focusHighlightLayerable","groupFocusHighlight","pdomVisibleProperty","pdomVisible","pdomOrder","pdomAttributes","ariaLabelledbyAssociations","ariaDescribedbyAssociations","activeDescendantAssociations","focusPanTargetBoundsProperty","limitPanDirection","positionInPDOM","pdomTransformSourceNode"];class Ir extends Gi{constructor(e){super(e),this._inputValue=null,this._accessibleHeading=null,this._accessibleHeadingIncrement=1,this._labelContent=null,this._innerContent=null,this._descriptionContent=null,this._accessibleParagraphContent=null,this._ariaLabel=null,this._hasAppliedAriaLabel=!1,this._ariaValueText=null,this._hasAppliedAriaValueText=!1,this._accessibleRoleDescription=null,this._accessibleName=null,this._accessibleParagraph=null,this._accessibleHelpText=null,this._accessibleNameDirty=!1,this._accessibleHelpTextDirty=!1,this._accessibleParagraphDirty=!1,this.focusHighlightChangedEmitter=new Ai,this.pdomParentChangedEmitter=new Ai,this.pdomDisplaysEmitter=new Ai,this._lockedPDOMInstanceCreation=!1,this._onPDOMContentChangeListener=this.onPDOMContentChange.bind(this),this._onInputValueChangeListener=this.invalidatePeerInputValue.bind(this),this._onAriaLabelChangeListener=this.onAriaLabelChange.bind(this),this._onAriaValueTextChangeListener=this.onAriaValueTextChange.bind(this),this._onLabelContentChangeListener=this.invalidatePeerLabelSiblingContent.bind(this),this._onAccessibleHeadingChangeListener=this.invalidateAccessibleHeadingContent.bind(this),this._onDescriptionContentChangeListener=this.invalidatePeerDescriptionSiblingContent.bind(this),this._onAccessibleParagraphContentChangeListener=this.invalidatePeerParagraphSiblingContent.bind(this),this._onInnerContentChangeListener=this.onInnerContentPropertyChange.bind(this),this._onAccessibleRoleDescriptionChangeListener=this.onAccessibleRoleDescriptionChange.bind(this),this._tagName=null,this._containerTagName=null,this._labelTagName=null,this._descriptionTagName=null,this._inputType=null,this._pdomChecked=!1,this._appendLabel=!1,this._appendDescription=!1,this._pdomAttributes=[],this._pdomClasses=[],this._pdomNamespace=null,this._ariaRole=null,this._containerAriaRole=null,this._ariaLabelledbyAssociations=[],this._nodesThatAreAriaLabelledbyThisNode=[],this._ariaDescribedbyAssociations=[],this._nodesThatAreAriaDescribedbyThisNode=[],this._activeDescendantAssociations=[],this._nodesThatAreActiveDescendantToThisNode=[],this._focusableOverride=null,this._focusHighlight=null,this._focusHighlightLayerable=!1,this._groupFocusHighlight=!1,this._pdomOrder=null,this._pdomParent=null,this._pdomTransformSourceNode=null,this._focusPanTargetBoundsProperty=null,this._limitPanDirection=null,this._pdomDisplaysInfo=new qL(this),this._pdomInstances=[],this._positionInPDOM=!1,this._excludeLabelSiblingFromInput=!1,this._pdomVisibleProperty=new Ra(!0,!1,this.onPdomVisiblePropertyChange.bind(this)),this._accessibleNameBehavior=Ir.BASIC_ACCESSIBLE_NAME_BEHAVIOR,this._accessibleHelpTextBehavior=Ir.HELP_TEXT_AFTER_CONTENT,this._accessibleParagraphBehavior=Ir.BASIC_ACCESSIBLE_PARAGRAPH_BEHAVIOR,this.pdomBoundInputEnabledListener=this.pdomInputEnabledListener.bind(this)}disposeParallelDOM(){if(Dt(this._accessibleName)&&!this._accessibleName.isDisposed&&(this._accessibleName.unlink(this._onPDOMContentChangeListener),this._accessibleName=null),Dt(this._accessibleHelpText)&&!this._accessibleHelpText.isDisposed&&(this._accessibleHelpText.unlink(this._onPDOMContentChangeListener),this._accessibleHelpText=null),Dt(this._accessibleParagraph)&&!this._accessibleParagraph.isDisposed&&(this._accessibleParagraph.unlink(this._onPDOMContentChangeListener),this._accessibleParagraph=null),Dt(this._inputValue)&&!this._inputValue.isDisposed&&(this._inputValue.unlink(this._onPDOMContentChangeListener),this._inputValue=null),Dt(this._ariaLabel)&&!this._ariaLabel.isDisposed&&this._ariaLabel.unlink(this._onAriaLabelChangeListener),Dt(this._ariaValueText)&&!this._ariaValueText.isDisposed&&this._ariaValueText.unlink(this._onAriaValueTextChangeListener),Dt(this._accessibleRoleDescription)&&!this._accessibleRoleDescription.isDisposed&&this._accessibleRoleDescription.unlink(this._onAccessibleRoleDescriptionChangeListener),Dt(this._innerContent)&&!this._innerContent.isDisposed&&this._innerContent.unlink(this._onInnerContentChangeListener),Dt(this._labelContent)&&!this._labelContent.isDisposed&&this._labelContent.unlink(this._onLabelContentChangeListener),Dt(this._accessibleHeading)&&!this._accessibleHeading.isDisposed&&this._accessibleHeading.unlink(this._onAccessibleHeadingChangeListener),Dt(this._descriptionContent)&&!this._descriptionContent.isDisposed&&this._descriptionContent.unlink(this._onDescriptionContentChangeListener),Dt(this._accessibleParagraphContent)&&!this._accessibleParagraphContent.isDisposed&&this._accessibleParagraphContent.unlink(this._onAccessibleParagraphContentChangeListener),this.inputEnabledProperty.unlink(this.pdomBoundInputEnabledListener),this.pdomOrder=null,this._pdomParent){const e=this._pdomParent._pdomOrder.slice();Ns(e,this),this._pdomParent.pdomOrder=e}this.setPDOMTransformSourceNode(null),this._accessibleNameBehavior=Ir.BASIC_ACCESSIBLE_NAME_BEHAVIOR,this._accessibleHelpTextBehavior=Ir.HELP_TEXT_AFTER_CONTENT,this.setAriaLabelledbyAssociations([]),this.setAriaDescribedbyAssociations([]),this.setActiveDescendantAssociations([]),this.removePDOMAttributes(),this._pdomVisibleProperty.dispose()}pdomInputEnabledListener(e){this.setPDOMAttribute("aria-disabled",!e),this.setPDOMAttribute("onclick",e?"":"return false")}isFocused(){for(let e=0;e<this._pdomInstances.length;e++)if(this._pdomInstances[e].peer.isFocused())return!0;return!1}get focused(){return this.isFocused()}focus(){this._pdomInstances.length>0&&this._pdomInstances[0].peer.focus()}blur(){this._pdomInstances.length>0&&this._pdomInstances[0].peer.blur()}pdomAudit(){for(let e=0;e<this.children.length;e++)this.children[e].pdomAudit()}setAccessibleName(e){e!==this._accessibleName&&(Dt(this._accessibleName)&&!this._accessibleName.isDisposed&&this._accessibleName.unlink(this._onPDOMContentChangeListener),this._accessibleName=e,Dt(e)&&e.lazyLink(this._onPDOMContentChangeListener),this._accessibleNameDirty=!0,this.onPDOMContentChange())}set accessibleName(e){this.setAccessibleName(e)}get accessibleName(){return this.getAccessibleName()}getAccessibleName(){return Dt(this._accessibleName)?this._accessibleName.value:this._accessibleName}setAccessibleParagraph(e){e!==this._accessibleParagraph&&(Dt(this._accessibleParagraph)&&!this._accessibleParagraph.isDisposed&&this._accessibleParagraph.unlink(this._onPDOMContentChangeListener),this._accessibleParagraph=e,Dt(e)&&e.lazyLink(this._onPDOMContentChangeListener),this._accessibleParagraphDirty=!0,this.onPDOMContentChange())}set accessibleParagraph(e){this.setAccessibleParagraph(e)}get accessibleParagraph(){return this.getAccessibleParagraph()}getAccessibleParagraph(){return Dt(this._accessibleParagraph)?this._accessibleParagraph.value:this._accessibleParagraph}removeFromPDOM(){this.tagName=null}setAccessibleNameBehavior(e){this._accessibleNameBehavior!==e&&(this._accessibleNameBehavior=e,this.onPDOMContentChange())}set accessibleNameBehavior(e){this.setAccessibleNameBehavior(e)}get accessibleNameBehavior(){return this.getAccessibleNameBehavior()}getAccessibleNameBehavior(){return this._accessibleNameBehavior}setAccessibleHelpText(e){e!==this._accessibleHelpText&&(Dt(this._accessibleHelpText)&&!this._accessibleHelpText.isDisposed&&this._accessibleHelpText.unlink(this._onPDOMContentChangeListener),this._accessibleHelpText=e,Dt(e)&&e.lazyLink(this._onPDOMContentChangeListener),this._accessibleHelpTextDirty=!0,this.onPDOMContentChange())}set accessibleHelpText(e){this.setAccessibleHelpText(e)}get accessibleHelpText(){return this.getAccessibleHelpText()}getAccessibleHelpText(){return Dt(this._accessibleHelpText)?this._accessibleHelpText.value:this._accessibleHelpText}setAccessibleParagraphContent(e){e!==this._accessibleParagraphContent&&(Dt(this._accessibleParagraphContent)&&!this._accessibleParagraphContent.isDisposed&&this._accessibleParagraphContent.unlink(this._onAccessibleParagraphContentChangeListener),this._accessibleParagraphContent=e,Dt(e)&&e.lazyLink(this._onAccessibleParagraphContentChangeListener),this.invalidatePeerParagraphSiblingContent())}set accessibleParagraphContent(e){this.setAccessibleParagraphContent(e)}get accessibleParagraphContent(){return this.getAccessibleParagraphContent()}getAccessibleParagraphContent(){return ro(this._accessibleParagraphContent)}setAccessibleHeading(e){if(e!==this._accessibleHeading){const t=e===null!=(this._accessibleHeading===null);Dt(this._accessibleHeading)&&!this._accessibleHeading.isDisposed&&this._accessibleHeading.unlink(this._onAccessibleHeadingChangeListener),this._accessibleHeading=e,Dt(e)&&e.lazyLink(this._onAccessibleHeadingChangeListener),t?this.invalidateAccessibleHeading():this.invalidateAccessibleHeadingContent()}}set accessibleHeading(e){this.setAccessibleHeading(e)}get accessibleHeading(){return this.getAccessibleHeading()}getAccessibleHeading(){return ro(this._accessibleHeading)}setAccessibleHeadingIncrement(e){e!==this._accessibleHeadingIncrement&&(this._accessibleHeadingIncrement=e,this.invalidateAccessibleHeading())}set accessibleHeadingIncrement(e){this.setAccessibleHeadingIncrement(e)}get accessibleHeadingIncrement(){return this.getAccessibleHeadingIncrement()}getAccessibleHeadingIncrement(){return this._accessibleHeadingIncrement}invalidateAccessibleHeading(){this.onPDOMContentChange(),this.invalidateAccessibleHeadingContent()}invalidateAccessibleHeadingContent(){for(let e=0;e<this._pdomInstances.length;e++)this._pdomInstances[e].peer.setHeadingContent(ro(this._accessibleHeading))}setAccessibleHelpTextBehavior(e){this._accessibleHelpTextBehavior!==e&&(this._accessibleHelpTextBehavior=e,this.onPDOMContentChange())}set accessibleHelpTextBehavior(e){this.setAccessibleHelpTextBehavior(e)}get accessibleHelpTextBehavior(){return this.getAccessibleHelpTextBehavior()}getAccessibleHelpTextBehavior(){return this._accessibleHelpTextBehavior}setTagName(e){e!==this._tagName&&(this._tagName=e,this.onPDOMContentChange())}set tagName(e){this.setTagName(e)}get tagName(){return this.getTagName()}getTagName(){return this._tagName}setLabelTagName(e){e!==this._labelTagName&&(this._labelTagName=e,this.onPDOMContentChange())}set labelTagName(e){this.setLabelTagName(e)}get labelTagName(){return this.getLabelTagName()}getLabelTagName(){return this._labelTagName}setDescriptionTagName(e){e!==this._descriptionTagName&&(this._descriptionTagName=e,this.onPDOMContentChange())}set descriptionTagName(e){this.setDescriptionTagName(e)}get descriptionTagName(){return this.getDescriptionTagName()}getDescriptionTagName(){return this._descriptionTagName}setInputType(e){if(e!==this._inputType){this._inputType=e;for(let t=0;t<this._pdomInstances.length;t++){const i=this._pdomInstances[t].peer;e===null?i.removeAttributeFromElement("type"):i.setAttributeToElement("type",e)}}}set inputType(e){this.setInputType(e)}get inputType(){return this.getInputType()}getInputType(){return this._inputType}setAppendLabel(e){this._appendLabel!==e&&(this._appendLabel=e,this.onPDOMContentChange())}set appendLabel(e){this.setAppendLabel(e)}get appendLabel(){return this.getAppendLabel()}getAppendLabel(){return this._appendLabel}setAppendDescription(e){this._appendDescription!==e&&(this._appendDescription=e,this.onPDOMContentChange())}set appendDescription(e){this.setAppendDescription(e)}get appendDescription(){return this.getAppendDescription()}getAppendDescription(){return this._appendDescription}setContainerTagName(e){this._containerTagName!==e&&(this._containerTagName=e,this.onPDOMContentChange())}set containerTagName(e){this.setContainerTagName(e)}get containerTagName(){return this.getContainerTagName()}getContainerTagName(){return this._containerTagName}invalidatePeerLabelSiblingContent(){const e=this.labelContent;e&&!this._labelTagName&&this.setLabelTagName(rk);for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setLabelSiblingContent(e)}setLabelContent(e){e!==this._labelContent&&(Dt(this._labelContent)&&!this._labelContent.isDisposed&&this._labelContent.unlink(this._onLabelContentChangeListener),this._labelContent=e,Dt(e)&&e.lazyLink(this._onLabelContentChangeListener),this.invalidatePeerLabelSiblingContent())}set labelContent(e){this.setLabelContent(e)}get labelContent(){return this.getLabelContent()}getLabelContent(){return ro(this._labelContent)}onInnerContentPropertyChange(){const e=this.innerContent;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPrimarySiblingContent(e)}setInnerContent(e){e!==this._innerContent&&(Dt(this._innerContent)&&!this._innerContent.isDisposed&&this._innerContent.unlink(this._onInnerContentChangeListener),this._innerContent=e,Dt(e)&&e.lazyLink(this._onInnerContentChangeListener),this.onInnerContentPropertyChange())}set innerContent(e){this.setInnerContent(e)}get innerContent(){return this.getInnerContent()}getInnerContent(){return ro(this._innerContent)}invalidatePeerDescriptionSiblingContent(){const e=this.descriptionContent;e&&!this._descriptionTagName&&this.setDescriptionTagName(nk);for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setDescriptionSiblingContent(e)}invalidatePeerParagraphSiblingContent(){for(let e=0;e<this._pdomInstances.length;e++)this._pdomInstances[e].peer.setAccessibleParagraphContent(this.accessibleParagraphContent)}setDescriptionContent(e){e!==this._descriptionContent&&(Dt(this._descriptionContent)&&!this._descriptionContent.isDisposed&&this._descriptionContent.unlink(this._onDescriptionContentChangeListener),this._descriptionContent=e,Dt(e)&&e.lazyLink(this._onDescriptionContentChangeListener),this.invalidatePeerDescriptionSiblingContent())}set descriptionContent(e){this.setDescriptionContent(e)}get descriptionContent(){return this.getDescriptionContent()}getDescriptionContent(){return ro(this._descriptionContent)}setAccessibleParagraphBehavior(e){this._accessibleParagraphBehavior!==e&&(this._accessibleParagraphBehavior=e,this.onPDOMContentChange())}set accessibleParagraphBehavior(e){this.setAccessibleParagraphBehavior(e)}get accessibleParagraphBehavior(){return this.getAccessibleParagraphBehavior()}getAccessibleParagraphBehavior(){return this._accessibleParagraphBehavior}setAriaRole(e){this._ariaRole!==e&&(this._ariaRole=e,e!==null?this.setPDOMAttribute("role",e):this.removePDOMAttribute("role"))}set ariaRole(e){this.setAriaRole(e)}get ariaRole(){return this.getAriaRole()}getAriaRole(){return this._ariaRole}setContainerAriaRole(e){this._containerAriaRole!==e&&(this._containerAriaRole=e,e===null?this.removePDOMAttribute("role",{elementName:Mm}):this.setPDOMAttribute("role",e,{elementName:Mm}))}set containerAriaRole(e){this.setContainerAriaRole(e)}get containerAriaRole(){return this.getContainerAriaRole()}getContainerAriaRole(){return this._containerAriaRole}onAriaValueTextChange(){const e=this.ariaValueText;e===null?this._hasAppliedAriaLabel&&(this.removePDOMAttribute("aria-valuetext"),this._hasAppliedAriaLabel=!1):(this.setPDOMAttribute("aria-valuetext",e),this._hasAppliedAriaLabel=!0)}onAccessibleRoleDescriptionChange(){const e=this.accessibleRoleDescription;e===null?this.removePDOMAttribute("aria-roledescription"):this.setPDOMAttribute("aria-roledescription",e)}setAriaValueText(e){this._ariaValueText!==e&&(Dt(this._ariaValueText)&&!this._ariaValueText.isDisposed&&this._ariaValueText.unlink(this._onAriaValueTextChangeListener),this._ariaValueText=e,Dt(e)&&e.lazyLink(this._onAriaValueTextChangeListener),this.onAriaValueTextChange())}set ariaValueText(e){this.setAriaValueText(e)}get ariaValueText(){return this.getAriaValueText()}getAriaValueText(){return ro(this._ariaValueText)}setPDOMNamespace(e){return this._pdomNamespace!==e&&(this._pdomNamespace=e,this.onPDOMContentChange()),this}set pdomNamespace(e){this.setPDOMNamespace(e)}get pdomNamespace(){return this.getPDOMNamespace()}getPDOMNamespace(){return this._pdomNamespace}onAriaLabelChange(){const e=this.ariaLabel;e===null?this._hasAppliedAriaLabel&&(this.removePDOMAttribute("aria-label"),this._hasAppliedAriaLabel=!1):(this.setPDOMAttribute("aria-label",e),this._hasAppliedAriaLabel=!0)}setAriaLabel(e){this._ariaLabel!==e&&(Dt(this._ariaLabel)&&!this._ariaLabel.isDisposed&&this._ariaLabel.unlink(this._onAriaLabelChangeListener),this._ariaLabel=e,Dt(e)&&e.lazyLink(this._onAriaLabelChangeListener),this.onAriaLabelChange())}set ariaLabel(e){this.setAriaLabel(e)}get ariaLabel(){return this.getAriaLabel()}getAriaLabel(){return ro(this._ariaLabel)}setAccessibleRoleDescription(e){this._accessibleRoleDescription!==e&&(Dt(this._accessibleRoleDescription)&&!this._accessibleRoleDescription.isDisposed&&this._accessibleRoleDescription.unlink(this._onAccessibleRoleDescriptionChangeListener),this._accessibleRoleDescription=e,Dt(e)&&e.lazyLink(this._onAccessibleRoleDescriptionChangeListener),this.onAccessibleRoleDescriptionChange())}set accessibleRoleDescription(e){this.setAccessibleRoleDescription(e)}get accessibleRoleDescription(){return this.getAccessibleRoleDescription()}getAccessibleRoleDescription(){return ro(this._accessibleRoleDescription)}setFocusHighlight(e){this._focusHighlight!==e&&(this._focusHighlight=e,this._focusHighlightLayerable&&(e.visible=!1),this.focusHighlightChangedEmitter.emit())}set focusHighlight(e){this.setFocusHighlight(e)}get focusHighlight(){return this.getFocusHighlight()}getFocusHighlight(){return this._focusHighlight}setFocusHighlightLayerable(e){this._focusHighlightLayerable!==e&&(this._focusHighlightLayerable=e,this._focusHighlight&&(this._focusHighlight.visible=!1,this.focusHighlightChangedEmitter.emit()))}set focusHighlightLayerable(e){this.setFocusHighlightLayerable(e)}get focusHighlightLayerable(){return this.getFocusHighlightLayerable()}getFocusHighlightLayerable(){return this._focusHighlightLayerable}setGroupFocusHighlight(e){this._groupFocusHighlight=e}set groupFocusHighlight(e){this.setGroupFocusHighlight(e)}get groupFocusHighlight(){return this.getGroupFocusHighlight()}getGroupFocusHighlight(){return this._groupFocusHighlight}setAriaLabelledbyAssociations(e){let t,i;if(e.length===0&&this._ariaLabelledbyAssociations.length===0)return;const s=[],r=[],o=[];for(Ih(e,this._ariaLabelledbyAssociations,r,s,o),i=0;i<s.length;i++)t=s[i],this.removeAriaLabelledbyAssociation(t);for(i=0;i<r.length;i++){const c=e[i];this.addAriaLabelledbyAssociation(c)}}set ariaLabelledbyAssociations(e){this.setAriaLabelledbyAssociations(e)}get ariaLabelledbyAssociations(){return this.getAriaLabelledbyAssociations()}getAriaLabelledbyAssociations(){return this._ariaLabelledbyAssociations}addAriaLabelledbyAssociation(e){this._ariaLabelledbyAssociations.push(e),e.otherNode._nodesThatAreAriaLabelledbyThisNode.push(this),this.updateAriaLabelledbyAssociationsInPeers()}removeAriaLabelledbyAssociation(e){this._ariaLabelledbyAssociations.splice(te.indexOf(this._ariaLabelledbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaLabelledByThisNode(this),this.updateAriaLabelledbyAssociationsInPeers()}removeNodeThatIsAriaLabelledByThisNode(e){const t=te.indexOf(this._nodesThatAreAriaLabelledbyThisNode,e);this._nodesThatAreAriaLabelledbyThisNode.splice(t,1)}updateAriaLabelledbyAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onAriaLabelledbyAssociationChange()}updateOtherNodesAriaLabelledby(){for(let e=0;e<this._nodesThatAreAriaLabelledbyThisNode.length;e++)this._nodesThatAreAriaLabelledbyThisNode[e].updateAriaLabelledbyAssociationsInPeers()}getNodesThatAreAriaLabelledbyThisNode(){return this._nodesThatAreAriaLabelledbyThisNode}get nodesThatAreAriaLabelledbyThisNode(){return this.getNodesThatAreAriaLabelledbyThisNode()}setAriaDescribedbyAssociations(e){let t;if(e.length===0&&this._ariaDescribedbyAssociations.length===0)return;const i=[],s=[],r=[];let o;for(Ih(e,this._ariaDescribedbyAssociations,s,i,r),o=0;o<i.length;o++)t=i[o],this.removeAriaDescribedbyAssociation(t);for(o=0;o<s.length;o++){const c=e[o];this.addAriaDescribedbyAssociation(c)}}set ariaDescribedbyAssociations(e){this.setAriaDescribedbyAssociations(e)}get ariaDescribedbyAssociations(){return this.getAriaDescribedbyAssociations()}getAriaDescribedbyAssociations(){return this._ariaDescribedbyAssociations}addAriaDescribedbyAssociation(e){this._ariaDescribedbyAssociations.push(e),e.otherNode._nodesThatAreAriaDescribedbyThisNode.push(this),this.updateAriaDescribedbyAssociationsInPeers()}hasAriaDescribedbyAssociation(e){return te.includes(this._ariaDescribedbyAssociations,e)}removeAriaDescribedbyAssociation(e){this._ariaDescribedbyAssociations.splice(te.indexOf(this._ariaDescribedbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaDescribedByThisNode(this),this.updateAriaDescribedbyAssociationsInPeers()}removeNodeThatIsAriaDescribedByThisNode(e){const t=te.indexOf(this._nodesThatAreAriaDescribedbyThisNode,e);this._nodesThatAreAriaDescribedbyThisNode.splice(t,1)}updateAriaDescribedbyAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onAriaDescribedbyAssociationChange()}updateOtherNodesAriaDescribedby(){for(let e=0;e<this._nodesThatAreAriaDescribedbyThisNode.length;e++)this._nodesThatAreAriaDescribedbyThisNode[e].updateAriaDescribedbyAssociationsInPeers()}getNodesThatAreAriaDescribedbyThisNode(){return this._nodesThatAreAriaDescribedbyThisNode}get nodesThatAreAriaDescribedbyThisNode(){return this.getNodesThatAreAriaDescribedbyThisNode()}setActiveDescendantAssociations(e){let t;if(e.length===0&&this._activeDescendantAssociations.length===0)return;const i=[],s=[],r=[];let o;for(Ih(e,this._activeDescendantAssociations,s,i,r),o=0;o<i.length;o++)t=i[o],this.removeActiveDescendantAssociation(t);for(o=0;o<s.length;o++){const c=e[o];this.addActiveDescendantAssociation(c)}}set activeDescendantAssociations(e){this.setActiveDescendantAssociations(e)}get activeDescendantAssociations(){return this.getActiveDescendantAssociations()}getActiveDescendantAssociations(){return this._activeDescendantAssociations}addActiveDescendantAssociation(e){this._activeDescendantAssociations.push(e),e.otherNode._nodesThatAreActiveDescendantToThisNode.push(this),this.updateActiveDescendantAssociationsInPeers()}removeActiveDescendantAssociation(e){this._activeDescendantAssociations.splice(te.indexOf(this._activeDescendantAssociations,e),1)[0].otherNode.removeNodeThatIsActiveDescendantThisNode(this),this.updateActiveDescendantAssociationsInPeers()}removeNodeThatIsActiveDescendantThisNode(e){const t=te.indexOf(this._nodesThatAreActiveDescendantToThisNode,e);this._nodesThatAreActiveDescendantToThisNode.splice(t,1)}updateActiveDescendantAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onActiveDescendantAssociationChange()}updateOtherNodesActiveDescendant(){for(let e=0;e<this._nodesThatAreActiveDescendantToThisNode.length;e++)this._nodesThatAreActiveDescendantToThisNode[e].updateActiveDescendantAssociationsInPeers()}getNodesThatAreActiveDescendantToThisNode(){return this._nodesThatAreActiveDescendantToThisNode}get nodesThatAreActiveDescendantToThisNode(){return this.getNodesThatAreActiveDescendantToThisNode()}setPDOMOrder(e){let t=this._pdomOrder===null&&e!==null||this._pdomOrder!==null&&e===null;if(!t&&e&&this._pdomOrder&&(t=e.length!==this._pdomOrder.length,!t)){for(let i=0;i<e.length;i++)if(e[i]!==this._pdomOrder[i]){t=!0;break}}if(t){const i=this._pdomOrder;this._pdomOrder=e===null?null:e.slice(),Vi.pdomOrderChange(this,i,e),this.rendererSummaryRefreshEmitter.emit()}}set pdomOrder(e){this.setPDOMOrder(e)}get pdomOrder(){return this.getPDOMOrder()}getPDOMOrder(){return this._pdomOrder?this._pdomOrder.slice(0):this._pdomOrder}hasPDOMOrder(){return this._pdomOrder!==null&&this._pdomOrder.length!==0&&(this._pdomOrder.length>1||this._pdomOrder[0]!==null)}getPDOMParent(){return this._pdomParent}get pdomParent(){return this.getPDOMParent()}getEffectiveChildren(){const e=[];for(let t=0;t<this._children.length;t++){const i=this._children[t];i._pdomParent||e.push(i)}if(this.hasPDOMOrder()){const t=this.pdomOrder.slice(),i=t.indexOf(null);return i>=0?(e.unshift(i,1),Array.prototype.splice.apply(t,e)):Array.prototype.push.apply(t,e),t}else return e}onPdomVisiblePropertyChange(e){this._pdomDisplaysInfo.onPDOMVisibilityChange(e)}setPdomVisibleProperty(e){return this._pdomVisibleProperty.setTargetProperty(e),this}set pdomVisibleProperty(e){this.setPdomVisibleProperty(e)}get pdomVisibleProperty(){return this.getPdomVisibleProperty()}getPdomVisibleProperty(){return this._pdomVisibleProperty}setPDOMVisible(e){this.pdomVisibleProperty.value=e}set pdomVisible(e){this.setPDOMVisible(e)}get pdomVisible(){return this.isPDOMVisible()}isPDOMVisible(){return this.pdomVisibleProperty.value}isPDOMDisplayed(){for(let e=0;e<this._pdomInstances.length;e++)if(this._pdomInstances[e].isGloballyVisible())return!0;return!1}get pdomDisplayed(){return this.isPDOMDisplayed()}invalidatePeerInputValue(){for(let e=0;e<this.pdomInstances.length;e++)this.pdomInstances[e].peer.onInputValueChange()}setInputValue(e){e!==this._inputValue&&(Dt(this._inputValue)&&!this._inputValue.isDisposed&&this._inputValue.unlink(this._onPDOMContentChangeListener),this._inputValue=e,Dt(e)&&e.lazyLink(this._onPDOMContentChangeListener),this.invalidatePeerInputValue())}set inputValue(e){this.setInputValue(e)}get inputValue(){return this.getInputValue()}getInputValue(){let e;return Dt(this._inputValue)?e=this._inputValue.value:e=this._inputValue,e===null?null:""+e}setPDOMChecked(e){this._tagName,this._inputType,this._pdomChecked!==e&&(this._pdomChecked=e,this.setPDOMAttribute("checked",e,{type:"property"}))}set pdomChecked(e){this.setPDOMChecked(e)}get pdomChecked(){return this.getPDOMChecked()}getPDOMChecked(){return this._pdomChecked}getPDOMAttributes(){return this._pdomAttributes.slice(0)}setPDOMAttributes(e){this.removePDOMAttributes();for(let t=0;t<e.length;t++){const i=e[t];this.setPDOMAttribute(i.attribute,i.value,i.options)}}get pdomAttributes(){return this.getPDOMAttributes()}set pdomAttributes(e){this.setPDOMAttributes(e)}setPDOMAttribute(e,t,i){var o,c;const s=lt()({namespace:null,type:"attribute",elementName:Ch},i);for(let p=0;p<this._pdomAttributes.length;p++){const g=this._pdomAttributes[p];g.attribute===e&&((o=g.options)==null?void 0:o.namespace)===s.namespace&&((c=g.options)==null?void 0:c.elementName)===s.elementName&&(!Dt(g.value)&&g.options.type===s.type?this._pdomAttributes.splice(p,1):this.removePDOMAttribute(g.attribute,g.options))}let r=p=>{for(let g=0;g<this._pdomInstances.length;g++)this._pdomInstances[g].peer.setAttributeToElement(e,p,s)};Dt(t)?t.link(r):(r(t),r=null),this._pdomAttributes.push({attribute:e,value:t,listener:r,options:s})}removePDOMAttribute(e,t){var s,r;const i=lt()({namespace:null,elementName:Ch},t);for(let o=0;o<this._pdomAttributes.length;o++)if(this._pdomAttributes[o].attribute===e&&((s=this._pdomAttributes[o].options)==null?void 0:s.namespace)===i.namespace&&((r=this._pdomAttributes[o].options)==null?void 0:r.elementName)===i.elementName){const c=this._pdomAttributes[o];c.listener&&Dt(c.value)&&!c.value.isDisposed&&c.value.unlink(c.listener),this._pdomAttributes.splice(o,1)}for(let o=0;o<this._pdomInstances.length;o++)this._pdomInstances[o].peer.removeAttributeFromElement(e,i)}removePDOMAttributes(){const e=this.getPDOMAttributes();for(let t=0;t<e.length;t++){const i=e[t].attribute;this.removePDOMAttribute(i)}}hasPDOMAttribute(e,t){var r,o;const i=lt()({namespace:null,elementName:Ch},t);let s=!1;for(let c=0;c<this._pdomAttributes.length;c++)this._pdomAttributes[c].attribute===e&&((r=this._pdomAttributes[c].options)==null?void 0:r.namespace)===i.namespace&&((o=this._pdomAttributes[c].options)==null?void 0:o.elementName)===i.elementName&&(s=!0);return s}setPDOMClass(e,t){const i=lt()({elementName:Ch},t);for(let s=0;s<this._pdomClasses.length;s++){const r=this._pdomClasses[s];if(r.className===e&&r.options.elementName===i.elementName)return}this._pdomClasses.push({className:e,options:i});for(let s=0;s<this._pdomInstances.length;s++)this._pdomInstances[s].peer.setClassToElement(e,i)}removePDOMClass(e,t){const i=lt()({elementName:Ch},t);for(let s=0;s<this._pdomClasses.length;s++)this._pdomClasses[s].className===e&&this._pdomClasses[s].options.elementName===i.elementName&&this._pdomClasses.splice(s,1);for(let s=0;s<this._pdomClasses.length;s++)this.pdomInstances[s].peer.removeClassFromElement(e,i)}getPDOMClasses(){return this._pdomClasses.slice(0)}get pdomClasses(){return this.getPDOMClasses()}setFocusable(e){if(this._focusableOverride!==e){this._focusableOverride=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setFocusable(this.focusable)}}set focusable(e){this.setFocusable(e)}get focusable(){return this.isFocusable()}isFocusable(){return this._focusableOverride!==null?this._focusableOverride:this._tagName===null?!1:Jt.tagIsDefaultFocusable(this._tagName)}setPDOMTransformSourceNode(e){this._pdomTransformSourceNode=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPDOMTransformSourceNode(this._pdomTransformSourceNode)}set pdomTransformSourceNode(e){this.setPDOMTransformSourceNode(e)}get pdomTransformSourceNode(){return this.getPDOMTransformSourceNode()}getPDOMTransformSourceNode(){return this._pdomTransformSourceNode}setFocusPanTargetBoundsProperty(e){e!==this._focusPanTargetBoundsProperty&&(this._focusPanTargetBoundsProperty=e)}getFocusPanTargetBoundsProperty(){return this._focusPanTargetBoundsProperty}set focusPanTargetBoundsProperty(e){this.setFocusPanTargetBoundsProperty(e)}get focusPanTargetBoundsProperty(){return this.getFocusPanTargetBoundsProperty()}setLimitPanDirection(e){this._limitPanDirection=e}getLimitPanDirection(){return this._limitPanDirection}set limitPanDirection(e){this.setLimitPanDirection(e)}get limitPanDirection(){return this.getLimitPanDirection()}setPositionInPDOM(e){this._positionInPDOM=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPositionInPDOM(e)}set positionInPDOM(e){this.setPositionInPDOM(e)}get positionInPDOM(){return this.getPositionInPDOM()}getPositionInPDOM(){return this._positionInPDOM}setExcludeLabelSiblingFromInput(){this._excludeLabelSiblingFromInput=!0,this.onPDOMContentChange()}isInsidePhetioArchetype(e=this){if(e.isPhetioInstrumented())return e.phetioIsArchetype;for(let t=0;t<e.parents.length;t++)if(this.isInsidePhetioArchetype(e.parents[t]))return!0;return!1}addAccessibleResponse(e){if(Pc.value||Xe.PHET_IO_ENABLED&&this.isInsidePhetioArchetype())return;const t=this.getConnectedDisplays();for(let i=0;i<t.length;i++){const s=t[i];s.isAccessible()&&s.descriptionUtteranceQueue.addToBack(e)}}forEachUtteranceQueue(e){const t=this.getConnectedDisplays();for(let i=0;i<t.length;i++){const s=t[i];s.isAccessible()&&e(s.descriptionUtteranceQueue)}}getBaseOptions(){const e={};for(let t=0;t<Om.length;t++){const i=Om[t];e[i]=this[i]}return e}getNestedPDOMOrder(){const e=new bi(this);let t=[];const i=[],s=[i];function r(o,c){let p=0;if(te.each(t,C=>{o===C&&p++}),p>1||p===1&&!c)return;if(o.hasPDOMContent){const C={trail:e.copy(),children:[]};s[s.length-1].push(C),s.push(C.children)}const g=o._pdomOrder===null?[]:o._pdomOrder;t=t.concat(g),te.each(g,C=>{te.each(o.getLeafTrailsTo(C),D=>{D.removeAncestor(),e.addDescendantTrail(D),r(C,!0),e.removeDescendantTrail(D)})});const A=o._children.length;for(let C=0;C<A;C++){const D=o._children[C];e.addDescendant(D,C),r(D,!1),e.removeDescendant()}te.each(g,()=>{t.pop()}),o.hasPDOMContent&&s.pop()}return r(this,!1),i}onPDOMContentChange(){Vi.pdomContentChange(this),this.rendererSummaryRefreshEmitter.emit()}get hasPDOMContent(){return!!this._tagName||!!this._accessibleParagraph}onPDOMAddChild(e){this._pdomDisplaysInfo.onAddChild(e),Vi.addChild(this,e)}onPDOMRemoveChild(e){this._pdomDisplaysInfo.onRemoveChild(e),Vi.removeChild(this,e),e.updateOtherNodesAriaLabelledby(),e.updateOtherNodesAriaDescribedby(),e.updateOtherNodesActiveDescendant()}onPDOMReorderedChildren(){Vi.childrenOrderChange(this)}updateLinkedElementForProperty(e,t,i){if(this.isPhetioInstrumented()){t&&t instanceof Ds&&t.isPhetioInstrumented()&&t instanceof Gi&&this.removeLinkedElements(t);const s=this.tandem.createTandem(e);i&&i instanceof Ds&&i.isPhetioInstrumented()&&i instanceof Gi&&s!==i.tandem&&this.addLinkedElement(i,{tandemName:e})}}getPDOMInstances(){return this._pdomInstances}get pdomInstances(){return this.getPDOMInstances()}addPDOMInstance(e){this._pdomInstances.push(e)}removePDOMInstance(e){const t=te.indexOf(this._pdomInstances,e);this._pdomInstances.splice(t,1)}static BASIC_ACCESSIBLE_NAME_BEHAVIOR(e,t,i){return e.labelTagName&&Jt.tagNameSupportsContent(e.labelTagName)?t.labelContent=i:e.tagName==="input"?(t.labelTagName="label",t.labelContent=i):Jt.tagNameSupportsContent(e.tagName)?t.innerContent=i:t.ariaLabel=i,t}static BASIC_ACCESSIBLE_PARAGRAPH_BEHAVIOR(e,t,i){return t.accessibleParagraphContent=i,t}static forwardAccessibleName(e,t){Ir.useDefaultTagName(e),e.accessibleNameBehavior=(i,s,r,o)=>(o.push(()=>{t.accessibleName=r}),s)}static forwardHelpText(e,t){Ir.useDefaultTagName(e),e.accessibleHelpTextBehavior=(i,s,r,o)=>(o.push(()=>{t.accessibleHelpText=r}),s)}static HELP_TEXT_BEFORE_CONTENT(e,t,i){return t.descriptionTagName=Jt.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=i,t.appendDescription=!1,t}static HELP_TEXT_AFTER_CONTENT(e,t,i){return t.descriptionTagName=Jt.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=i,t.appendDescription=!0,t}static useDefaultTagName(e){e.tagName||(e.tagName=sk)}}class ak{constructor(){this.hotkeysProperty=new ui(new Set)}add(e){this.hotkeysProperty.value=new Set([...this.hotkeysProperty.value,e])}remove(e){this.hotkeysProperty.value=new Set([...this.hotkeysProperty.value].filter(t=>t!==e))}}const ok=new ak,lk=(n,e)=>n.length===e.length&&n.every((t,i)=>t===e[i]),hk=(n,e)=>n.size===e.size&&[...n].every(t=>e.has(t));class uk{constructor(){this.enabledHotkeysProperty=new ui([]),this.englishKeysDown=new Set,this.modifierKeys=[],this.activeHotkeys=new Set,this.availableHotkeysProperty=new Oi([ok.hotkeysProperty,In],(s,r)=>{const o=[];if(r)for(const c of r.trail.nodes.slice().reverse()){if(!c.isInputEnabled())break;c.inputListeners.forEach(p=>{var g;(g=p.hotkeys)==null||g.forEach(A=>{o.push(A)})})}return o.push(...s),te.uniq(o)},{valueComparisonStrategy:lk});const e=()=>{this.availableHotkeysProperty.recomputeDerivation()};In.link((s,r)=>{r&&r.trail.nodes.forEach(o=>{o.inputEnabledProperty.unlink(e)}),s&&s.trail.nodes.forEach(o=>{o.inputEnabledProperty.lazyLink(e)})});const t=()=>{const s=new Set,r=[];for(const o of this.availableHotkeysProperty.value)if(o.enabledProperty.value){const c=o.keyDescriptorProperty.value.modifierKeys,p=o.keyDescriptorProperty.value.key,g=[...c.slice().sort(),p].join("+");o.overlapBehavior==="allow"?r.push(o):s.has(g)||(r.push(o),o.overlapBehavior==="handle"&&s.add(g))}this.enabledHotkeysProperty.value=r},i=new Map;this.availableHotkeysProperty.link((s,r)=>{let o=!1;if(r){for(const c of r)if(!s.includes(c)){const p=i.get(c);i.delete(c),c.enabledProperty.unlink(p),c.keyDescriptorProperty.unlink(p),o=!0}}for(const c of s)if(!r||!r.includes(c)){const p=()=>t();i.set(c,p),c.enabledProperty.lazyLink(p),c.keyDescriptorProperty.lazyLink(p),o=!0}o&&t()}),this.enabledHotkeysProperty.link((s,r)=>{if(this.modifierKeys=te.uniq([...K1,...[...s].flatMap(o=>o.keyDescriptorProperty.value.modifierKeys)]),r)for(const o of r)!s.includes(o)&&this.activeHotkeys.has(o)&&this.removeActiveHotkey(o,null,!1);this.updateHotkeyStatus(null)}),Xr.keyDownStateChangedEmitter.addListener(s=>{const r=Xr.getEnglishKeysDown();if(!hk(this.englishKeysDown,r))this.englishKeysDown=r,this.updateHotkeyStatus(s);else for(const c of[...this.activeHotkeys])c.fireOnHold&&c.fireOnHoldTiming==="browser"&&c.fire(s)})}updateHotkeysFromInputListenerChange(e){In.value&&In.value.trail.nodes.includes(e)&&this.availableHotkeysProperty.recomputeDerivation()}getHotkeysForMainKey(e){return this.englishKeysDown.has(e)?[...this.enabledHotkeysProperty.value].filter(i=>i.keyDescriptorProperty.value.key!==e?!1:this.modifierKeys.every(r=>{const o=i.keyDescriptorProperty.value.ignoredModifierKeys;return this.englishKeysDown.has(r)===i.keysProperty.value.includes(r)||o.includes(r)})):[]}updateHotkeyStatus(e){const t=Ne.getEventCode(e),i=t?Xd(t):null;for(const s of this.enabledHotkeysProperty.value){const r=s.keyDescriptorProperty.value.key,o=this.getHotkeysForMainKey(r).includes(s),c=!s.interrupted||e&&e.type==="keydown",p=o&&c,g=this.activeHotkeys.has(s),A=s.keyDescriptorProperty.value.key;p&&!g?this.addActiveHotkey(s,e,A===i):!p&&g&&this.removeActiveHotkey(s,e,A===i)}}addActiveHotkey(e,t,i){this.activeHotkeys.add(e);const s=i&&e.fireOnDown;e.onPress(t,s)}removeActiveHotkey(e,t,i){this.activeHotkeys.delete(e);const s=i&&!e.fireOnDown,r=!i;e.onRelease(t,r,s)}interruptHotkey(e){this.removeActiveHotkey(e,null,!1)}}const c2=new uk;class Lh{constructor(e,t){this.canvas=e,this.context=t,this.resetStyles()}resetStyles(){this.fillStyle=void 0,this.strokeStyle=void 0,this.lineWidth=void 0,this.lineCap=void 0,this.lineJoin=void 0,this.lineDash=void 0,this.lineDashOffset=void 0,this.miterLimit=void 0,this.font=void 0,this.direction=void 0}setDimensions(e,t){this.canvas.width=e,this.canvas.height=t,this.resetStyles()}setFillStyle(e){e&&Dt(e)&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.fillStyle!==e&&(this.fillStyle=e,this.context.fillStyle=e)}setStrokeStyle(e){e&&Dt(e)&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.strokeStyle!==e&&(this.strokeStyle=e,this.context.strokeStyle=e)}setLineWidth(e){this.lineWidth!==e&&(this.lineWidth=e,this.context.lineWidth=e)}setLineCap(e){this.lineCap!==e&&(this.lineCap=e,this.context.lineCap=e)}setLineJoin(e){this.lineJoin!==e&&(this.lineJoin=e,this.context.lineJoin=e)}setMiterLimit(e){this.miterLimit!==e&&(this.miterLimit=e,this.context.miterLimit=e)}setLineDash(e){this.lineDash!==e&&(this.lineDash=e,this.context.setLineDash?this.context.setLineDash(e===null?[]:e):this.context.mozDash!==void 0?this.context.mozDash=e:this.context.webkitLineDash!==void 0&&(this.context.webkitLineDash=e||[]))}setLineDashOffset(e){this.lineDashOffset!==e&&(this.lineDashOffset=e,this.context.lineDashOffset!==void 0?this.context.lineDashOffset=e:this.context.webkitLineDashOffset!==void 0&&(this.context.webkitLineDashOffset=e))}setFont(e){this.font!==e&&(this.font=e,this.context.font=e)}setDirection(e){this.direction!==e&&(this.direction=e,this.context.direction=e)}}class ck{constructor(e){this.node=e,this.selfPruned=!1,this.selfInclusive=!1,this.subtreePrunable=!0,this.subtreePickableCount=0,this.mouseInclusiveBounds=Je.NOTHING.copy(),this.mouseExclusiveBounds=Je.NOTHING.copy(),this.touchInclusiveBounds=Je.NOTHING.copy(),this.touchExclusiveBounds=Je.NOTHING.copy(),this.mouseInclusiveDirty=!0,this.mouseExclusiveDirty=!0,this.touchInclusiveDirty=!0,this.touchExclusiveDirty=!0,this.scratchVector=new we(0,0)}hitTest(e,t,i){const s=this.selfInclusive;return t?s?this.validateMouseInclusive():this.validateMouseExclusive():i?s?this.validateTouchInclusive():this.validateTouchExclusive():this.node.validateBounds(),this.recursiveHitTest(e,t,i,!1)}recursiveHitTest(e,t,i,s){if(s=s||this.selfInclusive,this.selfPruned||!s&&this.subtreePrunable)return null;let r;if(t?r=s?this.mouseInclusiveBounds:this.mouseExclusiveBounds:i?r=s?this.touchInclusiveBounds:this.touchExclusiveBounds:r=this.node.bounds,!r.containsPoint(e))return null;const o=this.node._transform.getInverse().multiplyVector2(this.scratchVector.set(e)),c=this.node.clipArea;if(c!==null&&!c.containsPoint(o))return null;for(let p=this.node._children.length-1;p>=0;p--){const A=this.node._children[p]._picker.recursiveHitTest(o,t,i,s);if(A)return A.addAncestor(this.node,p)}return t&&this.node._mouseArea?this.node._mouseArea.containsPoint(o)?new bi(this.node):null:i&&this.node._touchArea?this.node._touchArea.containsPoint(o)?new bi(this.node):null:this.node.selfBounds.containsPoint(o)&&this.node.containsPointSelf(o)?new bi(this.node):null}invalidate(e,t){let i=!!t||!this.mouseInclusiveDirty||!this.touchInclusiveDirty;if(this.mouseInclusiveDirty=!0,this.touchInclusiveDirty=!0,e&&(i=i||!this.mouseExclusiveDirty||!this.touchExclusiveDirty,this.mouseExclusiveDirty=!0,this.touchExclusiveDirty=!0),!this.selfPruned&&i){const s=this.node._parents;for(let r=0;r<s.length;r++)s[r]._picker.invalidate(e||this.selfInclusive,!1)}}validateMouseInclusive(){if(!this.mouseInclusiveDirty)return;this.mouseInclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.selfPruned||(i.validateMouseInclusive(),this.mouseInclusiveBounds.includeBounds(i.mouseInclusiveBounds))}this.applyAreasAndTransform(this.mouseInclusiveBounds,this.node._mouseArea),this.mouseInclusiveDirty=!1}validateMouseExclusive(){if(!this.mouseExclusiveDirty)return;this.mouseExclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.subtreePrunable||(i.selfInclusive?(i.validateMouseInclusive(),this.mouseExclusiveBounds.includeBounds(i.mouseInclusiveBounds)):(i.validateMouseExclusive(),this.mouseExclusiveBounds.includeBounds(i.mouseExclusiveBounds)))}this.applyAreasAndTransform(this.mouseExclusiveBounds,this.node._mouseArea),this.mouseExclusiveDirty=!1}validateTouchInclusive(){if(!this.touchInclusiveDirty)return;this.touchInclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.selfPruned||(i.validateTouchInclusive(),this.touchInclusiveBounds.includeBounds(i.touchInclusiveBounds))}this.applyAreasAndTransform(this.touchInclusiveBounds,this.node._touchArea),this.touchInclusiveDirty=!1}validateTouchExclusive(){if(!this.touchExclusiveDirty)return;this.touchExclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.subtreePrunable||(i.selfInclusive?(i.validateTouchInclusive(),this.touchExclusiveBounds.includeBounds(i.touchInclusiveBounds)):(i.validateTouchExclusive(),this.touchExclusiveBounds.includeBounds(i.touchExclusiveBounds)))}this.applyAreasAndTransform(this.touchExclusiveBounds,this.node._touchArea),this.touchExclusiveDirty=!1}applyAreasAndTransform(e,t){t&&e.includeBounds(t instanceof Je?t:t.bounds);const i=this.node.clipArea;if(i){const s=i.bounds;e.minX=Math.max(e.minX,s.minX),e.minY=Math.max(e.minY,s.minY),e.maxX=Math.min(e.maxX,s.maxX),e.maxY=Math.min(e.maxY,s.maxY)}this.node.transformBoundsFromLocalToParent(e)}onInsertChild(e){if(!e._picker.selfPruned){const t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(1),this.invalidate(t,!0)}}onRemoveChild(e){if(!e._picker.selfPruned){const t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(-1),this.invalidate(t,!0)}}onAddInputListener(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(1)}onRemoveInputListener(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(-1)}onPickableChange(e,t){this.checkSelfPruned(),this.checkSelfInclusive(),this.checkSubtreePrunable();const i=(e===!0?-1:0)+(t===!0?1:0);i&&this.changePickableCount(i)}onVisibilityChange(){this.checkSelfPruned(),this.checkSubtreePrunable()}onMouseAreaChange(){this.invalidate(!0)}onTouchAreaChange(){this.invalidate(!0)}onTransformChange(){this.invalidate(!0)}onSelfBoundsDirty(){this.invalidate(!0)}onClipAreaChange(){this.invalidate(!0)}checkSelfPruned(){const e=this.node.pickableProperty.value===!1||!this.node.isVisible();if(this.selfPruned!==e){this.selfPruned=e;const t=this.node._parents;for(let i=0;i<t.length;i++){const s=t[i]._picker;this.subtreePickableCount>0?(s.invalidate(!0,!0),s.changePickableCount(this.selfPruned?-1:1)):s.invalidate(!1,!0)}}}checkSelfInclusive(){const e=this.node.pickableProperty.value===!0||this.node._inputListeners.length>0;this.selfInclusive!==e&&(this.selfInclusive=e,this.invalidate(!0,!0))}checkSubtreePrunable(){const e=this.node.pickableProperty.value===!1||!this.node.isVisible()||this.node.pickableProperty.value!==!0&&this.subtreePickableCount===0;this.subtreePrunable!==e&&(this.subtreePrunable=e,this.invalidate(!0,!0))}changePickableCount(e){if(e===0)return;const t=this.subtreePickableCount===0;this.subtreePickableCount+=e;const i=this.subtreePickableCount===0;if(this.checkSubtreePrunable(),!this.selfPruned&&t!==i){const s=this.node._parents.length;for(let r=0;r<s;r++)this.node._parents[r]._picker.changePickableCount(t?1:-1)}}isPotentiallyPickable(){return!this.subtreePrunable&&this.node.inputEnabled}audit(){}}const Do=[Se.bitmaskCanvas,Se.bitmaskSVG,Se.bitmaskDOM,Se.bitmaskWebGL,Se.bitmaskSingleCanvas,Se.bitmaskSingleSVG,Se.bitmaskNotPainted,Se.bitmaskBoundsValid,Se.bitmaskNoPDOM,Se.bitmaskLacksCanvas,Se.bitmaskLacksSVG,Se.bitmaskLacksDOM,Se.bitmaskLacksWebGL],yv={};Do.forEach((n,e)=>{yv[n]=e});const ol=Do.length;let H0=0;for(let n=0;n<ol;n++)H0|=Do[n];class La{constructor(e){this.node=e,this._counts=new Int16Array(ol),this.bitmask=H0,this.selfBitmask=La.summaryBitmaskForNodeSelf(e),this.summaryChange(this.bitmask,this.selfBitmask);const t=this.selfChange.bind(this);this.node.filterChangeEmitter.addListener(t),this.node.clipAreaProperty.lazyLink(t),this.node.rendererSummaryRefreshEmitter.addListener(t)}summaryChange(e,t){const i=e^t;let s=0,r=0;for(let o=0;o<ol;o++){const c=Do[o],p=yv[c];c&i&&(c&t?(this._counts[p]--,this._counts[p]===0&&(r|=c)):(this._counts[p]++,this._counts[p]===1&&(s|=c)))}if(s||r){const o=this.bitmask;for(let p=0;p<ol;p++){const g=Do[p];r&g&&(this.bitmask|=g),s&g&&(this.bitmask^=g)}this.node.instanceRefreshEmitter.emit(),this.node.onSummaryChange(o,this.bitmask);const c=this.node._parents.length;for(let p=0;p<c;p++)this.node._parents[p]._rendererSummary.summaryChange(s,r)}}selfChange(){const e=this.selfBitmask,t=La.summaryBitmaskForNodeSelf(this.node);e!==t&&(this.summaryChange(e,t),this.selfBitmask=t)}computeBitmask(){let e=0;for(let t=0;t<ol;t++)this._counts[t]===0&&(e|=Do[t]);return e}isSubtreeFullyCompatible(e){return!!(e&this.bitmask)}isSubtreeContainingCompatible(e){return!(e<<Se.bitmaskLacksShift&this.bitmask)}isSingleCanvasSupported(){return!!(Se.bitmaskSingleCanvas&this.bitmask)}isSingleSVGSupported(){return!!(Se.bitmaskSingleSVG&this.bitmask)}isNotPainted(){return!!(Se.bitmaskNotPainted&this.bitmask)}hasNoPDOM(){return!!(Se.bitmaskNoPDOM&this.bitmask)}areBoundsValid(){return!!(Se.bitmaskBoundsValid&this.bitmask)}isSubtreeRenderedExclusivelySVG(e){if(!this.isSingleSVGSupported())return!1;for(let t=0;t<Se.numActiveRenderers;t++){const i=Se.bitmaskOrder(e,t);if(Se.bitmaskSVG&i)return!0;if(this.isSubtreeContainingCompatible(i))return!1}return!1}isSubtreeRenderedExclusivelyCanvas(e){if(!this.isSingleCanvasSupported())return!1;for(let t=0;t<Se.numActiveRenderers;t++){const i=Se.bitmaskOrder(e,t);if(Se.bitmaskCanvas&i)return!0;if(this.isSubtreeContainingCompatible(i))return!1}return!1}audit(){}toString(){let e=La.bitmaskToString(this.bitmask);for(let t=0;t<ol;t++){const i=Do[t],s=this._counts[t];s!==0&&(e+=` ${La.bitToString(i)}:${s}`)}return e}static summaryBitmaskForNodeSelf(e){let t=e._rendererBitmask;e.isPainted()?t|=(e._rendererBitmask&Se.bitmaskCurrentRendererArea^Se.bitmaskCurrentRendererArea)<<Se.bitmaskLacksShift:t|=Se.bitmaskCurrentRendererArea<<Se.bitmaskLacksShift;const i=e._cssTransform||e._layerSplit,s=e._renderer;return!i&&Se.isSVG(e._rendererBitmask)&&(!s||Se.isSVG(s))&&(t|=Se.bitmaskSingleSVG),!i&&Se.isCanvas(e._rendererBitmask)&&(!s||Se.isCanvas(s))&&(t|=Se.bitmaskSingleCanvas),e.isPainted()||(t|=Se.bitmaskNotPainted),e.areSelfBoundsValid()&&(t|=Se.bitmaskBoundsValid),!e.hasPDOMContent&&!e.hasPDOMOrder()&&(t|=Se.bitmaskNoPDOM),t}static bitToString(e){return e===Se.bitmaskCanvas?"Canvas":e===Se.bitmaskSVG?"SVG":e===Se.bitmaskDOM?"DOM":e===Se.bitmaskWebGL?"WebGL":e===Se.bitmaskLacksCanvas?"(-Canvas)":e===Se.bitmaskLacksSVG?"(-SVG)":e===Se.bitmaskLacksDOM?"(-DOM)":e===Se.bitmaskLacksWebGL?"(-WebGL)":e===Se.bitmaskSingleCanvas?"SingleCanvas":e===Se.bitmaskSingleSVG?"SingleSVG":e===Se.bitmaskNotPainted?"NotPainted":e===Se.bitmaskBoundsValid?"BoundsValid":e===Se.bitmaskNoPDOM?"NotAccessible":"?"}static bitmaskToString(e){let t="";for(let i=0;i<ol;i++){const s=Do[i];e&s&&(t+=`${La.bitToString(s)} `)}return t}}La.bitmaskAll=H0;let dk=1;const Ru=Je.NOTHING.copy(),fk=Je.NOTHING.copy(),Yg=new nt,Gg=Gd.TANDEM_NAME,Wg="visibleProperty",Xg="inputEnabledProperty",_v=!1,Tl=["leftTop","centerTop","rightTop","leftCenter","center","rightCenter","leftBottom","centerBottom","rightBottom","left","right","top","bottom","centerX","centerY"],pk=["children","cursor","phetioVisiblePropertyInstrumented","visibleProperty","visible","pickableProperty","pickable","phetioEnabledPropertyInstrumented","enabledProperty","enabled","phetioInputEnabledPropertyInstrumented","inputEnabledProperty","inputEnabled","inputListeners","opacity","disabledOpacity","filters","matrix","translation","x","y","rotation","scale","excludeInvisibleChildrenFromBounds","interruptSubtreeOnInvisible","layoutOptions","localBounds","maxWidth","maxHeight","renderer","layerSplit","usesOpacity","cssTransform","excludeInvisible","webglScale","preventFit","mouseArea","touchArea","clipArea","transformBounds",...Tl],Ss={phetioVisiblePropertyInstrumented:!0,visible:!0,opacity:1,disabledOpacity:1,pickable:null,enabled:!0,phetioEnabledPropertyInstrumented:!1,inputEnabled:!0,phetioInputEnabledPropertyInstrumented:!1,clipArea:null,mouseArea:null,touchArea:null,cursor:null,transformBounds:!1,maxWidth:null,maxHeight:null,renderer:null,usesOpacity:!1,layerSplit:!1,cssTransform:!1,excludeInvisible:!1,webglScale:null,preventFit:!1},gk=Ss.renderer===null?0:Se.fromName(Ss.renderer);let At=class Kd extends Ir{constructor(e){super(),this._localBoundsOverridden=!1,this._excludeInvisibleChildrenFromBounds=!1,this._interruptSubtreeOnInvisible=!0,this._layoutOptions=null,this._boundsDirty=!0,this._localBoundsDirty=!0,this._selfBoundsDirty=!0,this._childBoundsDirty=!0,this.childrenChangedEmitter=new Ai,this.childInsertedEmitter=new Ai,this.childRemovedEmitter=new Ai,this.childrenReorderedEmitter=new Ai,this.parentAddedEmitter=new Ai,this.parentRemovedEmitter=new Ai,this.transformEmitter=new Ai,this.instanceRefreshEmitter=new Ai,this.rendererSummaryRefreshEmitter=new Ai,this.filterChangeEmitter=new Ai,this.changedInstanceEmitter=new Ai,this.rootedDisplayChangedEmitter=new Ai,this.layoutOptionsChangedEmitter=new Ai,this._activeParentLayoutConstraint=null,this._isNode=!0,this._id=dk++,this._instances=[],this._rootedDisplays=[],this._drawables=[],this._visibleProperty=new Ra(Ss.visible,Ss.phetioVisiblePropertyInstrumented,this.onVisiblePropertyChange.bind(this)),this.opacityProperty=new ui(Ss.opacity,this.onOpacityPropertyChange.bind(this)),this.disabledOpacityProperty=new ui(Ss.disabledOpacity,this.onDisabledOpacityPropertyChange.bind(this)),this._pickableProperty=new Ra(Ss.pickable,!1,this.onPickablePropertyChange.bind(this)),this._enabledProperty=new Ra(Ss.enabled,Ss.phetioEnabledPropertyInstrumented,this.onEnabledPropertyChange.bind(this)),this._inputEnabledProperty=new Ra(Ss.inputEnabled,Ss.phetioInputEnabledPropertyInstrumented),this.clipAreaProperty=new ui(Ss.clipArea),this.voicingVisibleProperty=new ui(!0),this._mouseArea=Ss.mouseArea,this._touchArea=Ss.touchArea,this._cursor=Ss.cursor,this._children=[],this._parents=[],this._transformBounds=Ss.transformBounds,this._transform=new _r,this._transformListener=this.onTransformChange.bind(this),this._transform.changeEmitter.addListener(this._transformListener),this._maxWidth=Ss.maxWidth,this._maxHeight=Ss.maxHeight,this._appliedScaleFactor=1,this._inputListeners=[],this._renderer=gk,this._usesOpacity=Ss.usesOpacity,this._layerSplit=Ss.layerSplit,this._cssTransform=Ss.cssTransform,this._excludeInvisible=Ss.excludeInvisible,this._webglScale=Ss.webglScale,this._preventFit=Ss.preventFit,this.inputEnabledProperty.lazyLink(this.pdomBoundInputEnabledListener);const t=this.onBoundsListenersAddedOrRemoved.bind(this),i=this.validateBounds.bind(this),s=this.validateSelfBounds.bind(this);this.boundsProperty=new bd(Je.NOTHING.copy(),i),this.boundsProperty.changeCount=t,this.localBoundsProperty=new bd(Je.NOTHING.copy(),i),this.localBoundsProperty.changeCount=t,this.childBoundsProperty=new bd(Je.NOTHING.copy(),i),this.childBoundsProperty.changeCount=t,this.selfBoundsProperty=new bd(Je.NOTHING.copy(),s),this._filters=[],this._rendererBitmask=Se.bitmaskNodeDefault,this._rendererSummary=new La(this),this._boundsEventCount=0,this._boundsEventSelfCount=0,this._picker=new ck(this),this._isGettingRemovedFromParent=!1,e&&this.mutate(e)}insertChild(e,t,i){return this._picker.onInsertChild(t),this.changeBoundsEventCount(t._boundsEventCount>0?1:0),this._rendererSummary.summaryChange(La.bitmaskAll,t._rendererSummary.bitmask),t._parents.push(this),this._children.splice(e,0,t),t._rendererSummary.hasNoPDOM()||this.onPDOMAddChild(t),t.invalidateBounds(),this._boundsDirty=!0,this.childInsertedEmitter.emit(t,e),t.parentAddedEmitter.emit(this),!i&&this.childrenChangedEmitter.emit(),this}addChild(e,t){return this.insertChild(this._children.length,e,t),this}removeChild(e,t){const i=te.indexOf(this._children,e);return this.removeChildWithIndex(e,i,t),this}removeChildAt(e,t){const i=this._children[e];return this.removeChildWithIndex(i,e,t),this}removeChildWithIndex(e,t,i){const s=te.indexOf(e._parents,this);e._isGettingRemovedFromParent=!0,e._rendererSummary.hasNoPDOM()||this.onPDOMRemoveChild(e),this._picker.onRemoveChild(e),this.changeBoundsEventCount(e._boundsEventCount>0?-1:0),this._rendererSummary.summaryChange(e._rendererSummary.bitmask,La.bitmaskAll),e._parents.splice(s,1),this._children.splice(t,1),e._isGettingRemovedFromParent=!1,this.invalidateBounds(),this._childBoundsDirty=!0,this.childRemovedEmitter.emit(e,t),e.parentRemovedEmitter.emit(this),!i&&this.childrenChangedEmitter.emit()}moveChildToIndex(e,t){const i=this.indexOfChild(e);return this._children[t]!==e&&(this._children.splice(i,1),this._children.splice(t,0,e),this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(Math.min(i,t),Math.max(i,t)),this.childrenChangedEmitter.emit()),this}removeAllChildren(){return this.setChildren([]),this}setChildren(e){const t=[],i=[],s=[];let r;for(Ih(e,this._children,i,t,s),r=t.length-1;r>=0;r--)this.removeChild(t[r],!0);let o=-1,c=-1;for(r=0;r<s.length;r++){const g=s[r];this._children[r]!==g&&(this._children[r]=g,o===-1&&(o=r),c=r)}const p=o!==-1;if(p&&(this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(o,c)),i.length){let g=0,A=i[g];for(r=0;r<e.length;r++)e[r]===A&&(this.insertChild(r,A,!0),A=i[++g])}return(t.length!==0||i.length!==0||p)&&this.childrenChangedEmitter.emit(),this}set children(e){this.setChildren(e)}get children(){return this.getChildren()}getChildren(){return this._children.slice(0)}getChildrenCount(){return this._children.length}getParents(){return this._parents.slice(0)}get parents(){return this.getParents()}getParent(){return this._parents.length?this._parents[0]:null}get parent(){return this.getParent()}getChildAt(e){return this._children[e]}indexOfParent(e){return te.indexOf(this._parents,e)}indexOfChild(e){return te.indexOf(this._children,e)}moveToFront(){return te.each(this.parents,e=>e.moveChildToFront(this)),this}moveChildToFront(e){return this.moveChildToIndex(e,this._children.length-1)}moveForward(){return this.parents.forEach(e=>e.moveChildForward(this)),this}moveChildForward(e){const t=this.indexOfChild(e);return t<this.getChildrenCount()-1&&this.moveChildToIndex(e,t+1),this}moveBackward(){return this.parents.forEach(e=>e.moveChildBackward(this)),this}moveChildBackward(e){const t=this.indexOfChild(e);return t>0&&this.moveChildToIndex(e,t-1),this}moveToBack(){return te.each(this.parents,e=>e.moveChildToBack(this)),this}moveChildToBack(e){return this.moveChildToIndex(e,0)}replaceChild(e,t){const i=this.indexOfChild(e),s=e.focused;return this.removeChild(e,!0),this.insertChild(i,t,!0),this.childrenChangedEmitter.emit(),s&&t.focusable&&t.focus(),this}detach(){return te.each(this._parents.slice(0),e=>e.removeChild(this)),this}changeBoundsEventCount(e){if(e!==0){const t=this._boundsEventCount===0;this._boundsEventCount+=e;const i=this._boundsEventCount===0;if(t!==i){const s=t?1:-1,r=this._parents.length;for(let o=0;o<r;o++)this._parents[o].changeBoundsEventCount(s)}}}validateSelfBounds(){if(this._selfBoundsDirty){const e=Ru.set(this.selfBoundsProperty._value),t=this.updateSelfBounds();return this._selfBoundsDirty=!1,t&&this.selfBoundsProperty.notifyListeners(e),!0}return!1}validateBounds(){let e,i=this.validateSelfBounds();const s=this.childBoundsProperty._value,r=this.localBoundsProperty._value,o=this.selfBoundsProperty._value,c=this.boundsProperty._value;if(this._childBoundsDirty){i=!0;let p=!0;for(;p;)for(p=!1,e=this._children.length;e--;){const A=this._children[e];A&&(p=A.validateBounds()||p)}const g=Ru.set(s);for(s.set(Je.NOTHING),e=this._children.length;e--;){const A=this._children[e];(A&&!this._excludeInvisibleChildrenFromBounds||A.isVisible())&&s.includeBounds(A.bounds)}this._childBoundsDirty=!1,s.equals(g)||s.equalsEpsilon(g,1e-13)||this.childBoundsProperty.notifyListeners(g)}if(this._localBoundsDirty){i=!0,this._localBoundsDirty=!1;const p=Ru.set(r);if(!this._localBoundsOverridden){r.set(o).includeBounds(s);const g=this.clipArea;g&&r.constrainBounds(g.bounds)}(this._maxWidth!==null||this._maxHeight!==null)&&this.updateMaxDimension(r),r.equals(p)||(this._boundsDirty=!0,r.equalsEpsilon(p,1e-13)||this.localBoundsProperty.notifyListeners(p))}if(this._boundsDirty){i=!0,this._boundsDirty=!1;const p=Ru.set(c);if(this._transformBounds&&!this._transform.getMatrix().isAxisAligned()){const g=Yg.set(this.getMatrix());c.set(Je.NOTHING),this._includeTransformedSubtreeBounds(g,c);const A=this.clipArea;A&&c.constrainBounds(A.getBoundsWithTransform(g))}else c.set(r),this.transformBoundsFromLocalToParent(c);if(!c.equals(p)){for(e=this._parents.length;e--;)this._parents[e].invalidateBounds();c.equalsEpsilon(p,1e-13)||this.boundsProperty.notifyListeners(p)}}return(this._childBoundsDirty||this._boundsDirty)&&this.validateBounds(),i}_includeTransformedSubtreeBounds(e,t){this.selfBounds.isEmpty()||t.includeBounds(this.getTransformedSelfBounds(e));const i=this._children.length;for(let s=0;s<i;s++){const r=this._children[s];e.multiplyMatrix(r._transform.getMatrix()),r._includeTransformedSubtreeBounds(e,t),e.multiplyMatrix(r._transform.getInverse())}return t}validateWatchedBounds(){for(;this.watchedBoundsScan(););}watchedBoundsScan(){if(this._boundsEventSelfCount!==0)return this.validateBounds();if(this._boundsEventCount>0&&this._childBoundsDirty){let e=!1;const t=this._children.length;for(let i=0;i<t;i++)e=this._children[i].watchedBoundsScan()||e;return e}else return!1}invalidateBounds(){this._boundsDirty=!0,this._localBoundsDirty=!0;let e=this._parents.length;for(;e--;)this._parents[e].invalidateChildBounds()}invalidateChildBounds(){if(!this._childBoundsDirty){this._childBoundsDirty=!0,this._localBoundsDirty=!0;let e=this._parents.length;for(;e--;)this._parents[e].invalidateChildBounds()}}invalidateSelf(e){const t=this.selfBoundsProperty._value;if(!e)this._selfBoundsDirty=!0,this.invalidateBounds(),this._picker.onSelfBoundsDirty();else if(this._selfBoundsDirty=!1,!t.equals(e)){const i=Ru.set(t);this.invalidateBounds(),this._picker.onSelfBoundsDirty(),t.set(e),this.selfBoundsProperty.notifyListeners(i)}}updateSelfBounds(){return!1}hasChild(e){return te.includes(this._children,e)}getSelfShape(){return this.selfBounds.isEmpty()?new Tt:Tt.bounds(this.selfBounds)}getSelfBounds(){return this.selfBoundsProperty.value}get selfBounds(){return this.getSelfBounds()}getSafeSelfBounds(){return this.selfBoundsProperty.value}get safeSelfBounds(){return this.getSafeSelfBounds()}getChildBounds(){return this.childBoundsProperty.value}get childBounds(){return this.getChildBounds()}getLocalBounds(){return this.localBoundsProperty.value}get localBounds(){return this.getLocalBounds()}set localBounds(e){this.setLocalBounds(e)}get localBoundsOverridden(){return this._localBoundsOverridden}setLocalBounds(e){const t=this.localBoundsProperty._value,i=t.copy();if(e===null)this._localBoundsOverridden&&(this._localBoundsOverridden=!1,this.localBoundsProperty.notifyListeners(i),this.invalidateBounds());else{const s=!e.equals(t)||!this._localBoundsOverridden;s&&t.set(e),this._localBoundsOverridden||(this._localBoundsOverridden=!0),s&&(this.localBoundsProperty.notifyListeners(i),this.invalidateBounds())}return this}getTransformedSelfBounds(e){return this.selfBounds.transformed(e)}getTransformedSafeSelfBounds(e){return this.safeSelfBounds.transformed(e)}getSafeTransformedVisibleBounds(e){const t=(e||nt.IDENTITY).timesMatrix(this.matrix),i=Je.NOTHING.copy();if(this.visibleProperty.value&&(this.selfBounds.isEmpty()||i.includeBounds(this.getTransformedSafeSelfBounds(t)),this._children.length))for(let s=0;s<this._children.length;s++)i.includeBounds(this._children[s].getSafeTransformedVisibleBounds(t));return i}get safeTransformedVisibleBounds(){return this.getSafeTransformedVisibleBounds()}setTransformBounds(e){return this._transformBounds!==e&&(this._transformBounds=e,this.invalidateBounds()),this}set transformBounds(e){this.setTransformBounds(e)}get transformBounds(){return this.getTransformBounds()}getTransformBounds(){return this._transformBounds}getBounds(){return this.boundsProperty.value}get bounds(){return this.getBounds()}getVisibleLocalBounds(){const e=this.selfBounds.copy();let t=this._children.length;for(;t--;)e.includeBounds(this._children[t].getVisibleBounds());const i=this.clipArea;return i&&e.constrainBounds(i.bounds),e}get visibleLocalBounds(){return this.getVisibleLocalBounds()}getVisibleBounds(){return this.isVisible()?this.getVisibleLocalBounds().transform(this.getMatrix()):Je.NOTHING}get visibleBounds(){return this.getVisibleBounds()}hitTest(e,t,i){return this._picker.hitTest(e,!!t,!!i)}trailUnderPointer(e){return e.point===null?null:this.hitTest(e.point,e.type==="mouse",e.isTouchLike())}containsPoint(e){return this.hitTest(e)!==null}containsPointSelf(e){return this.selfBounds.containsPoint(e)}intersectsBoundsSelf(e){return this.selfBounds.intersectsBounds(e)}isPhetioMouseHittable(e){return this.pickable===!1&&!this.isAnyDescendantAPhetioMouseHitTarget()?!1:this.visible&&(this.clipArea===null||this.clipArea.containsPoint(this._transform.getInverse().timesVector2(e)))}isAnyDescendantAPhetioMouseHitTarget(){return this.getPhetioMouseHitTarget()!=="phetioNotSelectable"||te.some(this.children,e=>e.isAnyDescendantAPhetioMouseHitTarget())}getPhetioMouseHit(e){if(!this.isPhetioMouseHittable(e))return null;const t=this._transform.getInverse().timesVector2(e);let i=null;for(let s=this._children.length-1;s>=0;s--){const r=this._children[s].getPhetioMouseHit(t);if(r instanceof Gi)return r;r==="phetioNotSelectable"&&(i=!0)}return i?this.getPhetioMouseHitTarget():this._mouseArea?this._mouseArea.containsPoint(t)?this.getPhetioMouseHitTarget():null:this.selfBounds.containsPoint(t)&&this.containsPointSelf(t)?this.getPhetioMouseHitTarget():null}isPainted(){return!1}areSelfBoundsValid(){return!0}hasParent(){return this._parents.length!==0}hasChildren(){return this._children.length>0}isChildIncludedInLayout(e){return e.bounds.isValid()&&(!this._excludeInvisibleChildrenFromBounds||e.visible)}walkDepthFirst(e){e(this);const t=this._children.length;for(let i=0;i<t;i++)this._children[i].walkDepthFirst(e)}addInputListener(e,t){return te.includes(this._inputListeners,e)||(this._inputListeners.push(e),this._picker.onAddInputListener(),e.hotkeys&&c2.updateHotkeysFromInputListenerChange(this),t!=null&&t.disposer&&this.addDisposerAction("inputListener",e,t.disposer,()=>this.removeInputListener(e))),this}removeInputListener(e){const t=te.indexOf(this._inputListeners,e);return t>=0&&(this._inputListeners.splice(t,1),this._picker.onRemoveInputListener(),e.hotkeys&&c2.updateHotkeysFromInputListenerChange(this),this.removeDisposerAction("inputListener",e)),this}hasInputListener(e){for(let t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}interruptInput(){const e=this.inputListeners;for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}return this}interruptSubtreeInput(){this.interruptInput();const e=this._children.slice();for(let t=0;t<e.length;t++){const i=e[t];i._picker.isPotentiallyPickable()&&i.interruptSubtreeInput()}return this}translate(e,t,i){if(typeof e=="number"){if(Math.abs(e)<1e-12&&Math.abs(t)<1e-12)return;i?this.prependTranslation(e,t):this.appendMatrix(Yg.setToTranslation(e,t))}else{const s=e;if(!s.x&&!s.y)return;this.translate(s.x,s.y,t)}}scale(e,t,i){if(typeof e=="number")if(t===void 0||typeof t=="boolean")this.scale(e,e,t);else{if(e===1&&t===1)return;i?this.prependMatrix(nt.scaling(e,t)):this.appendMatrix(nt.scaling(e,t))}else{const s=e;this.scale(s.x,s.y,t)}}rotate(e,t){e%(2*Math.PI)!==0&&(t?this.prependMatrix(nt.rotation2(e)):this.appendMatrix(nt.rotation2(e)))}rotateAround(e,t){let i=nt.translation(-e.x,-e.y);return i=nt.rotation2(t).timesMatrix(i),i=nt.translation(e.x,e.y).timesMatrix(i),this.prependMatrix(i),this}setX(e){return this.translate(e-this.getX(),0,!0),this}set x(e){this.setX(e)}get x(){return this.getX()}getX(){return this._transform.getMatrix().m02()}setY(e){return this.translate(0,e-this.getY(),!0),this}set y(e){this.setY(e)}get y(){return this.getY()}getY(){return this._transform.getMatrix().m12()}setScaleMagnitude(e,t){const i=this.getScaleVector();return typeof e=="number"?(t===void 0&&(t=e),this.appendMatrix(nt.scaling(e/i.x,t/i.y))):this.appendMatrix(nt.scaling(e.x/i.x,e.y/i.y)),this}getScaleVector(){return this._transform.getMatrix().getScaleVector()}setRotation(e){return this.appendMatrix(Yg.setToRotationZ(e-this.getRotation())),this}set rotation(e){this.setRotation(e)}get rotation(){return this.getRotation()}getRotation(){return this._transform.getMatrix().getRotation()}setTranslation(e,t){const i=this._transform.getMatrix(),s=i.m02(),r=i.m12();let o,c;return typeof e=="number"?(o=e-s,c=t-r):(o=e.x-s,c=e.y-r),this.translate(o,c,!0),this}set translation(e){this.setTranslation(e)}get translation(){return this.getTranslation()}getTranslation(){const e=this._transform.getMatrix();return new we(e.m02(),e.m12())}appendMatrix(e){this._transform.append(e)}prependMatrix(e){this._transform.prepend(e)}prependTranslation(e,t){!e&&!t||this._transform.prependTranslation(e,t)}setMatrix(e){this._transform.setMatrix(e)}set matrix(e){this.setMatrix(e)}get matrix(){return this.getMatrix()}getMatrix(){return this._transform.getMatrix()}getTransform(){return this._transform}get transform(){return this.getTransform()}resetTransform(){this.setMatrix(nt.IDENTITY)}onTransformChange(){this.invalidateBounds(),this._picker.onTransformChange(),this.transformEmitter.emit()}onSummaryChange(e,t){this._pdomDisplaysInfo.onSummaryChange(e,t)}updateMaxDimension(e){const t=this._appliedScaleFactor;let i=1;if(this._maxWidth!==null){const r=e.width;r>this._maxWidth&&(i=Math.min(i,this._maxWidth/r))}if(this._maxHeight!==null){const r=e.height;r>this._maxHeight&&(i=Math.min(i,this._maxHeight/r))}const s=i/t;s!==1&&(this._appliedScaleFactor=i,this.scale(s))}auditMaxDimensions(){}onMaxDimensionChange(e,t){e===null&&t!==null?(this.changeBoundsEventCount(1),this._boundsEventSelfCount++):e!==null&&t===null&&(this.changeBoundsEventCount(-1),this._boundsEventSelfCount--)}setMaxWidth(e){this._maxWidth!==e&&(this.onMaxDimensionChange(this._maxWidth,e),this._maxWidth=e,this.updateMaxDimension(this.localBoundsProperty.value))}set maxWidth(e){this.setMaxWidth(e)}get maxWidth(){return this.getMaxWidth()}getMaxWidth(){return this._maxWidth}setMaxHeight(e){this._maxHeight!==e&&(this.onMaxDimensionChange(this._maxHeight,e),this._maxHeight=e,this.updateMaxDimension(this.localBoundsProperty.value))}set maxHeight(e){this.setMaxHeight(e)}get maxHeight(){return this.getMaxHeight()}getMaxHeight(){return this._maxHeight}setLeft(e){const t=this.getLeft();return isFinite(t)&&this.translate(e-t,0,!0),this}set left(e){this.setLeft(e)}get left(){return this.getLeft()}getLeft(){return this.getBounds().minX}setRight(e){const t=this.getRight();return isFinite(t)&&this.translate(e-t,0,!0),this}set right(e){this.setRight(e)}get right(){return this.getRight()}getRight(){return this.getBounds().maxX}setCenterX(e){const t=this.getCenterX();return isFinite(t)&&this.translate(e-t,0,!0),this}set centerX(e){this.setCenterX(e)}get centerX(){return this.getCenterX()}getCenterX(){return this.getBounds().getCenterX()}setCenterY(e){const t=this.getCenterY();return isFinite(t)&&this.translate(0,e-t,!0),this}set centerY(e){this.setCenterY(e)}get centerY(){return this.getCenterY()}getCenterY(){return this.getBounds().getCenterY()}setTop(e){const t=this.getTop();return isFinite(t)&&this.translate(0,e-t,!0),this}set top(e){this.setTop(e)}get top(){return this.getTop()}getTop(){return this.getBounds().minY}setBottom(e){const t=this.getBottom();return isFinite(t)&&this.translate(0,e-t,!0),this}set bottom(e){this.setBottom(e)}get bottom(){return this.getBottom()}getBottom(){return this.getBounds().maxY}setLeftTop(e){const t=this.getLeftTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftTop(e){this.setLeftTop(e)}get leftTop(){return this.getLeftTop()}getLeftTop(){return this.getBounds().getLeftTop()}setCenterTop(e){const t=this.getCenterTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set centerTop(e){this.setCenterTop(e)}get centerTop(){return this.getCenterTop()}getCenterTop(){return this.getBounds().getCenterTop()}setRightTop(e){const t=this.getRightTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightTop(e){this.setRightTop(e)}get rightTop(){return this.getRightTop()}getRightTop(){return this.getBounds().getRightTop()}setLeftCenter(e){const t=this.getLeftCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftCenter(e){this.setLeftCenter(e)}get leftCenter(){return this.getLeftCenter()}getLeftCenter(){return this.getBounds().getLeftCenter()}setCenter(e){const t=this.getCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this.getBounds().getCenter()}setRightCenter(e){const t=this.getRightCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightCenter(e){this.setRightCenter(e)}get rightCenter(){return this.getRightCenter()}getRightCenter(){return this.getBounds().getRightCenter()}setLeftBottom(e){const t=this.getLeftBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftBottom(e){this.setLeftBottom(e)}get leftBottom(){return this.getLeftBottom()}getLeftBottom(){return this.getBounds().getLeftBottom()}setCenterBottom(e){const t=this.getCenterBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set centerBottom(e){this.setCenterBottom(e)}get centerBottom(){return this.getCenterBottom()}getCenterBottom(){return this.getBounds().getCenterBottom()}setRightBottom(e){const t=this.getRightBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightBottom(e){this.setRightBottom(e)}get rightBottom(){return this.getRightBottom()}getRightBottom(){return this.getBounds().getRightBottom()}getWidth(){return this.getBounds().getWidth()}get width(){return this.getWidth()}getHeight(){return this.getBounds().getHeight()}get height(){return this.getHeight()}getLocalWidth(){return this.getLocalBounds().getWidth()}get localWidth(){return this.getLocalWidth()}getLocalHeight(){return this.getLocalBounds().getHeight()}get localHeight(){return this.getLocalHeight()}getLocalLeft(){return this.getLocalBounds().minX}get localLeft(){return this.getLocalLeft()}getLocalRight(){return this.getLocalBounds().maxX}get localRight(){return this.getLocalRight()}getLocalCenterX(){return this.getLocalBounds().getCenterX()}get localCenterX(){return this.getLocalCenterX()}getLocalCenterY(){return this.getLocalBounds().getCenterY()}get localCenterY(){return this.getLocalCenterY()}getLocalTop(){return this.getLocalBounds().minY}get localTop(){return this.getLocalTop()}getLocalBottom(){return this.getLocalBounds().maxY}get localBottom(){return this.getLocalBottom()}getLocalLeftTop(){return this.getLocalBounds().getLeftTop()}get localLeftTop(){return this.getLocalLeftTop()}getLocalCenterTop(){return this.getLocalBounds().getCenterTop()}get localCenterTop(){return this.getLocalCenterTop()}getLocalRightTop(){return this.getLocalBounds().getRightTop()}get localRightTop(){return this.getLocalRightTop()}getLocalLeftCenter(){return this.getLocalBounds().getLeftCenter()}get localLeftCenter(){return this.getLocalLeftCenter()}getLocalCenter(){return this.getLocalBounds().getCenter()}get localCenter(){return this.getLocalCenter()}getLocalRightCenter(){return this.getLocalBounds().getRightCenter()}get localRightCenter(){return this.getLocalRightCenter()}getLocalLeftBottom(){return this.getLocalBounds().getLeftBottom()}get localLeftBottom(){return this.getLocalLeftBottom()}getLocalCenterBottom(){return this.getLocalBounds().getCenterBottom()}get localCenterBottom(){return this.getLocalCenterBottom()}getLocalRightBottom(){return this.getLocalBounds().getRightBottom()}get localRightBottom(){return this.getLocalRightBottom()}getId(){return this._id}get id(){return this.getId()}onVisiblePropertyChange(e){!e&&this._interruptSubtreeOnInvisible&&this.interruptSubtreeInput(),this._picker.onVisibilityChange(),this._pdomDisplaysInfo.onVisibilityChange(e);for(let t=0;t<this._parents.length;t++){const i=this._parents[t];i._excludeInvisibleChildrenFromBounds&&i.invalidateChildBounds()}}setVisibleProperty(e){return this._visibleProperty.setTargetProperty(e,this,Wg)}set visibleProperty(e){this.setVisibleProperty(e)}get visibleProperty(){return this.getVisibleProperty()}getVisibleProperty(){return this._visibleProperty}setVisible(e){return this.visibleProperty.set(e),this}set visible(e){this.setVisible(e)}get visible(){return this.isVisible()}isVisible(){return this.visibleProperty.value}setPhetioVisiblePropertyInstrumented(e){return this._visibleProperty.setTargetPropertyInstrumented(e,this)}set phetioVisiblePropertyInstrumented(e){this.setPhetioVisiblePropertyInstrumented(e)}get phetioVisiblePropertyInstrumented(){return this.getPhetioVisiblePropertyInstrumented()}getPhetioVisiblePropertyInstrumented(){return this._visibleProperty.getTargetPropertyInstrumented()}swapVisibility(e){const t=this.visible?this:e,i=this.visible?e:this,s=t.focused;return t.visible=!1,i.visible=!0,s&&i.focusable&&i.focus(),this}setOpacity(e){if(e<0||e>1)throw new Error(`opacity out of range: ${e}`);this.opacityProperty.value=e}set opacity(e){this.setOpacity(e)}get opacity(){return this.getOpacity()}getOpacity(){return this.opacityProperty.value}setDisabledOpacity(e){if(e<0||e>1)throw new Error(`disabledOpacity out of range: ${e}`);return this.disabledOpacityProperty.value=e,this}set disabledOpacity(e){this.setDisabledOpacity(e)}get disabledOpacity(){return this.getDisabledOpacity()}getDisabledOpacity(){return this.disabledOpacityProperty.value}getEffectiveOpacity(){return this.opacityProperty.value*(this.enabledProperty.value?1:this.disabledOpacityProperty.value)}get effectiveOpacity(){return this.getEffectiveOpacity()}onOpacityPropertyChange(){this.filterChangeEmitter.emit()}onDisabledOpacityPropertyChange(){this._enabledProperty.value||this.filterChangeEmitter.emit()}setFilters(e){this._filters.length=0,this._filters.push(...e),this.invalidateHint(),this.filterChangeEmitter.emit()}set filters(e){this.setFilters(e)}get filters(){return this.getFilters()}getFilters(){return this._filters.slice()}setPickableProperty(e){return this._pickableProperty.setTargetProperty(e,this,null)}set pickableProperty(e){this.setPickableProperty(e)}get pickableProperty(){return this.getPickableProperty()}getPickableProperty(){return this._pickableProperty}setPickable(e){return this._pickableProperty.set(e),this}set pickable(e){this.setPickable(e)}get pickable(){return this.isPickable()}isPickable(){return this._pickableProperty.value}onPickablePropertyChange(e,t){this._picker.onPickableChange(t,e)}setEnabledProperty(e){return this._enabledProperty.setTargetProperty(e,this,Gg)}set enabledProperty(e){this.setEnabledProperty(e)}get enabledProperty(){return this.getEnabledProperty()}getEnabledProperty(){return this._enabledProperty}setPhetioEnabledPropertyInstrumented(e){return this._enabledProperty.setTargetPropertyInstrumented(e,this)}set phetioEnabledPropertyInstrumented(e){this.setPhetioEnabledPropertyInstrumented(e)}get phetioEnabledPropertyInstrumented(){return this.getPhetioEnabledPropertyInstrumented()}getPhetioEnabledPropertyInstrumented(){return this._enabledProperty.getTargetPropertyInstrumented()}setEnabled(e){return this._enabledProperty.set(e),this}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabledProperty.value}onEnabledPropertyChange(e){!e&&this.interruptSubtreeInput(),this.inputEnabledProperty.isSettable()&&(this.inputEnabled=e),this.disabledOpacityProperty.value!==1&&this.filterChangeEmitter.emit()}setInputEnabledProperty(e){return this._inputEnabledProperty.setTargetProperty(e,this,Xg)}set inputEnabledProperty(e){this.setInputEnabledProperty(e)}get inputEnabledProperty(){return this.getInputEnabledProperty()}getInputEnabledProperty(){return this._inputEnabledProperty}setPhetioInputEnabledPropertyInstrumented(e){return this._inputEnabledProperty.setTargetPropertyInstrumented(e,this)}set phetioInputEnabledPropertyInstrumented(e){this.setPhetioInputEnabledPropertyInstrumented(e)}get phetioInputEnabledPropertyInstrumented(){return this.getPhetioInputEnabledPropertyInstrumented()}getPhetioInputEnabledPropertyInstrumented(){return this._inputEnabledProperty.getTargetPropertyInstrumented()}setInputEnabled(e){this.inputEnabledProperty.value=e}set inputEnabled(e){this.setInputEnabled(e)}get inputEnabled(){return this.isInputEnabled()}isInputEnabled(){return this.inputEnabledProperty.value}setInputListeners(e){for(;this._inputListeners.length;)this.removeInputListener(this._inputListeners[0]);for(let t=0;t<e.length;t++)this.addInputListener(e[t]);return this}set inputListeners(e){this.setInputListeners(e)}get inputListeners(){return this.getInputListeners()}getInputListeners(){return this._inputListeners.slice(0)}setCursor(e){this._cursor=e==="auto"?null:e}set cursor(e){this.setCursor(e)}get cursor(){return this.getCursor()}getCursor(){return this._cursor}getEffectiveCursor(){if(this._cursor)return this._cursor;for(let e=0;e<this._inputListeners.length;e++){const t=this._inputListeners[e];if(t.cursor)return t.cursor}return null}setMouseArea(e){return this._mouseArea!==e&&(this._mouseArea=e,this._picker.onMouseAreaChange()),this}set mouseArea(e){this.setMouseArea(e)}get mouseArea(){return this.getMouseArea()}getMouseArea(){return this._mouseArea}setTouchArea(e){return this._touchArea!==e&&(this._touchArea=e,this._picker.onTouchAreaChange()),this}set touchArea(e){this.setTouchArea(e)}get touchArea(){return this.getTouchArea()}getTouchArea(){return this._touchArea}setClipArea(e){this.clipArea!==e&&(this.clipAreaProperty.value=e,this.invalidateBounds(),this._picker.onClipAreaChange())}set clipArea(e){this.setClipArea(e)}get clipArea(){return this.getClipArea()}getClipArea(){return this.clipAreaProperty.value}hasClipArea(){return this.clipArea!==null}setRendererBitmask(e){e!==this._rendererBitmask&&(this._rendererBitmask=e,this._rendererSummary.selfChange(),this.instanceRefreshEmitter.emit())}invalidateSupportedRenderers(){}invalidateHint(){this.rendererSummaryRefreshEmitter.emit(),this.instanceRefreshEmitter.emit()}setRenderer(e){let t=0;e==="canvas"?t=Se.bitmaskCanvas:e==="svg"?t=Se.bitmaskSVG:e==="dom"?t=Se.bitmaskDOM:e==="webgl"&&(t=Se.bitmaskWebGL),this._renderer!==t&&(this._renderer=t,this.invalidateHint())}set renderer(e){this.setRenderer(e)}get renderer(){return this.getRenderer()}getRenderer(){return this._renderer===0?null:this._renderer===Se.bitmaskCanvas?"canvas":this._renderer===Se.bitmaskSVG?"svg":this._renderer===Se.bitmaskDOM?"dom":this._renderer===Se.bitmaskWebGL?"webgl":null}setLayerSplit(e){e!==this._layerSplit&&(this._layerSplit=e,this.invalidateHint())}set layerSplit(e){this.setLayerSplit(e)}get layerSplit(){return this.isLayerSplit()}isLayerSplit(){return this._layerSplit}setUsesOpacity(e){e!==this._usesOpacity&&(this._usesOpacity=e,this.invalidateHint())}set usesOpacity(e){this.setUsesOpacity(e)}get usesOpacity(){return this.getUsesOpacity()}getUsesOpacity(){return this._usesOpacity}setCSSTransform(e){e!==this._cssTransform&&(this._cssTransform=e,this.invalidateHint())}set cssTransform(e){this.setCSSTransform(e)}get cssTransform(){return this.isCSSTransformed()}isCSSTransformed(){return this._cssTransform}setExcludeInvisible(e){e!==this._excludeInvisible&&(this._excludeInvisible=e,this.invalidateHint())}set excludeInvisible(e){this.setExcludeInvisible(e)}get excludeInvisible(){return this.isExcludeInvisible()}isExcludeInvisible(){return this._excludeInvisible}setExcludeInvisibleChildrenFromBounds(e){e!==this._excludeInvisibleChildrenFromBounds&&(this._excludeInvisibleChildrenFromBounds=e,this.invalidateBounds())}set excludeInvisibleChildrenFromBounds(e){this.setExcludeInvisibleChildrenFromBounds(e)}get excludeInvisibleChildrenFromBounds(){return this.isExcludeInvisibleChildrenFromBounds()}isExcludeInvisibleChildrenFromBounds(){return this._excludeInvisibleChildrenFromBounds}setInterruptSubtreeOnInvisible(e){e!==this._interruptSubtreeOnInvisible&&(this._interruptSubtreeOnInvisible=e)}set interruptSubtreeOnInvisible(e){this.setInterruptSubtreeOnInvisible(e)}get interruptSubtreeOnInvisible(){return this.isInterruptSubtreeOnInvisible()}isInterruptSubtreeOnInvisible(){return this._interruptSubtreeOnInvisible}setLayoutOptions(e){e!==this._layoutOptions&&(this._layoutOptions=e,this.layoutOptionsChangedEmitter.emit())}set layoutOptions(e){this.setLayoutOptions(e)}get layoutOptions(){return this.getLayoutOptions()}getLayoutOptions(){return this._layoutOptions}mutateLayoutOptions(e){this.layoutOptions=ko()({},this.layoutOptions||{},e)}get widthSizable(){return!1}get heightSizable(){return!1}get extendsWidthSizable(){return!1}get extendsHeightSizable(){return!1}get extendsSizable(){return!1}setPreventFit(e){e!==this._preventFit&&(this._preventFit=e,this.invalidateHint())}set preventFit(e){this.setPreventFit(e)}get preventFit(){return this.isPreventFit()}isPreventFit(){return this._preventFit}setWebGLScale(e){e!==this._webglScale&&(this._webglScale=e,this.invalidateHint())}set webglScale(e){this.setWebGLScale(e)}get webglScale(){return this.getWebGLScale()}getWebGLScale(){return this._webglScale}getUniqueTrail(e){if(e)return this.getTrails(e)[0];{const t=new bi;let i=this;for(;i;)t.addAncestor(i),i=i._parents[0];return t}}getUniqueTrailTo(e){return this.getUniqueTrail(t=>e===t)}getTrails(e){e=e||Kd.defaultTrailPredicate;const t=[],i=new bi(this);return bi.appendAncestorTrailsWithPredicate(t,i,e),t}getTrailsTo(e){return this.getTrails(t=>t===e)}getLeafTrails(e){e=e||Kd.defaultLeafTrailPredicate;const t=[],i=new bi(this);return bi.appendDescendantTrailsWithPredicate(t,i,e),t}getLeafTrailsTo(e){return this.getLeafTrails(t=>t===e)}getUniqueLeafTrail(e){return this.getLeafTrails(e)[0]}getUniqueLeafTrailTo(e){return this.getUniqueLeafTrail(t=>t===e)}getConnectedNodes(){const e=[];let t=this._children.concat(this._parents).concat(this);for(;t.length;){const i=t.pop();te.includes(e,i)||(e.push(i),t=t.concat(i._children,i._parents))}return e}getSubtreeNodes(){const e=[];let t=this._children.concat(this);for(;t.length;){const i=t.pop();te.includes(e,i)||(e.push(i),t=t.concat(i._children))}return e}getTopologicallySortedNodes(){const e={},t=[],i=[];let s;te.each(this.getConnectedNodes(),o=>{e[o.id]={},te.each(o._children,c=>{e[o.id][c.id]=!0}),o.parents.length||t.push(o)});function r(o){delete e[s.id][o.id],te.every(e,c=>!c[o.id])&&t.push(o)}for(;t.length;)s=t.pop(),i.push(s),te.each(s._children,r);return i}canAddChild(e){if(this===e||te.includes(this._children,e))return!1;const t={},i=[];let s;te.each(this.getConnectedNodes().concat(e.getConnectedNodes()),o=>{t[o.id]={},te.each(o._children,c=>{t[o.id][c.id]=!0}),!o.parents.length&&o!==e&&i.push(o)}),t[this.id][e.id]=!0;function r(o){delete t[s.id][o.id],te.every(t,c=>!c[o.id])&&i.push(o)}for(;i.length;)s=i.pop(),te.each(s._children,r),s===this&&r(e);return te.every(t,o=>te.every(o,c=>!1))}canvasPaintSelf(e,t){}renderToCanvasSelf(e,t){this.isPainted()&&this._rendererBitmask&Se.bitmaskCanvas&&this.canvasPaintSelf(e,t)}renderToCanvasSubtree(e,t){t=t||nt.identity(),e.resetStyles(),this.renderToCanvasSelf(e,t);for(let i=0;i<this._children.length;i++){const s=this._children[i];if(s.isVisible()&&s.bounds.isValid()){const r=s.effectiveOpacity!==1||s.clipArea||s._filters.length;if(e.context.save(),t.multiplyMatrix(s._transform.getMatrix()),t.canvasSetTransform(e.context),r){const o=s.localBounds.transformed(t).dilate(4).roundOut().constrainBounds(fk.setMinMax(0,0,e.canvas.width,e.canvas.height));if(o.width>0&&o.height>0){const c=document.createElement("canvas");c.width=o.width,c.height=o.height;const p=c.getContext("2d"),g=new Lh(c,p),A=t.copy().prependTranslation(-o.minX,-o.minY);A.canvasSetTransform(p),s.renderToCanvasSubtree(g,A),e.context.save(),s.clipArea&&(e.context.beginPath(),s.clipArea.writeToContext(e.context),e.context.clip()),e.context.setTransform(1,0,0,1,0,0),e.context.globalAlpha=s.effectiveOpacity;let C=!1;s._filters.length&&(It.canvasFilter&&te.every(s._filters,D=>D.isDOMCompatible())?(e.context.filter=s._filters.map(D=>D.getCSSFilterString()).join(" "),C=!0):s._filters.forEach(D=>D.applyCanvasFilter(g))),e.context.drawImage(c,o.minX,o.minY),e.context.restore(),C&&(e.context.filter="none")}}else s.renderToCanvasSubtree(e,t);t.multiplyMatrix(s._transform.getInverse()),e.context.restore()}}}renderToCanvas(e,t,i,s){e.width=e.width,s&&(t.fillStyle=s,t.fillRect(0,0,e.width,e.height));const r=new Lh(e,t);this.renderToCanvasSubtree(r,nt.identity()),i&&i()}toCanvas(e,t,i,s,r){const c=this.getBounds().union(this.localToParentBounds(this.getSafeSelfBounds()));t=t!==void 0?t:Math.ceil(2-c.minX),i=i!==void 0?i:Math.ceil(2-c.minY),s=s!==void 0?s:Math.ceil(c.getWidth()+2*2),r=r!==void 0?r:Math.ceil(c.getHeight()+2*2);const p=document.createElement("canvas");p.width=s,p.height=r;const g=p.getContext("2d");g.translate(t,i),this._transform.getMatrix().canvasAppendTransform(g);const A=new Lh(p,g);this.renderToCanvasSubtree(A,nt.translation(t,i).timesMatrix(this._transform.getMatrix())),e(p,t,i,s,r)}toDataURL(e,t,i,s,r){this.toCanvas((o,c,p,g,A)=>{e(o.toDataURL(),c,p,g,A)},t,i,s,r)}toImage(e,t,i,s,r){this.toDataURL((o,c,p)=>{const g=document.createElement("img");g.onload=()=>{e(g,c,p);try{delete g.onload}catch{}},g.src=o},t,i,s,r)}createDOMDrawable(e,t){throw new Error("createDOMDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createSVGDrawable(e,t){throw new Error("createSVGDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createCanvasDrawable(e,t){throw new Error("createCanvasDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createWebGLDrawable(e,t){throw new Error("createWebGLDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}getInstances(){return this._instances}get instances(){return this.getInstances()}addInstance(e){this._instances.push(e),this.changedInstanceEmitter.emit(e,!0)}removeInstance(e){const t=te.indexOf(this._instances,e);this._instances.splice(t,1),this.changedInstanceEmitter.emit(e,!1)}wasVisuallyDisplayed(e){for(let t=0;t<this._instances.length;t++){const i=this._instances[t];if(i.visible&&(!e||i.display===e))return!0}return!1}getRootedDisplays(){return this._rootedDisplays}get rootedDisplays(){return this.getRootedDisplays()}addRootedDisplay(e){this._rootedDisplays.push(e),this._pdomDisplaysInfo.onAddedRootedDisplay(e),this.rootedDisplayChangedEmitter.emit(e)}removeRootedDisplay(e){const t=te.indexOf(this._rootedDisplays,e);this._rootedDisplays.splice(t,1),this._pdomDisplaysInfo.onRemovedRootedDisplay(e),this.rootedDisplayChangedEmitter.emit(e)}getRecursiveConnectedDisplays(e){this.rootedDisplays.length&&e.push(...this.rootedDisplays);for(let t=0;t<this._parents.length;t++)e.push(...this._parents[t].getRecursiveConnectedDisplays(e));return te.uniq(e)}getConnectedDisplays(){return te.uniq(this.getRecursiveConnectedDisplays([]))}localToParentPoint(e){return this._transform.transformPosition2(e)}localToParentBounds(e){return this._transform.transformBounds2(e)}parentToLocalPoint(e){return this._transform.inversePosition2(e)}parentToLocalBounds(e){return this._transform.inverseBounds2(e)}transformBoundsFromLocalToParent(e){return e.transform(this._transform.getMatrix())}transformBoundsFromParentToLocal(e){return e.transform(this._transform.getInverse())}getLocalToGlobalMatrix(){let e=this;const t=[];for(;e;)t.push(e._transform.getMatrix()),e=e._parents[0];const i=nt.identity();for(let s=t.length-1;s>=0;s--)i.multiplyMatrix(t[s]);return i}getUniqueTransform(){return new _r(this.getLocalToGlobalMatrix())}getGlobalToLocalMatrix(){return this.getLocalToGlobalMatrix().invert()}localToGlobalPoint(e){let t=this;const i=e.copy();for(;t;)t._transform.getMatrix().multiplyVector2(i),t=t._parents[0];return i}globalToLocalPoint(e){let t=this;const i=[];for(;t;)i.push(t._transform),t=t._parents[0];const s=e.copy();for(let r=i.length-1;r>=0;r--)i[r].getInverse().multiplyVector2(s);return s}localToGlobalBounds(e){return e.transformed(this.getLocalToGlobalMatrix())}globalToLocalBounds(e){return e.transformed(this.getGlobalToLocalMatrix())}parentToGlobalPoint(e){return this.parents.length?this.parents[0].localToGlobalPoint(e):e}parentToGlobalBounds(e){return this.parents.length?this.parents[0].localToGlobalBounds(e):e}globalToParentPoint(e){return this.parents.length?this.parents[0].globalToLocalPoint(e):e}globalToParentBounds(e){return this.parents.length?this.parents[0].globalToLocalBounds(e):e}getGlobalBounds(){return this.parentToGlobalBounds(this.getBounds())}get globalBounds(){return this.getGlobalBounds()}boundsOf(e){return this.globalToLocalBounds(e.getGlobalBounds())}boundsTo(e){return e.globalToLocalBounds(this.getGlobalBounds())}attachDrawable(e){return this._drawables.push(e),this}detachDrawable(e){const t=te.indexOf(this._drawables,e);return this._drawables.splice(t,1),this}mutate(e){if(!e)return this;const t=this._mutatorKeys;for(let i=0;i<t.length;i++){const s=t[i];if(e[s]!==void 0){const r=Object.getOwnPropertyDescriptor(Kd.prototype,s);r&&typeof r.value=="function"?this[s](e[s]):this[s]=e[s]}}return this.initializePhetioObject(mk,e),this}initializePhetioObject(e,t){const i=this.isPhetioInstrumented();super.initializePhetioObject(e,t),Xe.PHET_IO_ENABLED&&!i&&this.isPhetioInstrumented()&&(this._visibleProperty.initializePhetio(this,Wg,()=>new di(this.visible,Ci({phetioReadOnly:this.phetioReadOnly,tandem:this.tandem.createTandem(Wg),phetioDocumentation:"Controls whether the Node will be visible (and interactive)."},t.visiblePropertyOptions))),this._enabledProperty.initializePhetio(this,Gg,()=>new Gd(this.enabled,Ci({phetioReadOnly:this.phetioReadOnly,phetioDocumentation:'Sets whether the node is enabled. This will set whether input is enabled for this Node and most often children as well. It will also control and toggle the "disabled look" of the node.',tandem:this.tandem.createTandem(Gg)},t.enabledPropertyOptions))),this._inputEnabledProperty.initializePhetio(this,Xg,()=>new hi(this.inputEnabled,Ci({phetioReadOnly:this.phetioReadOnly,tandem:this.tandem.createTandem(Xg),phetioValueType:hl,phetioFeatured:!0,phetioDocumentation:"Sets whether the element will have input enabled, and hence be interactive."},t.inputEnabledPropertyOptions))))}setVoicingVisible(e){this.voicingVisibleProperty.value!==e&&(this.voicingVisibleProperty.value=e)}set voicingVisible(e){this.setVoicingVisible(e)}get voicingVisible(){return this.isVoicingVisible()}isVoicingVisible(){return this.voicingVisibleProperty.value}getDebugHTMLExtras(){return""}toString(){return`${this.constructor.name}#${this.id}`}auditInstanceSubtreeForDisplay(e){}onBoundsListenersAddedOrRemoved(e){this.changeBoundsEventCount(e),this._boundsEventSelfCount+=e}dispose(){this.disposeParallelDOM(),this.removeAllChildren(),this.detach(),this._inputEnabledProperty.dispose(),this._enabledProperty.dispose(),this._pickableProperty.dispose(),this._visibleProperty.dispose(),super.dispose()}disposeSubtree(){if(!this.isDisposed){const e=this.children;this.dispose();for(let t=0;t<e.length;t++)e[t].disposeSubtree()}}static defaultTrailPredicate(e){return e._parents.length===0}static defaultLeafTrailPredicate(e){return e._children.length===0}};At.REQUIRES_BOUNDS_OPTION_KEYS=Tl;At.DEFAULT_NODE_OPTIONS=Ss;At.prototype._mutatorKeys=Om.concat(pk);At.prototype.drawableMarkFlags=[];At.NodeIO=new Yt("NodeIO",{valueType:At,documentation:"The base type for graphical and potentially interactive objects.",metadataDefaults:{phetioState:_v}});const mk={phetioType:At.NodeIO,phetioState:_v},yk=qs.safari5,Av=["fill","fillPickable","stroke","strokePickable","lineWidth","lineCap","lineJoin","miterLimit","lineDash","lineDashOffset","cachedPaints"],ju={fill:null,fillPickable:!0,stroke:null,strokePickable:!1,lineWidth:wh.lineWidth,lineCap:wh.lineCap,lineJoin:wh.lineJoin,lineDashOffset:wh.lineDashOffset,miterLimit:wh.miterLimit},bv=["fill","stroke","lineWidth","lineOptions","cachedPaints"],K0=Yn(n=>class extends n{constructor(...t){super(...t),w0(this,["_drawables"]),this._fill=ju.fill,this._fillPickable=ju.fillPickable,this._stroke=ju.stroke,this._strokePickable=ju.strokePickable,this._cachedPaints=[],this._lineDrawingStyles=new oc}setFill(t){return this._fill!==t&&(this._fill=t,this.invalidateFill()),this}set fill(t){this.setFill(t)}get fill(){return this.getFill()}getFill(){return this._fill}hasFill(){return this.getFillValue()!==null}getFillValue(){const t=this.getFill();return Dt(t)?t.get():t}get fillValue(){return this.getFillValue()}setStroke(t){return this._stroke!==t&&(this._stroke=t,this.invalidateStroke()),this}set stroke(t){this.setStroke(t)}get stroke(){return this.getStroke()}getStroke(){return this._stroke}hasStroke(){return this.getStrokeValue()!==null}hasPaintableStroke(){return this.hasStroke()&&this.getLineWidth()>0}getStrokeValue(){const t=this.getStroke();return Dt(t)?t.get():t}get strokeValue(){return this.getStrokeValue()}setFillPickable(t){return this._fillPickable!==t&&(this._fillPickable=t,this.invalidateFill()),this}set fillPickable(t){this.setFillPickable(t)}get fillPickable(){return this.isFillPickable()}isFillPickable(){return this._fillPickable}setStrokePickable(t){return this._strokePickable!==t&&(this._strokePickable=t,this.invalidateStroke()),this}set strokePickable(t){this.setStrokePickable(t)}get strokePickable(){return this.isStrokePickable()}isStrokePickable(){return this._strokePickable}setLineWidth(t){if(this.getLineWidth()!==t){this._lineDrawingStyles.lineWidth=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineWidth()}return this}set lineWidth(t){this.setLineWidth(t)}get lineWidth(){return this.getLineWidth()}getLineWidth(){return this._lineDrawingStyles.lineWidth}setLineCap(t){if(this._lineDrawingStyles.lineCap!==t){this._lineDrawingStyles.lineCap=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineCap(t){this.setLineCap(t)}get lineCap(){return this.getLineCap()}getLineCap(){return this._lineDrawingStyles.lineCap}setLineJoin(t){if(this._lineDrawingStyles.lineJoin!==t){this._lineDrawingStyles.lineJoin=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineJoin(t){this.setLineJoin(t)}get lineJoin(){return this.getLineJoin()}getLineJoin(){return this._lineDrawingStyles.lineJoin}setMiterLimit(t){if(this._lineDrawingStyles.miterLimit!==t){this._lineDrawingStyles.miterLimit=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set miterLimit(t){this.setMiterLimit(t)}get miterLimit(){return this.getMiterLimit()}getMiterLimit(){return this._lineDrawingStyles.miterLimit}setLineDash(t){if(this._lineDrawingStyles.lineDash!==t){this._lineDrawingStyles.lineDash=t||[],this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineDash(t){this.setLineDash(t)}get lineDash(){return this.getLineDash()}getLineDash(){return this._lineDrawingStyles.lineDash}hasLineDash(){return!!this._lineDrawingStyles.lineDash.length}setLineDashOffset(t){if(this._lineDrawingStyles.lineDashOffset!==t){this._lineDrawingStyles.lineDashOffset=t,this.invalidateStroke();const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyLineOptions()}return this}set lineDashOffset(t){this.setLineDashOffset(t)}get lineDashOffset(){return this.getLineDashOffset()}getLineDashOffset(){return this._lineDrawingStyles.lineDashOffset}setLineStyles(t){return this._lineDrawingStyles=t,this.invalidateStroke(),this}set lineStyles(t){this.setLineStyles(t)}get lineStyles(){return this.getLineStyles()}getLineStyles(){return this._lineDrawingStyles}setCachedPaints(t){this._cachedPaints=t.filter(s=>s instanceof Lo);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyCachedPaints();return this}set cachedPaints(t){this.setCachedPaints(t)}get cachedPaints(){return this.getCachedPaints()}getCachedPaints(){return this._cachedPaints}addCachedPaint(t){if(t instanceof Lo){this._cachedPaints.push(t);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyCachedPaints()}}removeCachedPaint(t){if(t instanceof Lo){Ns(this._cachedPaints,t);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyCachedPaints()}}beforeCanvasFill(t){const i=this.getFillValue();t.setFillStyle(i),i.transformMatrix&&(t.context.save(),i.transformMatrix.canvasAppendTransform(t.context))}afterCanvasFill(t){this.getFillValue().transformMatrix&&t.context.restore()}beforeCanvasStroke(t){const i=this.getStrokeValue();if(t.setStrokeStyle(this._stroke),t.setLineCap(this.getLineCap()),t.setLineJoin(this.getLineJoin()),i.transformMatrix){const r=1/i.transformMatrix.getScaleVector().x;t.context.save(),i.transformMatrix.canvasAppendTransform(t.context),t.setLineWidth(this.getLineWidth()*r),t.setMiterLimit(this.getMiterLimit()*r),t.setLineDash(this.getLineDash().map(o=>o*r)),t.setLineDashOffset(this.getLineDashOffset()*r)}else t.setLineWidth(this.getLineWidth()),t.setMiterLimit(this.getMiterLimit()),t.setLineDash(this.getLineDash()),t.setLineDashOffset(this.getLineDashOffset())}afterCanvasStroke(t){this.getStrokeValue().transformMatrix&&t.context.restore()}getCSSFill(){const t=this.getFillValue();return t?t.toCSS?t.toCSS():t:"transparent"}getSimpleCSSStroke(){const t=this.getStrokeValue();return t?t.toCSS?t.toCSS():t:"transparent"}appendFillablePropString(t,i){return this._fill&&(i&&(i+=`,
`),typeof this.getFillValue()=="string"?i+=`${t}fill: '${this.getFillValue()}'`:i+=`${t}fill: ${this.getFillValue()}`),i}appendStrokablePropString(t,i){function s(r,o,c){i&&(i+=`,
`),!c&&typeof o=="string"?i+=`${t+r}: '${o}'`:i+=`${t+r}: ${o}`}if(this._stroke){const r=new oc,o=this.getStrokeValue();typeof o=="string"?s("stroke",o):s("stroke",o?o.toString():"null",!0),te.each(["lineWidth","lineCap","miterLimit","lineJoin","lineDashOffset"],c=>{this[c]!==r[c]&&s(c,this[c])}),this.lineDash.length&&s("lineDash",JSON.stringify(this.lineDash),!0)}return i}getFillRendererBitmask(){let t=0;return yk&&this._fill&&this._fill.isGradient||(t|=Se.bitmaskSVG),t|=Se.bitmaskCanvas,this.hasFill()&&(this._fill&&this._fill.isPattern||this._fill&&this._fill.isGradient)||(t|=Se.bitmaskDOM,t|=Se.bitmaskWebGL),t}getStrokeRendererBitmask(){let t=0;return t|=Se.bitmaskCanvas,t|=Se.bitmaskSVG,this.hasStroke()||(t|=Se.bitmaskDOM,t|=Se.bitmaskWebGL),t}invalidateFill(){this.invalidateSupportedRenderers();const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyFill()}invalidateStroke(){this.invalidateSupportedRenderers();const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyStroke()}});K0.DEFAULT_OPTIONS=ju;const _k=["boundsMethod","shape","shapeProperty"],Ud={shape:null,boundsMethod:"accurate"};class Xs extends K0(At){constructor(e,t){e||t!=null&&t.shape;const i={boundsMethod:Ud.boundsMethod};Dt(e)?i.shapeProperty=e:i.shape=e;const s=lt()(i,t);super(),this._shapeProperty=new Ra(null,!1,this.onShapePropertyChange.bind(this)),this._shape=Ud.shape,this._strokedShape=null,this._boundsMethod=Ud.boundsMethod,this._invalidShapeListener=this.invalidateShape.bind(this),this._invalidShapeListenerAttached=!1,this.invalidateSupportedRenderers(),this.mutate(s)}setShape(e){return this._shapeProperty.value=e,this}set shape(e){this.setShape(e)}get shape(){return this.getShape()}getShape(){return this._shape}onShapePropertyChange(e){this._shape!==e&&(this._invalidShapeListenerAttached&&this.detachShapeListener(),typeof e=="string"&&(e=new Tt(e)),this._shape=e,this.invalidateShape(),this._shape&&!this._shape.isImmutable()&&this.attachShapeListener())}setShapeProperty(e){return this._shapeProperty.setTargetProperty(e)}set shapeProperty(e){this.setShapeProperty(e)}get shapeProperty(){return this.getShapeProperty()}getShapeProperty(){return this._shapeProperty}getStrokedShape(){return this._strokedShape||(this._strokedShape=this.getShape().getStrokedShape(this._lineDrawingStyles)),this._strokedShape}getPathRendererBitmask(){return Se.bitmaskCanvas|Se.bitmaskSVG}invalidateSupportedRenderers(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getPathRendererBitmask())}invalidateShape(){this.invalidatePath();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyShape();this._invalidShapeListenerAttached&&this._shape&&this._shape.isImmutable()&&this.detachShapeListener()}invalidatePath(){this._strokedShape=null,this.invalidateSelf()}attachShapeListener(){this.isDisposed||(this._shape.invalidatedEmitter.addListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!0)}detachShapeListener(){this._shape.invalidatedEmitter.removeListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!1}updateSelfBounds(){const e=this.hasShape()?this.computeShapeBounds():Je.NOTHING,t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}setBoundsMethod(e){return this._boundsMethod!==e&&(this._boundsMethod=e,this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit()),this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}computeShapeBounds(){const e=this.getShape();if(this._boundsMethod==="none"||!e)return Je.NOTHING;if(!this.hasPaintableStroke()||this._boundsMethod==="unstroked")return e.bounds;if(this._boundsMethod==="accurate")return e.getStrokedBounds(this.getLineStyles());{let t;return this._boundsMethod==="safePadding"&&this.getLineJoin()==="miter"?t=this.getMiterLimit():this.getLineCap()==="square"?t=Math.SQRT2:t=1,e.bounds.dilated(t*this.getLineWidth()/2)}}areSelfBoundsValid(){return this._boundsMethod==="accurate"||this._boundsMethod==="safePadding"?!0:this._boundsMethod==="none"?!1:!this.hasStroke()}getTransformedSelfBounds(e){return(this._stroke?this.getStrokedShape():this.getShape()).getBoundsWithTransform(e)}getTransformedSafeSelfBounds(e){return this.getTransformedSelfBounds(e)}invalidateStroke(){this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit(),super.invalidateStroke()}hasShape(){return!!this._shape}canvasPaintSelf(e,t){Nm.prototype.paintCanvas(e,this,t)}createSVGDrawable(e,t){return fv.createFromPool(e,t)}createCanvasDrawable(e,t){return Nm.createFromPool(e,t)}isPainted(){return!0}containsPointSelf(e){let t=!1;return this.hasShape()&&(this._fillPickable&&(t=this.getShape().containsPoint(e)),!t&&this._strokePickable&&(t=this.getStrokedShape().containsPoint(e))),t}getSelfShape(){return Tt.union([...this.hasShape()&&this._fillPickable?[this.getShape()]:[],...this.hasShape()&&this._strokePickable?[this.getStrokedShape()]:[]])}intersectsBoundsSelf(e){return this._shape?this._shape.intersectsBounds(e):!1}requiresSVGBoundsWorkaround(){if(!this._stroke||!(this._stroke instanceof Lo)||!this.hasShape())return!1;const e=this.computeShapeBounds();return e.width*e.height===0}getDebugHTMLExtras(){return this._shape?` (<span style="color: #88f" onclick="window.open( 'data:text/plain;charset=utf-8,' + encodeURIComponent( '${this._shape.getSVGPath()}' ) );">path</span>)`:""}dispose(){this._invalidShapeListenerAttached&&this.detachShapeListener(),this._shapeProperty.dispose(),super.dispose()}mutate(e){return super.mutate(e)}}Xs.DEFAULT_PATH_OPTIONS=Ci({},At.DEFAULT_NODE_OPTIONS,Ud);Xs.prototype._mutatorKeys=[...Av,..._k,...At.prototype._mutatorKeys];Xs.prototype.drawableMarkFlags=[...At.prototype.drawableMarkFlags,...bv,"shape"];const vv=new et("rgba(212,19,106,0.5)"),Vv=new et("rgba(250,40,135,0.9)"),Ak=new et("rgba(233,113,166,1.0)"),bk=new et("rgba(233,113,166,1.0)"),vk=new et("rgba(159,15,80,1.0)"),Vk=new et("rgba(159,15,80,1.0)"),Sk=2.5,d2=4,wk=2,Ck=2;class wi extends Xs{constructor(e,t){const i=lt()({outerStroke:vv,innerStroke:Vv,outerLineWidth:null,innerLineWidth:null,dashed:!1,transformSourceNode:null},t);super(e),this.highlightChangedEmitter=new Os,this._innerHighlightColor=i.innerStroke,this._outerHighlightColor=i.outerStroke;const s=te.pick(i,Object.keys(Xs.DEFAULT_PATH_OPTIONS));this.innerLineWidth=i.innerLineWidth,this.outerLineWidth=i.outerLineWidth,this.transformSourceNode=i.transformSourceNode,i.stroke=i.outerStroke,this.mutate(i);const r=Ci({},s,{stroke:i.innerStroke});this.innerHighlightPath=new Xs(e,r),this.addChild(this.innerHighlightPath),i.dashed&&this.setDashed(!0)}mutateWithInnerHighlight(e){super.mutate(e),this.innerHighlightPath&&this.innerHighlightPath.mutate(e),this.highlightChangedEmitter.emit()}setDashed(e){const t=e?[7,7]:[];this.mutateWithInnerHighlight({lineDash:t})}setShape(e){return super.setShape(e),this.innerHighlightPath&&this.innerHighlightPath.setShape(e),this.highlightChangedEmitter&&this.highlightChangedEmitter.emit(),this}updateLineWidth(e){this.lineWidth=this.getOuterLineWidth(e),this.innerHighlightPath.lineWidth=this.getInnerLineWidth(e),this.highlightChangedEmitter.emit()}getOuterLineWidth(e){return this.outerLineWidth?this.outerLineWidth:wi.getOuterLineWidthFromMatrix(e)}getInnerLineWidth(e){return this.innerLineWidth?this.innerLineWidth:wi.getInnerLineWidthFromMatrix(e)}setInnerHighlightColor(e){this._innerHighlightColor=e,this.innerHighlightPath.setStroke(e),this.highlightChangedEmitter.emit()}set innerHighlightColor(e){this.setInnerHighlightColor(e)}get innerHighlightColor(){return this.getInnerHighlightColor()}getInnerHighlightColor(){return this._innerHighlightColor}setOuterHighlightColor(e){this._outerHighlightColor=e,this.setStroke(e),this.highlightChangedEmitter.emit()}set outerHighlightColor(e){this.setOuterHighlightColor(e)}get outerHighlightColor(){return this.getOuterHighlightColor()}getOuterHighlightColor(){return this._outerHighlightColor}getUniqueHighlightTrail(e){const t=this.transformSourceNode;let i=null;return t.instances.length<=1?i=t.getUniqueTrail():i=t.getTrails().filter(r=>r.isExtensionOf(e,!0))[0],i}static getInnerLineWidthFromMatrix(e){return Sk/wi.localToGlobalScaleFromMatrix(e)}static getOuterLineWidthFromMatrix(e){return d2/wi.localToGlobalScaleFromMatrix(e)}static localToGlobalScaleFromMatrix(e){return Math.sqrt(e.m00()*e.m00()+e.m10()*e.m10())}static getDilationCoefficient(e){return wi.getOuterLineWidthFromMatrix(e)*(.5+.25)}static getDefaultDilationCoefficient(){return wi.getDilationCoefficient(nt.IDENTITY)}static getDefaultGroupDilationCoefficient(){return wi.getGroupDilationCoefficient(nt.IDENTITY)}static getDefaultHighlightLineWidth(){return d2}static getGroupDilationCoefficient(e){return wi.getOuterLineWidthFromMatrix(e)*(.5+1.4)}static getPanZoomCorrectingMatrix(){return ef.initialized?ef.listener.matrixProperty.value.inverted():nt.IDENTITY}static getLayoutCorrectingMatrix(){return nt.scaling(1/wi.layoutScale,1/wi.layoutScale)}static getCorrectiveScalingMatrix(){return wi.getPanZoomCorrectingMatrix().timesMatrix(wi.getLayoutCorrectingMatrix())}}wi.OUTER_FOCUS_COLOR=vv;wi.INNER_FOCUS_COLOR=Vv;wi.INNER_LIGHT_GROUP_FOCUS_COLOR=Ak;wi.OUTER_LIGHT_GROUP_FOCUS_COLOR=bk;wi.INNER_DARK_GROUP_FOCUS_COLOR=vk;wi.OUTER_DARK_GROUP_FOCUS_COLOR=Vk;wi.GROUP_OUTER_LINE_WIDTH=wk;wi.GROUP_INNER_LINE_WIDTH=Ck;wi.layoutScale=1;class tf extends wi{constructor(e,t){const i=lt()({useLocalBounds:!0,dilationCoefficient:null,useGroupDilation:!1},t);i.transformSourceNode=e,super(null,i),this.observedBoundsProperty=null,this.boundsListener=null,this.useLocalBounds=i.useLocalBounds,this.useGroupDilation=i.useGroupDilation,this.dilationCoefficient=i.dilationCoefficient,e&&this.setShapeFromNode(e)}setShapeFromNode(e,t){this.observedBoundsProperty&&this.observedBoundsProperty.unlink(this.boundsListener),this.observedBoundsProperty=e.localBoundsProperty,this.boundsListener=i=>{if(!i.isFinite())return;let s=this.dilationCoefficient;const o=(t||e.getUniqueTrail()).getMatrix().timesMatrix(wi.getCorrectiveScalingMatrix());this.dilationCoefficient===null&&(s=this.useGroupDilation?wi.getGroupDilationCoefficient(o):wi.getDilationCoefficient(o));const p=(this.useLocalBounds?e.getVisibleLocalBounds():e.getVisibleBounds()).dilated(s);this.setShape(Tt.bounds(p))},this.observedBoundsProperty.link(this.boundsListener)}dispose(){this.observedBoundsProperty&&this.observedBoundsProperty.unlink(this.boundsListener),super.dispose()}}const Pk=100;class Ek{constructor(e,t){this.initialPointerPoint=null,this.relativePointerDistance=0;const i=lt()({interactiveHighlightsEnabledProperty:new hi(!1)},t);this.display=e;const s={move:this.handleMove.bind(this)},r=()=>{this.display.focusManager.pdomFocusHighlightsVisibleProperty.value=!0},o={};["click","input","change","keydown","keyup"].forEach(P=>{o[P]=r}),this.display.addInputListener(o);const c=P=>{Ne.isKeyEvent(P,Ne.KEY_TAB)&&r()};Xr.keyupEmitter.addListener(c);const p=P=>{this.display.focusManager.interactiveHighlightsVisibleProperty.value=P};i.interactiveHighlightsEnabledProperty.link(p);const g=i.interactiveHighlightsEnabledProperty,A=this.display.focusManager.pdomFocusHighlightsVisibleProperty,C=new _n([g,A],(P,F)=>{P&&F?(this.display.addInputListener(s),this.initialPointerPoint=null,this.relativePointerDistance=0):this.display.hasInputListener(s)&&this.display.removeInputListener(s)}),D={down:P=>{if(this.display.bounds.containsPoint(P.pointer.point)){this.display.focusManager.pdomFocusHighlightsVisibleProperty.value=!1;const F=ac();F&&(P.trail.nodes.includes(F)||(Ui.pdomFocus=null))}}};this.display.addInputListener(D),this.disposeHighlightVisibilityController=()=>{this.display.removeInputListener(o),Xr.keyupEmitter.removeListener(c),this.display.removeInputListener(D),p&&i.interactiveHighlightsEnabledProperty.unlink(p),C&&C.dispose()}}handleMove(e){this.initialPointerPoint===null?this.initialPointerPoint=e.pointer.point:(this.relativePointerDistance=e.pointer.point.distance(this.initialPointerPoint),this.relativePointerDistance>Pk&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.value=!1,this.display.focusManager.interactiveHighlightsVisibleProperty.value=!0))}dispose(){this.disposeHighlightVisibilityController()}}var Sv={exports:{}};(function(n){function e(){}function t(){}(function(){function i(o,c){c=c||1/0;for(var p,g=o.length,A=null,C=[],D=0;D<g;D++){if(p=o.charCodeAt(D),p>55295&&p<57344)if(A)if(p<56320){(c-=3)>-1&&C.push(239,191,189),A=p;continue}else p=A-55296<<10|p-56320|65536,A=null;else if(p>56319){(c-=3)>-1&&C.push(239,191,189);continue}else if(D+1===g){(c-=3)>-1&&C.push(239,191,189);continue}else{A=p;continue}else A&&((c-=3)>-1&&C.push(239,191,189),A=null);if(p<128){if((c-=1)<0)break;C.push(p)}else if(p<2048){if((c-=2)<0)break;C.push(p>>6|192,p&63|128)}else if(p<65536){if((c-=3)<0)break;C.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<2097152){if((c-=4)<0)break;C.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return C}function s(o,c,p){var g="",A="";p=Math.min(o.length,p||1/0),c=c||0;for(var C=c;C<p;C++)o[C]<=127?(g+=r(A)+String.fromCharCode(o[C]),A=""):A+="%"+o[C].toString(16);return g+r(A)}function r(o){try{return decodeURIComponent(o)}catch{return"�"}}e.prototype.encode=function(o){var c;return typeof Uint8Array>"u"?c=i(o):c=new Uint8Array(i(o)),c},t.prototype.decode=function(o){return s(o,0,o.length)}})(),n&&(n.exports.TextDecoderLite=t,n.exports.TextEncoderLite=e)})(Sv);var Dk=Sv.exports;const Tk=qf(Dk);var Qf={};Qf.byteLength=Lk;Qf.toByteArray=Bk;Qf.fromByteArray=Mk;var ka=[],Ur=[],Ik=typeof Uint8Array<"u"?Uint8Array:Array,jg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var yh=0,xk=jg.length;yh<xk;++yh)ka[yh]=jg[yh],Ur[jg.charCodeAt(yh)]=yh;Ur[45]=62;Ur[95]=63;function wv(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function Lk(n){var e=wv(n),t=e[0],i=e[1];return(t+i)*3/4-i}function kk(n,e,t){return(e+t)*3/4-t}function Bk(n){var e,t=wv(n),i=t[0],s=t[1],r=new Ik(kk(n,i,s)),o=0,c=s>0?i-4:i,p;for(p=0;p<c;p+=4)e=Ur[n.charCodeAt(p)]<<18|Ur[n.charCodeAt(p+1)]<<12|Ur[n.charCodeAt(p+2)]<<6|Ur[n.charCodeAt(p+3)],r[o++]=e>>16&255,r[o++]=e>>8&255,r[o++]=e&255;return s===2&&(e=Ur[n.charCodeAt(p)]<<2|Ur[n.charCodeAt(p+1)]>>4,r[o++]=e&255),s===1&&(e=Ur[n.charCodeAt(p)]<<10|Ur[n.charCodeAt(p+1)]<<4|Ur[n.charCodeAt(p+2)]>>2,r[o++]=e>>8&255,r[o++]=e&255),r}function Rk(n){return ka[n>>18&63]+ka[n>>12&63]+ka[n>>6&63]+ka[n&63]}function Nk(n,e,t){for(var i,s=[],r=e;r<t;r+=3)i=(n[r]<<16&16711680)+(n[r+1]<<8&65280)+(n[r+2]&255),s.push(Rk(i));return s.join("")}function Mk(n){for(var e,t=n.length,i=t%3,s=[],r=16383,o=0,c=t-i;o<c;o+=r)s.push(Nk(n,o,o+r>c?c:o+r));return i===1?(e=n[t-1],s.push(ka[e>>2]+ka[e<<4&63]+"==")):i===2&&(e=(n[t-2]<<8)+n[t-1],s.push(ka[e>>10]+ka[e>>4&63]+ka[e<<2&63]+"=")),s.join("")}const Ok=4;let qm=1;class Wr extends bn{constructor(e){super(),this.attributeString=e}}Wr.POLITE=new Wr("polite");Wr.ASSERTIVE=new Wr("assertive");Wr.enumeration=new br(Wr);function f2(n){const e=n.attributeString,t=document.createElement("div");for(let i=1;i<=Ok;i++){const s=document.createElement("p");s.setAttribute("id",`elements-${qm}-${e}-${i}`),s.setAttribute("aria-live",e),t.appendChild(s)}return t}class au extends Rh{constructor(e){const t=lt()({respectResponseCollectorProperties:!1,lang:"en"},e);super(t),this.politeElementIndex=0,this.assertiveElementIndex=0,this.ariaLiveContainer=document.createElement("div"),this.ariaLiveContainer.setAttribute("lang",t.lang),this.ariaLiveContainer.setAttribute("id",`aria-live-elements-${qm}`),this.ariaLiveContainer.setAttribute("style","position: absolute; left: 0px; top: 0px; width: 0px; height: 0px; clip: rect(0px 0px 0px 0px); pointer-events: none;");const i=f2(Wr.POLITE),s=f2(Wr.ASSERTIVE);this.ariaLiveContainer.appendChild(i),this.ariaLiveContainer.appendChild(s),this.politeElements=Array.from(i.children),this.assertiveElements=Array.from(s.children),qm++}announce(e,t,i){const s=lt()({ariaLivePriority:Wr.POLITE},i);if(this.hasSpoken=!0,e){if(Dt(e)&&(e=e.value),s.ariaLivePriority===Wr.POLITE){const r=this.politeElements[this.politeElementIndex];this.updateLiveElement(r,e,t),this.politeElementIndex=(this.politeElementIndex+1)%this.politeElements.length}else if(s.ariaLivePriority===Wr.ASSERTIVE){const r=this.assertiveElements[this.assertiveElementIndex];this.updateLiveElement(r,e,t),this.assertiveElementIndex=(this.assertiveElementIndex+1)%this.assertiveElements.length}}this.announcementCompleteEmitter.emit(t,e)}cancel(){}cancelUtterance(e){}updateLiveElement(e,t,i){e.textContent="",e.hidden=!1,this.readyToAnnounce=!1,fn.setTimeout(()=>{i.predicate()?(Jt.setTextContent(e,t),fn.setTimeout(()=>{qs.safari&&!qs.mobileSafari?e.hidden=!0:e.textContent="",this.readyToAnnounce=!0},au.ARIA_LIVE_DELAY)):this.readyToAnnounce=!0},0)}}au.ARIA_LIVE_DELAY=200;au.AriaLive=Wr;class qk extends Nl{constructor(e){super(),this.utterance=e,this.timeInQueue=0,this.stableTime=0,this.utterancePriorityListener=null}dispose(){this.utterancePriorityListener&&(this.utterance.priorityProperty.unlink(this.utterancePriorityListener),this.utterancePriorityListener=null),super.dispose()}}class Zf extends Gi{constructor(e,t){const i=lt()({debug:!1,initialize:!0,featureSpecificAnnouncingControlPropertyName:null},t);super(i),this.announcer=e,this._initialized=i.initialize,this.featureSpecificAnnouncingControlPropertyName=i.featureSpecificAnnouncingControlPropertyName,this.queue=[],this._muted=!1,this._enabled=!0,this.announcingUtteranceWrapper=null,this.debug=i.debug,this.announcer.announcementCompleteEmitter.addListener(s=>{this.announcingUtteranceWrapper&&s===this.announcingUtteranceWrapper.utterance&&(!this.announcingUtteranceWrapper.isDisposed&&this.announcingUtteranceWrapper.dispose(),this.announcingUtteranceWrapper=null)}),this.stepQueueListener=null,this._initialized&&(this.stepQueueListener=this.stepQueue.bind(this),fn.addListener(this.stepQueueListener))}get length(){return this.queue.length}addToBack(e){if(this.initializedAndEnabled)if(!this.announcer.hasSpoken)this.announceImmediately(e);else{const t=this.prepareUtterance(e);this.queue.push(t),this.debug&&console.log("addToBack"),this.addPriorityListenerAndPrioritizeQueue(t)}}addToFront(e){if(e1("`addToFront()` has been deprecated because it is confusing, and most of the time doesn't do what is expected, because Utterances are announced based on time-in-queue first, and then position in the queue. It is recommended to use addToBack, and then timing variables on Utterances, or instead call queue.clear() before adding a more important alert to the queue."),!this.initializedAndEnabled)return;const t=this.prepareUtterance(e);this.queue.unshift(t)}addPriorityListenerAndPrioritizeQueue(e){e.utterancePriorityListener=()=>{this.prioritizeUtterances(e)},e.utterance.priorityProperty.link(e.utterancePriorityListener)}prepareUtterance(e){e instanceof Ws||(e=new Ws({alert:e}));const t=new qk(e);return this.removeOthersAndUpdateUtteranceWrapper(t),t.stableTime=0,t}removeUtterance(e){const t=i=>i.utterance===e;te.remove(this.queue,t).forEach(i=>i.dispose())}prioritizeUtterances(e){let t=this.queue.indexOf(e);const i=t>=0;let s;i?s=t-1:s=-1;for(let r=s;r>=0;r--){const o=this.queue[r];this.shouldUtteranceCancelOther(e.utterance,o.utterance)&&this.removeUtterance(o.utterance)}if(i){t=this.queue.indexOf(e);const r=this.queue[t+1];r&&this.shouldUtteranceCancelOther(r.utterance,e.utterance)&&this.removeUtterance(e.utterance)}this.queue.length>0&&this.announcer.onUtterancePriorityChange(this.queue[0].utterance)}shouldUtteranceCancelOther(e,t){return this.announcer.shouldUtteranceCancelOther(e,t)}removeOthersAndUpdateUtteranceWrapper(e){const t=[];for(let i=0;i<this.queue.length;i++){const s=this.queue[i];s.utterance===e.utterance&&t.push(s.timeInQueue)}t.length>=1&&(e.timeInQueue=Math.max(...t)),te.remove(this.queue,i=>i.utterance===e.utterance).forEach(i=>i.dispose())}get initializedAndEnabled(){return this._enabled&&this._initialized}pruneDisposedUtterances(){const e=this.queue.slice();this.queue.length=0;for(let t=0;t<e.length;t++){const i=e[t];i.utterance.isDisposed?i.dispose():this.queue.push(i)}}getNextUtterance(){let e=null;for(let t=0;t<this.queue.length;t++){const i=this.queue[t];if(i.stableTime>i.utterance.alertStableDelay||i.timeInQueue>i.utterance.alertMaximumDelay){e=i;break}}return e}hasUtterance(e){for(let t=0;t<this.queue.length;t++){const i=this.queue[t];if(e===i.utterance)return!0}return!1}clear(){this.debug&&console.log("UtteranceQueue.clear()"),this.queue.forEach(e=>e.dispose()),this.queue.length=0}cancelUtterance(e){this.announcer.cancelUtterance(e),this.hasUtterance(e)&&this.removeUtterance(e)}cancel(){this.debug&&console.log("UtteranceQueue.cancel()"),this.clear(),this.announcer.cancel()}setMuted(e){this._muted=e}set muted(e){this.setMuted(e)}get muted(){return this.getMuted()}getMuted(){return this._muted}setEnabled(e){this._enabled=e}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabled}stepQueue(e){if(this._enabled&&(e*=1e3,this.queue.length>0)){this.pruneDisposedUtterances();for(let i=0;i<this.queue.length;i++){const s=this.queue[i];s.timeInQueue+=e,s.stableTime+=e}const t=this.getNextUtterance();t&&this.attemptToAnnounce(t)}}announceImmediately(e){if(this.initializedAndEnabled&&(this.debug&&console.log("announceImmediately"),e instanceof Ws||(e=new Ws({alert:e})),this.announcingUtteranceWrapper===null||this.announcer.shouldUtteranceCancelOther(e,this.announcingUtteranceWrapper.utterance))){const t=this.prepareUtterance(e);t.stableTime=Number.POSITIVE_INFINITY,t.timeInQueue=Number.POSITIVE_INFINITY,this.queue.unshift(t),this.addPriorityListenerAndPrioritizeQueue(t),this.queue.includes(t)&&this.attemptToAnnounce(t)}}attemptToAnnounce(e){const t=e.utterance;if(this.announcer.readyToAnnounce){const i=t.getAlertText(this.announcer.respectResponseCollectorProperties);this.debug&&console.log("ready to announce in attemptToAnnounce(): ",i);const s=!this.featureSpecificAnnouncingControlPropertyName||t[this.featureSpecificAnnouncingControlPropertyName].value,r=t.canAnnounceProperty.value&&t.predicate()&&s;!this._muted&&r&&i!==""?(this.announcingUtteranceWrapper=e,this.debug&&console.log("announcing: ",i),this.announcer.announce(i,t,t.announcerOptions)):this.debug&&console.log("announcer readyToAnnounce but utterance cannot announce, will not be spoken: ",i),this.queue.includes(e)&&(te.remove(this.queue,e),!e.isDisposed&&this.announcingUtteranceWrapper!==e&&e.dispose())}else this.debug&&console.log("announcer not readyToAnnounce")}dispose(){this._initialized&&fn.removeListener(this.stepQueueListener),super.dispose()}static fromFactory(){const e=new au,t=new Zf(e),i=e.ariaLiveContainer;document.body?document.body.appendChild(i):document.children[0].appendChild(i);let s=0;const r=o=>{const c=o-s;s=o,fn.emit(c/1e3),self.requestAnimationFrame(r)};return self.requestAnimationFrame(r),t}}class U0 extends kr{initialize(e,t){super.initialize(t),this.display=e,this.drawableCount=0,this.used=!0,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,this.zIndex=0}dispose(){this.display=null,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,super.dispose()}addDrawable(e){this.drawableCount++,this.markDirtyDrawable(e)}removeDrawable(e){this.drawableCount--,this.markDirty()}onIntervalChange(e,t){}updateInterval(){(this.pendingFirstDrawable!==this.firstDrawable||this.pendingLastDrawable!==this.lastDrawable)&&(this.onIntervalChange(this.pendingFirstDrawable,this.pendingLastDrawable),this.firstDrawable=this.pendingFirstDrawable,this.lastDrawable=this.pendingLastDrawable)}notifyInterval(e,t){this.pendingFirstDrawable=e,this.pendingLastDrawable=t,this.updateInterval()}audit(e,t,i){}}class ua{constructor(e,t){this.initialize(e,t)}initialize(e,t){this.nextChangeInterval=null,this.drawableBefore=e,this.drawableAfter=t,this.collapsedEmpty=!1}dispose(){this.nextChangeInterval=null,this.drawableBefore=null,this.drawableAfter=null,this.freeToPool()}constrict(){let e=!1;if(this.isEmpty())return!0;for(;this.drawableBefore&&this.drawableBefore.nextDrawable===this.drawableBefore.oldNextDrawable;)if(this.drawableBefore=this.drawableBefore.nextDrawable,e=!0,this.drawableBefore||(this.collapsedEmpty=!0),this.isEmpty())return!0;for(;this.drawableAfter&&this.drawableAfter.previousDrawable===this.drawableAfter.oldPreviousDrawable;)if(this.drawableAfter=this.drawableAfter.previousDrawable,e=!0,this.drawableAfter||(this.collapsedEmpty=!0),this.isEmpty())return!0;return e}isEmpty(){return this.collapsedEmpty||this.drawableBefore!==null&&this.drawableBefore===this.drawableAfter}getOldInternalDrawableCount(e,t){const i=this.drawableBefore?this.drawableBefore.oldNextDrawable:e,s=this.drawableAfter;let r=0;for(let o=i;o!==s;o=o.oldNextDrawable)r++;return r}getNewInternalDrawableCount(e,t){const i=this.drawableBefore?this.drawableBefore.nextDrawable:e,s=this.drawableAfter;let r=0;for(let o=i;o!==s;o=o.nextDrawable)r++;return r}static newForDisplay(e,t,i){const s=ua.createFromPool(e,t);return i.markChangeIntervalToDispose(s),s}}es.mixInto(ua);const p2=Je.NOTHING.copy();class Cs extends U0{initialize(e,t,i,s){return super.initialize(e,t),this.transformRootInstance=i,this.canBeFullDisplay=i.isDisplayRoot,this.preferredFit=s,this.fit=s,this.dirtyFit=!0,this.commonFitInstance=null,this.fitBounds=Je.NOTHING.copy(),this.oldFitBounds=Je.NOTHING.copy(),this.unfittableDrawableCount=0,this.dirtyFitListener=this.dirtyFitListener||this.markDirtyFit.bind(this),this.fittableListener=this.fittableListener||this.onFittabilityChange.bind(this),this.display.sizeProperty.lazyLink(this.dirtyFitListener),this}setFit(e){!this.canBeFullDisplay&&e===Cs.FULL_DISPLAY&&(e=Cs.COMMON_ANCESTOR),this.fit!==e&&(this.fit=e,this.markDirtyFit(),this.oldFitBounds.set(Je.NOTHING),e===Cs.COMMON_ANCESTOR&&this.removeCommonFitInstance())}markDirtyFit(){this.dirtyFit=!0,this.markDirty()}updateFit(){if(!(!this.dirtyFit&&this.fit===Cs.FULL_DISPLAY))if(this.dirtyFit=!1,this.fit===Cs.COMMON_ANCESTOR&&this.commonFitInstance===null&&this.addCommonFitInstance(this.computeCommonAncestorInstance()),this.fit===Cs.COMMON_ANCESTOR&&this.commonFitInstance.fittability.subtreeUnfittableCount>0&&this.canBeFullDisplay&&(this.oldFitBounds.set(Je.NOTHING),this.fit=Cs.FULL_DISPLAY),this.fit===Cs.FULL_DISPLAY)this.fitBounds.set(Je.NOTHING),this.setSizeFullDisplay();else if(this.fit===Cs.COMMON_ANCESTOR){this.fitBounds.set(this.commonFitInstance.node.getLocalBounds());let e=this.commonFitInstance;for(;e!==this.transformRootInstance;)this.fitBounds.transform(e.node.getMatrix()),e=e.parent;this.fitBounds.roundOut(),this.fitBounds.dilate(4),this.transformRootInstance.isDisplayRoot&&(p2.setMinMax(0,0,this.display.width,this.display.height),this.fitBounds.constrainBounds(p2)),this.fitBounds.isValid()||this.fitBounds.setMinMax(0,0,0,0),this.fitBounds.equals(this.oldFitBounds)||(this.oldFitBounds.set(this.fitBounds),this.setSizeFitBounds())}else throw new Error("unknown fit")}setSizeFullDisplay(){}setSizeFitBounds(){}addCommonFitInstance(e){e&&(this.commonFitInstance=e,this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.addListener(this.dirtyFitListener))}removeCommonFitInstance(){this.commonFitInstance&&(this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.removeListener(this.dirtyFitListener),this.commonFitInstance=null)}dispose(){this.display.sizeProperty.unlink(this.dirtyFitListener),this.removeCommonFitInstance(),this.transformRootInstance=null,super.dispose()}addDrawable(e){super.addDrawable(e),e.fittableProperty.lazyLink(this.fittableListener),e.fittable||this.incrementUnfittable()}removeDrawable(e){super.removeDrawable(e),e.fittableProperty.unlink(this.fittableListener),e.fittable||this.decrementUnfittable()}onFittabilityChange(e){e?this.decrementUnfittable():this.incrementUnfittable()}incrementUnfittable(){this.unfittableDrawableCount++,this.unfittableDrawableCount===1&&this.checkFitConstraints()}decrementUnfittable(){this.unfittableDrawableCount--,this.unfittableDrawableCount===0&&this.checkFitConstraints()}checkFitConstraints(){this.unfittableDrawableCount>0&&this.canBeFullDisplay?this.setFit(Cs.FULL_DISPLAY):this.setFit(this.preferredFit)}computeCommonAncestorInstance(){let e=this.firstDrawable.instance,t=this.lastDrawable.instance;const i=Math.min(e.trail.length,t.trail.length);for(;e.trail.length>i;)e=e.parent;for(;t.trail.length>i;)t=t.parent;for(;e!==t;)e=e.parent,t=t.parent;return e}onIntervalChange(e,t){super.onIntervalChange(e,t),this.fit===Cs.COMMON_ANCESTOR&&(this.removeCommonFitInstance(),this.markDirtyFit())}}Cs.FULL_DISPLAY=1;Cs.COMMON_ANCESTOR=2;Cs.fitString={1:"fullDisplay",2:"commonAncestor"};const Fk=document.createElement("canvas"),cc=Fk.getContext("2d");function Po(n,e){return new we(n,e)}const Qg=It.transform,zk=It.transformOrigin||"transformOrigin";let g2=!0,Zg;const Pi={prepareForTransform(n){n.style[zk]="top left"},applyPreparedTransform(n,e){e.style[Qg]=n.getCSSTransform()},setTransform(n,e){e.style[Qg]=n},unsetTransform(n){n.style[Qg]=""},polyfillRequestAnimationFrame(){(!self.requestAnimationFrame||!self.cancelAnimationFrame)&&(!It.requestAnimationFrame||!It.cancelAnimationFrame?(self.requestAnimationFrame=n=>{const e=Date.now();return self.setTimeout(()=>{n(Date.now()-e)},16)},self.cancelAnimationFrame=clearTimeout):(self.requestAnimationFrame=window[It.requestAnimationFrame],self.cancelAnimationFrame=window[It.cancelAnimationFrame]))},backingStorePixelRatio(n){return n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1},backingScale(n){if("devicePixelRatio"in self){const e=Pi.backingStorePixelRatio(n);return self.devicePixelRatio/e}return 1},supportsNativeCanvasFilter(){return!!It.canvasFilter},supportsImageDataCanvasFilter(){return Pi.backingStorePixelRatio(cc)===1},scanBounds(n,e,t){const i=te.map(te.range(e),()=>!1),s=te.map(te.range(e),()=>!1);for(let A=0;A<e;A++)for(let C=0;C<e;C++){const D=4*(C*e+A);(n.data[D]!==0||n.data[D+1]!==0||n.data[D+2]!==0||n.data[D+3]!==0)&&(i[A]=!0,s[C]=!0)}const r=te.indexOf(i,!0),o=te.lastIndexOf(i,!0),c=te.indexOf(s,!0),p=te.lastIndexOf(s,!0),g=e/16;return{minBounds:new Je(r<1||r>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(Po(r+1+g,0)).x,c<1||c>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(Po(0,c+1+g)).y,o<1||o>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(Po(o-g,0)).x,p<1||p>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(Po(0,p-g)).y),maxBounds:new Je(r<1||r>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(Po(r-1-g,0)).x,c<1||c>=e-1?Number.NEGATIVE_INFINITY:t.inversePosition2(Po(0,c-1-g)).y,o<1||o>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(Po(o+2+g,0)).x,p<1||p>=e-1?Number.POSITIVE_INFINITY:t.inversePosition2(Po(0,p+2+g)).y)}},canvasAccurateBounds(n,e){const t=e&&e.precision?e.precision:.001,i=e&&e.resolution?e.resolution:128,s=e&&e.initialScale?e.initialScale:1/16;let r=Je.NOTHING,o=Je.EVERYTHING;const c=document.createElement("canvas");c.width=i,c.height=i;const p=c.getContext("2d");function g(U){p.save(),U.matrix.canvasSetTransform(p),n(p),p.restore();const $=p.getImageData(0,0,i,i),re=Pi.scanBounds($,i,U);return p.clearRect(0,0,i,i),re}function A(U){const re=(i-4)/(U.maxX-U.minX),pe=(i-2*2)/(U.maxY-U.minY),ce=-re*U.minX+2,T=-pe*U.minY+2;return new _r(nt.translation(ce,T).timesMatrix(nt.scaling(re,pe)))}const C=new _r;C.append(nt.translation(i/2,i/2)),C.append(nt.scaling(s));const D=g(C);r=r.union(D.minBounds),o=o.intersection(D.maxBounds);let P,F,K;for(P=o.minY,F=o.maxY;isFinite(r.minX)&&isFinite(o.minX)&&Math.abs(r.minX-o.minX)>t&&(K=g(A(new Je(o.minX,P,r.minX,F))),!(r.minX<=K.minBounds.minX&&o.minX>=K.maxBounds.minX));)r=r.withMinX(Math.min(r.minX,K.minBounds.minX)),o=o.withMinX(Math.max(o.minX,K.maxBounds.minX)),P=Math.max(P,K.maxBounds.minY),F=Math.min(F,K.maxBounds.maxY);for(P=o.minY,F=o.maxY;isFinite(r.maxX)&&isFinite(o.maxX)&&Math.abs(r.maxX-o.maxX)>t&&(K=g(A(new Je(r.maxX,P,o.maxX,F))),!(r.maxX>=K.minBounds.maxX&&o.maxX<=K.maxBounds.maxX));)r=r.withMaxX(Math.max(r.maxX,K.minBounds.maxX)),o=o.withMaxX(Math.min(o.maxX,K.maxBounds.maxX)),P=Math.max(P,K.maxBounds.minY),F=Math.min(F,K.maxBounds.maxY);for(P=o.minX,F=o.maxX;isFinite(r.minY)&&isFinite(o.minY)&&Math.abs(r.minY-o.minY)>t&&(K=g(A(new Je(P,o.minY,F,r.minY))),!(r.minY<=K.minBounds.minY&&o.minY>=K.maxBounds.minY));)r=r.withMinY(Math.min(r.minY,K.minBounds.minY)),o=o.withMinY(Math.max(o.minY,K.maxBounds.minY)),P=Math.max(P,K.maxBounds.minX),F=Math.min(F,K.maxBounds.maxX);for(P=o.minX,F=o.maxX;isFinite(r.maxY)&&isFinite(o.maxY)&&Math.abs(r.maxY-o.maxY)>t&&(K=g(A(new Je(P,r.maxY,F,o.maxY))),!(r.maxY>=K.minBounds.maxY&&o.maxY<=K.maxBounds.maxY));)r=r.withMaxY(Math.max(r.maxY,K.minBounds.maxY)),o=o.withMaxY(Math.min(o.maxY,K.maxBounds.maxY)),P=Math.max(P,K.maxBounds.minX),F=Math.min(F,K.maxBounds.maxX);const M=new Je(isFinite(r.minX)&&isFinite(o.minX)?(r.minX+o.minX)/2:Number.POSITIVE_INFINITY,isFinite(r.minY)&&isFinite(o.minY)?(r.minY+o.minY)/2:Number.POSITIVE_INFINITY,isFinite(r.maxX)&&isFinite(o.maxX)?(r.maxX+o.maxX)/2:Number.NEGATIVE_INFINITY,isFinite(r.maxY)&&isFinite(o.maxY)?(r.maxY+o.maxY)/2:Number.NEGATIVE_INFINITY);return M.minBounds=r,M.maxBounds=o,M.isConsistent=o.containsBounds(r),M.precision=Math.max(Math.abs(r.minX-o.minX),Math.abs(r.minY-o.minY),Math.abs(r.maxX-o.maxX),Math.abs(r.maxY-o.maxY)),M},toPowerOf2(n){let e=1;for(;e<n;)e*=2;return e},createShader(n,e,t){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)||(console.log("GLSL compile error:"),console.log(n.getShaderInfoLog(i)),console.log(e)),i},applyWebGLContextDefaults(n){n.clearColor(0,0,0,0),n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA)},setWebGLEnabled(n){g2=n},checkWebGLSupport(n){if(!g2)return!1;const e=document.createElement("canvas"),t={failIfMajorPerformanceCaveat:!0};try{const i=!!self.WebGLRenderingContext&&(e.getContext("webgl",t)||e.getContext("experimental-webgl",t));if(!i)return!1;if(n){for(let s=0;s<n.length;s++)if(i.getExtension(n[s])===null)return!1}return!0}catch{return!1}},checkIE11StencilSupport(){const n=document.createElement("canvas");try{const e=!!self.WebGLRenderingContext&&(n.getContext("webgl")||n.getContext("experimental-webgl"));return e?(e.clearStencil(0),e.getError()===0):!1}catch{return!1}},get isWebGLSupported(){return Zg===void 0&&(Zg=Pi.checkWebGLSupport()),Zg},loseContext(n){const e=n.getExtension("WEBGL_lose_context");e&&(e.loseContext(),setTimeout(()=>{e.restoreContext()},1e3))},safariEmbeddingMarkWorkaround(n){if(qs.safari){const e=n.split("");let t="",i=!1;for(let s=0;s<e.length;s++){const r=e[s],o=r==="‪"||r==="‫"||r==="‬";i&&o&&(t+="​"),t+=r,i=o}return t}else return n}},m2=new nt,y2=new nt;class Jf extends Cs{constructor(e,t,i,s){super(),this.initialize(e,t,i,s)}initialize(e,t,i,s){super.initialize(e,t,i,Cs.COMMON_ANCESTOR),this.filterRootInstance=s,this.dirtyDrawables=$t(this.dirtyDrawables),this.domElement||(this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id=`scenery-canvas${this.id}`,this.context=this.canvas.getContext("2d"),this.context.save(),this.context.miterLimit=20,this.context.miterLimit=10,this.wrapper=new Lh(this.canvas,this.context),this.domElement=this.canvas,this.wrapperStack=[this.wrapper]),this.wrapperStackIndex=0,this.filterListenerCountMap=this.filterListenerCountMap||{},Pi.prepareForTransform(this.canvas),Pi.unsetTransform(this.canvas),this.canvasDrawOffset=new we(0,0),this.currentDrawable=null,this.clipDirty=!0,this.clipCount=0,this.backingScale=t&Se.bitmaskCanvasLowResolution?1:Pi.backingScale(this.context),this.clipDirtyListener=this.markDirty.bind(this),this.opacityDirtyListener=this.markDirty.bind(this)}setSizeFullDisplay(){const e=this.display.getSize();this.canvas.width=e.width*this.backingScale,this.canvas.height=e.height*this.backingScale,this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`,this.wrapper.resetStyles(),this.canvasDrawOffset.setXY(0,0),Pi.unsetTransform(this.canvas)}setSizeFitBounds(){const e=this.fitBounds.minX,t=this.fitBounds.minY;this.canvasDrawOffset.setXY(-e,-t),Pi.setTransform(`matrix(1,0,0,1,${e},${t})`,this.canvas),this.canvas.width=this.fitBounds.width*this.backingScale,this.canvas.height=this.fitBounds.height*this.backingScale,this.canvas.style.width=`${this.fitBounds.width}px`,this.canvas.style.height=`${this.fitBounds.height}px`,this.wrapper.resetStyles()}update(){if(!super.update())return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();this.updateFit(),this.context.restore(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.wrapper.resetStyles(),this.currentDrawable=null;for(let e=this.firstDrawable;e!==null&&(this.renderDrawable(e),e!==this.lastDrawable);e=e.nextDrawable);return this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,0),!0}applyClip(e){this.clipDirty=!1;const t=this.wrapperStack[this.wrapperStackIndex],i=t.context;if(i.restore(),i.save(),t.resetStyles(),this.clipCount){const r=e.instance.trail;m2.rowMajor(this.backingScale,0,this.canvasDrawOffset.x*this.backingScale,0,this.backingScale,this.canvasDrawOffset.y*this.backingScale,0,0,1),y2.set(this.transformRootInstance.trail.getMatrix()).invert(),y2.multiplyMatrix(m2).canvasSetTransform(i);for(let o=0;o<r.length;o++){const c=r.nodes[o];c.getMatrix().canvasAppendTransform(i),c.hasClipArea()&&(i.beginPath(),c.clipArea.writeToContext(i),i.clip())}}}pushWrapper(){if(this.wrapperStackIndex++,this.clipDirty=!0,this.wrapperStackIndex===this.wrapperStack.length){const i=document.createElement("canvas"),s=i.getContext("2d");s.save(),this.wrapperStack.push(new Lh(i,s))}const e=this.wrapperStack[this.wrapperStackIndex],t=e.context;e.setDimensions(this.canvas.width,this.canvas.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width,this.canvas.height)}popWrapper(){this.wrapperStackIndex--,this.clipDirty=!0}walkDown(e,t){const i=this.filterRootInstance.trail.length-1;for(let s=e.length-1;s>=t;s--){const r=e.nodes[s];if(r.hasClipArea()&&(this.clipCount--,this.clipDirty=!0),s>i){if(r._filters.length){const o=this.wrapperStack[this.wrapperStackIndex],c=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),c.context.setTransform(1,0,0,1,0,0);const p=r._filters;let g=It.canvasFilter;for(let A=0;A<p.length;A++)g=g&&p[A].isDOMCompatible();if(g){let A="";for(let C=0;C<p.length;C++)A+=`${A?" ":""}${p[C].getCSSFilterString()}`;c.context.filter=A,c.context.drawImage(o.canvas,0,0),c.context.filter="none"}else{for(let A=0;A<p.length;A++)p[A].applyCanvasFilter(o);c.context.drawImage(o.canvas,0,0)}}if(r.getEffectiveOpacity()!==1){const o=this.wrapperStack[this.wrapperStackIndex],c=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),c.context.setTransform(1,0,0,1,0,0),c.context.globalAlpha=r.getEffectiveOpacity(),c.context.drawImage(o.canvas,0,0),c.context.globalAlpha=1}}}}walkUp(e,t){const i=this.filterRootInstance.trail.length-1;for(let s=t;s<e.length;s++){const r=e.nodes[s];s>i&&(r.getEffectiveOpacity()!==1&&this.pushWrapper(),r._filters.length&&this.pushWrapper()),r.hasClipArea()&&(this.clipCount++,this.clipDirty=!0)}}renderDrawable(e){if(!e.visible||this.canvas.width===0||this.canvas.height===0)return;const t=this.currentDrawable?e.instance.getBranchIndexTo(this.currentDrawable.instance):0;this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,t),this.walkUp(e.instance.trail,t);const i=this.wrapperStack[this.wrapperStackIndex],s=i.context;this.clipDirty&&this.applyClip(e);const r=e.instance.relativeTransform.matrix;s.setTransform(this.backingScale,0,0,this.backingScale,this.canvasDrawOffset.x*this.backingScale,this.canvasDrawOffset.y*this.backingScale),e.instance!==this.transformRootInstance&&r.canvasAppendTransform(s),e.paintCanvas(i,e.instance.node,e.instance.relativeTransform.matrix),this.currentDrawable=e}dispose(){this.transformRootInstance=null,$t(this.dirtyDrawables),this.canvas.width=0,this.canvas.height=0,super.dispose()}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}addDrawable(e){super.addDrawable(e);for(let t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){const i=t.node;this.filterListenerCountMap[i.id]?this.filterListenerCountMap[i.id]++:(this.filterListenerCountMap[i.id]=1,i.filterChangeEmitter.addListener(this.opacityDirtyListener),i.clipAreaProperty.lazyLink(this.clipDirtyListener))}}removeDrawable(e){for(let t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){const i=t.node;this.filterListenerCountMap[i.id]--,this.filterListenerCountMap[i.id]===0&&(delete this.filterListenerCountMap[i.id],i.clipAreaProperty.unlink(this.clipDirtyListener),i.filterChangeEmitter.removeListener(this.opacityDirtyListener))}super.removeDrawable(e)}onIntervalChange(e,t){super.onIntervalChange(e,t),this.markDirty()}onPotentiallyMovedDrawable(e){e.markDirty()}toString(){return`CanvasBlock#${this.id}-${Cs.fitString[this.fit]}`}}es.mixInto(Jf);class Y0 extends U0{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return super.initialize(e,t.renderer),this.domDrawable=t,this.domElement=t.domElement,this}update(){return super.update()?(this.domDrawable.update(),!0):!1}dispose(){this.domDrawable=null,this.domElement=null,super.dispose()}markDirtyDrawable(e){this.markDirty()}addDrawable(e){super.addDrawable(e)}removeDrawable(e){super.removeDrawable(e)}}es.mixInto(Y0);class Hk{constructor(e,t){this.create=e,this.destroy=t,this.map=new Map}increment(e,t=1){if(this.map.has(e))this.map.get(e).count+=t;else{const i=this.create(e),s=Fm.createFromPool(t,e,i);this.map.set(e,s)}}decrement(e,t=1){const i=this.map.get(e);i&&(i.count-=t,i.count<1&&(this.destroy(e,i.value),this.map.delete(e),i.dispose()))}get(e){return this.map.get(e).value}clear(){this.map.clear()}}class Fm{constructor(e,t,i){this.initialize(e,t,i)}initialize(e,t,i){this.count=e,this.key=t,this.value=i}dispose(){this.key=null,this.value=null,this.freeToPool()}}es.mixInto(Fm,{initialize:Fm.prototype.initialize});let Kk=1,Uk=1;class Ba{constructor(e,t,i){this.id=`group${Kk++}`,this.initialize(e,t,i)}initialize(e,t,i){this.block=e,this.instance=t,this.node=t.trail.lastNode(),this.parent=i,this.children=$t(this.children),this.hasSelfDrawable=!1,this.selfDrawable=null,this.dirty=!0,this.willApplyTransforms=this.block.transformRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.willApplyFilters=this.block.filterRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.transformDirty=!0,this.hasTransform=this.hasTransform!==void 0?this.hasTransform:!1,this.transformDirtyListener=this.transformDirtyListener||this.markTransformDirty.bind(this),this.willApplyTransforms&&this.node.transformEmitter.addListener(this.transformDirtyListener),this.filterDirty=!0,this.visibilityDirty=!0,this.clipDirty=!0,this.filterElement=this.filterElement||null,this.hasOpacity=this.hasOpacity!==void 0?this.hasOpacity:!1,this.hasFilter=!1,this.clipDefinition=this.clipDefinition!==void 0?this.clipDefinition:null,this.clipPath=this.clipPath!==void 0?this.clipPath:null,this.filterChangeListener=this.filterChangeListener||this.onFilterChange.bind(this),this.visibilityDirtyListener=this.visibilityDirtyListener||this.onVisibleChange.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipChange.bind(this),this.node.visibleProperty.lazyLink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.addListener(this.filterChangeListener),this.node.clipAreaProperty.lazyLink(this.clipDirtyListener),this.orderDirty=!0,this.orderDirtyListener=this.orderDirtyListener||this.markOrderDirty.bind(this),this.node.childrenChangedEmitter.addListener(this.orderDirtyListener),this.svgGroup||(this.svgGroup=document.createElementNS(Qi,"g")),this.instance.addSVGGroup(this),this.block.markDirtyGroup(this)}addSelfDrawable(e){this.selfDrawable=e,this.svgGroup.insertBefore(e.svgElement,this.children.length?this.children[0].svgGroup:null),this.hasSelfDrawable=!0}removeSelfDrawable(e){this.hasSelfDrawable=!1,this.svgGroup.removeChild(e.svgElement),this.selfDrawable=null}addChildGroup(e){this.markOrderDirty(),e.parent=this,this.children.push(e),this.svgGroup.appendChild(e.svgGroup)}removeChildGroup(e){this.markOrderDirty(),e.parent=null,this.children.splice(te.indexOf(this.children,e),1),this.svgGroup.removeChild(e.svgGroup)}markDirty(){this.dirty||(this.dirty=!0,this.block.markDirtyGroup(this))}markOrderDirty(){this.orderDirty||(this.orderDirty=!0,this.markDirty())}markTransformDirty(){this.transformDirty||(this.transformDirty=!0,this.markDirty())}onFilterChange(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}onVisibleChange(){this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}onClipChange(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}update(){if(!this.block)return;const e=this.svgGroup;if(this.dirty=!1,this.transformDirty&&(this.transformDirty=!1,this.willApplyTransforms?this.node.transform.isIdentity()?this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform")):(this.hasTransform=!0,e.setAttribute("transform",this.node.transform.getMatrix().getSVGTransform())):this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform"))),this.visibilityDirty&&(this.visibilityDirty=!1,e.style.display=this.node.isVisible()?"":"none"),this.filterDirty){this.filterDirty=!1;const t=this.node.effectiveOpacity;this.willApplyFilters&&t!==1?(this.hasOpacity=!0,e.setAttribute("opacity",t)):this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity"));const i=this.willApplyFilters&&this.node._filters.length,s=`filter-${this.id}`;if(i){for(this.filterElement||(this.filterElement=document.createElementNS(Qi,"filter"),this.filterElement.setAttribute("id",s));this.filterElement.firstChild;)this.filterElement.removeChild(this.filterElement.lastChild);let r=50,o="SourceGraphic";const c=this.node._filters.length;for(let A=0;A<c;A++){const C=this.node._filters[A],D=A===c-1?void 0:`e${A}`;C.applySVGFilter(this.filterElement,o,D),r+=C.filterRegionPercentageIncrease,o=D}const p=`-${Ii(r)}%`,g=`${Ii(2*r+100)}%`;this.filterElement.setAttribute("x",p),this.filterElement.setAttribute("y",p),this.filterElement.setAttribute("width",g),this.filterElement.setAttribute("height",g)}i&&(this.hasFilter||this.block.defs.appendChild(this.filterElement),e.setAttribute("filter",`url(#${s})`),this.hasFilter=!0),this.hasFilter&&!i&&(e.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement))}if(this.clipDirty)if(this.clipDirty=!1,this.node.clipArea){if(!this.clipDefinition){const t=`clip${Uk++}`;this.clipDefinition=document.createElementNS(Qi,"clipPath"),this.clipDefinition.setAttribute("id",t),this.clipDefinition.setAttribute("clipPathUnits","userSpaceOnUse"),this.block.defs.appendChild(this.clipDefinition),this.clipPath=document.createElementNS(Qi,"path"),this.clipDefinition.appendChild(this.clipPath),e.setAttribute("clip-path",`url(#${t})`)}this.clipPath.setAttribute("d",this.node.clipArea.getSVGPath())}else this.clipDefinition&&(e.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null);if(this.orderDirty){this.orderDirty=!1;let t=this.children.length-1;const i=this.instance.children;for(let s=i.length-1;s>=0;s--){const r=i[s].lookupSVGGroup(this.block);if(r){if(this.children[t]!==r){e.insertBefore(r.svgGroup,t+1>=this.children.length?null:this.children[t+1].svgGroup);const o=te.indexOf(this.children,r);this.children.splice(o,1),this.children.splice(t,0,r)}t--}}}}isReleasable(){return!this.hasSelfDrawable&&!this.children.length&&this.parent}dispose(){this.hasFilter&&(this.svgGroup.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement)),this.willApplyTransforms&&this.node.transformEmitter.removeListener(this.transformDirtyListener),this.node.visibleProperty.unlink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.removeListener(this.filterChangeListener),this.node.clipAreaProperty.unlink(this.clipDirtyListener),this.node.childrenChangedEmitter.removeListener(this.orderDirtyListener),this.instance.active&&this.instance.removeSVGGroup(this),this.clipDefinition&&(this.svgGroup.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null),this.parent=null,this.block=null,this.instance=null,this.node=null,$t(this.children),this.selfDrawable=null,this.freeToPool()}toString(){return`SVGGroup:${this.block.toString()}_${this.instance.toString()}`}static addDrawable(e,t){Ba.ensureGroupsToInstance(e,t.instance).addSelfDrawable(t)}static removeDrawable(e,t){t.instance.lookupSVGGroup(e).removeSelfDrawable(t),Ba.releaseGroupsToInstance(e,t.instance)}static ensureGroupsToInstance(e,t){let i=t.lookupSVGGroup(e);if(!i){const s=Ba.ensureGroupsToInstance(e,t.parent);i=Ba.createFromPool(e,t,s),s.addChildGroup(i)}return i}static releaseGroupsToInstance(e,t){const i=t.lookupSVGGroup(e);if(i.isReleasable()){const s=i.parent;s.removeChildGroup(i),Ba.releaseGroupsToInstance(e,s.instance),i.dispose()}}}es.mixInto(Ba);class Cv extends Cs{constructor(e,t,i,s){super(),this.initialize(e,t,i,s)}initialize(e,t,i,s){super.initialize(e,t,i,Cs.COMMON_ANCESTOR),this.filterRootInstance=s,this.dirtyGradients=$t(this.dirtyGradients),this.dirtyGroups=$t(this.dirtyGroups),this.dirtyDrawables=$t(this.dirtyDrawables),this.paintCountMap=this.paintCountMap||new Hk(this.onAddPaint.bind(this),this.onRemovePaint.bind(this)),this.areReferencesReduced=!0,this.domElement||(this.svg=document.createElementNS(Qi,"svg"),this.svg.style.pointerEvents="none",this.svg.style.position="absolute",this.svg.style.left="0",this.svg.style.top="0",this.svg.setAttribute("focusable",!1),this.defs=document.createElementNS(Qi,"defs"),this.svg.appendChild(this.defs),this.baseTransformGroup=document.createElementNS(Qi,"g"),this.svg.appendChild(this.baseTransformGroup),this.domElement=this.svg),this.forceRefreshListener=()=>{if(!this.workaroundRect){const g=document.createElementNS(Qi,"g");this.svg.appendChild(g),this.workaroundRect=document.createElementNS(Qi,"rect"),this.workaroundRect.setAttribute("width","0"),this.workaroundRect.setAttribute("height","0"),this.workaroundRect.setAttribute("fill","none"),g.appendChild(this.workaroundRect)}const o=cl.nextIntBetween(0,255),c=cl.nextIntBetween(0,255),p=cl.nextIntBetween(0,255);this.workaroundRect.setAttribute("fill",`rgba(${o},${c},${p},0.02)`)},this.display._refreshSVGEmitter.addListener(this.forceRefreshListener),Pi.prepareForTransform(this.svg),Pi.unsetTransform(this.svg),this.baseTransformGroup.setAttribute("transform","");const r=i.trail.nodes.length>s.trail.nodes.length?s:i;return this.rootGroup=Ba.createFromPool(this,r,null),this.baseTransformGroup.appendChild(this.rootGroup.svgGroup),this}onAddPaint(e){const t=e.createSVGPaint(this);return t.definition.setAttribute("id",`${e.id}-${this.id}`),this.defs.appendChild(t.definition),t}onRemovePaint(e,t){this.defs.removeChild(t.definition),t.dispose()}incrementPaint(e){this.paintCountMap.increment(e)}decrementPaint(e){this.paintCountMap.decrement(e)}markDirtyGradient(e){this.dirtyGradients.push(e),this.markDirty()}markDirtyGroup(e){this.dirtyGroups.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}setSizeFullDisplay(){this.baseTransformGroup.removeAttribute("transform"),Pi.unsetTransform(this.svg);const e=this.display.getSize();this.svg.setAttribute("width",e.width),this.svg.setAttribute("height",e.height)}setSizeFitBounds(){const e=this.fitBounds.minX,t=this.fitBounds.minY;this.baseTransformGroup.setAttribute("transform",`translate(${-e},${-t})`),Pi.setTransform(`matrix(1,0,0,1,${e},${t})`,this.svg),this.svg.setAttribute("width",this.fitBounds.width),this.svg.setAttribute("height",this.fitBounds.height)}update(){if(!super.update())return!1;for(;this.dirtyGroups.length;){const e=this.dirtyGroups.pop();e.block===this&&e.update()}for(;this.dirtyGradients.length;)this.dirtyGradients.pop().update();for(;this.dirtyDrawables.length;){const e=this.dirtyDrawables.pop();e.parentDrawable===this&&e.update()}return this.areReferencesReduced=!0,this.updateFit(),!0}reduceReferences(){if(this.areReferencesReduced)return;let e=0,t=0;for(;e<this.dirtyGroups.length;){const i=this.dirtyGroups[e];i.block===this&&(t!==e&&(this.dirtyGroups[t]=i),t++),e++}for(;this.dirtyGroups.length>t;)this.dirtyGroups.pop();for(e=0,t=0;e<this.dirtyDrawables.length;){const i=this.dirtyDrawables[e];i.parentDrawable===this&&(t!==e&&(this.dirtyDrawables[t]=i),t++),e++}for(;this.dirtyDrawables.length>t;)this.dirtyDrawables.pop();this.areReferencesReduced=!0}dispose(){for(this.svg.setAttribute("width","0"),this.svg.setAttribute("height","0"),this.filterRootInstance=null,$t(this.dirtyGradients),$t(this.dirtyGroups),$t(this.dirtyDrawables),this.paintCountMap.clear(),this.display._refreshSVGEmitter.removeListener(this.forceRefreshListener),this.baseTransformGroup.removeChild(this.rootGroup.svgGroup),this.rootGroup.dispose(),this.rootGroup=null;this.defs.childNodes.length;)this.defs.removeChild(this.defs.childNodes[0]);super.dispose()}addDrawable(e){super.addDrawable(e),Ba.addDrawable(this,e),e.updateSVGBlock(this)}removeDrawable(e){Ba.removeDrawable(this,e),super.removeDrawable(e)}onIntervalChange(e,t){super.onIntervalChange(e,t)}toString(){return`SVGBlock#${this.id}-${Cs.fitString[this.fit]}`}}es.mixInto(Cv);class Pv{constructor(e,t,i,s){const r=lt()({attributes:[],uniforms:[]},s);this.vertexSource=t,this.fragmentSource=i,this.attributeNames=r.attributes,this.uniformNames=r.uniforms,this.initialize(e)}initialize(e){this.gl=e,this.used=!1,this.program=this.gl.createProgram(),this.vertexShader=Pi.createShader(this.gl,this.vertexSource,this.gl.VERTEX_SHADER),this.fragmentShader=Pi.createShader(this.gl,this.fragmentSource,this.gl.FRAGMENT_SHADER),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||(console.log("GLSL link error:"),console.log(this.gl.getProgramInfoLog(this.program)),console.log("for vertex shader"),console.log(this.vertexSource),console.log("for fragment shader"),console.log(this.fragmentSource)),this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),this.uniformLocations={},this.attributeLocations={},this.activeAttributes={},te.each(this.attributeNames,t=>{this.attributeLocations[t]=this.gl.getAttribLocation(this.program,t),this.activeAttributes[t]=!0}),te.each(this.uniformNames,t=>{this.uniformLocations[t]=this.gl.getUniformLocation(this.program,t)}),this.isInitialized=!0}use(){this.used||(this.used=!0,this.gl.useProgram(this.program),te.each(this.attributeNames,e=>{this.activeAttributes[e]&&this.enableVertexAttribArray(e)}))}activateAttribute(e){this.activeAttributes[e]||(this.activeAttributes[e]=!0,this.used&&this.enableVertexAttribArray(e))}enableVertexAttribArray(e){this.gl.enableVertexAttribArray(this.attributeLocations[e])}unuse(){this.used&&(this.used=!1,te.each(this.attributeNames,e=>{this.activeAttributes[e]&&this.disableVertexAttribArray(e)}))}disableVertexAttribArray(e){this.gl.disableVertexAttribArray(this.attributeLocations[e])}deactivateAttribute(e){this.activeAttributes[e]&&(this.activeAttributes[e]=!1,this.used&&this.disableVertexAttribArray(e))}dispose(){this.gl.deleteProgram(this.program)}}const zm=new ps(1024,1024),_h=1,kd=1;class dc{constructor(e){this.useMipmaps=e,this.gl=null,this.texture=null,this.bounds=new Je(0,0,zm.width,zm.height),this.width=this.bounds.width,this.height=this.bounds.height,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.binPacker=new V1(this.bounds),this.dirty=!0,this.usedSprites=[],this.unusedSprites=[]}initializeContext(e){this.gl=e,this.createTexture()}createTexture(){const e=this.gl;this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.useMipmaps?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null),this.dirty=!1}updateTexture(){if(this.dirty){this.dirty=!1;const e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null)}}addImage(e,t,i){let s;for(s=0;s<this.usedSprites.length;s++){const o=this.usedSprites[s];if(o.image===e)return o.count++,o}for(s=0;s<this.unusedSprites.length;s++){const o=this.unusedSprites[s];if(o.image===e)return o.count++,this.unusedSprites.splice(s,1),this.usedSprites.push(o),o}let r;for(;!(r=this.binPacker.allocate(t+2*_h+kd,i+2*_h+kd))&&this.unusedSprites.length;){const o=this.unusedSprites.shift();this.dirty=!0;const c=o.bin.bounds;this.context.clearRect(c.x,c.y,c.width,c.height),this.binPacker.deallocate(o.bin)}if(r){const o=new Je((r.bounds.minX+_h)/this.width,(r.bounds.minY+_h)/this.height,(r.bounds.maxX-_h-kd)/this.width,(r.bounds.maxY-_h-kd)/this.height),c=new Ev(this,r,o,e,1);return this.copyImageWithGutter(e,t,i,r.bounds.x,r.bounds.y),this.dirty=!0,this.usedSprites.push(c),c}else return null}removeImage(e){let t,i;for(i=0;i<this.usedSprites.length;i++)if(this.usedSprites[i].image===e){t=this.usedSprites[i];break}--t.count<=0&&(this.usedSprites.splice(i,1),this.unusedSprites.push(t))}containsImage(e){let t;for(t=0;t<this.usedSprites.length;t++)if(this.usedSprites[t].image===e)return!0;for(t=0;t<this.unusedSprites.length;t++)if(this.unusedSprites[t].image===e)return!0;return!1}copyImageWithGutter(e,t,i,s,r){this.copyImageRegion(e,1,1,0,0,s,r),this.copyImageRegion(e,1,1,t-1,0,s+1+t,r),this.copyImageRegion(e,1,1,t-1,i-1,s+1+t,r+1+i),this.copyImageRegion(e,1,1,0,i-1,s,r+1+i),this.copyImageRegion(e,t,1,0,0,s+1,r),this.copyImageRegion(e,t,1,0,i-1,s+1,r+1+i),this.copyImageRegion(e,1,i,0,0,s,r+1),this.copyImageRegion(e,1,i,t-1,0,s+1+t,r+1),this.context.drawImage(e,s+1,r+1)}copyImageRegion(e,t,i,s,r,o,c){this.context.drawImage(e,s,r,t,i,o,c,t,i)}}dc.MAX_DIMENSION=zm;class Ev{constructor(e,t,i,s,r){this.spriteSheet=e,this.bin=t,this.uvBounds=i,this.image=s,this.count=r}}dc.Sprite=Ev;class G0 extends Cs{constructor(e,t,i,s){super(),this.initialize(e,t,i,s)}initialize(e,t,i,s){return super.initialize(e,t,i,Cs.FULL_DISPLAY),this.filterRootInstance=s,this.preserveDrawingBuffer=e._preserveDrawingBuffer,this.dirtyDrawables=$t(this.dirtyDrawables),this.spriteSheets=this.spriteSheets||[],this.projectionMatrix=this.projectionMatrix||new nt,this.projectionMatrixArray=new Float32Array(9),this.customProcessor=this.customProcessor||new Yk,this.vertexColorPolygonsProcessor=this.vertexColorPolygonsProcessor||new Gk(this.projectionMatrixArray),this.texturedTrianglesProcessor=this.texturedTrianglesProcessor||new Wk(this.projectionMatrixArray),this.glChangedEmitter=new Ai,this.isContextLost=!1,this.contextLostListener=this.onContextLoss.bind(this),this.contextRestoreListener=this.onContextRestoration.bind(this),this.domElement||(this.domElement=document.createElement("div"),this.domElement.className="webgl-container",this.domElement.style.position="absolute",this.domElement.style.left="0",this.domElement.style.top="0",this.rebuildCanvas()),this.gl.clear(this.gl.COLOR_BUFFER_BIT),Pi.prepareForTransform(this.canvas),Pi.unsetTransform(this.canvas),this}rebuildCanvas(){const e=document.createElement("canvas"),t=this.getContextFromCanvas(e);t&&(this.canvas&&(this.domElement.removeChild(this.canvas),this.canvas.removeEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoreListener,!1)),this.canvas=e,this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id=`scenery-webgl${this.id}`,this.canvas.addEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoreListener,!1),this.domElement.appendChild(this.canvas),this.setupContext(t))}setupContext(e){this.isContextLost=!1,this.gl=e,this.backingScale=Pi.backingScale(this.gl),this.display._allowBackingScaleAntialiasing&&e.getParameter(e.SAMPLES)===0&&(this.backingScale*=2),this.originalBackingScale=this.backingScale,Pi.applyWebGLContextDefaults(this.gl),this.markDirty(),this.dirtyFit=!0,this.customProcessor.initializeContext(this.gl),this.vertexColorPolygonsProcessor.initializeContext(this.gl),this.texturedTrianglesProcessor.initializeContext(this.gl);for(let t=0;t<this.spriteSheets.length;t++)this.spriteSheets[t].initializeContext(this.gl);this.glChangedEmitter.emit()}delayedRebuildCanvas(){const e=this;self.setTimeout(function(){e.rebuildCanvas()})}onContextLoss(e){this.isContextLost||(this.isContextLost=!0,e.preventDefault(),this.canvas.style.display="none",this.markDirty())}onContextRestoration(e){if(this.isContextLost){const t=this.getContextFromCanvas(this.canvas);this.setupContext(t),this.canvas.style.display=""}}getContextFromCanvas(e){const t={antialias:!0,preserveDrawingBuffer:this.preserveDrawingBuffer};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)}setSizeFullDisplay(){const e=this.display.getSize();this.canvas.width=Math.ceil(e.width*this.backingScale),this.canvas.height=Math.ceil(e.height*this.backingScale),this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`}setSizeFitBounds(){throw new Error("setSizeFitBounds unimplemented for WebGLBlock")}update(){if(!super.update())return!1;const e=this.gl;for(this.isContextLost&&this.display._aggressiveContextRecreation&&this.delayedRebuildCanvas();this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();const t=this.spriteSheets.length;for(let r=0;r<t;r++)this.spriteSheets[r].updateTexture();this.firstDrawable&&this.firstDrawable===this.lastDrawable&&this.firstDrawable.node&&this.firstDrawable.node._webglScale!==null&&this.backingScale!==this.originalBackingScale*this.firstDrawable.node._webglScale&&(this.backingScale=this.originalBackingScale*this.firstDrawable.node._webglScale,this.dirtyFit=!0),this.updateFit(),this.projectionMatrix.rowMajor(2/this.display.width,0,-1,0,-2/this.display.height,1,0,0,1),this.projectionMatrix.copyToArray(this.projectionMatrixArray),this.preserveDrawingBuffer&&e.clear(e.COLOR_BUFFER_BIT),e.viewport(0,0,this.canvas.width,this.canvas.height);let i=null,s=0;for(let r=this.firstDrawable;r!==null;r=r.nextDrawable){if(r.visible){let o=null;r.webglRenderer===Se.webglTexturedTriangles?o=this.texturedTrianglesProcessor:r.webglRenderer===Se.webglCustom?o=this.customProcessor:r.webglRenderer===Se.webglVertexColorPolygons&&(o=this.vertexColorPolygonsProcessor),o!==i&&(i&&(s+=i.deactivate()),i=o,i.activate()),i.processDrawable(r)}if(r===this.lastDrawable)break}return i&&(s+=i.deactivate()),s===0&&!this.preserveDrawingBuffer&&e.clear(e.COLOR_BUFFER_BIT),e.flush(),!0}dispose(){$t(this.dirtyDrawables),super.dispose()}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}addDrawable(e){super.addDrawable(e),e.onAddToBlock(this)}removeDrawable(e){let t=0;for(;(t=this.dirtyDrawables.indexOf(e,t))>=0;)this.dirtyDrawables.splice(t,1);e.onRemoveFromBlock(this),super.removeDrawable(e)}addSpriteSheetImage(e,t,i){let s=null;const r=this.spriteSheets.length;for(let o=0;o<r&&(s=this.spriteSheets[o].addImage(e,t,i),!s);o++);if(!s){const o=new dc(!0);if(s=o.addImage(e,t,i),o.initializeContext(this.gl),this.spriteSheets.push(o),!s)throw new Error("Attempt to load image that is too large for sprite sheets")}return s}removeSpriteSheetImage(e){e.spriteSheet.removeImage(e.image)}onIntervalChange(e,t){super.onIntervalChange(e,t),this.markDirty()}onPotentiallyMovedDrawable(e){this.markDirty()}toString(){return`WebGLBlock#${this.id}-${Cs.fitString[this.fit]}`}}class W0{activate(){}initializeContext(e){}processDrawable(e){}deactivate(){}}class Yk extends W0{constructor(){super(),this.drawable=null}activate(){this.drawCount=0}processDrawable(e){this.drawable=e,this.draw()}deactivate(){return this.drawCount}draw(){if(this.drawable){const e=this.drawable.draw();this.drawCount+=e,this.drawable=null}}}class Gk extends W0{constructor(e){super(),this.projectionMatrixArray=e,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)}initializeContext(e){this.gl=e,this.shaderProgram=new Pv(e,["attribute vec2 aVertex;","attribute vec4 aColor;","varying vec4 vColor;","uniform mat3 uProjectionMatrix;","void main() {","  vColor = aColor;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join(`
`),["precision mediump float;","varying vec4 vColor;","void main() {","  gl_FragColor = vec4( vColor.rgb * vColor.a, vColor.a );","}"].join(`
`),{attributes:["aVertex","aColor"],uniforms:["uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}activate(){this.shaderProgram.use(),this.vertexArrayIndex=0,this.drawCount=0}processDrawable(e){if(e.includeVertices){const t=e.vertexArray;for(;t.length+this.vertexArrayIndex>this.vertexArray.length;){const i=new Float32Array(this.vertexArray.length*2);i.set(this.vertexArray),this.vertexArray=i}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length,this.drawCount++}}deactivate(){return this.drawCount&&this.draw(),this.shaderProgram.unuse(),this.drawCount}draw(){const e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const t=Float32Array.BYTES_PER_ELEMENT,i=6*t;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,i,0*t),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aColor,4,e.FLOAT,!1,i,2*t),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/6),this.vertexArrayIndex=0}}class Wk extends W0{constructor(e){super(),this.projectionMatrixArray=e,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)}initializeContext(e){this.gl=e,this.shaderProgram=new Pv(e,["attribute vec2 aVertex;","attribute vec2 aTextureCoord;","attribute float aAlpha;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform mat3 uProjectionMatrix;","void main() {","  vTextureCoord = aTextureCoord;","  vAlpha = aAlpha;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join(`
`),["precision mediump float;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform sampler2D uTexture;","void main() {","  vec4 color = texture2D( uTexture, vTextureCoord, -0.7 );","  color.a *= vAlpha;","  gl_FragColor = color;","}"].join(`
`),{attributes:["aVertex","aTextureCoord","aAlpha"],uniforms:["uTexture","uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}activate(){this.shaderProgram.use(),this.currentSpriteSheet=null,this.vertexArrayIndex=0,this.drawCount=0}processDrawable(e){if(!e.sprite)return;this.currentSpriteSheet&&e.sprite.spriteSheet!==this.currentSpriteSheet&&this.draw(),this.currentSpriteSheet=e.sprite.spriteSheet;const t=e.vertexArray;for(;t.length+this.vertexArrayIndex>this.vertexArray.length;){const i=new Float32Array(this.vertexArray.length*2);i.set(this.vertexArray),this.vertexArray=i}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length}deactivate(){return this.currentSpriteSheet&&this.draw(),this.shaderProgram.unuse(),this.drawCount}draw(){const e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const t=5,i=Float32Array.BYTES_PER_ELEMENT,s=t*i;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,s,0*i),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aTextureCoord,2,e.FLOAT,!1,s,2*i),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aAlpha,1,e.FLOAT,!1,s,4*i),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.currentSpriteSheet.texture),e.uniform1i(this.shaderProgram.uniformLocations.uTexture,0),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/t),e.bindTexture(e.TEXTURE_2D,null),this.drawCount++,this.currentSpriteSheet=null,this.vertexArrayIndex=0}}es.mixInto(G0);class Xk{initialize(e,t,i,s,r,o,c){this.backbone=e,this.firstDrawable=t,this.lastDrawable=i,this.touchedBlocks=$t(this.touchedBlocks)}clean(){this.backbone=null,this.firstDrawable=null,this.lastDrawable=null}recordBackboneBoundaries(){this.backbone.previousFirstDrawable=this.firstDrawable,this.backbone.previousLastDrawable=this.lastDrawable}notePendingAddition(e,t){e.notePendingAddition(this.backbone.display,t,this.backbone)}notePendingMove(e,t){e.notePendingMove(this.backbone.display,t)}notePendingRemoval(e){e.notePendingRemoval(this.backbone.display)}markBlockForDisposal(e){e.domElement.parentNode===this.backbone.domElement&&this.backbone.domElement.removeChild(e.domElement),e.markForDisposal(this.backbone.display)}removeAllBlocks(){for(;this.backbone.blocks.length;){const e=this.backbone.blocks[0];this.removeBlock(e),this.markBlockForDisposal(e)}}notifyInterval(e,t,i){e.notifyInterval(t,i),this.backbone.markDirtyDrawable(e)}markBeforeBlock(e,t){e.pendingFirstDrawable=t,this.touchedBlocks.push(e)}markAfterBlock(e,t){e.pendingLastDrawable=t,this.touchedBlocks.push(e)}updateBlockIntervals(){for(;this.touchedBlocks.length;){const e=this.touchedBlocks.pop();e.used&&(e.updateInterval(),this.backbone.markDirtyDrawable(e))}}createBlock(e,t){const i=this.backbone;let s;if(Se.isCanvas(e))s=Jf.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else if(Se.isSVG(e))s=Cv.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else if(Se.isDOM(e))s=Y0.createFromPool(i.display,t);else if(Se.isWebGL(e))s=G0.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else throw new Error(`unsupported renderer for createBlock: ${e}`);return s.setBlockBackbone(i),i.domElement.appendChild(s.domElement),i.isDisplayRoot&&s.domElement.setAttribute("aria-hidden",!0),i.markDirtyDrawable(s),s}appendBlock(e){this.backbone.blocks.push(e)}removeBlock(e){const t=te.indexOf(this.backbone.blocks,e);this.backbone.blocks.splice(t,1)}useNoBlocks(){$t(this.backbone.blocks)}reindex(){this.backbone.reindexBlocks()}auditStitch(){}static debugIntervals(e){}static debugDrawables(e,t,i,s,r){}}function sf(n,e){return n.renderer!==e.renderer||Se.isDOM(n.renderer)||Se.isDOM(e.renderer)}function Jg(n){return n.previousDrawable!==null&&!sf(n.previousDrawable,n)}function $g(n){return n.nextDrawable!==null&&!sf(n,n.nextDrawable)}function jk(n,e,t){return n.drawableBefore?n.drawableBefore.nextDrawable!==n.drawableAfter:n.drawableAfter?n.drawableAfter.previousDrawable!==n.drawableBefore:e!==null}function Qk(n,e,t){return n.drawableBefore?n.drawableBefore.oldNextDrawable!==n.drawableAfter:n.drawableAfter?n.drawableAfter.oldPreviousDrawable!==n.drawableBefore:e!==null}function Zk(n,e,t){const i=n.drawableBefore?n.drawableBefore.parentDrawable:null,s=n.drawableAfter?n.drawableAfter.parentDrawable:null;return i&&s&&i===s?!1:i?i.nextBlock!==s:s?s.previousBlock!==i:e!==null}function Jk(n){const e=n.drawableAfter;if(e){const t=e.renderer,i=n.nextChangeInterval?n.nextChangeInterval.drawableBefore.nextDrawable:null;let s=e;for(;;){const r=s.nextDrawable;if(r!==i&&r.renderer===t)s=r;else break}return s}else return null}class $k extends Xk{stitch(e,t,i,s,r,o,c){this.initialize(e,t,i,s,r,o,c),this.blockOrderChanged=!1,this.reusableBlocks=$t(this.reusableBlocks),this.blockWasAdded=!1;let p;if(this.recordBackboneBoundaries(),e.blocks.length){const g=e.blocks[0];for(e.blocks[e.blocks.length-1],p=o;p!==null;p=p.nextChangeInterval){if(Qk(p,s)){const A=p.drawableBefore?p.drawableBefore.oldNextDrawable:s,C=p.drawableAfter?p.drawableAfter.oldPreviousDrawable:r;for(let D=A;this.notePendingRemoval(D),D!==C;D=D.oldNextDrawable);}if(Zk(p,g)){const A=p.drawableBefore===null?e.blocks[0]:p.drawableBefore.parentDrawable.nextBlock,C=p.drawableAfter===null?e.blocks[e.blocks.length-1]:p.drawableAfter.parentDrawable.previousBlock;for(let D=A;this.unuseBlock(D),D!==C;D=D.nextBlock);}}}if(t)for(p=o;p!==null;p=p.nextChangeInterval)this.processInterval(e,p,t,i);this.removeUnusedBlocks(),this.updateBlockIntervals(),t===null?this.useNoBlocks():this.blockOrderChanged&&(this.processBlockLinkedList(e,t.pendingParentDrawable,i.pendingParentDrawable),this.reindex()),this.clean(),$t(this.reusableBlocks)}processInterval(e,t,i,s){if(jk(t,i)){let r=t.drawableBefore?t.drawableBefore.nextDrawable:i,o=null,c=null,p=!0;for(;;){const g=r.nextDrawable,A=g===t.drawableAfter;if(o||(o=r),c===null&&r.parentDrawable&&!r.parentDrawable.used&&r.backbone===e&&r.parentDrawable.parentDrawable===e&&(c=r.parentDrawable),(A||sf(r,g))&&(p&&this.processEdgeCases(t,Jg(o),$g(r)),this.processSubBlock(t,o,r,c,p,A),o=null,c=null,p=!1),A)break;r=g}}else{if(t.drawableBefore&&t.drawableAfter){const r=!sf(t.drawableBefore,t.drawableAfter);this.processEdgeCases(t,r,r)}t.drawableBefore&&!$g(t.drawableBefore)?this.linkAfterDrawable(t.drawableBefore):t.drawableAfter&&!Jg(t.drawableAfter)&&this.linkBeforeDrawable(t.drawableAfter)}}processSubBlock(e,t,i,s,r,o){const c=Jg(t),p=$g(i);c&&(s=t.previousDrawable.pendingParentDrawable),p&&(s=i.nextDrawable.pendingParentDrawable),s=this.ensureUsedBlock(s,t);for(let g=t;this.notePendingAddition(g,s),g!==i;g=g.nextDrawable);c||this.linkBeforeDrawable(t),o&&!p&&this.linkAfterDrawable(i)}processEdgeCases(e,t,i){if(e.drawableBefore!==null&&e.drawableAfter!==null){const s=e.drawableBefore.pendingParentDrawable,r=e.drawableAfter.pendingParentDrawable,o=e.nextChangeInterval&&e.nextChangeInterval.drawableAfter?e.nextChangeInterval.drawableAfter.pendingParentDrawable:null;s===r&&(this.blockWasAdded=!0);let c;t&&i?c=s:this.blockWasAdded||s===r?(c=this.createBlock(e.drawableAfter.renderer,e.drawableAfter),this.blockOrderChanged=!0):c=r,r===c?this.blockWasAdded=!0:this.changeExternals(e,c),o!==r&&(this.blockWasAdded||this.unuseBlock(r),this.blockWasAdded=!1)}}changeExternals(e,t){const i=Jk(e);this.notePendingMoves(t,e.drawableAfter,i),(!e.nextChangeInterval||e.nextChangeInterval.drawableBefore!==i)&&this.linkAfterDrawable(i)}notePendingMoves(e,t,i){for(let s=t;this.notePendingMove(s,e),s!==i;s=s.nextDrawable);}ensureUsedBlock(e,t){return e?e.used||this.useBlock(e):e=this.getBlockForRenderer(t.renderer,t),e}getBlockForRenderer(e,t){let i;if(!Se.isDOM(e))for(let s=this.reusableBlocks.length-1;s>=0;s--){const r=this.reusableBlocks[s];if(r.renderer===e){this.useBlockAtIndex(r,s),i=r;break}}return i||(i=this.createBlock(e,t)),this.blockOrderChanged=!0,i}unuseBlock(e){e.used&&(e.used=!1,this.reusableBlocks.push(e))}useBlock(e){this.useBlockAtIndex(e,te.indexOf(this.reusableBlocks,e))}useBlockAtIndex(e,t){this.reusableBlocks.splice(t,1),e.used=!0}removeUnusedBlocks(){for(;this.reusableBlocks.length;){const e=this.reusableBlocks.pop();this.markBlockForDisposal(e),this.blockOrderChanged=!0}}linkBeforeDrawable(e){const t=e.previousDrawable;this.linkBlocks(t?t.pendingParentDrawable:null,e.pendingParentDrawable,t,e)}linkAfterDrawable(e){const t=e.nextDrawable;this.linkBlocks(e.pendingParentDrawable,t?t.pendingParentDrawable:null,e,t)}linkBlocks(e,t,i,s){e&&(e.nextBlock!==t&&(this.blockOrderChanged=!0,e.nextBlock&&(e.nextBlock.previousBlock=null),e.nextBlock=t),this.markAfterBlock(e,i)),t&&(t.previousBlock!==e&&(this.blockOrderChanged=!0,t.previousBlock&&(t.previousBlock.nextBlock=null),t.previousBlock=e),this.markBeforeBlock(t,s))}processBlockLinkedList(e,t,i){for(;e.blocks.length;)e.blocks.pop();if(t)for(let s=t;e.blocks.push(s),s!==i;s=s.nextBlock);}}class lo extends kr{constructor(e,t,i,s,r){super(),this.initialize(e,t,i,s,r)}initialize(e,t,i,s,r){if(super.initialize(s),this.display=e,this.backboneInstance=t,this.transformRootInstance=i,this.filterRootAncestorInstance=t.parent?t.parent.getFilterRootInstance():t,this.transformRootAncestorInstance=t.parent?t.parent.getTransformRootInstance():t,this.willApplyTransform=this.transformRootAncestorInstance!==this.transformRootInstance,this.willApplyFilters=this.filterRootAncestorInstance!==this.backboneInstance,this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.willApplyTransform&&(this.backboneInstance.relativeTransform.addListener(this.transformListener),this.backboneInstance.relativeTransform.addPrecompute()),this.backboneVisibilityListener=this.backboneVisibilityListener||this.updateBackboneVisibility.bind(this),this.backboneInstance.relativeVisibleEmitter.addListener(this.backboneVisibilityListener),this.updateBackboneVisibility(),this.visibilityDirty=!0,this.renderer=s,this.domElement=r?e.domElement:lo.createDivBackbone(),this.isDisplayRoot=r,this.dirtyDrawables=$t(this.dirtyDrawables),Pi.prepareForTransform(this.domElement),this.watchedFilterNodes=$t(this.watchedFilterNodes),this.filterDirty=!0,this.clipDirty=!0,this.filterDirtyListener=this.filterDirtyListener||this.onFilterDirty.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipDirty.bind(this),this.willApplyFilters)for(let o=this.backboneInstance;o!==this.filterRootAncestorInstance;o=o.parent){const c=o.node;this.watchedFilterNodes.push(c),c.filterChangeEmitter.addListener(this.filterDirtyListener),c.clipAreaProperty.lazyLink(this.clipDirtyListener)}this.lastZIndex=0,this.blocks=this.blocks||[],this.previousFirstDrawable=null,this.previousLastDrawable=null,this.removedDrawables=!1,this.stitcher=this.stitcher||new $k}dispose(){for(;this.watchedFilterNodes.length;){const e=this.watchedFilterNodes.pop();e.filterChangeEmitter.removeListener(this.filterDirtyListener),e.clipAreaProperty.unlink(this.clipDirtyListener)}if(this.backboneInstance.relativeVisibleEmitter.removeListener(this.backboneVisibilityListener),!this.removedDrawables)for(let e=this.previousFirstDrawable;e!==null&&(e.parentDrawable.removeDrawable(e),e!==this.previousLastDrawable);e=e.nextDrawable);this.markBlocksForDisposal(),this.willApplyTransform&&(this.backboneInstance.relativeTransform.removeListener(this.transformListener),this.backboneInstance.relativeTransform.removePrecompute()),this.backboneInstance=null,this.transformRootInstance=null,this.filterRootAncestorInstance=null,this.transformRootAncestorInstance=null,$t(this.dirtyDrawables),$t(this.watchedFilterNodes),this.previousFirstDrawable=null,this.previousLastDrawable=null,super.dispose()}markBlocksForDisposal(){for(;this.blocks.length;){const e=this.blocks.pop();e.domElement.parentNode===this.domElement&&this.domElement.removeChild(e.domElement),e.markForDisposal(this.display)}}updateBackboneVisibility(){this.visible=this.backboneInstance.relativeVisible,this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}markForDisposal(e){for(let t=this.previousFirstDrawable;t!==null&&(t.notePendingRemoval(this.display),t!==this.previousLastDrawable);t=t.oldNextDrawable);this.removedDrawables=!0,super.markForDisposal(e)}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}markTransformDirty(){Pi.applyPreparedTransform(this.backboneInstance.relativeTransform.matrix,this.domElement)}onFilterDirty(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}onClipDirty(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}update(){if(!super.update())return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();if(this.filterDirty){this.filterDirty=!1;let e="";const t=this.watchedFilterNodes.length;for(let i=0;i<t;i++){const s=this.watchedFilterNodes[i],r=s.getEffectiveOpacity();for(let o=0;o<s._filters.length;o++)e+=`${e?" ":""}${s._filters[o].getCSSFilterString()}`;r!==1&&(e+=`${e?" ":""}opacity(${Ii(r)})`)}this.domElement.style.filter=e}return this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.display=this.visible?"":"none"),this.clipDirty&&(this.clipDirty=!1),!0}getFilterVisibility(){const e=this.watchedFilterNodes.length;for(let t=0;t<e;t++)if(!this.watchedFilterNodes[t].isVisible())return!1;return!0}getFilterClip(){return""}reindexBlocks(){let e=0;for(let t=0;t<this.blocks.length;t++){const i=this.blocks[t];if(i.zIndex<=e){const s=t+1<this.blocks.length&&this.blocks[t+1].zIndex-1>e?Math.ceil((e+this.blocks[t+1].zIndex)/2):e+20;i.domElement.style.zIndex=i.zIndex=s}e=i.zIndex}this.lastZIndex=e+1}stitch(e,t,i,s){if(i===null||s===null)return;let r=null,o=i,c=!1;for(;o;)c=o.constrict()||c,o.isEmpty()?r&&(r.nextChangeInterval=o.nextChangeInterval):(r||(i=o),r=o),o=o.nextChangeInterval;r&&(s=r,s.nextChangeInterval=null,this.stitcher.stitch(this,e,t,this.previousFirstDrawable,this.previousLastDrawable,i,s))}audit(e,t,i){}static createRootDivBackbone(){const e=document.createElement("div");return e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0",e}static createDivBackbone(){const e=document.createElement("div");return e.style.position="relative",e.style.left="0",e.style.top="0",e}static repurposeBackboneContainer(e){return(e.style.position!=="relative"||e.style.position!=="absolute")&&(e.style.position="relative"),e.style.left="0",e.style.top="0",e}}es.mixInto(lo);const eB=[];class Dv extends zl{paintCanvas(e,t,i){if(!t.selfBounds.isEmpty()){const s=e.context;s.save(),s.fillStyle="black",s.strokeStyle="black",s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.lineDash=eB,s.lineDashOffset=0,s.miterLimit=10,t.paintCanvas(s),s.restore()}}}es.mixInto(Dv);const tB=["canvasBounds"];class Tv extends At{constructor(e){super(e),this.setRendererBitmask(Se.bitmaskCanvas)}setCanvasBounds(e){this.invalidateSelf(e)}set canvasBounds(e){this.setCanvasBounds(e)}get canvasBounds(){return this.getCanvasBounds()}getCanvasBounds(){return this.getSelfBounds()}isPainted(){return!0}invalidatePaint(){const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirty()}canvasPaintSelf(e,t){this.paintCanvas(e.context)}containsPointSelf(e){return!1}getSelfShape(){return new Tt}createCanvasDrawable(e,t){return Dv.createFromPool(e,t)}mutate(e){return super.mutate(e)}}Tv.prototype._mutatorKeys=tB.concat(At.prototype._mutatorKeys);class $f{constructor(e,t,i){this.display=e,this.rootNode=t;const s=document.createElementNS(Qi,"svg");s.style.position="absolute",s.setAttribute("class",i),s.style.top="0",s.style.left="0",s.style["pointer-events"]="none",this.svg=s;function r(o,c){s.setAttribute("width",""+o),s.setAttribute("height",""+c),s.style.clip=`rect(0px,${o}px,${c}px,0px)`}e.sizeProperty.link(o=>{r(o.width,o.height)}),this.domElement=s}addShape(e,t,i){const s=document.createElementNS(Qi,"path");let r=e.getSVGPath();r||(r="M0 0"),r?s.setAttribute("d",r):s.hasAttribute("d")&&s.removeAttribute("d"),s.setAttribute("style",`fill: none; stroke: ${t}; stroke-dasharray: 5, 3; stroke-dashoffset: ${i?5:0}; stroke-width: 3;`),this.svg.appendChild(s)}update(){for(;this.svg.childNodes.length;)this.svg.removeChild(this.svg.childNodes[this.svg.childNodes.length-1]);this.addShapes()}dispose(){}}class Dr{constructor(e,t){this.trail=e,this.setBefore(t)}isActive(){return!!this.trail}copy(){return new Dr(this.trail.copy(),this.isBefore)}setBefore(e){this.isBefore=e,this.isAfter=!e}getRenderSwappedPointer(){const e=this,t=this.isBefore?e.trail.previous():e.trail.next();return t===null?null:new Dr(t,!this.isBefore)}getRenderBeforePointer(){return this.isBefore?this:this.getRenderSwappedPointer()}getRenderAfterPointer(){return this.isAfter?this:this.getRenderSwappedPointer()}compareRender(e){const t=this.getRenderBeforePointer(),i=e.getRenderBeforePointer();return t!==null&&i!==null?t.trail.compare(i.trail):t===i?0:t===null?1:-1}compareNested(e){const t=this,i=e,s=t.trail.compare(i.trail);return s===0?this.isBefore===e.isBefore?0:this.isBefore?-1:1:t.trail.isExtensionOf(i.trail)?e.isBefore?1:-1:i.trail.isExtensionOf(t.trail)?this.isBefore?-1:1:s}equalsRender(e){return this.compareRender(e)===0}equalsNested(e){return this.compareNested(e)===0}hasTrail(){return!!this.trail}nestedForwards(){const e=this;if(this.isBefore){const t=e.trail.lastNode()._children;t.length>0?e.trail.addDescendant(t[0],0):this.setBefore(!1)}else{if(e.trail.indices.length===0)return this.trail=null,null;{const t=e.trail.indices[e.trail.indices.length-1];e.trail.removeDescendant();const i=e.trail.lastNode()._children;i.length>t+1&&(e.trail.addDescendant(i[t+1],t+1),this.setBefore(!0))}}return this}nestedBackwards(){const e=this;if(this.isBefore){if(e.trail.indices.length===0)return this.trail=null,null;{const t=e.trail.indices[e.trail.indices.length-1];e.trail.removeDescendant(),t-1>=0&&(e.trail.addDescendant(e.trail.lastNode()._children[t-1],t-1),this.setBefore(!1))}}else if(e.trail.lastNode()._children.length>0){const t=e.trail.lastNode()._children;e.trail.addDescendant(t[t.length-1],t.length-1)}else this.setBefore(!0);return this}eachNodeBetween(e,t){this.eachTrailBetween(e,i=>t(i.lastNode()))}eachTrailBetween(e,t){this.isBefore&&t(this.trail),this.depthFirstUntil(e,i=>i.isBefore?t(i.trail):!1,!0)}depthFirstUntil(e,t,i){const s=this,r=e;s.trail.reindex(),r.trail.reindex();const o=this.copy();o.trail.setMutable();let c=!0;for(;!o.equalsNested(e);){let p=!1;if(c?(i||(p=t(o)),c=!1):p=t(o),p&&o.isBefore){if(o.setBefore(!1),o.compareNested(e)===1)break}else o.nestedForwards()}i||t(o)}toString(){return`[${this.isBefore?"before":"after"} ${this.trail.toString().slice(1)}`}static compareNested(e,t,i,s){const r=e.compare(i);return r===0?t===s?0:t?-1:1:e.isExtensionOf(i)?s?1:-1:i.isExtensionOf(e)?t?-1:1:r}static eachTrailUnder(e,t){new Dr(e,!0).eachTrailBetween(new Dr(e,!1),t)}static eachPaintedTrailBetween(e,t,i,s,r){Dr.eachTrailBetween(e,t,o=>o.isPainted()?i(o):!1,s,r)}static eachTrailBetween(e,t,i,s,r){const o=e?new Dr(e.copy(),!0):new Dr(new bi(r),!0),c=t?new Dr(t.copy(),!0):new Dr(new bi(r),!1);s&&(o.nestedForwards(),c.nestedBackwards(),o.compareNested(c)===1)||o.depthFirstUntil(c,p=>p.isBefore?i(p.trail):!1,!1)}}class iB extends $f{constructor(e,t){super(e,t,"canvasNodeBoundsOverlay")}addShapes(){Dr.eachTrailUnder(new bi(this.rootNode),e=>{const t=e.lastNode();if(!t.isVisible())return!0;if(t instanceof Tv&&e.isVisible()){const i=e.getTransform();this.addShape(i.transformShape(Tt.bounds(t.selfBounds)),"rgba(0,255,0,0.8)",!0)}return!1})}}class Ic extends Wf{initialize(e,t){return super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.markTransformDirty(),this.visibilityDirty=!0,t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}markTransformDirty(){this.transformDirty=!0,this.markDirty()}getTransformMatrix(){return this.instance.relativeTransform.validate(),this.instance.relativeTransform.matrix}update(){return super.update()?(this.updateDOM(),this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.visibility=this.visible?"":"hidden"),this.cleanPaintableState&&this.cleanPaintableState(),!0):!1}updateDOM(){}updateSelfVisibility(){super.updateSelfVisibility(),this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}class Hm extends Ic{constructor(e,t){super(e,t),Pi.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement=this.node._container}updateDOM(){this.transformDirty&&!this.node._preventTransform&&Pi.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.transformDirty=!1}dispose(){super.dispose(),this.domElement=null}}es.mixInto(Hm);class sB extends $f{constructor(e,t){super(e,t,"canvasNodeBoundsOverlay")}addShapes(){const e=this;function t(r,o){r.willApplyTransform&&(o=o.timesMatrix(r.backboneInstance.relativeTransform.matrix)),r.blocks.forEach(c=>{i(c,o)})}function i(r,o){if(r instanceof Cs&&!r.fitBounds.isEmpty()&&e.addShape(Tt.bounds(r.fitBounds).transformed(o),"rgba(255,0,0,0.8)",!0),r.firstDrawable&&r.lastDrawable){for(let c=r.firstDrawable;c!==r.lastDrawable;c=c.nextDrawable)s(c,o);s(r.lastDrawable,o)}}function s(r,o){r instanceof lo&&t(r,o)}t(this.display.rootBackbone,nt.IDENTITY)}}const _2=rs(document,"exitFullscreen")||rs(document,"cancelFullScreen"),nB=rs(document,"fullscreenElement")||rs(document,"fullScreenElement"),rB=rs(document,"fullscreenEnabled")||rs(document,"fullScreenEnabled");let Km=ox(document,"fullscreenchange");Km==="msfullscreenchange"&&(Km="MSFullscreenChange");const kh={isFullScreen(){return!!document[nB]},isFullScreenEnabled(){return document[rB]&&!qs.safari7},enterFullScreen(n){const e=rs(document.body,"requestFullscreen")||rs(document.body,"requestFullScreen");n.domElement[e]&&n.domElement[e]()},exitFullScreen(){document[_2]&&document[_2]()},toggleFullScreen(n){kh.isFullScreen()?kh.exitFullScreen():kh.enterFullScreen(n)},isFullScreenProperty:new hi(!1)};document.addEventListener(Km,n=>{kh.isFullScreenProperty.set(kh.isFullScreen())});const Iv="rgba(255,255,0,0.5)";class xv extends tf{constructor(e,t){const i=lt()({innerStroke:null,outerStroke:null,fill:Iv},t);super(e,i)}}xv.ACTIVATED_HIGHLIGHT_COLOR=Iv;function em(n){return n instanceof At&&n._isReadingBlock}let A2=wi.OUTER_FOCUS_COLOR,b2=wi.INNER_FOCUS_COLOR,v2=wi.INNER_LIGHT_GROUP_FOCUS_COLOR,V2=wi.OUTER_LIGHT_GROUP_FOCUS_COLOR;class dr{constructor(e,t,i,s){this.trail=null,this.node=null,this.activeHighlight=null,this.mode=null,this.groupMode=null,this.groupHighlightNode=null,this.transformTracker=null,this.groupTransformTracker=null,this.nodeModeHighlight=null,this.nodeModeHighlightLayered=!1,this.transformDirty=!0,this.highlightNode=new At,this.readingBlockHighlightNode=new At,this.addedReadingBlockHighlight=null,this.activeReadingBlockNode=null,this.readingBlockTrail=null,this.readingBlockTransformDirty=!0,this.readingBlockTransformTracker=null;const r=lt()({pdomFocusHighlightsVisibleProperty:new di(!0),interactiveHighlightsVisibleProperty:new di(!1),readingBlockHighlightsVisibleProperty:new di(!1)},s);this.display=e,this.focusRootNode=t,this.focusRootNode.addChild(this.highlightNode),this.focusRootNode.addChild(this.readingBlockHighlightNode),this.pdomFocusHighlightsVisibleProperty=r.pdomFocusHighlightsVisibleProperty,this.interactiveHighlightsVisibleProperty=r.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty=r.readingBlockHighlightsVisibleProperty,this.focusDisplay=new i(this.focusRootNode,{allowWebGL:e.isWebGLAllowed(),allowCSSHacks:!1,accessibility:!1,interactive:!1,allowLayerFitting:!0}),this.domElement=this.focusDisplay.domElement,this.domElement.style.pointerEvents="none",this.shapeFocusHighlightPath=new wi(null),this.boundsFocusHighlightPath=new tf(null,{useLocalBounds:!0}),this.highlightNode.addChild(this.shapeFocusHighlightPath),this.highlightNode.addChild(this.boundsFocusHighlightPath),this.groupFocusHighlightPath=new tf(null,{useLocalBounds:!0,useGroupDilation:!0,outerLineWidth:wi.GROUP_OUTER_LINE_WIDTH,innerLineWidth:wi.GROUP_INNER_LINE_WIDTH,innerStroke:wi.OUTER_FOCUS_COLOR}),this.groupFocusHighlightParent=new At({children:[this.groupFocusHighlightPath]}),this.focusRootNode.addChild(this.groupFocusHighlightParent),this.readingBlockHighlightPath=new xv(null),this.readingBlockHighlightNode.addChild(this.readingBlockHighlightPath),this.boundsListener=this.onBoundsChange.bind(this),this.transformListener=this.onTransformChange.bind(this),this.domFocusListener=this.onFocusChange.bind(this),this.readingBlockTransformListener=this.onReadingBlockTransformChange.bind(this),this.focusHighlightListener=this.onFocusHighlightChange.bind(this),this.interactiveHighlightListener=this.onInteractiveHighlightChange.bind(this),this.focusHighlightsVisibleListener=this.onFocusHighlightsVisibleChange.bind(this),this.voicingHighlightsVisibleListener=this.onVoicingHighlightsVisibleChange.bind(this),this.pointerFocusListener=this.onPointerFocusChange.bind(this),this.lockedPointerFocusListener=this.onLockedPointerFocusChange.bind(this),this.readingBlockFocusListener=this.onReadingBlockFocusChange.bind(this),this.readingBlockHighlightChangeListener=this.onReadingBlockHighlightChange.bind(this),In.link(this.domFocusListener),e.focusManager.pointerFocusProperty.link(this.pointerFocusListener),e.focusManager.readingBlockFocusProperty.link(this.readingBlockFocusListener),e.focusManager.lockedPointerFocusProperty.link(this.lockedPointerFocusListener),this.pdomFocusHighlightsVisibleProperty.link(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.link(this.voicingHighlightsVisibleListener)}dispose(){this.hasHighlight()&&this.deactivateHighlight(),In.unlink(this.domFocusListener),this.pdomFocusHighlightsVisibleProperty.unlink(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.unlink(this.voicingHighlightsVisibleListener),this.display.focusManager.pointerFocusProperty.unlink(this.pointerFocusListener),this.display.focusManager.readingBlockFocusProperty.unlink(this.readingBlockFocusListener),this.focusDisplay.dispose()}hasHighlight(){return!!this.trail}hasReadingBlockHighlight(){return!!this.readingBlockTrail}activateHighlight(e,t,i,s,r){this.trail=e,this.node=t;const o=i;this.activeHighlight=o;let c=e;o==="invisible"?this.mode="invisible":o instanceof Tt?(this.mode="shape",this.shapeFocusHighlightPath.visible=!0,this.shapeFocusHighlightPath.setShape(o)):o instanceof At?(this.mode="node",o instanceof wi&&o.transformSourceNode&&(c=o.getUniqueHighlightTrail(this.trail)),this.nodeModeHighlight=o,s?(this.nodeModeHighlightLayered=!0,this.nodeModeHighlight.visible=r.get()):(this.nodeModeHighlight.visible=!0,this.highlightNode.addChild(this.nodeModeHighlight))):(this.mode="bounds",this.boundsFocusHighlightPath.setShapeFromNode(this.node,this.trail),this.boundsFocusHighlightPath.visible=!0,this.node.localBoundsProperty.lazyLink(this.boundsListener),this.onBoundsChange()),this.transformTracker=new bl(c,{isStatic:!0}),this.transformTracker.addListener(this.transformListener),this.activateGroupHighlights(),this.updateHighlightColors(),this.transformDirty=!0}activateFocusHighlight(e,t){this.activateHighlight(e,t,t.focusHighlight,t.focusHighlightLayerable,this.pdomFocusHighlightsVisibleProperty),t.focusHighlightChangedEmitter.addListener(this.focusHighlightListener)}activateInteractiveHighlight(e,t){this.activateHighlight(e,t,t.interactiveHighlight||t.focusHighlight,t.interactiveHighlightLayerable,this.interactiveHighlightsVisibleProperty),t.interactiveHighlightChangedEmitter.addListener(this.interactiveHighlightListener),t.focusHighlightChangedEmitter.addListener(this.interactiveHighlightListener)}activateReadingBlockHighlight(e){this.readingBlockTrail=e;const t=e.lastNode();if(em(t)){this.activeReadingBlockNode=t;const i=this.activeReadingBlockNode.readingBlockActiveHighlight;this.addedReadingBlockHighlight=i,i==="invisible"||(i instanceof Tt?(this.readingBlockHighlightPath.setShape(i),this.readingBlockHighlightPath.visible=!0):i instanceof At?this.readingBlockHighlightNode.addChild(i):(this.readingBlockHighlightPath.setShapeFromNode(this.activeReadingBlockNode,this.readingBlockTrail),this.readingBlockHighlightPath.visible=!0)),this.readingBlockTransformTracker=new bl(this.readingBlockTrail,{isStatic:!0}),this.readingBlockTransformTracker.addListener(this.readingBlockTransformListener),this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.addListener(this.readingBlockHighlightChangeListener),this.readingBlockTransformDirty=!0}}deactivateReadingBlockHighlight(){this.readingBlockHighlightPath.visible=!1,this.addedReadingBlockHighlight instanceof At&&this.readingBlockHighlightNode.removeChild(this.addedReadingBlockHighlight);const e=this.readingBlockTransformTracker;e.removeListener(this.readingBlockTransformListener),e.dispose(),this.readingBlockTransformTracker=null,this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.removeListener(this.readingBlockHighlightChangeListener),this.activeReadingBlockNode=null,this.readingBlockTrail=null,this.addedReadingBlockHighlight=null}deactivateHighlight(){const e=this.node;if(this.mode==="shape")this.shapeFocusHighlightPath.visible=!1;else if(this.mode==="node"){const t=this.nodeModeHighlight;this.nodeModeHighlightLayered?this.nodeModeHighlightLayered=!1:!t.isDisposed&&this.highlightNode.removeChild(t),t.isDisposed||(t.visible=!1),this.nodeModeHighlight=null}else this.mode==="bounds"&&(this.boundsFocusHighlightPath.visible=!1,e.localBoundsProperty.unlink(this.boundsListener));e.focusHighlightChangedEmitter.hasListener(this.focusHighlightListener)&&e.focusHighlightChangedEmitter.removeListener(this.focusHighlightListener),Ro(e)&&(e.interactiveHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&e.interactiveHighlightChangedEmitter.removeListener(this.interactiveHighlightListener),e.focusHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&e.focusHighlightChangedEmitter.removeListener(this.interactiveHighlightListener)),this.deactivateGroupHighlights(),this.trail=null,this.node=null,this.mode=null,this.activeHighlight=null,this.transformTracker.removeListener(this.transformListener),this.transformTracker.dispose(),this.transformTracker=null}activateGroupHighlights(){const e=this.trail;for(let t=0;t<e.length;t++){const i=e.nodes[t],s=i.groupFocusHighlight;if(s){const r=e.upToNode(i);this.groupTransformTracker=new bl(r),this.groupTransformTracker.addListener(this.transformListener),typeof s=="boolean"?(this.groupFocusHighlightPath.setShapeFromNode(i,r),this.groupFocusHighlightPath.visible=!0,this.groupHighlightNode=this.groupFocusHighlightPath,this.groupMode="bounds"):s instanceof At&&(this.groupHighlightNode=s,this.groupFocusHighlightParent.addChild(s),this.groupMode="node");break}}}updateHighlightColors(){this.mode==="shape"?(this.shapeFocusHighlightPath.innerHighlightColor!==dr.getInnerHighlightColor()&&this.shapeFocusHighlightPath.setInnerHighlightColor(dr.getInnerHighlightColor()),this.shapeFocusHighlightPath.outerHighlightColor!==dr.getOuterHighlightColor()&&this.shapeFocusHighlightPath.setOuterHighlightColor(dr.getOuterHighlightColor())):this.mode==="bounds"&&(this.boundsFocusHighlightPath.innerHighlightColor!==dr.getInnerHighlightColor()&&this.boundsFocusHighlightPath.setInnerHighlightColor(dr.getInnerHighlightColor()),this.boundsFocusHighlightPath.outerHighlightColor!==dr.getOuterHighlightColor()&&this.boundsFocusHighlightPath.setOuterHighlightColor(dr.getOuterHighlightColor())),this.groupMode&&(this.groupFocusHighlightPath.innerHighlightColor!==dr.getInnerGroupHighlightColor()&&this.groupFocusHighlightPath.setInnerHighlightColor(dr.getInnerGroupHighlightColor()),this.groupFocusHighlightPath.outerHighlightColor!==dr.getOuterGroupHighlightColor()&&this.groupFocusHighlightPath.setOuterHighlightColor(dr.getOuterGroupHighlightColor()))}deactivateGroupHighlights(){this.groupMode&&(this.groupMode==="bounds"?this.groupFocusHighlightPath.visible=!1:this.groupMode==="node"&&this.groupFocusHighlightParent.removeChild(this.groupHighlightNode),this.groupMode=null,this.groupHighlightNode=null,this.groupTransformTracker.removeListener(this.transformListener),this.groupTransformTracker.dispose(),this.groupTransformTracker=null)}afterTransform(){const e=this.transformTracker.getMatrix().timesMatrix(wi.getCorrectiveScalingMatrix());this.mode==="shape"?this.shapeFocusHighlightPath.updateLineWidth(e):this.mode==="bounds"?this.boundsFocusHighlightPath.updateLineWidth(e):this.mode==="node"&&this.activeHighlight instanceof wi&&this.activeHighlight.updateLineWidth&&this.activeHighlight.updateLineWidth(e),this.groupHighlightNode&&(this.groupMode==="bounds"?this.groupFocusHighlightPath.updateLineWidth(e):this.groupMode==="node"&&this.groupHighlightNode instanceof wi&&this.groupHighlightNode.updateLineWidth&&this.groupHighlightNode.updateLineWidth(e)),this.readingBlockTrail&&this.readingBlockHighlightPath.updateLineWidth(e)}onTransformChange(){this.transformDirty=!0}onReadingBlockTransformChange(){this.readingBlockTransformDirty=!0}onBoundsChange(){this.boundsFocusHighlightPath.setShapeFromNode(this.node,this.trail)}onFocusChange(e){const t=e&&e.display===this.display?e.trail:null;if(this.hasHighlight()&&this.deactivateHighlight(),t&&this.pdomFocusHighlightsVisibleProperty.value){const i=t.lastNode();this.activateFocusHighlight(t,i)}else this.display.focusManager.pointerFocusProperty.value&&this.interactiveHighlightsVisibleProperty.value&&this.updateInteractiveHighlight(this.display.focusManager.pointerFocusProperty.value)}onPointerFocusChange(e){!this.display.focusManager.lockedPointerFocusProperty.value&&!this.display.focusManager.pdomFocusHighlightsVisibleProperty.value&&this.updateInteractiveHighlight(e)}updateInteractiveHighlight(e){const t=e&&e.display===this.display?e.trail:null;this.hasHighlight()&&this.deactivateHighlight();let i=!1;if(t&&!this.display.focusManager.pdomFocusHighlightsVisibleProperty.value){const s=t.lastNode();(em(s)&&this.readingBlockHighlightsVisibleProperty.value||!em(s)&&Ro(s)&&this.interactiveHighlightsVisibleProperty.value)&&(this.activateInteractiveHighlight(t,s),i=!0)}!i&&Ui.pdomFocus&&this.pdomFocusHighlightsVisibleProperty.value&&this.onFocusChange(Ui.pdomFocus)}onLockedPointerFocusChange(e){this.updateInteractiveHighlight(e||this.display.focusManager.pointerFocusProperty.value)}onReadingBlockFocusChange(e){this.hasReadingBlockHighlight()&&this.deactivateReadingBlockHighlight();const t=e&&e.display===this.display?e.trail:null;t&&this.activateReadingBlockHighlight(t)}onFocusHighlightChange(){this.onFocusChange(Ui.pdomFocus)}onInteractiveHighlightChange(){this.updateInteractiveHighlight(this.display.focusManager.lockedPointerFocusProperty.value||this.display.focusManager.pointerFocusProperty.value)}onReadingBlockHighlightChange(){this.onReadingBlockFocusChange(this.display.focusManager.readingBlockFocusProperty.value)}onFocusHighlightsVisibleChange(){this.onFocusChange(Ui.pdomFocus)}onVoicingHighlightsVisibleChange(){this.onPointerFocusChange(this.display.focusManager.pointerFocusProperty.value)}update(){this.hasHighlight()&&this.transformDirty&&(this.transformDirty=!1,this.highlightNode.setMatrix(this.transformTracker.matrix),this.groupHighlightNode&&this.groupHighlightNode.setMatrix(this.groupTransformTracker.matrix),this.afterTransform()),this.hasReadingBlockHighlight()&&this.readingBlockTransformDirty&&(this.readingBlockTransformDirty=!1,this.readingBlockHighlightNode.setMatrix(this.readingBlockTransformTracker.matrix)),this.display.size.equals(this.focusDisplay.size)||this.focusDisplay.setWidthHeight(this.display.width,this.display.height),this.focusDisplay.updateDisplay()}static setInnerHighlightColor(e){b2=e}static getInnerHighlightColor(){return b2}static setOuterHilightColor(e){A2=e}static getOuterHighlightColor(){return A2}static setInnerGroupHighlightColor(e){v2=e}static getInnerGroupHighlightColor(){return v2}static setOuterGroupHighlightColor(e){V2=e}static getOuterGroupHighlightColor(){return V2}}class Ph extends $f{constructor(e,t){super(e,t,"hitAreaOverlay")}addShapes(){Dr.eachTrailUnder(new bi(this.rootNode),e=>{const t=e.lastNode();if(!t.isVisible()||t.pickable===!1)return!0;if(t.inputListeners.length&&e.isVisible()){const i=Ph.getLocalMouseShape(t),s=Ph.getLocalTouchShape(t),r=e.getMatrix();i.bounds.isEmpty()||this.addShape(i.transformed(r),"rgba(0,0,255,0.8)",!0),s.bounds.isEmpty()||this.addShape(s.transformed(r),"rgba(255,0,0,0.8)",!1)}return!1})}static getLocalMouseShape(e){let t=Tt.union([e.mouseArea?e.mouseArea instanceof Tt?e.mouseArea:Tt.bounds(e.mouseArea):e.getSelfShape(),...e.children.filter(i=>e.visible&&e.pickable!==!1).map(i=>Ph.getLocalMouseShape(i).transformed(i.matrix))]);return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}static getLocalTouchShape(e){let t=Tt.union([e.touchArea?e.touchArea instanceof Tt?e.touchArea:Tt.bounds(e.touchArea):e.getSelfShape(),...e.children.filter(i=>e.visible&&e.pickable!==!1).map(i=>Ph.getLocalTouchShape(i).transformed(i.matrix))]);return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}}class aB extends Dl{constructor(e,t,i){super(t,"pen"),this.id=e}move(e){const t=this.hasPointChanged(e);return this.point=e,t}toString(){return`Pen#${this.id}`}isTouchLike(){return!0}}class uo{constructor(e,t,i,s){this.handled=!1,this.aborted=!1,this.trail=e,this.type=t,this.pointer=i,this.context=s,this.domEvent=s.domEvent,this.activeElement=s.activeElement,this.currentTarget=null,this.target=e.lastNode(),this.isPrimary=i.type!=="mouse"||!this.domEvent||this.domEvent.button===0,i.lastEventContext=s}handle(){this.handled=!0}abort(){this.aborted=!0}isFromPDOM(){return this.pointer.type==="pdom"}canStartPress(){return!this.pointer.isAttached()&&(this.pointer.type!=="mouse"||this.domEvent.button===0)}}uo.SceneryEventIO=new Yt("SceneryEventIO",{valueType:uo,documentation:'An event, with a "point" field',toStateObject:n=>({type:n.type,domEventType:Zt(El).toStateObject(n.domEvent),point:n.pointer&&n.pointer.point?we.Vector2IO.toStateObject(n.pointer.point):null}),stateSchema:{type:Hi,domEventType:Zt(El),point:Zt(we.Vector2IO)}});class oB extends Dl{constructor(e,t,i){super(t,"touch"),this.id=e}move(e){const t=this.hasPointChanged(e);return this.point=e,t}toString(){return`Touch#${this.id}`}isTouchLike(){return!0}}const S2=Bo(Dl.PointerIO),lB=["focus","blur","focusin","focusout"],hB=80;class fc extends Gi{constructor(e,t,i,s,r,o,c,p){var A,C,D,P,F,K,M,U,$,re,pe,ce,T,Ce,ze,be,Be,xe,Qe,Fe,Ye,ut,Me,Lt;const g=lt()({phetioType:fc.InputIO,phetioDocumentation:"Central point for user input events, such as mouse, touch"},p);super(g),this.currentSceneryEvent=null,this.display=e,this.rootNode=e.rootNode,this.attachToWindow=t,this.batchDOMEvents=i,this.assumeFullWindow=s,this.passiveEvents=r,this.preventMultitouch=o,this.interruptMultitouch=c,this.batchedEvents=[],this.pdomPointer=null,this.mouse=null,this.pointers=[],this.pointerAddedEmitter=new Ai,this.currentlyFiringEvents=!1,this.upTimeStamp=0,this.validatePointersAction=new Ti(()=>{let at=this.pointers.length;for(;at--;){const Pe=this.pointers[at];Pe.point&&Pe!==this.pdomPointer&&this.branchChangeEvents(Pe,Pe.lastEventContext||Di.createSynthetic(),!1)}},{phetioPlayback:!0,tandem:(A=g.tandem)==null?void 0:A.createTandem("validatePointersAction"),phetioHighFrequency:!0}),this.mouseUpAction=new Ti((at,Pe)=>{const $e=this.ensureMouse(at,Pe);$e.id=null,this.upEvent($e,Pe,at)},{phetioPlayback:!0,tandem:(C=g.tandem)==null?void 0:C.createTandem("mouseUpAction"),parameters:[{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a mouse button is released."}),this.mouseDownAction=new Ti((at,Pe,$e)=>{this.interruptMultitouch&&this.interruptMultitouchPointers(Pe,$e);const gt=this.ensureMouse(Pe,$e);gt.id=at,this.downEvent(gt,$e,Pe)},{phetioPlayback:!0,tandem:(D=g.tandem)==null?void 0:D.createTandem("mouseDownAction"),parameters:[{name:"id",phetioType:Zt(yi)},{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a mouse button is pressed."}),this.mouseMoveAction=new Ti((at,Pe)=>{const $e=this.ensureMouse(at,Pe);$e.move(at),this.moveEvent($e,Pe)},{phetioPlayback:!0,tandem:(P=g.tandem)==null?void 0:P.createTandem("mouseMoveAction"),parameters:[{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the mouse is moved.",phetioHighFrequency:!0}),this.mouseOverAction=new Ti((at,Pe)=>{this.ensureMouse(at,Pe).over(at)},{phetioPlayback:!0,tandem:(F=g.tandem)==null?void 0:F.createTandem("mouseOverAction"),parameters:[{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the mouse is moved while on the sim."}),this.mouseOutAction=new Ti((at,Pe)=>{this.ensureMouse(at,Pe).out(at)},{phetioPlayback:!0,tandem:(K=g.tandem)==null?void 0:K.createTandem("mouseOutAction"),parameters:[{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the mouse moves out of the display."}),this.wheelScrollAction=new Ti(at=>{const Pe=at.domEvent,$e=this.ensureMouse(this.pointFromEvent(Pe),at);if($e.wheel(Pe),$e.point){const gt=this.rootNode.trailUnderPointer($e)||new bi(this.rootNode);this.dispatchEvent(gt,"wheel",$e,at,!0)}},{phetioPlayback:!0,tandem:(M=g.tandem)==null?void 0:M.createTandem("wheelScrollAction"),parameters:[{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the mouse wheel scrolls.",phetioHighFrequency:!0}),this.touchStartAction=new Ti((at,Pe,$e)=>{const gt=new oB(at,Pe,$e.domEvent);this.addPointer(gt,Pe,$e),this.downEvent(gt,$e,Pe)},{phetioPlayback:!0,tandem:(U=g.tandem)==null?void 0:U.createTandem("touchStartAction"),parameters:[{name:"id",phetioType:yi},{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a touch begins."}),this.touchEndAction=new Ti((at,Pe,$e)=>{const gt=this.findPointerById(at);gt&&(this.upEvent(gt,$e,Pe),this.removePointer(gt))},{phetioPlayback:!0,tandem:($=g.tandem)==null?void 0:$.createTandem("touchEndAction"),parameters:[{name:"id",phetioType:yi},{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a touch ends."}),this.touchMoveAction=new Ti((at,Pe,$e)=>{const gt=this.findPointerById(at);gt&&(gt.move(Pe),this.moveEvent(gt,$e))},{phetioPlayback:!0,tandem:(re=g.tandem)==null?void 0:re.createTandem("touchMoveAction"),parameters:[{name:"id",phetioType:yi},{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a touch moves.",phetioHighFrequency:!0}),this.touchCancelAction=new Ti((at,Pe,$e)=>{const gt=this.findPointerById(at);gt&&(this.cancelEvent(gt,$e,Pe),this.removePointer(gt))},{phetioPlayback:!0,tandem:(pe=g.tandem)==null?void 0:pe.createTandem("touchCancelAction"),parameters:[{name:"id",phetioType:yi},{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a touch is canceled."}),this.penStartAction=new Ti((at,Pe,$e)=>{const gt=new aB(at,Pe,$e.domEvent);this.addPointer(gt,Pe,$e),this.downEvent(gt,$e,Pe)},{phetioPlayback:!0,tandem:(ce=g.tandem)==null?void 0:ce.createTandem("penStartAction"),parameters:[{name:"id",phetioType:yi},{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a pen touches the screen."}),this.penEndAction=new Ti((at,Pe,$e)=>{const gt=this.findPointerById(at);gt&&(this.upEvent(gt,$e,Pe),this.removePointer(gt))},{phetioPlayback:!0,tandem:(T=g.tandem)==null?void 0:T.createTandem("penEndAction"),parameters:[{name:"id",phetioType:yi},{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a pen is lifted."}),this.penMoveAction=new Ti((at,Pe,$e)=>{const gt=this.findPointerById(at);gt&&(gt.move(Pe),this.moveEvent(gt,$e))},{phetioPlayback:!0,tandem:(Ce=g.tandem)==null?void 0:Ce.createTandem("penMoveAction"),parameters:[{name:"id",phetioType:yi},{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a pen is moved.",phetioHighFrequency:!0}),this.penCancelAction=new Ti((at,Pe,$e)=>{const gt=this.findPointerById(at);gt&&(this.cancelEvent(gt,$e,Pe),this.removePointer(gt))},{phetioPlayback:!0,tandem:(ze=g.tandem)==null?void 0:ze.createTandem("penCancelAction"),parameters:[{name:"id",phetioType:yi},{name:"point",phetioType:we.Vector2IO},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a pen is canceled."}),this.gotPointerCaptureAction=new Ti((at,Pe)=>{const $e=this.findPointerById(at);$e&&$e.onGotPointerCapture()},{phetioPlayback:!0,tandem:(be=g.tandem)==null?void 0:be.createTandem("gotPointerCaptureAction"),parameters:[{name:"id",phetioType:yi},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a pointer is captured (normally at the start of an interaction)",phetioHighFrequency:!0}),this.lostPointerCaptureAction=new Ti((at,Pe)=>{const $e=this.findPointerById(at);$e&&fn.setTimeout(()=>{$e.onLostPointerCapture()},2)},{phetioPlayback:!0,tandem:(Be=g.tandem)==null?void 0:Be.createTandem("lostPointerCaptureAction"),parameters:[{name:"id",phetioType:yi},{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when a pointer loses its capture (normally at the end of an interaction)",phetioHighFrequency:!0}),this.focusinAction=new Ti(at=>{const Pe=this.getPDOMEventTrail(at.domEvent,"focusin");Pe&&(this.dispatchPDOMEvent(Pe,"focus",at,!1),this.dispatchPDOMEvent(Pe,"focusin",at,!0))},{phetioPlayback:!0,tandem:(xe=g.tandem)==null?void 0:xe.createTandem("focusinAction"),parameters:[{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the PDOM root gets the focusin DOM event."}),this.focusoutAction=new Ti(at=>{const Pe=this.getPDOMEventTrail(at.domEvent,"focusout");Pe&&(this.dispatchPDOMEvent(Pe,"blur",at,!1),this.dispatchPDOMEvent(Pe,"focusout",at,!0))},{phetioPlayback:!0,tandem:(Qe=g.tandem)==null?void 0:Qe.createTandem("focusoutAction"),parameters:[{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the PDOM root gets the focusout DOM event."}),this.clickAction=new Ti(at=>{const Pe=this.getPDOMEventTrail(at.domEvent,"click");Pe&&this.dispatchPDOMEvent(Pe,"click",at,!0)},{phetioPlayback:!0,tandem:(Fe=g.tandem)==null?void 0:Fe.createTandem("clickAction"),parameters:[{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the PDOM root gets the click DOM event."}),this.inputAction=new Ti(at=>{const Pe=this.getPDOMEventTrail(at.domEvent,"input");Pe&&this.dispatchPDOMEvent(Pe,"input",at,!0)},{phetioPlayback:!0,tandem:(Ye=g.tandem)==null?void 0:Ye.createTandem("inputAction"),parameters:[{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the PDOM root gets the input DOM event."}),this.changeAction=new Ti(at=>{const Pe=this.getPDOMEventTrail(at.domEvent,"change");Pe&&this.dispatchPDOMEvent(Pe,"change",at,!0)},{phetioPlayback:!0,tandem:(ut=g.tandem)==null?void 0:ut.createTandem("changeAction"),parameters:[{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the PDOM root gets the change DOM event."}),this.keydownAction=new Ti(at=>{const Pe=this.getPDOMEventTrail(at.domEvent,"keydown");Pe&&this.dispatchPDOMEvent(Pe,"keydown",at,!0)},{phetioPlayback:!0,tandem:(Me=g.tandem)==null?void 0:Me.createTandem("keydownAction"),parameters:[{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the PDOM root gets the keydown DOM event."}),this.keyupAction=new Ti(at=>{const Pe=this.getPDOMEventTrail(at.domEvent,"keydown");Pe&&this.dispatchPDOMEvent(Pe,"keyup",at,!0)},{phetioPlayback:!0,tandem:(Lt=g.tandem)==null?void 0:Lt.createTandem("keyupAction"),parameters:[{name:"context",phetioType:Bs}],phetioEventType:si.USER,phetioDocumentation:"Emits when the PDOM root gets the keyup DOM event."})}interruptPointers(e=null){te.each(this.pointers,t=>{t!==e&&t.interruptAll()})}batchEvent(e,t,i,s){this.display.interactive&&(this.batchedEvents.push(uc.pool.create(e,t,i)),(s||!this.batchDOMEvents)&&this.fireBatchedEvents());const r=qs.firefox&&e.domEvent instanceof PointerEvent&&i===this.pointerDown&&e.domEvent.pointerType==="touch";this.passiveEvents!==!0&&(i!==this.mouseDown||qs.edge)&&!r&&t!==Kt.ALT_TYPE&&!e.allowsDOMInput()&&e.domEvent.preventDefault()}fireBatchedEvents(){if(!this.currentlyFiringEvents&&this.batchedEvents.length){this.currentlyFiringEvents=!0;const e=this.batchedEvents;for(let t=0;t<e.length;t++){const i=e[t];i.run(this),i.dispose()}$t(e),this.currentlyFiringEvents=!1}}clearBatchedEvents(){this.batchedEvents.length=0}validatePointers(){this.validatePointersAction.execute()}removeTemporaryPointers(){for(let e=this.pointers.length-1;e>=0;e--){const t=this.pointers[e];if(!(t instanceof lc)){this.pointers.splice(e,1);const i=t.trail||new bi(this.rootNode);this.exitEvents(t,Di.createSynthetic(),i,0,!0)}}}connectListeners(){Ct.addDisplay(this.display,this.attachToWindow,this.passiveEvents)}disconnectListeners(){Ct.removeDisplay(this.display,this.attachToWindow,this.passiveEvents)}pointFromEvent(e){const t=we.pool.create(e.clientX,e.clientY);if(!this.assumeFullWindow){const i=this.display.domElement.getBoundingClientRect();i.width>0&&i.height>0&&(t.subtractXY(i.left,i.top),(i.width!==this.display.width||i.height!==this.display.height)&&(t.x*=this.display.width/i.width,t.y*=this.display.height/i.height))}return t}interruptMultitouchPointers(e,t){const i=this.pointers.filter(s=>s.isTouchLike());for(const s of i)this.cancelEvent(s,t,e),this.removePointer(s)}addPointer(e,t,i){this.preventMultitouch&&e.isTouchLike()&&this.pointers.some(s=>s.isTouchLike())||(this.interruptMultitouch&&(this.interruptMultitouchPointers(t,i),this.mouse&&this.mouse.interruptAll()),this.pointers.push(e),this.pointerAddedEmitter.emit(e))}removePointer(e){for(let t=this.pointers.length-1;t>=0;t--)this.pointers[t]===e&&this.pointers.splice(t,1);e.dispose()}findPointerById(e){let t=this.pointers.length;for(;t--;){const i=this.pointers[t];if(i.id===e)return i}return null}getPDOMEventTrail(e,t){if(!this.display.interactive)return null;const i=this.getTrailFromPDOMEvent(e);return i&&!(t==="click"&&te.some(i.nodes,r=>r.positionInPDOM)&&e.timeStamp-this.upTimeStamp<=hB)?i:null}ensureMouse(e,t){const i=this.mouse;if(i)return i;{const s=new lc(e);return this.mouse=s,this.addPointer(s,e,t),s}}ensurePDOMPointer(e){const t=this.pdomPointer;if(t)return t;{const i=new $d(this.display);return this.pdomPointer=i,this.addPointer(i,we.ZERO,e),i}}dispatchPDOMEvent(e,t,i,s){this.ensurePDOMPointer(i).updateTrail(e),Jt.USER_GESTURE_EVENTS.includes(t)&&en.userGestureEmitter.emit();const r=i.domEvent;r.target&&r.target.hasAttribute(Jt.DATA_EXCLUDE_FROM_INPUT)||(e.isPickable()||lB.includes(t)||(e=new bi([])),this.dispatchEvent(e,t,this.pdomPointer,i,s))}getRelatedTargetTrail(e){const t=e.relatedTarget;if(t&&this.display.isElementUnderPDOM(t,!1)){const s=e.relatedTarget.getAttribute(Jt.DATA_PDOM_UNIQUE_ID);return Hd(this.display,s)}return null}getTrailFromPDOMEvent(e){if(!this.display._accessible)return null;if(e[Zd]){const t=e[Zd].getAttribute(Jt.DATA_PDOM_UNIQUE_ID);return Hd(this.display,t)}else{const t=e.target;if(t&&t instanceof self.Element&&this.display.isElementUnderPDOM(t,!1)){const i=t.getAttribute(Jt.DATA_PDOM_UNIQUE_ID);return Hd(this.display,i)}}return null}mouseDown(e,t,i){this.mouseDownAction.execute(e,t,i)}mouseUp(e,t){this.mouseUpAction.execute(e,t)}mouseMove(e,t){this.mouseMoveAction.execute(e,t)}mouseOver(e,t){this.mouseOverAction.execute(e,t)}mouseOut(e,t){this.mouseOutAction.execute(e,t)}wheel(e){this.wheelScrollAction.execute(e)}touchStart(e,t,i){this.touchStartAction.execute(e,t,i)}touchEnd(e,t,i){this.touchEndAction.execute(e,t,i)}touchMove(e,t,i){this.touchMoveAction.execute(e,t,i)}touchCancel(e,t,i){this.touchCancelAction.execute(e,t,i)}penStart(e,t,i){this.penStartAction.execute(e,t,i)}penEnd(e,t,i){this.penEndAction.execute(e,t,i)}penMove(e,t,i){this.penMoveAction.execute(e,t,i)}penCancel(e,t,i){this.penCancelAction.execute(e,t,i)}pointerDown(e,t,i,s){const r=this.attachToWindow?document.body:this.display.domElement;switch(r.setPointerCapture&&!s.allowsDOMInput()&&r.setPointerCapture(s.domEvent.pointerId),t=this.handleUnknownPointerType(t,e),t){case"mouse":this.mouseDown(e,i,s);break;case"touch":this.touchStart(e,i,s);break;case"pen":this.penStart(e,i,s);break}}pointerUp(e,t,i,s){switch(this.upTimeStamp=s.domEvent.timeStamp,t=this.handleUnknownPointerType(t,e),t){case"mouse":this.mouseUp(i,s);break;case"touch":this.touchEnd(e,i,s);break;case"pen":this.penEnd(e,i,s);break}}pointerCancel(e,t,i,s){switch(t=this.handleUnknownPointerType(t,e),t){case"mouse":console&&console.log&&console.log("WARNING: Pointer mouse cancel was received");break;case"touch":this.touchCancel(e,i,s);break;case"pen":this.penCancel(e,i,s);break;default:console.log&&console.log(`Unknown pointer type: ${t}`)}}gotPointerCapture(e,t,i,s){this.gotPointerCaptureAction.execute(e,s)}lostPointerCapture(e,t,i,s){this.lostPointerCaptureAction.execute(e,s)}pointerMove(e,t,i,s){switch(t=this.handleUnknownPointerType(t,e),t){case"mouse":this.mouseMove(i,s);break;case"touch":this.touchMove(e,i,s);break;case"pen":this.penMove(e,i,s);break;default:console.log&&console.log(`Unknown pointer type: ${t}`)}}pointerOver(e,t,i,s){}pointerOut(e,t,i,s){}pointerEnter(e,t,i,s){}pointerLeave(e,t,i,s){}focusIn(e){this.focusinAction.execute(e)}focusOut(e){this.focusoutAction.execute(e)}input(e){this.inputAction.execute(e)}change(e){this.changeAction.execute(e)}click(e){this.clickAction.execute(e)}keyDown(e){this.keydownAction.execute(e)}keyUp(e){this.keyupAction.execute(e)}handleUnknownPointerType(e,t){return e!==""?e:this.mouse&&this.mouse.id===t?"mouse":"touch"}getPointerTrail(e){return this.rootNode.trailUnderPointer(e)||new bi(this.rootNode)}upEvent(e,t,i){if(this.display.isElementUnderPDOM(t.domEvent.target,!0))return;const s=e.up(i,t.domEvent),r=this.branchChangeEvents(e,t,s);this.dispatchEvent(r,"up",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,r,0,!0)}downEvent(e,t,i){if(this.display.isElementUnderPDOM(t.domEvent.target,!0))return;const s=e.updatePoint(i),r=this.branchChangeEvents(e,t,s);e.down(t.domEvent),this.dispatchEvent(r,"down",e,t,!0)}moveEvent(e,t){this.branchChangeEvents(e,t,!0)}cancelEvent(e,t,i){const s=e.cancel(i),r=this.branchChangeEvents(e,t,s);this.dispatchEvent(r,"cancel",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,r,0,!0)}branchChangeEvents(e,t,i){const s=this.getPointerTrail(e),r=s.slice(0,Math.min(s.nodes.length,s.getLastInputEnabledIndex()+1)),o=e.inputEnabledTrail||new bi(this.rootNode),c=bi.branchIndex(r,o),p=o.lastNode()!==r.lastNode();return i&&this.dispatchEvent(s,"move",e,t,!0),this.exitEvents(e,t,o,c,p),this.enterEvents(e,t,r,c,p),e.trail=s,e.inputEnabledTrail=r,s}enterEvents(e,t,i,s,r){r&&this.dispatchEvent(i,"over",e,t,!0,!0);for(let o=s;o<i.length;o++)this.dispatchEvent(i.slice(0,o+1),"enter",e,t,!1)}exitEvents(e,t,i,s,r){for(let o=i.length-1;o>=s;o--)this.dispatchEvent(i.slice(0,o+1),"exit",e,t,!1,!0);r&&this.dispatchEvent(i,"out",e,t,!0)}dispatchEvent(e,t,i,s,r,o=!1){const c=new uo(e,t,i,s);this.currentSceneryEvent=c,this.dispatchToListeners(i,i.getListeners(),t,c),this.dispatchToTargets(e,t,i,c,r,o),this.dispatchToListeners(i,this.display.getInputListeners(),t,c),en.inputListeners.length&&this.dispatchToListeners(i,en.inputListeners.slice(),t,c),this.currentSceneryEvent=null}dispatchToListeners(e,t,i,s){if(s.handled)return;const r=e.type+i;for(let o=0;o<t.length;o++){const c=t[o];!s.aborted&&c[r]&&c[r](s),!s.aborted&&c[i]&&c[i](s)}}dispatchToTargets(e,t,i,s,r,o=!1){if(s.aborted||s.handled)return;const c=e.getLastInputEnabledIndex();for(let p=e.nodes.length-1;p>=0;r?p--:p=-1){const g=e.nodes[p],A=c<p;if(!(g.isDisposed||!o&&A)&&(s.currentTarget=g,this.dispatchToListeners(i,g.getInputListeners(),t,s),s.aborted||s.handled))return}}static debugText(e,t){let i=`${t.timeStamp} ${t.type}`;return e!==null&&(i=`${e.x},${e.y} ${i}`),i}}fc.InputIO=new Yt("InputIO",{valueType:fc,applyState:te.noop,toStateObject:n=>({pointers:S2.toStateObject(n.pointers)}),stateSchema:{pointers:S2}});class uB{constructor(e){this.instance=e}initialize(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.selfFittable=!!t&&this.isSelfFitSupported(),this.ancestorsFittable=this.selfFittable,this.subtreeUnfittableCount=this.selfFittable?0:1,this.subtreeFittabilityChangeEmitter=this.subtreeFittabilityChangeEmitter||new Ai,this}get parent(){return this.instance.parent?this.instance.parent.fittability:null}checkSelfFittability(){const e=this.isSelfFitSupported();this.selfFittable!==e&&this.updateSelfFittable()}isSelfFitSupported(){return this.display._allowLayerFitting&&!this.node.isPreventFit()}markSubtreeFittable(){if(!this.selfFittable)return;this.ancestorsFittable=!0;const e=this.instance.children;for(let t=0;t<e.length;t++)e[t].fittability.markSubtreeFittable();this.instance.updateDrawableFittability(!0)}markSubtreeUnfittable(){if(!this.ancestorsFittable)return;this.ancestorsFittable=!1;const e=this.instance.children;for(let t=0;t<e.length;t++)e[t].fittability.markSubtreeUnfittable();this.instance.updateDrawableFittability(!1)}updateSelfFittable(){const e=this.isSelfFitSupported();this.selfFittable=e,this.selfFittable&&(!this.parent||this.parent.ancestorsFittable)?this.markSubtreeFittable():this.selfFittable||this.markSubtreeUnfittable(),this.selfFittable?this.decrementSubtreeUnfittableCount():this.incrementSubtreeUnfittableCount()}incrementSubtreeUnfittableCount(){this.subtreeUnfittableCount++,this.subtreeUnfittableCount===1&&(this.parent&&this.parent.incrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}decrementSubtreeUnfittableCount(){this.subtreeUnfittableCount--,this.subtreeUnfittableCount===0&&(this.parent&&this.parent.decrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}onInsert(e){this.ancestorsFittable||e.markSubtreeUnfittable(),e.subtreeUnfittableCount>0&&this.incrementSubtreeUnfittableCount()}onRemove(e){this.ancestorsFittable||e.markSubtreeFittable(),e.subtreeUnfittableCount>0&&this.decrementSubtreeUnfittableCount()}audit(){}}class cB extends kr{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){super.initialize(e),this.instance=t}stitch(e,t,i,s){}}class dB{constructor(e){this.instance=e}initialize(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.transformDirty=!0,this.nodeTransformListener=this.nodeTransformListener||this.onNodeTransformDirty.bind(this),this.matrix=this.matrix||nt.identity(),this.relativeSelfDirty=!0,this.relativeChildrenListenersCount=0,this.relativePrecomputeCount=0,this.relativeChildrenPrecomputeCount=0,this.relativeFrameId=-1,this.relativeChildDirtyFrame=e?e._frameId:0,this.relativeTransformListeners=$t(this.relativeTransformListeners),this}get parent(){return this.instance.parent?this.instance.parent.relativeTransform:null}addInstance(e){e.stateless||(e.relativeTransform.hasAncestorListenerNeed()&&this.incrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.incrementTransformPrecomputeChildren()),e.relativeTransform.forceMarkTransformDirty()}removeInstance(e){e.relativeTransform.hasAncestorListenerNeed()&&this.decrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.decrementTransformPrecomputeChildren()}attachNodeListeners(){this.node.transformEmitter.addListener(this.nodeTransformListener)}detachNodeListeners(){this.node.transformEmitter.removeListener(this.nodeTransformListener)}hasDescendantListenerNeed(){return this.instance.isTransformed?this.relativeChildrenListenersCount>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}hasAncestorListenerNeed(){return this.instance.isTransformed?this.relativeTransformListeners.length>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}hasSelfListenerNeed(){return this.relativeTransformListeners.length>0}incrementTransformListenerChildren(){const e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount++,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.incrementTransformListenerChildren()}decrementTransformListenerChildren(){const e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount--,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}addListener(e){const t=this.hasAncestorListenerNeed();this.relativeTransformListeners.push(e),t!==this.hasAncestorListenerNeed()&&(this.parent&&this.parent.incrementTransformListenerChildren(),this.hasAncestorComputeNeed()||this.forceMarkTransformDirty())}removeListener(e){const t=this.hasAncestorListenerNeed();this.relativeTransformListeners.splice(te.indexOf(this.relativeTransformListeners,e),1),t!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}hasDescendantComputeNeed(){return this.instance.isTransformed?this.relativeChildrenPrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}hasAncestorComputeNeed(){return this.instance.isTransformed?this.relativePrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}hasSelfComputeNeed(){return this.relativePrecomputeCount>0}incrementTransformPrecomputeChildren(){const e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount++,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.incrementTransformPrecomputeChildren()}decrementTransformPrecomputeChildren(){const e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}addPrecompute(){const e=this.hasAncestorComputeNeed();this.relativePrecomputeCount++,e!==this.hasAncestorComputeNeed()&&(this.parent&&this.parent.incrementTransformPrecomputeChildren(),this.hasAncestorListenerNeed()||this.forceMarkTransformDirty())}removePrecompute(){const e=this.hasAncestorComputeNeed();this.relativePrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}onNodeTransformDirty(){this.transformDirty||this.forceMarkTransformDirty()}forceMarkTransformDirty(){this.transformDirty=!0,this.relativeSelfDirty=!0;const e=this.display._frameId;let t=this.instance.parent;for(;t&&t.relativeTransform.relativeChildDirtyFrame!==e;){const i=t.parent,s=t.isTransformed;if(t.relativeTransform.relativeChildDirtyFrame=e,i===null){this.display.markTransformRootDirty(t,s);break}else if(s){this.display.markTransformRootDirty(t,!0);break}t=i}}computeRelativeTransform(){const e=this.node.getMatrix();this.instance.parent&&!this.instance.parent.isTransformed?(this.matrix.set(this.parent.matrix),this.matrix.multiplyMatrix(e)):this.matrix.set(e),this.relativeFrameId=this.display._frameId,this.relativeSelfDirty=!1}isValidationNotNeeded(){return this.hasAncestorComputeNeed()||this.relativeFrameId===this.display._frameId}validate(){if(!this.isValidationNotNeeded()&&(this.instance.parent&&!this.instance.parent.isTransformed&&this.parent.validate(),this.relativeSelfDirty)){this.computeRelativeTransform();const e=this.instance.children.length;for(let t=0;t<e;t++)this.instance.children[t].relativeTransform.relativeSelfDirty=!0}}updateTransformListenersAndCompute(e,t,i,s){let r,o;if(s)for(r=this.instance.children.length,o=0;o<r;o++)this.instance.children[o].relativeTransform.updateTransformListenersAndCompute(!1,!1,i,!1);else{const c=e||this.relativeSelfDirty,p=c||this.relativeChildDirtyFrame===i,g=this.hasDescendantComputeNeed(),A=this.hasDescendantListenerNeed(),C=this.hasSelfComputeNeed(),D=this.hasSelfListenerNeed();if(!g&&c&&!t&&(this.relativeSelfDirty=!0),!p||!g&&!A&&!C&&!D)return;if(c&&(g||C)&&this.computeRelativeTransform(),this.transformDirty&&(this.transformDirty=!1),this.notifyRelativeTransformListeners(),!this.instance.isTransformed||s){const P=c&&!(g||C);for(r=this.instance.children.length,o=0;o<r;o++)this.instance.children[o].relativeTransform.updateTransformListenersAndCompute(c,P,i,!1)}}}notifyRelativeTransformListeners(){const e=this.relativeTransformListeners.length;for(let t=0;t<e;t++)this.relativeTransformListeners[t]()}audit(e,t){}}class fB extends kr{constructor(e,t,i,s){super(),this.initialize(e,t,i,s)}initialize(e,t,i,s){super.initialize(t),this.instance=i,this.sharedInstance=s}}let pB=1;const gB=Se.createOrderBitmask(Se.bitmaskSVG,Se.bitmaskCanvas,Se.bitmaskDOM,Se.bitmaskWebGL);class ul{constructor(e,t,i,s){this.display=null,this.active=!1,this.initialize(e,t,i,s)}initialize(e,t,i,s){return t.setImmutable(),this.id=this.id||pB++,this.isWebGLSupported=e.isWebGLAllowed()&&Pi.isWebGLSupported,this.relativeTransform=this.relativeTransform||new dB(this),this.fittability=this.fittability||new uB(this),this.visible=!0,this.relativeVisible=!0,this.selfVisible=!0,this.visibilityDirty=!0,this.childVisibilityDirty=!0,this.voicingVisible=!0,this.branchIndexMap=this.branchIndexMap||{},this.branchIndexReferences=$t(this.branchIndexReferences),this.addRemoveCounter=0,this.stitchChangeFrame=e._frameId,this.stitchChangeBefore=0,this.stitchChangeAfter=0,this.stitchChangeOnChildren=0,this.stitchChangeIncluded=!1,this.childInsertedListener=this.childInsertedListener||this.onChildInserted.bind(this),this.childRemovedListener=this.childRemovedListener||this.onChildRemoved.bind(this),this.childrenReorderedListener=this.childrenReorderedListener||this.onChildrenReordered.bind(this),this.visibilityListener=this.visibilityListener||this.onVisibilityChange.bind(this),this.markRenderStateDirtyListener=this.markRenderStateDirtyListener||this.markRenderStateDirty.bind(this),this.visibleEmitter=new Ai,this.relativeVisibleEmitter=new Ai,this.selfVisibleEmitter=new Ai,this.canVoiceEmitter=new Ai,this.cleanInstance(e,t),this.node.addInstance(this),this.externalReferenceCount=0,this.stateless=!0,this.isDisplayRoot=i,this.isSharedCanvasCacheRoot=s,this.preferredRenderers=0,this.isUnderCanvasCache=s,this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCachePlaceholder=!1,this.isSharedCanvasCacheSelf=s,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0,this.renderStateDirtyFrame=e._frameId,this.skipPruningFrame=e._frameId,this.active=!0,this}cleanInstance(e,t){this.display=e,this.trail=t,this.node=t?t.lastNode():null,this.parent=null,this.oldParent=null,this.children=$t(this.children),this.sharedCacheInstance=null,this.relativeTransform.initialize(e,t),this.fittability.initialize(e,t),this.instanceRemovalCheckList=$t(this.instanceRemovalCheckList),this.selfDrawable=null,this.groupDrawable=null,this.sharedCacheDrawable=null,this.firstDrawable=null,this.lastDrawable=null,this.firstInnerDrawable=null,this.lastInnerDrawable=null,this.svgGroups=$t(this.svgGroups),this.cleanSyncTreeResults()}cleanSyncTreeResults(){this.beforeStableIndex=this.children.length,this.afterStableIndex=-1,this.firstChangeInterval=null,this.lastChangeInterval=null,this.incompatibleStateChange=!1,this.groupChanged=!1,this.cascadingStateChange=!1,this.anyStateChange=!1}updateRenderingState(){const e=this.isBackbone,t=this.isTransformed,i=this.isVisibilityApplied,s=this.isInstanceCanvasCache,r=this.isSharedCanvasCacheSelf,o=this.isSharedCanvasCachePlaceholder,c=this.isUnderCanvasCache,p=this.selfRenderer,g=this.groupRenderer,A=this.sharedCacheRenderer,C=this.preferredRenderers;this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCacheSelf=!1,this.isSharedCanvasCachePlaceholder=!1,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0;const D=this.node;this.isUnderCanvasCache=this.isSharedCanvasCacheRoot||(this.parent?this.parent.isUnderCanvasCache||this.parent.isInstanceCanvasCache||this.parent.isSharedCanvasCacheSelf:!1),this.preferredRenderers=this.parent?this.parent.preferredRenderers:gB,D._renderer&&(this.preferredRenderers=Se.pushOrderBitmask(this.preferredRenderers,D._renderer));const P=this.node.hasClipArea(),F=this.node.effectiveOpacity!==1||D._usesOpacity||this.node._filters.length>0;let K=!1,M=!1;if(F)for(let ce=0;ce<this.node._filters.length;ce++){const T=this.node._filters[ce];T.isSVGCompatible()||(K=!0),T.isCanvasCompatible()||(M=!0)}const U=D._cssTransform||D._layerSplit,$=this.isDisplayRoot||!this.isUnderCanvasCache&&U,re=!$&&(F||P)&&(!K&&this.node._rendererSummary.isSubtreeRenderedExclusivelySVG(this.preferredRenderers)||!M&&this.node._rendererSummary.isSubtreeRenderedExclusivelyCanvas(this.preferredRenderers));if((re?!1:$||F||P)?(this.isBackbone=!0,this.isVisibilityApplied=!0,this.isTransformed=this.isDisplayRoot||!!D._cssTransform,this.groupRenderer=Se.bitmaskDOM):!re&&(F||P||D._canvasCache)&&(D._singleCache?this.isSharedCanvasCacheRoot?(this.isSharedCanvasCacheSelf=!0,this.sharedCacheRenderer=this.isWebGLSupported?Se.bitmaskWebGL:Se.bitmaskCanvas):this.isSharedCanvasCachePlaceholder=!0:(this.isInstanceCanvasCache=!0,this.isUnderCanvasCache=!0,this.groupRenderer=this.isWebGLSupported?Se.bitmaskWebGL:Se.bitmaskCanvas)),this.node.isPainted())if(this.isUnderCanvasCache)this.selfRenderer=Se.bitmaskCanvas;else{let ce=this.node._rendererBitmask;if(!this.isWebGLSupported){const T=Se.bitmaskWebGL;ce=ce^ce&T}this.selfRenderer=ce&Se.bitmaskOrder(this.preferredRenderers,0)||ce&Se.bitmaskOrder(this.preferredRenderers,1)||ce&Se.bitmaskOrder(this.preferredRenderers,2)||ce&Se.bitmaskOrder(this.preferredRenderers,3)||ce&Se.bitmaskSVG||ce&Se.bitmaskCanvas||ce&Se.bitmaskDOM||ce&Se.bitmaskWebGL||0}this.groupChanged=e!==this.isBackbone||s!==this.isInstanceCanvasCache||r!==this.isSharedCanvasCacheSelf,this.cascadingStateChange=c!==this.isUnderCanvasCache||C!==this.preferredRenderers,this.incompatibleStateChange=this.isTransformed!==t||this.isSharedCanvasCachePlaceholder!==o,this.anyStateChange=this.groupChanged||this.cascadingStateChange||this.incompatibleStateChange||p!==this.selfRenderer||g!==this.groupRenderer||A!==this.sharedCacheRenderer,i!==this.isVisibilityApplied&&(this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()),this.fittability.checkSelfFittability()}getStateString(){return`${`S[ ${this.isDisplayRoot?"displayRoot ":""}${this.isBackbone?"backbone ":""}${this.isInstanceCanvasCache?"instanceCache ":""}${this.isSharedCanvasCachePlaceholder?"sharedCachePlaceholder ":""}${this.isSharedCanvasCacheSelf?"sharedCacheSelf ":""}${this.isTransformed?"TR ":""}${this.isVisibilityApplied?"VIS ":""}${this.selfRenderer?this.selfRenderer.toString(16):"-"},${this.groupRenderer?this.groupRenderer.toString(16):"-"},${this.sharedCacheRenderer?this.sharedCacheRenderer.toString(16):"-"} `}]`}baseSyncTree(){this.syncTree(),this.cleanSyncTreeResults()}syncTree(){const e=this.stateless;if((e||this.parent&&this.parent.cascadingStateChange||this.renderStateDirtyFrame===this.display._frameId)&&this.updateRenderingState(),!e&&this.incompatibleStateChange)return!1;if(this.stateless=!1,e&&(this.isTransformed&&this.display.markTransformRootDirty(this,!0),this.attachNodeListeners()),this.isSharedCanvasCachePlaceholder)this.sharedSyncTree();else if(e||this.skipPruningFrame===this.display._frameId||this.anyStateChange){this.prepareChildInstances(e),this.firstDrawable,this.lastDrawable,this.firstInnerDrawable,this.lastInnerDrawable;const t=this.updateSelfDrawable();this.localSyncTree(t),this.groupSyncTree(e)}return!0}localSyncTree(e){const t=this.display._frameId;let i=this.selfDrawable,s=i,r=null;e&&(r=ua.newForDisplay(null,null,this.display));let o=r,c=e?null:this.selfDrawable;for(let p=0;p<this.children.length;p++){let g=this.children[p];g.syncTree()||(g=this.updateIncompatibleChildInstance(g,p),g.syncTree());const C=g.shouldIncludeInParentDrawables();C&&g.firstDrawable&&(s?kr.connectDrawables(s,g.firstDrawable,this.display):i=g.firstDrawable,s=g.lastDrawable);const D=g.stitchChangeIncluded,P=C;g.stitchChangeIncluded=P,g.stitchChangeFrame===t&&(g.firstChangeInterval=g.lastChangeInterval=ua.newForDisplay(null,null,this.display));const F=g.firstChangeInterval;let K=o&&o.drawableAfter===null;const M=F&&F.drawableBefore===null;if(g.stitchChangeBefore===t&&!K&&!M){const $=ua.newForDisplay(c,null,this.display);o&&(o.nextChangeInterval=$),o=$,r=r||o,K=!0}if((D||P)&&(K?F?F.drawableBefore===null?(o.drawableAfter=F.drawableAfter,o.nextChangeInterval=F.nextChangeInterval,o=g.lastChangeInterval===F?o:g.lastChangeInterval):(o.drawableAfter=g.firstDrawable,o.nextChangeInterval=F,o=g.lastChangeInterval):o.drawableAfter=g.firstDrawable:F&&(r=r||F,F.drawableBefore===null&&(F.drawableBefore=c),o&&(o.nextChangeInterval=F),o=g.lastChangeInterval),c=o&&o.drawableAfter===null?null:g.lastDrawable?g.lastDrawable:c),p===this.children.length-1&&g.stitchChangeAfter===t&&!(o&&o.drawableAfter===null)){const $=ua.newForDisplay(c,null,this.display);o&&(o.nextChangeInterval=$),o=$,r=r||o}g.cleanSyncTreeResults()}!r&&this.stitchChangeOnChildren===this.display._frameId&&this.children.length===0&&(r=o=ua.newForDisplay(null,null,this.display)),this.firstChangeInterval=r,this.lastChangeInterval=o,this.firstDrawable=this.firstInnerDrawable=i,this.lastDrawable=this.lastInnerDrawable=s}updateSelfDrawable(){if(this.node.isPainted()){const e=this.selfRenderer;if(!this.selfDrawable||!(this.selfDrawable.renderer&e&Se.bitmaskRendererArea))return this.selfDrawable&&this.selfDrawable.markForDisposal(this.display),this.selfDrawable=Se.createSelfDrawable(this,this.node,e,this.fittability.ancestorsFittable),!0}return!1}updateIncompatibleChildInstance(e,t){this.display.markInstanceRootForDisposal(e);const i=ul.createFromPool(this.display,this.trail.copy().addDescendant(e.node,t),!1,!1);return this.replaceInstanceWithIndex(e,i,t),i}groupSyncTree(e){const t=this.groupRenderer,i=!!t!=!!this.groupDrawable||!e&&this.groupChanged||this.groupDrawable&&this.groupDrawable.renderer!==t;i&&(this.groupDrawable&&(this.groupDrawable.markForDisposal(this.display),this.groupDrawable=null),this.firstChangeInterval=this.lastChangeInterval=ua.newForDisplay(null,null,this.display)),t&&(this.firstDrawable&&kr.disconnectBefore(this.firstDrawable,this.display),this.lastDrawable&&kr.disconnectAfter(this.lastDrawable,this.display),this.isBackbone?(i&&(this.groupDrawable=lo.createFromPool(this.display,this,this.getTransformRootInstance(),t,this.isDisplayRoot),this.isTransformed&&this.display.markTransformRootDirty(this,!0)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isInstanceCanvasCache?(i&&(this.groupDrawable=cB.createFromPool(t,this)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isSharedCanvasCacheSelf&&i&&(this.groupDrawable=Jf.createFromPool(t,this)),this.groupDrawable.setFittable(this.fittability.ancestorsFittable),this.firstDrawable=this.lastDrawable=this.groupDrawable),i?this.firstChangeInterval=this.lastChangeInterval=ua.newForDisplay(null,null,this.display):t&&(this.firstChangeInterval=this.lastChangeInterval=null)}sharedSyncTree(){this.ensureSharedCacheInitialized();const e=this.sharedCacheRenderer;(!this.sharedCacheDrawable||this.sharedCacheDrawable.renderer!==e)&&(this.sharedCacheDrawable&&this.sharedCacheDrawable.markForDisposal(this.display),this.sharedCacheDrawable=new fB(this.trail,e,this,this.sharedCacheInstance),this.firstDrawable=this.sharedCacheDrawable,this.lastDrawable=this.sharedCacheDrawable,this.firstChangeInterval=this.lastChangeInterval=ua.newForDisplay(null,null,this.display))}prepareChildInstances(e){for(;this.instanceRemovalCheckList.length;){const t=this.instanceRemovalCheckList.pop();t.addRemoveCounter===-1&&(t.addRemoveCounter=0,this.display.markInstanceRootForDisposal(t))}if(e)for(let t=0;t<this.node.children.length;t++){const i=this.node.children[t];this.appendInstance(ul.createFromPool(this.display,this.trail.copy().addDescendant(i,t),!1,!1))}}ensureSharedCacheInitialized(){if(!this.sharedCacheInstance){const e=this.node.getId();this.sharedCacheInstance=this.display._sharedCanvasInstances[e],this.sharedCacheInstance||(this.sharedCacheInstance=ul.createFromPool(this.display,new bi(this.node),!1,!0),this.sharedCacheInstance.syncTree(),this.display._sharedCanvasInstances[e]=this.sharedCacheInstance,this.display.markTransformRootDirty(this.sharedCacheInstance,!0)),this.sharedCacheInstance.externalReferenceCount++,this.isTransformed&&this.display.markTransformRootDirty(this,!0)}}shouldIncludeInParentDrawables(){return this.node.isVisible()||!this.node.isExcludeInvisible()}findPreviousDrawable(e){for(let t=e-1;t>=0;t--){const i=this.children[t].lastDrawable;if(i!==null)return i}return null}findNextDrawable(e){const t=this.children.length;for(let i=e+1;i<t;i++){const s=this.children[i].firstDrawable;if(s!==null)return s}return null}appendInstance(e){this.insertInstance(e,this.children.length)}insertInstance(e,t){e.stitchChangeFrame=this.display._frameId,this.stitchChangeOnChildren=this.display._frameId,this.children.splice(t,0,e),e.parent=this,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>this.afterStableIndex?this.afterStableIndex=t+1:this.afterStableIndex++,this.fittability.onInsert(e.fittability),this.relativeTransform.addInstance(e),this.markChildVisibilityDirty()}removeInstance(e){this.removeInstanceWithIndex(e,te.indexOf(this.children,e))}removeInstanceWithIndex(e,t){const i=this.display._frameId;e.stitchChangeFrame=i,this.stitchChangeOnChildren=i,t-1>=0&&(this.children[t-1].stitchChangeAfter=i),t+1<this.children.length&&(this.children[t+1].stitchChangeBefore=i),this.children.splice(t,1),e.parent=null,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>=this.afterStableIndex?this.afterStableIndex=t:this.afterStableIndex--,this.fittability.onRemove(e.fittability),this.relativeTransform.removeInstance(e)}replaceInstanceWithIndex(e,t,i){this.removeInstanceWithIndex(e,i),this.insertInstance(t,i)}reorderInstances(e,t){const i=this.display._frameId;this.children.splice(e,t-e+1);for(let s=e;s<=t;s++){const r=this.findChildInstanceOnNode(this.node._children[s]);this.children.splice(s,0,r),r.stitchChangeFrame=i,s>e&&(r.stitchChangeAfter=i),s<t&&(r.stitchChangeBefore=i)}this.stitchChangeOnChildren=i,this.beforeStableIndex=Math.min(this.beforeStableIndex,e-1),this.afterStableIndex=Math.max(this.afterStableIndex,t+1)}findChildInstanceOnNode(e){const t=e.getInstances();for(let i=0;i<t.length;i++)if(t[i].oldParent===this)return t[i];return null}onChildInserted(e,t){let i=this.findChildInstanceOnNode(e);i?i.addRemoveCounter+=1:i=ul.createFromPool(this.display,this.trail.copy().addDescendant(e,t),!1,!1),this.insertInstance(i,t),this.markSkipPruning()}onChildRemoved(e,t){const i=this.findChildInstanceOnNode(e);i.addRemoveCounter-=1,this.instanceRemovalCheckList.push(i),this.removeInstanceWithIndex(i,t),this.markSkipPruning()}onChildrenReordered(e,t){this.reorderInstances(e,t),this.markSkipPruning()}onVisibilityChange(){this.stitchChangeFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning(),this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()}onOpacityChange(){this.markRenderStateDirty()}markChildVisibilityDirty(){this.childVisibilityDirty||(this.childVisibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty())}updateDrawableFittability(e){this.selfDrawable&&this.selfDrawable.setFittable(e),this.groupDrawable&&this.groupDrawable.setFittable(e)}updateVisibility(e,t,i,s){this.visibilityDirty&&(s=!0);const r=this.node.isVisible(),o=this.visible,c=this.relativeVisible,p=this.selfVisible,g=this.node.voicingVisibleProperty.value,A=this.voicingVisible,C=o&&A;this.visible=e&&r,this.voicingVisible=t&&g,this.relativeVisible=i&&r,this.selfVisible=this.isVisibilityApplied?!0:this.relativeVisible;const D=this.children.length;for(let F=0;F<D;F++){const K=this.children[F];(s||K.visibilityDirty||K.childVisibilityDirty)&&K.updateVisibility(this.visible,this.voicingVisible,this.isVisibilityApplied?!0:this.relativeVisible,s)}this.visibilityDirty=!1,this.childVisibilityDirty=!1,this.visible!==o&&this.visibleEmitter.emit(),this.relativeVisible!==c&&this.relativeVisibleEmitter.emit(),this.selfVisible!==p&&this.selfVisibleEmitter.emit();const P=this.voicingVisible&&this.visible;P!==C&&this.canVoiceEmitter.emit(P)}getDescendantCount(){let e=this.children.length;for(let t=0;t<this.children.length;t++)e+=this.children[t].getDescendantCount();return e}addSVGGroup(e){this.svgGroups.push(e)}removeSVGGroup(e){Ns(this.svgGroups,e)}lookupSVGGroup(e){const t=this.svgGroups.length;for(let i=0;i<t;i++){const s=this.svgGroups[i];if(s.block===e)return s}return null}getFilterRootInstance(){return this.isBackbone||this.isInstanceCanvasCache||!this.parent?this:this.parent.getFilterRootInstance()}getTransformRootInstance(){return this.isTransformed||!this.parent?this:this.parent.getTransformRootInstance()}getVisibilityRootInstance(){return this.isVisibilityApplied||!this.parent?this:this.parent.getVisibilityRootInstance()}attachNodeListeners(){this.relativeTransform.attachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.addListener(this.childInsertedListener),this.node.childRemovedEmitter.addListener(this.childRemovedListener),this.node.childrenReorderedEmitter.addListener(this.childrenReorderedListener),this.node.visibleProperty.lazyLink(this.visibilityListener),this.node.voicingVisibleProperty.lazyLink(this.visibilityListener),this.node.filterChangeEmitter.addListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.lazyLink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.addListener(this.markRenderStateDirtyListener))}detachNodeListeners(){this.relativeTransform.detachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.removeListener(this.childInsertedListener),this.node.childRemovedEmitter.removeListener(this.childRemovedListener),this.node.childrenReorderedEmitter.removeListener(this.childrenReorderedListener),this.node.visibleProperty.unlink(this.visibilityListener),this.node.voicingVisibleProperty.unlink(this.visibilityListener),this.node.filterChangeEmitter.removeListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.unlink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.removeListener(this.markRenderStateDirtyListener))}markRenderStateDirty(){this.renderStateDirtyFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}markSkipPruning(){this.skipPruningFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}getBranchIndexTo(e){const t=this.branchIndexMap[e.id];if(t!==void 0)return t;const i=this.trail.getBranchIndexTo(e.trail);return this.branchIndexMap[e.id]=i,e.branchIndexMap[this.id]=i,this.branchIndexReferences.push(e),e.branchIndexReferences.push(this),i}dispose(){for(this.active=!1;this.branchIndexReferences.length;){const t=this.branchIndexReferences.pop();delete this.branchIndexMap[t.id],delete t.branchIndexMap[this.id],Ns(t.branchIndexReferences,this)}this.groupDrawable&&this.groupDrawable.disposeImmediately(this.display),this.sharedCacheDrawable&&this.sharedCacheDrawable.disposeImmediately(this.display),this.selfDrawable&&this.selfDrawable.disposeImmediately(this.display);const e=this.children.length;for(let t=0;t<e;t++)this.children[t].dispose();for(;this.instanceRemovalCheckList.length;){const t=this.instanceRemovalCheckList.pop();t.active&&t.dispose()}this.stateless||this.detachNodeListeners(),this.node.removeInstance(this),this.sharedCacheInstance&&(this.sharedCacheInstance.externalReferenceCount--,this.sharedCacheInstance.externalReferenceCount===0&&(delete this.display._sharedCanvasInstances[this.node.getId()],this.sharedCacheInstance.dispose())),this.cleanInstance(null,null),this.visibleEmitter.removeAllListeners(),this.relativeVisibleEmitter.removeAllListeners(),this.selfVisibleEmitter.removeAllListeners(),this.canVoiceEmitter.removeAllListeners(),this.freeToPool()}audit(e,t){}auditVisibility(e){}auditChangeIntervals(e,t,i,s){if(e){let r=e;for(;r!==t;)r=r.oldNextDrawable}if(i){let r=i;for(;r!==s;)r=r.nextDrawable}}toString(){return`${this.id}#${this.node?`${this.node.constructor.name?this.node.constructor.name:"?"}#${this.node.id}`:"-"}`}}es.mixInto(ul);class mB extends $f{constructor(e,t){super(e,t,"mouseTouchAreaOverlay")}addShapes(){Dr.eachTrailUnder(new bi(this.rootNode),e=>{const t=e.lastNode();if(!t.isVisible())return!0;if((t.mouseArea||t.touchArea)&&e.isVisible()){const i=e.getTransform();t.mouseArea&&this.addShape(i.transformShape(t.mouseArea instanceof Je?Tt.bounds(t.mouseArea):t.mouseArea),"rgba(0,0,255,0.8)",!0),t.touchArea&&this.addShape(i.transformShape(t.touchArea instanceof Je?Tt.bounds(t.touchArea):t.touchArea),"rgba(255,0,0,0.8)",!1)}return!1})}}class yB{constructor(e,t){this.display=e,this.rootNode=t,this.pointerSVGContainer=document.createElement("div"),this.pointerSVGContainer.style.position="absolute",this.pointerSVGContainer.style.top="0",this.pointerSVGContainer.style.left="0",this.pointerSVGContainer.style["pointer-events"]="none";const i=10,s=1,r=(i+s/2)*2,o=r/2;e.sizeProperty.lazyLink(p=>{this.pointerSVGContainer.setAttribute("width",""+p.width),this.pointerSVGContainer.setAttribute("height",""+p.height),this.pointerSVGContainer.style.clip=`rect(0px,${p.width}px,${p.height}px,0px)`});const c=nt.IDENTITY.copy();this.pointerAdded=p=>{const g=document.createElementNS(Qi,"svg");g.style.position="absolute",g.style.top="0",g.style.left="0",g.style["pointer-events"]="none",Pi.prepareForTransform(g),g.setAttribute("width",""+r),g.setAttribute("height",""+r);const A=document.createElementNS(Qi,"circle");A.setAttribute("cx",""+(i+s/2)),A.setAttribute("cy",""+(i+s/2)),A.setAttribute("r",""+i),A.setAttribute("style","fill:black;"),A.setAttribute("style","stroke:white;"),A.setAttribute("opacity","0.4");const C=F=>Pi.applyPreparedTransform(c.setToTranslation(F.x-o,F.y-o),g),D=()=>{p.isTouchLike()&&(this.pointerSVGContainer.removeChild(g),p.removeInputListener(P))},P={move:()=>{p.point&&C(p.point)},up:D,cancel:D,focus:()=>{p instanceof $d&&p.point&&(C(p.point),this.pointerSVGContainer.appendChild(g))},blur:()=>{this.pointerSVGContainer.contains(g)&&this.pointerSVGContainer.removeChild(g)}};p.addInputListener(P),P.move(),g.appendChild(A),this.pointerSVGContainer.appendChild(g)},e._input.pointerAddedEmitter.addListener(this.pointerAdded),e._input&&e._input.mouse&&this.pointerAdded(e._input.mouse),this.domElement=this.pointerSVGContainer}dispose(){this.display._input.pointerAddedEmitter.removeListener(this.pointerAdded)}update(){}}class _B{constructor(e){this.display=e;const t=document.createElementNS(Qi,"svg");this.domElement=t,t.style.position="absolute",t.setAttribute("class","safari-workaround"),t.style.top="0",t.style.left="0",t.style["pointer-events"]="none",e.sizeProperty.link(i=>{t.setAttribute("width",""+i.width),t.setAttribute("height",""+i.height),t.style.clip=`rect(0px,${i.width}px,${i.height}px,0px)`}),this.rect=document.createElementNS(Qi,"rect"),t.appendChild(this.rect),this.update()}update(){const e=cl.nextDouble();this.rect.setAttribute("x",""+e),this.rect.setAttribute("y",""+e),this.rect.setAttribute("style","fill: rgba(255,200,100,0); stroke: none;"),this.display.width&&this.rect.setAttribute("width",""+(this.display.width-e*2)),this.display.height&&this.rect.setAttribute("height",""+(this.display.height-e*2))}}const AB=Qf.fromByteArray,bB={"scenery-grab-pointer":["grab","-moz-grab","-webkit-grab","pointer"],"scenery-grabbing-pointer":["grabbing","-moz-grabbing","-webkit-grabbing","pointer"]};let vB=1,w2=0;class pc{constructor(e,t){this._requestAnimationFrameID=null,this._highlightVisibilityController=null,this._refreshSVGEmitter=new Os,this._refreshSVGPending=!1;const i=lt()({width:t&&t.container&&t.container.clientWidth||640,height:t&&t.container&&t.container.clientHeight||480,allowCSSHacks:!0,allowSafariRedrawWorkaround:!1,allowSceneOverflow:!1,allowLayerFitting:!1,forceSVGRefresh:!1,defaultCursor:"default",backgroundColor:null,preserveDrawingBuffer:!1,allowWebGL:!0,accessibility:!0,interactiveHighlightsEnabledProperty:new hi(!1),baseHeadingLevel:1,interactive:!0,listenToOnlyElement:!1,batchDOMEvents:!1,assumeFullWindow:!1,aggressiveContextRecreation:!0,passiveEvents:qs.safari?!1:null,allowBackingScaleAntialiasing:!0,preventMultitouch:!1,interruptMultitouch:!1},t);this.id=vB++,this._accessible=i.accessibility,this._preserveDrawingBuffer=i.preserveDrawingBuffer,this._allowWebGL=i.allowWebGL,this._allowCSSHacks=i.allowCSSHacks,this._allowSceneOverflow=i.allowSceneOverflow,this._defaultCursor=i.defaultCursor,this.sizeProperty=new ui(new ps(i.width,i.height)),this._currentSize=new ps(-1,-1),this._rootNode=e,this._rootNode.addRootedDisplay(this),this._rootBackbone=null,this._domElement=i.container?lo.repurposeBackboneContainer(i.container):lo.createRootDivBackbone(),this._sharedCanvasInstances={},this._baseInstance=null,this._frameId=0,this._dirtyTransformRoots=[],this._dirtyTransformRootsWithoutPass=[],this._instanceRootsToDispose=[],this._reduceReferencesNeeded=[],this._drawablesToDispose=[],this._drawablesToChangeBlock=[],this._drawablesToUpdateLinks=[],this._changeIntervalsToDispose=[],this._lastCursor=null,this._currentBackgroundCSS=null,this._backgroundColor=null,this._input=null,this._inputListeners=[],this._interactive=i.interactive,this._listenToOnlyElement=i.listenToOnlyElement,this._batchDOMEvents=i.batchDOMEvents,this._assumeFullWindow=i.assumeFullWindow,this._passiveEvents=i.passiveEvents,this._preventMultitouch=i.preventMultitouch,this._interruptMultitouch=i.interruptMultitouch,this._aggressiveContextRecreation=i.aggressiveContextRecreation,this._allowBackingScaleAntialiasing=i.allowBackingScaleAntialiasing,this._allowLayerFitting=i.allowLayerFitting,this._forceSVGRefresh=i.forceSVGRefresh,this._overlays=[],this._pointerOverlay=null,this._pointerAreaOverlay=null,this._hitAreaOverlay=null,this._canvasAreaBoundsOverlay=null,this._fittedBlockBoundsOverlay=null,this._interactiveHighlightsEnabledProperty=i.interactiveHighlightsEnabledProperty,this.applyCSSHacks(),this.setBackgroundColor(i.backgroundColor);const s=new au;if(this.descriptionUtteranceQueue=new Zf(s,{initialize:this._accessible,featureSpecificAnnouncingControlPropertyName:"descriptionCanAnnounceProperty"}),qs.safari&&i.allowSafariRedrawWorkaround&&this.addOverlay(new _B(this)),this.focusManager=new Ui,this._accessible&&(this._focusRootNode=new At,this._focusOverlay=new dr(this,this._focusRootNode,pc,{pdomFocusHighlightsVisibleProperty:this.focusManager.pdomFocusHighlightsVisibleProperty,interactiveHighlightsVisibleProperty:this.focusManager.interactiveHighlightsVisibleProperty,readingBlockHighlightsVisibleProperty:this.focusManager.readingBlockHighlightsVisibleProperty}),this.addOverlay(this._focusOverlay),this._highlightVisibilityController=new Ek(this,{interactiveHighlightsEnabledProperty:this._interactiveHighlightsEnabledProperty})),this._accessible){this._rootPDOMInstance=vl.pool.create(null,this,new bi,i.baseHeadingLevel-1),Vi.rebuildInstanceTree(this._rootPDOMInstance),this._domElement.appendChild(this._rootPDOMInstance.peer.primarySibling);const r=s.ariaLiveContainer;this._domElement.appendChild(r),r.style[It.userSelect]="none",this._boundHandleFullScreenNavigation=this.handleFullScreenNavigation.bind(this),Xr.keydownEmitter.addListener(this._boundHandleFullScreenNavigation)}}getDOMElement(){return this._domElement}get domElement(){return this.getDOMElement()}updateDisplay(){const e=!!this._baseInstance;for(this._input&&this._input.validatePointers(),this._accessible&&this._rootPDOMInstance.peer.updateSubtreePositioning(),this._rootNode.validateWatchedBounds(),this._baseInstance=this._baseInstance||ul.createFromPool(this,new bi(this._rootNode),!0,!1),this._baseInstance.baseSyncTree(),e&&this.markTransformRootDirty(this._baseInstance,this._baseInstance.isTransformed);this._drawablesToUpdateLinks.length;)this._drawablesToUpdateLinks.pop().updateLinks();for(;this._changeIntervalsToDispose.length;)this._changeIntervalsToDispose.pop().dispose();for(this._rootBackbone=this._rootBackbone||this._baseInstance.groupDrawable;this._drawablesToChangeBlock.length;)this._drawablesToChangeBlock.pop().updateBlock();for(this.updateDirtyTransformRoots(),this._baseInstance.updateVisibility(!0,!0,!0,!1);this._instanceRootsToDispose.length;)this._instanceRootsToDispose.pop().dispose();for(;this._drawablesToDispose.length;)this._drawablesToDispose.pop().dispose();if(this._rootBackbone.update(),this.updateCursor(),this.updateBackgroundColor(),this.updateSize(),this._overlays.length){let t=this._rootBackbone.lastZIndex;for(let i=0;i<this._overlays.length;i++){const s=this._overlays[i];s.domElement.style.zIndex=""+t++,s.update()}}for(;this._reduceReferencesNeeded.length;)this._reduceReferencesNeeded.pop().reduceReferences();this._frameId++,Vi.auditPDOMDisplays(this.rootNode),(this._forceSVGRefresh||this._refreshSVGPending)&&(this._refreshSVGPending=!1,this.refreshSVG())}getPhetioElementAt(e){const t=this._rootNode.getPhetioMouseHit(e);return t==="phetioNotSelectable"?null:t}updateSize(){let e=!1;this.size.width!==this._currentSize.width&&(e=!0,this._currentSize.width=this.size.width,this._domElement.style.width=`${this.size.width}px`),this.size.height!==this._currentSize.height&&(e=!0,this._currentSize.height=this.size.height,this._domElement.style.height=`${this.size.height}px`),e&&!this._allowSceneOverflow&&(this._domElement.style.clip=`rect(0px,${this.size.width}px,${this.size.height}px,0px)`)}isWebGLAllowed(){return this._allowWebGL}get webglAllowed(){return this.isWebGLAllowed()}getRootNode(){return this._rootNode}get rootNode(){return this.getRootNode()}getRootBackbone(){return this._rootBackbone}get rootBackbone(){return this.getRootBackbone()}getSize(){return this.sizeProperty.value}get size(){return this.getSize()}getBounds(){return this.size.toBounds()}get bounds(){return this.getBounds()}setSize(e){this.sizeProperty.value=e}setWidthHeight(e,t){this.setSize(new ps(e,t))}getWidth(){return this.size.width}get width(){return this.getWidth()}set width(e){this.setWidth(e)}setWidth(e){return this.getWidth()!==e&&this.setSize(new ps(e,this.getHeight())),this}getHeight(){return this.size.height}get height(){return this.getHeight()}set height(e){this.setHeight(e)}setHeight(e){return this.getHeight()!==e&&this.setSize(new ps(this.getWidth(),e)),this}setBackgroundColor(e){return this._backgroundColor=e,this}set backgroundColor(e){this.setBackgroundColor(e)}get backgroundColor(){return this.getBackgroundColor()}getBackgroundColor(){return this._backgroundColor}setInteractiveHighlightsEnabled(e){return this._interactiveHighlightsEnabledProperty.value=e,this}set interactiveHighlightsEnabled(e){this.setInteractiveHighlightsEnabled(e)}get interactiveHighlightsEnabled(){return this.getInteractiveHighlightsEnabled()}getInteractiveHighlightsEnabled(){return this._interactiveHighlightsEnabledProperty.value}get interactive(){return this._interactive}set interactive(e){this._accessible&&e!==this._interactive&&this._rootPDOMInstance.peer.recursiveDisable(!e),this._interactive=e,!this._interactive&&this._input&&(this._input.interruptPointers(),this._input.clearBatchedEvents(),this._input.removeTemporaryPointers(),this._rootNode.interruptSubtreeInput(),this.interruptInput())}addOverlay(e){this._overlays.push(e),this._domElement.appendChild(e.domElement),e.domElement.setAttribute("aria-hidden","true")}removeOverlay(e){this._domElement.removeChild(e.domElement),this._overlays.splice(te.indexOf(this._overlays,e),1)}getPDOMRootElement(){return this._accessible?this._rootPDOMInstance.peer.primarySibling:null}get pdomRootElement(){return this.getPDOMRootElement()}isAccessible(){return this._accessible}isElementUnderPDOM(e,t){if(!this._accessible)return!1;const i=this.pdomRootElement.contains(e),s=e!==this.pdomRootElement;return t?i:i&&s}handleFullScreenNavigation(e){if(kh.isFullScreen()&&Ne.isKeyEvent(e,Ne.KEY_TAB)){const t=this.pdomRootElement;(e.shiftKey?Jt.getPreviousFocusable(t||void 0):Jt.getNextFocusable(t||void 0))===e.target&&e.preventDefault()}}getUsedRenderersBitmask(){function e(t){let i=0;return te.each(t.blocks,s=>{s instanceof Y0&&s.domDrawable instanceof lo?i=i|e(s.domDrawable):i=i|s.renderer}),i}return e(this._rootBackbone)&Se.bitmaskRendererArea}markTransformRootDirty(e,t){t?this._dirtyTransformRoots.push(e):this._dirtyTransformRootsWithoutPass.push(e)}updateDirtyTransformRoots(){for(;this._dirtyTransformRoots.length;)this._dirtyTransformRoots.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!0);for(;this._dirtyTransformRootsWithoutPass.length;)this._dirtyTransformRootsWithoutPass.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!1)}markDrawableChangedBlock(e){this._drawablesToChangeBlock.push(e)}markForReducedReferences(e){this._reduceReferencesNeeded.push(e)}markInstanceRootForDisposal(e){this._instanceRootsToDispose.push(e)}markDrawableForDisposal(e){this._drawablesToDispose.push(e)}markDrawableForLinksUpdate(e){this._drawablesToUpdateLinks.push(e)}markChangeIntervalToDispose(e){this._changeIntervalsToDispose.push(e)}updateBackgroundColor(){const e=this._backgroundColor===null?"":this._backgroundColor.toCSS?this._backgroundColor.toCSS():this._backgroundColor;e!==this._currentBackgroundCSS&&(this._currentBackgroundCSS=e,this._domElement.style.backgroundColor=e)}updateCursor(){if(this._input&&this._input.mouse&&this._input.mouse.point){if(this._input.mouse.cursor){this.setSceneCursor(this._input.mouse.cursor);return}const e=this._rootNode.trailUnderPointer(this._input.mouse);if(e)for(let t=e.getCursorCheckIndex();t>=0;t--){const s=e.nodes[t].getEffectiveCursor();if(s){this.setSceneCursor(s);return}}}this.setSceneCursor(this._defaultCursor)}setElementCursor(e){this._domElement.style.cursor=e,this._assumeFullWindow&&(document.body.style.cursor=e)}setSceneCursor(e){if(e!==this._lastCursor){this._lastCursor=e;const t=bB[e];if(t)for(let i=t.length-1;i>=0;i--)this.setElementCursor(t[i]);else this.setElementCursor(e)}}applyCSSHacks(){this._allowSceneOverflow||(this._domElement.style.overflow="hidden"),this._domElement.style.msTouchAction="none",It.setStyle(this._domElement,It.fontSmoothing,"antialiased"),this._allowCSSHacks&&(this._listenToOnlyElement||(document.onselectstart=()=>!1,document.body.style.msContentZooming="none"),It.setStyle(this._domElement,It.userDrag,"none"),It.setStyle(this._domElement,It.userSelect,"none"),It.setStyle(this._domElement,It.touchAction,"none"),It.setStyle(this._domElement,It.touchCallout,"none"),It.setStyle(this._domElement,It.tapHighlightColor,"rgba(0,0,0,0)"))}canvasDataURL(e){this.canvasSnapshot(t=>{e(t.toDataURL())})}canvasSnapshot(e){const t=document.createElement("canvas");t.width=this.size.width,t.height=this.size.height;const i=t.getContext("2d");this._rootNode.renderToCanvas(t,i,()=>{e(t,i.getImageData(0,0,t.width,t.height))},this.domElement.style.backgroundColor)}setPointerDisplayVisible(e){const t=!!this._pointerOverlay;e!==t&&(e?(this._pointerOverlay=new yB(this,this._rootNode),this.addOverlay(this._pointerOverlay)):(this.removeOverlay(this._pointerOverlay),this._pointerOverlay.dispose(),this._pointerOverlay=null))}setPointerAreaDisplayVisible(e){const t=!!this._pointerAreaOverlay;e!==t&&(e?(this._pointerAreaOverlay=new mB(this,this._rootNode),this.addOverlay(this._pointerAreaOverlay)):(this.removeOverlay(this._pointerAreaOverlay),this._pointerAreaOverlay.dispose(),this._pointerAreaOverlay=null))}setHitAreaDisplayVisible(e){const t=!!this._hitAreaOverlay;e!==t&&(e?(this._hitAreaOverlay=new Ph(this,this._rootNode),this.addOverlay(this._hitAreaOverlay)):(this.removeOverlay(this._hitAreaOverlay),this._hitAreaOverlay.dispose(),this._hitAreaOverlay=null))}setCanvasNodeBoundsVisible(e){const t=!!this._canvasAreaBoundsOverlay;e!==t&&(e?(this._canvasAreaBoundsOverlay=new iB(this,this._rootNode),this.addOverlay(this._canvasAreaBoundsOverlay)):(this.removeOverlay(this._canvasAreaBoundsOverlay),this._canvasAreaBoundsOverlay.dispose(),this._canvasAreaBoundsOverlay=null))}setFittedBlockBoundsVisible(e){const t=!!this._fittedBlockBoundsOverlay;e!==t&&(e?(this._fittedBlockBoundsOverlay=new sB(this,this._rootNode),this.addOverlay(this._fittedBlockBoundsOverlay)):(this.removeOverlay(this._fittedBlockBoundsOverlay),this._fittedBlockBoundsOverlay.dispose(),this._fittedBlockBoundsOverlay=null))}resizeOnWindowResize(){const e=()=>{this.setWidthHeight(self.innerWidth,self.innerHeight)};self.addEventListener("resize",e),e()}updateOnRequestAnimationFrame(e){let t=0,i=0;const s=this;(function r(){s._requestAnimationFrameID=self.requestAnimationFrame(r,s._domElement);const o=Date.now();t!==0&&(i=(o-t)/1e3),t=o;const c=document.timeline.currentTime;(c===null||c!==w2)&&(w2=c,fn.emit(i)),e&&e(i),s.updateDisplay()})()}cancelUpdateOnRequestAnimationFrame(){this._requestAnimationFrameID!==null&&self.cancelAnimationFrame(this._requestAnimationFrameID)}initializeEvents(e){const t=new fc(this,!this._listenToOnlyElement,this._batchDOMEvents,this._assumeFullWindow,this._passiveEvents,this._preventMultitouch,this._interruptMultitouch,e);this._input=t,t.connectListeners()}detachEvents(){this._input.disconnectListeners(),this._input=null}addInputListener(e){return te.includes(this._inputListeners,e)||this._inputListeners.push(e),this}removeInputListener(e){return this._inputListeners.splice(te.indexOf(this._inputListeners,e),1),this}hasInputListener(e){for(let t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}getInputListeners(){return this._inputListeners.slice(0)}get inputListeners(){return this.getInputListeners()}interruptInput(){const e=this.inputListeners;for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}return this}interruptPointers(){return this._input&&this._input.interruptPointers(),this}interruptOtherPointers(e=null){var t;return this._input&&this._input.interruptPointers(e||((t=this._input.currentSceneryEvent)==null?void 0:t.pointer)||null),this}ensureNotPainting(){}loseWebGLContexts(){(function e(t){t.blocks&&t.blocks.forEach(i=>{const s=i.gl;s&&Pi.loseContext(s);for(let r=i.firstDrawable;r!==null&&(e(r),r!==i.lastDrawable);r=r.nextDrawable);})})(this._rootBackbone)}getDebugHTML(){const e="font-weight: bold; font-size: 120%; margin-top: 5px;";let t=0,i="";i+=`<div style="${e}">Display (${this.id}) Summary</div>`,i+=`${this.size.toString()} frame:${this._frameId} input:${!!this._input} cursor:${this._lastCursor}<br/>`;function s(K){let M=1;for(let U=0;U<K.children.length;U++)M+=s(K.children[U]);return M}i+=`Nodes: ${s(this._rootNode)}<br/>`;function r(K){let M=1;for(let U=0;U<K.children.length;U++)M+=r(K.children[U]);return M}i+=this._baseInstance?`Instances: ${r(this._baseInstance)}<br/>`:"";function o(K){let M=1;if(K.blocks)te.each(K.blocks,U=>{M+=o(U)});else if(K.firstDrawable&&K.lastDrawable){for(let U=K.firstDrawable;U!==K.lastDrawable;U=U.nextDrawable)M+=o(U);M+=o(K.lastDrawable)}return M}i+=this._rootBackbone?`Drawables: ${o(this._rootBackbone)}<br/>`:"";const c={};function p(K){const M=K.constructor.name;c[M]?c[M]++:c[M]=1}function g(K){let M=0;K.selfDrawable&&(p(K.selfDrawable),M++),K.groupDrawable&&(p(K.groupDrawable),M++),K.sharedCacheDrawable&&(p(K.sharedCacheDrawable),M++);for(let U=0;U<K.children.length;U++)M+=g(K.children[U]);return M}i+=this._baseInstance?`Retained Drawables: ${g(this._baseInstance)}<br/>`:"";for(const K in c)i+=`&nbsp;&nbsp;&nbsp;&nbsp;${K}: ${c[K]}<br/>`;function A(K){if(!K.firstDrawable||!K.lastDrawable)return"";const M=K.domDrawable&&K.domDrawable.blocks;let U=`<div style="margin-left: ${t*20}px">`;if(U+=K.toString(),M||(U+=` (${K.drawableCount} drawables)`),U+="</div>",t+=1,M)for(let $=0;$<K.domDrawable.blocks.length;$++)U+=A(K.domDrawable.blocks[$]);return t-=1,U}if(this._rootBackbone){i+=`<div style="${e}">Block Summary</div>`;for(let K=0;K<this._rootBackbone.blocks.length;K++)i+=A(this._rootBackbone.blocks[K])}function C(K){let M="";function U(pe){M+=` <span style="color: #008">${pe}</span>`}const $=K.node;M+=K.id,M+=` ${$.constructor.name?$.constructor.name:"?"}`,M+=` <span style="font-weight: ${$.isPainted()?"bold":"normal"}">${$.id}</span>`,M+=$.getDebugHTMLExtras(),$.visible||U("invis"),K.visible||U("I-invis"),K.relativeVisible||U("I-rel-invis"),K.selfVisible||U("I-self-invis"),K.fittability.ancestorsFittable||U("nofit-ancestor"),K.fittability.selfFittable||U("nofit-self"),$.pickable===!0&&U("pickable"),$.pickable===!1&&U("unpickable"),K.trail.isPickable()&&U('<span style="color: #808">hits</span>'),$.getEffectiveCursor()&&U(`effectiveCursor:${$.getEffectiveCursor()}`),$.clipArea&&U("clipArea"),$.mouseArea&&U("mouseArea"),$.touchArea&&U("touchArea"),$.getInputListeners().length&&U("inputListeners"),$.getRenderer()&&U(`renderer:${$.getRenderer()}`),$.isLayerSplit()&&U("layerSplit"),$.opacity<1&&U(`opacity:${$.opacity}`),$.disabledOpacity<1&&U(`disabledOpacity:${$.disabledOpacity}`),$._boundsEventCount>0&&U(`<span style="color: #800">boundsListen:${$._boundsEventCount}:${$._boundsEventSelfCount}</span>`);let re="";switch($.transform.getMatrix().type){case dt.IDENTITY:re="";break;case dt.TRANSLATION_2D:re="translated";break;case dt.SCALING:re="scale";break;case dt.AFFINE:re="affine";break;case dt.OTHER:re="other";break;default:throw new Error(`invalid matrix type: ${$.transform.getMatrix().type}`)}return re&&(M+=` <span style="color: #88f" title="${$.transform.getMatrix().toString().replace(`
`,"&#10;")}">${re}</span>`),M+=` <span style="color: #888">[Trail ${K.trail.indices.join(".")}]</span>`,M+=` <span style="color: #8c8">${$._rendererSummary.bitmask.toString(16)}${$._rendererBitmask!==Se.bitmaskNodeDefault?` (${$._rendererBitmask.toString(16)})`:""}</span>`,M}function D(K){let M=K.toString();return K.visible&&(M=`<strong>${M}</strong>`),K.dirty&&(M+=K.dirty?' <span style="color: #c00;">[x]</span>':""),K.fittable||(M+=K.dirty?' <span style="color: #0c0;">[no-fit]</span>':""),M}function P(K){let M=`<div style="margin-left: ${t*20}px">`;function U($,re){M+=` <span style="color: #888">${$}:${D(re)}</span>`}M+=C(K),K.selfDrawable&&U("self",K.selfDrawable),K.groupDrawable&&U("group",K.groupDrawable),K.sharedCacheDrawable&&U("sharedCache",K.sharedCacheDrawable),M+="</div>",i+=M,t+=1,te.each(K.children,$=>{P($)}),t-=1}this._baseInstance&&(i+=`<div style="${e}">Root Instance Tree</div>`,P(this._baseInstance)),te.each(this._sharedCanvasInstances,K=>{i+=`<div style="${e}">Shared Canvas Instance Tree</div>`,P(K)});function F(K){let M=`<div style="margin-left: ${t*20}px">`;if(M+=D(K),K.instance?(M+=` <span style="color: #0a0;">(${K.instance.trail.toPathString()})</span>`,M+=`&nbsp;&nbsp;&nbsp;${C(K.instance)}`):K.backboneInstance&&(M+=` <span style="color: #a00;">(${K.backboneInstance.trail.toPathString()})</span>`,M+=`&nbsp;&nbsp;&nbsp;${C(K.backboneInstance)}`),M+="</div>",i+=M,K.blocks)t+=1,te.each(K.blocks,U=>{F(U)}),t-=1;else if(K.firstDrawable&&K.lastDrawable){t+=1;for(let U=K.firstDrawable;U!==K.lastDrawable;U=U.nextDrawable)F(U);F(K.lastDrawable),t-=1}}return this._rootBackbone&&(i+='<div style="font-weight: bold;">Root Drawable Tree</div>',F(this._rootBackbone)),i}getDebugURI(){return`data:text/html;charset=utf-8,${encodeURIComponent(`<!DOCTYPE html><html lang="en"><head><title>Scenery Debug Snapshot</title></head><body style="font-size: 12px;">${this.getDebugHTML()}</body></html>`)}`}popupDebug(){self.open(this.getDebugURI())}iframeDebug(){const e=document.createElement("iframe");e.width=""+self.innerWidth,e.height=""+self.innerHeight,e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.zIndex="10000",document.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.write(this.getDebugHTML()),e.contentWindow.document.close(),e.contentWindow.document.body.style.background="white";const t=document.createElement("button");t.style.position="absolute",t.style.top="0",t.style.right="0",t.style.zIndex="10001",document.body.appendChild(t),t.textContent="close",["pointerdown","click","touchdown"].forEach(i=>{t.addEventListener(i,()=>{document.body.removeChild(e),document.body.removeChild(t)},!0)})}getPDOMDebugHTML(){let e="";const t="font-weight: bold; font-size: 120%; margin-top: 5px;",i="&nbsp;&nbsp;&nbsp;&nbsp;";e+=`<div style="${t}">Accessible Instances</div><br>`,s(this._rootPDOMInstance,"");function s(p,g){e+=`${g+Cm(`${p.isRootInstance?"":p.node.tagName} ${p.toString()}`)}<br>`,p.children.forEach(A=>{s(A,g+i)})}e+=`<br><div style="${t}">Parallel DOM</div><br>`;let r=this._rootPDOMInstance.peer.primarySibling.outerHTML;r=r.replace(/></g,`>
<`);const o=r.split(`
`);let c="";for(let p=0;p<o.length;p++){const g=o[p],A=g.startsWith("</");A&&(c=c.slice(i.length)),e+=`${c+Cm(g)}<br>`,A||(c+=i)}return e}foreignObjectRasterization(e){const t={};let i=0;function s(F){F.id||(F.id=`unknown-canvas-${i++}`),t[F.id]=F.toDataURL()}function r(F){if(F instanceof lo)te.each(F.blocks,K=>{r(K)});else if(F instanceof U0&&F.firstDrawable&&F.lastDrawable){for(let K=F.firstDrawable;K!==F.lastDrawable;K=K.nextDrawable)r(K);r(F.lastDrawable),(F instanceof Jf||F instanceof G0)&&F.canvas&&F.canvas instanceof self.HTMLCanvasElement&&s(F.canvas)}Hm&&F instanceof Hm&&(F.domElement instanceof self.HTMLCanvasElement&&s(F.domElement),Array.prototype.forEach.call(F.domElement.getElementsByTagName("canvas"),K=>{s(K)}))}r(this._rootBackbone);const o=document.implementation.createHTMLDocument("");o.documentElement.innerHTML=this.domElement.outerHTML,o.documentElement.setAttribute("xmlns",o.documentElement.namespaceURI),o.documentElement.appendChild(document.createElement("style")).innerHTML=`.${M0.ROOT_CLASS_NAME} { display:none; } `;let c=o.documentElement.getElementsByTagName("canvas");c=Array.prototype.slice.call(c);for(let F=0;F<c.length;F++){const K=c[F],M=K.style.cssText,U=o.createElement("img"),$=t[K.id];U.src=$,U.setAttribute("style",M),K.parentNode.replaceChild(U,K)}const p=this.width,g=this.height,A=()=>{pc.elementToSVGDataURL(o.documentElement,p,g,e)};let C=0,D=!1;const P=Array.prototype.slice.call(o.documentElement.getElementsByTagName("image"));for(let F=0;F<P.length;F++){const K=P[F],M=K.getAttribute("xlink:href");M.slice(0,5)!=="data:"&&(C++,D=!0,(()=>{const U=new self.Image,$=K;U.onload=()=>{const re=document.createElement("canvas");re.width=U.width,re.height=U.height,re.getContext("2d").drawImage(U,0,0),$.setAttribute("xlink:href",re.toDataURL()),--C===0&&A()},U.onerror=()=>{--C===0&&A()},U.src=M})())}D||A()}popupRasterization(){this.foreignObjectRasterization(e=>{e&&self.open(e)})}getTrailFromPDOMIndicesString(e){if(!this._rootPDOMInstance)return null;let t=this._rootPDOMInstance;const i=e.split(Yf);for(let s=0;s<i.length;s++){const r=Number(i[s]);if(t=t.children[r],!t)return null}return t&&t.trail?t.trail:null}refreshSVG(){this._refreshSVGEmitter.emit()}refreshSVGOnNextFrame(){this._refreshSVGPending=!0}dispose(){this._input&&this.detachEvents(),this._rootNode.removeRootedDisplay(this),this._accessible&&(Xr.keydownEmitter.removeListener(this._boundHandleFullScreenNavigation),this._rootPDOMInstance.dispose()),this._highlightVisibilityController&&this._highlightVisibilityController.dispose(),this._focusOverlay&&this._focusOverlay.dispose(),this.sizeProperty.dispose(),this._baseInstance&&this._baseInstance.dispose(),this.descriptionUtteranceQueue.dispose(),this.focusManager&&this.focusManager.dispose(),this.cancelUpdateOnRequestAnimationFrame()}static elementToSVGDataURL(e,t,i,s){const r=document.createElement("canvas"),o=r.getContext("2d");r.width=t,r.height=i;const c=new self.XMLSerializer().serializeToString(e),p=`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${i}"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">${c}</div></foreignObject></svg>`,g=new self.Image;g.onload=()=>{o.drawImage(g,0,0),s(r.toDataURL())},g.onerror=()=>{s(null)};const A=new Tk.TextEncoderLite("utf-8").encode(p),C=AB(A);g.src=`data:image/svg+xml;base64,${C}`}static assertSubtreeDisposed(e){}static addInputListener(e){te.includes(en.inputListeners,e)||en.inputListeners.push(e)}static removeInputListener(e){en.inputListeners.splice(te.indexOf(en.inputListeners,e),1)}static hasInputListener(e){return te.includes(en.inputListeners,e)}static interruptInput(){const e=en.inputListeners.slice(0);for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}}}pc.INTERRUPT_OTHER_POINTERS=n=>{var e,t,i;(i=(t=(e=self.phet)==null?void 0:e.joist)==null?void 0:t.display)==null||i.interruptOtherPointers(n==null?void 0:n.pointer)};var xc={},Lv={},co={};Object.defineProperty(co,"__esModule",{value:!0});co.arrayIncludes=CB;co.endsWith=SB;co.isRealNaN=Um;co.startsWith=VB;co.stringIncludes=wB;function VB(n,e,t){return n.substr(t||0,e.length)===e}function SB(n,e,t){var i=(t||n.length)-e.length,s=n.lastIndexOf(e,i);return s!==-1&&s===i}function wB(n,e,t){return n.indexOf(e,t||0)!==-1}function Um(n){return typeof n=="number"&&isNaN(n)}function CB(n,e,t){var i=n.length;if(i===0)return!1;for(var s=t|0,r=Um(e),o=s>=0?s:i+s;o<i;){var c=n[o++];if(c===e||r&&Um(c))return!0}return!1}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.copyPosition=r,n.default=o,n.feedPosition=t,n.findTextEnd=g,n.isWhitespaceChar=F,n.jumpPosition=i,n.lex=c,n.lexComment=C,n.lexSkipTag=$,n.lexTag=D,n.lexTagAttributes=M,n.lexTagName=K,n.lexText=A,n.makeInitialPosition=s;var e=co;function t(re,pe,ce){for(var T=re.index,Ce=re.index=T+ce,ze=T;ze<Ce;ze++){var be=pe.charAt(ze);be===`
`?(re.line++,re.column=0):re.column++}}function i(re,pe,ce){var T=ce-re.index;return t(re,pe,T)}function s(){return{index:0,column:0,line:0}}function r(re){return{index:re.index,line:re.line,column:re.column}}function o(re,pe){var ce={str:re,options:pe,position:s(),tokens:[]};return c(ce),ce.tokens}function c(re){for(var pe=re.str,ce=re.options.childlessTags,T=pe.length;re.position.index<T;){var Ce=re.position.index;if(A(re),re.position.index===Ce){var ze=(0,e.startsWith)(pe,"!--",Ce+1);if(ze)C(re);else{var be=D(re),Be=be.toLowerCase();(0,e.arrayIncludes)(ce,Be)&&$(be,re)}}}}var p=/[A-Za-z0-9]/;function g(re,pe){for(;;){var ce=re.indexOf("<",pe);if(ce===-1)return ce;var T=re.charAt(ce+1);if(T==="/"||T==="!"||p.test(T))return ce;pe=ce+1}}function A(re){var pe="text",ce=re.str,T=re.position,Ce=g(ce,T.index);if(Ce!==T.index){Ce===-1&&(Ce=ce.length);var ze=r(T),be=ce.slice(T.index,Ce);i(T,ce,Ce);var Be=r(T);re.tokens.push({type:pe,content:be,position:{start:ze,end:Be}})}}function C(re){var pe=re.str,ce=re.position,T=r(ce);t(ce,pe,4);var Ce=pe.indexOf("-->",ce.index),ze=Ce+3;Ce===-1&&(Ce=ze=pe.length);var be=pe.slice(ce.index,Ce);i(ce,pe,ze),re.tokens.push({type:"comment",content:be,position:{start:T,end:r(ce)}})}function D(re){var pe=re.str,ce=re.position;{var T=pe.charAt(ce.index+1),Ce=T==="/",ze=r(ce);t(ce,pe,Ce?2:1),re.tokens.push({type:"tag-start",close:Ce,position:{start:ze}})}var be=K(re);M(re);{var Be=pe.charAt(ce.index),xe=Be==="/";t(ce,pe,xe?2:1);var Qe=r(ce);re.tokens.push({type:"tag-end",close:xe,position:{end:Qe}})}return be}var P=/\s/;function F(re){return P.test(re)}function K(re){for(var pe=re.str,ce=re.position,T=pe.length,Ce=ce.index;Ce<T;){var ze=pe.charAt(Ce),be=!(F(ze)||ze==="/"||ze===">");if(be)break;Ce++}for(var Be=Ce+1;Be<T;){var xe=pe.charAt(Be),Qe=!(F(xe)||xe==="/"||xe===">");if(!Qe)break;Be++}i(ce,pe,Be);var Fe=pe.slice(Ce,Be);return re.tokens.push({type:"tag",content:Fe}),Fe}function M(re){for(var pe=re.str,ce=re.position,T=re.tokens,Ce=ce.index,ze=null,be=Ce,Be=[],xe=pe.length;Ce<xe;){var Qe=pe.charAt(Ce);if(ze){var Fe=Qe===ze;Fe&&(ze=null),Ce++;continue}var Ye=Qe==="/"||Qe===">";if(Ye){Ce!==be&&Be.push(pe.slice(be,Ce));break}var ut=F(Qe);if(ut){Ce!==be&&Be.push(pe.slice(be,Ce)),be=Ce+1,Ce++;continue}var Me=Qe==="'"||Qe==='"';if(Me){ze=Qe,Ce++;continue}Ce++}i(ce,pe,Ce);for(var Lt=Be.length,at="attribute",Pe=0;Pe<Lt;Pe++){var $e=Be[Pe],gt=$e.indexOf("=")===-1;if(gt){var oi=Be[Pe+1];if(oi&&(0,e.startsWith)(oi,"=")){if(oi.length>1){var Mt=$e+oi;T.push({type:at,content:Mt}),Pe+=1;continue}var Ni=Be[Pe+2];if(Pe+=1,Ni){var qt=$e+"="+Ni;T.push({type:at,content:qt}),Pe+=1;continue}}}if((0,e.endsWith)($e,"=")){var as=Be[Pe+1];if(as&&!(0,e.stringIncludes)(as,"=")){var qi=$e+as;T.push({type:at,content:qi}),Pe+=1;continue}var Vs=$e.slice(0,-1);T.push({type:at,content:Vs});continue}T.push({type:at,content:$e})}}var U=[].push;function $(re,pe){for(var ce=pe.str,T=pe.position,Ce=pe.tokens,ze=re.toLowerCase(),be=ce.length,Be=T.index;Be<be;){var xe=ce.indexOf("</",Be);if(xe===-1){A(pe);break}var Qe=r(T);i(Qe,ce,xe);var Fe={str:ce,position:Qe,tokens:[]},Ye=D(Fe);if(ze!==Ye.toLowerCase()){Be=Fe.position.index;continue}if(xe!==T.index){var ut=r(T);i(T,ce,xe),Ce.push({type:"text",content:ce.slice(ut.index,xe),position:{start:ut,end:r(T)}})}U.apply(Ce,Fe.tokens),i(T,ce,Fe.position.index);break}}})(Lv);var kv={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=t,n.hasTerminalParent=i,n.parse=r,n.rewindStack=s;var e=co;function t(o,c){var p={tagName:null,children:[]},g={tokens:o,options:c,cursor:0,stack:[p]};return r(g),p.children}function i(o,c,p){var g=p[o];if(g)for(var A=c.length-1;A>=0;){var C=c[A].tagName;if(C===o)break;if((0,e.arrayIncludes)(g,C))return!0;A--}return!1}function s(o,c,p,g){o[c].position.end=g;for(var A=c+1,C=o.length;A<C;A++)o[A].position.end=p;o.splice(c)}function r(o){for(var c=o.tokens,p=o.options,g=o.stack,A=g[g.length-1].children,C=c.length,D=o.cursor;D<C;){var P=c[D];if(P.type!=="tag-start"){A.push(P),D++;continue}var F=c[++D];D++;var K=F.content.toLowerCase();if(P.close){for(var M=g.length,U=!1;--M>-1;)if(g[M].tagName===K){U=!0;break}for(;D<C;){var $=c[D];if($.type!=="tag-end")break;D++}if(U){s(g,M,P.position.start,c[D-1].position.end);break}else continue}var re=(0,e.arrayIncludes)(p.closingTags,K),pe=re;if(pe){var ce=p.closingTagAncestorBreakers;pe=!i(K,g,ce)}if(pe)for(var T=g.length-1;T>0;){if(K===g[T].tagName){s(g,T,P.position.start,P.position.start);var Ce=T-1;A=g[Ce].children;break}T=T-1}for(var ze=[],be=void 0;D<C&&(be=c[D],be.type!=="tag-end");)ze.push(be.content),D++;D++;var Be=[],xe={start:P.position.start,end:be.position.end},Qe={type:"element",tagName:F.content,attributes:ze,children:Be,position:xe};A.push(Qe);var Fe=!(be.close||(0,e.arrayIncludes)(p.voidTags,K));if(Fe){var Ye=g.push({tagName:K,children:Be,position:xe}),ut={tokens:c,options:p,cursor:D,stack:g};r(ut),D=ut.cursor;var Me=g.length===Ye;Me&&(Qe.position.end=c[D-1].position.end)}}o.cursor=D}})(kv);var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.format=Nv;ou.formatAttributes=Mv;ou.splitHead=Bv;ou.unquote=Rv;function Bv(n,e){var t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]}function Rv(n){var e=n.charAt(0),t=n.length-1,i=e==='"'||e==="'";return i&&e===n.charAt(t)?n.slice(1,t):n}function Nv(n,e){return n.map(function(t){var i=t.type,s=i==="element"?{type:i,tagName:t.tagName.toLowerCase(),attributes:Mv(t.attributes),children:Nv(t.children,e)}:{type:i,content:t.content};return e.includePositions&&(s.position=t.position),s})}function Mv(n){return n.map(function(e){var t=Bv(e.trim(),"="),i=t[0],s=typeof t[1]=="string"?Rv(t[1]):null;return{key:i,value:s}})}var Ov={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.formatAttributes=t,n.toHTML=i;var e=co;function t(r,o){return r.reduce(function(c,p){var g=p.key,A=p.value;if(A===null)return"".concat(c," ").concat(g);var C;if(o){var D=A.indexOf('"')!==-1;C=D?"'":'"'}else{var P=A.indexOf("'")!==-1;C=P?'"':"'"}return"".concat(c," ").concat(g,"=").concat(C).concat(A).concat(C)},"")}function i(r,o){return r.map(function(c){if(c.type==="text")return c.content;if(c.type==="comment")return"<!--".concat(c.content,"-->");var p=c.tagName,g=c.attributes,A=c.children,C=(0,e.arrayIncludes)(o.voidTags,p.toLowerCase());return C?"<".concat(p).concat(t(g,o.preferDoubleQuoteAttributes),">"):"<".concat(p).concat(t(g,o.preferDoubleQuoteAttributes),">").concat(i(A,o),"</").concat(p,">")}).join("")}var s={toHTML:i};n.default=s})(Ov);var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.voidTags=Na.closingTags=Na.closingTagAncestorBreakers=Na.childlessTags=void 0;var PB=["style","script","template"];Na.childlessTags=PB;var EB=["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"];Na.closingTags=EB;var DB={li:["ul","ol","menu"],dt:["dl"],dd:["dl"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table"],td:["table"]};Na.closingTagAncestorBreakers=DB;var TB=["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];Na.voidTags=TB;Object.defineProperty(xc,"__esModule",{value:!0});var tm=xc.parse=BB;xc.parseDefaults=void 0;xc.stringify=RB;var IB=qv(Lv),xB=qv(kv),LB=ou,kB=Ov,Bd=Na;function qv(n){return n&&n.__esModule?n:{default:n}}var X0={voidTags:Bd.voidTags,closingTags:Bd.closingTags,childlessTags:Bd.childlessTags,closingTagAncestorBreakers:Bd.closingTagAncestorBreakers,includePositions:!1,preferDoubleQuoteAttributes:!1};xc.parseDefaults=X0;function BB(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X0,t=(0,IB.default)(n,e),i=(0,xB.default)(t,e);return(0,LB.format)(i,e)}function RB(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X0;return(0,kB.toHTML)(n,e)}const NB=["view","linked","string","none"],Fv=new hi("none",{tandem:Xe.GENERAL_VIEW.createTandem("phetioElementSelectionProperty"),phetioValueType:Hi,validValues:NB,phetioState:!1,phetioDocumentation:'Specifies how PhET-iO Elements are being selected. "view": the target view element, "linked": the corresponding linked element of the view element (if there is one), "string": select only string elements in the sim, "none": no active selection.'}),Hl=(n,e,t)=>{const i=`_${n}PendingOptions`,s=`_${n}IsConstructed`;return class extends t{constructor(...o){super(...o),this[s]=!0,this.mutate(this[i]),this[i]=void 0}mutate(o){return o&&!this[s]&&(this[i]=Ci(this[i]||{},te.pick(o,e)),o=te.omit(o,e)),super.mutate(o)}}},Rd=1e-9,Ym=["preferredWidth","minimumWidth","localPreferredWidth","localMinimumWidth","widthSizable"],ep=Yn(n=>{const e=Hl("WidthSizable",Ym,class extends n{constructor(...i){super(...i),this.preferredWidthProperty=new ui(null),this.minimumWidthProperty=new ui(null),this.localPreferredWidthProperty=new ui(null),this.localMinimumWidthProperty=new ui(null),this.isWidthResizableProperty=new ui(!0),this._preferredSizeChanging=!1,this._minimumSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock=!1,this._minimumSizeChangeAttemptDuringLock=!1,this._updatePreferredWidthListener=this._updatePreferredWidth.bind(this),this._updateLocalPreferredWidthListener=this._updateLocalPreferredWidth.bind(this),this._updateMinimumWidthListener=this._updateMinimumWidth.bind(this),this._updateLocalMinimumWidthListener=this._updateLocalMinimumWidth.bind(this),this.preferredWidthProperty.lazyLink(this._updateLocalPreferredWidthListener),this.localPreferredWidthProperty.lazyLink(this._updatePreferredWidthListener),this.minimumWidthProperty.lazyLink(this._updateLocalMinimumWidthListener),this.localMinimumWidthProperty.lazyLink(this._updateMinimumWidthListener),this.transformEmitter.addListener(this._updateLocalPreferredWidthListener),this.transformEmitter.addListener(this._updateMinimumWidthListener)}get preferredWidth(){return this.preferredWidthProperty.value}set preferredWidth(i){this.preferredWidthProperty.value=i}get localPreferredWidth(){return this.localPreferredWidthProperty.value}set localPreferredWidth(i){this.localPreferredWidthProperty.value=i}get minimumWidth(){return this.minimumWidthProperty.value}set minimumWidth(i){this.minimumWidthProperty.value=i}get localMinimumWidth(){return this.localMinimumWidthProperty.value}set localMinimumWidth(i){this.localMinimumWidthProperty.value=i}get widthSizable(){return this.isWidthResizableProperty.value}set widthSizable(i){this.isWidthResizableProperty.value=i}get extendsWidthSizable(){return!0}validateLocalPreferredWidth(){}_calculateLocalPreferredWidth(){return this.matrix.isAligned()&&this.preferredWidth!==null?Math.abs(this.transform.inverseDeltaX(this.preferredWidth)):null}_onReentrantPreferredWidth(){this._updateLocalPreferredWidthListener()}_updateLocalPreferredWidth(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0;do{this._preferredSizeChangeAttemptDuringLock=!1;const i=this._calculateLocalPreferredWidth();(this.localPreferredWidthProperty.value===null||i===null||Math.abs(this.localPreferredWidthProperty.value-i)>Rd)&&(this.localPreferredWidthProperty.value=i)}while(this._preferredSizeChangeAttemptDuringLock);this._preferredSizeChanging=!1}}_calculatePreferredWidth(){return this.matrix.isAligned()&&this.localPreferredWidth!==null?Math.abs(this.transform.transformDeltaX(this.localPreferredWidth)):null}_updatePreferredWidth(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0,this._preferredSizeChangeAttemptDuringLock=!1;const i=this._calculatePreferredWidth();(this.preferredWidthProperty.value===null||i===null||Math.abs(this.preferredWidthProperty.value-i)>Rd)&&(this.preferredWidthProperty.value=i),this._preferredSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock&&this._onReentrantPreferredWidth()}}_calculateLocalMinimumWidth(){return this.matrix.isAligned()&&this.minimumWidth!==null?Math.abs(this.transform.inverseDeltaX(this.minimumWidth)):null}_onReentrantLocalMinimumWidth(){this._updateMinimumWidthListener()}_updateLocalMinimumWidth(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0;const i=this._calculateLocalMinimumWidth();this._minimumSizeChangeAttemptDuringLock=!1,(this.localMinimumWidthProperty.value===null||i===null||Math.abs(this.localMinimumWidthProperty.value-i)>Rd)&&(this.localMinimumWidthProperty.value=i),this._minimumSizeChanging=!1,this._minimumSizeChangeAttemptDuringLock&&this._onReentrantLocalMinimumWidth()}}_calculateMinimumWidth(){return this.matrix.isAligned()&&this.localMinimumWidth!==null?Math.abs(this.transform.transformDeltaX(this.localMinimumWidth)):null}_updateMinimumWidth(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0;do{this._minimumSizeChangeAttemptDuringLock=!1;const i=this._calculateMinimumWidth();(this.minimumWidthProperty.value===null||i===null||Math.abs(this.minimumWidthProperty.value-i)>Rd)&&(this.minimumWidthProperty.value=i)}while(this._minimumSizeChangeAttemptDuringLock);this._minimumSizeChanging=!1}}mutate(i){return super.mutate(i)}});if(e.prototype._mutatorKeys){const t=e.prototype._mutatorKeys,i=Ym,s=t.indexOf(Tl[0]);e.prototype._mutatorKeys=[...t.slice(0,s),...i,...t.slice(s)]}return e}),MB=Yn(n=>class extends Ec(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyLine(){this.markPaintDirty()}markDirtyP1(){this.markPaintDirty()}markDirtyP2(){this.markPaintDirty()}markDirtyX1(){this.markPaintDirty()}markDirtyY1(){this.markPaintDirty()}markDirtyX2(){this.markPaintDirty()}markDirtyY2(){this.markPaintDirty()}});class Gm extends MB(zl){paintCanvas(e,t,i){const s=e.context;s.beginPath(),s.moveTo(t.x1,t.y1),s.lineTo(t.x2,t.y2),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e))}}es.mixInto(Gm);const OB=Yn(n=>class extends Dc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyLine(){this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}markDirtyP1(){this.dirtyX1=!0,this.dirtyY1=!0,this.markPaintDirty()}markDirtyP2(){this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}markDirtyX1(){this.dirtyX1=!0,this.markPaintDirty()}markDirtyY1(){this.dirtyY1=!0,this.markPaintDirty()}markDirtyX2(){this.dirtyX2=!0,this.markPaintDirty()}markDirtyY2(){this.dirtyY2=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyX1=!1,this.dirtyY1=!1,this.dirtyX2=!1,this.dirtyY2=!1}}),qB=!0;class zv extends OB(ru){initialize(e,t){super.initialize(e,t,!0,qB),this.svgElement=this.svgElement||document.createElementNS(Qi,"line")}updateSVGSelf(){const e=this.svgElement;this.dirtyX1&&e.setAttribute("x1",this.node.x1),this.dirtyY1&&e.setAttribute("y1",this.node.y1),this.dirtyX2&&e.setAttribute("x2",this.node.x2),this.dirtyY2&&e.setAttribute("y2",this.node.y2),this.updateFillStrokeStyle(e)}}es.mixInto(zv);const FB=["p1","p2","x1","y1","x2","y2"];class nf extends Xs{constructor(e,t,i,s,r){super(null),this._x1=0,this._y1=0,this._x2=0,this._y2=0,typeof e=="object"?e instanceof we?r=$u({x1:e.x,y1:e.y,x2:t.x,y2:t.y,strokePickable:!0},i):r=$u({strokePickable:!0},e):r=$u({x1:e,y1:t,x2:i,y2:s,strokePickable:!0},r),this.mutate(r)}setLine(e,t,i,s){this._x1=e,this._y1=t,this._x2=i,this._y2=s;const r=this._drawables.length;for(let o=0;o<r;o++)this._drawables[o].markDirtyLine();return this.invalidateLine(),this}setPoint1(e,t){typeof e=="number"?(this._x1=e,this._y1=t):(this._x1=e.x,this._y1=e.y);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyP1();return this.invalidateLine(),this}set p1(e){this.setPoint1(e)}get p1(){return new we(this._x1,this._y1)}setPoint2(e,t){typeof e=="number"?(this._x2=e,this._y2=t):(this._x2=e.x,this._y2=e.y);const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyP2();return this.invalidateLine(),this}set p2(e){this.setPoint2(e)}get p2(){return new we(this._x2,this._y2)}setX1(e){if(this._x1!==e){this._x1=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyX1();this.invalidateLine()}return this}set x1(e){this.setX1(e)}get x1(){return this.getX1()}getX1(){return this._x1}setY1(e){if(this._y1!==e){this._y1=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyY1();this.invalidateLine()}return this}set y1(e){this.setY1(e)}get y1(){return this.getY1()}getY1(){return this._y1}setX2(e){if(this._x2!==e){this._x2=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyX2();this.invalidateLine()}return this}set x2(e){this.setX2(e)}get x2(){return this.getX2()}getX2(){return this._x2}setY2(e){if(this._y2!==e){this._y2=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyY2();this.invalidateLine()}return this}set y2(e){this.setY2(e)}get y2(){return this.getY2()}getY2(){return this._y2}createLineShape(){return Tt.lineSegment(this._x1,this._y1,this._x2,this._y2).makeImmutable()}invalidateLine(){this._shape=null,this.invalidatePath()}containsPointSelf(e){return this._strokePickable?super.containsPointSelf(e):!1}canvasPaintSelf(e,t){Gm.prototype.paintCanvas(e,this,t)}computeShapeBounds(){if(this._stroke){const e=this.getLineCap(),t=this.getLineWidth()/2;if(e==="round")return new Je(Math.min(this._x1,this._x2)-t,Math.min(this._y1,this._y2)-t,Math.max(this._x1,this._x2)+t,Math.max(this._y1,this._y2)+t);{const i=this._x2-this._x1,s=this._y2-this._y1,r=Math.sqrt(i*i+s*s);if(r===0)return new Je(this._x1-t,this._y1-t,this._x2+t,this._y2+t);const o=t*i/r,c=t*s/r,p=Je.NOTHING.copy();return e==="butt"?(p.addCoordinates(this._x1-c,this._y1+o),p.addCoordinates(this._x1+c,this._y1-o),p.addCoordinates(this._x2-c,this._y2+o),p.addCoordinates(this._x2+c,this._y2-o)):(p.addCoordinates(this._x1-o-c,this._y1-c+o),p.addCoordinates(this._x1-o+c,this._y1-c-o),p.addCoordinates(this._x2+o-c,this._y2+c+o),p.addCoordinates(this._x2+o+c,this._y2+c-o)),p}}else{const e=Je.NOTHING.copy();return e.addCoordinates(this._x1,this._y1),e.addCoordinates(this._x2,this._y2),e}}createSVGDrawable(e,t){return zv.createFromPool(e,t)}createCanvasDrawable(e,t){return Gm.createFromPool(e,t)}setShape(e){if(e!==null)throw new Error("Cannot set the shape of a Line to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createLineShape()),this._shape}hasShape(){return!0}setShapeProperty(e){if(e!==null)throw new Error("Cannot set the shapeProperty of a Line to something non-null, it handles this itself");return this}mutate(e){return super.mutate(e)}getFillRendererBitmask(){return Se.bitmaskCanvas|Se.bitmaskSVG|Se.bitmaskDOM|Se.bitmaskWebGL}}nf.prototype._mutatorKeys=FB.concat(Xs.prototype._mutatorKeys);nf.prototype.drawableMarkFlags=Xs.prototype.drawableMarkFlags.concat(["line","p1","p2","x1","x2","y1","y2"]).filter(n=>n!=="shape");const zB=["normal","italic","oblique"],HB=["normal","small-caps"],KB=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],UB=["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"];class _s extends Gi{constructor(e){const t=lt()({style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"10px",lineHeight:"normal",family:"sans-serif",phetioType:_s.FontIO},e);super(t),this._style=t.style,this._variant=t.variant,this._weight=`${t.weight}`,this._stretch=t.stretch,this._size=_s.castSize(t.size),this._lineHeight=t.lineHeight,this._family=t.family,this._font=this.computeShorthand()}getFont(){return this._font}get font(){return this.getFont()}getStyle(){return this._style}get style(){return this.getStyle()}getVariant(){return this._variant}get variant(){return this.getVariant()}getWeight(){return this._weight}get weight(){return this.getWeight()}getStretch(){return this._stretch}get stretch(){return this.getStretch()}getSize(){return this._size}get size(){return this.getSize()}getNumericSize(){const e=this._size.match(/^(\d+)px$/);if(e)return Number(e[1]);const t=this._size.match(/^(\d+)pt$/);if(t)return .75*Number(t[1]);const i=this._size.match(/^(\d+)em$/);return i?Number(i[1])/16:12}get numericSize(){return this.getNumericSize()}getLineHeight(){return this._lineHeight}get lineHeight(){return this.getLineHeight()}getFamily(){return this._family}get family(){return this.getFamily()}copy(e){return new _s(Ci({style:this._style,variant:this._variant,weight:this._weight,stretch:this._stretch,size:this._size,lineHeight:this._lineHeight,family:this._family},e))}computeShorthand(){let e="";return this._style!=="normal"&&(e+=`${this._style} `),this._variant!=="normal"&&(e+=`${this._variant} `),this._weight!=="normal"&&(e+=`${this._weight} `),this._stretch!=="normal"&&(e+=`${this._stretch} `),e+=this._size,this._lineHeight!=="normal"&&(e+=`/${this._lineHeight}`),e+=` ${this._family}`,e}toCSS(){return this.getFont()}static castSize(e){return typeof e=="number"?`${e}px`:e}static isFontStyle(e){return zB.includes(e)}static isFontVariant(e){return HB.includes(e)}static isFontWeight(e){return KB.includes(e)}static isFontStretch(e){return UB.includes(e)}static fromCSS(e){const t={},i=te.filter(e.split(/[\x09\x0A\x0C\x0D\x20]/),s=>s.length>0);for(let s=0;s<i.length;s++){const r=i[s];if(r!=="normal")if(_s.isFontStyle(r))t.style=r;else if(_s.isFontVariant(r))t.variant=r;else if(_s.isFontWeight(r))t.weight=r;else if(_s.isFontStretch(r))t.stretch=r;else{const o=r.split(/\//);t.size=o[0],o[1]&&(t.lineHeight=o[1]),t.family=i.slice(s+1).join(" ");break}}return new _s(t)}}_s.DEFAULT=new _s;_s.FontIO=new Yt("FontIO",{valueType:_s,documentation:"Font handling for text drawing. Options:<ul><li><strong>style:</strong> normal      &mdash; normal | italic | oblique </li><li><strong>variant:</strong> normal    &mdash; normal | small-caps </li><li><strong>weight:</strong> normal     &mdash; normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 </li><li><strong>stretch:</strong> normal    &mdash; normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded </li><li><strong>size:</strong> 10px         &mdash; absolute-size | relative-size | length | percentage -- unitless number interpreted as px. absolute suffixes: cm, mm, in, pt, pc, px. relative suffixes: em, ex, ch, rem, vw, vh, vmin, vmax. </li><li><strong>lineHeight:</strong> normal &mdash; normal | number | length | percentage -- NOTE: Canvas spec forces line-height to normal </li><li><strong>family:</strong> sans-serif &mdash; comma-separated list of families, including generic families (serif, sans-serif, cursive, fantasy, monospace). ideally escape with double-quotes</li></ul>",toStateObject:n=>({style:n.getStyle(),variant:n.getVariant(),weight:n.getWeight(),stretch:n.getStretch(),size:n.getSize(),lineHeight:n.getLineHeight(),family:n.getFamily()}),fromStateObject(n){return new _s(n)},stateSchema:{style:Hi,variant:Hi,weight:Hi,stretch:Hi,size:Hi,lineHeight:Hi,family:Hi}});const C2="sceneryTextSizeContainer",P2="sceneryTextSizeElement";let Pa,aa;const E2={};let D2=!1;class xr{static approximateSVGBounds(e,t){if(!Pa.parentNode)if(document.body)document.body.appendChild(Pa);else throw new Error("No document.body and trying to get approximate SVG bounds of a Text node");xr.setSVGTextAttributes(aa,e,t);const i=aa.getBBox();return i.width===0&&i.height===0&&t.length>0?(D2||(D2=!0,console.log("WARNING: Guessing text bounds, is the simulation hidden? See https://github.com/phetsims/chipper/issues/768")),xr.guessSVGBounds(e,t)):new Je(i.x,i.y,i.x+i.width,i.y+i.height)}static guessSVGBounds(e,t){const i=e.getNumericSize(),s=e.weight==="bold";return new Je(0,-.9*i,(s?.435:.4)*i*t.length,.22*i)}static accurateCanvasBounds(e){const t=cc;t.font=e._font.toCSS(),t.direction="ltr";const i=t.measureText(e.renderedText);return new Je(-i.actualBoundingBoxLeft,-i.actualBoundingBoxAscent,i.actualBoundingBoxRight,i.actualBoundingBoxDescent)}static accurateCanvasBoundsFallback(e){const t=xr.approximateSVGBounds(e._font,e.renderedText);if(!e.renderedText.length||t.width===0)return t;const i=Pi.canvasAccurateBounds(s=>{if(s.font=e._font.toCSS(),s.direction="ltr",s.fillText(e.renderedText,0,0),e.hasPaintableStroke()){const r=new Lh(null,s);e.beforeCanvasStroke(r),s.strokeText(e.renderedText,0,0),e.afterCanvasStroke(r)}},{precision:.5,resolution:128,initialScale:32/Math.max(Math.abs(t.minX),Math.abs(t.minY),Math.abs(t.maxX),Math.abs(t.maxY))});return i.isFinite()?i:t}static getVerticalBounds(e){const t=e.toCSS();let i=E2[t];return i||(i=E2[t]=xr.approximateSVGBounds(e,"m")),i}static approximateCanvasWidth(e,t){const i=cc;return i.font=e.toCSS(),i.direction="ltr",i.measureText(t).width}static approximateHybridBounds(e,t){const i=xr.getVerticalBounds(e),s=xr.approximateCanvasWidth(e,t);return new Je(0,i.minY,s,i.maxY)}static approximateDOMBounds(e,t){const s=document.createElement("div");s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.setProperty("padding","0","important"),s.style.setProperty("margin","0","important"),s.style.display="hidden";const r=document.createElement("span");r.style.font=e.toCSS(),r.appendChild(t),r.setAttribute("direction","ltr");const o=document.createElement("div");o.style.verticalAlign="baseline",o.style.display="inline-block",o.style.width="0px",o.style.height="1024px",o.style.setProperty("margin","0","important"),o.style.setProperty("padding","0","important"),s.appendChild(r),s.appendChild(o),document.body.appendChild(s);const c=r.getBoundingClientRect(),p=s.getBoundingClientRect(),g=new Je(c.left,c.top-1024,c.right+1,c.bottom-1024).shiftedXY(-p.left,-p.top);return document.body.removeChild(s),g}static approximateImprovedDOMBounds(e,t){const i=document.createElement("div");i.style.display="inline-block",i.style.font=e.toCSS(),i.style.color="transparent",i.style.padding="0 !important",i.style.margin="0 !important",i.style.position="absolute",i.style.left="0",i.style.top="0",i.setAttribute("direction","ltr"),i.appendChild(t),document.body.appendChild(i);const s=new Je(i.offsetLeft,i.offsetTop,i.offsetLeft+i.offsetWidth+1,i.offsetTop+i.offsetHeight+1);document.body.removeChild(i);const r=xr.getVerticalBounds(e);return s.shiftedY(r.minY)}static setSVGTextAttributes(e,t,i){e.setAttribute("direction","ltr"),e.setAttribute("font-family",t.getFamily()),e.setAttribute("font-size",t.getSize()),e.setAttribute("font-style",t.getStyle()),e.setAttribute("font-weight",t.getWeight()),e.setAttribute("font-stretch",t.getStretch()),e.lastChild.nodeValue=i}static initializeTextBounds(){Pa=document.getElementById(C2),Pa||(Pa=document.createElementNS(Qi,"svg"),Pa.setAttribute("width","2"),Pa.setAttribute("height","2"),Pa.setAttribute("id",C2),Pa.setAttribute("style","visibility: hidden; pointer-events: none; position: absolute; left: -65535px; right: -65535px;")),aa=document.getElementById(P2),aa||(aa=document.createElementNS(Qi,"text"),aa.appendChild(document.createTextNode("")),aa.setAttribute("dominant-baseline","alphabetic"),aa.setAttribute("text-rendering","geometricPrecision"),aa.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),aa.setAttribute("id",P2),Pa.appendChild(aa))}}class Wm extends Ec(zl){paintCanvas(e,t,i){const s=e.context;(t.hasFill()||t.hasPaintableStroke())&&(e.setFont(t._font.getFont()),e.setDirection("ltr")),t.hasFill()&&(t.beforeCanvasFill(e),s.fillText(t.renderedText,0,0),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.strokeText(t.renderedText,0,0),t.afterCanvasStroke(e))}markDirtyText(){this.markPaintDirty()}markDirtyFont(){this.markPaintDirty()}markDirtyBounds(){this.markPaintDirty()}}es.mixInto(Wm);const Hv=Yn(n=>class extends Dc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyText=!0,this.dirtyFont=!0,this.dirtyBounds=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyText(){this.dirtyText=!0,this.markPaintDirty()}markDirtyFont(){this.dirtyFont=!0,this.markPaintDirty()}markDirtyBounds(){this.dirtyBounds=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyText=!1,this.dirtyFont=!1,this.dirtyBounds=!1}}),im=nt.pool.fetch();class Kv extends Hv(Ic){constructor(e,t){super(e,t),Pi.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement||(this.domElement=document.createElement("div"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0",this.domElement.setAttribute("dir","ltr"))}updateDOM(){const e=this.node,t=this.domElement;if(this.paintDirty&&(this.dirtyFont&&(t.style.font=e.getFont()),this.dirtyStroke&&(t.style.color=e.getCSSFill()),this.dirtyBounds&&(t.style.width=`${e.getSelfBounds().width}px`,t.style.height=`${e.getSelfBounds().height}px`),this.dirtyText&&(t.textContent=e.renderedText)),this.transformDirty||this.dirtyText||this.dirtyFont||this.dirtyBounds){const i=e.getSelfBounds().minY;im.set(this.getTransformMatrix());const s=nt.translation(0,i);im.multiplyMatrix(s),s.freeToPool(),Pi.applyPreparedTransform(im,t)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}es.mixInto(Kv);const YB=!0,GB=!qs.edge,T2=qs.safari;class Uv extends Hv(ru){initialize(e,t){if(super.initialize(e,t,!0,YB),this.hasLength=!1,!this.svgElement){const i=document.createElementNS(Qi,"text");if(this.text=i,T2){const s=document.createElementNS(Qi,"g");s.appendChild(i),this.svgElement=s,this.workaroundRect=document.createElementNS(Qi,"rect"),this.workaroundRect.setAttribute("fill","transparent"),s.appendChild(this.workaroundRect)}else this.svgElement=i;i.appendChild(document.createTextNode("")),i.setAttribute("dominant-baseline","alphabetic"),i.setAttribute("text-rendering","geometricPrecision"),i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("direction","ltr")}}updateSVGSelf(){const e=this.text;if(this.dirtyFont&&(e.setAttribute("font-family",this.node._font.getFamily()),e.setAttribute("font-size",this.node._font.getSize()),e.setAttribute("font-style",this.node._font.getStyle()),e.setAttribute("font-weight",this.node._font.getWeight()),e.setAttribute("font-stretch",this.node._font.getStretch())),this.dirtyText){let t=Pi.safariEmbeddingMarkWorkaround(this.node.renderedText);qs.firefox&&(t="​"+t),e.lastChild.nodeValue=t}if(this.dirtyBounds&&GB&&(this.node._boundsMethod!=="accurate"&&isFinite(this.node.selfBounds.width)?(this.hasLength||(this.hasLength=!0,e.setAttribute("lengthAdjust","spacingAndGlyphs")),e.setAttribute("textLength",this.node.selfBounds.width)):this.hasLength&&(this.hasLength=!1,e.removeAttribute("lengthAdjust"),e.removeAttribute("textLength")),T2)){const s=this.node.selfBounds.width*.2,r=this.node.selfBounds.height*.2;this.workaroundRect.setAttribute("x",this.node.selfBounds.minX-s),this.workaroundRect.setAttribute("y",this.node.selfBounds.minY-r),this.workaroundRect.setAttribute("width",this.node.selfBounds.width+2*s),this.workaroundRect.setAttribute("height",this.node.selfBounds.height+2*r)}this.updateFillStrokeStyle(e)}}es.mixInto(Uv);const j0="stringProperty",WB=["boundsMethod",j0,"string","font","fontWeight","fontFamily","fontStretch","fontStyle","fontSize"],XB=self.navigator.userAgent.includes("like Gecko) Version/5")&&self.navigator.userAgent.includes("Safari/");class Ms extends K0(At){constructor(e,t){super(),this._stringProperty=new Ra("",!0,this.onStringPropertyChange.bind(this)),this._font=_s.DEFAULT,this._boundsMethod="hybrid",this._isHTML=!1,this._cachedRenderedText=null;const i=$u({fill:"#000000",tandemNameSuffix:"Text",phetioType:Ms.TextIO,phetioVisiblePropertyInstrumented:!1},t);typeof e=="string"||typeof e=="number"?i.string=e:i.stringProperty=e,this.mutate(i),this.invalidateSupportedRenderers()}mutate(e){return super.mutate(e)}setString(e){return e=`${e}`,this._stringProperty.set(e),this}set string(e){this.setString(e)}get string(){return this.getString()}getString(){return this._stringProperty.value}getRenderedText(){return this._cachedRenderedText===null&&(this._cachedRenderedText=this.string.replace(" "," "),qs.edge&&(this._cachedRenderedText=Ms.simplifyEmbeddingMarks(this._cachedRenderedText))),this._cachedRenderedText}get renderedText(){return this.getRenderedText()}onStringPropertyChange(){this._cachedRenderedText=null;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyText();this.invalidateText()}setStringProperty(e){return this._stringProperty.setTargetProperty(e,this,Ms.STRING_PROPERTY_TANDEM_NAME)}set stringProperty(e){this.setStringProperty(e)}get stringProperty(){return this.getStringProperty()}getStringProperty(){return this._stringProperty}initializePhetioObject(e,t){const i=this.isPhetioInstrumented();super.initializePhetioObject(e,t),Xe.PHET_IO_ENABLED&&!i&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,Ms.STRING_PROPERTY_TANDEM_NAME,()=>new b1(this.string,Ci({phetioReadOnly:!0,tandem:this.tandem.createTandem(Ms.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},t.stringPropertyOptions)))}getPhetioMouseHitTarget(e=!1){return Fv.value==="string"?this.getStringPropertyPhetioMouseHitTarget(e):super.getPhetioMouseHitTarget(e)}getStringPropertyPhetioMouseHitTarget(e=!1){const t=this._stringProperty.getTargetProperty();return t instanceof Gi?t.getPhetioMouseHitTarget(e):"phetioNotSelectable"}setBoundsMethod(e){if(e!==this._boundsMethod){this._boundsMethod=e,this.invalidateSupportedRenderers();const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyBounds();this.invalidateText(),this.rendererSummaryRefreshEmitter.emit()}return this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}getTextRendererBitmask(){let e=0;return this._boundsMethod!=="fast"&&!this._isHTML&&(e|=Se.bitmaskCanvas),this._isHTML||(e|=Se.bitmaskSVG),e|=Se.bitmaskDOM,e}invalidateSupportedRenderers(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getTextRendererBitmask())}invalidateText(){this.invalidateSelf();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyBounds();this.invalidateSupportedRenderers()}updateSelfBounds(){let e;this._isHTML||XB&&this._boundsMethod!=="accurate"?e=xr.approximateDOMBounds(this._font,this.getDOMTextNode()):this._boundsMethod==="hybrid"?e=xr.approximateHybridBounds(this._font,this.renderedText):this._boundsMethod==="accurate"?e=xr.accurateCanvasBounds(this):e=xr.approximateSVGBounds(this._font,this.renderedText),this.hasStroke()&&e.dilate(this.getLineWidth()/2);const t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}invalidateStroke(){this.invalidateText(),super.invalidateStroke()}invalidateFill(){this.invalidateText(),super.invalidateFill()}canvasPaintSelf(e,t){Wm.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return Kv.createFromPool(e,t)}createSVGDrawable(e,t){return Uv.createFromPool(e,t)}createCanvasDrawable(e,t){return Wm.createFromPool(e,t)}getDOMTextNode(){if(this._isHTML){const e=document.createElement("span");return e.innerHTML=this.string,e}else return document.createTextNode(this.renderedText)}getSafeSelfBounds(){const t=this.getSelfBounds();return t.dilatedXY(1*t.width,1*t.height)}setFont(e){if(e!==(typeof e=="string"?this._font.toCSS():this._font)){this._font=typeof e=="string"?_s.fromCSS(e):e;const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyFont();this.invalidateText()}return this}set font(e){this.setFont(e)}get font(){return this.getFont()}getFont(){return this._font.getFont()}setFontWeight(e){return this.setFont(this._font.copy({weight:e}))}set fontWeight(e){this.setFontWeight(e)}get fontWeight(){return this.getFontWeight()}getFontWeight(){return this._font.getWeight()}setFontFamily(e){return this.setFont(this._font.copy({family:e}))}set fontFamily(e){this.setFontFamily(e)}get fontFamily(){return this.getFontFamily()}getFontFamily(){return this._font.getFamily()}setFontStretch(e){return this.setFont(this._font.copy({stretch:e}))}set fontStretch(e){this.setFontStretch(e)}get fontStretch(){return this.getFontStretch()}getFontStretch(){return this._font.getStretch()}setFontStyle(e){return this.setFont(this._font.copy({style:e}))}set fontStyle(e){this.setFontStyle(e)}get fontStyle(){return this.getFontStyle()}getFontStyle(){return this._font.getStyle()}setFontSize(e){return this.setFont(this._font.copy({size:e}))}set fontSize(e){this.setFontSize(e)}get fontSize(){return this.getFontSize()}getFontSize(){return this._font.getSize()}isPainted(){return!0}areSelfBoundsValid(){return this._boundsMethod==="accurate"}getDebugHTMLExtras(){return` "${Cm(this.renderedText)}"${this._isHTML?" (html)":""}`}dispose(){super.dispose(),this._stringProperty.dispose()}static embeddedDebugString(e){return e.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")}static simplifyEmbeddingMarks(e){const t={dir:null,children:[],parent:null};let i=t;for(let g=0;g<e.length;g++){const A=e.charAt(g);if(A===jB||A===QB){const C={dir:A,children:[],parent:i};i.children.push(C),i=C}else A===ZB?i=i.parent:i.children.push(A)}function s(g){for(let A=g.children.length-1;A>=0;A--){const C=g.children[A];typeof C!="string"&&g.dir===C.dir&&g.children.splice(A,1,...C.children)}}function r(g){g.children.length===1&&typeof g.children[0]!="string"&&g.children[0].dir&&(g.dir=g.children[0].dir,g.children=g.children[0].children)}function o(g){for(let A=g.children.length-1;A>=1;A--){const C=g.children[A-1],D=g.children[A];typeof D!="string"&&typeof C!="string"&&D.dir&&C.dir===D.dir&&(C.children=C.children.concat(D.children),g.children.splice(A,1),o(C))}}function c(g){if(typeof g!="string"){for(let A=0;A<g.children.length;A++)c(g.children[A]);r(g),s(g),o(g)}return g}function p(g){if(typeof g=="string")return g;const A=g.children.map(p).join("");return g.dir?`${g.dir+A}‬`:A}return p(c(t))}}Ms.STRING_PROPERTY_NAME=j0;Ms.STRING_PROPERTY_TANDEM_NAME=j0;Ms.prototype._mutatorKeys=[...Av,...WB,...At.prototype._mutatorKeys];Ms.prototype.drawableMarkFlags=[...At.prototype.drawableMarkFlags,...bv,"text","font","bounds"];const jB="‪",QB="‫",ZB="‬";xr.initializeTextBounds();Ms.TextIO=new Yt("TextIO",{valueType:Ms,supertype:At.NodeIO,documentation:"Text that is displayed in the simulation. TextIO has a nested PropertyIO.&lt;String&gt; for the current string value."});var tp={},Yv={};(function(n){n.__esModule=!0,n.default=new Uint8Array([0,14,8,0,0,0,0,0,0,2,26,160,229,85,123,52,155,89,191,62,223,76,47,51,83,151,94,166,85,37,50,180,40,90,169,170,106,16,249,74,141,26,138,150,22,173,72,85,21,37,65,67,93,34,73,59,84,181,110,167,40,53,69,234,78,221,239,151,144,124,69,27,21,196,61,42,33,82,247,75,80,18,137,92,63,109,231,172,179,230,59,231,172,175,255,159,223,218,235,253,173,189,222,223,222,239,243,252,158,103,239,151,61,14,233,27,235,4,144,3,181,176,77,104,63,60,32,226,147,58,99,171,10,168,110,247,49,59,239,75,220,214,144,85,255,18,249,119,24,246,87,182,99,224,81,146,162,97,74,74,208,150,54,85,123,132,109,85,105,182,95,103,82,218,29,177,107,71,12,243,46,60,207,162,45,84,28,57,229,87,249,86,110,24,8,32,155,203,6,159,233,187,176,7,17,212,103,33,143,145,57,213,241,131,135,205,164,199,83,197,89,231,155,79,14,142,140,222,140,5,108,6,172,42,207,201,29,116,100,101,71,27,29,241,206,121,116,214,104,62,231,177,233,174,195,183,162,244,52,214,244,222,202,160,78,84,118,252,228,251,121,59,116,99,69,167,165,69,241,46,202,121,72,192,13,115,128,236,153,126,51,37,64,80,191,57,240,123,25,189,182,195,7,248,47,110,69,131,15,57,223,122,100,112,118,244,214,99,8,131,54,157,243,187,182,201,144,189,229,247,151,106,251,126,221,13,227,244,145,39,185,14,233,143,25,9,167,174,81,14,32,49,54,122,237,202,123,78,12,111,148,208,236,62,3,129,117,152,182,97,54,166,229,14,230,223,237,52,151,229,198,236,250,195,123,166,40,62,97,224,43,236,139,138,30,223,1,29,122,100,80,158,15,213,175,57,91,126,129,243,86,252,164,249,252,206,171,111,255,74,17,27,126,55,89,90,119,148,103,121,88,243,197,113,236,46,135,238,83,228,239,172,75,43,223,237,186,177,92,249,88,152,122,47,251,47,160,242,183,169,234,69,31,214,242,176,57,99,90,208,245,23,178,171,199,53,181,139,218,254,123,243,75,197,95,218,114,219,59,206,234,55,211,130,125,250,221,207,119,166,58,187,199,247,16,10,177,53,24,47,228,54,99,104,141,238,159,43,228,188,115,242,107,251,247,153,101,88,56,45,252,168,26,181,215,236,135,103,102,192,200,253,71,110,69,125,218,247,103,163,186,246,151,28,253,83,0,157,8,149,95,119,94,13,45,202,78,216,38,157,29,47,215,60,159,93,161,120,51,230,242,239,255,83,129,85,45,224,95,64,253,159,162,226,52,128,223,166,41,78,245,27,11,129,157,150,255,2,50,241,111,209,135,221,227,126,140,248,170,100,85,219,17,37,191,170,118,149,21,208,116,238,191,10,255,31,230,113,167,222,237,48,45,120,225,158,240,165,105,178,245,163,238,242,188,138,111,45,244,255,198,194,134,223,76,191,177,59,234,223,72,154,244,44,241,167,215,107,246,255,222,237,137,255,59,68,9,95,28,65,56,153,156,120,255,195,4,86,181,171,91,250,162,231,103,253,238,170,115,253,251,117,74,13,190,118,11,226,153,80,244,234,39,121,131,161,254,191,31,56,89,187,202,94,197,17,49,216,245,213,221,228,173,167,254,161,28,231,119,78,17,237,83,76,151,47,9,250,117,118,148,194,223,126,37,210,252,154,20,190,166,182,211,68,108,88,243,59,230,85,218,98,228,210,167,55,6,188,73,225,223,96,193,227,38,141,26,43,197,190,239,137,205,43,74,174,131,227,12,192,200,85,154,179,84,234,60,77,44,44,143,23,44,10,242,11,203,79,10,22,141,220,2,196,101,37,166,180,29,248,75,38,92,197,118,39,252,78,19,131,66,222,48,131,225,128,242,131,247,60,135,24,204,113,135,25,195,14,40,123,120,143,58,196,64,147,51,204,232,117,64,157,129,247,212,153,24,120,173,15,51,200,14,168,195,240,30,139,237,53,107,195,140,127,56,144,67,225,128,18,72,112,55,247,42,80,86,0,87,48,61,123,30,39,234,56,45,178,35,47,93,254,65,181,124,68,83,136,82,166,27,241,222,255,62,245,171,188,120,71,164,16,74,100,174,73,222,255,48,117,51,225,192,62,229,200,207,122,90,196,169,95,123,198,131,49,241,150,1,126,140,119,163,238,184,7,74,28,85,71,251,225,29,228,177,35,139,222,25,231,55,162,36,140,91,153,103,141,238,186,245,253,151,26,6,94,127,158,41,157,30,193,224,32,127,236,179,34,212,93,158,31,13,14,58,30,112,91,250,20,42,27,204,141,136,164,107,92,191,219,212,131,216,13,75,46,221,209,74,181,19,28,142,169,81,188,227,93,227,16,111,58,231,241,217,197,7,186,79,41,152,109,67,236,252,142,66,101,38,150,232,172,84,84,189,57,100,188,124,242,30,240,184,130,182,60,9,42,113,2,246,26,210,246,226,166,33,34,55,89,174,126,189,213,212,27,215,109,201,250,251,131,250,9,191,108,27,205,230,84,243,127,6,234,97,47,158,213,27,221,37,85,253,240,89,232,127,236,47,233,68,151,55,145,172,124,182,93,183,187,81,101,245,171,155,32,57,15,53,174,255,182,109,167,163,225,243,248,155,147,31,252,105,40,197,240,237,79,127,190,40,254,221,163,210,103,219,166,154,235,16,33,9,254,75,245,22,85,126,69,138,9,200,200,213,230,27,155,106,101,189,49,42,144,60,74,11,141,54,108,108,215,9,134,134,158,224,11,29,166,193,79,87,69,46,227,146,7,180,104,172,227,196,133,150,161,212,216,217,34,4,127,80,81,159,43,122,117,18,86,39,122,243,140,4,50,212,69,218,72,142,178,62,169,153,56,177,247,198,109,17,98,94,225,38,116,88,226,0,224,229,64,34,111,33,160,117,173,110,181,46,56,55,203,135,146,224,176,28,74,0,241,197,148,44,208,54,26,215,156,0,211,125,153,250,81,148,126,154,50,58,177,104,222,104,53,177,20,45,55,247,199,28,44,119,78,179,60,121,58,229,116,198,216,138,192,203,93,181,3,161,115,11,122,52,170,209,245,13,184,237,102,185,125,32,17,175,47,131,39,160,146,168,170,169,176,183,91,68,184,112,47,74,154,223,12,185,47,225,20,238,215,122,45,223,242,180,175,34,55,175,120,195,59,147,24,212,139,19,171,151,168,9,178,23,184,37,78,207,132,225,233,126,180,88,190,238,242,160,6,74,107,112,110,202,77,137,248,174,86,250,115,83,207,89,225,36,56,81,81,240,201,46,37,23,198,60,87,8,151,158,104,231,191,175,177,229,4,255,238,81,23,63,229,231,218,100,67,241,175,158,80,143,127,107,125,50,228,186,5,6,200,202,240,163,177,192,130,87,196,140,58,226,122,17,117,141,123,112,38,67,232,137,137,24,67,150,168,93,32,59,169,176,129,24,170,185,135,11,110,217,89,41,35,220,85,14,138,127,215,26,194,231,103,162,34,240,168,61,108,120,148,185,120,210,57,189,186,155,242,113,83,223,165,161,253,254,141,131,227,18,151,165,227,99,19,97,207,65,20,190,221,17,90,97,55,56,79,28,59,14,250,185,95,162,65,71,12,236,246,107,232,7,143,65,43,166,254,94,11,25,84,150,34,34,116,229,73,118,126,235,97,83,215,201,164,21,87,15,40,34,108,160,94,90,133,189,125,90,23,153,45,70,44,75,7,107,173,83,55,105,13,151,19,164,179,83,108,71,13,46,162,90,74,29,147,144,5,232,95,22,80,217,166,186,200,98,241,165,105,48,252,34,33,241,34,65,106,55,8,10,78,52,52,99,174,16,226,86,121,26,22,198,143,230,184,200,38,73,172,55,165,118,234,88,185,44,211,55,39,17,146,200,168,40,154,73,211,203,42,225,114,124,47,245,7,42,106,174,110,180,8,120,225,109,244,73,106,60,67,69,199,41,29,32,148,241,120,125,107,45,212,85,2,158,77,176,160,90,183,139,47,95,1,188,220,140,159,31,189,40,224,41,83,159,159,94,17,14,172,144,184,136,26,24,150,110,179,4,242,193,208,133,73,175,61,73,169,12,127,167,222,251,210,154,64,198,16,148,172,98,36,23,51,184,244,161,163,140,38,6,55,64,249,168,58,65,67,171,216,103,105,113,180,165,231,80,50,234,72,97,6,222,84,93,218,231,197,206,217,24,204,66,191,63,122,3,138,11,161,204,97,219,234,113,251,92,228,200,182,156,8,106,241,156,252,211,69,40,43,44,170,82,180,90,71,230,154,74,90,110,207,128,194,153,183,8,50,180,162,206,141,177,130,57,2,211,155,226,142,163,10,154,214,199,110,183,218,218,143,80,153,22,70,67,210,54,218,40,210,233,37,70,171,72,126,80,146,124,117,98,35,177,116,14,75,233,222,108,124,143,238,158,105,18,23,174,72,115,240,47,181,123,125,240,249,235,119,9,121,190,10,105,67,119,88,205,97,112,146,118,108,203,172,97,218,89,102,47,26,94,128,95,26,200,188,39,138,73,229,93,17,226,23,136,115,206,184,1,242,52,56,193,210,42,113,161,194,16,12,114,39,0,158,26,69,207,5,150,18,174,177,154,226,243,48,102,243,77,245,162,180,23,130,65,56,175,102,67,200,60,18,49,27,33,5,112,189,244,182,15,193,174,9,139,29,171,10,146,89,180,43,125,103,83,69,66,76,170,106,103,88,246,177,225,158,196,215,126,200,233,186,199,110,248,233,62,87,205,102,145,117,119,179,207,236,112,127,48,241,220,29,82,147,50,18,206,225,253,194,101,198,156,113,145,14,137,45,131,164,168,144,7,146,151,12,159,142,178,151,51,226,164,209,9,28,96,172,161,16,34,5,36,40,180,202,43,11,36,119,29,131,90,141,219,131,115,196,160,30,97,218,112,54,226,137,112,124,164,145,249,4,122,76,11,196,14,47,244,115,56,84,79,159,81,102,99,181,48,103,138,25,225,31,184,228,143,89,242,254,92,169,161,170,150,102,57,84,125,152,149,77,12,242,142,75,143,75,171,229,38,215,70,44,7,38,243,12,203,94,154,83,194,56,145,45,19,204,218,94,27,26,168,75,61,110,120,18,36,104,101,57,52,204,148,37,229,203,212,47,229,196,77,220,245,75,43,188,232,50,155,110,181,254,226,134,235,107,67,245,227,237,90,158,9,213,48,149,228,211,42,73,78,35,197,158,167,216,123,124,38,52,145,91,67,180,133,138,158,230,214,2,246,205,102,219,17,70,163,152,151,205,54,189,230,207,18,70,81,73,151,58,193,115,159,62,218,79,180,222,71,35,173,196,80,87,236,203,181,63,76,186,252,54,66,51,105,141,239,199,128,54,243,30,250,229,118,76,205,22,83,164,201,60,213,130,12,187,2,121,251,252,232,10,230,99,215,1,167,104,115,155,197,174,107,164,166,99,225,104,83,235,189,38,105,28,52,227,13,30,221,198,86,239,134,116,105,151,182,159,78,97,141,150,177,155,171,171,122,124,252,17,254,78,233,139,181,39,102,170,96,9,106,176,37,236,229,144,121,163,82,73,230,93,241,145,53,107,242,178,80,211,211,75,176,26,145,68,52,246,32,136,206,62,103,9,107,172,80,213,30,114,24,255,99,2,200,246,223,22,3,77,236,221,202,161,188,97,102,123,188,144,72,88,174,122,43,232,131,129,193,226,154,36,14,76,134,172,53,43,154,213,243,129,198,194,140,48,66,157,215,152,241,78,95,183,11,43,198,9,31,148,201,28,46,72,141,151,187,4,72,62,131,77,114,83,226,133,242,97,106,173,166,42,67,98,143,6,11,99,167,222,170,136,100,182,233,38,35,114,131,188,234,77,236,139,66,168,113,225,54,226,165,196,199,193,0,67,185,46,53,182,68,168,122,148,78,71,119,87,109,0,234,41,105,207,217,224,87,108,54,200,204,133,124,255,186,15,9,26,102,213,37,48,62,84,224,73,93,218,216,200,151,8,159,159,142,17,234,10,242,69,132,88,95,176,116,111,25,181,145,202,74,171,150,14,208,213,202,17,79,145,21,106,130,226,133,144,185,10,11,62,58,133,197,53,73,70,61,160,157,146,147,231,102,171,73,32,150,169,56,146,162,147,212,37,125,36,49,11,62,50,181,90,197,134,144,69,197,243,184,61,63,223,30,229,247,244,152,139,169,155,252,58,189,205,228,9,234,180,225,126,91,128,148,37,112,193,81,142,81,86,153,41,62,146,203,23,8,5,98,145,247,128,148,203,179,165,75,194,73,213,226,27,231,92,232,170,200,136,188,113,133,177,21,184,167,251,189,110,202,152,52,8,247,150,217,123,113,253,152,221,255,239,177,122,125,157,152,199,241,125,200,41,101,150,63,32,94,146,214,46,151,121,250,255,116,136,230,133,107,219,29,236,251,241,210,83,90,214,141,126,110,72,153,235,220,2,136,45,177,245,66,27,235,246,232,4,43,141,48,31,199,97,29,17,11,175,133,15,211,158,230,170,224,66,94,137,109,123,100,105,137,244,194,71,77,133,19,139,171,40,111,233,194,175,200,200,245,22,251,54,163,115,142,42,131,24,78,230,198,16,210,223,99,145,122,31,215,124,193,125,92,156,131,108,191,63,176,100,84,46,223,56,86,86,92,9,191,0,68,167,175,67,170,239,217,158,64,95,222,114,31,111,30,19,43,188,206,84,145,249,176,98,87,248,131,48,146,125,111,84,25,247,240,102,233,78,15,91,38,115,28,76,230,249,23,160,162,230,3,167,244,87,50,233,12,220,187,225,75,234,102,9,39,231,246,101,146,70,117,173,85,170,187,153,208,148,87,34,218,124,95,70,147,140,135,9,131,55,90,94,88,90,238,174,228,87,135,155,172,203,46,157,251,17,201,22,189,169,139,171,200,17,192,210,23,53,41,91,10,116,79,168,35,73,99,46,100,128,200,204,222,242,85,166,115,159,229,67,95,44,151,36,213,11,251,192,13,55,62,72,211,57,251,232,51,181,48,75,207,137,180,105,85,10,113,248,14,16,76,110,41,90,38,39,181,208,13,155,179,136,192,227,27,162,79,246,216,17,236,149,217,77,234,61,68,103,173,91,245,230,247,244,224,60,154,83,128,112,2,60,225,175,155,45,166,14,111,95,151,79,86,120,201,189,177,5,0,92,253,210,187,107,128,165,224,176,37,84,249,137,96,151,14,9,156,185,59,5,129,79,77,155,175,207,186,194,115,73,176,208,32,199,229,232,131,88,252,224,4,189,148,77,231,128,82,73,117,2,148,206,117,138,110,150,159,213,97,85,169,138,38,108,206,104,82,68,174,2,92,179,71,173,21,158,52,44,129,119,16,249,35,21,56,198,152,8,108,119,94,248,54,115,176,37,111,19,116,157,67,141,175,132,233,102,186,21,84,182,216,118,163,212,48,192,227,190,4,122,202,12,63,153,219,178,144,15,36,181,137,242,182,28,63,80,240,10,201,97,158,127,160,76,89,190,177,47,112,99,229,58,74,136,0,107,219,98,194,154,49,185,161,94,170,109,142,43,235,168,205,30,146,126,34,194,56,252,247,232,184,131,151,53,235,233,69,157,236,26,88,234,105,107,52,3,100,76,231,166,123,145,32,158,112,36,65,20,198,163,212,250,137,140,91,80,167,198,37,194,61,7,235,155,216,247,50,80,232,41,193,118,206,127,118,199,21,107,114,128,62,197,97,180,97,111,235,228,206,47,59,116,29,9,121,121,127,188,26,65,83,63,119,86,218,153,139,176,11,236,45,85,163,4,197,250,209,166,202,234,240,236,48,92,146,215,62,80,198,52,19,93,9,195,133,17,162,55,252,53,214,141,164,222,132,214,174,62,59,63,184,97,227,237,48,188,188,20,244,79])})(Yv);var Gv={},Wv={};(function(n){n.__esModule=!0;var e=0,t=-3,i=function(){function be(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}return be}();n.Tree=i;var s=function(){function be(Be,xe){this.source=Be,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=xe,this.destLen=0,this.ltree=new i,this.dtree=new i}return be}();n.Data=s;var r=new i,o=new i,c=new Uint8Array(30),p=new Uint16Array(30),g=new Uint8Array(30),A=new Uint16Array(30),C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),D=new i,P=new Uint8Array(320);function F(be,Be,xe,Qe){var Fe,Ye;for(Fe=0;Fe<xe;++Fe)be[Fe]=0;for(Fe=0;Fe<30-xe;++Fe)be[Fe+xe]=Fe/xe|0;for(Ye=Qe,Fe=0;Fe<30;++Fe)Be[Fe]=Ye,Ye+=1<<be[Fe]}function K(be,Be){var xe;for(xe=0;xe<7;++xe)be.table[xe]=0;for(be.table[7]=24,be.table[8]=152,be.table[9]=112,xe=0;xe<24;++xe)be.trans[xe]=256+xe;for(xe=0;xe<144;++xe)be.trans[24+xe]=xe;for(xe=0;xe<8;++xe)be.trans[168+xe]=280+xe;for(xe=0;xe<112;++xe)be.trans[176+xe]=144+xe;for(xe=0;xe<5;++xe)Be.table[xe]=0;for(Be.table[5]=32,xe=0;xe<32;++xe)Be.trans[xe]=xe}var M=new Uint16Array(16);function U(be,Be,xe,Qe){var Fe,Ye;for(Fe=0;Fe<16;++Fe)be.table[Fe]=0;for(Fe=0;Fe<Qe;++Fe)be.table[Be[xe+Fe]]++;for(be.table[0]=0,Ye=0,Fe=0;Fe<16;++Fe)M[Fe]=Ye,Ye+=be.table[Fe];for(Fe=0;Fe<Qe;++Fe)Be[xe+Fe]&&(be.trans[M[Be[xe+Fe]]++]=Fe)}function $(be){be.bitcount--||(be.tag=be.source[be.sourceIndex++],be.bitcount=7);var Be=be.tag&1;return be.tag>>>=1,Be}function re(be,Be,xe){if(!Be)return xe;for(;be.bitcount<24;)be.tag|=be.source[be.sourceIndex++]<<be.bitcount,be.bitcount+=8;var Qe=be.tag&65535>>>16-Be;return be.tag>>>=Be,be.bitcount-=Be,Qe+xe}function pe(be,Be){for(;be.bitcount<24;)be.tag|=be.source[be.sourceIndex++]<<be.bitcount,be.bitcount+=8;var xe=0,Qe=0,Fe=0,Ye=be.tag;do Qe=2*Qe+(Ye&1),Ye>>>=1,++Fe,xe+=Be.table[Fe],Qe-=Be.table[Fe];while(Qe>=0);return be.tag=Ye,be.bitcount-=Fe,Be.trans[xe+Qe]}function ce(be,Be,xe){var Qe,Fe,Ye,ut,Me,Lt;for(Qe=re(be,5,257),Fe=re(be,5,1),Ye=re(be,4,4),ut=0;ut<19;++ut)P[ut]=0;for(ut=0;ut<Ye;++ut){var at=re(be,3,0);P[C[ut]]=at}for(U(D,P,0,19),Me=0;Me<Qe+Fe;){var Pe=pe(be,D);switch(Pe){case 16:var $e=P[Me-1];for(Lt=re(be,2,3);Lt;--Lt)P[Me++]=$e;break;case 17:for(Lt=re(be,3,3);Lt;--Lt)P[Me++]=0;break;case 18:for(Lt=re(be,7,11);Lt;--Lt)P[Me++]=0;break;default:P[Me++]=Pe;break}}U(Be,P,0,Qe),U(xe,P,Qe,Fe)}function T(be,Be,xe){for(;;){var Qe=pe(be,Be);if(Qe===256)return e;if(Qe<256)be.dest[be.destLen++]=Qe;else{var Fe=void 0,Ye=void 0,ut=void 0,Me=void 0;for(Qe-=257,Fe=re(be,c[Qe],p[Qe]),Ye=pe(be,xe),ut=be.destLen-re(be,g[Ye],A[Ye]),Me=ut;Me<ut+Fe;++Me)be.dest[be.destLen++]=be.dest[Me]}}}function Ce(be){for(var Be,xe,Qe;be.bitcount>8;)be.sourceIndex--,be.bitcount-=8;if(Be=be.source[be.sourceIndex+1],Be=256*Be+be.source[be.sourceIndex],xe=be.source[be.sourceIndex+3],xe=256*xe+be.source[be.sourceIndex+2],Be!==(~xe&65535))return t;for(be.sourceIndex+=4,Qe=Be;Qe;--Qe)be.dest[be.destLen++]=be.source[be.sourceIndex++];return be.bitcount=0,e}function ze(be,Be){var xe=new s(be,Be),Qe,Fe,Ye;do{switch(Qe=$(xe),Fe=re(xe,2,0),Fe){case 0:Ye=Ce(xe);break;case 1:Ye=T(xe,r,o);break;case 2:ce(xe,xe.ltree,xe.dtree),Ye=T(xe,xe.ltree,xe.dtree);break;default:Ye=t}if(Ye!==e)throw new Error("Data error")}while(!Qe);return xe.destLen<xe.dest.length?typeof xe.dest.slice=="function"?xe.dest.slice(0,xe.destLen):xe.dest.subarray(0,xe.destLen):xe.dest}n.default=ze,K(r,o),F(c,p,4,3),F(g,A,2,1),c[28]=0,p[28]=258})(Wv);(function(n){n.__esModule=!0;var e=Wv,t=11,i=5,s=t-i,r=65536>>t,o=1<<s,c=o-1,p=2,g=1<<i,A=g-1,C=65536>>i,D=1024>>i,P=C+D,F=P,K=32,M=F+K,U=1<<p,$=function(){function re(pe){var ce=new DataView(pe.buffer);this.highStart=ce.getUint32(0),this.errorValue=ce.getUint32(4);var T=ce.getUint32(8);pe=pe.subarray(12),pe=e.default(pe,new Uint8Array(T)),pe=e.default(pe,new Uint8Array(T)),this.data=new Uint32Array(pe.buffer)}return re.prototype.get=function(pe){var ce;return pe<0||pe>1114111?this.errorValue:pe<55296||pe>56319&&pe<=65535?(ce=(this.data[pe>>i]<<p)+(pe&A),this.data[ce]):pe<=65535?(ce=(this.data[C+(pe-55296>>i)]<<p)+(pe&A),this.data[ce]):pe<this.highStart?(ce=this.data[M-r+(pe>>t)],ce=this.data[ce+(pe>>i&c)],ce=(ce<<p)+(pe&A),this.data[ce]):this.data[this.data.length-U]},re}();n.default=$})(Gv);var pi={};pi.__esModule=!0;pi.OP=0;pi.CL=1;pi.CP=2;pi.QU=3;pi.GL=4;pi.NS=5;pi.EX=6;pi.SY=7;pi.IS=8;pi.PR=9;pi.PO=10;pi.NU=11;pi.AL=12;pi.HL=13;pi.ID=14;pi.IN=15;pi.HY=16;pi.BA=17;pi.BB=18;pi.B2=19;pi.ZW=20;pi.CM=21;pi.WJ=22;pi.H2=23;pi.H3=24;pi.JL=25;pi.JV=26;pi.JT=27;pi.RI=28;pi.AI=29;pi.BK=30;pi.CB=31;pi.CJ=32;pi.CR=33;pi.LF=34;pi.NL=35;pi.SA=36;pi.SG=37;pi.SP=38;pi.XX=39;var Xv={};(function(n){n.__esModule=!0,n.DI_BRK=0,n.IN_BRK=1,n.CI_BRK=2,n.CP_BRK=3,n.PR_BRK=4,n.pairTable=[[n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.CP_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.PR_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK],[n.IN_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.DI_BRK],[n.DI_BRK,n.PR_BRK,n.PR_BRK,n.IN_BRK,n.IN_BRK,n.IN_BRK,n.PR_BRK,n.PR_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK,n.IN_BRK,n.DI_BRK,n.DI_BRK,n.PR_BRK,n.CI_BRK,n.PR_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.DI_BRK,n.IN_BRK]]})(Xv);tp.__esModule=!0;var JB=Yv,$B=Gv,Fi=pi,Nu=Xv,eR=new $B.default(JB.default);function I2(n){switch(n){case Fi.AI:return Fi.AL;case Fi.SA:case Fi.SG:case Fi.XX:return Fi.AL;case Fi.CJ:return Fi.NS;default:return n}}function x2(n){switch(n){case Fi.LF:case Fi.NL:return Fi.BK;case Fi.CB:return Fi.BA;case Fi.SP:return Fi.WJ;default:return n}}var Qu=function(){function n(e,t,i){i===void 0&&(i=!1),this.position=e,this.spacePos=t,this.required=i}return n}();tp.Break=Qu;var tR=function(){function n(e){this.node=e,this.pos=0,this.lastPos=0,this.curClass=null,this.nextClass=null}return n.prototype.nextCodePoint=function(){var e=this.node.charCodeAt(this.pos++),t=this.node.charCodeAt(this.pos);return 55296<=e&&e<=56319&&56320<=t&&t<=57343?(this.pos++,(e-55296)*1024+(t-56320)+65536):e},n.prototype.nextCharClass=function(e){return I2(eR.get(this.nextCodePoint()))},n.prototype.nextBreak=function(){var e=null,t=null,i=!1;for(this.curClass===null&&(this.curClass=x2(this.nextCharClass()));this.pos<this.node.length;){if(this.lastPos=this.pos,t=this.nextClass,this.nextClass=this.nextCharClass(),this.curClass===Fi.BK||this.curClass===Fi.CR&&this.nextClass!==Fi.LF)return this.curClass=x2(I2(this.nextClass)),new Qu(this.lastPos,this.lastPos,!0);var s=null;switch(this.nextClass){case Fi.SP:s=this.curClass;break;case Fi.BK:case Fi.LF:case Fi.NL:s=Fi.BK;break;case Fi.CR:s=Fi.CR;break;case Fi.CB:s=Fi.BA;break;default:s=null;break}if(this.nextClass===Fi.SP&&t!==Fi.SP&&(e=this.lastPos),s!==null){if(this.curClass=s,this.nextClass===Fi.CB)return new Qu(this.lastPos,e!==null?e:this.lastPos);continue}switch(Nu.pairTable[this.curClass][this.nextClass]){case Nu.DI_BRK:i=!0;break;case Nu.IN_BRK:i=t===Fi.SP;break;case Nu.CI_BRK:if(i=t===Fi.SP,!i)continue;break;case Nu.CP_BRK:if(t!==Fi.SP)continue;break}if(!i&&this.nextClass!==Fi.SP&&(e=null),this.curClass=this.nextClass,i)return new Qu(this.lastPos,e!==null?e:this.lastPos)}if(this.pos>=this.node.length)return this.lastPos<this.node.length?(this.lastPos=this.node.length,new Qu(this.node.length,e!==null?e:this.node.length)):null},n}();tp.LineBreaker=tR;var iR=tp,sR=iR.LineBreaker;const L2=(n,e)=>{const t=lt()({requiredOnly:!1},e),i=[],s=new sR(n);s[Symbol.iterator]=()=>({next(){const o=s.nextBreak();return o!==null?{value:o,done:!1}:{done:!0}}});let r=0;for(const o of s){const c=o.position;t.requiredOnly&&!o.required||(r!==c&&i.push(new xi(r,c)),r=o.position)}return r<n.length&&i.push(new xi(r,n.length)),i};var rf={exports:{}};/*! https://mths.be/he v1.1.1 by @mathias | MIT license */rf.exports;(function(n,e){(function(t){var i=e,s=n&&n.exports==i&&n,r=typeof zn=="object"&&zn;(r.global===r||r.window===r)&&(t=r);var o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[\x01-\x7F]/g,p=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,g=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,A={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","	":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon","ˆ":"circ","ˇ":"caron","°":"deg","©":"copy","®":"reg","℗":"copysr","℘":"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash","⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof","⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","𝒶":"ascr","𝕒":"aopf","𝔞":"afr","𝔸":"Aopf","𝔄":"Afr","𝒜":"Ascr",ª:"ordf",á:"aacute",Á:"Aacute",à:"agrave",À:"Agrave",ă:"abreve",Ă:"Abreve",â:"acirc",Â:"Acirc",å:"aring",Å:"angst",ä:"auml",Ä:"Auml",ã:"atilde",Ã:"Atilde",ą:"aogon",Ą:"Aogon",ā:"amacr",Ā:"Amacr",æ:"aelig",Æ:"AElig","𝒷":"bscr","𝕓":"bopf","𝔟":"bfr","𝔹":"Bopf",ℬ:"Bscr","𝔅":"Bfr","𝔠":"cfr","𝒸":"cscr","𝕔":"copf",ℭ:"Cfr","𝒞":"Cscr",ℂ:"Copf",ć:"cacute",Ć:"Cacute",ĉ:"ccirc",Ĉ:"Ccirc",č:"ccaron",Č:"Ccaron",ċ:"cdot",Ċ:"Cdot",ç:"ccedil",Ç:"Ccedil","℅":"incare","𝔡":"dfr","ⅆ":"dd","𝕕":"dopf","𝒹":"dscr","𝒟":"Dscr","𝔇":"Dfr","ⅅ":"DD","𝔻":"Dopf",ď:"dcaron",Ď:"Dcaron",đ:"dstrok",Đ:"Dstrok",ð:"eth",Ð:"ETH","ⅇ":"ee",ℯ:"escr","𝔢":"efr","𝕖":"eopf",ℰ:"Escr","𝔈":"Efr","𝔼":"Eopf",é:"eacute",É:"Eacute",è:"egrave",È:"Egrave",ê:"ecirc",Ê:"Ecirc",ě:"ecaron",Ě:"Ecaron",ë:"euml",Ë:"Euml",ė:"edot",Ė:"Edot",ę:"eogon",Ę:"Eogon",ē:"emacr",Ē:"Emacr","𝔣":"ffr","𝕗":"fopf","𝒻":"fscr","𝔉":"Ffr","𝔽":"Fopf",ℱ:"Fscr",ﬀ:"fflig",ﬃ:"ffilig",ﬄ:"ffllig",ﬁ:"filig",fj:"fjlig",ﬂ:"fllig",ƒ:"fnof",ℊ:"gscr","𝕘":"gopf","𝔤":"gfr","𝒢":"Gscr","𝔾":"Gopf","𝔊":"Gfr",ǵ:"gacute",ğ:"gbreve",Ğ:"Gbreve",ĝ:"gcirc",Ĝ:"Gcirc",ġ:"gdot",Ġ:"Gdot",Ģ:"Gcedil","𝔥":"hfr",ℎ:"planckh","𝒽":"hscr","𝕙":"hopf",ℋ:"Hscr",ℌ:"Hfr",ℍ:"Hopf",ĥ:"hcirc",Ĥ:"Hcirc",ℏ:"hbar",ħ:"hstrok",Ħ:"Hstrok","𝕚":"iopf","𝔦":"ifr","𝒾":"iscr","ⅈ":"ii","𝕀":"Iopf",ℐ:"Iscr",ℑ:"Im",í:"iacute",Í:"Iacute",ì:"igrave",Ì:"Igrave",î:"icirc",Î:"Icirc",ï:"iuml",Ï:"Iuml",ĩ:"itilde",Ĩ:"Itilde",İ:"Idot",į:"iogon",Į:"Iogon",ī:"imacr",Ī:"Imacr",ĳ:"ijlig",Ĳ:"IJlig",ı:"imath","𝒿":"jscr","𝕛":"jopf","𝔧":"jfr","𝒥":"Jscr","𝔍":"Jfr","𝕁":"Jopf",ĵ:"jcirc",Ĵ:"Jcirc","ȷ":"jmath","𝕜":"kopf","𝓀":"kscr","𝔨":"kfr","𝒦":"Kscr","𝕂":"Kopf","𝔎":"Kfr",ķ:"kcedil",Ķ:"Kcedil","𝔩":"lfr","𝓁":"lscr",ℓ:"ell","𝕝":"lopf",ℒ:"Lscr","𝔏":"Lfr","𝕃":"Lopf",ĺ:"lacute",Ĺ:"Lacute",ľ:"lcaron",Ľ:"Lcaron",ļ:"lcedil",Ļ:"Lcedil",ł:"lstrok",Ł:"Lstrok",ŀ:"lmidot",Ŀ:"Lmidot","𝔪":"mfr","𝕞":"mopf","𝓂":"mscr","𝔐":"Mfr","𝕄":"Mopf",ℳ:"Mscr","𝔫":"nfr","𝕟":"nopf","𝓃":"nscr",ℕ:"Nopf","𝒩":"Nscr","𝔑":"Nfr",ń:"nacute",Ń:"Nacute",ň:"ncaron",Ň:"Ncaron",ñ:"ntilde",Ñ:"Ntilde",ņ:"ncedil",Ņ:"Ncedil","№":"numero",ŋ:"eng",Ŋ:"ENG","𝕠":"oopf","𝔬":"ofr",ℴ:"oscr","𝒪":"Oscr","𝔒":"Ofr","𝕆":"Oopf",º:"ordm",ó:"oacute",Ó:"Oacute",ò:"ograve",Ò:"Ograve",ô:"ocirc",Ô:"Ocirc",ö:"ouml",Ö:"Ouml",ő:"odblac",Ő:"Odblac",õ:"otilde",Õ:"Otilde",ø:"oslash",Ø:"Oslash",ō:"omacr",Ō:"Omacr",œ:"oelig",Œ:"OElig","𝔭":"pfr","𝓅":"pscr","𝕡":"popf",ℙ:"Popf","𝔓":"Pfr","𝒫":"Pscr","𝕢":"qopf","𝔮":"qfr","𝓆":"qscr","𝒬":"Qscr","𝔔":"Qfr",ℚ:"Qopf",ĸ:"kgreen","𝔯":"rfr","𝕣":"ropf","𝓇":"rscr",ℛ:"Rscr",ℜ:"Re",ℝ:"Ropf",ŕ:"racute",Ŕ:"Racute",ř:"rcaron",Ř:"Rcaron",ŗ:"rcedil",Ŗ:"Rcedil","𝕤":"sopf","𝓈":"sscr","𝔰":"sfr","𝕊":"Sopf","𝔖":"Sfr","𝒮":"Sscr","Ⓢ":"oS",ś:"sacute",Ś:"Sacute",ŝ:"scirc",Ŝ:"Scirc",š:"scaron",Š:"Scaron",ş:"scedil",Ş:"Scedil",ß:"szlig","𝔱":"tfr","𝓉":"tscr","𝕥":"topf","𝒯":"Tscr","𝔗":"Tfr","𝕋":"Topf",ť:"tcaron",Ť:"Tcaron",ţ:"tcedil",Ţ:"Tcedil","™":"trade",ŧ:"tstrok",Ŧ:"Tstrok","𝓊":"uscr","𝕦":"uopf","𝔲":"ufr","𝕌":"Uopf","𝔘":"Ufr","𝒰":"Uscr",ú:"uacute",Ú:"Uacute",ù:"ugrave",Ù:"Ugrave",ŭ:"ubreve",Ŭ:"Ubreve",û:"ucirc",Û:"Ucirc",ů:"uring",Ů:"Uring",ü:"uuml",Ü:"Uuml",ű:"udblac",Ű:"Udblac",ũ:"utilde",Ũ:"Utilde",ų:"uogon",Ų:"Uogon",ū:"umacr",Ū:"Umacr","𝔳":"vfr","𝕧":"vopf","𝓋":"vscr","𝔙":"Vfr","𝕍":"Vopf","𝒱":"Vscr","𝕨":"wopf","𝓌":"wscr","𝔴":"wfr","𝒲":"Wscr","𝕎":"Wopf","𝔚":"Wfr",ŵ:"wcirc",Ŵ:"Wcirc","𝔵":"xfr","𝓍":"xscr","𝕩":"xopf","𝕏":"Xopf","𝔛":"Xfr","𝒳":"Xscr","𝔶":"yfr","𝓎":"yscr","𝕪":"yopf","𝒴":"Yscr","𝔜":"Yfr","𝕐":"Yopf",ý:"yacute",Ý:"Yacute",ŷ:"ycirc",Ŷ:"Ycirc",ÿ:"yuml",Ÿ:"Yuml","𝓏":"zscr","𝔷":"zfr","𝕫":"zopf",ℨ:"Zfr",ℤ:"Zopf","𝒵":"Zscr",ź:"zacute",Ź:"Zacute",ž:"zcaron",Ž:"Zcaron",ż:"zdot",Ż:"Zdot",Ƶ:"imped",þ:"thorn",Þ:"THORN",ŉ:"napos",α:"alpha",Α:"Alpha",β:"beta",Β:"Beta",γ:"gamma",Γ:"Gamma",δ:"delta",Δ:"Delta",ε:"epsi","ϵ":"epsiv",Ε:"Epsilon",ϝ:"gammad",Ϝ:"Gammad",ζ:"zeta",Ζ:"Zeta",η:"eta",Η:"Eta",θ:"theta",ϑ:"thetav",Θ:"Theta",ι:"iota",Ι:"Iota",κ:"kappa",ϰ:"kappav",Κ:"Kappa",λ:"lambda",Λ:"Lambda",μ:"mu",µ:"micro",Μ:"Mu",ν:"nu",Ν:"Nu",ξ:"xi",Ξ:"Xi",ο:"omicron",Ο:"Omicron",π:"pi",ϖ:"piv",Π:"Pi",ρ:"rho",ϱ:"rhov",Ρ:"Rho",σ:"sigma",Σ:"Sigma",ς:"sigmaf",τ:"tau",Τ:"Tau",υ:"upsi",Υ:"Upsilon",ϒ:"Upsi",φ:"phi",ϕ:"phiv",Φ:"Phi",χ:"chi",Χ:"Chi",ψ:"psi",Ψ:"Psi",ω:"omega",Ω:"ohm",а:"acy",А:"Acy",б:"bcy",Б:"Bcy",в:"vcy",В:"Vcy",г:"gcy",Г:"Gcy",ѓ:"gjcy",Ѓ:"GJcy",д:"dcy",Д:"Dcy",ђ:"djcy",Ђ:"DJcy",е:"iecy",Е:"IEcy",ё:"iocy",Ё:"IOcy",є:"jukcy",Є:"Jukcy",ж:"zhcy",Ж:"ZHcy",з:"zcy",З:"Zcy",ѕ:"dscy",Ѕ:"DScy",и:"icy",И:"Icy",і:"iukcy",І:"Iukcy",ї:"yicy",Ї:"YIcy",й:"jcy",Й:"Jcy",ј:"jsercy",Ј:"Jsercy",к:"kcy",К:"Kcy",ќ:"kjcy",Ќ:"KJcy",л:"lcy",Л:"Lcy",љ:"ljcy",Љ:"LJcy",м:"mcy",М:"Mcy",н:"ncy",Н:"Ncy",њ:"njcy",Њ:"NJcy",о:"ocy",О:"Ocy",п:"pcy",П:"Pcy",р:"rcy",Р:"Rcy",с:"scy",С:"Scy",т:"tcy",Т:"Tcy",ћ:"tshcy",Ћ:"TSHcy",у:"ucy",У:"Ucy",ў:"ubrcy",Ў:"Ubrcy",ф:"fcy",Ф:"Fcy",х:"khcy",Х:"KHcy",ц:"tscy",Ц:"TScy",ч:"chcy",Ч:"CHcy",џ:"dzcy",Џ:"DZcy",ш:"shcy",Ш:"SHcy",щ:"shchcy",Щ:"SHCHcy",ъ:"hardcy",Ъ:"HARDcy",ы:"ycy",Ы:"Ycy",ь:"softcy",Ь:"SOFTcy",э:"ecy",Э:"Ecy",ю:"yucy",Ю:"YUcy",я:"yacy",Я:"YAcy",ℵ:"aleph",ℶ:"beth",ℷ:"gimel",ℸ:"daleth"},C=/["&'<>`]/g,D={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},P=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,F=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,K=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)([=a-zA-Z0-9])?/g,M={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},U={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},$={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},re=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],pe=String.fromCharCode,ce={},T=ce.hasOwnProperty,Ce=function(Pe,$e){return T.call(Pe,$e)},ze=function(Pe,$e){for(var gt=-1,oi=Pe.length;++gt<oi;)if(Pe[gt]==$e)return!0;return!1},be=function(Pe,$e){if(!Pe)return $e;var gt={},oi;for(oi in $e)gt[oi]=Ce(Pe,oi)?Pe[oi]:$e[oi];return gt},Be=function(Pe,$e){var gt="";return Pe>=55296&&Pe<=57343||Pe>1114111?($e&&Fe("character reference outside the permissible Unicode range"),"�"):Ce($,Pe)?($e&&Fe("disallowed character reference"),$[Pe]):($e&&ze(re,Pe)&&Fe("disallowed character reference"),Pe>65535&&(Pe-=65536,gt+=pe(Pe>>>10&1023|55296),Pe=56320|Pe&1023),gt+=pe(Pe),gt)},xe=function(Pe){return"&#x"+Pe.toString(16).toUpperCase()+";"},Qe=function(Pe){return"&#"+Pe+";"},Fe=function(Pe){throw Error("Parse error: "+Pe)},Ye=function(Pe,$e){$e=be($e,Ye.options);var gt=$e.strict;gt&&F.test(Pe)&&Fe("forbidden code point");var oi=$e.encodeEverything,Mt=$e.useNamedReferences,Ni=$e.allowUnsafeSymbols,qt=$e.decimal?Qe:xe,as=function(qi){return qt(qi.charCodeAt(0))};return oi?(Pe=Pe.replace(c,function(qi){return Mt&&Ce(A,qi)?"&"+A[qi]+";":as(qi)}),Mt&&(Pe=Pe.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),Mt&&(Pe=Pe.replace(g,function(qi){return"&"+A[qi]+";"}))):Mt?(Ni||(Pe=Pe.replace(C,function(qi){return"&"+A[qi]+";"})),Pe=Pe.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),Pe=Pe.replace(g,function(qi){return"&"+A[qi]+";"})):Ni||(Pe=Pe.replace(C,as)),Pe.replace(o,function(qi){var Vs=qi.charCodeAt(0),Gt=qi.charCodeAt(1),fi=(Vs-55296)*1024+Gt-56320+65536;return qt(fi)}).replace(p,as)};Ye.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var ut=function(Pe,$e){$e=be($e,ut.options);var gt=$e.strict;return gt&&P.test(Pe)&&Fe("malformed character reference"),Pe.replace(K,function(oi,Mt,Ni,qt,as,qi,Vs,Gt){var fi,ft,vn,Ps,Ki,js;return Mt?(vn=Mt,ft=Ni,gt&&!ft&&Fe("character reference was not terminated by a semicolon"),fi=parseInt(vn,10),Be(fi,gt)):qt?(Ps=qt,ft=as,gt&&!ft&&Fe("character reference was not terminated by a semicolon"),fi=parseInt(Ps,16),Be(fi,gt)):qi?(Ki=qi,Ce(M,Ki)?M[Ki]:(gt&&Fe("named character reference was not terminated by a semicolon"),oi)):(Ki=Vs,js=Gt,js&&$e.isAttributeValue?(gt&&js=="="&&Fe("`&` did not start a character reference"),oi):(gt&&Fe("named character reference was not terminated by a semicolon"),U[Ki]+(js||"")))})};ut.options={isAttributeValue:!1,strict:!1};var Me=function(Pe){return Pe.replace(C,function($e){return D[$e]})},Lt={version:"1.1.1",encode:Ye,decode:ut,escape:Me,unescape:ut};if(i&&!i.nodeType)if(s)s.exports=Lt;else for(var at in Lt)Ce(Lt,at)&&(i[at]=Lt[at]);else t.he=Lt})(zn)})(rf,rf.exports);var nR=rf.exports;const rR=qf(nR),Xm=(n,e)=>{const t=rR.decode(n);return e===void 0?t:`${e?"‪":"‫"}${t}‬`},Lc=Yn(n=>class extends n{get isCleanable(){return!0}clean(){const t=this;for(let i=t._children.length-1;i>=0;i--){const s=t._children[i];t.removeChild(s),s.isCleanable&&s.clean()}t.matrix=nt.IDENTITY,t.freeToPool()}});class Vl extends Lc(At){constructor(e){super(),this.initialize(e)}initialize(e){return this.isLTR=e,this.leftSpacing=0,this.rightSpacing=0,this}addElement(e){const t=this.children.length>0,i=e.width>0,s=e.getScaleVector().x,r=e.leftSpacing*s,o=e.rightSpacing*s;if(!t&&!i)return!1;if(t)if(!i)this.isLTR?this.rightSpacing+=r+o:this.leftSpacing+=r+o;else return this.isLTR?(e.left=this.localRight+this.rightSpacing+r,this.rightSpacing=o):(e.right=this.localLeft-this.leftSpacing-o,this.leftSpacing=r),this.addChild(e),!0;else return this.isLTR?(e.left=0,this.leftSpacing=r,this.rightSpacing=o):(e.right=0,this.leftSpacing=r,this.rightSpacing=o),this.addChild(e),!0;return!1}addExtraBeforeSpacing(e){this.isLTR?this.leftSpacing+=e:this.rightSpacing+=e}freeToPool(){Vl.pool.freeToPool(this)}}Vl.pool=new us(Vl);const sm=n=>n.type.toLowerCase()==="element",nm=n=>n.type.toLowerCase()==="text",Pr={scratchText:new Ms(""),himalayaGetAttribute(n,e){if(!e)return null;const t=te.find(e.attributes,i=>i.key===n);return t&&t.value||null},himalayaStyleStringToMap(n){const e=n.split(";"),t={};return e.forEach(i=>{if(i.length>0){const s=i.split(":");t[s[0].trim()]=s[1].trim()}}),t}};class Io extends Lc(Ms){constructor(e,t,i,s,r,o,c){super(""),this.initialize(e,t,i,s,r,o,c)}initialize(e,t,i,s,r,o,c){let p="";for(;e.startsWith(" ");)p+=" ",e=e.slice(1);let g="";for(;e.endsWith(" ");)g=" ",e=e.slice(0,e.length-1);this.string=Xm(e,t),this.boundsMethod=s,this.font=i,this.fill=r,this.stroke=o,this.lineWidth=c;const A=p.length?Pr.scratchText.setString(p).setFont(i).width:0,C=g.length?Pr.scratchText.setString(g).setFont(i).width:0;return this.leftSpacing=t?A:C,this.rightSpacing=t?C:A,this}clean(){super.clean(),this.fill=null,this.stroke=null}fitsIn(e,t,i){return this.width+(t?i?this.leftSpacing:this.rightSpacing:0)<=e}freeToPool(){Io.pool.freeToPool(this)}}Io.pool=new us(Io);var Wb,Xb,jb,Qb,Zb;const jm=new di(!((Xb=(Wb=self==null?void 0:self.phet)==null?void 0:Wb.chipper)!=null&&Xb.queryParameters)||((Zb=(Qb=(jb=self==null?void 0:self.phet)==null?void 0:jb.chipper)==null?void 0:Qb.queryParameters)==null?void 0:Zb.allowLinks),{tandem:Xe.GENERAL_MODEL.createTandem("allowLinksProperty")});let aR=0;const oR=te.constant(!0),lR=n=>n.isPressed;class No extends Kf{constructor(e){const t=lt()({press:te.noop,release:te.noop,targetNode:null,drag:te.noop,attach:!0,mouseButton:0,pressCursor:"pointer",useInputListenerCursor:!1,canStartPress:oR,a11yLooksPressedInterval:100,collapseDragEvents:!1,phetioPressActionInstrumented:!0,phetioReleaseActionInstrumented:!0,phetioEnabledPropertyInstrumented:!1,tandem:Xe.REQUIRED,phetioReadOnly:!0,phetioFeatured:Gi.DEFAULT_OPTIONS.phetioFeatured},e);super(t),this._isPressListener=!0,this._id=aR++,this._mouseButton=t.mouseButton,this._a11yLooksPressedInterval=t.a11yLooksPressedInterval,this._pressCursor=t.pressCursor,this._pressListener=t.press,this._releaseListener=t.release,this._dragListener=t.drag,this._canStartPress=t.canStartPress,this._targetNode=t.targetNode,this._attach=t.attach,this._collapseDragEvents=t.collapseDragEvents,this.overPointers=Uf(),this.isPressedProperty=new di(!1,{reentrant:!0}),this.isOverProperty=new di(!1),this.isOverOrFocusedProperty=new di(!1),this.isHoveringProperty=new di(!1),this.isHighlightedProperty=new di(!1),this.isFocusedProperty=new di(!1),this.cursorProperty=new Oi([this.enabledProperty],i=>t.useInputListenerCursor&&i&&this._attach?this._pressCursor:null),this.pointer=null,this.pressedTrail=null,this.interrupted=!1,this._pendingCollapsedDragEvent=null,this._listeningToPointer=!1,this._isHoveringListener=this.invalidateHovering.bind(this),this._isHighlightedListener=this.invalidateHighlighted.bind(this),this.pdomClickingProperty=new di(!1),this.looksPressedProperty=Oi.or([this.pdomClickingProperty,this.isPressedProperty]),this._pdomClickingTimeoutListener=null,this._pointerListener={up:this.pointerUp.bind(this),cancel:this.pointerCancel.bind(this),move:this.pointerMove.bind(this),interrupt:this.pointerInterrupt.bind(this),listener:this},this._pressAction=new Ti(this.onPress.bind(this),{tandem:t.phetioPressActionInstrumented?t.tandem.createTandem("pressAction"):Xe.OPT_OUT,phetioDocumentation:"Executes whenever a press occurs. The first argument when executing can be used to convey info about the SceneryEvent.",phetioReadOnly:t.phetioReadOnly,phetioFeatured:t.phetioFeatured,phetioEventType:si.USER,parameters:[{name:"event",phetioType:uo.SceneryEventIO},{phetioPrivate:!0,valueType:[At,null]},{phetioPrivate:!0,valueType:["function",null]}]}),this._releaseAction=new Ti(this.onRelease.bind(this),{parameters:[{name:"event",phetioType:Zt(uo.SceneryEventIO)},{phetioPrivate:!0,valueType:["function",null]}],tandem:t.phetioReleaseActionInstrumented?t.tandem.createTandem("releaseAction"):Xe.OPT_OUT,phetioDocumentation:"Executes whenever a release occurs.",phetioReadOnly:t.phetioReadOnly,phetioFeatured:t.phetioFeatured,phetioEventType:si.USER}),this.display=null,this.boundInvalidateOverListener=this.invalidateOver.bind(this),this.overPointers.lengthProperty.link(this.invalidateOver.bind(this)),this.isFocusedProperty.link(this.invalidateOver.bind(this)),this.overPointers.lengthProperty.link(this._isHoveringListener),this.isPressedProperty.link(this._isHoveringListener),this.overPointers.addItemAddedListener(i=>i.isDownProperty.link(this._isHoveringListener)),this.overPointers.addItemRemovedListener(i=>i.isDownProperty.unlink(this._isHoveringListener)),this.isHoveringProperty.link(this._isHighlightedListener),this.isPressedProperty.link(this._isHighlightedListener),this.enabledProperty.lazyLink(this.onEnabledPropertyChange.bind(this))}get isPressed(){return this.isPressedProperty.value}get cursor(){return this.cursorProperty.value}get attach(){return this._attach}get targetNode(){return this._targetNode}getCurrentTarget(){return this.pressedTrail.lastNode()}get currentTarget(){return this.getCurrentTarget()}canPress(e){return!!this.enabledProperty.value&&!this.isPressed&&this._canStartPress(e,this)&&(!(e.pointer instanceof lc)||e.domEvent.button===this._mouseButton)&&(!this._attach||!e.pointer.isAttached())}canClick(){return this.enabledProperty.value&&!this.isPressed&&this._canStartPress(null,this)}press(e,t,i){return this.canPress(e)?(this.flushCollapsedDrag(),this._pressAction.execute(e,t||null,i||null),!0):!1}release(e,t){this.flushCollapsedDrag(),this._releaseAction.execute(e||null,t||null)}drag(e){this.isPressed&&this._dragListener(e,this)}interrupt(){this.pdomClickingProperty.value?(this.interrupted=!0,this._listeningToPointer?this.release():(this.isPressedProperty.value=!1,this._releaseListener(null,this)),fn.hasListener(this._pdomClickingTimeoutListener)&&(fn.clearTimeout(this._pdomClickingTimeoutListener),this.pdomClickingProperty.isDisposed||(this.pdomClickingProperty.value=!1))):this.isPressed&&(this.interrupted=!0,this.release())}clearOverPointers(){this.overPointers.clear()}step(){this.flushCollapsedDrag()}setCreatePanTargetBounds(e){this._pointerListener.createPanTargetBounds=e}set createPanTargetBounds(e){this.setCreatePanTargetBounds(e)}setCreatePanTargetBoundsFromTrail(e){this.setCreatePanTargetBounds(()=>e.localToGlobalBounds(e.lastNode().localBounds))}set createPanTargetBoundsFromTrail(e){this.setCreatePanTargetBoundsFromTrail(e)}flushCollapsedDrag(){this._pendingCollapsedDragEvent&&this.drag(this._pendingCollapsedDragEvent),this._pendingCollapsedDragEvent=null}invalidateOver(){let e=!1;if(this._listeningToPointer)e=!1;else for(let t=0;t<this.overPointers.length;t++)if(this.overPointers.get(t).isAttached()){e=!0;break}this.isOverProperty.value=this.overPointers.length>0&&!e,this.isOverOrFocusedProperty.value=this.isOverProperty.value||this.isFocusedProperty.value&&!!this.display&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.value}invalidateHovering(){for(let e=0;e<this.overPointers.length;e++){const t=this.overPointers[e];if(!t.isDown||t===this.pointer){this.isHoveringProperty.value=!0;return}}this.isHoveringProperty.value=!1}invalidateHighlighted(){this.isHighlightedProperty.value=this.isHoveringProperty.value||this.isPressedProperty.value}onEnabledPropertyChange(e){!e&&this.interrupt()}onPress(e,t,i){const s=t||this._targetNode;this.pointer=e.pointer,this.pressedTrail=s?s.getUniqueTrail():e.trail.subtrailTo(e.currentTarget,!1),this.interrupted=!1,this.pointer.addInputListener(this._pointerListener,this._attach),this._listeningToPointer=!0,this.pointer.cursor=this.pressedTrail.lastNode().getEffectiveCursor()||this._pressCursor,this.isPressedProperty.value=!0,this._pressListener(e,this),i&&i()}onRelease(e,t){const i=this;i.pointer.removeInputListener(this._pointerListener),this._listeningToPointer=!1,this.isPressedProperty.value=!1,this._releaseListener(e,this),t&&t(),i.pointer.cursor=null,this.pointer=null,this.pressedTrail=null}down(e){this.press(e)}up(e){this.invalidateOver(),this.invalidateHovering()}enter(e){this.overPointers.push(e.pointer)}move(e){this.invalidateOver()}exit(e){this.overPointers.includes(e.pointer)&&this.overPointers.remove(e.pointer)}pointerUp(e){this.isPressed&&this.release(e)}pointerCancel(e){this.isPressed&&this.interrupt()}pointerMove(e){this.isPressed&&(this._collapseDragEvents?this._pendingCollapsedDragEvent=e:this.drag(e))}pointerInterrupt(){this.interrupt()}click(e,t){return this.canClick()&&(this.interrupted=!1,this.pdomClickingProperty.value=!0,this.isFocusedProperty.value=!0,this.isPressedProperty.value=!0,this._pressListener(e,this),t&&t(),this.isPressedProperty.value=!1,this._releaseListener(e,this),fn.clearTimeout(this._pdomClickingTimeoutListener),this._pdomClickingTimeoutListener=fn.setTimeout(()=>{this.pdomClickingProperty.isDisposed||(this.pdomClickingProperty.value=!1)},this._a11yLooksPressedInterval)),!0}focus(e){const t=e.trail.rootNode().getRootedDisplays().filter(i=>i.isAccessible());this.display=t[0],this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)||this.display.focusManager.pdomFocusHighlightsVisibleProperty.link(this.boundInvalidateOverListener),this.isFocusedProperty.value=!0}blur(){this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),this.isFocusedProperty.value=!1}dispose(){this.overPointers.clear(),this._listeningToPointer&&lR(this)&&this.pointer.removeInputListener(this._pointerListener),this.isPressedProperty.isDisposed||(this.isPressedProperty.unlink(this._isHighlightedListener),this.isPressedProperty.unlink(this._isHoveringListener)),!this.isHoveringProperty.isDisposed&&this.isHoveringProperty.unlink(this._isHighlightedListener),this._pressAction.dispose(),this._releaseAction.dispose(),this.looksPressedProperty.dispose(),this.pdomClickingProperty.dispose(),this.cursorProperty.dispose(),this.isFocusedProperty.dispose(),this.isHighlightedProperty.dispose(),this.isHoveringProperty.dispose(),this.isOverOrFocusedProperty.dispose(),this.isOverProperty.dispose(),this.isPressedProperty.dispose(),this.overPointers.dispose(),this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),super.dispose()}}No.phetioAPI={pressAction:{phetioType:Ti.PhetioActionIO([uo.SceneryEventIO])},releaseAction:{phetioType:Ti.PhetioActionIO([Zt(uo.SceneryEventIO)])}};class af extends No{constructor(e){const t=lt()({fire:te.noop,fireOnDown:!1,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:Xe.REQUIRED,phetioPressActionInstrumented:!1,phetioReleaseActionInstrumented:!1,phetioReadOnly:!0},e);super(t),this._fireOnDown=t.fireOnDown,this.firedEmitter=new Os({tandem:t.tandem.createTandem("firedEmitter"),phetioEventType:si.USER,phetioReadOnly:t.phetioReadOnly,phetioDocumentation:"Emits at the time that the listener fires",parameters:[{name:"event",phetioType:Zt(uo.SceneryEventIO)}]}),this.firedEmitter.addListener(t.fire),t.fireOnHold&&(this._timer=new p1({callback:this.fire.bind(this,null),delay:t.fireOnHoldDelay,interval:t.fireOnHoldInterval}))}fire(e){this.firedEmitter.emit(e)}press(e,t,i){return super.press(e,t,()=>{this._fireOnDown&&this.fire(e),this._timer&&this._timer.start(),i&&i()})}release(e,t){super.release(e,()=>{const i=!this._fireOnDown&&this.isHoveringProperty.value&&!this.interrupted;this._timer?this._timer.stop(i):i&&this.fire(e||null),t&&t()})}click(e,t){return super.click(e,()=>{this.interrupted||this.fire(e),t&&t()})}interrupt(){super.interrupt(),this._timer&&this._timer.stop(!1)}dispose(){this.firedEmitter.dispose(),this._timer&&this._timer.dispose(),super.dispose()}}function hR(n,e=jm.value){const t=phet&&phet.chipper&&phet.chipper.isFuzzEnabled();if(e&&!t){const i=self.open(n,"_blank");i&&i.focus()}}const k2=["interactiveHighlight","interactiveHighlightLayerable","interactiveHighlightEnabled"],ip=n=>{const e=Hl("InteractiveHighlightingClass",k2,class extends n{constructor(...i){super(...i),this._pointer=null,this._forwardingHighlightForPointer=null,this.displays={},this._interactiveHighlight=null,this._interactiveHighlightLayerable=!1,this._interactiveHighlightEnabled=!0,this.interactiveHighlightChangedEmitter=new Ai,this._isInteractiveHighlightActiveProperty=new ui(!1),this._activationListener={enter:this._onPointerEntered.bind(this),over:this._onPointerOver.bind(this),move:this._onPointerMove.bind(this),exit:this._onPointerExited.bind(this),down:this._onPointerDown.bind(this)},this._changedInstanceListener=this.onChangedInstance.bind(this),this.changedInstanceEmitter.addListener(this._changedInstanceListener),this._interactiveHighlightingEnabledListener=this._onInteractiveHighlightingEnabledChange.bind(this),this._boundPointerFocusClearedListener=this.handleLockedPointerFocusCleared.bind(this);const s=this._onPointerRelease.bind(this),r=this._onPointerCancel.bind(this);this._pointerListener={up:s,cancel:r,interrupt:r},this.isInteractiveHighlightActiveProperty=this._isInteractiveHighlightActiveProperty}get _isInteractiveHighlighting(){return!0}static get _mixesInteractiveHighlighting(){return!0}setInteractiveHighlight(i){this._interactiveHighlight!==i&&(this._interactiveHighlight=i,this._interactiveHighlightLayerable&&(i.visible=!1),this.interactiveHighlightChangedEmitter.emit())}set interactiveHighlight(i){this.setInteractiveHighlight(i)}get interactiveHighlight(){return this.getInteractiveHighlight()}getInteractiveHighlight(){return this._interactiveHighlight}setInteractiveHighlightLayerable(i){this._interactiveHighlightLayerable!==i&&(this._interactiveHighlightLayerable=i,this._interactiveHighlight&&(this._interactiveHighlight.visible=!1,this.interactiveHighlightChangedEmitter.emit()))}set interactiveHighlightLayerable(i){this.setInteractiveHighlightLayerable(i)}get interactiveHighlightLayerable(){return this.getInteractiveHighlightLayerable()}getInteractiveHighlightLayerable(){return this._interactiveHighlightLayerable}setInteractiveHighlightEnabled(i){this._interactiveHighlightEnabled=i;const s=Object.keys(this.displays);for(let r=0;r<s.length;r++){const o=this.displays[s[r]];this._interactiveHighlightingEnabledListener(o.focusManager.pointerHighlightsVisibleProperty.value)}}getInteractiveHighlightEnabled(){return this._interactiveHighlightEnabled}set interactiveHighlightEnabled(i){this.setInteractiveHighlightEnabled(i)}get interactiveHighlightEnabled(){return this.getInteractiveHighlightEnabled()}isInteractiveHighlightActivated(){let i=!1;const s=Object.keys(this.displays);for(let r=0;r<s.length;r++){const o=this.displays[s[r]];if(o.focusManager.pointerHighlightsVisibleProperty.value){const c=o.focusManager.pointerFocusProperty.value,p=o.focusManager.lockedPointerFocusProperty.value;if(p){if((p==null?void 0:p.trail.lastNode())===this){i=!0;break}}else if((c==null?void 0:c.trail.lastNode())===this){i=!0;break}}}return i}handleHighlightActiveChange(){this._isInteractiveHighlightActiveProperty.value=this.isInteractiveHighlightActivated()}dispose(){this.changedInstanceEmitter.removeListener(this._changedInstanceListener),this.hasInputListener(this._activationListener)&&this.removeInputListener(this._activationListener),this._pointer&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null),this._forwardingHighlightForPointer=null;const i=Object.keys(this.displays);for(let s=0;s<i.length;s++){const r=this.displays[i[s]];this.onDisplayRemoved(r),delete this.displays[i[s]]}super.dispose&&super.dispose()}_onPointerOver(i){const s=i.trail.nodes.find(r=>r.groupFocusHighlight&&Ro(r));if(s){const r=i.trail.subtrailTo(s),o=Object.values(this.displays);for(let c=0;c<o.length;c++){const p=o[c];p.focusManager.pointerFocusProperty.value===null&&p.focusManager.pointerFocusProperty.set(new Ia(p,r))}}}_onPointerEntered(i){let s=!1;const r=Object.values(this.displays);for(let o=0;o<r.length;o++){const c=r[o];if(c.focusManager.pointerFocusProperty.value===null||!i.trail.equals(c.focusManager.pointerFocusProperty.value.trail)){const p=new Ia(c,i.trail);c.focusManager.pointerFocusProperty.set(p),c.focusManager.lockedPointerFocusProperty.value===null&&i.pointer.attachedListener&&(this.lockHighlight(p,c.focusManager),s=!0)}}s&&this.savePointer(i.pointer)}_onPointerMove(i){let s=!1;const r=Object.values(this.displays);for(let o=0;o<r.length;o++){const c=r[o],p=i.trail.subtrailTo(this);if((c.focusManager.pointerFocusProperty.value===null||!p.equals(c.focusManager.pointerFocusProperty.value.trail))&&!this.getDescendantsUseHighlighting(i.trail)){const g=new Ia(c,p);c.focusManager.pointerFocusProperty.set(g),c.focusManager.lockedPointerFocusProperty.value===null&&i.pointer.attachedListener&&(this.lockHighlight(g,c.focusManager),s=!0)}}s&&this.savePointer(i.pointer)}_onPointerExited(i){const s=Object.values(this.displays);for(let r=0;r<s.length;r++){const o=s[r];o.focusManager.pointerFocusProperty.set(null);const c=o.focusManager.lockedPointerFocusProperty.value;!i.trail.isPickable()&&(c===null||i.trail.containsNode(c.trail.lastNode()))&&this._onPointerRelease(i)}}_onPointerDown(i){if(this._pointer===null){let s=!1;const r=Object.values(this.displays);for(let o=0;o<r.length;o++){const c=r[o],p=c.focusManager.pointerFocusProperty.value,g=!!c.focusManager.lockedPointerFocusProperty.value;p&&!g&&(this.lockHighlight(p,c.focusManager),s=!0)}s&&this.savePointer(i.pointer)}}onDisplayAdded(i){i.focusManager.pointerHighlightsVisibleProperty.hasListener(this._interactiveHighlightingEnabledListener)||i.focusManager.pointerHighlightsVisibleProperty.link(this._interactiveHighlightingEnabledListener),this._forwardingHighlightForPointer&&(i.focusManager.pointerFocusProperty.value===null&&this.manualActivateAndLock(this._forwardingHighlightForPointer),this._forwardingHighlightForPointer=null)}onDisplayRemoved(i){i.focusManager.lockedPointerFocusProperty.hasListener(this._boundPointerFocusClearedListener)&&i.focusManager.lockedPointerFocusProperty.unlink(this._boundPointerFocusClearedListener),i.focusManager.pointerHighlightsVisibleProperty.unlink(this._interactiveHighlightingEnabledListener)}_onPointerRelease(i){const s=Object.values(this.displays);for(let r=0;r<s.length;r++){const o=s[r];o.focusManager.lockedPointerFocusProperty.value=null,o.focusManager.lockedPointerFocusProperty.hasListener(this._boundPointerFocusClearedListener)&&o.focusManager.lockedPointerFocusProperty.unlink(this._boundPointerFocusClearedListener)}this._pointer&&this._pointer.listeners.includes(this._pointerListener)&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null)}_onPointerCancel(i){const s=Object.values(this.displays);for(let r=0;r<s.length;r++)s[r].focusManager.pointerFocusProperty.set(null);this._onPointerRelease(i)}savePointer(i){this._pointer=i,this._pointer.addInputListener(this._pointerListener)}lockHighlight(i,s){s.lockedPointerFocusProperty.set(new Ia(i.display,i.trail.copy())),s.lockedPointerFocusProperty.link(this._boundPointerFocusClearedListener)}unlockHighlight(){Object.values(this.displays).forEach(i=>{i.focusManager.pointerFocusProperty.value=null}),this.handleLockedPointerFocusCleared(null)}forwardInteractiveHighlight(i){Object.values(this.displays).length===0?this._forwardingHighlightForPointer=i.pointer:Object.values(this.displays).forEach(s=>{s.focusManager.pointerFocusProperty.value===null&&this.manualActivateAndLock(i.pointer)})}manualActivateAndLock(i){const s=this.getTrails();if(s.length===1){const r=s[0],o=Object.values(this.displays);for(let c=0;c<o.length;c++){const p=o[c],g=new Ia(p,r);p.focusManager.pointerFocusProperty.set(g),this.lockHighlight(g,p.focusManager),this.savePointer(i)}}}handleLockedPointerFocusCleared(i){i===null&&this._onPointerRelease()}_onInteractiveHighlightingEnabledChange(i){const s=i&&this._interactiveHighlightEnabled,r=this.hasInputListener(this._activationListener);s&&!r?this.addInputListener(this._activationListener):!s&&r&&this.removeInputListener(this._activationListener),this.handleHighlightActiveChange()}onChangedInstance(i,s){const r=i.trail.uniqueId;if(s){const o=i.display;this.displays[r]=o,this.onDisplayAdded(o)}else{const o=this.displays[r];i.node.instances.length===0&&this.onDisplayRemoved(o),delete this.displays[r]}}getDescendantsUseHighlighting(i){const s=i.nodes.indexOf(this),r=i.nodes.slice(s+1,i.nodes.length);let o=!1;for(let c=0;c<r.length;c++)if(Ro(r[c])){o=!0;break}return o}mutate(i){return super.mutate(i)}});return e.prototype._mutatorKeys=k2.concat(e.prototype._mutatorKeys),e};ip.forwardInteractiveHighlightFromPress=(n,e)=>{n.getLeafTrails().some(i=>i.nodes.some(s=>Ro(s)?(s.forwardInteractiveHighlight(e),!0):!1))};const Q0=new Zf(al,{featureSpecificAnnouncingControlPropertyName:"voicingCanAnnounceProperty"});Q0.enabled=!1;const uR=1;class cR extends No{constructor(e){let t=null;super({attach:!1,press:i=>{t=i.pointer.point},drag:i=>{i&&t&&t.distance(i.pointer.point)>uR&&this.interrupt()},release:i=>{i&&!this.interrupted&&e.voicingSpeakResponse({nameResponse:e.voicingNameResponse,hintResponse:e.voicingHintResponse})}})}}function dR(n){if(!(n instanceof Ws))throw new Error("utterance is not an Utterance")}class B2 extends Ws{constructor(e){super(e)}}const Qm=["voicingNameResponse","voicingObjectResponse","voicingContextResponse","voicingHintResponse","voicingUtterance","voicingResponsePatternCollection","voicingIgnoreVoicingManagerProperties","voicingFocusListener","voicingPressable"],tr=n=>{const e=Hl("Voicing",Qm,class jv extends ip(n){constructor(...i){super(...i),this._voicingPressable=!1,this._voicingNameResponseOverride=!1,this._voicingHintResponseOverride=!1,this._boundInstanceCanVoiceChangeListener=this.onInstanceCanVoiceChange.bind(this),this._voicingUtterance=null,jv.prototype.initialize.call(this)}initialize(...i){return super.initialize&&super.initialize(i),this._voicingCanSpeakProperty=new ui(!0),this._voicingResponsePacket=new xa,this._voicingFocusListener=this.defaultFocusListener,this._voicingActivationListener=null,this._voicingPressable=!1,this.setVoicingUtterance(new B2),this._voicingCanSpeakCount=0,this._boundInstancesChangedListener=this.addOrRemoveInstanceListeners.bind(this),this.changedInstanceEmitter.addListener(this._boundInstancesChangedListener),this._speakContentOnFocusListener={focus:s=>{this._voicingFocusListener&&this._voicingFocusListener(s)}},this.addInputListener(this._speakContentOnFocusListener),this}voicingSpeakFullResponse(i){const s=Ci({},i);s.hasOwnProperty("nameResponse")||(s.nameResponse=this._voicingResponsePacket.nameResponse),s.hasOwnProperty("objectResponse")||(s.objectResponse=this._voicingResponsePacket.objectResponse),s.hasOwnProperty("contextResponse")||(s.contextResponse=this._voicingResponsePacket.contextResponse),s.hasOwnProperty("hintResponse")||(s.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(s)}voicingSpeakResponse(i){const s=Ci({nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null},i);this.collectAndSpeakResponse(s)}voicingSpeakNameResponse(i){const s=Ci({},i);s.hasOwnProperty("nameResponse")||(s.nameResponse=this._voicingResponsePacket.nameResponse),this.collectAndSpeakResponse(s)}voicingSpeakObjectResponse(i){const s=Ci({},i);s.hasOwnProperty("objectResponse")||(s.objectResponse=this._voicingResponsePacket.objectResponse),this.collectAndSpeakResponse(s)}voicingSpeakContextResponse(i){const s=Ci({},i);s.hasOwnProperty("contextResponse")||(s.contextResponse=this._voicingResponsePacket.contextResponse),this.collectAndSpeakResponse(s)}voicingSpeakHintResponse(i){const s=Ci({},i);s.hasOwnProperty("hintResponse")||(s.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(s)}collectAndSpeakResponse(i){this.speakContent(this.collectResponse(i))}collectResponse(i){const s=Ci({ignoreProperties:this._voicingResponsePacket.ignoreProperties,responsePatternCollection:this._voicingResponsePacket.responsePatternCollection,utterance:this.voicingUtterance},i);let r=rv.collectResponses(s);return s.utterance&&(s.utterance.alert=r,r=s.utterance),r}speakContent(i){const s=!Xe.PHET_IO_ENABLED||!this.isInsidePhetioArchetype();i&&s&&Q0.addToBack(i)}setVoicingNameResponse(i){this._voicingNameResponseOverride=i!==null,this._voicingResponsePacket.nameResponse=i}set voicingNameResponse(i){this.setVoicingNameResponse(i)}get voicingNameResponse(){return this.getVoicingNameResponse()}getVoicingNameResponse(){return this._voicingResponsePacket.nameResponse}applyDefaultNameResponse(i){this._voicingNameResponseOverride||(this._voicingResponsePacket.nameResponse=i)}setVoicingObjectResponse(i){this._voicingResponsePacket.objectResponse=i}set voicingObjectResponse(i){this.setVoicingObjectResponse(i)}get voicingObjectResponse(){return this.getVoicingObjectResponse()}getVoicingObjectResponse(){return this._voicingResponsePacket.objectResponse}setVoicingContextResponse(i){this._voicingResponsePacket.contextResponse=i}set voicingContextResponse(i){this.setVoicingContextResponse(i)}get voicingContextResponse(){return this.getVoicingContextResponse()}getVoicingContextResponse(){return this._voicingResponsePacket.contextResponse}setVoicingHintResponse(i){this._voicingHintResponseOverride=i!==null,this._voicingResponsePacket.hintResponse=i}set voicingHintResponse(i){this.setVoicingHintResponse(i)}get voicingHintResponse(){return this.getVoicingHintResponse()}getVoicingHintResponse(){return this._voicingResponsePacket.hintResponse}applyDefaultHintResponse(i){this._voicingHintResponseOverride||(this._voicingResponsePacket.hintResponse=i)}setVoicingIgnoreVoicingManagerProperties(i){this._voicingResponsePacket.ignoreProperties=i}set voicingIgnoreVoicingManagerProperties(i){this.setVoicingIgnoreVoicingManagerProperties(i)}get voicingIgnoreVoicingManagerProperties(){return this.getVoicingIgnoreVoicingManagerProperties()}getVoicingIgnoreVoicingManagerProperties(){return this._voicingResponsePacket.ignoreProperties}setVoicingResponsePatternCollection(i){this._voicingResponsePacket.responsePatternCollection=i}set voicingResponsePatternCollection(i){this.setVoicingResponsePatternCollection(i)}get voicingResponsePatternCollection(){return this.getVoicingResponsePatternCollection()}getVoicingResponsePatternCollection(){return this._voicingResponsePacket.responsePatternCollection}setVoicingUtterance(i){this._voicingUtterance!==i&&(this._voicingUtterance&&this.cleanVoicingUtterance(),tr.registerUtteranceToVoicingNode(i,this),this._voicingUtterance=i)}set voicingUtterance(i){this.setVoicingUtterance(i)}get voicingUtterance(){return this.getVoicingUtterance()}getVoicingUtterance(){return dR(this._voicingUtterance),this._voicingUtterance}setVoicingPressable(i){i!==this._voicingPressable&&(i?(this._voicingActivationListener=new cR(this),this.addInputListener(this._voicingActivationListener)):!i&&this._voicingActivationListener&&(this.removeInputListener(this._voicingActivationListener),this._voicingActivationListener.dispose(),this._voicingActivationListener=null),this._voicingPressable=i)}set voicingPressable(i){this.setVoicingPressable(i)}get voicingPressable(){return this.getVoicingPressable()}getVoicingPressable(){return this._voicingPressable}setVoicingFocusListener(i){this._voicingFocusListener=i}set voicingFocusListener(i){this.setVoicingFocusListener(i)}get voicingFocusListener(){return this.getVoicingFocusListener()}getVoicingFocusListener(){return this._voicingFocusListener}defaultFocusListener(){this.voicingSpeakFullResponse({contextResponse:null})}get _isVoicing(){return!0}dispose(){if(this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingPressable){const i=this._voicingActivationListener;this.removeInputListener(i),i.dispose(),this._voicingActivationListener=null,this._voicingPressable=!1}this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),super.dispose()}clean(){if(this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingPressable){const i=this._voicingActivationListener;this.removeInputListener(i),i.dispose(),this._voicingActivationListener=null,this._voicingPressable=!1}this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),super.clean&&super.clean()}onInstanceCanVoiceChange(i){i?this._voicingCanSpeakCount++:this._voicingCanSpeakCount--,this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}handleInstancesChanged(i,s){i.visible&&i.voicingVisible&&(this._voicingCanSpeakCount=s?this._voicingCanSpeakCount+1:this._voicingCanSpeakCount-1),this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}addOrRemoveInstanceListeners(i,s){s?i.canVoiceEmitter.addListener(this._boundInstanceCanVoiceChangeListener):i.canVoiceEmitter.removeListener(this._boundInstanceCanVoiceChangeListener),this.handleInstancesChanged(i,s)}cleanVoicingUtterance(){this._voicingUtterance instanceof B2?this._voicingUtterance.dispose():this._voicingUtterance&&!this._voicingUtterance.isDisposed&&tr.unregisterUtteranceToVoicingNode(this._voicingUtterance,this)}mutate(i){return super.mutate(i)}});return e.prototype._mutatorKeys=Qm.concat(e.prototype._mutatorKeys),e};tr.VOICING_OPTION_KEYS=Qm;tr.alertUtterance=n=>{Q0.addToBack(n)};tr.registerUtteranceToVoicingNode=(n,e)=>{const t=n.voicingCanAnnounceProperties,i=e._voicingCanSpeakProperty;t.includes(i)||(n.voicingCanAnnounceProperties=t.concat([i]))};tr.unregisterUtteranceToVoicingNode=(n,e)=>{const t=n.voicingCanAnnounceProperties,i=e._voicingCanSpeakProperty,s=t.indexOf(i);n.voicingCanAnnounceProperties=t.splice(s,1)};tr.registerUtteranceToNode=(n,e)=>{const t=n.voicingCanAnnounceProperties;t.includes(e.visibleProperty)||(n.voicingCanAnnounceProperties=n.voicingCanAnnounceProperties.concat([e.visibleProperty])),t.includes(e.voicingVisibleProperty)||(n.voicingCanAnnounceProperties=n.voicingCanAnnounceProperties.concat([e.voicingVisibleProperty]))};tr.unregisterUtteranceToNode=(n,e)=>{const t=n.voicingCanAnnounceProperties,i=t.indexOf(e.visibleProperty),r=t.splice(i,1).indexOf(e.voicingVisibleProperty),o=t.splice(r,1);n.voicingCanAnnounceProperties=o};tr.BASIC_ACCESSIBLE_NAME_BEHAVIOR=(n,e,t)=>{const i=n;return e=Ir.BASIC_ACCESSIBLE_NAME_BEHAVIOR(i,e,t),i.applyDefaultNameResponse(t),e};tr.BASIC_HELP_TEXT_BEHAVIOR=(n,e,t)=>{const i=n;return e=Ir.HELP_TEXT_AFTER_CONTENT(i,e,t),i.applyDefaultHintResponse(t),e};class gc extends tr(Lc(At)){constructor(e,t){super(),this.fireListener=null,this.accessibleInputListener=null,this.allowLinksListener=null,this.initialize(e,t,!1),this.mutate({cursor:"pointer",tagName:"a"})}initialize(e,t,i=!0){return i&&super.initialize(),this.innerContent=e,this.voicingNameResponse=e,typeof t=="function"?(this.fireListener=new af({fire:t,tandem:Xe.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href","#"),this.setPDOMAttribute("target","_self"),this.accessibleInputListener={click:s=>{s.domEvent&&s.domEvent.preventDefault(),t()}},this.addInputListener(this.accessibleInputListener)):(this.fireListener=new af({fire:s=>{s!=null&&s.isFromPDOM()&&s.domEvent.preventDefault(),self._linkEventsHandled&&s.handle(),hR(t)},tandem:Xe.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href",t),this.setPDOMAttribute("target","_blank"),this.allowLinksListener=s=>{this.visible=s},jm.link(this.allowLinksListener)),this}clean(){super.clean(),this.fireListener&&(this.removeInputListener(this.fireListener),this.fireListener.dispose()),this.fireListener=null,this.accessibleInputListener&&(this.removeInputListener(this.accessibleInputListener),this.accessibleInputListener=null),this.allowLinksListener&&(jm.unlink(this.allowLinksListener),this.allowLinksListener=null)}freeToPool(){gc.pool.freeToPool(this)}}gc.pool=new us(gc);class Nh extends Lc(At){constructor(e){super(),this.leftSpacing=0,this.rightSpacing=0,this.initialize(e)}initialize(e){return this.addChild(e),this}clean(){super.clean(),this.removeAllChildren()}fitsIn(e){return this.width<=e}freeToPool(){Nh.pool.freeToPool(this)}}Nh.pool=new us(Nh);class mc extends Lc(At){constructor(e){super(),this.initialize(e)}initialize(e){return this.localBounds=new Je(0,0,0,e),this}freeToPool(){mc.pool.freeToPool(this)}}mc.pool=new us(mc);const fR=["boundsMethod","font","fill","stroke","lineWidth","subScale","subXSpacing","subYOffset","supScale","supXSpacing","supYOffset","capHeightScale","underlineLineWidth","underlineHeightScale","strikethroughLineWidth","strikethroughHeightScale","linkFill","linkEventsHandled","links","nodes","tags","replaceNewlines","align","leading","lineWrap",Ms.STRING_PROPERTY_NAME,"string"];wl.containsKey("stringTest");const pR=new _s({size:20}),gR=["b","strong","i","em","sub","sup","u","s"],oa={COMPLETE:"COMPLETE",INCOMPLETE:"INCOMPLETE",NONE:"NONE"},Qv={"font-family":"family","font-size":"size","font-stretch":"stretch","font-style":"style","font-variant":"variant","font-weight":"weight","line-height":"lineHeight"},R2=Object.keys(Qv);class Zn extends ep(At){constructor(e,t){const i=lt()({fill:"#000000",tandemNameSuffix:"Text",phetioType:Zn.RichTextIO,phetioVisiblePropertyInstrumented:!1},t);typeof e=="string"||typeof e=="number"?i.string=e:i.stringProperty=e,super(),this._font=pR,this._boundsMethod="hybrid",this._fill="#000000",this._stroke=null,this._lineWidth=1,this._subScale=.75,this._subXSpacing=0,this._subYOffset=0,this._supScale=.75,this._supXSpacing=0,this._supYOffset=0,this._capHeightScale=.75,this._underlineLineWidth=1,this._underlineHeightScale=.15,this._strikethroughLineWidth=1,this._strikethroughHeightScale=.3,this._linkFill="rgb(27,0,241)",this._linkEventsHandled=!1,this._links={},this._nodes={},this._tags={},this._replaceNewlines=!1,this._align="left",this._leading=0,this._lineWrap=null,this._linkItems=[],this._hasAddedLeafToLine=!1,this.needPendingMinimumWidth=!1,this.pendingMinimumWidth=0,this._stringProperty=new Ra("",!0,this.onStringPropertyChange.bind(this)),this.lineContainer=new At({}),this.addChild(this.lineContainer),this.rebuildRichText(),this.localPreferredWidthProperty.lazyLink(()=>this.rebuildRichText()),this.mutate(i)}onStringPropertyChange(){this.rebuildRichText()}setStringProperty(e){return this._stringProperty.setTargetProperty(e,this,Zn.STRING_PROPERTY_TANDEM_NAME)}set stringProperty(e){this.setStringProperty(e)}get stringProperty(){return this.getStringProperty()}getStringProperty(){return this._stringProperty}getPhetioMouseHitTarget(e=!1){return Fv.value==="string"?this.getStringPropertyPhetioMouseHitTarget(e):super.getPhetioMouseHitTarget(e)}getStringPropertyPhetioMouseHitTarget(e=!1){const t=this._stringProperty.getTargetProperty();return t instanceof Gi?t.getPhetioMouseHitTarget(e):"phetioNotSelectable"}initializePhetioObject(e,t){const i=lt()({},t),s=this.isPhetioInstrumented();super.initializePhetioObject(e,i),Xe.PHET_IO_ENABLED&&!s&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,Zn.STRING_PROPERTY_TANDEM_NAME,()=>new b1(this.string,Ci({phetioReadOnly:!0,tandem:this.tandem.createTandem(Zn.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},i.stringPropertyOptions)))}rebuildRichText(){const e=this._lineWrap==="stretch";this.widthSizable=e,this.pendingMinimumWidth=0,this.needPendingMinimumWidth=e;const t=this._lineWrap==="stretch"?this.localPreferredWidth:this._lineWrap;if(this.freeChildrenToPool(),this.string===""){this.appendEmptyLeaf();return}let i=this.string.replace(/\u202a/g,'<span dir="ltr">').replace(/\u202b/g,'<span dir="rtl">').replace(/\u202c/g,"</span>");this._replaceNewlines&&(i=i.replace(/\n/g,"<br>"));let s;try{s=tm(i)}catch{s=tm("INVALID TRANSLATION")}this._linkItems.length=0;const r=t===null?Number.POSITIVE_INFINITY:t,o=!0;let c=Vl.pool.create(o);for(this._hasAddedLeafToLine=!1;s.length;){const p=s[0],g=c.bounds.isValid()?c.width:0,A=this.appendElement(c,p,this._font,this._fill,o,r-g,1);A!==oa.NONE&&(c.bounds.isValid()?this.appendLine(c):this.appendLine(mc.pool.create(Pr.scratchText.setString("X").setFont(this._font).height)),c=Vl.pool.create(o),this._hasAddedLeafToLine=!1),A!==oa.INCOMPLETE&&s.splice(0,1)}for(c.bounds.isValid()&&this.appendLine(c),this.lineContainer.getChildrenCount()===0&&this.appendEmptyLeaf(),this.alignLines();this._linkItems.length;)(()=>{const p=this._linkItems[0].element,g=this._linkItems[0].href;let A;const C=[];for(A=this._linkItems.length-1;A>=0;A--){const P=this._linkItems[A];P.element===p&&(C.push(P.node),this._linkItems.splice(A,1))}const D=gc.pool.create(p.innerContent,g);for(this.lineContainer.addChild(D),A=0;A<C.length;A++){const P=C[A],F=P.getUniqueTrailTo(this.lineContainer).getMatrix();P.detach(),P.matrix=F,D.addChild(P)}})();this._linkItems.length=0,this.localMinimumWidth=e?this.pendingMinimumWidth:this.localBounds.width}freeChildrenToPool(){for(;this.lineContainer._children.length;){const e=this.lineContainer._children[this.lineContainer._children.length-1];this.lineContainer.removeChild(e),e.clean()}}dispose(){this.freeChildrenToPool(),super.dispose(),this._stringProperty.dispose()}appendLine(e){this.lineContainer.bounds.isValid()&&(e.top=this.lineContainer.bottom+this._leading,e.left=0),this.lineContainer.addChild(e)}appendEmptyLeaf(){this.appendLine(Io.pool.create("",!0,this._font,this._boundsMethod,this._fill,this._stroke,this._lineWidth))}alignLines(){const e=this._align==="center"?"centerX":this._align,t=this.lineContainer[e];for(let i=0;i<this.lineContainer.getChildrenCount();i++)this.lineContainer.getChildAt(i)[e]=t}appendElement(e,t,i,s,r,o,c){let p=oa.NONE,g;const A=r?e.rightSpacing:e.leftSpacing,C=o-A;if(nm(t)){if(g=Io.pool.create(t.content,r,i,this._boundsMethod,s,this._stroke,this._lineWidth),this.needPendingMinimumWidth&&(this.pendingMinimumWidth=Math.max(this.pendingMinimumWidth,Math.max(...L2(t.content).map(D=>{const P=t.content.slice(D.min,D.max),F=Io.pool.create(P,r,i,this._boundsMethod,s,this._stroke,this._lineWidth),K=F.width*c;return F.dispose(),K})))),!g.fitsIn(C,this._hasAddedLeafToLine,r)){const D=L2(t.content),P=F=>F.length===0?"":t.content.slice(F[0].min,F[F.length-1].max);if(this._hasAddedLeafToLine||D.length>1){const F=[];let K=!1;for(F.unshift(D.pop());D.length;)if(g.clean(),g=Io.pool.create(P(D),r,i,this._boundsMethod,s,this._stroke,this._lineWidth),!g.fitsIn(C,this._hasAddedLeafToLine,r)&&(this._hasAddedLeafToLine||D.length>1))F.unshift(D.pop());else{K=!0;break}if(K)p=oa.INCOMPLETE,t.content=P(F);else return g.clean(),oa.INCOMPLETE}}this._hasAddedLeafToLine=!0}else if(sm(t)){if(t.tagName==="br")return oa.COMPLETE;if(t.tagName==="span"){const F=Pr.himalayaGetAttribute("dir",t);F&&(r=F==="ltr")}if(t.tagName==="node"){const F=Pr.himalayaGetAttribute("id",t),K=F&&this._nodes[F]||null;if(K){if(g=Nh.pool.create(K),this._hasAddedLeafToLine&&!g.fitsIn(C))return g.clean(),oa.INCOMPLETE;const M=Pr.himalayaGetAttribute("align",t);if(M==="center"||M==="top"||M==="bottom"){const U=Pr.scratchText.setString("Test").setFont(i).bounds;M==="center"?g.centerY=U.centerY:M==="top"?g.top=U.top:M==="bottom"&&(g.bottom=U.bottom)}}else return p;this._hasAddedLeafToLine=!0}else g=Vl.pool.create(r);const D=Pr.himalayaGetAttribute("style",t);if(D){const F=Pr.himalayaStyleStringToMap(D);F.color&&(s=new et(F.color));const K={};for(let M=0;M<R2.length;M++){const U=R2[M];F[U]&&(K[Qv[U]]=F[U])}i=(typeof i=="string"?_s.fromCSS(i):i).copy(K)}if(t.tagName==="a"){let F=Pr.himalayaGetAttribute("href",t);if(F!==null&&this._links!==!0)if(F.startsWith("{{")&&F.indexOf("}}")===F.length-2){const K=F.slice(2,-2);F=this._links[K]}else F=null;F&&(this._linkFill!==null&&(s=this._linkFill),t.innerContent||(t.innerContent=Zn.himalayaElementToAccessibleString(t)),this._linkItems.push({element:t,node:g,href:F}))}else t.tagName==="b"||t.tagName==="strong"?i=(typeof i=="string"?_s.fromCSS(i):i).copy({weight:"bold"}):t.tagName==="i"||t.tagName==="em"?i=(typeof i=="string"?_s.fromCSS(i):i).copy({style:"italic"}):t.tagName==="sub"?(g.scale(this._subScale),g.addExtraBeforeSpacing(this._subXSpacing),g.y+=this._subYOffset):t.tagName==="sup"&&(g.scale(this._supScale),g.addExtraBeforeSpacing(this._supXSpacing),g.y+=this._supYOffset);const P=g.getScaleVector().x;if(t.tagName!=="node"){for(;p===oa.NONE&&t.children.length;){const F=g.bounds.isValid()?g.width:0,K=t.children[0];p=this.appendElement(g,K,i,s,r,o/P,c*P),p!==oa.INCOMPLETE&&t.children.splice(0,1);const M=g.bounds.isValid()?g.width:0;o+=F-M}p===oa.COMPLETE&&t.children.length&&(p=oa.INCOMPLETE)}if(t.tagName==="sub")isFinite(g.height)&&(g.centerY=0);else if(t.tagName==="sup")isFinite(g.height)&&(g.centerY=Pr.scratchText.setString("X").setFont(i).top*this._capHeightScale);else if(t.tagName==="u"){const F=-g.top*this._underlineHeightScale;isFinite(g.top)&&g.addChild(new nf(g.localLeft,F,g.localRight,F,{stroke:s,lineWidth:this._underlineLineWidth}))}else if(t.tagName==="s"){const F=g.top*this._strikethroughHeightScale;isFinite(g.top)&&g.addChild(new nf(g.localLeft,F,g.localRight,F,{stroke:s,lineWidth:this._strikethroughLineWidth}))}if(this._tags&&this._tags[t.tagName]&&g.bounds.isValid()){const F=g,K=g.bounds;g=Nh.pool.create(this._tags[t.tagName](g)),F!==g&&(g.localBounds=K)}}return g&&(e.addElement(g)||(this._linkItems=this._linkItems.filter(P=>P.node!==g),g.clean())),p}setString(e){return e=`${e}`,this._stringProperty.set(e),this}set string(e){this.setString(e)}get string(){return this.getString()}getString(){return this._stringProperty.value}setBoundsMethod(e){return e!==this._boundsMethod&&(this._boundsMethod=e,this.rebuildRichText()),this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}setFont(e){return this._font!==e&&(this._font=e,this.rebuildRichText()),this}set font(e){this.setFont(e)}get font(){return this.getFont()}getFont(){return this._font}setFill(e){return this._fill!==e&&(this._fill=e,this.rebuildRichText()),this}set fill(e){this.setFill(e)}get fill(){return this.getFill()}getFill(){return this._fill}setStroke(e){return this._stroke!==e&&(this._stroke=e,this.rebuildRichText()),this}set stroke(e){this.setStroke(e)}get stroke(){return this.getStroke()}getStroke(){return this._stroke}setLineWidth(e){return this._lineWidth!==e&&(this._lineWidth=e,this.rebuildRichText()),this}set lineWidth(e){this.setLineWidth(e)}get lineWidth(){return this.getLineWidth()}getLineWidth(){return this._lineWidth}setSubScale(e){return this._subScale!==e&&(this._subScale=e,this.rebuildRichText()),this}set subScale(e){this.setSubScale(e)}get subScale(){return this.getSubScale()}getSubScale(){return this._subScale}setSubXSpacing(e){return this._subXSpacing!==e&&(this._subXSpacing=e,this.rebuildRichText()),this}set subXSpacing(e){this.setSubXSpacing(e)}get subXSpacing(){return this.getSubXSpacing()}getSubXSpacing(){return this._subXSpacing}setSubYOffset(e){return this._subYOffset!==e&&(this._subYOffset=e,this.rebuildRichText()),this}set subYOffset(e){this.setSubYOffset(e)}get subYOffset(){return this.getSubYOffset()}getSubYOffset(){return this._subYOffset}setSupScale(e){return this._supScale!==e&&(this._supScale=e,this.rebuildRichText()),this}set supScale(e){this.setSupScale(e)}get supScale(){return this.getSupScale()}getSupScale(){return this._supScale}setSupXSpacing(e){return this._supXSpacing!==e&&(this._supXSpacing=e,this.rebuildRichText()),this}set supXSpacing(e){this.setSupXSpacing(e)}get supXSpacing(){return this.getSupXSpacing()}getSupXSpacing(){return this._supXSpacing}setSupYOffset(e){return this._supYOffset!==e&&(this._supYOffset=e,this.rebuildRichText()),this}set supYOffset(e){this.setSupYOffset(e)}get supYOffset(){return this.getSupYOffset()}getSupYOffset(){return this._supYOffset}setCapHeightScale(e){return this._capHeightScale!==e&&(this._capHeightScale=e,this.rebuildRichText()),this}set capHeightScale(e){this.setCapHeightScale(e)}get capHeightScale(){return this.getCapHeightScale()}getCapHeightScale(){return this._capHeightScale}setUnderlineLineWidth(e){return this._underlineLineWidth!==e&&(this._underlineLineWidth=e,this.rebuildRichText()),this}set underlineLineWidth(e){this.setUnderlineLineWidth(e)}get underlineLineWidth(){return this.getUnderlineLineWidth()}getUnderlineLineWidth(){return this._underlineLineWidth}setUnderlineHeightScale(e){return this._underlineHeightScale!==e&&(this._underlineHeightScale=e,this.rebuildRichText()),this}set underlineHeightScale(e){this.setUnderlineHeightScale(e)}get underlineHeightScale(){return this.getUnderlineHeightScale()}getUnderlineHeightScale(){return this._underlineHeightScale}setStrikethroughLineWidth(e){return this._strikethroughLineWidth!==e&&(this._strikethroughLineWidth=e,this.rebuildRichText()),this}set strikethroughLineWidth(e){this.setStrikethroughLineWidth(e)}get strikethroughLineWidth(){return this.getStrikethroughLineWidth()}getStrikethroughLineWidth(){return this._strikethroughLineWidth}setStrikethroughHeightScale(e){return this._strikethroughHeightScale!==e&&(this._strikethroughHeightScale=e,this.rebuildRichText()),this}set strikethroughHeightScale(e){this.setStrikethroughHeightScale(e)}get strikethroughHeightScale(){return this.getStrikethroughHeightScale()}getStrikethroughHeightScale(){return this._strikethroughHeightScale}setLinkFill(e){return this._linkFill!==e&&(this._linkFill=e,this.rebuildRichText()),this}set linkFill(e){this.setLinkFill(e)}get linkFill(){return this.getLinkFill()}getLinkFill(){return this._linkFill}setLinkEventsHandled(e){return this._linkEventsHandled!==e&&(this._linkEventsHandled=e,this.rebuildRichText()),this}set linkEventsHandled(e){this.setLinkEventsHandled(e)}get linkEventsHandled(){return this.getLinkEventsHandled()}getLinkEventsHandled(){return this._linkEventsHandled}setLinks(e){return this._links!==e&&(this._links=e,this.rebuildRichText()),this}getLinks(){return this._links}set links(e){this.setLinks(e)}get links(){return this.getLinks()}setNodes(e){return this._nodes!==e&&(this._nodes=e,this.rebuildRichText()),this}getNodes(){return this._nodes}set nodes(e){this.setNodes(e)}get nodes(){return this.getNodes()}setTags(e){return this._tags!==e&&(this._tags=e,this.rebuildRichText()),this}getTags(){return this._tags}set tags(e){this.setTags(e)}get tags(){return this.getTags()}setReplaceNewlines(e){return this._replaceNewlines!==e&&(this._replaceNewlines=e,this.rebuildRichText()),this}set replaceNewlines(e){this.setReplaceNewlines(e)}get replaceNewlines(){return this.getReplaceNewlines()}getReplaceNewlines(){return this._replaceNewlines}setAlign(e){return this._align!==e&&(this._align=e,this.rebuildRichText()),this}set align(e){this.setAlign(e)}get align(){return this.getAlign()}getAlign(){return this._align}setLeading(e){return this._leading!==e&&(this._leading=e,this.rebuildRichText()),this}set leading(e){this.setLeading(e)}get leading(){return this.getLeading()}getLeading(){return this._leading}setLineWrap(e){return this._lineWrap!==e&&(this._lineWrap=e,this.rebuildRichText()),this}set lineWrap(e){this.setLineWrap(e)}get lineWrap(){return this.getLineWrap()}getLineWrap(){return this._lineWrap}mutate(e){return super.mutate(e)}static stringWithFont(e,t){return`<span style='font-style: ${t.style};font-variant: ${t.variant};font-weight: ${t.weight};font-stretch: ${t.stretch};font-size: ${t.size};font-family: ${t.family};line-height: ${t.lineHeight};'>${e}</span>`}static himalayaElementToString(e){if(nm(e))return Xm(e.content);if(sm(e)){const t=e.children.map(s=>Zn.himalayaElementToString(s)).join(""),i=Pr.himalayaGetAttribute("dir",e);return i==="ltr"||i==="rtl"?Da.wrapDirection(t,i):t}else return""}static himalayaElementToAccessibleString(e){if(nm(e))return Xm(e.content);if(sm(e)){let t=e.children.map(s=>Zn.himalayaElementToAccessibleString(s)).join("");const i=Pr.himalayaGetAttribute("dir",e);return(i==="ltr"||i==="rtl")&&(t=Da.wrapDirection(t,i)),te.includes(gR,e.tagName)?`<${e.tagName}>${t}</${e.tagName}>`:t}else return""}static getAccessibleStringProperty(e){return new BI([e],t=>{const i=tm(t);let s="";return i.forEach(r=>{s+=Zn.himalayaElementToAccessibleString(r)}),s})}}Zn.STRING_PROPERTY_TANDEM_NAME=Ms.STRING_PROPERTY_TANDEM_NAME;Zn.prototype._mutatorKeys=fR.concat(At.prototype._mutatorKeys);Zn.RichTextIO=new Yt("RichTextIO",{valueType:Zn,supertype:At.NodeIO,documentation:"The PhET-iO Type for the scenery RichText node"});const Zv=n=>{if(n instanceof Ms||n instanceof Zn)return n.stringProperty;if(n.children)for(const e of n.children){const t=Zv(e);if(t)return t}return null},Mu=new et("transparent");class yc{constructor(e,t,i){this.lastColor=null,this.initialize(e,t,i)}isActiveSVGGradientStop(){return!!this.svgGradient}initialize(e,t,i){return this.svgGradient=e,this.color=i,this.ratio=t,this.svgElement=this.svgElement||document.createElementNS(Qi,"stop"),this.svgElement.setAttribute("offset",""+t),this.dirty=!0,this.update(),this.propertyListener=this.propertyListener||this.onPropertyChange.bind(this),this.colorListener=this.colorListener||this.markDirty.bind(this),Dt(i)?(i.lazyLink(this.propertyListener),i.value instanceof et&&(i.value.changeEmitter.addListener(this.colorListener),this.lastColor=i.value)):i instanceof et&&i.changeEmitter.addListener(this.colorListener),this}onPropertyChange(e,t){this.lastColor!==null&&(this.lastColor.changeEmitter.removeListener(this.colorListener),this.lastColor=null),e instanceof et&&(e.changeEmitter.addListener(this.colorListener),this.lastColor=e),this.markDirty()}markDirty(){this.dirty=!0,this.svgGradient.markDirty()}update(){if(!this.dirty)return;this.dirty=!1;let e=this.color;Dt(e)&&(e=e.value),e===null&&(e="transparent"),typeof e=="string"?Mu.setCSS(e):Mu.set(e);const t=`stop-opacity: ${Mu.a.toFixed(20)};`;Mu.alpha=1;const i=`stop-color: ${Mu.toCSS()};`;this.svgElement.setAttribute("style",`${i} ${t}`)}dispose(){const e=this.color;this.lastColor&&(this.lastColor.changeEmitter.removeListener(this.colorListener),this.lastColor=null),Dt(e)?e.hasListener(this.propertyListener)&&e.unlink(this.propertyListener):e instanceof et&&e.changeEmitter.removeListener(this.colorListener),this.color=null,this.svgGradient=null,this.freeToPool()}freeToPool(){yc.pool.freeToPool(this)}}yc.pool=new us(yc);class mR{constructor(e,t){this.initialize(e,t)}isActiveSVGGradient(){return!!this.svgBlock}initialize(e,t){this.svgBlock=e,this.gradient=t;const i=this.definition!==void 0;this.definition=this.definition||this.createDefinition(),i||this.definition.setAttribute("gradientUnits","userSpaceOnUse"),t.transformMatrix?this.definition.setAttribute("gradientTransform",t.transformMatrix.getSVGTransform()):this.definition.removeAttribute("gradientTransform");const s=t.getSVGStops();this.stops=$t(this.stops);for(let r=0;r<s.length;r++){const o=new yc(this,s[r].ratio,s[r].color);this.stops.push(o),this.definition.appendChild(o.svgElement)}this.dirty=!1}markDirty(){if(!this.dirty){const e=this;this.dirty=!0,e.svgBlock.markDirtyGradient(this)}}update(){if(this.dirty){this.dirty=!1;for(let e=0;e<this.stops.length;e++)this.stops[e].update()}}dispose(){for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this.definition.removeChild(t.svgElement),t.dispose()}$t(this.stops),this.svgBlock=null,this.gradient=null,this.freeToPool()}}class _c extends mR{constructor(e,t){super(e,t)}initialize(e,t){super.initialize(e,t);const i=t;return this.definition.setAttribute("x1",""+i.start.x),this.definition.setAttribute("y1",""+i.start.y),this.definition.setAttribute("x2",""+i.end.x),this.definition.setAttribute("y2",""+i.end.y),this}createDefinition(){return document.createElementNS(Qi,"linearGradient")}freeToPool(){_c.pool.freeToPool(this)}}_c.pool=new us(_c);const tc="http://www.w3.org/1999/xlink";class Ac{constructor(e){this.initialize(e)}initialize(e){const t=this.definition!==void 0;return this.definition=this.definition||document.createElementNS(Qi,"pattern"),t||(this.definition.setAttribute("patternUnits","userSpaceOnUse"),this.definition.setAttribute("patternContentUnits","userSpaceOnUse")),e.transformMatrix?this.definition.setAttribute("patternTransform",e.transformMatrix.getSVGTransform()):this.definition.removeAttribute("patternTransform"),this.definition.setAttribute("x","0"),this.definition.setAttribute("y","0"),this.definition.setAttribute("width",""+e.image.width),this.definition.setAttribute("height",""+e.image.height),this.imageElement=this.imageElement||document.createElementNS(Qi,"image"),this.imageElement.setAttribute("x","0"),this.imageElement.setAttribute("y","0"),this.imageElement.setAttribute("width",`${e.image.width}px`),this.imageElement.setAttribute("height",`${e.image.height}px`),this.imageElement.setAttributeNS(tc,"xlink:href",e.image.src),t||this.definition.appendChild(this.imageElement),this}update(){}dispose(){this.freeToPool()}freeToPool(){Ac.pool.freeToPool(this)}}Ac.pool=new us(Ac);class Jv extends Wf{initialize(e,t){return super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}markTransformDirty(){this.markDirty()}updateSelfVisibility(){super.updateSelfVisibility(),this.markDirty()}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}class Zm extends Ec(zl){paintCanvas(e,t,i){const s=e.context;s.beginPath(),s.arc(0,0,t._radius,0,Math.PI*2,!1),s.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e))}markDirtyRadius(){this.markPaintDirty()}dispose(){super.dispose()}}es.mixInto(Zm);const $v=Yn(n=>class extends Dc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyRadius=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyRadius(){this.dirtyRadius=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyRadius=!1}});class eV extends $v(Ic){constructor(e,t){super(e,t),Pi.prepareForTransform(this.domElement)}initialize(e,t){if(super.initialize(e,t),this.matrix=this.matrix||nt.pool.fetch(),!this.fillElement||!this.strokeElement){const i=document.createElement("div");this.fillElement=i;const s=document.createElement("div");this.strokeElement=s,i.style.display="block",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.pointerEvents="none",s.style.display="block",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.pointerEvents="none",i.appendChild(s)}this.domElement=this.fillElement}updateDOM(){const e=this.node,t=this.fillElement,i=this.strokeElement;if(this.paintDirty&&(this.dirtyRadius&&(t.style.width=`${2*e._radius}px`,t.style.height=`${2*e._radius}px`,t.style[It.borderRadius]=`${e._radius}px`),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?i.style.borderStyle="solid":i.style.borderStyle="none"),e.hasStroke())){const s=!this.hadStroke;(s||this.dirtyLineWidth||this.dirtyRadius)&&(i.style.width=`${2*e._radius-e.getLineWidth()}px`,i.style.height=`${2*e._radius-e.getLineWidth()}px`,i.style[It.borderRadius]=`${e._radius+e.getLineWidth()/2}px`),(s||this.dirtyLineWidth)&&(i.style.left=`${-e.getLineWidth()/2}px`,i.style.top=`${-e.getLineWidth()/2}px`,i.style.borderWidth=`${e.getLineWidth()}px`),(s||this.dirtyStroke)&&(i.style.borderColor=e.getSimpleCSSStroke())}if(this.transformDirty||this.dirtyRadius){this.matrix.set(this.getTransformMatrix());const s=nt.translation(-e._radius,-e._radius);this.matrix.multiplyMatrix(s),s.freeToPool(),Pi.applyPreparedTransform(this.matrix,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}es.mixInto(eV);const yR=!0;class tV extends $v(ru){initialize(e,t){super.initialize(e,t,!0,yR),this.svgElement=this.svgElement||document.createElementNS(Qi,"circle")}updateSVGSelf(){const e=this.svgElement;this.dirtyRadius&&e.setAttribute("r",this.node._radius),this.updateFillStrokeStyle(e)}}es.mixInto(tV);const _R=Math.log2||function(n){return Math.log(n)/Math.LN2},oo={imageOpacity:1,initialWidth:0,initialHeight:0,mipmap:!1,mipmapBias:0,mipmapInitialLevel:4,mipmapMaxLevel:5,hitTestPixels:!1};let rm=null,am=null;const iV=()=>(rm||(rm=document.createElement("canvas")),rm),AR=()=>(am||(am=iV().getContext("2d",{willReadFrequently:!0})),am),$n=n=>class extends n{constructor(...t){super(...t),this._imageProperty=new Ra(null,!1,this.onImagePropertyChange.bind(this)),this._image=null,this._initialWidth=oo.initialWidth,this._initialHeight=oo.initialHeight,this._imageOpacity=oo.imageOpacity,this._mipmap=oo.mipmap,this._mipmapBias=oo.mipmapBias,this._mipmapInitialLevel=oo.mipmapInitialLevel,this._mipmapMaxLevel=oo.mipmapMaxLevel,this._hitTestPixels=oo.hitTestPixels,this._mipmapCanvases=[],this._mipmapURLs=[],this._mipmapData=null,this._imageLoadListener=this._onImageLoad.bind(this),this._imageLoadListenerAttached=!1,this._hitTestImageData=null,this.mipmapEmitter=new Ai}setImage(t){return this._imageProperty.value=t,this}set image(t){this.setImage(t)}get image(){return this.getImage()}getImage(){return this._image}onImagePropertyChange(t){let i=this._image!==t;if(i&&typeof t=="string"&&this._image&&this._image instanceof HTMLImageElement&&t===this._image.src&&(i=!1),i&&t===this._mipmapData&&(i=!1),i){if(this._initialWidth=0,this._initialHeight=0,this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),this._mipmapData=null,typeof t=="string"){const s=t;t=document.createElement("img"),t.src=s}else Array.isArray(t)&&(this._mipmapData=t,t=t[0].img,this._mipmapInitialLevel=this._mipmapMaxLevel=this._mipmapData.length,this._mipmap=!0);this._image=t,this._image instanceof HTMLImageElement&&(!this._image.width||!this._image.height)&&this._attachImageLoadListener(),this.invalidateImage()}}setImageProperty(t){return this._imageProperty.setTargetProperty(t)}set imageProperty(t){this.setImageProperty(t)}get imageProperty(){return this.getImageProperty()}getImageProperty(){return this._imageProperty}invalidateImage(){this.invalidateMipmaps(),this._invalidateHitTestData()}setImageWithSize(t,i,s){return this.setImage(t),this.setInitialWidth(i),this.setInitialHeight(s),this}setImageOpacity(t){this._imageOpacity!==t&&(this._imageOpacity=t)}set imageOpacity(t){this.setImageOpacity(t)}get imageOpacity(){return this.getImageOpacity()}getImageOpacity(){return this._imageOpacity}setInitialWidth(t){return t!==this._initialWidth&&(this._initialWidth=t,this.invalidateImage()),this}set initialWidth(t){this.setInitialWidth(t)}get initialWidth(){return this.getInitialWidth()}getInitialWidth(){return this._initialWidth}setInitialHeight(t){return t!==this._initialHeight&&(this._initialHeight=t,this.invalidateImage()),this}set initialHeight(t){this.setInitialHeight(t)}get initialHeight(){return this.getInitialHeight()}getInitialHeight(){return this._initialHeight}setMipmap(t){return this._mipmap!==t&&(this._mipmap=t,this.invalidateMipmaps()),this}set mipmap(t){this.setMipmap(t)}get mipmap(){return this.isMipmap()}isMipmap(){return this._mipmap}setMipmapBias(t){return this._mipmapBias!==t&&(this._mipmapBias=t,this.invalidateMipmaps()),this}set mipmapBias(t){this.setMipmapBias(t)}get mipmapBias(){return this.getMipmapBias()}getMipmapBias(){return this._mipmapBias}setMipmapInitialLevel(t){return this._mipmapInitialLevel!==t&&(this._mipmapInitialLevel=t,this.invalidateMipmaps()),this}set mipmapInitialLevel(t){this.setMipmapInitialLevel(t)}get mipmapInitialLevel(){return this.getMipmapInitialLevel()}getMipmapInitialLevel(){return this._mipmapInitialLevel}setMipmapMaxLevel(t){return this._mipmapMaxLevel!==t&&(this._mipmapMaxLevel=t,this.invalidateMipmaps()),this}set mipmapMaxLevel(t){this.setMipmapMaxLevel(t)}get mipmapMaxLevel(){return this.getMipmapMaxLevel()}getMipmapMaxLevel(){return this._mipmapMaxLevel}setHitTestPixels(t){return this._hitTestPixels!==t&&(this._hitTestPixels=t,this._invalidateHitTestData()),this}set hitTestPixels(t){this.setHitTestPixels(t)}get hitTestPixels(){return this.getHitTestPixels()}getHitTestPixels(){return this._hitTestPixels}_constructNextMipmap(){const t=this._mipmapCanvases.length,i=this._mipmapCanvases[t-1];if(i.width*i.height>2){const s=document.createElement("canvas");if(s.width=Math.ceil(i.width/2),s.height=Math.ceil(i.height/2),s.width>0&&s.height>0){const r=s.getContext("2d");r.scale(.5,.5),r.drawImage(i,0,0),this._mipmapCanvases.push(s),this._mipmapURLs.push(s.toDataURL())}}}invalidateMipmaps(){if($t(this._mipmapCanvases),$t(this._mipmapURLs),this._image&&this._mipmap)if(this._mipmapData)for(let t=0;t<this._mipmapData.length;t++){const i=this._mipmapData[t].url;this._mipmapURLs.push(i);const s=this._mipmapData[t].updateCanvas;s&&s(),this._mipmapCanvases.push(this._mipmapData[t].canvas)}else{const t=document.createElement("canvas");if(t.width=this.getImageWidth(),t.height=this.getImageHeight(),t.width&&t.height){t.getContext("2d").drawImage(this._image,0,0),this._mipmapCanvases.push(t),this._mipmapURLs.push(t.toDataURL());let s=0;for(;++s<this._mipmapInitialLevel;)this._constructNextMipmap()}}this.mipmapEmitter.emit()}getMipmapLevel(t,i=0){const s=$n.getApproximateMatrixScale(t)*(self.devicePixelRatio||1);return this.getMipmapLevelFromScale(s,i)}getMipmapLevelFromScale(t,i=0){if(t>=1)return 0;let s=_R(1/t);if(s=Ys(s+this._mipmapBias+i-.7),s<0&&(s=0),s>this._mipmapMaxLevel&&(s=this._mipmapMaxLevel),this.mipmap&&!this._mipmapCanvases[s]){let r=this._mipmapCanvases.length-1;for(;++r<=s;)this._constructNextMipmap();return Math.min(s,this._mipmapCanvases.length-1)}else return s}getMipmapCanvas(t){if(this._mipmapData){const i=this._mipmapData[t]&&this._mipmapData[t].updateCanvas;i&&i()}return this._mipmapCanvases[t]}getMipmapURL(t){return this._mipmapURLs[t]}hasMipmaps(){return this._mipmapCanvases.length>0}_invalidateHitTestData(){this._hitTestPixels&&this._image!==null&&(this._hitTestImageData=$n.getHitTestData(this._image,this.imageWidth,this.imageHeight))}getImageWidth(){if(this._image===null)return 0;const t=this._mipmapData?this._mipmapData[0].width:("naturalWidth"in this._image?this._image.naturalWidth:0)||this._image.width;return t===0?this._initialWidth:t}get imageWidth(){return this.getImageWidth()}getImageHeight(){if(this._image===null)return 0;const t=this._mipmapData?this._mipmapData[0].height:("naturalHeight"in this._image?this._image.naturalHeight:0)||this._image.height;return t===0?this._initialHeight:t}get imageHeight(){return this.getImageHeight()}getImageURL(){return this._image.src}_attachImageLoadListener(){this.isDisposed||(this._image.addEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!0)}_detachImageLoadListener(){this._image.removeEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!1}_onImageLoad(){this.invalidateImage(),this._detachImageLoadListener()}dispose(){this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),this._imageProperty.dispose(),super.dispose&&super.dispose()}};$n.getHitTestData=(n,e,t)=>{if(!("naturalWidth"in n&&n.naturalWidth||n.width)||!("naturalHeight"in n&&n.naturalHeight||n.height))return null;const i=iV(),s=AR();return i.width=e,i.height=t,s.drawImage(n,0,0),s.getImageData(0,0,e,t)};$n.testHitTestData=(n,e,t,i)=>{const s=hs(Math.floor(i.x/e*n.width),0,n.width-1),r=hs(Math.floor(i.y/t*n.height),0,n.height-1),o=4*(s+r*n.width)+3;return n.data[o]!==0};$n.hitTestDataToShape=(n,e,t)=>{const i=e/n.width,s=t/n.height,r=new Tt;let o=!1,c=0;for(let p=0;p<n.height;p++){for(let g=0;g<n.width;g++){const A=4*(g+p*n.width)+3;n.data[A]!==0?o||(o=!0,c=g):o&&(o=!1,r.rect(c*i,p*i,i*(g-c),s))}o&&(o=!1,r.rect(c*i,p*i,i*(n.width-c),s))}return r.getSimplifiedAreaShape()};$n.createSVGImage=(n,e,t)=>{const i=document.createElementNS(Qi,"image");return i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`),i.setAttributeNS(tc,"xlink:href",n),i};$n.createFastMipmapFromCanvas=n=>{const e=[],t=n.toDataURL(),i=new self.Image;i.src=t,e.push({img:i,url:t,width:n.width,height:n.height,canvas:n});let s=n;for(;s.width>=2&&s.height>=2;){const r=document.createElement("canvas");r.width=Math.ceil(s.width/2),r.height=Math.ceil(s.height/2);const o=r.getContext("2d");o.setTransform(.5,0,0,.5,0,0),o.drawImage(s,0,0);const c={width:r.width,height:r.height,canvas:r,url:r.toDataURL(),img:new self.Image};c.img.src=c.url,s=r,e.push(c)}return e};$n.getApproximateMatrixScale=n=>(Math.sqrt(n.m00()*n.m00()+n.m10()*n.m10())+Math.sqrt(n.m01()*n.m01()+n.m11()*n.m11()))/2;$n.CANVAS_MIPMAP_BIAS_ADJUSTMENT=.5;$n.DEFAULT_OPTIONS=oo;class Jm extends zl{paintCanvas(e,t,i){const s=t._imageOpacity!==1;if(t._image&&t._image.width!==0&&t._image.height!==0){if(s&&(e.context.save(),e.context.globalAlpha*=t._imageOpacity),t._mipmap&&t.hasMipmaps()){const r=t.getMipmapLevel(i,$n.CANVAS_MIPMAP_BIAS_ADJUSTMENT),o=t.getMipmapCanvas(r),c=Math.pow(2,r);e.context.drawImage(o,0,0,o.width*c,o.height*c)}else e.context.drawImage(t._image,0,0);s&&e.context.restore()}}markDirtyImage(){this.markPaintDirty()}markDirtyMipmap(){this.markPaintDirty()}markDirtyImageOpacity(){this.markPaintDirty()}}es.mixInto(Jm);const Z0=Yn(n=>class extends n{initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyImage=!0,this.dirtyImageOpacity=!0,this.dirtyMipmap=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyImage(){this.dirtyImage=!0,this.markPaintDirty()}markDirtyImageOpacity(){this.dirtyImageOpacity=!0,this.markPaintDirty()}markDirtyMipmap(){this.dirtyMipmap=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyImage=!1,this.dirtyImageOpacity=!1,this.dirtyMipmap=!1}});class sV extends Z0(Ic){constructor(e,t){super(e,t),Pi.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement||(this.domElement=document.createElement("img"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0"),this.hasOpacity=!1}updateDOM(){const e=this.node,t=this.domElement;this.paintDirty&&this.dirtyImage&&(t.src=e._image?e._image.src:"//:0"),this.dirtyImageOpacity&&(e._imageOpacity===1?this.hasOpacity&&(this.hasOpacity=!1,t.style.opacity=""):(this.hasOpacity=!0,t.style.opacity=e._imageOpacity)),this.transformDirty&&Pi.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.setToCleanState(),this.transformDirty=!1}dispose(){super.dispose()}}es.mixInto(sV);const bR=!0;class nV extends Z0(ru){initialize(e,t){super.initialize(e,t,!1,bR),this.svgElement=this.svgElement||document.createElementNS(Qi,"image"),this.svgElement.setAttribute("x","0"),this.svgElement.setAttribute("y","0"),this.hasOpacity=!1,this.usingMipmap=!1,this.mipmapLevel=-1,this._mipmapTransformListener=this._mipmapTransformListener||this.onMipmapTransform.bind(this),this._mipmapListener=this._mipmapListener||this.onMipmap.bind(this),this.node.mipmapEmitter.addListener(this._mipmapListener),this.updateMipmapStatus(t.node._mipmap)}updateSVGSelf(){const e=this.svgElement;this.dirtyImage?this.node._image?this.updateURL(e,!0):(e.setAttribute("width","0"),e.setAttribute("height","0"),e.setAttributeNS(tc,"xlink:href","//:0")):this.dirtyMipmap&&this.node._image&&this.updateURL(e,!1),this.dirtyImageOpacity&&(this.node._imageOpacity===1?this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity")):(this.hasOpacity=!0,e.setAttribute("opacity",this.node._imageOpacity)))}updateURL(e,t){let i=-1;if(this.node._mipmap&&(i=this.node.getMipmapLevel(this.instance.relativeTransform.matrix)),!(!t&&i===this.mipmapLevel))if(this.mipmapLevel>=0&&i===-1&&e.removeAttribute("transform"),this.mipmapLevel=i,this.node._mipmap&&this.node.hasMipmaps()){const s=this.node.getMipmapURL(i),r=this.node.getMipmapCanvas(i);e.setAttribute("width",`${r.width}px`),e.setAttribute("height",`${r.height}px`),e.setAttribute("transform",`scale(${Math.pow(2,i).toFixed(20)})`),e.setAttributeNS(tc,"xlink:href",s)}else e.setAttribute("width",`${this.node.getImageWidth()}px`),e.setAttribute("height",`${this.node.getImageHeight()}px`),e.setAttributeNS(tc,"xlink:href",this.node.getImageURL())}updateMipmapStatus(e){this.usingMipmap!==e&&(this.usingMipmap=e,e?(this.instance.relativeTransform.addListener(this._mipmapTransformListener),this.instance.relativeTransform.addPrecompute()):(this.instance.relativeTransform.removeListener(this._mipmapTransformListener),this.instance.relativeTransform.removePrecompute()),this.markDirtyMipmap())}onMipmap(){this.markDirtyMipmap(),this.updateMipmapStatus(this.node._mipmap)}onMipmapTransform(){this.markDirtyMipmap()}dispose(){this.updateMipmapStatus(!1),this.node.mipmapEmitter.removeListener(this._mipmapListener),super.dispose()}}es.mixInto(nV);const Kl=5,Ou=Kl*0,qu=Kl*1,Fu=Kl*2,zu=Kl*3,Hu=Kl*4,Ku=Kl*5,Ah=0,bh=1,vh=2,Vh=3,Sh=4;class J0 extends Z0(Jv){initialize(e,t){super.initialize(e,t),this.vertexArray=this.vertexArray||new Float32Array(Kl*6),this.upperLeft=new we(0,0),this.lowerLeft=new we(0,0),this.upperRight=new we(0,0),this.lowerRight=new we(0,0),this.xyDirty=!0,this.uvDirty=!0,this.updatedOnce=!1,this.sprite=null}onAddToBlock(e){this.webglBlock=e,this.markDirty(),this.reserveSprite()}onRemoveFromBlock(e){this.unreserveSprite()}reserveSprite(){if(this.sprite){if(this.sprite.image===this.node._image)return;this.unreserveSprite()}const e=this.node.getImageWidth(),t=this.node.getImageHeight();this.sprite=e>0&&t>0?this.webglBlock.addSpriteSheetImage(this.node._image,e,t):null,this.xyDirty=!0,this.uvDirty=!0}unreserveSprite(){this.sprite&&this.webglBlock.removeSpriteSheetImage(this.sprite),this.sprite=null}markTransformDirty(){this.xyDirty=!0,super.markTransformDirty()}markPaintDirty(){this.xyDirty=!0,this.uvDirty=!0,this.markDirty()}update(){if(!super.update()||(this.reserveSprite(),(this.dirtyImageOpacity||!this.updatedOnce)&&(this.vertexArray[Ou+Sh]=this.node._imageOpacity,this.vertexArray[qu+Sh]=this.node._imageOpacity,this.vertexArray[Fu+Sh]=this.node._imageOpacity,this.vertexArray[zu+Sh]=this.node._imageOpacity,this.vertexArray[Hu+Sh]=this.node._imageOpacity,this.vertexArray[Ku+Sh]=this.node._imageOpacity),this.updatedOnce=!0,!this.sprite))return!1;if(this.uvDirty){this.uvDirty=!1;const e=this.sprite.uvBounds;this.vertexArray[Ou+vh]=e.minX,this.vertexArray[Ou+Vh]=e.minY,this.vertexArray[qu+vh]=e.minX,this.vertexArray[qu+Vh]=e.maxY,this.vertexArray[Fu+vh]=e.maxX,this.vertexArray[Fu+Vh]=e.minY,this.vertexArray[zu+vh]=e.maxX,this.vertexArray[zu+Vh]=e.minY,this.vertexArray[Hu+vh]=e.minX,this.vertexArray[Hu+Vh]=e.maxY,this.vertexArray[Ku+vh]=e.maxX,this.vertexArray[Ku+Vh]=e.maxY}if(this.xyDirty){this.xyDirty=!1;const e=this.node.getImageWidth(),t=this.node.getImageHeight(),i=this.instance.relativeTransform.matrix;i.multiplyVector2(this.upperLeft.setXY(0,0)),i.multiplyVector2(this.lowerLeft.setXY(0,t)),i.multiplyVector2(this.upperRight.setXY(e,0)),i.multiplyVector2(this.lowerRight.setXY(e,t)),this.vertexArray[Ou+Ah]=this.upperLeft.x,this.vertexArray[Ou+bh]=this.upperLeft.y,this.vertexArray[qu+Ah]=this.lowerLeft.x,this.vertexArray[qu+bh]=this.lowerLeft.y,this.vertexArray[Fu+Ah]=this.upperRight.x,this.vertexArray[Fu+bh]=this.upperRight.y,this.vertexArray[zu+Ah]=this.upperRight.x,this.vertexArray[zu+bh]=this.upperRight.y,this.vertexArray[Hu+Ah]=this.lowerLeft.x,this.vertexArray[Hu+bh]=this.lowerLeft.y,this.vertexArray[Ku+Ah]=this.lowerRight.x,this.vertexArray[Ku+bh]=this.lowerRight.y}return!0}}J0.prototype.webglRenderer=Se.webglTexturedTriangles;es.mixInto(J0);class $m extends Ec(zl){writeRectangularPath(e,t){e.beginPath(),e.moveTo(t._rectX,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY+t._rectHeight),e.lineTo(t._rectX,t._rectY+t._rectHeight),e.closePath()}paintCanvas(e,t,i){const s=e.context;if(t.isRounded()){s.beginPath();const r=t.getMaximumArcSize(),o=Math.min(t._cornerXRadius,r),c=Math.min(t._cornerYRadius,r),p=t._rectX+o,g=t._rectX+t._rectWidth-o,A=t._rectY+c,C=t._rectY+t._rectHeight-c;o===c?(s.arc(g,A,o,-Math.PI/2,0,!1),s.arc(g,C,o,0,Math.PI/2,!1),s.arc(p,C,o,Math.PI/2,Math.PI,!1),s.arc(p,A,o,Math.PI,Math.PI*3/2,!1)):(s.ellipse(g,A,o,c,0,-Math.PI/2,0,!1),s.ellipse(g,C,o,c,0,0,Math.PI/2,!1),s.ellipse(p,C,o,c,0,Math.PI/2,Math.PI,!1),s.ellipse(p,A,o,c,0,Math.PI,Math.PI*3/2,!1)),s.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e))}else t.hasFill()&&(t.getFillValue().transformMatrix?(this.writeRectangularPath(s,t),t.beforeCanvasFill(e),s.fill(),t.afterCanvasFill(e)):(t.beforeCanvasFill(e),s.fillRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasFill(e))),t.hasPaintableStroke()&&(t.getStrokeValue().transformMatrix?(this.writeRectangularPath(s,t),t.beforeCanvasStroke(e),s.stroke(),t.afterCanvasStroke(e)):(t.beforeCanvasStroke(e),s.strokeRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasStroke(e)))}markDirtyRectangle(){this.markPaintDirty()}markDirtyX(){this.markDirtyRectangle()}markDirtyY(){this.markDirtyRectangle()}markDirtyWidth(){this.markDirtyRectangle()}markDirtyHeight(){this.markDirtyRectangle()}markDirtyCornerXRadius(){this.markDirtyRectangle()}markDirtyCornerYRadius(){this.markDirtyRectangle()}}es.mixInto($m);const $0=Yn(n=>class extends Dc(n){initialize(e,t,...i){super.initialize(e,t,...i),this.paintDirty=!0,this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyRectangle(){this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0,this.markPaintDirty()}markDirtyX(){this.dirtyX=!0,this.markPaintDirty()}markDirtyY(){this.dirtyY=!0,this.markPaintDirty()}markDirtyWidth(){this.dirtyWidth=!0,this.markPaintDirty()}markDirtyHeight(){this.dirtyHeight=!0,this.markPaintDirty()}markDirtyCornerXRadius(){this.dirtyCornerXRadius=!0,this.markPaintDirty()}markDirtyCornerYRadius(){this.dirtyCornerYRadius=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyX=!1,this.dirtyY=!1,this.dirtyWidth=!1,this.dirtyHeight=!1,this.dirtyCornerXRadius=!1,this.dirtyCornerYRadius=!1}}),om=nt.pool.fetch();class rV extends $0(Ic){constructor(e,t){super(e,t),Pi.prepareForTransform(this.domElement)}initialize(e,t){if(super.initialize(e,t),!this.fillElement||!this.strokeElement){const i=document.createElement("div");this.fillElement=i,i.style.display="block",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.pointerEvents="none";const s=document.createElement("div");this.strokeElement=s,s.style.display="block",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.pointerEvents="none",i.appendChild(s)}this.domElement=this.fillElement}updateDOM(){const e=this.node,t=this.fillElement,i=this.strokeElement;if(this.paintDirty){const s=Math.min(e._cornerXRadius,e._cornerYRadius),r=this.dirtyCornerXRadius||this.dirtyCornerYRadius;if(this.dirtyWidth&&(t.style.width=`${e._rectWidth}px`),this.dirtyHeight&&(t.style.height=`${e._rectHeight}px`),r&&(t.style[It.borderRadius]=`${s}px`),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?i.style.borderStyle="solid":i.style.borderStyle="none"),e.hasStroke()){const o=!this.hadStroke;(o||this.dirtyWidth||this.dirtyLineWidth)&&(i.style.width=`${e._rectWidth-e.getLineWidth()}px`),(o||this.dirtyHeight||this.dirtyLineWidth)&&(i.style.height=`${e._rectHeight-e.getLineWidth()}px`),(o||this.dirtyLineWidth)&&(i.style.left=`${-e.getLineWidth()/2}px`,i.style.top=`${-e.getLineWidth()/2}px`,i.style.borderWidth=`${e.getLineWidth()}px`),(o||this.dirtyStroke)&&(i.style.borderColor=e.getSimpleCSSStroke()),(o||r||this.dirtyLineWidth||this.dirtyLineOptions)&&(i.style[It.borderRadius]=e.isRounded()||e.getLineJoin()==="round"?`${s+e.getLineWidth()/2}px`:"0")}}if(this.transformDirty||this.dirtyX||this.dirtyY){om.set(this.getTransformMatrix());const s=nt.translation(e._rectX,e._rectY);om.multiplyMatrix(s),s.freeToPool(),Pi.applyPreparedTransform(om,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}es.mixInto(rV);const vR=!0;class aV extends $0(ru){initialize(e,t){super.initialize(e,t,!0,vR),this.lastArcW=-1,this.lastArcH=-1,this.svgElement=this.svgElement||document.createElementNS(Qi,"rect")}updateSVGSelf(){const e=this.svgElement;if(this.dirtyX&&e.setAttribute("x",this.node._rectX),this.dirtyY&&e.setAttribute("y",this.node._rectY),this.dirtyWidth&&e.setAttribute("width",this.node._rectWidth),this.dirtyHeight&&e.setAttribute("height",this.node._rectHeight),this.dirtyCornerXRadius||this.dirtyCornerYRadius||this.dirtyWidth||this.dirtyHeight){let t=0,i=0;if(this.node.isRounded()){const s=this.node.getMaximumArcSize();t=Math.min(this.node._cornerXRadius,s),i=Math.min(this.node._cornerYRadius,s)}t!==this.lastArcW&&(this.lastArcW=t,e.setAttribute("rx",t)),i!==this.lastArcH&&(this.lastArcH=i,e.setAttribute("ry",i))}this.updateFillStrokeStyle(e)}}es.mixInto(aV);const VR=new et("transparent");class ey extends $0(Jv){initialize(e,t){super.initialize(e,t),this.vertexArray||(this.vertexArray=new Float32Array(6*6)),this.upperLeft=new we(0,0),this.lowerLeft=new we(0,0),this.upperRight=new we(0,0),this.lowerRight=new we(0,0),this.transformDirty=!0,this.includeVertices=!0}onAddToBlock(e){this.webglBlock=e,this.markDirty()}onRemoveFromBlock(e){}markTransformDirty(){this.transformDirty=!0,super.markTransformDirty()}update(){if(!super.update())return!1;if(this.dirtyFill&&(this.includeVertices=this.node.hasFill(),this.includeVertices)){const e=Dt(this.node.fill)?this.node.fill.value:this.node.fill,t=VR.set(e),i=t.red/255,s=t.green/255,r=t.blue/255,o=t.alpha;for(let c=0;c<6;c++){const p=c*6;this.vertexArray[2+p]=i,this.vertexArray[3+p]=s,this.vertexArray[4+p]=r,this.vertexArray[5+p]=o}}if(this.transformDirty||this.dirtyX||this.dirtyY||this.dirtyWidth||this.dirtyHeight){this.transformDirty=!1;const e=this.node._rectX,t=this.node._rectY,i=this.node._rectWidth,s=this.node._rectHeight,r=this.instance.relativeTransform.matrix;r.multiplyVector2(this.upperLeft.setXY(e,t)),r.multiplyVector2(this.lowerLeft.setXY(e,t+s)),r.multiplyVector2(this.upperRight.setXY(e+i,t)),r.multiplyVector2(this.lowerRight.setXY(e+i,t+s)),this.vertexArray[0]=this.upperLeft.x,this.vertexArray[1]=this.upperLeft.y,this.vertexArray[6]=this.lowerLeft.x,this.vertexArray[7]=this.lowerLeft.y,this.vertexArray[12]=this.upperRight.x,this.vertexArray[13]=this.upperRight.y,this.vertexArray[18]=this.upperRight.x,this.vertexArray[19]=this.upperRight.y,this.vertexArray[24]=this.lowerLeft.x,this.vertexArray[25]=this.lowerLeft.y,this.vertexArray[30]=this.lowerRight.x,this.vertexArray[31]=this.lowerRight.y}return this.setToCleanState(),this.cleanPaintableState(),!0}}ey.prototype.webglRenderer=Se.webglVertexColorPolygons;es.mixInto(ey);let SR=1;class N2{constructor(){this.id=`filter${SR++}`,this.filterRegionPercentageIncrease=0}isDOMCompatible(){return!1}isSVGCompatible(){return!1}isCanvasCompatible(){return It.canvasFilter?this.isDOMCompatible():!1}isWebGLCompatible(){return!1}toString(){return this.id}static applyColorMatrix(e,t,i,s){const r=document.createElementNS(Qi,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values",e),r.setAttribute("in",i),r.setAttribute("color-interpolation-filters","sRGB"),s&&r.setAttribute("result",s),t.appendChild(r)}}const wR=Pi.supportsImageDataCanvasFilter();class sp extends N2{constructor(e,t,i,s,r,o,c,p,g,A,C,D,P,F,K,M,U,$,re,pe){super(),this.m00=e,this.m01=t,this.m02=i,this.m03=s,this.m04=r,this.m10=o,this.m11=c,this.m12=p,this.m13=g,this.m14=A,this.m20=C,this.m21=D,this.m22=P,this.m23=F,this.m24=K,this.m30=M,this.m31=U,this.m32=$,this.m33=re,this.m34=pe}applySVGFilter(e,t,i){N2.applyColorMatrix(`${Ii(this.m00)} ${Ii(this.m01)} ${Ii(this.m02)} ${Ii(this.m03)} ${Ii(this.m04)} ${Ii(this.m10)} ${Ii(this.m11)} ${Ii(this.m12)} ${Ii(this.m13)} ${Ii(this.m14)} ${Ii(this.m20)} ${Ii(this.m21)} ${Ii(this.m22)} ${Ii(this.m23)} ${Ii(this.m24)} ${Ii(this.m30)} ${Ii(this.m31)} ${Ii(this.m32)} ${Ii(this.m33)} ${Ii(this.m34)}`,e,t,i)}applyCanvasFilter(e){const t=e.canvas.width,i=e.canvas.height,s=e.context.getImageData(0,0,t,i),r=t*i;for(let o=0;o<r;o++){const c=o*4;{const g=Math.pow(s.data[c+0]/255,1.45),A=Math.pow(s.data[c+1]/255,1.45),C=Math.pow(s.data[c+2]/255,1.45),D=Math.pow(s.data[c+3]/255,1.45);s.data[c+0]=255*Math.pow(g*this.m00+A*this.m01+C*this.m02+D*this.m03+this.m04,1/1.45),s.data[c+1]=255*Math.pow(g*this.m10+A*this.m11+C*this.m12+D*this.m13+this.m14,1/1.45),s.data[c+2]=255*Math.pow(g*this.m20+A*this.m21+C*this.m22+D*this.m23+this.m24,1/1.45),s.data[c+3]=255*Math.pow(g*this.m30+A*this.m31+C*this.m32+D*this.m33+this.m34,1/1.45)}}e.context.putImageData(s,0,0)}isSVGCompatible(){return!0}isCanvasCompatible(){return super.isCanvasCompatible()||wR}getCSSFilterString(){throw new Error("unimplemented")}}class e0 extends sp{constructor(e){super(e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`brightness(${Ii(this.amount)})`}isDOMCompatible(){return!0}}e0.BLACKEN=new e0(0);class t0 extends sp{constructor(e){super(e,0,0,0,-(.5*e)+.5,0,e,0,0,-(.5*e)+.5,0,0,e,0,-(.5*e)+.5,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`contrast(${Ii(this.amount)})`}isDOMCompatible(){return!0}}t0.GRAY=new t0(0);class i0 extends sp{constructor(e=1){const t=1-e;super(.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`grayscale(${Ii(this.amount)})`}isDOMCompatible(){return!0}}i0.FULL=new i0(1);class CR extends sp{constructor(e){const t=Math.cos(e),i=Math.sin(e);super(.213+.787*t-.213*i,.715-.715*t-.715*i,.072-.072*t+.928*i,0,0,.213-.213*t+.143*i,.715+.285*t+.14*i,.072-.072*t-.283*i,0,0,.213-.213*t-.787*i,.715-.715*t+.715*i,.072+.928*t+.072*i,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`hue-rotate(${Ii(P1(this.amount))}deg)`}isDOMCompatible(){return!0}}const Nd=1e-9,s0=["preferredHeight","minimumHeight","localPreferredHeight","localMinimumHeight","heightSizable"],PR=Yn(n=>{const e=Hl("HeightSizable",s0,class extends n{constructor(...i){super(...i),this.preferredHeightProperty=new ui(null),this.minimumHeightProperty=new ui(null),this.localPreferredHeightProperty=new ui(null),this.localMinimumHeightProperty=new ui(null),this.isHeightResizableProperty=new ui(!0),this._preferredSizeChanging=!1,this._minimumSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock=!1,this._minimumSizeChangeAttemptDuringLock=!1,this._updatePreferredHeightListener=this._updatePreferredHeight.bind(this),this._updateLocalPreferredHeightListener=this._updateLocalPreferredHeight.bind(this),this._updateMinimumHeightListener=this._updateMinimumHeight.bind(this),this._updateLocalMinimumHeightListener=this._updateLocalMinimumHeight.bind(this),this.preferredHeightProperty.lazyLink(this._updateLocalPreferredHeightListener),this.localPreferredHeightProperty.lazyLink(this._updatePreferredHeightListener),this.minimumHeightProperty.lazyLink(this._updateLocalMinimumHeightListener),this.localMinimumHeightProperty.lazyLink(this._updateMinimumHeightListener),this.transformEmitter.addListener(this._updateLocalPreferredHeightListener),this.transformEmitter.addListener(this._updateMinimumHeightListener)}get preferredHeight(){return this.preferredHeightProperty.value}set preferredHeight(i){this.preferredHeightProperty.value=i}get localPreferredHeight(){return this.localPreferredHeightProperty.value}set localPreferredHeight(i){this.localPreferredHeightProperty.value=i}get minimumHeight(){return this.minimumHeightProperty.value}set minimumHeight(i){this.minimumHeightProperty.value=i}get localMinimumHeight(){return this.localMinimumHeightProperty.value}set localMinimumHeight(i){this.localMinimumHeightProperty.value=i}get heightSizable(){return this.isHeightResizableProperty.value}set heightSizable(i){this.isHeightResizableProperty.value=i}get extendsHeightSizable(){return!0}validateLocalPreferredHeight(){}_calculateLocalPreferredHeight(){return this.matrix.isAligned()&&this.preferredHeight!==null?Math.abs(this.transform.inverseDeltaY(this.preferredHeight)):null}_onReentrantPreferredHeight(){this._updateLocalPreferredHeightListener()}_updateLocalPreferredHeight(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0;do{this._preferredSizeChangeAttemptDuringLock=!1;const i=this._calculateLocalPreferredHeight();(this.localPreferredHeightProperty.value===null||i===null||Math.abs(this.localPreferredHeightProperty.value-i)>Nd)&&(this.localPreferredHeightProperty.value=i)}while(this._preferredSizeChangeAttemptDuringLock);this._preferredSizeChanging=!1}}_calculatePreferredHeight(){return this.matrix.isAligned()&&this.localPreferredHeight!==null?Math.abs(this.transform.transformDeltaY(this.localPreferredHeight)):null}_updatePreferredHeight(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0,this._preferredSizeChangeAttemptDuringLock=!1;const i=this._calculatePreferredHeight();(this.preferredHeightProperty.value===null||i===null||Math.abs(this.preferredHeightProperty.value-i)>Nd)&&(this.preferredHeightProperty.value=i),this._preferredSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock&&this._onReentrantPreferredHeight()}}_calculateLocalMinimumHeight(){return this.matrix.isAligned()&&this.minimumHeight!==null?Math.abs(this.transform.inverseDeltaY(this.minimumHeight)):null}_onReentrantLocalMinimumHeight(){this._updateMinimumHeight()}_updateLocalMinimumHeight(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0,this._minimumSizeChangeAttemptDuringLock=!1;const i=this._calculateLocalMinimumHeight();(this.localMinimumHeightProperty.value===null||i===null||Math.abs(this.localMinimumHeightProperty.value-i)>Nd)&&(this.localMinimumHeightProperty.value=i),this._minimumSizeChanging=!1,this._minimumSizeChangeAttemptDuringLock&&this._onReentrantLocalMinimumHeight()}}_calculateMinimumHeight(){return this.matrix.isAligned()&&this.localMinimumHeight!==null?Math.abs(this.transform.transformDeltaY(this.localMinimumHeight)):null}_updateMinimumHeight(){if(!this._minimumSizeChanging){this._minimumSizeChanging=!0;do{this._minimumSizeChangeAttemptDuringLock=!1;const i=this._calculateMinimumHeight();(this.minimumHeightProperty.value===null||i===null||Math.abs(this.minimumHeightProperty.value-i)>Nd)&&(this.minimumHeightProperty.value=i)}while(this._minimumSizeChangeAttemptDuringLock);this._minimumSizeChanging=!1}}mutate(i){return super.mutate(i)}});if(e.prototype._mutatorKeys){const t=e.prototype._mutatorKeys,i=s0,s=t.indexOf(Tl[0]);e.prototype._mutatorKeys=[...t.slice(0,s),...i,...t.slice(s)]}return e}),ER=["left","right","center","origin"],DR=["top","bottom","center","origin"],TR=["left","right","center"],IR=["top","bottom","center"];class $i extends bn{constructor(e,t,i=Number.POSITIVE_INFINITY){super(),this.horizontal=e,this.vertical=t,this.padRatio=i}static getAllowedAligns(e){return[...e===xt.HORIZONTAL?ER:DR,null]}static getAllowedRestrictedAligns(e){return[...e===xt.HORIZONTAL?TR:IR,null]}static alignToInternal(e,t){return e===xt.HORIZONTAL?$i.horizontalAlignToInternal(t):$i.verticalAlignToInternal(t)}static horizontalAlignToInternal(e){return e===null?null:xR[e]}static verticalAlignToInternal(e){return e===null?null:LR[e]}static internalToAlign(e,t){return t===null?null:e===xt.HORIZONTAL?t.horizontal:t.vertical}}$i.START=new $i("left","top",0);$i.END=new $i("right","bottom",1);$i.CENTER=new $i("center","center",.5);$i.ORIGIN=new $i("origin","origin");$i.enumeration=new br($i,{phetioDocumentation:"Alignment for layout containers"});const xR={left:$i.START,right:$i.END,center:$i.CENTER,origin:$i.ORIGIN},LR={top:$i.START,bottom:$i.END,center:$i.CENTER,origin:$i.ORIGIN},kR=["left","right","center","spaceBetween","spaceAround","spaceEvenly"],BR=["top","bottom","center","spaceBetween","spaceAround","spaceEvenly"];class ji extends bn{constructor(e,t,i){super(),this.spacingFunctionFactory=e,this.horizontal=t,this.vertical=i}static getAllowedJustificationValues(e){return e===xt.HORIZONTAL?kR:BR}static justifyToInternal(e,t){return e===xt.HORIZONTAL?RR[t]:NR[t]}static internalToJustify(e,t){return e===xt.HORIZONTAL?t.horizontal:t.vertical}}ji.START=new ji(()=>()=>0,"left","top");ji.END=new ji(n=>e=>e===0?n:0,"right","bottom");ji.CENTER=new ji(n=>e=>e===0?n/2:0,"center","center");ji.SPACE_BETWEEN=new ji((n,e)=>t=>t!==0?n/(e-1):0,"spaceBetween","spaceBetween");ji.SPACE_AROUND=new ji((n,e)=>t=>(t!==0?2:1)*n/(2*e),"spaceAround","spaceAround");ji.SPACE_EVENLY=new ji((n,e)=>t=>n/(e+1),"spaceEvenly","spaceEvenly");ji.enumeration=new br(ji,{phetioDocumentation:"Justify for layout containers"});const RR={left:ji.START,right:ji.END,center:ji.CENTER,spaceBetween:ji.SPACE_BETWEEN,spaceAround:ji.SPACE_AROUND,spaceEvenly:ji.SPACE_EVENLY},NR={top:ji.START,bottom:ji.END,center:ji.CENTER,spaceBetween:ji.SPACE_BETWEEN,spaceAround:ji.SPACE_AROUND,spaceEvenly:ji.SPACE_EVENLY},bc=n=>n.widthSizable,of=n=>n.heightSizable,lf=n=>n.extendsWidthSizable,hf=n=>n.extendsHeightSizable;class Mh{constructor(e){this.initialize(e)}initialize(e){return this.trail=e,this}checkPreconditions(){}get node(){return this.trail.lastNode()}get bounds(){return this.trail.parentToGlobalBounds(this.node.bounds)}get visibleBounds(){return this.trail.parentToGlobalBounds(this.node.visibleBounds)}get width(){return this.bounds.width}get height(){return this.bounds.height}get x(){return this.trail.getParentTransform().transformX(this.node.x)}set x(e){this.node.x=this.trail.getParentTransform().inverseX(e)}get y(){return this.trail.getParentTransform().transformY(this.node.y)}set y(e){this.node.y=this.trail.getParentTransform().inverseY(e)}get translation(){return this.trail.getParentTransform().transformPosition2(this.node.translation)}set translation(e){this.node.translation=this.trail.getParentTransform().inversePosition2(e)}get left(){return this.trail.getParentTransform().transformX(this.node.left)}set left(e){this.node.left=this.trail.getParentTransform().inverseX(e)}get right(){return this.trail.getParentTransform().transformX(this.node.right)}set right(e){this.node.right=this.trail.getParentTransform().inverseX(e)}get centerX(){return this.trail.getParentTransform().transformX(this.node.centerX)}set centerX(e){this.node.centerX=this.trail.getParentTransform().inverseX(e)}get top(){return this.trail.getParentTransform().transformY(this.node.top)}set top(e){this.node.top=this.trail.getParentTransform().inverseY(e)}get bottom(){return this.trail.getParentTransform().transformY(this.node.bottom)}set bottom(e){this.node.bottom=this.trail.getParentTransform().inverseY(e)}get centerY(){return this.trail.getParentTransform().transformY(this.node.centerY)}set centerY(e){this.node.centerY=this.trail.getParentTransform().inverseY(e)}get leftTop(){return this.trail.getParentTransform().transformPosition2(this.node.leftTop)}set leftTop(e){this.node.leftTop=this.trail.getParentTransform().inversePosition2(e)}get centerTop(){return this.trail.getParentTransform().transformPosition2(this.node.centerTop)}set centerTop(e){this.node.centerTop=this.trail.getParentTransform().inversePosition2(e)}get rightTop(){return this.trail.getParentTransform().transformPosition2(this.node.rightTop)}set rightTop(e){this.node.rightTop=this.trail.getParentTransform().inversePosition2(e)}get leftCenter(){return this.trail.getParentTransform().transformPosition2(this.node.leftCenter)}set leftCenter(e){this.node.leftCenter=this.trail.getParentTransform().inversePosition2(e)}get center(){return this.trail.getParentTransform().transformPosition2(this.node.center)}set center(e){this.node.center=this.trail.getParentTransform().inversePosition2(e)}get rightCenter(){return this.trail.getParentTransform().transformPosition2(this.node.rightCenter)}set rightCenter(e){this.node.rightCenter=this.trail.getParentTransform().inversePosition2(e)}get leftBottom(){return this.trail.getParentTransform().transformPosition2(this.node.leftBottom)}set leftBottom(e){this.node.leftBottom=this.trail.getParentTransform().inversePosition2(e)}get centerBottom(){return this.trail.getParentTransform().transformPosition2(this.node.centerBottom)}set centerBottom(e){this.node.centerBottom=this.trail.getParentTransform().inversePosition2(e)}get rightBottom(){return this.trail.getParentTransform().transformPosition2(this.node.rightBottom)}set rightBottom(e){this.node.rightBottom=this.trail.getParentTransform().inversePosition2(e)}get widthSizable(){return this.node.widthSizable}get heightSizable(){return this.node.heightSizable}isSizable(e){return e===xt.HORIZONTAL?this.widthSizable:this.heightSizable}get minimumWidth(){const e=bc(this.node)?this.node.minimumWidth??0:this.node.width;return Math.abs(this.trail.getParentTransform().transformDeltaX(e))}get minimumHeight(){const e=of(this.node)?this.node.minimumHeight??0:this.node.height;return Math.abs(this.trail.getParentTransform().transformDeltaY(e))}getMinimum(e){return e===xt.HORIZONTAL?this.minimumWidth:this.minimumHeight}get maxWidth(){return this.node.maxWidth===null?null:Math.abs(this.trail.getParentTransform().transformDeltaX(this.node.maxWidth))}set maxWidth(e){this.node.maxWidth=e===null?null:Math.abs(this.trail.getParentTransform().inverseDeltaX(e))}get maxHeight(){return this.node.maxHeight===null?null:Math.abs(this.trail.getParentTransform().transformDeltaY(this.node.maxHeight))}set maxHeight(e){this.node.maxHeight=e===null?null:Math.abs(this.trail.getParentTransform().inverseDeltaY(e))}getMax(e){return e===xt.HORIZONTAL?this.maxWidth:this.maxHeight}attemptPreferredSize(e,t){if(this.isSizable(e))if(t===null)this.node[e.preferredSize]=null;else{t=Math.abs(this.trail.getParentTransform()[e===xt.HORIZONTAL?"inverseDeltaX":"inverseDeltaY"](t));const i=this.getMinimum(e);t=Math.max(i,t);const s=this.getMax(e);s!==null&&(t=Math.min(s,t)),this.node[e.preferredSize]=t}}get preferredWidth(){if(bc(this.node)){const e=this.node.preferredWidth;return e===null?null:Math.abs(this.trail.getParentTransform().transformDeltaX(e))}else return null}set preferredWidth(e){this.attemptPreferredSize(xt.HORIZONTAL,e)}get preferredHeight(){if(of(this.node)){const e=this.node.preferredHeight;return e===null?null:Math.abs(this.trail.getParentTransform().transformDeltaY(e))}else return null}set preferredHeight(e){this.attemptPreferredSize(xt.VERTICAL,e)}get visible(){return this.node.visible}set visible(e){this.node.visible=e}dispose(){this.trail=null,this.freeToPool()}freeToPool(){Mh.pool.freeToPool(this)}}Mh.pool=new us(Mh,{maxSize:1e3});class MR extends ui{constructor(e,t){super([]),this.listenedNodeSet=new Set,this.rootNode=e,this.leafNode=t,this._trailUpdateListener=this.update.bind(this),this.update()}update(){const e=[],t=new Set,i=new bi(this.leafNode),s=this.rootNode;(function c(){const p=i.rootNode();t.add(p),p===s&&e.push(i.copy()),p.parents.forEach(g=>{i.addAncestor(g),c(),i.removeAncestor()})})(),t.forEach(c=>{this.listenedNodeSet.has(c)||this.addNodeListener(c)}),this.listenedNodeSet.forEach(c=>{t.has(c)||this.removeNodeListener(c)});const r=this.value;let o=r.length===e.length;if(o){for(let c=0;c<e.length;c++)if(!r[c].equals(e[c])){o=!1;break}}o||(this.value=e)}addNodeListener(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._trailUpdateListener),e.parentRemovedEmitter.addListener(this._trailUpdateListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._trailUpdateListener),e.parentRemovedEmitter.removeListener(this._trailUpdateListener)}dispose(){this.listenedNodeSet.forEach(e=>this.removeNodeListener(e)),super.dispose()}}class OR extends y1{constructor(e,t,i){const s=new MR(e,t);super([s],o=>o.length===1?Mh.pool.create(o[0].copy().removeAncestor()):null),this.transformTracker=null,this.trailsBetweenProperty=s,this.lazyLink((o,c)=>{c&&c.dispose()});const r=i==null?void 0:i.onTransformChange;r&&this.link(o=>{this.transformTracker&&(this.transformTracker.dispose(),this.transformTracker=null),o&&(this.transformTracker=new bl(o.trail.copy().addAncestor(e)),this.transformTracker.addListener(r))})}dispose(){this.trailsBetweenProperty.dispose(),this.transformTracker&&this.transformTracker.dispose(),super.dispose()}}const M2=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable"],qR=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable",...Ym,...s0],lu=Yn(n=>{const e=Hl("Sizable",M2,class extends ep(PR(n)){constructor(...i){super(...i),this.preferredWidthProperty.lazyLink(this._updateLocalPreferredHeightListener),this.preferredHeightProperty.lazyLink(this._updateLocalPreferredWidthListener),this.localPreferredWidthProperty.lazyLink(this._updatePreferredHeightListener),this.localPreferredHeightProperty.lazyLink(this._updatePreferredWidthListener),this.minimumWidthProperty.lazyLink(this._updateLocalMinimumHeightListener),this.minimumHeightProperty.lazyLink(this._updateLocalMinimumWidthListener),this.localMinimumWidthProperty.lazyLink(this._updateMinimumHeightListener),this.localMinimumHeightProperty.lazyLink(this._updateMinimumWidthListener)}get preferredSize(){return this.preferredWidth===null||this.preferredHeight===null?null:new ps(this.preferredWidth,this.preferredHeight)}set preferredSize(i){this.preferredWidth=i===null?null:i.width,this.preferredHeight=i===null?null:i.height}get localPreferredSize(){return this.localPreferredWidth===null||this.localPreferredHeight===null?null:new ps(this.localPreferredWidth,this.localPreferredHeight)}set localPreferredSize(i){this.localPreferredWidth=i===null?null:i.width,this.localPreferredHeight=i===null?null:i.height}get minimumSize(){return this.minimumWidth===null||this.minimumHeight===null?null:new ps(this.minimumWidth,this.minimumHeight)}set minimumSize(i){this.minimumWidth=i===null?null:i.width,this.minimumHeight=i===null?null:i.height}get localMinimumSize(){return this.localMinimumWidth===null||this.localMinimumHeight===null?null:new ps(this.localMinimumWidth,this.localMinimumHeight)}set localMinimumSize(i){this.localMinimumWidth=i===null?null:i.width,this.localMinimumHeight=i===null?null:i.height}get sizable(){return this.widthSizable}set sizable(i){this.widthSizable=i,this.heightSizable=i}get extendsSizable(){return!0}validateLocalPreferredSize(){}mutate(i){return Ta(i,["preferredSize"],["preferredWidth","preferredHeight"]),Ta(i,["localPreferredSize"],["localPreferredWidth","localPreferredHeight"]),Ta(i,["minimumSize"],["minimumWidth","minimumHeight"]),Ta(i,["localMinimumSize"],["localMinimumWidth","localMinimumHeight"]),Ta(i,["sizable"],["widthSizable","heightSizable"]),super.mutate(i)}_calculateLocalPreferredWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.preferredWidth!==null)return Math.abs(this.transform.inverseDeltaX(this.preferredWidth))}else if(this.preferredHeight!==null)return Math.abs(this.transform.getInverse().m01()*this.preferredHeight)}return null}_calculateLocalPreferredHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.preferredHeight!==null)return Math.abs(this.transform.inverseDeltaY(this.preferredHeight))}else if(this.preferredWidth!==null)return Math.abs(this.transform.getInverse().m10()*this.preferredWidth)}return null}_calculatePreferredWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localPreferredWidth!==null)return Math.abs(this.transform.transformDeltaX(this.localPreferredWidth))}else if(this.localPreferredHeight!==null)return Math.abs(this.transform.matrix.m01()*this.localPreferredHeight)}return null}_calculatePreferredHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localPreferredHeight!==null)return Math.abs(this.transform.transformDeltaY(this.localPreferredHeight))}else if(this.localPreferredWidth!==null)return Math.abs(this.transform.matrix.m10()*this.localPreferredWidth)}return null}_onReentrantLocalMinimumWidth(){this._updateMinimumWidthListener(),this._updateMinimumHeightListener()}_onReentrantLocalMinimumHeight(){this._updateMinimumWidthListener(),this._updateMinimumHeightListener()}_onReentrantPreferredWidth(){this._updateLocalPreferredWidthListener(),this._updateLocalPreferredHeightListener()}_onReentrantPreferredHeight(){this._updateLocalPreferredWidthListener(),this._updateLocalPreferredHeightListener()}_calculateLocalMinimumWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.minimumWidth!==null)return Math.abs(this.transform.inverseDeltaX(this.minimumWidth))}else if(this.minimumHeight!==null)return Math.abs(this.transform.getInverse().m01()*this.minimumHeight)}return null}_calculateLocalMinimumHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.minimumHeight!==null)return Math.abs(this.transform.inverseDeltaY(this.minimumHeight))}else if(this.minimumWidth!==null)return Math.abs(this.transform.getInverse().m10()*this.minimumWidth)}return null}_calculateMinimumWidth(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localMinimumWidth!==null)return Math.abs(this.transform.transformDeltaX(this.localMinimumWidth))}else if(this.localMinimumHeight!==null)return Math.abs(this.transform.matrix.m01()*this.localMinimumHeight)}return null}_calculateMinimumHeight(){if(this.matrix.isAxisAligned()){if(this.matrix.isAligned()){if(this.localMinimumHeight!==null)return Math.abs(this.transform.transformDeltaY(this.localMinimumHeight))}else if(this.localMinimumWidth!==null)return Math.abs(this.transform.matrix.m10()*this.localMinimumWidth)}return null}});if(e.prototype._mutatorKeys){const t=e.prototype._mutatorKeys,i=M2,s=t.indexOf(Tl[0]);e.prototype._mutatorKeys=[...t.slice(0,s),...i,...t.slice(s)]}return e});class Ul{constructor(e){this._layoutLockCount=0,this._layoutAttemptDuringLock=!1,this._enabled=!0,this._listenedNodes=new Set,this.finishedLayoutEmitter=new Ai,this.ancestorNode=e,this._updateLayoutListener=this.updateLayoutAutomatically.bind(this)}addNode(e,t=!0){t&&(e._activeParentLayoutConstraint=this),e.boundsProperty.lazyLink(this._updateLayoutListener),e.visibleProperty.lazyLink(this._updateLayoutListener),lf(e)&&(e.minimumWidthProperty.lazyLink(this._updateLayoutListener),e.isWidthResizableProperty.lazyLink(this._updateLayoutListener)),hf(e)&&(e.minimumHeightProperty.lazyLink(this._updateLayoutListener),e.isHeightResizableProperty.lazyLink(this._updateLayoutListener)),this._listenedNodes.add(e)}removeNode(e){e._activeParentLayoutConstraint===this&&(e._activeParentLayoutConstraint=null),e.boundsProperty.unlink(this._updateLayoutListener),e.visibleProperty.unlink(this._updateLayoutListener),lf(e)&&(e.minimumWidthProperty.unlink(this._updateLayoutListener),e.isWidthResizableProperty.unlink(this._updateLayoutListener)),hf(e)&&(e.minimumHeightProperty.unlink(this._updateLayoutListener),e.isHeightResizableProperty.unlink(this._updateLayoutListener)),this._listenedNodes.delete(e)}layout(){}get isLocked(){return this._layoutLockCount>0}lock(){this._layoutLockCount++}unlock(){this._layoutLockCount--}validateLocalPreferredWidth(e){}validateLocalPreferredHeight(e){}validateLocalPreferredSize(e){}updateLayout(){if(this.isLocked)this._layoutAttemptDuringLock=!0;else{this.lock();do this._layoutAttemptDuringLock=!1,this.layout();while(this._layoutAttemptDuringLock);this.unlock()}}updateLayoutAutomatically(){this._enabled&&this.updateLayout()}createLayoutProxy(e){const t=e.getTrails(i=>i===this.ancestorNode);return t.length===1?Mh.pool.create(t[0].removeAncestor()):null}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.updateLayoutAutomatically())}dispose(){const e=[...this._listenedNodes.keys()];for(let t=0;t<e.length;t++)this.removeNode(e[t]);this.finishedLayoutEmitter.dispose()}}const FR=["alignBounds","align","xAlign","yAlign","margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","group"],oV=lu(At);class lV extends oV{constructor(e,t){const i=lt()({children:[e]},t),s={sizable:!1};super(s),this._xSet=!1,this._ySet=!1,this._contentBoundsListener=te.noop,this._content=e,this._alignBounds=null,this._xAlign="center",this._yAlign="center",this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._group=null,this._contentBoundsListener=this.invalidateAlignment.bind(this),this._alignBoundsProperty=null,this._alignBoundsPropertyListener=te.noop,Ta(i,["alignBounds"],["alignBoundsProperty"]),t!=null&&t.alignBoundsProperty&&(this._alignBoundsProperty=t.alignBoundsProperty,i.alignBounds=this._alignBoundsProperty.value,this._alignBoundsPropertyListener=r=>{this.alignBounds=r},this._alignBoundsProperty.lazyLink(this._alignBoundsPropertyListener)),this.localBounds=new Je(0,0,0,0),this.constraint=new zR(this,e),this._content.boundsProperty.link(this._contentBoundsListener),lf(this._content)&&this._content.minimumWidthProperty.link(this._contentBoundsListener),hf(this._content)&&this._content.minimumHeightProperty.link(this._contentBoundsListener),this.mutate(i),_n.multilink([this.localPreferredWidthProperty,this.localPreferredHeightProperty],(r,o)=>{if(r!==null||o!==null){const c=this._alignBounds||new Je(0,0,0,0);r&&(c.minX=0,c.maxX=r,this._xSet=!0),o&&(c.minY=0,c.maxY=o,this._ySet=!0),this._alignBounds=c,this.constraint.updateLayout()}})}invalidateAlignment(){this._group&&this._group.onAlignBoxResized(this),this.constraint.updateLayout()}setAlignBounds(e){return this._xSet=!0,this._ySet=!0,this._alignBounds!==e&&(!e||!this._alignBounds||!e.equals(this._alignBounds))&&(this._alignBounds=e,this.constraint.updateLayout()),this}set alignBounds(e){this.setAlignBounds(e)}get alignBounds(){return this.getAlignBounds()}getAlignBounds(){return this._alignBounds}setGroup(e){return this._group!==e&&(this._group&&this._group.removeAlignBox(this),this._group=e,this._group&&this._group.addAlignBox(this)),this}set group(e){this.setGroup(e)}get group(){return this.getGroup()}getGroup(){return this._group}setXAlign(e){return this._xAlign!==e&&(this._xAlign=e,this.invalidateAlignment()),this}set xAlign(e){this.setXAlign(e)}get xAlign(){return this.getXAlign()}getXAlign(){return this._xAlign}setYAlign(e){return this._yAlign!==e&&(this._yAlign=e,this.invalidateAlignment()),this}set yAlign(e){this.setYAlign(e)}get yAlign(){return this.getYAlign()}getYAlign(){return this._yAlign}getAlign(){return this._xAlign}setAlign(e){return this.setXAlign(e),this.setYAlign(e),this}get align(){return this.getAlign()}set align(e){this.setAlign(e)}setMargin(e){return(this._leftMargin!==e||this._rightMargin!==e||this._topMargin!==e||this._bottomMargin!==e)&&(this._leftMargin=this._rightMargin=this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}set margin(e){this.setMargin(e)}get margin(){return this.getMargin()}getMargin(){return this._leftMargin}setXMargin(e){return(this._leftMargin!==e||this._rightMargin!==e)&&(this._leftMargin=this._rightMargin=e,this.invalidateAlignment()),this}set xMargin(e){this.setXMargin(e)}get xMargin(){return this.getXMargin()}getXMargin(){return this._leftMargin}setYMargin(e){return(this._topMargin!==e||this._bottomMargin!==e)&&(this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}set yMargin(e){this.setYMargin(e)}get yMargin(){return this.getYMargin()}getYMargin(){return this._topMargin}setLeftMargin(e){return this._leftMargin!==e&&(this._leftMargin=e,this.invalidateAlignment()),this}set leftMargin(e){this.setLeftMargin(e)}get leftMargin(){return this.getLeftMargin()}getLeftMargin(){return this._leftMargin}setRightMargin(e){return this._rightMargin!==e&&(this._rightMargin=e,this.invalidateAlignment()),this}set rightMargin(e){this.setRightMargin(e)}get rightMargin(){return this.getRightMargin()}getRightMargin(){return this._rightMargin}setTopMargin(e){return this._topMargin!==e&&(this._topMargin=e,this.invalidateAlignment()),this}set topMargin(e){this.setTopMargin(e)}get topMargin(){return this.getTopMargin()}getTopMargin(){return this._topMargin}setBottomMargin(e){return this._bottomMargin!==e&&(this._bottomMargin=e,this.invalidateAlignment()),this}set bottomMargin(e){this.setBottomMargin(e)}get bottomMargin(){return this.getBottomMargin()}getBottomMargin(){return this._bottomMargin}getContent(){return this._content}get content(){return this.getContent()}getContentBounds(){const e=this._content.bounds;return new Je(e.left-this._leftMargin,e.top-this._topMargin,e.right+this._rightMargin,e.bottom+this._bottomMargin)}getMinimumWidth(){return(this._xAlign==="stretch"&&bc(this._content)?this._content.minimumWidth??0:this._content.width)+this._leftMargin+this._rightMargin}getMinimumHeight(){return(this._yAlign==="stretch"&&of(this._content)?this._content.minimumHeight??0:this._content.height)+this._topMargin+this._bottomMargin}setAdjustedLocalBounds(e){if(this._xSet&&this._ySet)this.localBounds=e;else if(this._xSet){const t=this.getContentBounds();this.localBounds=new Je(e.minX,t.minY,e.maxX,t.maxY)}else if(this._ySet){const t=this.getContentBounds();this.localBounds=new Je(t.minX,e.minY,t.maxX,e.maxY)}else this.localBounds=this.getContentBounds()}dispose(){this._alignBoundsProperty&&this._alignBoundsProperty.unlink(this._alignBoundsPropertyListener),this._content.boundsProperty.unlink(this._contentBoundsListener),lf(this._content)&&this._content.minimumWidthProperty.unlink(this._contentBoundsListener),hf(this._content)&&this._content.minimumHeightProperty.unlink(this._contentBoundsListener),this._content=new At,this.group=null,this.constraint.dispose(),super.dispose()}mutate(e){return super.mutate(e)}}class zR extends Ul{constructor(e,t){super(e),this.alignBox=e,this.content=t,this.addNode(t),e.isWidthResizableProperty.lazyLink(this._updateLayoutListener),e.isHeightResizableProperty.lazyLink(this._updateLayoutListener)}updateProperty(e,t){const i=this.content[e],s=this.alignBox.localBounds[e]+t;Math.abs(i-s)>1e-5&&(this.content[e]=s)}layout(){super.layout();const e=this.alignBox,t=this.content;if(!t.bounds.isValid())return;const i=e.leftMargin+e.rightMargin,s=e.topMargin+e.bottomMargin;if(e.alignBounds!==null)e.setAdjustedLocalBounds(e.alignBounds);else{const c=t.width+i,p=t.height+s;e.setAdjustedLocalBounds(new Je(0,0,c,p))}const r=isFinite(t.width)?(bc(t)?t.minimumWidth||0:t.width)+i:null,o=isFinite(t.height)?(of(t)?t.minimumHeight||0:t.height)+s:null;t.localBounds.isEmpty()||(e.xAlign==="center"?this.updateProperty("centerX",(e.leftMargin-e.rightMargin)/2):e.xAlign==="left"?this.updateProperty("left",e.leftMargin):e.xAlign==="right"?this.updateProperty("right",-e.rightMargin):e.xAlign==="stretch"&&(t.preferredWidth=e.localWidth-e.leftMargin-e.rightMargin,this.updateProperty("left",e.leftMargin)),e.yAlign==="center"?this.updateProperty("centerY",(e.topMargin-e.bottomMargin)/2):e.yAlign==="top"?this.updateProperty("top",e.topMargin):e.yAlign==="bottom"?this.updateProperty("bottom",-e.bottomMargin):e.yAlign==="stretch"&&(t.preferredHeight=e.localHeight-e.topMargin-e.bottomMargin,this.updateProperty("top",e.topMargin))),e.localMinimumWidth=e.widthSizable?r:e.localWidth,e.localMinimumHeight=e.heightSizable?o:e.localHeight}}lV.prototype._mutatorKeys=FR.concat(oV.prototype._mutatorKeys);const HR=["margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","minContentWidth","minContentHeight","maxContentWidth","maxContentHeight"],KR=Yn(n=>class extends n{constructor(...t){super(...t),this._leftMargin=null,this._rightMargin=null,this._topMargin=null,this._bottomMargin=null,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter=new Ai}mutateConfigurable(t){Ta(t,["margin"],["xMargin","yMargin"]),Ta(t,["xMargin"],["leftMargin","rightMargin"]),Ta(t,["yMargin"],["topMargin","bottomMargin"])}setConfigToBaseDefault(){this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter.emit()}setConfigToInherit(t){(!t||t.leftMargin===void 0)&&(this._leftMargin=null),(!t||t.rightMargin===void 0)&&(this._rightMargin=null),(!t||t.topMargin===void 0)&&(this._topMargin=null),(!t||t.bottomMargin===void 0)&&(this._bottomMargin=null),(!t||t.minContentWidth===void 0)&&(this._minContentWidth=null),(!t||t.minContentHeight===void 0)&&(this._minContentHeight=null),(!t||t.maxContentWidth===void 0)&&(this._maxContentWidth=null),(!t||t.maxContentHeight===void 0)&&(this._maxContentHeight=null),this.changedEmitter.emit()}get leftMargin(){return this._leftMargin}set leftMargin(t){this._leftMargin!==t&&(this._leftMargin=t,this.changedEmitter.emit())}get rightMargin(){return this._rightMargin}set rightMargin(t){this._rightMargin!==t&&(this._rightMargin=t,this.changedEmitter.emit())}get topMargin(){return this._topMargin}set topMargin(t){this._topMargin!==t&&(this._topMargin=t,this.changedEmitter.emit())}get bottomMargin(){return this._bottomMargin}set bottomMargin(t){this._bottomMargin!==t&&(this._bottomMargin=t,this.changedEmitter.emit())}get xMargin(){return this._leftMargin}set xMargin(t){(this._leftMargin!==t||this._rightMargin!==t)&&(this._leftMargin=t,this._rightMargin=t,this.changedEmitter.emit())}get yMargin(){return this._topMargin}set yMargin(t){(this._topMargin!==t||this._bottomMargin!==t)&&(this._topMargin=t,this._bottomMargin=t,this.changedEmitter.emit())}get margin(){return this._topMargin}set margin(t){(this._leftMargin!==t||this._rightMargin!==t||this._topMargin!==t||this._bottomMargin!==t)&&(this._leftMargin=t,this._rightMargin=t,this._topMargin=t,this._bottomMargin=t,this.changedEmitter.emit())}get minContentWidth(){return this._minContentWidth}set minContentWidth(t){this._minContentWidth!==t&&(this._minContentWidth=t,this.changedEmitter.emit())}get minContentHeight(){return this._minContentHeight}set minContentHeight(t){this._minContentHeight!==t&&(this._minContentHeight=t,this.changedEmitter.emit())}get maxContentWidth(){return this._maxContentWidth}set maxContentWidth(t){this._maxContentWidth!==t&&(this._maxContentWidth=t,this.changedEmitter.emit())}get maxContentHeight(){return this._maxContentHeight}set maxContentHeight(t){this._maxContentHeight!==t&&(this._maxContentHeight=t,this.changedEmitter.emit())}}),ty=["orientation","align","cellAlign","stretch","grow"].concat(HR),hV=Yn(n=>class extends KR(n){constructor(...t){super(...t),this._orientation=xt.HORIZONTAL,this._align=null,this._cellAlign=null,this._stretch=null,this._grow=null,this.orientationChangedEmitter=new Ai}mutateConfigurable(t){super.mutateConfigurable(t),E1(this,ty,t)}setConfigToBaseDefault(){this._align=$i.CENTER,this._cellAlign=$i.START,this._stretch=!1,this._grow=0,super.setConfigToBaseDefault()}setConfigToInherit(t){(!t||t.align===void 0)&&(this._align=null),(!t||t.cellAlign===void 0)&&(this._cellAlign=null),(!t||t.stretch===void 0)&&(this._stretch=null),(!t||t.grow===void 0)&&(this._grow=null),super.setConfigToInherit(t)}get orientation(){return this._orientation===xt.HORIZONTAL?"horizontal":"vertical"}set orientation(t){const i=t==="horizontal"?xt.HORIZONTAL:xt.VERTICAL;this._orientation!==i&&(this._orientation=i,this.orientationChangedEmitter.emit(),this.changedEmitter.emit())}get align(){return $i.internalToAlign(this._orientation.opposite,this._align)}set align(t){const i=$i.alignToInternal(this._orientation.opposite,t);this._align!==i&&(this._align=i,this.changedEmitter.emit())}get cellAlign(){return $i.internalToAlign(this._orientation,this._cellAlign)}set cellAlign(t){const i=$i.alignToInternal(this._orientation,t);this._cellAlign!==i&&(this._cellAlign=i,this.changedEmitter.emit())}get stretch(){return this._stretch}set stretch(t){this._stretch!==t&&(this._stretch=t,this.changedEmitter.emit())}get grow(){return this._grow}set grow(t){this._grow!==t&&(this._grow=t,this.changedEmitter.emit())}});class uV{constructor(e,t,i){i?(this.layoutProxyProperty=null,this._proxy=i):(this._proxy=null,this.layoutProxyProperty=new OR(e.ancestorNode,t,{onTransformChange:()=>e.updateLayoutAutomatically()}),this.layoutProxyProperty.link(s=>{this._proxy=s,e.updateLayoutAutomatically()})),this._constraint=e,this._node=t,this.layoutOptionsListener=this.onLayoutOptionsChange.bind(this),this.node.layoutOptionsChangedEmitter.addListener(this.layoutOptionsListener)}onLayoutOptionsChange(){}get node(){return this._node}isConnected(){return this._proxy!==null}get proxy(){return this._proxy}isSizable(e){return e===xt.HORIZONTAL?this.proxy.widthSizable:this.proxy.heightSizable}dispose(){this.layoutProxyProperty&&this.layoutProxyProperty.dispose(),this.node.layoutOptionsChangedEmitter.removeListener(this.layoutOptionsListener)}}class iy extends Lo{constructor(e){super(),this.image=e,this.canvasPattern=cc.createPattern(e,"repeat")}getCanvasStyle(){return this.canvasPattern}createSVGPaint(e){return Ac.pool.create(this)}toString(){return`Pattern( ${this.image.src} )`}}iy.prototype.isPattern=!0;const UR=["rectBounds","rectSize","rectX","rectY","rectWidth","rectHeight","cornerRadius","cornerXRadius","cornerYRadius"],cV=lu(Xs);class As extends cV{constructor(e,t,i,s,r,o,c){const p={sizable:!1};super(null,p);let g={};this._rectX=0,this._rectY=0,this._rectWidth=0,this._rectHeight=0,this._cornerXRadius=0,this._cornerYRadius=0,typeof e=="object"?e instanceof Je?typeof t!="number"?g=Ci(g,{rectBounds:e},t):g=Ci(g,{rectBounds:e,cornerXRadius:t,cornerYRadius:i},s):g=Ci(g,e):o===void 0?g=Ci(g,{rectX:e,rectY:t,rectWidth:i,rectHeight:s},r):g=Ci(g,{rectX:e,rectY:t,rectWidth:i,rectHeight:s,cornerXRadius:r,cornerYRadius:o},c),this.localPreferredWidthProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localPreferredHeightProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localMinimumWidthProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localMinimumHeightProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.mutate(g)}getMaximumArcSize(){return Math.min(this._rectWidth/2,this._rectHeight/2)}getStrokeRendererBitmask(){let e=super.getStrokeRendererBitmask();const t=this.getStroke();return t&&!(t instanceof Oa)&&!(t instanceof iy)&&!this.hasLineDash()&&(this.getLineJoin()==="miter"||this.getLineJoin()==="round"&&It.borderRadius)&&(e|=Se.bitmaskDOM),this.hasStroke()||(e|=Se.bitmaskWebGL),e}getPathRendererBitmask(){let e=Se.bitmaskCanvas|Se.bitmaskSVG;const t=this.getMaximumArcSize();return(!this.hasStroke()||this.getLineWidth()<=this._rectHeight&&this.getLineWidth()<=this._rectWidth)&&(!this.isRounded()||It.borderRadius&&this._cornerXRadius===this._cornerYRadius)&&this._cornerYRadius<=t&&this._cornerXRadius<=t&&(e|=Se.bitmaskDOM),!this.hasStroke()&&!this.isRounded()&&(e|=Se.bitmaskWebGL),e}setRect(e,t,i,s,r,o){const c=r!==void 0,p=o!==void 0;if(this._rectX===e&&this._rectY===t&&this._rectWidth===i&&this._rectHeight===s&&(!c||this._cornerXRadius===r)&&(!p||this._cornerYRadius===o))return this;this._rectX=e,this._rectY=t,this._rectWidth=i,this._rectHeight=s,this._cornerXRadius=c?r:this._cornerXRadius,this._cornerYRadius=p?o:this._cornerYRadius;const g=this._drawables.length;for(let A=0;A<g;A++)this._drawables[A].markDirtyRectangle();return this.invalidateRectangle(),this}setRectX(e){if(this._rectX!==e){this._rectX=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyX();this.invalidateRectangle()}return this}set rectX(e){this.setRectX(e)}get rectX(){return this.getRectX()}getRectX(){return this._rectX}setRectY(e){if(this._rectY!==e){this._rectY=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyY();this.invalidateRectangle()}return this}set rectY(e){this.setRectY(e)}get rectY(){return this.getRectY()}getRectY(){return this._rectY}setRectWidth(e){if(this._rectWidth!==e){this._rectWidth=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyWidth();this.invalidateRectangle()}return this}set rectWidth(e){this.setRectWidth(e)}get rectWidth(){return this.getRectWidth()}getRectWidth(){return this._rectWidth}setRectHeight(e){if(this._rectHeight!==e){this._rectHeight=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyHeight();this.invalidateRectangle()}return this}set rectHeight(e){this.setRectHeight(e)}get rectHeight(){return this.getRectHeight()}getRectHeight(){return this._rectHeight}setCornerXRadius(e){if(this._cornerXRadius!==e){this._cornerXRadius=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyCornerXRadius();this.invalidateRectangle()}return this}set cornerXRadius(e){this.setCornerXRadius(e)}get cornerXRadius(){return this.getCornerXRadius()}getCornerXRadius(){return this._cornerXRadius}setCornerYRadius(e){if(this._cornerYRadius!==e){this._cornerYRadius=e;const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyCornerYRadius();this.invalidateRectangle()}return this}set cornerYRadius(e){this.setCornerYRadius(e)}get cornerYRadius(){return this.getCornerYRadius()}getCornerYRadius(){return this._cornerYRadius}setRectBounds(e){return this.setRect(e.x,e.y,e.width,e.height),this}set rectBounds(e){this.setRectBounds(e)}get rectBounds(){return this.getRectBounds()}getRectBounds(){return Je.rect(this._rectX,this._rectY,this._rectWidth,this._rectHeight)}setRectSize(e){return this.setRectWidth(e.width),this.setRectHeight(e.height),this}set rectSize(e){this.setRectSize(e)}get rectSize(){return this.getRectSize()}getRectSize(){return new ps(this._rectWidth,this._rectHeight)}setRectWidthFromRight(e){if(this._rectWidth!==e){const t=this._rectX+this._rectWidth;this.setRectWidth(e),this.setRectX(t-e)}return this}set rectWidthFromRight(e){this.setRectWidthFromRight(e)}get rectWidthFromRight(){return this.getRectWidth()}setRectHeightFromBottom(e){if(this._rectHeight!==e){const t=this._rectY+this._rectHeight;this.setRectHeight(e),this.setRectY(t-e)}return this}set rectHeightFromBottom(e){this.setRectHeightFromBottom(e)}get rectHeightFromBottom(){return this.getRectHeight()}isRounded(){return this._cornerXRadius!==0&&this._cornerYRadius!==0}computeShapeBounds(){let e=new Je(this._rectX,this._rectY,this._rectX+this._rectWidth,this._rectY+this._rectHeight);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}createRectangleShape(){if(this.isRounded()){const e=Math.min(this._rectWidth/2,this._rectHeight/2);return Tt.roundRectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight,Math.min(e,this._cornerXRadius),Math.min(e,this._cornerYRadius)).makeImmutable()}else return Tt.rectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight).makeImmutable()}invalidateRectangle(){this._shape=null,this.invalidatePath(),this.invalidateSupportedRenderers()}updatePreferredSizes(){let e=this.localPreferredWidth,t=this.localPreferredHeight;e!==null&&(e=Math.max(e,this.localMinimumWidth||0)),t!==null&&(t=Math.max(t,this.localMinimumHeight||0)),e!==null&&(this.rectWidth=this.hasStroke()?e-this.lineWidth:e),t!==null&&(this.rectHeight=this.hasStroke()?t-this.lineWidth:t)}invalidateStroke(){super.invalidateStroke(),this.updatePreferredSizes()}containsPointSelf(e){const t=this._rectX,i=this._rectY,s=this._rectWidth,r=this._rectHeight,o=this._cornerXRadius,c=this._cornerYRadius,p=this.getLineWidth()/2;let g=!0;if(this._strokePickable){const A=this.isRounded();if(!A&&this.getLineJoin()==="bevel")return super.containsPointSelf(e);const C=this.getLineJoin()==="miter"&&!A;g=g&&As.intersects(t-p,i-p,s+2*p,r+2*p,C?0:o+p,C?0:c+p,e)}return this._fillPickable?this._strokePickable?g:As.intersects(t,i,s,r,o,c,e):this._strokePickable?g&&!As.intersects(t+p,i+p,s-2*p,r-2*p,o-p,c-p,e):!1}intersectsBoundsSelf(e){return!this.computeShapeBounds().intersection(e).isEmpty()}canvasPaintSelf(e,t){$m.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return rV.createFromPool(e,t)}createSVGDrawable(e,t){return aV.createFromPool(e,t)}createCanvasDrawable(e,t){return $m.createFromPool(e,t)}createWebGLDrawable(e,t){return ey.createFromPool(e,t)}setShape(e){if(e!==null)throw new Error("Cannot set the shape of a Rectangle to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createRectangleShape()),this._shape}hasShape(){return!0}setShapeProperty(e){if(e!==null)throw new Error("Cannot set the shapeProperty of a Rectangle to something non-null, it handles this itself");return this}setCornerRadius(e){return this.setCornerXRadius(e),this.setCornerYRadius(e),this}set cornerRadius(e){this.setCornerRadius(e)}get cornerRadius(){return this.getCornerRadius()}getCornerRadius(){return this._cornerXRadius}mutate(e){return super.mutate(e)}static intersects(e,t,i,s,r,o,c){const p=c.x>=e&&c.x<=e+i&&c.y>=t&&c.y<=t+s;if(!p||r<=0||o<=0)return p;const g=Math.min(i/2,s/2);r=Math.min(g,r),o=Math.min(g,o);let A,C,D=!1;if(c.x<e+i/2?(A=e+r,D=D||c.x>=A):(A=e+i-r,D=D||c.x<=A),D||(c.y<t+s/2?(C=t+o,D=D||c.y>=C):(C=t+s-o,D=D||c.y<=C),D))return!0;let P=c.x-A,F=c.y-C;return P/=r,F/=o,P*=P,F*=F,P+F<=1}static rect(e,t,i,s,r){return new As(e,t,i,s,0,0,r)}static roundedRect(e,t,i,s,r,o,c){return new As(e,t,i,s,r,o,c)}static bounds(e,t){return new As(e.minX,e.minY,e.width,e.height,t)}static roundedBounds(e,t,i,s){return new As(e.minX,e.minY,e.width,e.height,t,i,s)}static dimension(e,t){return new As(0,0,e.width,e.height,0,0,t)}}As.prototype._mutatorKeys=[...UR,...cV.prototype._mutatorKeys];As.prototype.drawableMarkFlags=Xs.prototype.drawableMarkFlags.concat(["x","y","width","height","cornerXRadius","cornerYRadius"]).filter(n=>n!=="shape");class YR extends iy{constructor(e,t,i,s,r,o,c=nt.IDENTITY){const p=document.createElement("img");function g(C,D,P,F,K){p.src=C.toDataURL()}new At({scale:t,children:[e]}).toCanvas(g,-i*t,-s*t,r*t,o*t),super(p),this.setTransformMatrix(c.timesMatrix(nt.scaling(1/t)))}}class dV extends uV{constructor(e,t,i){super(e,t,i),this.preferredSizeSet=new Ju(!1,!1),this.lastAvailableBounds=Je.NOTHING.copy(),this.lastUsedBounds=Je.NOTHING.copy(),this._marginConstraint=e}reposition(e,t,i,s,r,o){const c=s&&this.isSizable(e)?t:this.getMinimumSize(e);this.attemptPreferredSize(e,c),o===$i.ORIGIN?this.positionOrigin(e,i+r):this.positionStart(e,i+(t-this.getCellBounds()[e.size])*o.padRatio);const p=this.getCellBounds();return this.lastAvailableBounds[e.minCoordinate]=i,this.lastAvailableBounds[e.maxCoordinate]=i+t,this.lastUsedBounds.set(p),p}get effectiveLeftMargin(){return this._leftMargin!==null?this._leftMargin:this._marginConstraint._leftMargin}get effectiveRightMargin(){return this._rightMargin!==null?this._rightMargin:this._marginConstraint._rightMargin}get effectiveTopMargin(){return this._topMargin!==null?this._topMargin:this._marginConstraint._topMargin}get effectiveBottomMargin(){return this._bottomMargin!==null?this._bottomMargin:this._marginConstraint._bottomMargin}getEffectiveMinMargin(e){return e===xt.HORIZONTAL?this.effectiveLeftMargin:this.effectiveTopMargin}getEffectiveMaxMargin(e){return e===xt.HORIZONTAL?this.effectiveRightMargin:this.effectiveBottomMargin}get effectiveMinContentWidth(){return this._minContentWidth!==null?this._minContentWidth:this._marginConstraint._minContentWidth}get effectiveMinContentHeight(){return this._minContentHeight!==null?this._minContentHeight:this._marginConstraint._minContentHeight}getEffectiveMinContent(e){return e===xt.HORIZONTAL?this.effectiveMinContentWidth:this.effectiveMinContentHeight}get effectiveMaxContentWidth(){return this._maxContentWidth!==null?this._maxContentWidth:this._marginConstraint._maxContentWidth}get effectiveMaxContentHeight(){return this._maxContentHeight!==null?this._maxContentHeight:this._marginConstraint._maxContentHeight}getEffectiveMaxContent(e){return e===xt.HORIZONTAL?this.effectiveMaxContentWidth:this.effectiveMaxContentHeight}getMinimumSize(e){return this.getEffectiveMinMargin(e)+Math.max(this.proxy.getMinimum(e),this.getEffectiveMinContent(e)||0)+this.getEffectiveMaxMargin(e)}getMaximumSize(e){return this.getEffectiveMinMargin(e)+(this.getEffectiveMaxContent(e)||Number.POSITIVE_INFINITY)+this.getEffectiveMaxMargin(e)}attemptPreferredSize(e,t){if(this.proxy[e.sizable]){const i=this.getMinimumSize(e),s=this.getMaximumSize(e);t=hs(t,i,s);let r=t-this.getEffectiveMinMargin(e)-this.getEffectiveMaxMargin(e);const o=this.proxy.getMax(e);o!==null&&(r=Math.min(o,r)),this._marginConstraint.setProxyPreferredSize(e,this.proxy,r),this.preferredSizeSet.set(e,!0)}}unsetPreferredSize(e){this.proxy[e.sizable]&&this._marginConstraint.setProxyPreferredSize(e,this.proxy,null)}positionStart(e,t){const i=this.getEffectiveMinMargin(e)+t;this._marginConstraint.setProxyMinSide(e,this.proxy,i)}positionOrigin(e,t){this._marginConstraint.setProxyOrigin(e,this.proxy,t)}getOriginBounds(){return this.getCellBounds().shiftedXY(-this.proxy.x,-this.proxy.y)}getCellBounds(){return this.proxy.bounds.withOffsets(this.effectiveLeftMargin,this.effectiveTopMargin,this.effectiveRightMargin,this.effectiveBottomMargin)}dispose(){xt.enumeration.values.forEach(e=>{this.preferredSizeSet.get(e)&&this.unsetPreferredSize(e)}),super.dispose()}static createHelperNode(e,t,i){const s=new At,r=.4,o=Tt.union(e.map(P=>Tt.bounds(P.lastAvailableBounds))),c=Tt.union(e.map(P=>Tt.bounds(P.lastUsedBounds))),p=Tt.union(e.map(P=>Tt.bounds(P.proxy.bounds))),g=Tt.bounds(t).shapeDifference(o),A=o.shapeDifference(c),C=c.shapeDifference(p),D=(P,F,K)=>{const M=new Ms(P,{font:new _s({size:6,family:"monospace"}),fill:F}),U=As.bounds(M.bounds,{fill:K,children:[M]});return new YR(U,4,Math.floor(U.left),Math.ceil(U.top+1),Math.floor(U.width),Math.floor(U.height-2),nt.rotation2(-Math.PI/4))};return s.addChild(new Xs(g,{fill:D("spacing","#000","#fff"),opacity:.6})),s.addChild(new Xs(A,{fill:D("empty","#aaa","#000"),opacity:.6})),s.addChild(new Xs(C,{fill:D("margin","#600","#f00"),opacity:.6})),s.addChild(As.bounds(t,{stroke:"white",lineDash:[2,2],lineDashOffset:2,lineWidth:r})),s.addChild(As.bounds(t,{stroke:"black",lineDash:[2,2],lineWidth:r})),e.forEach(P=>{s.addChild(As.bounds(P.getCellBounds(),{stroke:"rgba(0,255,0,1)",lineWidth:r}))}),e.forEach(P=>{s.addChild(As.bounds(P.proxy.bounds,{stroke:"rgba(255,0,0,1)",lineWidth:r}))}),e.forEach(P=>{const F=P.getCellBounds(),K=new No({tandem:Xe.OPT_OUT});s.addChild(As.bounds(F,{inputListeners:[K]}));let M=i(P);P.effectiveLeftMargin&&(M+=`leftMargin: ${P.effectiveLeftMargin}
`),P.effectiveRightMargin&&(M+=`rightMargin: ${P.effectiveRightMargin}
`),P.effectiveTopMargin&&(M+=`topMargin: ${P.effectiveTopMargin}
`),P.effectiveBottomMargin&&(M+=`bottomMargin: ${P.effectiveBottomMargin}
`),P.effectiveMinContentWidth&&(M+=`minContentWidth: ${P.effectiveMinContentWidth}
`),P.effectiveMinContentHeight&&(M+=`minContentHeight: ${P.effectiveMinContentHeight}
`),P.effectiveMaxContentWidth&&(M+=`maxContentWidth: ${P.effectiveMaxContentWidth}
`),P.effectiveMaxContentHeight&&(M+=`maxContentHeight: ${P.effectiveMaxContentHeight}
`),M+=`layoutOptions: ${JSON.stringify(P.node.layoutOptions,null,2).replace(/ /g,"&nbsp;")}
`;const U=new Zn(M.trim().replace(/\n/g,"<br>"),{font:new _s({size:12})}),$=As.bounds(U.bounds.dilated(3),{fill:"rgba(255,255,255,0.8)",children:[U],leftTop:F.leftTop});s.addChild($),K.isOverProperty.link(re=>{$.visible=re})}),s}}[...ty];class GR extends hV(dV){constructor(e,t,i){super(e,t,i),this.size=0,this._isSeparator=!1,this.flowConstraint=e,this.orientation=e.orientation,this.onLayoutOptionsChange(!0)}get effectiveAlign(){return this._align!==null?this._align:this.flowConstraint._align}get effectiveCellAlign(){return this._cellAlign!==null?this._cellAlign:this.flowConstraint._cellAlign}get effectiveStretch(){return this._stretch!==null?this._stretch:this.flowConstraint._stretch}get effectiveGrow(){return this._grow!==null?this._grow:this.flowConstraint._grow}onLayoutOptionsChange(e=!1){this.node.layoutOptions&&this.setOptions(this.node.layoutOptions),super.onLayoutOptionsChange(),e||this.flowConstraint.updateLayoutAutomatically()}setOptions(e){const t=lt()({isSeparator:!1},e);this._isSeparator=t.isSeparator,this.setConfigToInherit(t),this.mutateConfigurable(t)}}class WR{initializeLayoutLine(){this.min=0,this.max=Number.POSITIVE_INFINITY,this.minOrigin=Number.POSITIVE_INFINITY,this.maxOrigin=Number.NEGATIVE_INFINITY,this.size=0,this.position=0}hasOrigin(){return isFinite(this.minOrigin)&&isFinite(this.maxOrigin)}}class Sl extends WR{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return this.orientation=e,this.cells=t,this.initializeLayoutLine(),this}getMinimumSize(e){return(this.cells.length-1)*e+te.sum(this.cells.map(t=>t.getMinimumSize(this.orientation)))}freeToPool(){Sl.pool.freeToPool(this)}clean(){this.cells.length=0,this.freeToPool()}}Sl.pool=new us(Sl,{defaultArguments:[xt.HORIZONTAL,[]]});const O2=1e-9;class XR extends Ul{constructor(e,t){const i=lt()({preferredWidthProperty:new ui(null),preferredHeightProperty:new ui(null),minimumWidthProperty:new ui(null),minimumHeightProperty:new ui(null),layoutOriginProperty:new ui(we.ZERO)},t);super(e),this._excludeInvisible=!0,this.layoutBoundsProperty=new hi(Je.NOTHING,{valueComparisonStrategy:"equalsFunction"}),this.preferredWidthProperty=i.preferredWidthProperty,this.preferredHeightProperty=i.preferredHeightProperty,this.minimumWidthProperty=i.minimumWidthProperty,this.minimumHeightProperty=i.minimumHeightProperty,this.layoutOriginProperty=i.layoutOriginProperty,this.preferredWidthProperty.lazyLink(this._updateLayoutListener),this.preferredHeightProperty.lazyLink(this._updateLayoutListener),this.layoutOriginProperty.lazyLink(this._updateLayoutListener)}filterLayoutCells(e){return e.filter(t=>t.isConnected()&&t.proxy.bounds.isValid()&&(!this.excludeInvisible||t.node.visible))}get excludeInvisible(){return this._excludeInvisible}set excludeInvisible(e){this._excludeInvisible!==e&&(this._excludeInvisible=e,this.updateLayoutAutomatically())}setProxyPreferredSize(e,t,i){t[e.preferredSize]=i}setProxyMinSide(e,t,i){Math.abs(t[e.minSide]-i)>O2&&(t[e.minSide]=i)}setProxyOrigin(e,t,i){Math.abs(t[e.coordinate]-i)>O2&&(t[e.coordinate]=i)}dispose(){this.preferredWidthProperty.unlink(this._updateLayoutListener),this.preferredHeightProperty.unlink(this._updateLayoutListener),this.layoutOriginProperty.unlink(this._updateLayoutListener),super.dispose()}}const fV=[...ty,"spacing","lineSpacing","justify","justifyLines","wrap","excludeInvisible"];class sy extends hV(XR){constructor(e,t){super(e,t),this.cells=[],this._justify=ji.SPACE_BETWEEN,this._justifyLines=null,this._wrap=!1,this._spacing=0,this._lineSpacing=0,this.displayedCells=[],this.setConfigToBaseDefault(),this.mutateConfigurable(t),E1(this,fV,t),this.changedEmitter.addListener(this._updateLayoutListener),this.orientationChangedEmitter.addListener(()=>this.cells.forEach(i=>{i.orientation=this.orientation}))}updateSeparatorVisibility(){let e=0;for(;e<this.cells.length;e++){const i=this.cells[e];if(i._isSeparator)i.node.visible=!1;else if(i.node.visible&&i.node.boundsProperty.value.isValid())break}let t=!1;for(let i=this.cells.length-1;i>e;i--){const s=this.cells[i];s._isSeparator?(s.node.visible=t,t=!1):s.node.visible&&s.node.boundsProperty.value.isValid()&&(t=!0)}}layout(){super.layout();const e=this._orientation,t=this._orientation.opposite;this.updateSeparatorVisibility();const i=this.filterLayoutCells(this.cells);if(this.displayedCells=i,!i.length){this.layoutBoundsProperty.value=Je.NOTHING,this.minimumWidthProperty.value=null,this.minimumHeightProperty.value=null;return}let s=this.getPreferredProperty(e).value;const r=this.getPreferredProperty(t).value,o=Math.max(...i.map(T=>T.getMinimumSize(e)||0));o>(s||Number.POSITIVE_INFINITY)&&(s=o);const c=[];if(this.wrap){let T=[],Ce=s||Number.POSITIVE_INFINITY;for(;i.length;){const ze=i.shift(),be=ze.getMinimumSize(e);T.length===0?(T.push(ze),Ce-=be):this.spacing+be<=Ce+1e-7?(T.push(ze),Ce-=this.spacing+be):(c.push(Sl.pool.create(e,T)),Ce=s||Number.POSITIVE_INFINITY,T=[ze],Ce-=be)}T.length&&c.push(Sl.pool.create(e,T))}else c.push(Sl.pool.create(e,i));c.forEach(T=>{T.cells.forEach(Ce=>{if(T.min=Math.max(T.min,Ce.getMinimumSize(t)),T.max=Math.min(T.max,Ce.getMaximumSize(t)),Ce.effectiveAlign===$i.ORIGIN){const ze=Ce.getOriginBounds();T.minOrigin=Math.min(ze[t.minCoordinate],T.minOrigin),T.maxOrigin=Math.max(ze[t.maxCoordinate],T.maxOrigin)}}),isFinite(T.minOrigin)&&isFinite(T.maxOrigin)?T.size=Math.max(T.min,T.maxOrigin-T.minOrigin):T.size=T.min});const p=Math.max(...c.map(T=>T.getMinimumSize(this.spacing))),g=te.sum(c.map(T=>T.size))+(c.length-1)*this.lineSpacing,A=this.wrap?o:p,C=Math.max(p,s||0),D=Math.max(g,r||0),P=this.layoutOriginProperty.value[e.coordinate],F=this.layoutOriginProperty.value[e.opposite.coordinate];c.forEach(T=>{const Ce=te.sum(T.cells.map(Fe=>Fe.getMinimumSize(e))),ze=this.spacing*(T.cells.length-1);let be=C-Ce-ze;T.cells.forEach(Fe=>{Fe.size=Fe.getMinimumSize(e)});let Be;for(;be>1e-7&&(Be=T.cells.filter(Fe=>Fe.effectiveGrow!==0&&Fe.size<Fe.getMaximumSize(e)-1e-7)).length;){const Fe=te.sum(Be.map(ut=>ut.effectiveGrow)),Ye=Math.min(Math.min(...Be.map(ut=>(ut.getMaximumSize(e)-ut.size)/ut.effectiveGrow)),be/Fe);Be.forEach(ut=>{ut.size+=Ye*ut.effectiveGrow}),be-=Ye*Fe}const xe=this._justify.spacingFunctionFactory(be,T.cells.length);let Qe=P;T.cells.forEach((Fe,Ye)=>{Qe+=xe(Ye),Ye>0&&(Qe+=this.spacing),Fe.reposition(e,Fe.size,Qe,!0,0,Fe.effectiveCellAlign),Qe+=Fe.size})});const K=D-g,M=(c[0].hasOrigin()?c[0].minOrigin:0)+F;let U=M;if(this._justifyLines===null)c.forEach(T=>{T.size+=K/c.length}),c.forEach(T=>{T.position=U,U+=T.size+this.lineSpacing});else{const T=this._justifyLines.spacingFunctionFactory(K,c.length);c.forEach((Ce,ze)=>{U+=T(ze),Ce.position=U,U+=Ce.size+this.lineSpacing})}c.forEach(T=>T.cells.forEach(Ce=>{Ce.reposition(t,T.size,T.position,Ce.effectiveStretch,-T.minOrigin,Ce.effectiveAlign)}));const $=P,re=P+C,pe=M,ce=M+D;this.layoutBoundsProperty.value=Je.oriented(e,$,pe,re,ce),this.minimumWidthProperty.value=e===xt.HORIZONTAL?A:g,this.minimumHeightProperty.value=e===xt.HORIZONTAL?g:A,this.finishedLayoutEmitter.emit(),c.forEach(T=>T.clean())}get justify(){return ji.internalToJustify(this._orientation,this._justify)}set justify(e){const t=ji.justifyToInternal(this._orientation,e);this._justify!==t&&(this._justify=t,this.updateLayoutAutomatically())}get justifyLines(){return this._justifyLines===null?null:ji.internalToJustify(this._orientation,this._justifyLines)}set justifyLines(e){const t=e===null?null:ji.justifyToInternal(this._orientation.opposite,e);this._justifyLines!==t&&(this._justifyLines=t,this.updateLayoutAutomatically())}get wrap(){return this._wrap}set wrap(e){this._wrap!==e&&(this._wrap=e,this.updateLayoutAutomatically())}get spacing(){return this._spacing}set spacing(e){this._spacing!==e&&(this._spacing=e,this.updateLayoutAutomatically())}get lineSpacing(){return this._lineSpacing}set lineSpacing(e){this._lineSpacing!==e&&(this._lineSpacing=e,this.updateLayoutAutomatically())}insertCell(e,t){t.orientation=this.orientation,this.cells.splice(e,0,t),this.addNode(t.node),t.changedEmitter.addListener(this._updateLayoutListener),this.updateLayoutAutomatically()}removeCell(e){Ns(this.cells,e),this.removeNode(e.node),e.changedEmitter.removeListener(this._updateLayoutListener),this.updateLayoutAutomatically()}getCellQuantity(){return this.cells.length}reorderCells(e,t,i){this.cells.splice(t,i-t+1,...e),this.updateLayoutAutomatically()}getPreferredProperty(e){return e===xt.HORIZONTAL?this.preferredWidthProperty:this.preferredHeightProperty}dispose(){this.lock(),this.cells.forEach(e=>this.removeCell(e)),this.displayedCells=[],super.dispose(),this.unlock()}static create(e,t){return new sy(e,t)}}class ny extends Ul{constructor(e,t,i){super(e),this.lock(),this.nodes=t,this.cells=t.map(s=>new uV(this,s,null)),this.layoutCallback=i,this.nodes.forEach(s=>this.addNode(s,!1)),this.unlock(),this.updateLayout()}layout(){if(super.layout(),!te.some(this.cells,t=>!t.isConnected())){const t=this.cells.map(i=>i.proxy);this.layoutCallback.apply(null,t),this.finishedLayoutEmitter.emit()}}dispose(){this.cells.forEach(e=>e.dispose()),super.dispose()}static create(e,t,i){return new ny(e,t,i)}}const jR=["resize","layoutOrigin"];class QR extends lu(At){constructor(e){super(e),this.layoutOriginProperty=new ix(we.ZERO)}linkLayoutBounds(){this._constraint.layoutBoundsProperty.link(e=>{this.localBounds=e})}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this._constraint.excludeInvisible=e}setChildren(e){if(this.constraint.isLocked)return super.setChildren(e);const t=this.getChildren();return this.constraint.lock(),super.setChildren(e),this.constraint.unlock(),te.isEqual(t,e)||this.constraint.updateLayoutAutomatically(),this}updateLayout(){this._constraint.updateLayout()}get resize(){return this._constraint.enabled}set resize(e){this._constraint.enabled=e}get layoutOrigin(){return this.layoutOriginProperty.value}set layoutOrigin(e){this.layoutOriginProperty.value=e}get constraint(){return this._constraint}dispose(){this._constraint.dispose(),super.dispose()}}const ZR=[...jR,...fV.filter(n=>n!=="excludeInvisible"),"forward","forwardProperty"],ll={orientation:"horizontal",spacing:0,align:"center",stretch:!1,forward:!0};class kc extends QR{constructor(e){const t=lt()({excludeInvisibleChildrenFromBounds:!0,resize:!0,disabledOpacity:Cc.DISABLED_OPACITY,forward:ll.forward,forwardProperty:null},e);super(),this._cellMap=new Map,this._constraint=new sy(this,{preferredWidthProperty:this.localPreferredWidthProperty,preferredHeightProperty:this.localPreferredHeightProperty,minimumWidthProperty:this.localMinimumWidthProperty,minimumHeightProperty:this.localMinimumHeightProperty,layoutOriginProperty:this.layoutOriginProperty,orientation:ll.orientation,spacing:ll.spacing,align:ll.align,stretch:ll.stretch,excludeInvisible:!1}),this._forwardProperty=new Ra(ll.forward,!1,this.onFlowBoxForwardReverseChanged.bind(this)),this.onChildInserted=this.onFlowBoxChildInserted.bind(this),this.onChildRemoved=this.onFlowBoxChildRemoved.bind(this),this.onChildrenReordered=this.onFlowBoxChildrenReordered.bind(this),this.onChildrenChanged=this.onFlowBoxChildrenChanged.bind(this),this.childInsertedEmitter.addListener(this.onChildInserted),this.childRemovedEmitter.addListener(this.onChildRemoved),this.childrenReorderedEmitter.addListener(this.onChildrenReordered),this.childrenChangedEmitter.addListener(this.onChildrenChanged);const i=te.omit(t,Tl),s=te.pick(t,Tl);this._constraint.lock(),this.mutate(i),this._constraint.unlock(),this._constraint.updateLayout(),this.mutate(s),this.linkLayoutBounds()}onFlowBoxChildInserted(e,t){const i=new GR(this._constraint,e,this._constraint.createLayoutProxy(e));if(this._cellMap.set(e,i),this.forward)this._constraint.insertCell(t,i);else{const s=this._constraint.getCellQuantity()-t;this._constraint.insertCell(s,i)}}onFlowBoxChildRemoved(e){const t=this._cellMap.get(e);this._cellMap.delete(e),this._constraint.removeCell(t),t.dispose()}onFlowBoxChildrenReordered(e,t){const i=this._children.slice(e,t+1);this.forward||i.reverse(),this._constraint.reorderCells(i.map(s=>this._cellMap.get(s)),e,t)}onFlowBoxChildrenChanged(){this._constraint.updateLayoutAutomatically()}onFlowBoxForwardReverseChanged(){this.onFlowBoxChildrenReordered(0,this._children.length-1),this.onFlowBoxChildrenChanged()}getCell(e){return this._cellMap.get(e)}get orientation(){return this._constraint.orientation}set orientation(e){this._constraint.orientation=e}get spacing(){return this._constraint.spacing}set spacing(e){this._constraint.spacing=e}get lineSpacing(){return this._constraint.lineSpacing}set lineSpacing(e){this._constraint.lineSpacing=e}get justify(){return this._constraint.justify}set justify(e){this._constraint.justify=e}get justifyLines(){return this._constraint.justifyLines}set justifyLines(e){this._constraint.justifyLines=e}get wrap(){return this._constraint.wrap}set wrap(e){this._constraint.wrap=e}get align(){return this._constraint.align}set align(e){this._constraint.align=e}get stretch(){return this._constraint.stretch}set stretch(e){this._constraint.stretch=e}get grow(){return this._constraint.grow}set grow(e){this._constraint.grow=e}get margin(){return this._constraint.margin}set margin(e){this._constraint.margin=e}get xMargin(){return this._constraint.xMargin}set xMargin(e){this._constraint.xMargin=e}get yMargin(){return this._constraint.yMargin}set yMargin(e){this._constraint.yMargin=e}get leftMargin(){return this._constraint.leftMargin}set leftMargin(e){this._constraint.leftMargin=e}get rightMargin(){return this._constraint.rightMargin}set rightMargin(e){this._constraint.rightMargin=e}get topMargin(){return this._constraint.topMargin}set topMargin(e){this._constraint.topMargin=e}get bottomMargin(){return this._constraint.bottomMargin}set bottomMargin(e){this._constraint.bottomMargin=e}get minContentWidth(){return this._constraint.minContentWidth}set minContentWidth(e){this._constraint.minContentWidth=e}get minContentHeight(){return this._constraint.minContentHeight}set minContentHeight(e){this._constraint.minContentHeight=e}get maxContentWidth(){return this._constraint.maxContentWidth}set maxContentWidth(e){this._constraint.maxContentWidth=e}get maxContentHeight(){return this._constraint.maxContentHeight}set maxContentHeight(e){this._constraint.maxContentHeight=e}setForwardProperty(e){return this._forwardProperty.setTargetProperty(e,this,null)}set forwardProperty(e){this.setForwardProperty(e)}get forwardProperty(){return this.getForwardProperty()}getForwardProperty(){return this._forwardProperty}setForward(e){return this.forwardProperty.set(e),this}set forward(e){this.setForward(e)}get forward(){return this.isForward()}isForward(){return this.forwardProperty.value}dispose(){this._constraint.lock(),this.childInsertedEmitter.removeListener(this.onChildInserted),this.childRemovedEmitter.removeListener(this.onChildRemoved),this.childrenReorderedEmitter.removeListener(this.onChildrenReordered),this.childrenChangedEmitter.removeListener(this.onChildrenChanged),this._forwardProperty.dispose();for(const e of this._cellMap.values())e.dispose();super.dispose()}setOrientation(e){return this.orientation=e,this}getOrientation(){return this.orientation}setSpacing(e){return this.spacing=e,this}getSpacing(){return this.spacing}setAlign(e){return this.align=e,this}getAlign(){return this.align}setResize(e){return this.resize=e,this}isResize(){return this.resize}getHelperNode(){return dV.createHelperNode(this.constraint.displayedCells,this.constraint.layoutBoundsProperty.value,t=>{let i="";const s=xt.fromLayoutOrientation(t.orientation);return i+=`align: ${$i.internalToAlign(s,t.effectiveAlign)}
`,i+=`stretch: ${t.effectiveStretch}
`,i+=`grow: ${t.effectiveGrow}
`,i})}mutate(e){return e?super.mutate(e):this}}kc.DEFAULT_FLOW_BOX_OPTIONS=ll;kc.prototype._mutatorKeys=[...qR,...ZR,...At.prototype._mutatorKeys];class pV extends kc{constructor(e){super(lt()({orientation:"horizontal"},e))}onFlowBoxChildInserted(e,t){super.onFlowBoxChildInserted(e,t)}mutate(e){return super.mutate(e)}}class n0 extends kc{constructor(e){super(lt()({orientation:"vertical"},e))}onFlowBoxChildInserted(e,t){super.onFlowBoxChildInserted(e,t)}mutate(e){return super.mutate(e)}}const lm=new we(0,0);class gV extends No{constructor(e){const t=lt()({positionProperty:null,start:null,end:null,drag:te.noop,transform:null,dragBoundsProperty:null,allowTouchSnag:!0,applyOffset:!0,useParentOffset:!1,trackAncestors:!1,translateNode:!1,mapPosition:null,offsetPosition:null,canClick:!1,tandem:Xe.REQUIRED,phetioReadOnly:!0,phetioFeatured:Gi.DEFAULT_OPTIONS.phetioFeatured},e);super(t),this._allowTouchSnag=t.allowTouchSnag,this._applyOffset=t.applyOffset,this._useParentOffset=t.useParentOffset,this._trackAncestors=t.trackAncestors,this._translateNode=t.translateNode,this._transform=t.transform,this._positionProperty=t.positionProperty,this._mapPosition=t.mapPosition,this._offsetPosition=t.offsetPosition,this._dragBoundsProperty=t.dragBoundsProperty||new hi(null),this._start=t.start,this._end=t.end,this._canClick=t.canClick,this.isUserControlledProperty=this.isPressedProperty,this._globalPoint=new we(0,0),this._localPoint=new we(0,0),this._parentPoint=new we(0,0),this._modelPoint=new we(0,0),this._modelDelta=new we(0,0),this._parentOffset=new we(0,0),this._transformTracker=null,this._transformTrackerListener=this.ancestorTransformed.bind(this),this._lastInterruptedTouchLikePointer=null,this._dragAction=new Ti(i=>{const r=this.pointer.point;r&&(this._globalPoint.equals(r)||this.reposition(r)),No.prototype.drag.call(this,i)},{parameters:[{name:"event",phetioType:uo.SceneryEventIO}],phetioFeatured:t.phetioFeatured,tandem:t.tandem.createTandem("dragAction"),phetioHighFrequency:!0,phetioDocumentation:"Emits whenever a drag occurs with an SceneryEventIO argument.",phetioReadOnly:t.phetioReadOnly,phetioEventType:si.USER})}press(e,t,i){return super.press(e,t,()=>{const r=this;r.pointer.reserveForDrag(),t&&ip.forwardInteractiveHighlightFromPress(t,e),this.attachTransformTracker();const o=r.pointer.point,c=this.globalToParentPoint(this._localPoint.set(o));this._useParentOffset&&this.modelToParentPoint(this._parentOffset.set(this._positionProperty.value)).subtract(c),this.parentToLocalPoint(c),this.reposition(o),this._start&&this._start(e,r),i&&i()})}release(e,t){super.release(e,()=>{this.detachTransformTracker(),this._end&&this._end(e||null,this),t&&t()})}canClick(){return super.canClick()&&this._canClick}click(e,t){return super.click(e,()=>{this._start&&this._start(e,this),t&&t(),this._end&&this._end(e,this)})}drag(e){const i=this.pointer.point;!i||this._globalPoint.equals(i)||this.isPressed&&this._dragAction.execute(e)}tryTouchSnag(e){this._allowTouchSnag&&(!this.attach||!e.pointer.isAttached())&&this.press(e)}getGlobalPoint(){return this._globalPoint.copy()}get globalPoint(){return this.getGlobalPoint()}getLocalPoint(){return this._localPoint.copy()}get localPoint(){return this.getLocalPoint()}getParentPoint(){return this._parentPoint.copy()}get parentPoint(){return this.getParentPoint()}getModelPoint(){return this._modelPoint.copy()}get modelPoint(){return this.getModelPoint()}getModelDelta(){return this._modelDelta.copy()}get modelDelta(){return this.getModelDelta()}globalToParentPoint(e){return this.pressedTrail.getParentTransform().getInverse().multiplyVector2(e),e}parentToLocalPoint(e){return this.pressedTrail.lastNode().getTransform().getInverse().multiplyVector2(e),e}localToParentPoint(e){return this.pressedTrail.lastNode().getMatrix().multiplyVector2(e),e}parentToModelPoint(e){return this._transform&&(this._transform instanceof _r?this._transform:this._transform.value).getInverse().multiplyVector2(e),e}modelToParentPoint(e){return this._transform&&(this._transform instanceof _r?this._transform:this._transform.value).getMatrix().multiplyVector2(e),e}mapModelPoint(e){return this._mapPosition&&(e=this._mapPosition(e)),this._dragBoundsProperty.value?this._dragBoundsProperty.value.closestPointTo(e):e}applyParentOffset(e){this._offsetPosition&&e.add(this._offsetPosition(e,this)),this._applyOffset&&(this._useParentOffset?e.add(this._parentOffset):(e.subtract(this.localToParentPoint(lm.set(this._localPoint))),e.add(this.localToParentPoint(lm.setXY(0,0)))))}reposition(e){const t=this;this._globalPoint.set(e),this.applyParentOffset(this.globalToParentPoint(this._parentPoint.set(e))),this._modelDelta.set(this._modelPoint).negate(),this._modelPoint.set(this.mapModelPoint(this.parentToModelPoint(lm.set(this._parentPoint)))),this._modelDelta.add(this._modelPoint),this.modelToParentPoint(this._parentPoint.set(this._modelPoint)),this._translateNode&&(t.pressedTrail.lastNode().translation=this._parentPoint),this._positionProperty&&(this._positionProperty.value=this._modelPoint.copy())}touchenter(e){e.pointer.isDownProperty.value&&this.tryTouchSnag(e)}touchmove(e){this.tryTouchSnag(e)}ancestorTransformed(){const t=this.pointer.point;t&&this.reposition(t)}attachTransformTracker(){const e=this;this._trackAncestors&&(this._transformTracker=new bl(e.pressedTrail.copy().removeDescendant()),this._transformTracker.addListener(this._transformTrackerListener))}detachTransformTracker(){this._transformTracker&&(this._transformTracker.removeListener(this._transformTrackerListener),this._transformTracker.dispose(),this._transformTracker=null)}getDragBounds(){return this._dragBoundsProperty.value}get dragBounds(){return this.getDragBounds()}setTransform(e){this._transform=e}set transform(e){this.setTransform(e)}get transform(){return this.getTransform()}getTransform(){return this._transform}interrupt(){this.pointer&&this.pointer.isTouchLike()&&(this._lastInterruptedTouchLikePointer=this.pointer),super.interrupt()}canPress(e){return e.pointer===this._lastInterruptedTouchLikePointer?!1:super.canPress(e)}dispose(){this._dragAction.dispose(),this.detachTransformTracker(),super.dispose()}static createForwardingListener(e,t){const i=lt()({allowTouchSnag:!0},t);return{down(s){s.canStartPress()&&(s.trail.nodes.forEach(r=>{Ro(r)&&r.unlockHighlight()}),e(s))},touchenter(s){i.allowTouchSnag&&this.down(s)},touchmove(s){i.allowTouchSnag&&this.down(s)}}}}class JR extends ui{constructor(e,t){const i=lt()({display:null,followPDOMOrder:!1,requireVisible:!0,requirePDOMVisible:!1,requireEnabled:!1,requireInputEnabled:!1},t);super([]),this.listenedNodeSet=new Set,this.node=e,this.display=i.display,this.followPDOMOrder=i.followPDOMOrder,this.requireVisible=i.requireVisible,this.requirePDOMVisible=i.requirePDOMVisible,this.requireEnabled=i.requireEnabled,this.requireInputEnabled=i.requireInputEnabled,this._trailUpdateListener=this.update.bind(this),this.update()}update(){const e=this.display,t=this.followPDOMOrder,i=this.requireVisible,s=this.requirePDOMVisible,r=this.requireEnabled,o=this.requireInputEnabled,c=[],p=new Set,g=new bi(this.node);(function D(){const P=g.rootNode();if(P.isDisposed||(p.add(P),i&&!P.visible||s&&!P.pdomVisible||r&&!P.enabled||o&&!P.inputEnabled))return;const F=P.getRootedDisplays();let K;e===null?K=F.length>0:typeof e!="function"?K=F.includes(e):K=F.some(e),K&&c.push(g.copy()),(t&&P.pdomParent?[P.pdomParent]:P.parents).forEach(U=>{g.addAncestor(U),D(),g.removeAncestor()})})(),p.forEach(D=>{this.listenedNodeSet.has(D)||this.addNodeListener(D)}),this.listenedNodeSet.forEach(D=>{p.has(D)||this.removeNodeListener(D)});const A=this.value;let C=A.length===c.length;if(C){for(let D=0;D<c.length;D++)if(!A[D].equals(c[D])){C=!1;break}}C||(this.value=c)}addNodeListener(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._trailUpdateListener),e.parentRemovedEmitter.addListener(this._trailUpdateListener),e.rootedDisplayChangedEmitter.addListener(this._trailUpdateListener),e.disposeEmitter.addListener(this._trailUpdateListener),this.followPDOMOrder&&e.pdomParentChangedEmitter.addListener(this._trailUpdateListener),this.requireVisible&&e.visibleProperty.lazyLink(this._trailUpdateListener),this.requirePDOMVisible&&e.pdomVisibleProperty.lazyLink(this._trailUpdateListener),this.requireEnabled&&e.enabledProperty.lazyLink(this._trailUpdateListener),this.requireInputEnabled&&e.inputEnabledProperty.lazyLink(this._trailUpdateListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._trailUpdateListener),e.parentRemovedEmitter.removeListener(this._trailUpdateListener),e.rootedDisplayChangedEmitter.removeListener(this._trailUpdateListener),e.disposeEmitter.removeListener(this._trailUpdateListener),this.followPDOMOrder&&e.pdomParentChangedEmitter.removeListener(this._trailUpdateListener),this.requireVisible&&e.visibleProperty.unlink(this._trailUpdateListener),this.requirePDOMVisible&&e.pdomVisibleProperty.unlink(this._trailUpdateListener),this.requireEnabled&&e.enabledProperty.unlink(this._trailUpdateListener),this.requireInputEnabled&&e.inputEnabledProperty.unlink(this._trailUpdateListener)}dispose(){this.listenedNodeSet.forEach(e=>this.removeNodeListener(e)),super.dispose()}}const $R=["radius"];class ic extends Xs{constructor(e,t){super(null),this._radius=0,typeof e=="object"?t=e:t=$u({radius:e},t),this.mutate(t)}getStrokeRendererBitmask(){let e=super.getStrokeRendererBitmask();return this.hasStroke()&&!this.getStroke().isGradient&&!this.getStroke().isPattern&&this.getLineWidth()<=this.getRadius()&&(e|=Se.bitmaskDOM),e}getPathRendererBitmask(){return Se.bitmaskCanvas|Se.bitmaskSVG|(It.borderRadius?Se.bitmaskDOM:0)}invalidateCircle(){this._shape=null,this.invalidatePath()}createCircleShape(){return Tt.circle(0,0,this._radius).makeImmutable()}intersectsBoundsSelf(e){let t=Math.abs(e.centerX),i=Math.abs(e.centerY);const s=e.maxX-t,r=e.maxY-i;return t>s+this._radius||i>r+this._radius?!1:t<=s||i<=r?!0:(t-=s,i-=r,t*t+i*i<=this._radius*this._radius)}canvasPaintSelf(e,t){Zm.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return eV.createFromPool(e,t)}createSVGDrawable(e,t){return tV.createFromPool(e,t)}createCanvasDrawable(e,t){return Zm.createFromPool(e,t)}setRadius(e){if(this._radius!==e){this._radius=e,this.invalidateCircle();const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyRadius()}return this}set radius(e){this.setRadius(e)}get radius(){return this.getRadius()}getRadius(){return this._radius}computeShapeBounds(){let e=new Je(-this._radius,-this._radius,this._radius,this._radius);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}containsPointSelf(e){const t=e.x*e.x+e.y*e.y;let i=!0,s;if(this._strokePickable){s=this.getLineWidth()/2;const r=this._radius+s;i=i&&t<=r*r}if(this._fillPickable)return this._strokePickable?i:t<=this._radius*this._radius;if(this._strokePickable){const r=this._radius-s;return i&&t>=r*r}else return!1}setShape(e){if(e!==null)throw new Error("Cannot set the shape of a Circle to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createCircleShape()),this._shape}hasShape(){return!0}setShapeProperty(e){if(e!==null)throw new Error("Cannot set the shapeProperty of a Circle to something non-null, it handles this itself");return this}mutate(e){return super.mutate(e)}}ic.prototype._mutatorKeys=$R.concat(Xs.prototype._mutatorKeys);ic.prototype.drawableMarkFlags=Xs.prototype.drawableMarkFlags.concat(["radius"]).filter(n=>n!=="shape");const eN=["image","imageProperty","imageOpacity","imageBounds","initialWidth","initialHeight","mipmap","mipmapBias","mipmapInitialLevel","mipmapMaxLevel","hitTestPixels"];class gr extends $n(At){constructor(e,t){const i={};Dt(e)?i.imageProperty=e:i.image=e;const s=lt()(i,t);super(),this._imageBounds=null,this.mutate(s),this.invalidateSupportedRenderers()}invalidateImage(){this._image?this.invalidateSelf(this._imageBounds||new Je(0,0,this.getImageWidth(),this.getImageHeight())):this.invalidateSelf(Je.NOTHING);const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyImage();super.invalidateImage(),this.invalidateSupportedRenderers()}invalidateSupportedRenderers(){let e=Se.bitmaskCanvas;this.getImageWidth()<=dc.MAX_DIMENSION.width&&this.getImageHeight()<=dc.MAX_DIMENSION.height&&(e|=Se.bitmaskWebGL),this._image instanceof HTMLCanvasElement||(e|=Se.bitmaskSVG|Se.bitmaskDOM),this.setRendererBitmask(e)}setImageOpacity(e){const t=this._imageOpacity!==e;if(super.setImageOpacity(e),t){const i=this._drawables.length;for(let s=0;s<i;s++)this._drawables[s].markDirtyImageOpacity()}}setImageBounds(e){this._imageBounds!==e&&(this._imageBounds=e,this.invalidateImage())}set imageBounds(e){this.setImageBounds(e)}get imageBounds(){return this._imageBounds}getImageBounds(){return this._imageBounds}isPainted(){return!0}canvasPaintSelf(e,t){Jm.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return sV.createFromPool(e,t)}createSVGDrawable(e,t){return nV.createFromPool(e,t)}createCanvasDrawable(e,t){return Jm.createFromPool(e,t)}createWebGLDrawable(e,t){return J0.createFromPool(e,t)}containsPointSelf(e){const t=At.prototype.containsPointSelf.call(this,e);return!t||!this._hitTestPixels||!this._hitTestImageData?t:$n.testHitTestData(this._hitTestImageData,this.imageWidth,this.imageHeight,e)}getSelfShape(){return this._hitTestPixels&&this._hitTestImageData?$n.hitTestDataToShape(this._hitTestImageData,this.imageWidth,this.imageHeight):At.prototype.getSelfShape.call(this)}invalidateMipmaps(){const e=this._image&&this._mipmap&&!this._mipmapData;if(super.invalidateMipmaps(),e){const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyMipmap()}}mutate(e){return super.mutate(e)}}gr.DEFAULT_IMAGE_OPTIONS=Ci({},At.DEFAULT_NODE_OPTIONS,$n.DEFAULT_OPTIONS);gr.prototype._mutatorKeys=[...eN,...At.prototype._mutatorKeys];gr.prototype.drawableMarkFlags=[...At.prototype.drawableMarkFlags,"image","imageOpacity","mipmap"];gr.ImageIO=new Yt("ImageIO",{valueType:gr,supertype:At.NodeIO,events:["changed"],methods:{setImage:{returnType:Jn,parameterTypes:[Hi],implementation:function(n){const e=new self.Image;e.src=n,this.image=e},documentation:"Set the image from a base64 string",invocableForReadOnlyElements:!1}}});class tN extends Error{constructor(){super("CouldNotYetDeserializeError")}}const hm=new er,iN=n=>{const e=n;return hm.has(e)||hm.set(e,new Yt(`ReferenceIO<${n.typeName}>`,{isValidValue:t=>zi.isValueValid(t,n.validator),documentation:"Uses reference identity for serializing and deserializing, and validates based on its parameter PhET-iO Type.",parameterTypes:[n],toStateObject(t){return{phetioID:t.tandem.phetioID}},stateSchema:{phetioID:Hi},fromStateObject(t){if(phet.phetio.phetioEngine.hasPhetioObject(t.phetioID))return phet.phetio.phetioEngine.getPhetioElement(t.phetioID);throw new tN},applyState(t){}})),hm.get(e)},uf={isColorDef(n){return n===null||typeof n=="string"||n instanceof et||Dt(n)&&(n.value===null||typeof n.value=="string"||n.value instanceof et)},scenerySerialize(n){return n===null?"null":n instanceof et?`'${n.toCSS()}'`:typeof n=="string"?`'${n}'`:uf.scenerySerialize(n.value)},ColorDefIO:null};uf.ColorDefIO=new Yt("ColorDefIO",{isValidValue:uf.isColorDef,supertype:Zt(nc([Hi,et.ColorIO,iN(hi.PropertyIO(Zt(nc([Hi,et.ColorIO]))))]))});class sN extends y1{constructor(e,t){const i=new JR(e,t);super([i],s=>s.length>0,t),this.displayedTrailsProperty=i}dispose(){this.displayedTrailsProperty.dispose(),super.dispose()}}class To extends Oa{constructor(e,t,i,s){super(),this.start=new we(e,t),this.end=new we(i,s)}createCanvasGradient(){return cc.createLinearGradient(this.start.x,this.start.y,this.end.x,this.end.y)}createSVGPaint(e){return _c.pool.create(e,this)}toString(){let e=`LinearGradient( ${this.start.x}, ${this.start.y}, ${this.end.x}, ${this.end.y} )`;return te.each(this.stops,t=>{e+=`.addColorStop( ${t.ratio}, ${uf.scenerySerialize(t.color)} )`}),e}}To.prototype.isLinearGradient=!0;const cf={isPaintDef(n){return n===null||typeof n=="string"||n instanceof et||n instanceof Lo||Dt(n)&&(n.value===null||typeof n.value=="string"||n.value instanceof et)},toColor(n){if(typeof n=="string")return new et(n);if(n instanceof et)return n.copy();if(Dt(n))return cf.toColor(n.value);if(n instanceof Oa){let e=et.TRANSPARENT;const t=0;return n.stops.forEach(i=>{e=e.blend(cf.toColor(i.color),1/(t+1))}),e}return et.TRANSPARENT}};class ca extends hi{constructor(e,t){const i=cf.toColor(e),s=lt()({luminanceFactor:0,valueComparisonStrategy:"equalsFunction"},t);super(i,s),this._paint=null,this._luminanceFactor=s.luminanceFactor,this._changeListener=this.invalidatePaint.bind(this),this._paintObserver=new hc(this._changeListener),this.setPaint(e)}setPaint(e){this._paint=e,this._paintObserver.setPrimary(e)}set paint(e){this.setPaint(e)}get paint(){return this.getPaint()}getPaint(){return this._paint}setLuminanceFactor(e){this.luminanceFactor!==e&&(this._luminanceFactor=e,this.invalidatePaint())}set luminanceFactor(e){this.setLuminanceFactor(e)}get luminanceFactor(){return this.getLuminanceFactor()}getLuminanceFactor(){return this._luminanceFactor}invalidatePaint(){this.value=cf.toColor(this._paint).colorUtilsBrightness(this._luminanceFactor)}dispose(){this.paint=null,super.dispose()}}const vc=0,Vc=4,df=2.3;class nN{constructor(){this.isPointingRightProperty=new di(!0),this.wheelAngleProperty=new Kn(0),this.crankAngleProperty=new Kn(0),this.effortProperty=new Kn(0),this.bicycleColorShiftProperty=new Kn(0)}toggleToNextColorShift(){const e=this.bicycleColorShiftProperty.value;e===vc?this.bicycleColorShiftProperty.value=Vc:e===Vc?this.bicycleColorShiftProperty.value=df:this.bicycleColorShiftProperty.value=vc}}class np{constructor(){this.positionProperty=new Kn(300),this.velocityProperty=new Kn(0),this.accelerationProperty=new Kn(0),this.cyclist=new nN,this.velocityProperty.link(e=>{Math.abs(e)>1e-5&&(this.cyclist.isPointingRightProperty.value=e>0)})}copy(){const e=new np;return e.positionProperty.value=this.positionProperty.value,e.velocityProperty.value=this.velocityProperty.value,e.accelerationProperty.value=this.accelerationProperty.value,e.cyclist.isPointingRightProperty.value=this.cyclist.isPointingRightProperty.value,e.cyclist.wheelAngleProperty.value=this.cyclist.wheelAngleProperty.value,e.cyclist.crankAngleProperty.value=this.cyclist.crankAngleProperty.value,e.cyclist.effortProperty.value=this.cyclist.effortProperty.value,e.cyclist.bicycleColorShiftProperty.value=this.cyclist.bicycleColorShiftProperty.value,e}step(e){e=Math.min(e,1);const t=this.velocityProperty.value,i=this.accelerationProperty.value,s=t*i<0;this.positionProperty.value+=t*e,this.velocityProperty.value+=i*e,this.cyclist.wheelAngleProperty.value+=Math.abs(t*e),this.cyclist.crankAngleProperty.value+=s?0:5*Math.abs(i)*e;const r=s?0:Math.abs(i);r<=.5?this.cyclist.effortProperty.value=0:r<=1.5?this.cyclist.effortProperty.value=1:r<=2.5?this.cyclist.effortProperty.value=2:this.cyclist.effortProperty.value=3}stop(){this.velocityProperty.value=0,this.accelerationProperty.value=0}reset(){this.positionProperty.reset(),this.velocityProperty.reset(),this.accelerationProperty.reset(),this.cyclist.wheelAngleProperty.reset(),this.cyclist.crankAngleProperty.reset(),this.cyclist.isPointingRightProperty.reset(),this.step(0)}}const rN=""+new URL("bicycleFrame-CEbdWiJO.png",import.meta.url).href,aN=""+new URL("bicycleGear-BQXuIS22.png",import.meta.url).href,oN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACCCAYAAACO9sDAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACpBJREFUeNrsXeut6zYMJooO4BE0gkfQCO4GGsEjaIOgE7gbZASjE2SEdAN3g9NzAQtVePR+yxaB/Ln3JHEo6hP58SGAe8v8/VpgyG3l9f36Gmroc+f+Wrg14jOm8zNeQ539CTkX7zgXMkTY+Rl8qLNPeUQu4Ha+fx6q7FOmEwFCUUC8d0jHws9dvAX6EM/KCLaOJUyDAl+nX+BrOKzic//6/n0sYbywgN38CjCaHM/8GMuXRt6nQmkn4d/m8bxDPHaUC6QuDew+YbBDEsruuKtq7z7SgAN6SaGnYt8Ou69m+LdCPIs5xIICrOHw7wmDgMomswUFWth9g4Aq5GFzA0KQyga6XXkBpsrfL5wsTBFPjj5CTuFQl4Aqcr4dDRgBV6BAC+FfbQQqpvjaECcnioSyRfZwqfhMtRGomOJbsHJsjLXJlxQItPQQPraEAjJF3EL2LxSBZun46IJBfDeCAkxyCGuHfyIB5eMfESmqEVQ37cEAGLRDd74lBdYiXwj4pX+nE0kPyW/oLnLwydCVOHuPBjYEd/zbQ3pm3kBUFfWj90YMoGYE4JKAotIxIXyoLhdeFffWRIGHpNRaIZgpAUWQg7dfiSegDaDAW/JHarBwugTUhBy8N1y0QGSHevQnQbtKKLoktOIEFHbwDrgwNSyjQA34ZUj5G5RvBpHTv0xCpK4dvF5QAOfeCcT1EoTIIaGQ7OARuJGQSiigyr1zKJcUkiMQYQTdFYKkeuDS8EtBTUmXyFdMiuijyzb0GVkvjzAIAvENnSHhn+rY4ZAvX7FKBvYFF0j/PuCTThWL+Dx/7NwoCti49zekpYcXpCdhgJdpPyfnbtoUFv4+/51ZrD22odMXbV4OEUIsR0GRg/c8v7+FApTsx8MK/1cByQbxOn/4olhoXgAFmON3CJSggUZmytTVLkCpEu9ztBtkg+Dn35Rwwlx7/2kACkySEZsydbfu/plOy3/AZ4JD9iFyFo34lF77cBQMfmbqTEfQ6P5V+A8qh9LFf/CNXFxrEagDR0EVDt6U4Ai6tUE8FMggO5RLoKPIwZ91FEfGqjCmkEzdGD/jKG9J8Sb/4eHhqIX0/mOOAmfqXp6O4uj+8fTWdwXk6vwHEyEV0/u/SZ8fU4rVQv9hlyhALQ7lZiGkCMRN3ljR5/LAI2h0/waEjz4es4mQ+pKcL+Lx/RhpYqKTy3f/5JCY0jGZkPryIKSIwsGjCTiKHrp/2Pl7l9ZQIEZxM/IRdoP/gDN1VAHhW8TvaLX7F0c1S4sowALfrzp7XQgpVUIrtKS9VfoXp6ebrEuYI1HAdPYy5EA+LYQUhzAmL6T7pwTcd1N/uAWigK7zloK5FMuU0PqSnmXyeIZW0r/YuX1AB/WHmJBxFZx6JRDWUzdHEFKtpH8nxW/vKiIJKRqRkYNDulKsHT6TV9ihlP2HFoY/rojE6jIVHYICb7RQB6RJxMh+iY2QqjkXAcN9KInVjHAPFMCVt6nPOh0iCUJK5T/IFVI5F6J7uDf9MFvpGI5pn5l+vAsirdIz+BJSMZuke7h3QYFNsSCbQsk5Ld92O4lq+CM9/96U0ArxFyg6grqHexsKiMXVDU0oQb2qhk7JYkv/yoRUaIU1QejyhBvkG1b4maKVM3ULlKNedYgUMvxR+A8qh1JVYY0Nn8JNhMLPLN2kgOalECKpZh9xiO97dCGkbnXBBFGQMbsh/Ct1BjL4WeyRI/3LDEbwivAfujj3VUMTVMkZAnUqb/GzpPRBJg3cmxJaO/h3aDW58Bz0SQumWGzxb6UrbxbpWVLSvwv8nB2g0xUDc4UU68lBZOA2NAEXjdScu79LcBzrg+Djznc4VAuEVLCD5zM0gcJntu2AepU32DkNUS7uMPKtPLY5lLuFkPqwoKPgWYLjWZ/ihF0yltqVNzuEp38x3K+ZjVVHSC1iQXSxaMrwKsXQBLzzWEUDkEmoycP4Y+A+xRoIh3JXIYGuuFIuvQ4ldI5EFv+MhN5UIkcrvBLcZ/d2Hxp0eDjuXjw0gSdYNAr1R78CgnBTooglNP6qxIzOsVCFHdjBS8lbM4+dl0vk7h+ueRacreyiJMvnHFHFoS+Fg5ca6jYU99ZQqlyBrEpaNV+Bm3o3cFDTljlICQG5j4oogDkIDuqkFYMbCD7jHqBu2xIc9hxpbLL3fFRCAcxBzJC3KqlJoWAfmjBrYtAjkKHiKPzjUD5LRpER4uKUy08FCR2aIHPYoeiAe/9rXFJlgvtWLsnI5vzFDE1Q7SRVhks3IUTXeMGhLCuIIyE5tKVXRIES99cQ0Cc0BEWtg3tdoUbuDaBDvprj8bM4eDXGm1MNCSUii0XDDeRCATz+9eHgI3R9QSSFn/fXkErPQuBzeoeOos5x/mI9iO+wsaDPXlGAKBy8FkiMGe1+HTqkOn+JBu5dS9BIZaIq2sNtrfJ01ewogQ6uFLWrDlQNF8TTwGrcTpLE0WkxhHEpvJxAX0zpMmqOgrkki3kuaE2i6nLhp49TtUsLpUIHXDdHwK3hImT4Y+kQ9ZLiW3ip8sJNJJRsGCaECBn+2NJt6t3KBv6Fl7ZYfDUYgYqijhn+uA4UiJOQseu6eUMquJ/BTlGLzOMa+RvoWE7/cCx058lTQ1Qz/qmFhHoZSChfp47BGB8fFf6tEcZzQHgFLjFEFr5V1K+BAv7yjHCgCCKLQitwqfR+Cvo6SVsVNYWLXSJVQkI4dQz3sYwcBzMJ5VNFfalEUanwb/N8D4Z7DnGMnOvwR5cq6thhmLcSn95/XKQiw71tuocLCeUL2wT0FPUBY5y8V+g0WRboAfYiFR4Yi6fo/rVVUfvchnK78G+3hFauFbihjFyO4Y8zqIdcddnaXSP8C224CGHkct39Jxskh3xV1N2Hf7MB7kNqFXzuC3ZBoRhRHUupq6i7FVx37wP3YDk2XBeVZXbWbMdSiirqLgUTL6n761x5+RITSBi4U92ChHKtou4+/HtDntK0xREFSt39F5IoImCvou4WHXARZo4ZgLZLqkre/edqkC7ogMPMrrgGCuVGnlMLwaOrQcwlMbem6UioZy/8gqq/jhdUOjP8Hylo/LekiPENFz5hWk6l11iMWyWKdHBf+tJl1SVVJQdQq3gHn6FT3QmBnxNECHK8tspKr3n3X5e9BK7CwTzynFeCQKz0mnf/CYO8VC8BBbcZuC+oUz4tK51A/aodfhUUwHBvmhRW+9LFB3zO/q2p/Ev0EtjgHguDuhciyEpvoXCTQ6e9BLMj3OvOYdqA0r8a0GOpoRfZYlnfwZClwz+d8X41pHQGHfYSEPAncUry7iaR28Vagd5bdBSV5t118oTPos0WUIDCDTqK9kYULo4h1ggiYf1cEgV8e/9z77StQegVNZDkigaQ8tKlFBEA69kB61FCev9LHUOjmbOgl9vCMfS6owPWQtxd29kyHUN7Iwh1aQOoHf6Z0r8URjPn5cWW/h0t3RcW4nDOkyujwG83NwDh4f9t+Jt/vl9/wf/VtkMuGIbaQj2BAmPq5wXD0MPTWPhQ2z3DUAIXnP17Zx/A5fzHvsCf5+IPX+ACEjKCbsz+vZCEhnYcxuzfS8B/6CLKKNC9/D7Of2/59/v1B4wsYfcRAB8xPcB/AgwAKAWj7oV9OAQAAAAASUVORK5CYII=",lN=""+new URL("cyclistTorso-CQ6swEUX.png",import.meta.url).href,hN=""+new URL("cyclistTorsoTired1-DtGF82WJ.png",import.meta.url).href,uN=""+new URL("cyclistTorsoTired2-DqCIH8Wa.png",import.meta.url).href,cN=""+new URL("cyclistTorsoTired3-JJhOdtZy.png",import.meta.url).href,dN=""+new URL("cyclistLegBack01-Cc5t2TVx.png",import.meta.url).href,fN=""+new URL("cyclistLegBack02-D4lhun60.png",import.meta.url).href,pN=""+new URL("cyclistLegBack03-CWAJoQXB.png",import.meta.url).href,gN=""+new URL("cyclistLegBack04-Bp2KFL7a.png",import.meta.url).href,mN=""+new URL("cyclistLegBack05-DqxrV76O.png",import.meta.url).href,yN=""+new URL("cyclistLegBack06-BItWopzm.png",import.meta.url).href,_N=""+new URL("cyclistLegBack07-CSrwkjCO.png",import.meta.url).href,AN=""+new URL("cyclistLegBack08-BIt7562M.png",import.meta.url).href,bN=""+new URL("cyclistLegBack09-CLenWSrY.png",import.meta.url).href,vN=""+new URL("cyclistLegBack10-CYdpUCvt.png",import.meta.url).href,VN=""+new URL("cyclistLegBack11-C8HmOU9S.png",import.meta.url).href,SN=""+new URL("cyclistLegBack12-DxkcSNWd.png",import.meta.url).href,wN=""+new URL("cyclistLegBack13-Cs1tlsXw.png",import.meta.url).href,CN=""+new URL("cyclistLegBack14-BidWsfkz.png",import.meta.url).href,PN=""+new URL("cyclistLegBack15-D5ObOEqD.png",import.meta.url).href,EN=""+new URL("cyclistLegBack16-DneWz68G.png",import.meta.url).href,DN=""+new URL("cyclistLegBack17-D4Z-aEbH.png",import.meta.url).href,TN=""+new URL("cyclistLegBack18-BYfedRn-.png",import.meta.url).href,IN=""+new URL("cyclistLegFront01-BVyQwDtw.png",import.meta.url).href,xN=""+new URL("cyclistLegFront02-CWj0djH0.png",import.meta.url).href,LN=""+new URL("cyclistLegFront03-CG2QV6uP.png",import.meta.url).href,kN=""+new URL("cyclistLegFront04-iTnP-jeD.png",import.meta.url).href,BN=""+new URL("cyclistLegFront05-DkeSxYQU.png",import.meta.url).href,RN=""+new URL("cyclistLegFront06-CF-rIPrg.png",import.meta.url).href,NN=""+new URL("cyclistLegFront07-D-ns8YBs.png",import.meta.url).href,MN=""+new URL("cyclistLegFront08-BQNgfdWm.png",import.meta.url).href,ON=""+new URL("cyclistLegFront09-BmwN72fI.png",import.meta.url).href,qN=""+new URL("cyclistLegFront10-DQSELyBn.png",import.meta.url).href,FN=""+new URL("cyclistLegFront11-D2-uWNwu.png",import.meta.url).href,zN=""+new URL("cyclistLegFront12-B6VPfVXw.png",import.meta.url).href,HN=""+new URL("cyclistLegFront13-CV0grxW7.png",import.meta.url).href,KN=""+new URL("cyclistLegFront14-uk3wSSO_.png",import.meta.url).href,UN=""+new URL("cyclistLegFront15-CGX3vBxU.png",import.meta.url).href,YN=""+new URL("cyclistLegFront16-DfrDLP0L.png",import.meta.url).href,GN=""+new URL("cyclistLegFront17-D7sqEMU6.png",import.meta.url).href,WN=""+new URL("cyclistLegFront18-rQiFW_Bo.png",import.meta.url).href,ai=n=>{const e=new window.Image;if(e.src=n,!e.complete){const t=vs.createLock(e);e.onload=()=>{t()}}return e},XN=ai(rN),jN=ai(aN),q2=ai(oN),QN=[ai(dN),ai(fN),ai(pN),ai(gN),ai(mN),ai(yN),ai(_N),ai(AN),ai(bN),ai(vN),ai(VN),ai(SN),ai(wN),ai(CN),ai(PN),ai(EN),ai(DN),ai(TN)],mV=[ai(IN),ai(xN),ai(LN),ai(kN),ai(BN),ai(RN),ai(NN),ai(MN),ai(ON),ai(qN),ai(FN),ai(zN),ai(HN),ai(KN),ai(UN),ai(YN),ai(GN),ai(WN)],F2=[ai(lN),ai(hN),ai(uN),ai(cN)],ZN=new we(12.76,13.2),JN=new we(-76,22),$N=new we(77,22),z2=mV.length,um=123,cm=-249,rl=.49;class rp extends At{constructor(e,t){super(t),this.cyclist=e;const i=new(ip(gr))(XN,{right:um,top:cm,scale:rl,cursor:"pointer",inputListeners:[new af({fire:()=>e.toggleToNextColorShift()})]});e.bicycleColorShiftProperty.link(ce=>{i.filters=ce===0?[]:[new CR(ce)]});const s=new gr(jN,{center:ZN,scale:rl}),r=new gr(q2,{center:JN,scale:rl}),o=new gr(q2,{center:$N,scale:rl}),c=new At,p=[];for(let ce=0;ce<F2.length;ce++)p.push(new gr(F2[ce],{centerX:i.centerX,bottom:i.bottom,scale:rl})),p[ce].setVisible(!1),c.addChild(p[ce]);const g=new At,A=new At,C=[],D=[];for(let ce=0;ce<z2;ce++)C.push(new gr(QN[ce],{right:um,top:cm,scale:rl})),C[ce].setVisible(!1),g.addChild(C[ce]),D.push(new gr(mV[ce],{right:um,top:cm,scale:rl})),D[ce].setVisible(!1),A.addChild(D[ce]);let P=C[0],F=D[0];const K=s.bounds.center;e.crankAngleProperty.link(ce=>{ce=yr(ce,0,2*Math.PI);const T=rp.mapAngleToImageIndex(ce);F.setVisible(!1),P.setVisible(!1),F=D[T],P=C[T],F.setVisible(!0),P.setVisible(!0);const Ce=(2*Math.PI-s.getRotation())%(2*Math.PI),ze=ce-Ce;s.rotateAround(K,-ze)});let M=p[0];e.effortProperty.link(ce=>{M.setVisible(!1),M=p[ce],M.setVisible(!0)});const U=r.bounds.center,$=o.bounds.center;e.wheelAngleProperty.link(ce=>{ce=yr(ce,0,2*Math.PI);const T=(2*Math.PI-o.getRotation())%(2*Math.PI),Ce=ce-T;r.rotateAround(U,-Ce),o.rotateAround($,-Ce)});const re=new At({children:[g,r,o,i,s,c,A]});this.addChild(re),e.isPointingRightProperty.link(ce=>{re.matrix=ce?nt.X_REFLECTION:nt.IDENTITY});const pe=this.bottom;this.y=-pe}static mapAngleToImageIndex(e){return e=yr(e,0,2*Math.PI),Math.floor(e%(2*Math.PI)/(2*Math.PI/z2))}}const Fs=(n,e)=>{const t=e.replace(new RegExp("^.*,"),""),i=atob(t),s=new Uint8Array(i.length);for(let r=0;r<s.length;r++)s[r]=i.charCodeAt(r);return s};class zs{constructor(){this.audioBufferProperty=new ui(null)}}let Ze;self.AudioContext?Ze=new self.AudioContext:self.webkitAudioContext?Ze=new self.webkitAudioContext:(Ze={},console.error("error: this browser does not support Web Audio"));const yV="data:audio/mpeg;base64,//swxAAABSAbF7TAgDE5nqu/MHICAAAAcDYkDIEtmZ+0OAIDonAEAIOjgnenW/yhz/g+fh+CEocif//+c5RVQlRIdHdXcHffj/DYYCgBdaS6OzOU+xCNTd7EPI6nQ7mODNUkXlljx1AXgvbsgTi8z3+Z7a8aMfHP9uQFmXb1f/cmZM/9//sIhYP//sNqQJAgNJhWTyGAwFAoAATS//syxAeACW0Hgbi1EBESBuvjNGAAfDtZrw0MQaBPJj2MwQyJDLEhJZGoPjAvCMnP3dlJiAtJ8xr/PKk5hYV//3KDxif//6MYVcnt//+VFswo04EQAACAAC9YdezBqNoZHHQDlUSCuyZAkxazLI1qAeiR+JfccaBj1xti9B5JXrESzzBnSIgoXKxEzkQCos+pbPmxfwWXkwAAFm+93//7MsQDgAh4Z1G5gwABEY3y9x5iAuzlQAAAAAB2Wop4QsaAhgpWdRTKJsZcpp1XP57ykSikyYckLZ4Ty1TSs+HageepBZpVjXhgAMSIXXKmU65I0d/7dt7v7sNgMBwALVb09GkvHVk7fqBciIEitH44DchaeFCkbZVn3vi+3iz997uspO3MNCwv4nKHDdB/+gTro/8WA6oYAgMAeW//+zLEAwAIZH9bHaGAAQMgrTTxid9Ko07zWxQmamYZMUXJVhdXnyiL/VNVCqJJVOgImNStCjd9bH2ZjwZ/qQYUyG79QVWCpgKmMChqVd/4VIkkywFXa2uRpIAhLLU5m1VG6LimpHOKzIapjKZdQGJoCUbq7bMoVyt+j5W6t+WZ/r/KqPLMbv1Kxurf//8tBTuFZBUABV3GwiMDZuFj//swxAUCB4SDK0ywaICeAyN0wyROlYmGu6/rSDZ4E2kDhIFxZeHE1XJXBGqqqgLGqsZQ8m6ArsXr1fUvL1lChr+v/7fq//SC5HLZU2AEjwW0VUCig+dQNmTNmsUQ+tQt+EhX+skFfU3+n+u7/hV6TEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",eM=Fs(Ze,yV),tM=vs.createLock(yV),Oh=new zs;let H2=!1;const ff=()=>{H2||(tM(),H2=!0)},iM=n=>{Oh.audioBufferProperty.value===null&&(Oh.audioBufferProperty.set(n),ff())},sM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Oh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),ff()},K2=Ze.decodeAudioData(eM.buffer,iM,sM);K2&&K2.then(n=>{Oh.audioBufferProperty.value===null&&(Oh.audioBufferProperty.set(n),ff())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),ff()});const _V="data:audio/mpeg;base64,//swxAAABsArNnTzABEnmTA3HoACAAIOAYznNNVnYDYAWAjClBSA3BwKB48VkSUAABBynBhYP5QMCc+T4JnwQcoH/6gff/Of/l4gAIJkjluslkskluuAAAkTmCV7K1w6pqz7VkryDnmQVVFCJY0HRFDgrNPT7QRsUHNV+KVNJRPtYt0/426/nj/Tv/sPVjjhtrzPbywAATqIdRsL//syxAOACHStW/2RACEMj6e2smAEqYAYhGmdJfGbQRJM6d5rUVhcXmZTOP9blIoBChWlL5hQoqBgpUdHqJ/1McBGpaGctDO3++hgIUqDV8QgqAAntdpnEwAD6ruLLBhIIEPkpGtP5xWnwVF2czcptv1Fgk0VRRGN9VJRU46pQrSVRX///853QKKZ0dz3cGnwCKBwcHYEIC0hEM5EMv/7MsQEAAiQXW+5hIAREZRslzKwACEMBgAAD9/MyuFW/l8vMAkS99TuX45zufo9JjH/gbUAtafz/MqCaqJP4IIAARGcawPpR8H3iefS7zg45qAIBFAAV1AtJXsx44xwqAZ24lKIsEc5bDMUuS6XnBEXQqAakxM3KX8vlruv28Pc++21X/p71t0ufET/PUOSB+v8FT3Fl3GALLrbdbr/+zLEA4AIWHtvuPWAEROSLXcegALRIIBAAAAIpME09Jpkm6HEpcYWjTFeQLCjn4NAjRM5fbfr4UULuXdO+HtlGqi0a/9EFQ66zxGCz/4GGlyg0HFHJZM7ZIAwEAAAErGUoi0JXI6UF+hiurPpjdxalUIbk1pRYWEUpY39w/BVt/p1i48ySduL+KRKEg8sPo/yoV/yLlIIpJIQSCOJ//swxAODxLAbO7xggDAAADSAAAAEweQCRznEiWHEqW49z3nuJf8Fbqzvw1+e6j3TPf/BakxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",nM=Fs(Ze,_V),rM=vs.createLock(_V),qh=new zs;let U2=!1;const pf=()=>{U2||(rM(),U2=!0)},aM=n=>{qh.audioBufferProperty.value===null&&(qh.audioBufferProperty.set(n),pf())},oM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),qh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),pf()},Y2=Ze.decodeAudioData(nM.buffer,aM,oM);Y2&&Y2.then(n=>{qh.audioBufferProperty.value===null&&(qh.audioBufferProperty.set(n),pf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),pf()});const AV="data:audio/mpeg;base64,//swxAAAB5g/PnT2AAEODWz3MPACATcwAQxWRG8v4t4m5Y0gGrH+vEEIQ0J864QJgfEs//KUlhYscDHWH/BDD+7p8EAQBB3pBAEAQBABg+fwQAAABLbkkl+wAAAAAAApUEcylxWEbBYbjKTtTlM3eamWe5RAcBxA6VypWY/T+Lr1S1waL6rSucRXH9ORv3pvMuaX8aPVHAAHBUpB//syxAMCSChfPF28ABkDiqWd3bC1gSAHIAIB+Eua0PmBBI8GxoUDjBQgFHgkCKwrcSkWU6j9Sd+KaBUriJjhajVnvzMt1d7qnsZ///XxGarCW8ICUBSEMlofMKEEMUxHBpw1wME1UzDAIKgQMlzDhMDDKBify5qB0oNf2gp6peEUEQRlcTW9MN8XxQTaJeim2apgHXh0BA42HdjNLf/7MsQFggh4Wyguaea5EwulXc0k5sOdsU8HATEgJBsocOAYml+fvgPRkTAMqGk6FmJpDTjOn1MGkcUStpHsmIbInFwJGEsLanJYVDH8wCQSw4BWcJUpo5emDQ4bvFJ8R8GGQ8Y04EKYPAAk7BdNV8H2mJ54aS6xWdoQwIjE7LBlCLKCIUyihd/5O1Pr/Z//r//+ugAkgUDASheRbs7/+zLEBQIIMF0i7mknUQqKI43cjOo+4jDKZN4nQ+nnzAIQAIFAOgYZUEPnmTwex2HYpllk6m47QrXB/jCOonH1PVe/P+7f/yX////+oAJ/YCSrrMBgnNhCHMIDzMAgfM3JgRnS+W8QBgr0D4Pqy1k7lMfZVff9q1aA+omBkMhA4OM8FGFw99bPp+T/fX//9dUAKAcCZaSBQNNowTBB//swxAaDB/xNGm7hhtEICaLN3DDSlmkhAGok1mBAQFtknQ4AT4+pYJAiw0w4BwzUW4PaQgrVEGL6z0z0QVwH+d6Zr///6v8oAG7eA3pboQCSbFGAYeB2anAuc/ywAh/BhEZkqxPg7Bp8kJci1ITUM1YE9UZUPaWOT+Ks/zzcz8VejwR+j/T+z9HSADd3AQ+ZeKCgZHp2Fh8NAB5O//syxAkDR9RNFG7hJpD2jqINzpSynmlDBxw8IELTAVYo5IBlgwaHhk9qYTAyl58Dpjtf6q3Dv1vTRnvlv8S/6P9ABicJuxgUDmP6IKqoMDx1iggKEpYCCGUl4HnjMrXBkpxbk2rPIg7z9PwGIK9Ap1blL/0jaJjb9f+W/PU/5aoApe4BRQuWYMAobdPOYFIYaMk6fJDqYhBGg0Dsu//7MsQOgwiUUQZu4MdRBQogTdwY6oFDoaFxGnF+6NKF+px/5Pgxp7nlue5Ehb/4DjJz2n9+z8633/7v/KgFMbgIZImmDYHG86VGIYtGiJdHPZNmA4QJDruegBSAp2mvCtqonzjRyjPTPpc6RzbxeJPndFfzH/Zkv/9X75b/LSHIAAIqqsBDGcsQI0YnBj5+kYCQsu4vQoAi2rOVhXH/+zLED4JGvEEAbm0jUKoO4KmTCVZRFoN0WXzjW0zW6Q28yWOZvKPjXpnMNBsVda1ccCOMpS9GgcVUAh+JxR+hMHbWqv3wolHgh/gLfq3QCfwYlZ2+kmoAAAqSPYAAAZXQtxfw5RFhnCEoyBHegrALYEK6pBnXpBhS/4ci6AoaNlhus1y3kjUghRNDGRIyxJtzBboYMpeic0Op0DSX//swxCMCxQBO96eMy3C2A0AB73hMkPMgl18xMmNDDAXHMEdYykxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",lM=Fs(Ze,AV),hM=vs.createLock(AV),Fh=new zs;let G2=!1;const gf=()=>{G2||(hM(),G2=!0)},uM=n=>{Fh.audioBufferProperty.value===null&&(Fh.audioBufferProperty.set(n),gf())},cM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Fh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),gf()},W2=Ze.decodeAudioData(lM.buffer,uM,cM);W2&&W2.then(n=>{Fh.audioBufferProperty.value===null&&(Fh.audioBufferProperty.set(n),gf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),gf()});const bV="data:audio/mpeg;base64,//twxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAARAAAWCgAPDw8PDx4eHh4eHi0tLS0tLTw8PDw8PEtLS0tLS1paWlpaWmlpaWlpaXh4eHh4eIeHh4eHlpaWlpaWpaWlpaWltLS0tLS0w8PDw8PD0tLS0tLS4eHh4eHh8PDw8PDw//////8AAAA3TEFNRTMuOThyAc0AAAAAAAAAABRgJAZTQgAAYAAAFgoMxGP1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7cMQAAA7gbOxVvYACW5Fntz3AA5QAAyAQIBEys3MtCTFFg5TGPm8D3KgDTJuEccMxAZkMFHzKy0ykhAROIho0JQOFfTbU8iRzFi4zYwMgBiUFMRDxoHLdpJtwSEMGBAMAKWRFL8swriCVA0i2X2oxYpIxKJZScr2+g+8oCBQ5//5cP////y4P/y4fgEAoFAoFArLYAAAAAAMDYCMx+k2DAeA6MFEIcGgkCIdk1vDGDNcO0Mt0zUwRA+DC3HiMGkE03THtDaEMoMFkBAwKgmzBaBoMAgB8+fQzksxMVigyANDAggAQJN9mcHA4kFpgsEJllrRoCrC05kkQjR0MTisME7eQcphFoRHX7nUoy4CvF0UrhPiwWUy2x/P/PDDn/jLuqAGAAwDcEMMCHBhjCbwtwwKoHpMM+Ev/+3LECwNSzIkWXf2ACj+QoEXu5SkzE0he0zdxYLM8SH/zF7hbcxLcKaMHFCGjA5wQ0wSoE1MK+B4zAZAMwwDwDJMATAJjAxgRc1J/MpODbWY3W8MeEjJxMAAiO5iZUAhUFAIqBAUiEh4OCQSGGHArEVNUyE8wYKmTDJZl8pVXx5IYtUr673fO8xs0t7Ptb8bKV8UnuCIwTR2DLDFMMHUaMyDhPDIsI8M4ME00OMfT/wfHOBoKcxZUYjP9nDXBIzYicDQuIjXdjAyITWM0DiVnjL4Gza8sjHUVTPsCDQw/wMRJhEBZiGHIYMQkLaKoVCMsAmkcYk5vHm0AIAwSGW2TdCGTMcMMCMLyVipZcplALqSm/DURt95nlTdZjvOYyWrK46xN9WogBoCswawJDJACtMW4KExLSlDBsP/7cMQKABFIgQI17gASa5Mjaz3QAE3NLvnQ3agRDJ+DSMbgYExaABTE4EHMFIM4wwBnzAWAVMBYMAwgwkjBjDYNAKwyiLzEKxPMXsGB80aSkKDAQoMWgYtinyYmCYwER4ElzUrDHIBWSrc/T4pDAoBCwVZK7mOFNL3Wh2NUzOn6m+548/kht9JTqojAAAAEgMQKAAAAAAMA8A4wNw8DAgA9MMUIcQhtmGeEGYMAu5gnAomMSHcYCYNBkVBSmS+F8YBgAgGBJMHEU0xtw/zDiLVMxpn4xFAlAGbDnGZJgUfrl2aOjomK8jJwUMhgGABhAFRgKCwUAAu8k437py0SDRp6lj8Bgoski0Ff+++iWkItSgfwrAOkgGWY5f//9ne//7luZoyn9dUFRgAAwIBIw5CYxaOMxUGsxfH/+3LECQNQPJcafd4AGmmS38XvaShMaMQ29Y4HAKZcCMZWigIzAMzxoCgAmHoLiMUTLISzNunD5V0TlJYNXoQzCHBY5jACC4TFgiporE9rpO005iSiseWg60bdWG2ove12Uw7EwqDm/fmUQfYtQ1TWX9eWHZbQWm53a2WrVWZlFN+rfqa0QwzxGjEDGKMJIO8x+AJDCjO1MnMPU5+nqzFkYHM2I20x3iHDBzC1MLsZsxoAeTD9CsMMos8zVDZTN7EePxtJIxYgyDGTB+MPIHowBgGTADBbMMwC8wdAHQgAQwVwPlFxQBAwLQIhICgSXHCUCJKDiKuU7VAVVa7EVuui/6eCOSJLoN/GpSyzj/3aWls7w7EMufvur0t//tfyepULAAMFIm0wPA7iZsMxzQnjI4CXMkIcc3s5sP/7cMQNA1L0jPxPeylKLhGfRe7lKDdTH5GhojDABOMIkYUwNAuTGYGZMKEnMw5RgzDsMvEZsZsuJMGB0IUYbAIphfgdGA+DCYBQfxg1gImBWBMEAOBYBwwDQDk+ESQCASVEjLWMJA2YUAyFiirR2rNnEhGJxRfAMVSYa/K2uxFLZyY9ALryyBa31mHYXsse6+il0QwGAzDEVK6Mc4xQ1IgzDF9B6Npko4yElYDF9IGMnoGwzaSlzxAXzJ51TMYUjdJ8DBIajEz7j4TjDtTFTBaNDKoJjJgVzEJnjFgLzHoWzDQMkaw4TjCgBWmR1ahgHmUObQZ8uBw7/U0NqvX+pi6cMMwCwctZS8lLVXbAUvfaFYaw18B8s95/3a1C+7SqDQADDyGiMrE1QybhITRuVZMKYroyWRTTQ3b/+3LEDQNTCH74T3tJQjOQHwXu5Si1MVYJYyuCnTBmGJMjAKYxKBBjIpHGMVQW4wSBIzHZFRMfdJYzSWXjBrIzMVMOowVQNDBMBfMGAIgGgSmB+AQYB4BKSpgOgCl60STAJAMSVLUGTUnWAwajZPLzVYFySQT3UkGQ6NCofaHDjAkvl+bVW7N37Eb21jAJBdgiffpIYRJMhhFhymNmUUYqY/ZjKjymScW8Y71jZoaoamSqPyY/g7ZnyZZqs8ZmwAx0bSJoXG5vMPJqs3p0j/Jw9JBnWLZq8XZiURphEEQADswVAYwFAQOBwFCwVgaYCAmFADBzYWVPRM3HVLKFzKN0gqUzemZ08y1KNesWma1u3LoakFNh3fx+zpihGmJDu/TVMLUYcyLB+zDTE/M1MgwxgQCTATHNNNW0U//7cMQMg9AYfPgPdylB/o+fQe7hKIkx/DKxKGMy0GoxzTkzcQUzPL00cgQxnZE2mVszgdQzBtM+2AUoKExLAIw9BowtB4w1AQwBBdwQCAxgcCaM4YBCYYkcYQhmxEb0NsmWO6CQ7cnlzmGVwfbmMrP37m5XO///yImYwX+swEB1zFWAWMc8awx9hSzC7C6MewRQ0GiZTadBbMQIRAwOwDTKlXTF1CTLoWjNlbjABMDFJpTCYtT8PIjhwBjDoOAcWhhEEBiCHBhKAwCBAKgqYCgQEAE10MAWSgU5QMG7DnqBsEbG9bNYam3/ksqrXI7d3nQ473nqxvWM8fyYgQolAAMEiHMj0fMTBTM7hoMvhYM9yoMQfQONUNMoiqMESlMJ8AIwfgbzBJBwMMUUUwjAUysDkwNhdDQWDAP/+3LEHgNPbHz+TvsJQeIP30nu4SgDEBEgBhMCgFkwEwEgMBaYAwBCsZWAQzoeAFh9oDBosWZZ0LTk0NOtK5evtb8vns4frSrDV6rhn3mX/zKODLkHIYMQCZgYhqmFwEcYzALBhAg4mG8CAYlrfxg7BhGKuICYF4LBiUM5g8BQMJEzID40bL0xKLYwMmw4t98yiHgzdD8CDkYIBekWYFgqVQAAoAMrCArac7zC5UWADFYMl8ifyiVpZWwyXwywCVyOzey1PX9V/z//1H/TAAAI4AAETSCErTTotzbsTzLs7TNkMzIS0D/pmDHkmTGkczAbByMI0DcwRwAjCZGUMH4AYwoAJjAVFvNh8TgwgASQIAgYHQMpgFgSIIjAXACFgCYeVgMAQBqILBBYAFpTPXTJwz0sdqHWvJOiSP/7cMQ2g0+4fPsu+wlB2Y+eye7hKIdobk7bu6z+13Udv///8x+mpDCjDRMUgCYwUwpDANDLMGcOowyg2jOzJmN+IQoxdAhzDyCdMICkARmmCgImaagmVALmeBoGE+hn+zWGW4/GFgpGG4qFA7jIXiwhLbXYyUKAfF0BSwCg46JXxma6jiKft27aeM5Fnpj1q9Pd/LDOknsP/907tSpADB2CLMPQNoxExQTBCD0MLUPlQwxUOHTr4OtMWsSQwjwjzEJI+AgbpgECSmL0IiYPIIphSAIjxVJu+FmmIeDMYRYOJhPgJGCMBmYB4EpgSAIgoBNEhpw4Ak7jJYAjTP0bAkOG4Dzjj+kISMEUfaki+/1hnhVxgrX//fsv+iBgajjmG8RwZrYgRjCClGBKOgYxwnZii/hmhECgY3z/+3LETgNPqHzuL3spQe2PnYXvYSgNZheg4GK8BOYSgNJhJCIGCQUAYCYMpgyBvmFccYamYOZgDBbhA8RMD4YKYFxgfgWkQDqJCMsFmAUAWrC2VlqYMsCswKppandmgl6WiSMtrfH8prP+5f2anP5//TUwVAaDD0CMMJweQwjQ9jAPBtMvkZk1ysPTdxSzMVkN4xXBYjFLFDHhJTC/BeMYkdUweAJTDKDOMWMc020wDDGGBYMJ8NgweQSUEBgTAamA6AqWRDACBYC0OAebm7ZaFbzgraK/MkcnCWwIl8pvUlUkoMovLcua7lE6L9/rGzQgwLhcTGACZMPoSwEAXmNoDKY/QtJpKfGH4mMuYdw4piNgkGMMBmsa8mOQmmd0OmT6tmD7PASyzt60jOIOzEgHjGAnzKYTTBEOwP/7cMRkA0/EfOgPewlJ4Y4che7hKaAxg2AZECwqApaCgaQLAE8CM5bM3BjTW4arsXJTj45+WRmmvYyigzx3qryX6TVVMAZAtjBIATMwaQB5MB7CmzBlwMgwVcG0MIsQsjIeQ9QwpA7zFxFcMJcBgw8QODBTBGMGoi4w5wlzDcDdMNgHQ06iITGJC2MCcAowBgYDBBAkMe3O4bQOeswgMSROo+8Rd52mMDQuRvhHbcWbq+dqhxm+WrEsAq7n7PIBgBhcmCsB8YaRRphEgWGMiEuYCojRn886GkoJEZ8l4ZoCQa8EmZokiYXg4ZrmwFx5MBQpMvnYP9XXMFCJMVQjMDCRDhKB4o/AEVAwQEGjoC+0AJZ9Whn4OGBTTfNq/EYmmFvf8vuV+3QKIrtLdaoABVmL0GMYzAsRkaD/+3LEeoJPGGLmD/tHCb2MHNnu5ODaGIuDSY9As5uSpwH1AV+BmHjCfE2M2ZQgyTyBgADSYxJWJiCCQmNgEEYgY6hjqo8GEoD2YAYNRg4BtGA4BKdKeCuwsPZ8ieX/WBLiIPqfGQCyVPWoTCI7C4S92FBjSfjcv48++FWulxdwaYAgAdGBYA0Bg+QY+YPOEsGBOAxpggAd6YPSpJmSmAyRgUoBYYH6ATmIKAeYeQmBhABYmVMFaYfQDJiiAxmLsPIZoiwZj+hhiEAwwIASxgA9WQwHgGFBEbEQCsAxhiKy5VXNhEKUAbzyCVU0AxqeszFypzeV+1lUxp/t1eoAQGKQAAwLgljEMBsMhsagwog9DDKAXBAThoRXkmn2R+YLwbhiKDKGPmKUYbAsZgeBOGLuPAYH4JZgdClGJv/7cMSYg87UbNwPe0cJ7o4bAf9hKeN4bVoJ5gtARGA+BwYAYGRg2gYGA2B4VAGwMA4UAByVWFyXtL+xAOqqsAlPplTVneeFaleIT1bDDLDWe/ufoMFUFgwDwxTAlClMAcW8xICNzCmCZM3pz86SyWjJYgzJQNjRiDTAoADJ0kzRIwTIIsTSAdzETNTQ7cjJADDNwLzDUJjAcIFTgLraA5zbN+2zTmVJjNTVmguE/uNS6XNBnPx3YuXbOG96rEXWOs//1f3p///7v0P6qgC4AFgSzBcDvMO8TIeJiBwPBgXhhGCO5QbAYRxi0J5ngVxhyaJkMDhh2HBieeIWGQzlCgwaOM/SmMz1A8xgDMAhMYWBSNZLRLxsK9a64KlrDKr0srbaUz+FmWtJbXH9739l1bm1ffH7f3JV3fv/+3LEsQBPmHDbL3sJQd4N2oHu4OD///X///fpIBBgLAWGCIHaYZgK5g5ATmCSC0YeIZBjkq5GU6LUZykMTGUYWjMYijEYIhcYFhIYNgSZDhKZBPMcfjuNBEUEEAhFUZJwSdMl9JaOKz5DjqhvcvHsVxjMbjCAqV6+9lyLbLv3a0X6ESHnjmkrTgX6ewW628bWpy6aAAAEIBKAAYVGgQJzEA7MHBAeERhQBG6YsEF4lDMeEoCAUYKgI6ZVAYEguZjC2ZGtMcWpghOAQLKNr1LwVPu2Wuurc61Zm1tOXWe/o1tDZJ5cXoLq47k/vbkMSqQ57UHqbUISVThclJqqsAa1V3dqUsXjENcTVSBUCQHmLDZKQCFtO+lwC+DVGKFZhA8Ck5ACX2THBAR54Dl4c+jQuNtZdZ7rPuOGX//7cMTJAk6AYtSvdwcB3graIe684Jd3Kc5TLcMqa1j+V2z++ZfljKYdvVqa/VlNNTWpkJR7VjzOVVd5NBQlGc8z5NIkUcNIozLbzkcqq84/8kUcf1PnK74dLEkq30DAFGtNIonJMclvNIy5wMFJGkUZk4lppFE4ldVr+qreaiclZEjO/scSJEtxTEFNRTMuOTguM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqCQACQKKEgQswmgpKTiyiyizTjSizDzDy2eLzc/ypo0osoCEihIoDEA5BDcqWco0FBgUUBgQsQLAzjSizDzDy2drzcqpo0ov/+3LE5QJOoF7PjnWHApQz1oW8mbkoso404so8w+GdnZ4tv//+7VNSUWUWUKEihIELECxAoSBFmHxcNebNGlFmnCRQkCFiBYkUJFAYgWIFgZRZRZh5h9VVVUUJppI1VUxBTUUzLjk4LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7cMS2A9IFejpDGM3IAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",dM=Fs(Ze,bV),fM=vs.createLock(bV),zh=new zs;let X2=!1;const mf=()=>{X2||(fM(),X2=!0)},pM=n=>{zh.audioBufferProperty.value===null&&(zh.audioBufferProperty.set(n),mf())},gM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),zh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),mf()},j2=Ze.decodeAudioData(dM.buffer,pM,gM);j2&&j2.then(n=>{zh.audioBufferProperty.value===null&&(zh.audioBufferProperty.set(n),mf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),mf()});const vV="data:audio/mpeg;base64,//swxAAAB3BPLHWkgAEQCy03MPADAYAEAMYCIAZnV5vYJv2ZoxqgRhBhkBBkRJhwZa9g7/tbYe1+jC4beogQMZ4Z5zn7mgQQdxOH//////6SQAIzbNJJdtgAAAAAAHjcV2B1EBJLBB4wV9rCWp5eq0EHE43FpgLhkjdNEqGhFqhSQlQ4TwqZdZ7fN/Hm6YKiu/33NoUAACApAAAI//syxAOCSGxzQ123gDkDjCZJvLDmDQ0HhMRgBVEjBws2OIM9Cky1VU0REAhgK47nqWwHAkIYcB7ePHvXeo2cV1nG4uL6rjXjzXt951bbjQs/hQuyxEeFQaEGUgRohuYvQkhIfrBnlFyQoUla/qMye4qGxUqjhxTJIFPCOfamTewcOH2SkYCFVa21OLZrySygx+bV4B1xgBhA1DB0Bf/7MsQFAAfISyw1x4AxL4ssNzGAAigYRigH0YoI18mGQKOgZ+FY0UWnyRsLJgZYCShStOpdQYKdeV5/q9jbIDYPkLAYtiTETvrZLIYEb2u2uogAAAAAAhkChusjjbfkXleOGpiySKjhjUIlMla3JEsHQqgBs2ns50DIPtDIgjJE46JnUPRPPPOG5G8/yKxQADAZFTP1KgAAIX0AGkv/+zLEA4IIRJ9DPaUAMQuN5o2tmYqinck4ucZbhxEBHFls3WFfhr6dyvz3zgxEmEABChAREwQIwJRfc1jx6QHFWNNqQkrG5wvNNbdf1b//kxUACACHIGAlgmUgpccbebl+BkKCZXQyCAwpKkwRUzEk7AIAwgTBahUNNHisAuFoYmM12rXbbUJ2v5Cwa++fDf///+mgDERUoJgUemjg//swxAUDSExLJi3phxEQCmQBrbx0BkCOdSyG/xxiJyFwYUOAZiABRh0Zh64k8Pj7NAJTjWFStFgyvxBK5IhTLDstCt9Y/SAqpLqiYU1gRqYoIfCMbtwYtoG77YMaQdBGoPhoQOPIxjIsCrswBnOHTzqNAI9TIQEiAQc0oSX9JssKWBt5O9HJA8fEWBHxeXEQzXUAKsQAXwMjEM3O//syxAUCSDxVLM1lJzEbCWPFrmxBNqHM4RC+k5ZUzwUcEaSmKZZCdwJRBNZkJiwDdFN36YdSqdqUT6pYDZ5ScxSDVfZPSpL8M//b6NxDNtjDhTpxDmMDKQMMw1k08tNDTxrGMKLQxRDCMevDKlACBZi1WYsoiEOBwEwdI9e0vdBptNKZfgzJsVH29qtOpUET8k9v4mAAAExTEHgUKP/7MsQEggfQUyJNc0QA2AklmY2YpukjMG6N4KPFG4xmOjdBnIQqBgcbgGQGmcNGdaHtBQplqcsNdnbkroa0zXiUXxyr9wz/WF9usagQAkSHDHulGU3DjA44xIgQwADplHVAGUl7G/MbPAcXSMAgRGUSoN9OUp+zGuLf///V3//+ugKcCSTofFaj5oNcoyUgyJfAIDMwsQBGeEBQiGf/+zLEDgJHUD8UDOksQN6F39wxsAA60sBDGHr5bR5oZBEMkscKhnEIJPCh6j//////+n6AmBgKjhFZNEIgmCyGD2UQjAVEweC2peqxVyOIpL/WDXZ7cNcFTtQdJCEFQVGLPFgaUHJ6dhojDlVttOCJU4BB0qsXplV/tncqptv/p//+n//6abf////9QTTTTRVV9UEJK0kIixWmqoc///swxBiDxvgCi4CEYAgAADSAAAAE/1TTVEWK6UxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",mM=Fs(Ze,vV),yM=vs.createLock(vV),Hh=new zs;let Q2=!1;const yf=()=>{Q2||(yM(),Q2=!0)},_M=n=>{Hh.audioBufferProperty.value===null&&(Hh.audioBufferProperty.set(n),yf())},AM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Hh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),yf()},Z2=Ze.decodeAudioData(mM.buffer,_M,AM);Z2&&Z2.then(n=>{Hh.audioBufferProperty.value===null&&(Hh.audioBufferProperty.set(n),yf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),yf()});const VV="data:audio/mpeg;base64,//swxAAABriDQRQRgAEmkW2XHpAAAJQAAHgAAGAAAABIDu4cDd3/r/1wAAAAAARC/9EREd3d3PQDFg/D/lAfflAx/BMH9QP/ghBDaMSKQDL9Jl8zrxkLJ1driXbAMCtXKORoVLbBiwvIKx8m21HBZEfMq/0x/+KVG0Sv/////Uc0dO+i8Kkj3feKlhICwuZ+X8KkA4p+8BQpQAET//syxAOAB+BfSzzDADDmiiFBjAzgIQWVhDQDISg5HQzTHx2LQbHxpFGUeaRR9PJpFGqnPX9VQTICeoDA0eWdqBpYb9GV2lga/wVf/Boz4EawwCWbQYHfhmyxUqUCkE48QHSMRwuglOIhIgJrr1hocKgoLSa/2MFBBwSJBQkaQDIkNVC6Xfi9TEFNRTMuOTkuM1VVVVVVVVVVVVVVVQ==",bM=Fs(Ze,VV),vM=vs.createLock(VV),Kh=new zs;let J2=!1;const _f=()=>{J2||(vM(),J2=!0)},VM=n=>{Kh.audioBufferProperty.value===null&&(Kh.audioBufferProperty.set(n),_f())},SM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Kh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),_f()},$2=Ze.decodeAudioData(bM.buffer,VM,SM);$2&&$2.then(n=>{Kh.audioBufferProperty.value===null&&(Kh.audioBufferProperty.set(n),_f())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),_f()});const SV="data:audio/mpeg;base64,//swxAAABbQXJue9InEGkeow9gy2AWSSSTAYoasSAbQuZ2IxjE6OhsMSZyx0576hvOP937/yhc4f0+H8LGFLHEz/XACUm0rv4BAiekAH6Jm5k8ECY8EgUIZ/AWGETh20scbX3gG7mZV3GgAhQncv3c4W4c9K5vl8EbDh9vE4Pl0bhBdl1QI5EgYIAkvMcggdSAIDGiYaCi1TJEP3//syxAuDiiyfQi2kcoEWjupFl5kgnLqM4ZI3NY8CQdRuXdoWvuuoGEFJjQ7a8upTGkSD3r2gYuE8ECDCcjuVOucc7PFj4P9PekLOItFR8vjb6SV/gLubu4jCdBDBUZqEFTw/hQO0ybCPVq3CQyd5UHRCwsCEH0Q2jEIIZNfXX87QzJsM1BcYADgQAD46ZctK/iAM1+rAAABG7CPrHv/7MsQEAAhUV2EspMpBDpFtsPMN3ulsDrrB7ZQEtNXcZW2+eAIHA1iQRS9ljECBZvLtnu+S6a0YJB+JgA6CDaxPlVGWHQ8HCBR6DCHeop9TISRiRalWFgH80HmEgJsLEZSTTztIStqpXKlQ8kZdEvWy8/YHdL2UHbB5ExRrSNWBrmZcZcEPZJL6UvqfSVDXar//BZXAxySNtyOOAMj/+zLEBIAItGtxp6SqsRAR7HT0jS4d8QmJJZG00FqAYyyFThGaVJDhkyhEHLIVsIpRT5Ssl3QDJM4wO6FDnlUhth1ElXKmXHvDqFQ0q1d5VN1FDjbkjTkcbALCLomUkUyMYChZlETMFQ9IXGnxGCb5rKyyHa0yhr8jfhbAY0MMamoklKVfb/Chu1FTLVMmzBJmtJ63PVoASmWaSySw//swxAOACFCLR6wwY6EPjiUFjRgoASFZYJYluFJiTQJCKPxyWSbCVDbjImuKZcwigTEdWzMMCOq6gJHJt0opTbvnSzCnRRM4GisU2ZL21TSX8JwGyJ1hZsTyoi3rd1yuVAdq07U9pFBBxQEHNQFHBVEi558+dTrbqXNvkmfcf9RQCtDgmnC0PPQXGaQzhe3o3evtdZUlttySX9Dh//syxAOAB/CXQ4ekZbDzkKc08wy0Wm4WA3SxrggemjmvrLhYPMwbgiQojkTMANwObSCpMBsRVwWZ03B7lJnulzuVMH3jG94r//vrv9DwI1K5XLM2UAR0cp3AuyNw3weQIg517NTTJHBXYkqjgo8ISOcjM523jJ9g1NmhoJtiVyLJKhB5Wi//Tdr9qgE0i2422iBAFsxlsAgejsEw6//7MsQJAAdMYTOnsGGg5opk3YMM2AMNO5+lxBo0cc4gsbfEqUFiQY53+2jBwHIGwgfJbxsYm3Z2UK7P//0gBBSJAoKalowNRlKnpTAkNJysTRiR23F8rIPdNBNHvoJIJDyIPAuCbzAXFUx7FEd0cWU1ZTd//+/qCLRKSikaIMATpvhKx1LK+hL2NEuYzCasqVFKkCuijuwbJkO+FGr/+zLEEwAG5Gczp4RpIM2RZzTAjAQICZLT4rfEYug+7Vq//0f6tYJTcdlt2gaAD05A3UhQo0dZrmawLqX/IKoI1DC8rt4NGcleF1HLcuOR0TbQd/98bsfo/uoAgIJKVAFYD8GhU5BgKLBU6eDdbu/RJej3f6k9RX7NSP++3qpMQU1FMy45OS41qqqqqqqqqqqqqqqqqqqqqqqqqqqq//swxCGDxHAPGOekYBAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",wM=Fs(Ze,SV),CM=vs.createLock(SV),Uh=new zs;let eb=!1;const Af=()=>{eb||(CM(),eb=!0)},PM=n=>{Uh.audioBufferProperty.value===null&&(Uh.audioBufferProperty.set(n),Af())},EM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Uh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Af()},tb=Ze.decodeAudioData(wM.buffer,PM,EM);tb&&tb.then(n=>{Uh.audioBufferProperty.value===null&&(Uh.audioBufferProperty.set(n),Af())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Af()});const wV="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAJAAAIpwB1dXV1dXV1dXV1dZmZmZmZmZmZmZmZt7e3t7e3t7e3t7fDw8PDw8PDw8PDw8/Pz8/Pz8/Pz8/P29vb29vb29vb29vn5+fn5+fn5+fn5/Pz8/Pz8/Pz8/Pz//////////////8AAAAATGF2YzU4LjU0AAAAAAAAAAAAAAAAJAaRAAAAAAAACKfAKvQnAAAAAAD/+9DEAAAOsE9AdZGAK8QbJPc/sEAAG+3c2nDeiOKI2kELTFZOe88bTlVNYoyijKIMQAuIoIxCHLCJXfiAAGBu7u7iwAAQAAAAPH/+hH//+Hh63//h///9Dw//wAHfmHh/+AAH/HDw//AAB2YeHh48AAAAARh4eHjwAAAABGHh4ePAAAAAEYeHh72AAAAAAgIGjKTaAgAAADF5zj41poBnMb3YuDrZ4lswWUT3NCZKkDBJA0IwPgKfMOfCCjBCwXEwfcFTMAZAMjBZAUkwToD3MJ5BHTAtQIwwN8BSIAB8wl6OBagd3mygBhQ4n2aSoGCCpjg+gjBRXLFBUc1FzFBNYIwECT6EgFQMwcYTWZjN8zetdqYr7OMFgASAmvSFbsCMnsyt5YaiLuxmtTc/Ln/zm//y5y5WusNhprzDsst/vn/////VpZTWppVVpaVWt/g0FQVEQVDSu75URBUFREDIKiK5SrP+FQVFAqCpYKgqIgqCoiCoBn+ANTNR9Qnf9QDAyCTMLwPkxiiMzLantMFUFgwBQFzBSBZMAwB1N9D5KowGweiYA8hABLigQAMtuqACgChABghQCoWEwjHHYoeynK7nyOIUWogYdzEPeXRdf/93EzSTPHHzdMvNVURcJrMu1Qn/yNHvOCiTPVcKZ4Jd9aABgZgAGFwCOYpoYBuSTunDGJWAjEDwXoedDHUcykRMOEDRvUyRGWss9DxDsKiq+hoGL/NJcyHaV/WqS10Lj8m4fUgtKwEoz9xzkxTEUiPXSxWZg8dR1MVNFsKnGcb1jVESp/JeehYdKA2B2gsgofDp8OxYwIUg8P0rqp1pfay9SxSMKU/20LvtQgAGPd/rRAMCcC4wNgWTA1E4MctvY19w9jCOB7NS+MOCMKOeAEiDu1gUDLJKSXk1ouM2Jk0RipZHIGzYkvmJZaBsU3Gzw4XvWPBcfkXD2A4lzobX9zU1HmDpxrnji+QYywuly9fWuBN5BIJLLDAbYIBQ4kHywjcRUZY8cHiRAigzC9VahyUolPqupX0+gABK//76tAAEIMMQgEzERTRNAOyvIyKAxHYtOHQKqAwZoGNMV2jipUhKanaYEuqXNAKDJEiQwRbUxSgD//twxOOCDkjjLH3kACIxlCNd7bC8SRNKXVYFRdFKV+4NWSKnVBQOlXSQdGLOhMNRFv8e7///9CeGqkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqv/7YMT2ABGQoRtPaYVhfw2i9cwkrKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqTEFNRTMuMTAwqqqqqv/7EMTWA8AAAf4AAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//sQxNYDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7EMTWA8AAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//sQxNYDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",DM=Fs(Ze,wV),TM=vs.createLock(wV),Il=new zs;let ib=!1;const bf=()=>{ib||(TM(),ib=!0)},IM=n=>{Il.audioBufferProperty.value===null&&(Il.audioBufferProperty.set(n),bf())},xM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Il.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),bf()},sb=Ze.decodeAudioData(DM.buffer,IM,xM);sb&&sb.then(n=>{Il.audioBufferProperty.value===null&&(Il.audioBufferProperty.set(n),bf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),bf()});const CV="data:audio/mpeg;base64,//swxAAABlAhPLTAgDE1De+/HoACAH4CwkCAJDo5gDgPRksn2WLHOB8EHShd5cHwfBBwgBBOJw/UCAY/lAxWD/4DB9+CH/6XQjMTIIcYUIQPQIRAIBAACUIawkYq7IQ/BawVqEc7mTjD+OFygBAnHbHq7UkLJ8aCnnrZlPpg3IkRJBgPH/MCQCI985/yAnHAAhmv3lHuAgAgAxJF//syxAOACHQpa7zBAAD8EunxpI3HUCEZHQlA2EYuDsSjE5EkSQGhUDYDxOARLoiBmIgalVgq4qWeWBqsNYKywNO+p/sxFyKwVOlXRFDtZ0S86oQ0C2W+wBOmlaWuS6+BIqZMz+AYy3FuwBkKXM2idVoKlYwUd/oIGgsbLpEbaCsmIyZRtbw6TPwj+mYmGr8QqnGHBLo3LKAAxKabZ//7MsQGAAhsl1OsPMcxAo3mpbCaAvIuuQRmW4WNHhDBJnoBORIlh+I9dvGCTCKP0kzo7rHHTi87diQ2XqnRN77y8lnKUl8zf+X0Fu0iCDV/9AP7el8Cw8raZKqiYShe+6bzYk0zXmEuGnBDcQhyRzPeI4Jbsmj5OxzZVhSX9adVU4Kk9r9esE3etv+/6wUIg3Wm62nA3Ab0EIcLUQ7/+zLECABGICs9oemDMLwEZrQcvFYyDBCUCgUAwQCUSvgROof5poGn9O7o70P/X9P/T+360+lAhIJVtyuNDljXzM7Ek0fGUB/ltZQF8iD7dBcVTs00f31POqR0/V/q/pjEe1z3jyAAQRBHGmSBEEVK6QIYH2miQZKNfgCVtiH9vVLp+w7an/d0jdUx9VnqZIJSvFtsaUFKKFBVCzoe//swxBwABSAhLaDl4nCsA+a0fDyG3vbgKx5OhNXyuPYt7kJJSg9B6heqxP93q/9P6IwSQ8LbYIFBVUF85RwseJPX6+Q7qIq7f/8ayokh7P//V8oyAABbhbGEIBBhOJgEGTBx6KjUiosS54l6y0i3jOz/6f///RVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDWABEQTMaCF4HCNAmL0EJgGVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",LM=Fs(Ze,CV),kM=vs.createLock(CV),Yh=new zs;let nb=!1;const vf=()=>{nb||(kM(),nb=!0)},BM=n=>{Yh.audioBufferProperty.value===null&&(Yh.audioBufferProperty.set(n),vf())},RM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Yh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),vf()},rb=Ze.decodeAudioData(LM.buffer,BM,RM);rb&&rb.then(n=>{Yh.audioBufferProperty.value===null&&(Yh.audioBufferProperty.set(n),vf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),vf()});const PV="data:audio/mpeg;base64,//swxAAAB5gnMzRhAAEHDWyDNLAAAAAaAQAu7tjAQAAABgMBgNNiBBAWD7ykMQf1g+D5/qBMHwfB/iAEPWCDv+o5wfPg+8EAQBMHz6gQB8Hwfsu2uWDrkw/a9xgUaMwFxxwCLsWS7MHN7VJki8fVT75eTqpn7/Xt1QxW//lJVbnfNuFRTzwrLn/5GVBnKMy/FVs5dTYABARKCMRm//syxAQACHBHWZ2kAAEJi+jxpg1Qlry2AYclVGyMwNoFJ29hqHqa1TRqRMCoetKstcqUzHBxQdCJmVcSJ/EQdEo0FXSoNLGkav/ljqPtEvjAoAE0zuEoM3lMJlLY3Uj65AMeMzQN6QWeLFdCcxLNFy4dBVXVfZ1L+gIki4KPQVBb4dERU6CrsFSoaLVHv/Ev9Hw4ANdAAG7VBBhVdP/7MsQFAAh8YybVowABG49vdx6AAm8ODBg8FDy9pmwIBsHPVGiPMueyERxZdIFnSpkzI8fezb+0z6OJVv7HHw7XBWdXwa6/y34l6sq7uitTjFTEgsFYrFQqFQDAGrQXMbpbb3ZGQWPWvTnyyeKKHgQ/nvlUf/u74oOHp/8v3R/dl/UcSXDz+kMBEHI0p5efiDJqb/64foFiBSWqB2r/+zLEA4AIVDlivZGAAQePKiWmDNhtwTYmBYyxnJdmZwmMtZ8ZjInEMMpo+VFWESqmhsWBoClhKKEhCW5UNPCsFVgqImyWS6KTAhEUrYoO7kaAWIJCwQzbgl5XrFBB27xoQwfnY6kozJtFz0SgICsWM3VIKWs6qr0tgI15/pQomHhblqjycRUCWe1dUOpxFOiJ/ooQC+IEEBlVdh0r//swxAUACGCjMy0kSsDoiCAA95gpQaBI041ceup5PSlsv5QNXMyixFLVkTXWpYUBYy/lEl4YCdWlLoZ//zGlKUBEhV0SiFT+us7WdBXqAbQ2hdxgDfH4RQsI+kgo2RnWVECiCa0TrUSNjalrUVVKyg0yapYqqVlRTNVLFf/2P/1qVadsTFKlitVMQU1FMy45OS4zVVVVVVVVVVVV",NM=Fs(Ze,PV),MM=vs.createLock(PV),Gh=new zs;let ab=!1;const Vf=()=>{ab||(MM(),ab=!0)},OM=n=>{Gh.audioBufferProperty.value===null&&(Gh.audioBufferProperty.set(n),Vf())},qM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Gh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Vf()},ob=Ze.decodeAudioData(NM.buffer,OM,qM);ob&&ob.then(n=>{Gh.audioBufferProperty.value===null&&(Gh.audioBufferProperty.set(n),Vf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Vf()});const EV="data:audio/mpeg;base64,//swxAAABswbPzQxABEQFyzDMlAAAAGoGRIdz0AAARQAAAAAMCd5QEAxBA4sPlz/BAMfw+ooc8EA/EAYKAh/qBBYfwfD4jB/4nD98ZXetEKIxIqnuursF7pTGkY4dNYcaZhOjzgxDNndb75ggdCsIvV3qoeM9HIX215a6Hftuc5FhwFRhvuJuhxbMPp+ir0KlAaCTHVtZuCsLISS//syxAYACGhJXR2jABEVIGmw8YpieZwGg6y5/p6bf69uls4kMS9HVvrXl8hI5WPBY8FawqGh3PYlLA0HQm6ZHvUe/4UB4ChNzls1AZIAAxJNQMBOy4KAeSsL0QgRcxFInzpyhsQ6tvdvaM160ZnbY/2bY19dTlJVJmhrQpT/Vf0eVjfzG////6PMYzmtqJdg0WqADvRwaGDBgBO5T//7MsQFgAkEZSA1swABDRYvdx5QAhmAEZHdFc2HHLBy/LcmfqWvq1yftVsQSJAxzSi25i5w6qqvMy/cjgNSoKu2Q1LHp1S4NCJQsHfLUSINPxK6oxocyIhmMRkMhQAQBuyhLerW2u5zoV4af2nULcHzwOiPxQjFU/nvIyflMKARabfnQqGI/v/FAIV6UJnPAgAca//9NZUgFEnVWuP/+zLEA4AIVL1vnYQAEQkIajDMpMja7T9a7DL+uzSEg2RRajlNmUzFPCBtL7Uyoa/iVlabnj1+Pi9f61X5WuJ9V1XhkOmtYltLGPI1//8s/0PMAKmLuWQPy0Hrh0Uy4C5MCaWoC5bwOjrQpVOQIn9JNDksr2zEBLvAp3LCI8Is9BX1FTsS50j5Us8OCIqEg73ZZ9QByyIAiddlUPU0//swxAUCSEyXLMywatDDBOHA8zBIRfBtlFDU3P7EItHsWE51WgaTVpJLPMzOMYE1qUSth4pRSd1WkZLqqrnGPUobBm4oDUDHol//+rJBUlwL0rYuAoOSuFITEsfTp5a46IhKRBQ6FQkBQCWJESR0KhIeNASKGnsJgJCf///1VUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVV",FM=Fs(Ze,EV),zM=vs.createLock(EV),Wh=new zs;let lb=!1;const Sf=()=>{lb||(zM(),lb=!0)},HM=n=>{Wh.audioBufferProperty.value===null&&(Wh.audioBufferProperty.set(n),Sf())},KM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Wh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Sf()},hb=Ze.decodeAudioData(FM.buffer,HM,KM);hb&&hb.then(n=>{Wh.audioBufferProperty.value===null&&(Wh.audioBufferProperty.set(n),Sf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Sf()});const DV="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAEAAAE/QCbm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5vBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4P////////////////////////////////8AAAAUTEFNRTMuMTAwBJgAAAAAAAAAABUgJAXmQQABpAAABP2CPnqIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//ugxAAAAZABXJQAACjSBy/7MvJBlbA24AeHxx+Z+DJ48Acl/O7e/c+wAAAAAAAEggodS1KhDIMHY9Flj8OAaLhIDnqje9htgSxoj0q3Fksjnr007hUgBFiJkAAAAJRul9HpGarkErUNUSqvEO5RRnr0CYblhVBIAACITTDJN3xrY6pMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpcJoKAAAAAArSgBAzM3OFUFV0GH4AAagOAQ5P8ZoVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sgxNoAw8QpV9zxgCg6A+w4kAkEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMTlgMI4H1/EgQggMYHqUBQYBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQxNYDwAAB/gAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",UM=Fs(Ze,DV),YM=vs.createLock(DV),xl=new zs;let ub=!1;const wf=()=>{ub||(YM(),ub=!0)},GM=n=>{xl.audioBufferProperty.value===null&&(xl.audioBufferProperty.set(n),wf())},WM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),xl.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),wf()},cb=Ze.decodeAudioData(UM.buffer,GM,WM);cb&&cb.then(n=>{xl.audioBufferProperty.value===null&&(xl.audioBufferProperty.set(n),wf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),wf()});const TV="data:audio/mpeg;base64,//swxAAABognHnWRADEriei3OrACCEgYAPOkFXghY6uD++Piw3kA4B4y7hchMBxIxLKSksCwfB8Hw+7wfB8H3/E4P+GP/++D58AABoNsRiAAegAAAcAAwfGEzHKEwATU0FYIw6Dg+OLEOCqwYUAazcxYAwgAWZl5g4CTyjQM3o0EQLO/PjeedH/0g7/quk7v////9CoAAgKS3agA//syxAOACFhpYb2WADkFBWUpz2ROAUr4AUY00DNWPwkiueFpjWamdXncJm4WSUvPYHtdLyIybUkqNbEdOAeIJqJS89odMGRdRGULsKEKKu9sAAFgQA2oDCIoIgGYfBxqSpmFgSkaq7FxnJizGCsESGsoBS/52SlqFCkhXIYlBMPwLKiSRYVd1f///7f/lUfvy2gAAL45ZHAEVS5wEP/7MsQFgkd0HRVM9wJwooOhqMw8TrAOxggWZrdB4KswIKoWwjoMDKpkDpawRH8EDMvQbb5c2fQ5IXBwEGakBD9/3/5ub1lQm4/cLYHDTARtPRS+xTotNKqDqFAVBUFeVBUFU4lBYO8sDQNB3iIGqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+zLEFwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//swxFsDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//syxJ6DwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",XM=Fs(Ze,TV),jM=vs.createLock(TV),Xh=new zs;let db=!1;const Cf=()=>{db||(jM(),db=!0)},QM=n=>{Xh.audioBufferProperty.value===null&&(Xh.audioBufferProperty.set(n),Cf())},ZM=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Xh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Cf()},fb=Ze.decodeAudioData(XM.buffer,QM,ZM);fb&&fb.then(n=>{Xh.audioBufferProperty.value===null&&(Xh.audioBufferProperty.set(n),Cf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Cf()});const IV="data:audio/mpeg;base64,//swxAAAB2hBNHWcgAERC69/MPJDBoAAAtMAQkIoPyFQTJPM0NVYzRy8xtWHpkcxxIacuJ3vlqjpzPGMBRuMl4kQ0yrG38dh/IxSHA+Ud4fETABABElVYiJ4AAAAAAAAeAdHFiQc0wxqaGxfhl+WkXVkI2k9KiBoVzKRtDAElVmeqzlTNtkS+ZRMG1PvI/W94/8ELbWAAAKoJCoT//syxAOCCCw5LF3NACkKh2SdrfVGCg3Cg4Dj8ZLARh41mQxkBgoIjEZTBJjYImACgZ3Whtm3GSfKawL4ECw4WNm+OWqNGSDA0WpZbZ9C6EEKACABE0OQGPHNUOioNqeFiRxh4iSHaHIzHSEHQ1Jm18aQhHVbAGKIIGHgDI2DoEkwGpiSm7L+3Ke0FOb7v////5YAAD0BgIAI2mkGDP/7MsQFgghcPzNM64Zw/QYk3a9tRtoYE52cH2GYQxknpylpgYwBvmhj+eXdR8AmmfACBiUXVYPBUD8AQFVjXou6mqSrKnaY//2////YEwSUMBfK8BUeuUwFk1FU36M5CIHFkGAKBBjYwHg1zDUTtMZwHcHz4KD0zG7NbljlV7oLAI3vKqf/u6v/7v/1qk9RWgGiAmk5gVFlBg4jA27/+zLECAJIVDscbXdqMQsJZSGu6Q607qEyoUsyYQsa4WZFjwf3IccSied99GKhYQEJ6KBkQAznesavLnbVe91/L//2dH+W/0ATBpCfQQLC4JXplcp6bpg3hwlhuwpQBZisgxuJFRnRzxkUDJp/Jomgksp3QjjMwUjuK3tvK4pDdHhuu7cXpLf///01AGVcIIA3ZWFKNMYKFJnomaOT//swxAkCCOhJKu3x6nEFBqSNnfSKl1zS5A1JNNIaTwh0x3ZD6GnMOEYFNMxcI0YBipZGp4/XR/P2V9fOftSo1lR0fuPf/b////tAww/AQ8JYiLcdCEPI14ZQpG8t5tb0fSmmbyXGaQmmV7xn4SVmaodgJIGwu6ipEYy7dHR265Vu39kn/9H//3/5ntUAQkoogD/JlCQFClFzbo0y//syxAgCCRQ1JuxvpDD+BWSNv3UGLMfgTI9WjWCuD73STVYpTDeUzYRmDF8ZjCsJ3cUEaatVwX4a0+u40bVvSOI8VcLRFb/7E9v//9N6slrYEpSIZw1MumYaVGgnoOWRkMOrmDY/HmMJ0BUxOqMwNNMWOwwXAhLFzoLhqNWHLXInTFnd7f9u/7P9qP7UqixpXAIsVcDWHcMrUTGig//7MsQHg0dkLSBsdyTw+AXkDa9wzo6TJIjTHyFT/61jGwcwpXZk+s4kO57Hxh74lUtT8m6jv/6Cq3fq2f/67/1XOWV8SUUEGBkOZAsYVKYIYfNSGA3GDAM4abxLpgtAgGbsKfLnRikHBhPf6lyvU1v5LebiHp/s/V1ft/2J/sRVFoFYAWynOROSA3HhI8RImXoY0h4ZEr4f2pGZNgz/+zLEDoOG7CsibPcGsOWF402ddIYZHE4cDhoDitCwk4YHuzUpDk79+zu//6v//RRAIqOMo1gKQ2ZgaIbdqU7DH4JzCt3z4vIDDEEzDqkDetPRAEJKBb10kM2rVu085V////3e5n//zqkAAUMCGyVkEmrwcItiYjRicmahmZ2oZqFAbg4TEwXylDCHDQDgqyEAhWNjr6U9K57Kf/////swxBoDhxwrGmzzxjDkCCGJv1DW+7///9BAbMGDQKRltkpEKguGnGnBhwg+DJkhj/JImAcF4YeKERhXjWGBQAIBug46RqDymTJ3253//////9QAAAgLrZAIACpTYHJQLGSB085gjDsBjGE8D7VPjHMCTPeo+TNASqLBV3LH6z5L/o/tT/bX//6P7UgSNtX+nGmxYvehgEMjUQzL//syxCSCRxQrE0z3ZnDVhaEprmDWgZMFVM3NDjHRJMXkk6wLyZHFDW+g7VLV49ezholVp8r/Qr//6wAAABbcAAAA6LXY4+6lq+QsIEjGLAqZgi52qDiyVMnI0y0FDIIQQCvFXsMFOQWxJKvzkvJIpCAASxGAAIKpjJFvUBNi4iFEpDNEgF+JiuDqFNJIhYC+F4Xt0jupWUFPRFS1TP/7MsQxgEaMQP+s8MbwtAdd/PeYf0FNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",JM=Fs(Ze,IV),$M=vs.createLock(IV),jh=new zs;let pb=!1;const Pf=()=>{pb||($M(),pb=!0)},e3=n=>{jh.audioBufferProperty.value===null&&(jh.audioBufferProperty.set(n),Pf())},t3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),jh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Pf()},gb=Ze.decodeAudioData(JM.buffer,e3,t3);gb&&gb.then(n=>{jh.audioBufferProperty.value===null&&(jh.audioBufferProperty.set(n),Pf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Pf()});const xV="data:audio/mpeg;base64,//swxAAAB1BHOnWmABEWjO23MPACAM4AAka0C2CViDZjzZoUIKXmGQHLmnHZgZuIghjiBjgxeiMuWAQDhMhMyefxsGZPP38oscKBjgh7vuRIAKJJltl/4AAAAAAAeIQEujEqiqRmMJCES5WG2gJpbTG4Ow/M4mn/Qr2Js5qIuqgsklNZOqlEOMfLXi1GSdQzuEW0dE8qAAAwLYAA//syxAMCCDhjP123gAEEiuWNvCUaBpRaYSCm0Kg6aZJnFNZzqgY+cBgqYYFmJBqWAkHQEu2XFwmiO5lSznWcKmje3hW8HX3bwt0/3XUHQ/5sFAYACqnqDC8MFAAYjK0cc9HHDBpgmZQQhSpXRTUQnFAiSUey+KNyollAoIHkq4CYarC6S3YyUWYjae5ECrd//DlNiAACxKE0C6BbAf/7MsQFgwhgbzhtsFDxHA3mTb6ZItBjJRcHVJgRkcS2mcgBlQ4kyhGWnb+PtLXw1x9GdIJksprlMmS4Cg6y44yjbH5yKe05wYGI/v2JDYn4Auuq25bxHxJsxhAOAFTHWY1ZXPRRiMTRQRuKAOQJOsy1I6WV2TO0w6Sw7LS7gfm9kt6zyIwPOZ+BkYQHFqf/C3p//+hgG5wCQFYWCTD/+zLEBIMIdGkkLfUHWQONZU2+tSrxQUTDm+024/MxgnMkFRN85yMUCVEQLGBASqdpAKDFymGvanI7suWZGZeSHQoo10ND7uHsPDn/79gtWEzPwBSpvpilULMOAU5TLsYQJ4ZCgQ9OwiJIhwZaiyx9mjv225SaC56XS3HG/Z1fwfNN60notpag8MGez2/u//6VAGEm4IBuHC+wVGDp//swxAYCSDRpLu1xKLEYjeYNzRlZUhKGOGCWs0pA08Q6K8x4tJypSP7GoqwEicWBqgRes01nKVlIf053z99P+/0iOm5f3fR///9Yeo0+yXyIBggABwAMUlMw6A1DDFqjO9soQjM898y6I4jYzAJOUFB4ETkVwvSE4xN36KAAwrAce3hDuTP35zIZyYUyDMn+ISyAC3LdqAAB+ahk//syxAWASOxvWaw8zzD+imZNnjEV3JHJkEvdhpKPigJmMTjXO9IRmHkCqmDRKV0S1IC1jOP85Y5MSCkCH+gU0ozUUqNPx272KtThMKOJhxfE5TgmVUjBYXxXAW5sXB65hsAyY00YTHRJGOIapLBEXyyrAEARSqei0NSmHSQ/MpWStQ6L6Im3GvCmsSb/VQ/9phwACuMnDtxuEFAJjv/7MsQGAwhMYyxM9ScZHQskja6ZIlHP4HxIAwAPxmmJhhEGJh/EgkZBgEDYAANr7gthXLGdmFBIAYAqpKM51ULEenPZ/PqtNKhQTIERxwAhyCooMRAK0AYgsiRNABMGlBB+MSidMKAAMja+NcgkUmPB4DgRW4pi/z0r7lTL3mtAoCoCJSTl5o8wz6QWiqx3/t//ag4AAAHJdov6Bwb/+zLEBQBIGE8qbXGIwR8NaSmnshcFWggYaHqGTQEOEZ41iIjI4SMAxo8wMgSAh4CI5iQEBwYQPZZDoLFNxeOBwy8x25B1GfiR6RaiAQapdQ1tmbRXvfpSCabcGCo4qoNLVEaIiIUxwGpGODgKkYyxOJI96yKt45ruMnyxlWKW2neqTQDgdhIIn0oSL0P0PnmwJ9O6SgAAAimCDqAR//swxASAR2xhPG1xLHkNjihdvTFPEpiKw4gABcIXQCEimJjZJrgZaA4iNiY7pINEZ7B2yElTIU2qu13xUoQq4yhd5VFpCRiwDLsEWaepoozJUXWnIcTERUZVTpYMxkOCj0FNBgieh9D7wlVcTR0Cc7LaU/cmuQwN5fCnK9Y+smsQkY/6QmSHAyiWWkAAKUgAAAsuCvppLKVG2IlA//syxAiCR4RvRUztKLDhDWfpvJlXJkEg3k+NKBQuFAEtagUYOQvtmVDLVmD5053TkiO+N9YuviT/LfTXQp2mxoFqSCPM4X1E0nVwR0FAIsOghXOsahIZRDbGwM43kS6lJK4rwAxwCGDcpCWXtpEQ53S1v35WuSjUtQAy0AAARJmTVA8AQOqVoNF3zdAMLw71BQgkAgMjwTQkGxgCVv/7MsQSAkdMaTLs8Qjg2w0m5c0lTgCVz8xnJhCG2pRs414U2SyOm+uNZ8NANeEExBpChMMiwDXAgQQiBQiPKksIEwUGFC4Lkj7r2VWUR4NIzyJ6UGkkqnW2vrW7c/H+of4OqgAzcAGTpJfEADXaDgsX7Dh6DjKYFhZpmAAoDgEYF+gKFTEhuV2/NZ/21pKIRZ9bUlgxBiLU//Ce/V7/+zLEHQNHUGkwzhjwsOWNJM2elOSgTRFJwgCZsX4M8Ey4BGGYWAqYuJyfIDeDjBMHwQMDgAS9MnhnJgUlrzvaptVGAQec6lMQ/3f/6jPXTHReMiqMGMWUxc1k858QWJowORAyihcwxFJBEEAcYEiIZKisXjRJa1CZRJpRjQWbPNYwE6FUu//4kDgOawFnzmmWBnQC1CtjH4cMxyw6//swxCcDhzBpGA10R4DYByKNjmTKvZANJytIEhBhR0LrVuwNjTP9fxs5asiIqWf/Lf/////+tQnIJAGuAaNRprSJykgqQzgLjF/HCsDeTcUqKus9P66P1f/4oZYBGjiY1AXQLGWOYOSMStAB/8FTIsVCgeAoqKt7ajS0MdUhaVJ/rUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVV//syxDKCRnwlDGNh4vBbgB4kMIwOVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",i3=Fs(Ze,xV),s3=vs.createLock(xV),Qh=new zs;let mb=!1;const Ef=()=>{mb||(s3(),mb=!0)},n3=n=>{Qh.audioBufferProperty.value===null&&(Qh.audioBufferProperty.set(n),Ef())},r3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Qh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Ef()},yb=Ze.decodeAudioData(i3.buffer,n3,r3);yb&&yb.then(n=>{Qh.audioBufferProperty.value===null&&(Qh.audioBufferProperty.set(n),Ef())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Ef()});const LV="data:audio/mpeg;base64,//swxAAABpAhE1WQgDEChGf3OiJCAAAJRgWMA3lCIUyXzv3PfM52Qw9nimjE2HsTh+X09sHwQBB10u/y4e//+gEAQ5cP/u//4nAABASEQsFsvw9GFpIAMRiGNLEgMlRmNb+1MIjHNu4KFilyMxQYzAAc3e/P+566F6J7olttvvTZ9lv1/6++U+z1qgAJHLdLYAABaRtXAaLgn8Bq//syxAiAiaBvUb22ADjOA6MNz+wKcSQr2BxEgs/qJ0XkEPODBEPhEBEOh7HwdhJLwTjcKQmIaxUepm3yySi6sRnp0hr1J8lYfUroW0RJYrMlFAAMN5mqFGCchxplBCFCZuwLfmAFg8RsPKaZAGhqJlpCZMCBA+iTjFW///////Xb//1B2gACzEgggAM2IOQFMKEH4x1EgzS0KJMJgP/7MsQMAkZUGwtNe0BwqQNgNawkjoI6rU0xQyo8AgUADX4Q45so+ubX4c/Qr//w0AVA5axJGw1awwFk8Bk0bAWushk77jjeDg6Vcjgr38sDQNfUJZ3KgqCoK0xBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEIYPAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxGWDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxKkDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsS7g8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEu4PAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxLwDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",a3=Fs(Ze,LV),o3=vs.createLock(LV),Zh=new zs;let _b=!1;const Df=()=>{_b||(o3(),_b=!0)},l3=n=>{Zh.audioBufferProperty.value===null&&(Zh.audioBufferProperty.set(n),Df())},h3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Zh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Df()},Ab=Ze.decodeAudioData(a3.buffer,l3,h3);Ab&&Ab.then(n=>{Zh.audioBufferProperty.value===null&&(Zh.audioBufferProperty.set(n),Df())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Df()});const kV="data:audio/mpeg;base64,//swxAADBmUg7gCM3gjdH+EKkCADXz1BJf+Sv+D////B/+wLRCz8Ob7nQMDFvER3BwvY1oeojPpiEQYQL0nv/PTaE9Mj+CGSDyAlZCn+8ALh+7wp/1AwM6X1dlkJsf90b/9q79N/rXbyJO1mvPWrJd51MyMpH2ewI2SON/D/ewqahUQACtOQSosYwemRvEQowgEMcAgGEnpMUTvv//syxA4ACWhZFlm3gBFDi2o3N4ACrPHCPBpQhfbtmAGADTeZ8V0FwZZz7p/u/7+JQnto6loivZdV4Z1XlUuVdY1Lv+XQAAaMTt1uEgAAAAAAAQ8AArHCEEcJahjISY0EG2FI4VnM4hqpkY8GtFIRBaKjcwWceAuhbBTW6J8QDSFrH/mEBxb5d8U53t7PlPAT2yll2jZVACnAARxCcv/7MsQDgkgkcTrd5IA5BAvmCd0NJwsw0uCYBQDJggBQmDskmY6QmZhRg+GCmBMoavWoyp1qZ9gRJUQaaFMf69Sa+yTfVe4x/3OVdnVKMdKDDvJ8gUKw4NzA4GAUJBhODx2QtRhi5B4/L5/Up6DBhyokLWexBtC7iXyfKsZbB1IHwsB9K4vS+CEluYQqOR1866oAMyABVggADJrmg5n/+zLEBgJIfGE2zHjFsQIJ5MmvbIl6YGQHxijkGGCiVoaIA7gQAgYCIETlr1EgBV3RdMlXzWbjsuq6UvqokR/EJJkyOmHTj41omg1p0jAzELohQsQEB1CaikKiLmCCpiHEnncwfadxBGfHpoo+CBIBDCLIqAshdpPKZeluUP5zbxQ5Fvu3t44/T/SvuKjVZsAAAibS0LyzYwBg4UmQ//swxAeCSRxvOG5oy2kGiScdjuSUyKaeHhoOrm7C+YolB04mHJEmPFg4ujKsBTWWAOCpfJlb1d2tzlTmTiLTV3bp7za0Z/919hjJC4APjwAlCbqVZYa9YIgfTGCoeGQZ8GAyeg5QzFUojk+KBe8LhA45CbHJ6Wx5yp6IS93Z2hpf1lDT/OnWyBVfjBwNDw7BVQA2AAC20yWHGcEh//syxAWCSLRTNsz3ZLkJC2fZnrDmJOtswTCEwVN8w4N80jCgRg+bgQ2ZlAGvCpvr+ZeNGYDibCEiEtbiF7+U8GyfPP4FqrmjcgsZvxZu2TncBoq1zVeNoY3tzesBa4DAHRBDkHKgFGZqaGFJMGK8lmeI9GGYaDIEgYMS87YKktC0Pz1IYF1ycmq1d0oztLpbo5gygAAB90/gLdWCH//7MsQFgkeAWThscMVhCQzoqY2xHxCNEsAkwwkGjTICZWaqqJgEyHApoFgGLG1qpMAIEeuJRoLRRABh1Kd0TrzK2zTrRhwIQoA4D5tDKCOUoYhib/itAWJjBk7QIQA3VAMuAxkaMcQTn4E7xdMJHCYATHJ8d7xtudt5pTp/HOv92wABEZXvyYJqAACc4AAh5LJFIWLDCEUAnCYgIj7/+zLECgJHZGNFLG0I8N6L51mNmK4yEwQ9TLMqnwSCuIOiZh5cUHAqAFrkflFRxoKSzB1zNV+bVtzTFHMF8HTNtWTD7ASgQgc8wMwEIoVoSwAJZC4xnnwayFLcWOArlnjWXqlphKpea1oUJjGplVrUSVbIaiwACIKXqAIbCkJolC4htvvMPaJlGBGYs2GDTZ7rCAg0SGnnVO/c3LyA//swxBSARyBfQkzsyrjmjOoo/bCnJEpkPd0gZ9iC7vtGGGKl2kAAGUwCYNUOItz9IT7nuDEarEhGGGU6xn4Q6OKkFzuWPvOXdUnrrRKeZPeqVXa/AuutA8vEkmy0FMVcAAVUU0IjaWiOiMxgzCUhZ452o+UIOYiwkOM20SlAsByQFGEgK1KgqRcBUIw4K60iIsW3kfsKtgyMuAJc//syxB6CRyRfPE1warjhDShc/aSnMUBRTh/IBPpIoaDjIcYxIsSxGgc6qlMXBVILmTyCxPmJV0cW5rMG2YbGyBvyyM8l55zY60oAAIU4AAAIaSrYqIQEfElFgTjnMJHw2qQzO5RX6DQMYziCHJljXIGj1Lg/uRPwjmJqURp8anVTfz/nwJWgAAylAgV/25sFV0/TWgoQTu6sMMgQ5f/7MsQpgEeEa0NM8Mcw4ozpacyZHxExUrTH9IkGJYwZHotnZK1ACitNzotE/KtCjBtkWyT9CpJAAE04AAAIGSFa0o8/kXFQCJSNOjlJMXBfPZVljvn0SHByx0nZmaLtLZhUWI5MxZ8Vqyq/kRNb2FhWAQhF4JzlAWIwJGUCBBgo+ZpSGWanAYmIEgCUkgQuDGq0yGTougTEXYxG8sf/+zLEMwBHPFtBTuUouOEI5pm/bMZ7l8v/mPO/hZqS//RVAAAOQAAABeSt7bAgBtszxhYB4GhfmCazGYHQSxoQqCi4uCYPNhyKv5nqAI+IEn81YVP23nVTg1UKuJgFBcym6jqc1tgSKh7+GcQgsYlghYvyKyCSZhDpfp7VtsLhMhne1ss5ulprWdgGhF1////+lQAAmgBXCzVTjx0u//swxD2CR1RJMU9tKKDTh+Xhn2jGmIARjRpwsB9K/Rp2OQcULFsrMTgiJbVVFARDTgVIrO2LM68uO+Xe6zoLygqYDAHXZYv9C93GliIAACIpsJhZlACo2KnowEyySIHOkHgQ+aPVbNfq0Idrtr///3feAEAAQNgC8i/YOQQHX0FADwKHQYrzKQgCvBcYRHzAgjoF1LnpKoJPe2+e//syxEkCBsBJLw13JjDHhual3LEWrn0OVaiFf///////+sxI8BpgATI1M9DEswQBM5HQWsHIy9CZMJBRtJKIlYABR29sLIgCFgqVFEs/rzNwr16lxYzk0Z+XTSEQCCAaYLrFgYBAgVEmUMG/hn5EUmnhYmUaAkKOhzS6R4YwrNB5+N09H+Wozq88qPEZf/7//+x3rXWiaAA8DIxYRv/7MsRZAsboNyjMe0Rg4YcjQb9swKRhyQCk0QC4oGAk5NY/jOVggMbME4ayRZYUkctGgKLVUbKAgFH2NxZ/52lux9zP73//c1l0f////9m/zSoAYUYAACIg6AStCbiiMpEADA0QTO3szEocjNHR5sswK0CJHEaIaHHaDxon+uQx2/vt1HT+z////6cb9qVYwBnDKpuBeYELM+DoUNT/+zLEZQMHeDkmTXdGMQmJI8m/bMDzfQbiMjoeMxKQWjBMAHMKIOwUOcyQHoIyJdArUH6cSRQxIZHHqep/7/dm+gAPGACIGIX5smYGDLCmKBGdTnm6GiiZYY1YTx1RIeKgO2Q9j4eT/DoIYkNeluT+WUtBez//+mz+pX7jFgKFVaY0D5jYKGAAYYPFpiQqGY9KaK18Zj8BnHvCuFxe//swxGmCR2RHKu7pKLDtiOMBv2jIIxmZF8Y0QmBDgMMlANpjL4zGpXS16K1hPX0GxomhBGQuZhxKHHQwKmNkAiHzBdYytG2gIEWD2sLFBWQnbWwKXmHg0MBwWp554rO1RUAB2G/VFKedTFtPHfo/+z/r8+Y+NgyRCPYKpxnY+AAYEmJoRObfqEZknjeGtw6MiMOSJyXKGrAElmIA//syxHGDx1A3IG17JgDsh2LBz3DAAULJfLtM4iEspM564AP//////R7/SgAKAADCBEEJICixwVRlMVATFDgzGtNGA7sxnAzxgeBgbKonCvXFQykQQgswmAL+UWfmxSfdMGV////UJHIBCjtSJHYxkuBwSIAc0iWMzl+4w9wNwj+AZkmFQsde7wdWgcASELlYukkOySVRrlq3XDW6Nv/7MsR6g4iMLxxt+2YQ+Qbiwb9wwKKMJiAaczkM0yBfYsOOo5MLlbkwJQtDGxZDD8EBg6GmDOQUHgGpAeFEvrRuMVKX9ascvQ1Y0DQDhBYpAJUAiQIIqHhhQzaw9Z2DOxjMuhBipf8yY7ywAX0T2XLRxQNY4Ifo06c5/f93T0//o/+6T1MOpjIiBEQCxg0RQxrE7RA+1oQ1BEwwgA7/+zDEfQPHXDUabfuGANeG4oG/cMBIYwLBQxCV4HGcjSiEJBO0KRUtDKrdm4ef//////1P0SAWJAAUgK8B7ha0wDSy5dQ2dzYbwzNQEw1aX4VYcWMDpDQ1tjRerYl7y6marf//orbXQzEH0HP0U0AISQC0hKmN0MDByAK8YAOOZjDCSAMDgE0adk+VJhTBMEBZgZAS8FWW39NCYrv/+zLEiAMGjDsWDXuGAOmGo82uDNqf///p/6v9uvpCgCIxk4AHdsBA5CBAYnMSCT5mqzTUsDgjzYoE5TwUAV2ZRKRI7GobqUUvzvVwO7/////9vxXVYK9yiYaJgUkDVQUggWtZJMswWJzvUFMzDEcES1TkN+hVkFtgYfVyshBp9CVHASd9/+lfVoffs/aT/+3oSkBBgT5AlYk6rQms//syxJSDBzw1FA3roIDkBWNNnujApKRAhozVgIwtAQowEhGngjd6dRpDYQBq26snZ3+jl3//5H/9LPxm6ggbKSQTGkBwJDr9AEAZRWZh0SYgjAAdh4nEPHBJ1I+L20Vnud4NBUNXf//9lH9PR6myyEnLxTHIxkgIFsgoOhuNFBgNIiwaOJzpdEzxASS7XUMuZitqGWgTH0gqoIlpBP/7MsSfA4boLRZte2YA5YaiAb7owLmO6v9fR6/KM+v+tPb6ahpQsqVkpWKwJLBg4DAOB0YyeFg4COajuYRQYQP8HpT1wceQNLJHn2f///47Y9VxKxrhCkWPuCFhWo81A1FdTJHImAMYU1ZBCzE1tMDAQ7B43PHRwJxW4JQqQFtJU2s7///1dLdz7TLkFTS2Co0qLGjYngEk7e9diUP/+zDEqoMHICsabPMmEM4Eow2e5MIIZrVcxtoYKA8xbIDmUnGddoh0rLaVhaELboGA3I///+32tj0qUhAXA4lABA0VFRzYs5Bxwo8cRAZqIgBjC0wyrCVrVBy0Sl3U0lLcrNkmJX3vXQ9xHrF1kft9KnLd0/5XIPY0tSK0DTykPgmqBACpusgAjZhT0YwByozh1IJWKp2KmeLt9Ov/+zLEt4MG7C8QLXcGENuFYg2eZMLR2pQ6RirmqAoCYKg0PHnDwUA5I6x8afWSCCjoaGWkABNLoLs3MMFnGvzaGfMY2VvKaYxjfVvVP6f/9DGVtSlb//VsrzTGDCnJFXIg08GgaduIVUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxMQDx4gzCgzwxsDphiFBzJkQVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsTMggc4KQgN5YhA0YShqJwkmlVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zDE2QBG9BsHQYXiANIdX3A0iMBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",u3=Fs(Ze,kV),c3=vs.createLock(kV),Ll=new zs;let bb=!1;const Tf=()=>{bb||(c3(),bb=!0)},d3=n=>{Ll.audioBufferProperty.value===null&&(Ll.audioBufferProperty.set(n),Tf())},f3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Ll.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Tf()},vb=Ze.decodeAudioData(u3.buffer,d3,f3);vb&&vb.then(n=>{Ll.audioBufferProperty.value===null&&(Ll.audioBufferProperty.set(n),Tf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Tf()});const BV="data:audio/mpeg;base64,//swxAAABdzxBVQRADFFHaWrNxAA6lqlJJEQAExvBGPAACkboRpPkaQjfnfz5z/zvk6HfzvO//6nzn/8n8Wo50RIcE5h04AwQBAIwAHAAGGKl44UnQFxrI7b6JARZgWfzRC7X2cjUCZG/TgeAfXziIB7AOgm3/Dlw5chhj/4aoJEnxOhr/+bkURTNP+37dN///zd5/WqMcFKOhHs//syxAMACFBlQBnXgAEQCuRbvLAAMh2cNcpzMDxDOxVSMlAjYsYOAlbMUQJ8hAkSABkLAPbGhQfrk7xotjWuYO3uc9FKLMWDXX39eK91WL8a4ARAYAYFAQZg2BpmMcTuZ9zx5rwEJFAZZgjA1mC8BuLASofGAOAMhs/U/GV40k0Dkso2K6Npbban/lI2Pnd6J3///t66ABTcYocjaf/7MsQDgAX8JTutseaw6RRnNZCJDkFdpsKMGTznDUOCFN3UBmSx0M4MasPlPO6Ar07embS//T/2f27SK//YUG03dpZI2oMaBN8MJA5tI6MkldtNZgLZ+dUe9LvQy6Odv9a9cr9VPRUaBtgq9EWmz6Xj3KZTzOv1ylUAC+0kk0oAEUn+I0HZ6jICCWahweFTlrz07qq2Ls9T3N/Xljr/+zLEEgAFSBMjQWBgUI8CIvA3vAbc1Vf//uoAABTglUoQoEElDJAFw2zpqMe6sqMzu59/9uvz32/t/onv/5FMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxC8DwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",p3=Fs(Ze,BV),g3=vs.createLock(BV),kl=new zs;let Vb=!1;const If=()=>{Vb||(g3(),Vb=!0)},m3=n=>{kl.audioBufferProperty.value===null&&(kl.audioBufferProperty.set(n),If())},y3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),kl.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),If()},Sb=Ze.decodeAudioData(p3.buffer,m3,y3);Sb&&Sb.then(n=>{kl.audioBufferProperty.value===null&&(kl.audioBufferProperty.set(n),If())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),If()});const RV="data:audio/mpeg;base64,//swxAAAByAnDnWRADEZkyy3M0ALJQcEAMk013znpOVkWGNCg9vD4oJlTQcNxQBIJ0PxSUlJSCwfB8Hz+CAIAN/DH/gg78EHS7//9QIJSLq/wFHg+AwFAAAAAAfFvo6+SmoCLgXFVlJaBRlrks8EfgdfwNGNDIX1icAtgSPunkTDV42yCf+OWMmXBP4hJ/+RAZg8nmowgLA3CbIw//syxAOACDxjRhnXgAEOCqVnuqAERLIypm8wTCMyMagDMoYEAyRAAgCAQ9za/ELra7bNcNI9BMVmPx3pF7P7a/wstMTOL6//gwrwjSeVKioAAkqgEBggJpjMDZgiPBm+0xy7jJ482ppET4kOhhSHhg8CKMhgGASP09uliMpAaC+Gyqiiyjd9/QiJjzxL//////p9lUBqv86UKJp6wP/7MsQEgAWgKTMsbMLwvwUmdaCI3g146KXMwJVAHDYhAjvxQKf+SIBJPJWbIrZ/1aVs/k7Lf2//7QQilFbJGkVBjWeEsADYyEamuw0dNdmGxS1qmJCrAKrGJZ+TX/V+1zX0fitWyROXKQQiijI22kTAod9keTOhUgChZfu1VSXOv2ubHdG+h4jXu2fLMV00rQvomqNH8kAAAARGFj3/+zLEGgDFrBkvoeWAcKKCYxBngBYhtAWgNUjlVDuFH+de4qlT5ENEZ7/8t7K3cKjB1Q/kmOcRTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxDMDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",_3=Fs(Ze,RV),A3=vs.createLock(RV),Bl=new zs;let wb=!1;const xf=()=>{wb||(A3(),wb=!0)},b3=n=>{Bl.audioBufferProperty.value===null&&(Bl.audioBufferProperty.set(n),xf())},v3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Bl.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),xf()},Cb=Ze.decodeAudioData(_3.buffer,b3,v3);Cb&&Cb.then(n=>{Bl.audioBufferProperty.value===null&&(Bl.audioBufferProperty.set(n),xf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),xf()});const NV="data:audio/mpeg;base64,//swxAAAA8ADNZQRgDGHni23MIAC1bbaiNgdgM+wEHBiogUAbxA4MT+////gh//8Mf4YzNI0kYiNYjDZaLJCYAZZgbhKQTNx5Vp34WpSu/bhLvzLYwWSHokUhx0EBR4FA/Mp8sOz3gcWfL9YqH7kKIkzd9fLvSkB201St7337UyHKf7X9Pf//Ue9/6irjy/l3s5gqCo1lPVlVSBj//syxAOACFB7hZyUgDEUCu008ZpKfZq0pMq3UhCDwXYfD+n5X+IUp5YiEYMB0CgRCwfQF0AmAUjAlZVJuE4ZaTbKK0AIJCxUAwrWLf////l1oFP9Yo2m1QI89G8bsISUXc8TjPs5pDlVUzUq1VJLFYcIlvdQS0P1lohZFx5hFpVDCPaSKlRsdgIslDzfeqxt8iVd+v6aClA3ydRso//7MsQDgAhYV13sGEqhEJFpcZMJqE0gGS8ZU3ekWmMRbO4kqZnMgAHAFiPmBRdQFgRZHZrTNwZcRTYLKU4qxy3ieKohBwSNif5UwYc4W/ywiEYAtIWoggTByJ+YPcFxgdYE5MVlD41ZJSYBdPF8gQIZtZPy/cZWxBR5Bm7WwZdGkolTRTQXLpSOcoUvf3in/dyBZwzRXAF3ieJEAxD/+zLEBAAIkJlXlYaAARIWb3MegACpLHqwdgk0mfJ913UT0LiL5W+nIh+DsKATQJ4F0E4PF8c7FxaaaCZ80SpqZbfX7J/99fN0p/Onf+zSaVmKSAKAgKAgMAAAAAEBCVMt4sfsyRdHO3PTH0SBFi4jhEgNBinEXeeDSKeby9zBMKun3/pKZ6L//H/6T/p/82bkkAyj/5m7WOWuRFpI//swxAOACDgvi7zDADEQkW289AoWMABHxkZCUEwfjodDiYmpiWw9NWjIAhJEFkFSo4GnxwiDsrBoGn/g0DT64Kgq9BUFQWBo3WFDf4B//ljZRUwaFSyREkApYqDmkM8qYgtylZx9ZL7knEF4rFKLgqfa4GHahJbD5q+ZdeybNpd1LOzqJVWdmJgs9uNUoK61I9Pf1runDP5da2kA//syxAQACHita6eYTzEMFSdkzAigHGL2uEMDLL6xtFmUuujunUP9ODzjFKbt2J5yt77uOmiJWXQ6GAbIjvu17WVn/dDEccwhLJLW6dXU/dcsEAvP8BAST22Qg8WJEX2Cxxs84/BnOt15rGZwVs2FEtKWVPRHZitdbuySkumtHlb0M/U5QwcQRYSLI91T/epbUqPPogEGy4Ldq0ABj//7MsQEgAfcrTesFG1owIRiqMyYmD9U8MBcisSsURTFgBykNZkSUjL+oDB8VGCT310AYfb2ZlVRgEvbASNp8ptD8y7lYYlvxtFsCgAAYAQABAzjzrwIrmT2cuLIZOOOhHHQELC2rOtlix709VXnYiej4dx2rz2Vd/xL6QQAAHCikADAVHicCJrfesiRcXCNaoKuuneW+r1dXxFDvZf/+zLEEQBFcCEJoLHi8JuFVvDMGGz/vqeWI50KHuGnJHLWAAQIl4qgkpSn8oGq1rUCoSk3UAhEYtCgKWWwwIDo////4sLVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",V3=Fs(Ze,NV),S3=vs.createLock(NV),Jh=new zs;let Pb=!1;const Lf=()=>{Pb||(S3(),Pb=!0)},w3=n=>{Jh.audioBufferProperty.value===null&&(Jh.audioBufferProperty.set(n),Lf())},C3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Jh.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Lf()},Eb=Ze.decodeAudioData(V3.buffer,w3,C3);Eb&&Eb.then(n=>{Jh.audioBufferProperty.value===null&&(Jh.audioBufferProperty.set(n),Lf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Lf()});const MV="data:audio/mpeg;base64,//swxAAABQQDHVQRABFbki33MLACAFiANEhrgagQWfE6eUcJxwPv5wuD/ynh/aXfLvD/9HlwfD//EEEPD7ZhOAkFSjlaqEIiQQAEs4eiJWJc1P1YWHlShsUzcufWA094Hx1uq0G20l0OwMrP+XF59gcKx8JP77pO3m998s/Yw/nLVXnrrpQBsXJUFMLEnmlFmN/yDRSkA2wbEgAA//syxAQACKRzd7zHgAkGB+81hgxyg9V/KSvjePEM6MTwDABAfIScR33O56q5d4xqkH7v3jiaZMD6kY9sjxrY2dnb1HHfvNR/kWIABj/dYQ11+H0jIKJAJJKoO2kaXeWiJIkiSIKkCp6SSSRawEonOLl37VSoUBXLB1R4RArEQNHoKne/wVBU9wWDv4KhL8s9QNP/QiqohANaOyIgAP/7MsQEgAhwYVvmPMihFovqvMwtRAH6Ae14cRCJA0gkI0l3oAaVhTxL2UFGwRUl00mkOm7spnrNztCVjBca9pe1ZAAImV6HsdkkYbqCJBixaWQQZZKZsggAaovjuRz0ay4sAStsBa8qCRLYzJqRvdo6N8kxL5ulvc1t68seeejKSpp09k0Niw9j0xU7cwYDINIb9ZH0VZtohLZJIkj/+zLEA4AIWItlrCBPcRURrbawIAYAJxeV16k/ZdmXyuGXKtUDPLTyWvc8HhHuEmbDWxZs3a26Jzoe0n+dLpP9moqDULbjgomp6BR7tp47Kkb/Yy7HHGiQALQa4vBYdia742/8Tg6Ha/Yveot5iAggAUDAwPPgRG2IQAAAAjEAwP1yvoQIToEAAAQ5YPg+BwcOf+D4PhgAJtta7sOB//swxAOACHRxgbj0gAENjex3sIAAQAgIBAQABwvF95I9BqsaLjRfG8H8voXioPoFOTnP5fr6BAbTCiaJqU//xNPUyOwkrvuV+H0skfwwkh/8uGgaN7U4ykgBI0Wl0NRp9iTTuOtTP3h74fLq2RJI5YD4IhSIZoj1X1UVJEZr6+eMZdiQADi2WsYqaj6u1HKNo9Ta1BZ2GWfu2RpE//syxAOAyERfc6ekbHEFiy24x5gugCwNDM0QkIOIpArkSBqEiqI+lT4jPXA6p0BJyc7A/ueQIEDN8GVxZ0NRU6hwZWZ+u0vmJAcZH1s/fvWToCKjwqgrRCT5TA2SpWReMQaRbtiwvwoHGQwVTzCMlEnyNn9u7MLAVgshUNiq2C20CCygTEZw56WOpYszR3GtXoW6ht/2WRFEABIUbP/7MsQFgAjAk2OsvQGxFRLo9YYU3I5XmAGmX2GjdKVSyEyfEei2W4xByQeX12Jv+JSUCUNe3dQcxD//+rd/xZysTZIrIiZR7qJWtsem773JLgTX0uaaZAEhq87YWCLAk2QPRDsijCdQMyTfTUASGYWdhh0rvEmDrF/obq13lSbEnO6iu0XtJAY0AlnTooDLWLYz1nXalTIJHLdbYmT/+zLEA4AHVLVPoTyjMJ8D5egwvAIAa4iOYBvORuqckKIjmT0f3wGoJDpymlsoq0IgUcZlalKJoqD63behXSb3dH1aMG7tj51oii6lBlJ0AStbgiTFQn40KM3C3KpNO+tnib+WCg+IpL/ez9P/2v9tCgACxBbaTwBY2euQgIjICwBbIKp9DCz6zvsneDLl1hU6BTvZ5Wj+z/wVV9QI//swxBYABVwfGUM8wlB8giG0EIgOCIelakAcALdhRIwrRYRkcReWf6vb///KypL96vYV11222AVLFlA4Q0hOHgNAKIBOJRUqoJdlVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDSDwxQk0ISZIHgAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",P3=Fs(Ze,MV),E3=vs.createLock(MV),$h=new zs;let Db=!1;const kf=()=>{Db||(E3(),Db=!0)},D3=n=>{$h.audioBufferProperty.value===null&&($h.audioBufferProperty.set(n),kf())},T3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),$h.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),kf()},Tb=Ze.decodeAudioData(P3.buffer,D3,T3);Tb&&Tb.then(n=>{$h.audioBufferProperty.value===null&&($h.audioBufferProperty.set(n),kf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),kf()});const OV="data:audio/mpeg;base64,//twxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAvAAA6xgAFBQoKEBAVFRsbICAmJisrKzExNjY7O0FBRkZMTFFRV1dXXFxiYmdnbGxycnd3fX2CgoKIiI2Nk5OYmJ2do6OoqK6urrOzubm+vsTEycnOztTU2dnZ39/k5Orq7+/19fr6//8AAAA5TEFNRTMuOTlyAc0AAAAAAAAAABRgJAW0QgAAYAAAOsbaTGT/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7cMQAAA7dBSqUMwACca6u+zCwACApgAAXXczyPLdxZhAGAydwQABDIj/xEZEREf+Lu7u7/u7ve0Rd3etERv//7EAGAydsYQhyCEf3va73/vdxEREREE78RGRBMmnYPg+DgIHC5QH3rB/EAIHCCgQBAoCDsEFAgCBQ5BAMS4P8Hwff8Tg+/Ln/wfw/dtCpCmhkRCphx5RJJZZeBkRuhKWvyydbusLOy2X0io3WgGaNyeDJBmxPyYwBMkkASVLJiZ9hJJ6AbpW4kk99nJJYE5sSUUDSD0v2Uxg7HWSUR3HErRtlPe9nmg/mKDjSLtiEPSe+7iuGG73WurKU76Uc2rl97P/53S1Zi7F7bTdrqiJq7Yyv/6/4uDVj3sbtRSKhqLrLWf///+W7VaNBODMAAAAAhEmcl8uCdsv/+3LECACSeTVr3PYAAgosbbjzDui0GmTRO96xrR6OSGLxYWzCh0mEDaIBVQ1xdHw5aTTq1RBj58yvaK7kDNUcale1G/E8611+6daha6+Nuve72X/mq1vX4PrMdWcrz6xDa5mtWNdU7m/T6NNo///rm27+dT9a+Zkd6fT/g32p4lBxRRZUUEZkSpCIsNCAtctr9kCSmrzv/66lVQ1EAAAYJYBOUKeF2LY8JcplQlohfTxvMumyOzxtvJFI2I1iV/2+b7RFSrZTO6aJ5MkgHPUtQkCaHAveIIOrPtb93Iau5+y1NzYL9Qj73xM3UbSGUWHvsqfnJ4icIKCqmRkXHi7Fv5s+RbK+5lfBfsWpgmsPoMiQNQhUGq3ftfu6lZEQCAAdhIBYSUm4Mg3UkuGF41iEbgUdPDc0Got2R//7cMQPANKRa2aHsMvSTarsuPYZuF8aBIK5DNG4yVq00SKu45iMbvD0hnRdGZTLhUOlQUHEQxZI0nUJm0eSI9baV9KuyiRjoJrc+33zekx8HOlcjZN4SRow5KvReT0TCBrN5PBctW1DG1BO3JGo6UyE3L+XmU8bx+21n2sOs5ISgSu9fP1RoRMsZ77pdCNCIABRCfq0cp2mW1JA00GjDcnVzET1hxp6vWITR2PwVqBRd95y4yfxk4HlFxmuHsEjwSERbPSaPrt1rjJUq8jTztuqiMIVvokgVZPpldExIjDdS9MOF3tn6v8gSijYMhZdMloS84Dyk4Lsoac1AqaTR5XfbyTuuj6NOqzp1t9l4VzLVkgtFz8qLkpm8bfVkTwqWRSIAENhDHdSKh8TFYPi2SliEOJphuJA5jj/+3LEDQDTVTNihj00Sj4o7Hj2GbhRwjFogi0oCEEKpXkDQ1XO4UdTsldrplPYETbDxQUMN2RoQRERZZJQlaICdRovjetIl4a1AypaO64eFzYtvYbaiI8RsJrwhKL8V0lctGLEIJwUhc2no1E10MGWlobJRcTJOnBVN9RTe8x5xQY8gEhGeivAD9Kj2clnP0/r/o7f29wRGQgQABBRd4DWoKRz9PqW7bVVK8wKpJGy86YXjydIg7IaYyTkMnA2HwkDgymWHRgeURnDAzUiQpfWJbqrP1doW7Dr9JpEmgU3ufBglsjOYkLEluXfsxgU5RIm/ko4vtOUFPCpwXcpak5aDGo/HwkcpnNSBxyquxpaphphuZesaERW8FTYmOECqEVujZJWxNWpYjUiAAAAABXCElsN96SxSHuec//7cMQKANBlN2XHsMvKbSrr0PSbWKeMk7RApAVSWnGtss2qvAuSCo2gVOx7aTWgRwdC5Q5XKyMtVNm2IZy4mpVmLH7NfyhaRF/heeJh3pNkpMM/k7aMTihApGZc84qJyHSjTrYzLy6ivnLwz22bTM7drVPZtI9MRR3bZ+9w9Ltel/97bnYuNAAL8LFCONVLkcZinWN2qQORCmlQaUCJT9lzChDkF0X1hSqptOVIxmM7Ucp0/MfyWQlmdLghBKmIp2aFZWM5lgbPoUhg7qxmN4ISJCKXSnqNpc0uRnPprEOYXgy87ih5UlaYQL6pqaJsUsnzp5QwpzOkSOOOTWFwVqakTZwqdaj2KXRFTV0GKh7T2vvbe5QVFDwHXHqlajd9StYlCSAANRqSAJBoRRGHkjA6TxyIA+vliCT/+3LEDICQrSthZhh6yjIkbDj2DmFDE0z2x0vQCQoOhJx8rFAdFDZ2vbJInVXPpSeDcrLjyPC8sAiemDcKFpMhF92taG4+42EiJE1ZhgSicTrsjfS9/CvbIyoCrYmm3DfNNQ5WB0Q10HLJAbJkFwxC0Fu297fNssCm8QbOdO/tV193CKZmBAABKAVIlF5gMAgpbT/O44z8TDeq2eC+HqA1C7E7YpD9EOHZWJJIXXwqFJafKkaZZdeUkUBCEIBI+mpPYiwjK2c+A8hbbZ0dDQQHEkFHoymLa2AxYcIEUMoBuw5KalXDCLHkaBMydjxmN66RnpVdXDBxME0gEChkjzuO1DfKKlQPTu/9v+13e7u5VEUxAAAABwSD4UiRyLeZiLMih9sA4dhKdcRRCU8+ndKQ1pBGhsvHg3XLlP/7cMQWAI6I0WXHsGvJ8J1sOPYNufuFPYo0x0kMlqhDiah7AJAjhyh6wSZ9Q0zW4Fmbk5MFHDKCNKlXyosaC+UZEVWjIBeXysepCx8o6Hnlw99Pcn/nX7xI527e12HMSMQAAAZLEqHHAhktVh7RELbDJhIhuNWyQT1CWJsxIgkxgwokafXGxUcZiPnYTBebWTDm1GtWn8BaUuo1jFYMPL70cz7M6bZigguUndXaEhoGsIBrC6rofIZiBDspucY46sX9muDoPBsWHSspVvxWp8tep+vi/Pr/m/+qqFZFYiAAAAAFC7hekzJyZZ3DPXJLYJ3K6EgEKRDJAQqAAJ2tQkaMlJ9g2bWUVh9pkiZPrkJGOEC3SpVdVtOL2GV3u3WQKxUQ9pnsyKV0M7o+w7uitfchFc62amXq9jP/+3LEL4COtVtl56RNwc+c7Dj2DXiqImdumXoN5G0qdM1vGNpcQB6SK3stfTuhmYAAAPYxDlISOM0FaYScQ9cogwD5parHpabmJ02cKWFaxEmHzXEWQt1XXoQrr0x03A6yYQuPFiCooDQoADMSKNeSiBcJiFTW14plS3IQzZZ+zGUNiJQcVUyQHrrYTEJwCgUMtvaA5BZxkUNHiDpl1/7aiHJDMQAAAAd0PM3hxAzRwnszI9aOm6rP1Cz4kVEYDTgqjaIxSeFa6JUTE6ZAduaEgJFEQuoH1BUmWcgLonJImk1UGSej060BEKzkSvd3FAAcKYvbC5EajkYJHJt4WhjhkSOtLMnpG+e25jF+2IKxowYeXkTMqCiBRrK62W9MqhmKAAAlC7K4mQvz7bDlZi3uLyY4Cd+ileIl4//7cMRNAM+1J1/HpG3B9CRruPYOKDIUIfKFNyE20aoQMRidQ1TMr1HkdQpAaPaAfR1PmVh0sVsqnUJ9E3dkSwIE7XIhHBDikLgQfUa4kGkJQI4T07WgYkhdNcrlx3ztI6+nclBGyChIsak0m6ooFiykFiMdR02XdDUkEAAAABeVhMT4Q4vBoI4zFeh5yKRRoxZKlFZsZV+6GOTYUBUxsbq1Y/JbetkNqurITwvQn7unrGKo455/2ob/hWM6m/K2g7uR0dnbOk2v8RIzo+5ZUvPe/S9PekVx4v+JhTFxvHYyLuI6bRf3RXMd8HLtv/2qZFQxEAAAOCSHcYCfVg9RYz3cy9lxVSZfsYrcVNAqJH2eCC4rDI4HlSx8aLoAxpoicsqREoYYPB4FugaOFJwZcsVvFP1FeGEMm4T/+3LEYYCPESNh57BtyeElq7z0jbmgrq+MIEqRqRSYi0mPhTPRjNVrXp8LJ+SQ8uW7/DMGDumQ+rrzR3ryX3O92v+RqUY0MwAAAAAXTpGONc3KF+OsOo/FKbx/CSJZsYlI6vpgfMqj4UJDFS9C8Q05xZm37dchmZyevLGlS+Yo6iReBS3DRDRkkBm3NIU8lPqUlznCtWw5w498j/rVjQodLFEpY1rC7gWEYiNlrmpnowi9zVTjPdR42UgAACocAoQwUWABDmfHKCVTQThKTl+iZsqrjmg4BabHZYSJEZZOmEq84Q0z7rCMJCwVIgoYBKhkXK2JiFtvV10kLS9eIdhiKnBNcLuLLowUygguW4sUxbD+VRDovWHHNhlL4Svqcj+ywIECwcC0ofQAkOe4oFBcAXFFrV6V3UgAAP/7cMR7gI6FC1/nsGvB+aSrNMSPCAAAACh+NZyMh+4OMvxbieLOobGtP3q+cbgq0+jm4oFc/aijNyMkGkdgNjokoSXTQ5hQyfUbgoRR+Tp3iWggNLiOswIR29Sco88ct9tesg2pEnxe5uFkt0rIjthHI7d5ffJGfpThc2KGVrJKHCa4Mh0gwadW0Ox2ZoSKdWiFIgAQAAAYYh+qQy04eTISpHduURoTsCseKRCxwOaNwnB3iTifm6Xpf0imclarQ2DoNG8EwhEVgqiMCIQkoTNBBkEonHkC0Jrn4QYWJ1nj0dUbWnFWP1q1zMbapdrVZxU0cjdpCeN5nbFOAudL+0i28rLiM3xqRC9deil6Vf5KkQAAAACqQFnRAnqCJiqy4G8eStQLU9OvMh+TI9hdvWQsZbRmEgcUdZP/+3LElACQAPNXp7DUgfEl6rj0juC4ZUW9LDp0h8wMzLz4SBJfRFw/LqZGl9PZhl15roRZOEmRzzRiqcGgOhSG7TFjGAELhQhp+wZO8opy+7Wf24GvfjvoN+j1NaDpKN6//W/krZAABdHpTpuiQp4hyKKihY2M6WQ3k1ROKM4TDhIyM2uZ1PDFYXaMoxKgfKwxORaRDBIOhQUDJVEDRWOChN7MkK8zk1KZiogKKBMFJ+MIkWHqAsFBaK78t0i8H81vTiNZlGLJTvGfdfXMaGYnd/x37uRfFW83arGaiQAAAAC8JgjCkghYAksA1BQODEenTYS1r4kkIWLzMxtUrFcFyUZDq4PJAsKmDQDOOCQyLlAkCpKZGCY4cHk1Dg+vZ5BsG2LQSyiQEtVdwKBnEA6pOJxxDZkLBcafFf/7cMSoAI8Qz1ensHTJ25rq9PSO0Uk1gFwouoNGCTmqoD8Exh5BdIsR+tygKKJMlXsjtLwikYAcLEd50jhPsnhNEWtnicDOl3E00+hhw4LopmBzOCEc6qG0zzSm6XpLQh4UTPImEJg8MS0hkkKR0Ulcw9cTASAOqjSRJExf3ErpIpmVeRkSbBRmOTz1B2M5oqAWLFA4SYYQ4DaH89IgQXFwkLIBc3HI6rs00gAAAAFOryeKsnirMxGiek0Ql+fUU7FMysiRcyoJqtNypOEXRXjaQtGNsK0hPGEbgllldVShrGD8qB6fLMb+EcGMGHcHAJ2IBQGqS0sEKFgJhGHxSCLmYs2LSlDez/YymmTqRfRDVX58Kg5d6wWY7kR6RY6aLNNZQCiMioe5H7en/mQAS40Er5PinS6cC+P/+3LEwgGPxMVVpiR2gdOZKnz2GsjhwQ9MHYTgvoKnBCyD502kiySOjElIzEpLlvLTxZaBCW4hOPpvJoTBPoopYxFwkOdaciroWFLOf58cz0FjdWNPysc1jQy8uzLnn/9SNtnAuGnBMyre8AHTUOgHRUAAC6DiPU6U+1dRIOOCnAaJaRbhAAuoMUTel4QUIkl4pqyNe9RhhpYl4HnQLUuSeQVGlAo5CQmK3FoKltViaMi7CawAUYhAg4FamyWCOQUNLYoPGWr5qSQWFRqPLvbxSxPmRR6Nny3nOliflHGcEYni+kGEMY6kFXZ8IFeP9NDlc0Y8O9tcTsYSyIRwJGk86QER2vD08MQ9KCZdCZPGDaSKA/cu9pYXYj9bXIENI6y9o4NPcU1iT3vmnIuax/nDff/Po1CgAAry5P/7cMTbAJBZK1OnsHSBp6arKPSNskz4ribKE6ihPw63Iv44UDcDMAJFkHTodUNEPAdCCbH50wVBaJoHS6tfNnj1QwWUg7A4TlBdKa094m+FF4hwIGpCllgVzyXPfB/5xRSkgdVnKd35HakP2fGdZHTctg71l8rn8QHbWwgrOVyO/mQzDerZKjQAAAAAABM9eRVBLx50xGtp3TKVDI5x3aRYRjdHLxkQ6ICkXWpFfS83aaYkikisVazNFb3+T9SeYk01sVmnYc/Jc9RpTJTRfiQK8F7wNDliTLEd2zMe66+3khD800PDu2DqgnE4ycaSkIRSUHA9PH/+qo82UlLxSue6k1BNMJySA2DFwYqAV9OY/77LTLIEAYVNAFhCNInLT1ie1//TqiUwAAFMQUuSCKk8WxHHMlUNUCP/+3LE9oCYMSE8rD2cSeKlKjT2DXksr0uY1l5Dz6NBANsQpUAN8fr5lTLY1OBf09EiLl4uVhxNNYfvSCqBIKNrnq/4UYB7IujT5ZFm1GS1L5p+JJG8aNPztXsM7lPi8zk+CXkED1sET0MFJSmKR0VsV1RW0AAAAAAAxaiRbws7h9PRJNE5IRMZrqdLSwqNCY7zsMbSSXAh4rAk3DgLk4KW6KNCACLvjpapUKQ8nSpqyBSpAFFF5JeoRL6XWXiStXwEFL01GXJmq3rzi0qcR+4BXPEbbt4qh+C0xFAfjkpMk5mcmYvkJQ8iMCcoAYMmSIRjAhWOLCcvbB9hzl5wlNWXKkZEWxmWtW05TbXxJ39x2XvHRyW00uTSNKMgRMGBIWhO1Ob79lgRYIAADqIDuXBLHxMTdsW1CEIdN//7cMTrgJO8/0OMMNxBx54p9PMPSJvncnmFXE9XlS3LBZkqH6HIQDEbA4IiYCa0nICQqjodFNgc1g5FQQkAUCQmLa98f1jR6bIS9EkRHx+sVCJAldbn5ENjene5nEdndlq1o3zPg0oD1LDQBipA293w1Sn7+ffVFCAAAAABSVtlf9ozdYDWi1t9ljtfa+67lLHhhTB2QcovsmKmY2MWSDui4GRFpV5LDMhFQAwaq5ZEasz1kTzhxy4Cxm5BiMEkxEVDrB1M05ujIYeS/guZWrAcANMvuc8VPberlwLNKzChQ+hNlBWNo5hldcTiHsoGTQ+2LmWbNvWRm9R1/kZ4iIbpXRQevcLC5bMcs94buQowHACycWDk3cUcthq+hn0alIABVChRZlL/1mupeoeC31IpqtcN9iJO1kz/+3DE9YCWRSs/TDE8AdgbaXT2GmBVw3wSqeCJHIwAFhBizUymLcPdvHpLGcoz1WcxznUQ0uqcRosJPhOSZui9EEjrtWFmGADAOKiAEoEpOGEzCiE6OFlYtSeuZWWkNPUkLMuWsnMdVJRmsm9Cz/WW3gdAQoWNkQeFEyb2mCrLjRp5xG3zy6F3dn9CcZKSAAAAAKhDzrFtPUQ8bo8VIWwpTiLYWBDxYdQS4rlGoAmsQvhjG+aZbi2LSfTwiitTiUbmPT9acVW8W0PRqNNJDj+YqJPQKCHdI2SHFrdJo4t1uHm7mTkbRHjmE1tLGE45+945jkNBcLNRBtSL7BYLsuYn8iuUMaMvItk1SIggAAArQIuxbbDmXq5bPALE3fdOXuU6DQGDReah0uK0mbhx1iZqaLM0IkiMYsLI//tyxPMBlO0lP0wkfIJBG+h1h6V4cYNomiQTDAXtdxT1RK0uBMYtUG+LCik8hiKiJh+/Tqpgv2ZthPLNxPEFLQI0cLOgiuR3LHyHRqZSpF2fGOxeb0GmNmfjVvaDbLsYgoFAmpJoWBsbJ/1QEkb3JC+mawAAAAHafPSpezA32dVgimyt8Ax9SlaLmoJVeMmIgJ8onr5bopuD1pyjRzMMRRSURbUoDFOOFhLKWO/jzu4FgM3RKcFV6l6SxbllKZSsixWwLGLxW5RA78RVxXIaLAr+rBLnSD2hmUK8PniaIxZHAj1EsiOHR9apWIcb6srmK56s2iskmlQcMMD06RkGTRZc0OkzHaLid5Unv7hNA0PFEEU1m//+pyEB9FhFuVIrgkAZIoQyBzJcnDgRBFog3i5lyQCxBIkssGr/+3DE6YCPxM9Lp6R6EjKfqHWHmphgYgAYAKkoshwlqHFYctOIiFYWlixFzrTnIaHAoTEE72EMTGlWA1ql6n1ornaUwBoKs8prshUdjjW2vxJx2VCwuKLZDYbBKapQmioKhGkkTlRs0SLgtUA0cTkMKtoVp9WSx2a+42wr72KNioRp0u57lmRbyM3mpeAAABDdV3N0jroMbWAYkwVwmgQaoo5a5Iw3RvFRCzCLD+paIrx8DnMZh4AYZKtssQQeQSoNpDUsKehnFIq9+XTQ5AkJepnqLcRT7kac9G3rEk7Hjfj4q3eZ41py6rUplWwuQJHno4oSDvamqj5cTZhIQItdM5G2VaM0NRpbejEmmSCASaJXyPFgupDoklAAY0TNLsbxQqRVheo4fKrBVp9uMn2t1fTW0ZUZR6JY//tyxPYBlLEdOSww3EJkoCcg/CXxMw1YoYIRnKjAvJAanTLXNYoiam+nujSnk1h5Wfp0RBYZQBqa3kWoHBW2w34jcaeEpYFpmEo9jSPpwXx9JZsSLDXeGiGfGSar52VE58vIFTz3uZWKVmr3CvK5lx9/5vCt6rrEFv5ysLmoYblhUkrJiwp1f0JgAAAAA9rkcf1w2qtFRXjUCs5eahgwuYw9ibRy5rAoKZkiBQJ/odHxELJXKVpMvWyw+CkV45Sx9wXheVqDQ1tNSQ+WO/rI36clp7cnWm2ZPyweKVH8m4Dzk9HGzQ+V5wnp7aaIlHGBK3kCOAhW5uRzFnICtUJhoHHRnY6QFE1DuNCZo4EBWpw6kqBJ5hix9n/6pCCwAo+DnR5GTAMuwXReB4OBlKcdCLXZ8EmVxciXiHv/+3DE6QGRmOk6zCTcQk+e5yT8MXhIDMAJBCRXgYgkBvH4iQkSbP5rRDsizeUBJA1IhDAQsQAnJDUUSFzWh3GgTk0yMVgOaijLAkw4ISBwkELHF0xKDRuI95AjgwymZj1p0Xh/iYpqrE9gwwyTGFbzbPQfW0v//s338y2mzAAAAAAAAKhwOo4svV7xnLNXFmlfOU3V4KJXMYZ4ny6yUaGyUTysLTlKEgh0SIa2+4qCuZfo0MGCv42JrrcXYgN22VqaP+qbrhNKUMb567iwEABEpLB+yPTTA/qEIygOZbIKNpVHZrPMTkjUyqMgklYW5cN2TqaJBkSBdoKkoiAzBwZNmW29oox6lf/sT8db78BkQECbNJ9O5j5f5CWFAsGa40lJBiy6HLuLwL6sgFgqDpVg7Cg4rIoqmSud//tyxOqBkijxOywkfEIaHGd09JtAEaPNwDjg5KHjdH/TyWO1pPt41B1g18K1LOCEpsJeQ6gqzpcMfTghxbCbqhWWZ1HALGhR6wsUmRK2ISomIhguqfgyOTDkZyMOP2RRIjxYvWvd24YygNSaWDTwVSQTtvZwoVlB3/1/99UQkEAAAAABXD4wrxOUqOiESyIWFTm2h5hkrVkQTVCUPHahKDXBLiwASAzBfIeW4hafJMQolTSfjSbRPnbc2lsEqYROB3vjnXzBQ2eMUl0fqmahCHf10ioIE8Jlm2+rMQSxRlIiMT6NKdqVGfNKoNDE3iVrg0HyqrPCT3kLLx6adjS52uYIe2XLkADc5pj7Ok/40duJerKCyAbtkCH9LFkfGTpsFt4oiqEFeZYoLUkqdAAcYkNRhrQs8QpLuCP/+3DE8QGSINE7rLDaQkycppWHp0IILRLtgYECs/VtRPUBVhSBR1WSlLARENtFTpfsyHsdZmnasqEwDKWCcnUfsJJJWOVSiZF5DOjj4g+YvjJEojFTRYmLkNNvgjRIzjMW2TBZ3SI4QZzyqOtYxSgFmElB9Cxq3BST+r/t/9v//7f3KkAAABKpXhehmDKWpOrBCCNbLD25IAA5JeFnyqSYKlykAKscM2ES2ZxIYA3ojQgmUBFQslcQAnJkpYvuz+Dy8qtLd0UG9SVf+NoC4mXaWsm85TkNZH49LYabE/J0yK9RoYzh8miCbhIbOSWFh8F2GkZUdnJsggwaMG2LaO2Q4n9WaxvNUVEANPSEhceWFgGhOw+Jm1sjqiv/6zQAbJmTjltgmlfqLttKWfQTCV2OS5sCxJeKkhER//tyxPCBkQTRPaew2gKIH6Yhh6dIY1K5S7SqUukVADwG+Xu+kSUWLgLAQe9q52LSSMrSd8cO2EjRBQ5keryxH91WoTqGbBjuG9HehKtdTHTCRQZZ+qLjqFZLGKnNks0uzqjS7WeeTZNgNITOBoERhguJU3JexPGOddv/7GuotdqqUAAAEhLEDUau3fYQn08Mbchqq+S8S+EIhge6W3En3jcyWoYoIkqDTMOIs010266Y40CtFpiuwcKnbG0rERErXdWIqZA9MmMAY4voxhpS5FZpx3wvGknKvH0Yb9hIeeaPP5WtdKIRlkxbYVJC6/BYyTMaPywtqzA7e+hSSLTNdvLTr3fDiA2DYIsSVQRsc4X/+P6P/X/WsRgHxZruqdOvUYEsUoUoK4a/2Rs4gRZEdXOwtIdK1FFWRDH/+3DE7YGTIOEyzD06AiEZpuWHpwhdqgzWl3kzyyzus2dBLxQNdqLLJCMpWGcpAjJVyoPcyjNJoGpUUROF+uXaMhaOSCLVKqXVS2srIUVBpVFIss1YhgjcdzCHK5RpySUzstgqEjAdCoItm3xMOPzpd1qd5IYY9PPf1/soGQDEC4kylI5g6DZfxYVVVDkj+v5C0HlYiy5JFSwdMkkAYmYKZCnzKwwyNC2XELV0taIQEQyA6cLXHeSQ9j4FjFsEfKI7QDQD4AigwkykBjj4F6+BZmiYxuPzyRKbLcTW7grPtrJgxrUJXPaUb3wRIkDAgtJj0IWRor3JwdPWMgpZIMiEDjSp4WFL63u9fqkGrr/k//Qj//v9SAGpJpXrqiVhWQvU/Tfu4z5fqsaGy/W5oc5YpUGURHQhU0CD//tyxO6BktDXMMy9mgIpmSalh6bQvck8YjGgARpNFqrBUf0aUbFWJRo8QFGFMG0U4YkFwoKUCDDJ2ns1WDbeGcgtQigVR/HsvjmtTJlNrkyREtOEWC5KdPGosNGw+dcussRqIlV1E5p3PGrc8oBkEUiJfsVuqKrFnYwvrk/p39JhAAAAAA5B8WnIp26jeIbL8X4tp52FQwyhRB62oLbLVLQIg7CJlHNL8u+yYvarenbElE3rV6rEvG3RNe677sLBrmiLymQAo9gbAicHRIAOOheGJOPicTyWjLY9GkViSzHEuaedhjxpv2tZqqUL2/ZYYb3mi4aYgzI3OufM0CooKKeZaQW8VIBI3UbUH86VqVGrIRYeoRp36Ekwi4mgYH0nPagyVVJB2GyQUz4OBMVVXcIFDnLZ48Kkm6j/+3DE8IGTDNcuLD02wjoa5hmGJ0B3k/0HJgBJAgg6raSdYNGt11ir2FZE1wCFcz/L3c1aLXkz0ci6aTLsJdLnUtlSwy+C5yPD6P9SPa+jIIgy+VwLDUoqah8ElmWhmBY2e0q9QXiRFGg2SagQnFmUfNEtIWyIZKi7gVOiOSSWUwshCzAwpdu1dL////6P/7scmh1WyAAAADL8UKg50wyM40JkTtqdv4ziUurAt+K0kchpkjvSmNwC66mrxJD5MzYRSAP6u1zk+8yjTlUKVglFl8xUM3LoRAtczJgaLNxea9/LBTH7ur7F9MSHDiQFIhFBG4mRCJQMDkq0KXZHNnn+Wq/s1+1qTYbcAAABRC5aPTDUELUZO0MkHQnNvJmQICRAhzkGZEvcQEEZnEQygAICMIU6S9LyN5Qt//tyxO8Bk4ULM00weMJpmiWVrCW4TTBU6CGpwt0pH0pmkvm+SgDuNKL/obtOVjRPXXTUbZFonwJl8nHpUWloukCivj4yYHtih1diJmOB2+uswmEMV1HH2S8lvvRy8OCxcIg2AX1pHjw4k0SeQz6Fippw/Dn3KnC67Tdm4hIf/9f/VQ6AAAAAAfSxZMHvTFFVkeEP0QVpwIwOCKJc0Qc0lA+pdhAIpiutIQmSSALdpUQh/VTJeSNO9H6BnzcxlSYFOofGA4SBJgK03GRAZ811W5f060sAMkA6dA3sJ5d5ecDofrV50vQzhdBnoTBldZW8EDauI6e9j+vjdKJfp1EI6Vyss1/Lwbjx9+fCb0GnPqOZjxUp3d+LtEyASiWUJj6r2cBfM6MJEYJMvRZSkS/S0YFa0XCYcCAhzmb/+3DE5gCOyM8/rDBywnWaJemcMXhqqOi0YskoEnetpli73RWNCGXqFMCXRhnOZhvGgOAcJMksXEN0B6DUHCXAuC2HRG0F0JCHgbITw8NojpgLCkmxgswuSPHeHJa5CuuUtaRZpeospZ2nuEwcLAlGnw44esUGSNHubs+z1+/V5r/p//boIAAAMgviR7GmPsCgVuF13WGs6fuhVpQXYPDDQHnGRQCj+0xORhoQJFRFBHddilLDxIwkdFxczQoEWHWqjcmqztlTV0VhkLupiIXsVdenjrrCWOFhJNDQrDqqPl5AdZEM9Pw9SRuPahlWEkmeTIkNCDpdkqud+lgAVmDilrzhwXsXbqSKquszs5b/t/Q7/+zoRoD0r0FhTqqq6BwLZWRR9pUGl+lqoDF5v5F1Gk/V1OUtJije//tyxO4Bkt0JL4wweoJEmeWZh6bIiIrRy4IcUtQxKMQ8lZBBZsofF36fhMRWJqMNILtzABHdbit9VzlNLljmPCSCy6OR4OBSD0+PlhiYSElWfhvZlzmlK6HpjSV3ml+WejrjEeRmf9S/OFdFgkOCdwGAjgIlJJhVtKg/eaiv/76vQ3/3chpVNbCIAAAALtguFlbgNzXI01jFmIMMYvHoW2zWIjmSg/AhBLCnu5BHCajKP5Frl6zlqc5vJyAqkSkDvZVYedRwsx2pIgTi9RB+UsRAgMyyJE9LbuxBQpY50+RyXbvdU9lrXK0yjzQUC4fCBGViANgiNAjiMQrp2BqKqDLXHzoEcxi20rndK6V6DCCQQAX5TVhgoBjFRUjRKV5LLq9gV1HXep+4eTHaSDDtgd9eK7EglMxpSXT/+3DE7IGSMMsszDDaQk8fJYmGD1DAtLgdKMElJwYbGUSrXJmK4hQvhlDZJKeaQUKWWXZfIay8dIlKRnHLxxsucHLBgwEZI4tozrslqIT/RSAOLDjC3IK45Qxh28m97U2C6HJC7ulLtFei3P21////WjMAAAM8GWeIgIjJ/o8ww4heVPtlrrP2zGWpf0DQ0dDUoaFAzzIoPyC2AyRHQKjL8WYFwoFV2LHpQq+gKSsibu6LuoOKcIijorK0WYZSIXOqWGC/sAM/fB/qTF1Ij2MUl80wGEMgpouUJIGlhWgWRJLyaPLIm4szrb867RoLhxihG46WRz3yNLp29CH0SqLz/+9yq9u293uXu3rtmKiRUABcQQUHKEOOEV8jjfHadBJGMOAo0+aCNhCZitAPmcxlKcarJOJMLARZ//tyxOuAkOjLNaw9DYIdmSYxh46Yc21SoeCAIYklQah9MyhSzBOzE90LOyj2JChS8O4tALVBCKk5LklZKNhFMXZWsfPGNt3LWxPN1JlOBnHSCQmfXTeB5VqQQAyNMKFwy+ksUE4hQvr18Jtt8w3/7fXVIAAAABZOQ0NmHJ+KJpqYl+mNsTYi1hzX1LJQCvEvgpEkGw5i7JRAYQ1Bigqk4D2RQjxAhdA5ghw/R4rAjCoV5LxSk6MwAiFUPSApl1iIyVPIsZJ2oNUPHJZlX1A+eSmHorDwrR9ddUgaYmiKIdXm5NmvjXi0BC44q8RFjp6lq0mktSNJtkriaBGQPAY8UmhK3yqmd02iRT9HJfFOYUnSolEqULEjXFV+yxsUrW1J0o2XO0w9VRwV/NhbZYBgEJZ204QmMghsJC3/+3DE9oCTmM8pDGUxQh2YZej0m0AWSYtqIXIMEbwQQKyrQDgisCwiSZMJsgnGklI9RBg0VY6HpNLLhdc+oBCYoNqZ8TMtdDFW2ool8jlsq0TYEgKAlh0eGggGQkFmDBcXWeU9DFXzGbU5RDprRqVdEtXli36r/YxaYy93iqoQADgxgjEkHRs9Vy3Bhyr2MKsd9+xCBgShTSnMgN1ZtxnwVuaCDrpnCyRojltBQRIloJUxE9Fyv67SGDc20TL6oUu9bCNbGYU1uHXhayylwDge0E6wxIjRHQTNfXiu/Gs+BxPkOjlUIw+CDbIjCrGgLB6FuUpzi1owfYuOvap6dYoWU//wuq9ISTrY1hbOMb9CqiSJaOekSAv0FCq2tASJUUSvYjEWAsTgGHlDlNLaw8pXiuAv8qVhqbzE//twxPYBk/DHKSw9MwJClmVlh6ZYQFcI8VTp/OpG1uLeVJF005k4j+VxVgvjhZiVsAKISYJAWQ7nzCaiFHupWZUsiHMy0qXiq4PiCFJkEjt3kIIJJvZawmFYjaoJNcTcepl30Idub0bUX/av7b3tvZq9vRjFvSmsWZqOtdKVFwAAAC+GBswXS0xoMKXZH1YoHdyGEefpCcNpK0AKeH2eaXQouopYEcXE0WKQNUbgx3NLFxQ5uOY51WRbYqjmV7IUBC1UolpQvBgWBA4QWYAEUBZ7zDKe9l2kjLU3YqelcuFZ8GySIiBM8KHwoeetrM4O0GDu57w3W1xKmvXx2VAetH/0f6DNASrU6VVTgZejyquXngJXzFCy6IZatH5vaEZIkiAlLQUod0BpJgCEIRBG1w1M1kFkkjjSmP/7csTvgdLY0SisMHpCMpYlIYea0Iv/DyhyewcCIDJRGSrHDUlcBsIA7H0WY8DvBwjhpxTHElkQsjYmg3eJyCvZVQSzZGfmRiZNS3p7jjwNCFAJHw2VKNUH3KFNLhixZjYCUmLlLIIxiVAd+95S3rAtirHsrJm4fmWaxVR1g8XsDzSQ0IAFygYSQQAAAC3GPZkNUfZCVolR2i5OnInLK1nQqFcdaGiUfiwMzC1ikFUayaXCi2RHdHZ0fTo9HAvIsQ6lcnBIWjlgxULgfFRBWMklCYp7MpW/RIs9UbLW82RyAKVCAc8qJcdFMnCmenQ+Paw6o62V6vo0LYxe3///97HD3lDFINv4KWERLmpgCpGGO0iHE5e4CqsAho0OoBcpTdhkAGBogAsMK8Q0hOtBR+mXlvRCJnN+Pt+y//twxPABkLi3LSw8y8KalqRFh7MABs6gDTCgCLTH1XSSFQG+UbnIKWCbtH34h1xo2+tyTROfAofFJ8+qbPQfE43stpuU+RpIH5P6omrxjurqrO6B72a879aHOtpX3ujZWGv3oy07tW/6rt70M/1vob9bpkZJ2ZtnMHV0RVRjoQzXtrV2EZY1ZAAAf8kG5C97ENLFZrGWmSl8I2zkvT7o6zmHpKVpThTNaFi6BykGOR3HbD9JUaKoQijjRgypHA6DzfN8rMpVI/ZWwDBAkCT8Fqob/OUlo0WAwmExskIzyDIxRMY1pBV4u/cozdZKSHL3mX81fvMaK+UzdX9P/p/WQByJhFtvXJnlLgYBJ5X66YYW2zhA4vBKZWgOLcK2sObRoRQZMVKMgaX6rv87adihSl7cWgNq/LclrP/7csTrgI8YtS+nsRSCrT+kBYSLiOkypZcCpGIBkZhoCpVO3/e9ypTKhQsL4+BMOJRPiwSVhaOy6eQ4rcbh+fczSI17PhrPdG7uLPD9aFtOisIm1YhUsHwihgVEAVMmyd7jpJGxdt69uwufyFg9Ghc64KZpyXB4wbAofNBUIJErKghAAAB+RsGKW8oRlBjFyLqWA8CbJdfD/WC5oBpJCSk1zqO00CUGIEfHAfBrKNQExYx6kKL8ZkmpWPLFYXiSTQZiKVIjMQzAMRGKCvIBuAOimCozhGzNrHHBuYOlh4hUTCpONOhmbYbLPuaPFnAqObVsba56EUdybdP7TOP1Z7R2oZFJ1RClxcSeyPyxnCZgnPDqAprQcJCUnU3Fy5SnQteIBgkjC6bUHxEhoTBEImM6CXbIpOpNMFBc//twxOwAjxyTLSw8y8KVmOQVhhtIsyXUkZKDzJKmFGKeCMgORdUwhoXhPhin9NCOs6mhwjL7NBUqjpNICktCR9qVBeI45VNy0kkQpeKlAwpohqVGRj2qfKvZVYGuVoPGgjx1bO+8ipF+00TFAC4TkhUKLeWvJJWB0ng2WEBYQB9tXAADSWDpPMspz1J6eqEJZD181SsBXm8XMt4S0XAPKAPIGcLGHGUQOVyHmaVS4nsuHi0ybUB54XBLTBLGpksSY5EeuaNx9FSFQe1ZJrafaNq6FDJBWWgCLiwGILpItQVVLjoJLwwIkjg/dNiul17XKy96/8tb0+0lvYNUXqCkgcRVHwuNuTNELgKtZF5gqVTdoLvN2WFWHTKcNl87BYypIVTBa8GM7RSFgA7SZUMVYIiaCKzGkkWgtf/7csTugZDoqycnsHZCdZXjxYea0KiK8F5N1WyrYxqVImP45TuytvpC8bYygueJAGORAjT5xhpRVsyQs42pbK58hNBs7Iqo5Wo96/2Lm3t823svuiq2339tPv7Itz9mty3+yr+y6LRybMhWySIDIDRR6hDCjNVZzmKqgKIUY4txRQIQAABmGGhQa7o3OLPbE1t34syZ62IM8THYZ2eeRgLEVfBUj7EARIHItiKRqEyp0xjDEwQ04mV0bxpMrkPlXlzQbSfaEM8y0hCvNHx2Cqgg0njVYE5RimKWio5SPDu7syK9tkSh95b8H9a0Rpa/svfP1odtszIm5mr9v/3+/e/1177EZUUkyFuTUhfS91KxJGQjkPHcQqhMLoYBgbF1VQmot5QQTgS7OZxY3hxHM9MYJo6pW8sSuLcQ//twxO6BkJipIsekegJ9QaNBhItIM6I7sw2E+B6z2iv1cuHSF7e2OguC09IMrlSzOLuR9L4z9q8PPrsSYTp3STB0WCrg+koYEx4Fg7Bxax7GLvexDh6+w1nuZ4s3/pdursotvHkxIoOpey8WELTWF1DwSQCkAAB2WoIuve9bdmRNuwqeWIxmGWDWp5sTb0K0ZQsLAMuhxkwc5kbkw/g9dmbYG9V+ddikaQ89iNNrFlmMQWHjrTpZRzEszuz1adt1Ll+Ynq3SEoT5lxs6UNDLDWWzqE8WymDEk5SAuuMZ3Si9uttab/9moiVevJS7+tudX70bcitalZHsy67qV5yPussiC70VWTRzUd1M62cEwKBUtblBrNWgP+1tQl4narNNVyvN1JM4KtSYivVLZG7SgIwJmy9FrU1LF//7csTugZLaCx8sPFFCABUkJPCPgIfaRLNS7bkSqLO0+Sm79Oa4y468Rgq3KYdfyhm7NemsS6Qclli6Ugo4kzkOHEqLJIjmuqsrKt2L2Stey/+pG7/s6IY3ZOm/TT99/29ao6K19DWUZLsc99W7677UI+dZsPbaskn29eWslcWmMJ1STmmSJ0+0JBQBwB3CHkuLkYgfxxjcliqBkTxxp0g2HNUGc0jyP5JCzIhFGOZLcpELlUrUizlq8W4D9FK05SiJ7EXcRjrZunzeDFhXbWa8sTVcS7vb2xXOtdjiNOCKX/zMn7aVHL/19cv6+//X/+XX6LI2IVjkbPidcstTLfBE8JtYiGx1hZoQICJyEbBDAExQNABVQfiPHQr3BdjFUyyPS2l+fGlHGKu08YB1IUecx0ql+qFtNJaF//twxPWAk3YHHSwMXIp9wSLBgRupz2LkWFpxMxTajVPlQNCEl9WGBXQWHN4keNmWka9N4pm0B7rd/XeM42bKsyEJ5Wj2Qv8lij8R8aczFLIZ9WFbzS8uFo//RYq+d5Kcpl/1Tm9O+hEthuQ0mwzMBDgi0yMaBhaIY6BGECAAM1AD0axcbKMx0y2rqj06TkI2eJ1KI51stxOT6Sb8cYt7YdKNRjgezqEpXzlHmhRoz9V6jxe4s81I6hdqSytcYVXKsDGuFSOYM6tsHL2ZFbbRdva57tVrUZ69bsjMZnfZ2borP9NNbc23b//66PYspVqWoCetmD97O2e4lnoih0WOTlvyWHR9HZzJWrbAZxZIkEokIABkBnEGUjMql+KczfNQ/lajC+mil2JZRqzOonJOn8yOSkXMW+lc2P/7csTqABEaAxinhH8KOMEjGPCP4Y6LXUkeeR+3xFE5xlqFAravpamcQa43q2fnMusZrrOs6yTTmVcfOf6nJfCRSs5VCgy/6bYnRCej+W//mL8Sy+VG8jKUGN8mzXrbq5VM2ukNPKd5kDppMw82z9TyYMCUi5pc0xGHKW5wjR11eGpY6tcWa0CV7NKhs7hBRKNiqtmVVmp+yKp3veu+pbCGtEzdXLx7FpPVgk4eUpxWqlmNZW+h+b06a6J61Wrb6tM07KRN+itqltdNfr+9nka6zGqqIxequWhh0wuVzzWj3GJpwgnUUnqjKNlAcP5aJcsyyKRQqsREy4ofIU6uaIzRUNKxgTmDY+ICBQKEmAELDTZX1WGYk2vJFnBSHuqkhycqwzWtTUfMCwsKm+utfk7/8J/538PPIQsw//twxPEAkroNFMeI3UIowWKk8Jvh4SvCGEn0WisTCEJh/PDFMJC89a/huGxz+W7GHr1NDcSFyzV+KuNXFYVIiIlgiFSMMwKqQOjoJPIhsDKAKoDQpgVJVRSdHQDIyh9g0KYgMIwZJlYkpECwrAlEIQRBE8iZlUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUECAAACodnazoqLWqX+iqnqi/1RF+5Sy/LLSMjVlBAnQ/n//2Wkf/ZKR+Utl/VgoOOllIzWXsshl/y2X4stIyNWChgQdHlQyrauK2gtzXDef/7csTzAxK+DwwnlTuCM8GghICnaTzRor5hXS6b3kel6brXGab1bP+f7zMxym8dyTTivZGdwVSdUq8xxMvlKulOzuDkyqI0SfFCVBgHWmlUrW6G6ZmJhXTe8fuDNBSqTEFNRTMuOTkuM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//twxLqD0y4KxQEN+0gAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",I3=Fs(Ze,OV),x3=vs.createLock(OV),Rl=new zs;let Ib=!1;const Bf=()=>{Ib||(x3(),Ib=!0)},L3=n=>{Rl.audioBufferProperty.value===null&&(Rl.audioBufferProperty.set(n),Bf())},k3=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),Rl.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Bf()},xb=Ze.decodeAudioData(I3.buffer,L3,k3);xb&&xb.then(n=>{Rl.audioBufferProperty.value===null&&(Rl.audioBufferProperty.set(n),Bf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Bf()});const Uu=[],Md=[],Eo={addStateChangeListener(n,e){let t=Uu.indexOf(n),i;t===-1?(Uu.push(n),t=Uu.length-1,i=[],Md.push(i),n.onstatechange=()=>{te.clone(i).forEach(s=>{s(n.state)})}):i=Md[t],i.push(e)},removeStateChangeListener(n,e){const t=Uu.indexOf(n),i=Md[t],s=i.indexOf(e);i.splice(s,1)},hasListener(n,e){let t=!1;const i=Uu.indexOf(n);if(i>=0){const s=Md[i];s&&(t=s.includes(e))}return t}},Gr={DEFAULT_PARAM_CHANGE_TIME_CONSTANT:.015,DEFAULT_LINEAR_GAIN_CHANGE_TIME:.1,TWELFTH_ROOT_OF_TWO:Math.pow(2,1/12)};class da extends bn{}da.BASIC=new da;da.EXTRA=new da;da.enumeration=new br(da,{phetioDocumentation:"describes whether a sound is considered part of the basic or the extra sounds for the sim"});const B3=.15,R3=.02,Yu=Gr.DEFAULT_LINEAR_GAIN_CHANGE_TIME;class N3 extends Gi{constructor(e){var t,i,s,r,o,c;super({tandem:e,phetioState:!1,phetioDocumentation:"Controls the simulation's sound. For sims that do not support sound, this element and its children can be ignored."}),this.enabledProperty=new di(((s=(i=(t=self.phet)==null?void 0:t.chipper)==null?void 0:i.queryParameters)==null?void 0:s.supportsSound)||!1,{tandem:e==null?void 0:e.createTandem("enabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether sound is enabled. Supported only if this sim supportsSound=true."}),this.extraSoundEnabledProperty=new di(((c=(o=(r=self.phet)==null?void 0:r.chipper)==null?void 0:o.queryParameters)==null?void 0:c.extraSoundInitiallyEnabled)||!1,{tandem:e==null?void 0:e.createTandem("extraSoundEnabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether extra sound is enabled. Extra sound is additional sounds that can serve to improve the learning experience for individuals with visual disabilities. Note that not all simulations that support sound also support extra sound. Also note that the value is irrelevant when enabledProperty is false."}),this.soundGenerators=[],this._mainOutputLevel=1,this._reverbLevel=R3,this.gainNodesForCategories=new Map,this.duckingProperties=Uf(),this.initialized=!1,this.soundGeneratorsAwaitingAdd=[],this.mainGainNode=null,this.duckingGainNode=null,this.convolver=null,this.reverbGainNode=null,this.dryGainNode=null}initialize(e,t,i,s,r,o){const c=lt()({categories:["sim-specific","user-interface"]},o),p=Ze.currentTime,g=Ze.createDynamicsCompressor();g.threshold.setValueAtTime(-6,p),g.knee.setValueAtTime(5,p),g.ratio.setValueAtTime(12,p),g.attack.setValueAtTime(0,p),g.release.setValueAtTime(.25,p),g.connect(Ze.destination),this.duckingGainNode=Ze.createGain(),this.duckingGainNode.connect(g),this.mainGainNode=Ze.createGain(),this.mainGainNode.connect(this.duckingGainNode),this.convolver=Ze.createConvolver();const A=M=>{M&&(this.convolver.buffer=M,Rl.audioBufferProperty.unlink(A))};Rl.audioBufferProperty.link(A),this.reverbGainNode=Ze.createGain(),this.reverbGainNode.connect(this.mainGainNode),this.reverbGainNode.gain.setValueAtTime(this._reverbLevel,Ze.currentTime),this.convolver.connect(this.reverbGainNode),this.dryGainNode=Ze.createGain(),this.dryGainNode.gain.setValueAtTime(1-this._reverbLevel,Ze.currentTime),this.dryGainNode.gain.linearRampToValueAtTime(1-this._reverbLevel,Ze.currentTime+Yu),this.dryGainNode.connect(this.mainGainNode),c.categories.forEach(M=>{const U=Ze.createGain();U.connect(this.convolver),U.connect(this.dryGainNode),this.gainNodesForCategories.set(M,U)}),_n.multilink([this.enabledProperty,t,e,i,s,r],(M,U,$,re,pe,ce)=>{const Ce=M&&U&&$&&re&&pe&&!ce?this._mainOutputLevel:0;this.mainGainNode.gain.linearRampToValueAtTime(Ce,Ze.currentTime+Yu)});const C=new di(!1),D=()=>{C.value=this.duckingProperties.reduce((M,U)=>M||U.value,!1)};C.lazyLink(M=>{var re,pe;const U=M?.05:.5,$=Ze.currentTime;(re=this.duckingGainNode)==null||re.gain.cancelScheduledValues($),(pe=this.duckingGainNode)==null||pe.gain.setTargetAtTime(M?B3:1,$,U)}),this.duckingProperties.addItemAddedListener(M=>{M.link(D);const U=$=>{$===M&&($.unlink(D),this.duckingProperties.removeItemRemovedListener(U))};this.duckingProperties.addItemRemovedListener(U)});const P=()=>{self.removeEventListener("touchstart",F,!1),en.userGestureEmitter.hasListener(F)&&en.userGestureEmitter.removeListener(F)},F=()=>{Ze.state!=="running"?(phet.log&&phet.log(`audio context not running, attempting to resume, state = ${Ze.state}`),Ze.resume().then(()=>{phet.log&&phet.log(`resume appears to have succeeded, phetAudioContext.state = ${Ze.state}`),P()}).catch(M=>{const U=`error when trying to resume audio context, err = ${M}`;console.error(U)})):P()};self.addEventListener("touchstart",F,!1),en.userGestureEmitter.addListener(F);let K=Ze.state;Eo.addStateChangeListener(Ze,M=>{phet.log&&phet.log(`audio context state changed, old state = ${K}, new state = ${M}, audio context time = ${Ze.currentTime}`),M!=="running"?(self.addEventListener("touchstart",F,!1),en.userGestureEmitter.hasListener(F)||en.userGestureEmitter.addListener(F)):console.log("AudioContext is now running."),K=M}),this.initialized=!0,this.soundGeneratorsAwaitingAdd.forEach(M=>{this.addSoundGenerator(M.soundGenerator,M.soundGeneratorAddOptions)}),this.soundGeneratorsAwaitingAdd.length=0}hasSoundGenerator(e){return this.soundGenerators.includes(e)}addSoundGenerator(e,t){if(t===void 0&&(t={}),!this.initialized){this.soundGeneratorsAwaitingAdd.push({soundGenerator:e,soundGeneratorAddOptions:t});return}this.hasSoundGenerator(e);const i=lt()({categoryName:null},t);i.categoryName===null?(e.connect(this.convolver),e.connect(this.dryGainNode)):e.connect(this.gainNodesForCategories.get(i.categoryName)),this.soundGenerators.push(e)}removeSoundGenerator(e){if(!this.initialized){const t=this.soundGeneratorsAwaitingAdd.filter(i=>i.soundGenerator===e);for(;t.length>0;)Ns(this.soundGeneratorsAwaitingAdd,t[0]),t.shift();return}e.isConnectedTo(this.convolver)&&e.disconnect(this.convolver),e.isConnectedTo(this.dryGainNode)&&e.disconnect(this.dryGainNode),this.gainNodesForCategories.forEach(t=>{e.isConnectedTo(t)&&e.disconnect(t)}),this.soundGenerators.splice(this.soundGenerators.indexOf(e),1)}setMainOutputLevel(e){if(!this.initialized){console.warn("an attempt was made to set the main output level on an uninitialized sound manager, ignoring");return}this._mainOutputLevel=e,this.enabledProperty.value&&this.mainGainNode.gain.linearRampToValueAtTime(e,Ze.currentTime+Yu)}set mainOutputLevel(e){this.setMainOutputLevel(e)}get mainOutputLevel(){return this.getMainOutputLevel()}getMainOutputLevel(){return this._mainOutputLevel}setOutputLevelForCategory(e,t){if(!this.initialized){console.warn("an attempt was made to set the output level for a sound category on an uninitialized sound manager, ignoring");return}const i=this.gainNodesForCategories.get(e);i&&i.gain.setValueAtTime(t,Ze.currentTime)}addDuckingProperty(e){this.duckingProperties.add(e)}removeDuckingProperty(e){this.duckingProperties.remove(e)}getOutputLevelForCategory(e){return this.initialized?this.gainNodesForCategories.get(e).gain.value:(console.warn("an attempt was made to get the output level for a sound category on an uninitialized sound manager, returning 0"),0)}setReverbLevel(e){if(!this.initialized){console.warn("an attempt was made to set the reverb level on an uninitialized sound manager, ignoring");return}if(e!==this._reverbLevel){const t=Ze.currentTime;this.reverbGainNode.gain.linearRampToValueAtTime(e,t+Yu),this.dryGainNode.gain.linearRampToValueAtTime(1-e,t+Yu),this._reverbLevel=e}}set reverbLevel(e){this.setReverbLevel(e)}get reverbLevel(){return this.getReverbLevel()}getReverbLevel(){return this._reverbLevel}set enabled(e){this.enabledProperty.value=e}get enabled(){return this.enabledProperty.value}set sonificationLevel(e){this.extraSoundEnabledProperty.value=e===da.EXTRA}get sonificationLevel(){return this.extraSoundEnabledProperty.value?da.EXTRA:da.BASIC}logGain(e,t){}logMainGain(e){this.mainGainNode&&this.logGain(this.mainGainNode,e)}logReverbGain(e){this.reverbGainNode&&this.logGain(this.reverbGainNode,e)}}const Rf=new N3,M3=.05,O3=[1,Math.pow(Gr.TWELFTH_ROOT_OF_TWO,2),Math.pow(Gr.TWELFTH_ROOT_OF_TWO,4),Math.pow(Gr.TWELFTH_ROOT_OF_TWO,5),Math.pow(Gr.TWELFTH_ROOT_OF_TWO,7),Math.pow(Gr.TWELFTH_ROOT_OF_TWO,9),Math.pow(Gr.TWELFTH_ROOT_OF_TWO,11)],q3={detectSoundBounds:n=>{const e=n.length,t=[],i=[];for(let r=0;r<n.numberOfChannels;r++){const o=n.getChannelData(r);t[r]=F3(o,e,M3),i[r]=z3(o,e)}const s=n.sampleRate;return{soundStart:te.min(t)/s,soundEnd:te.max(i)/s}},getMajorScalePlaybackRate:n=>{const e=n%7,t=Math.floor(n/7);return Math.pow(2,t)*O3[e]}},F3=(n,e,t)=>{let i=0,s,r=!1;for(s=0;s<e-1&&!r;s++)n[s]>t&&n[s+1]>n[s]&&(i=s,r=!0);let o=0;for(r=!1,s=i;s>0&&!r;s--){const g=n[s];g<=0&&(o=g===0?s:s+1,r=!0)}let c=0,p=0;for(s=0;s<o;s++)c=Math.max(c,n[s]),p=Math.min(p,n[s]);return o},z3=(n,e,t)=>{let i=e-1,s=!1,r;for(r=e-1;r>0&&!s;r--)n[r]<=-.05&&n[r-1]<n[r]&&(i=r,s=!0);let o=i;for(s=!1,r=i;r<e-1&&!s;r++)n[r+1]>=0&&(o=r,s=!0);let c=0,p=0;for(r=o;r<e;r++)c=Math.max(c,n[r]),p=Math.min(p,n[r]);return o},H3=new ui(!1),K3=Gr.DEFAULT_PARAM_CHANGE_TIME_CONSTANT;class U3 extends Kf{constructor(e){const t=lt()({initialOutputLevel:1,audioContext:Ze,connectImmediately:!1,sonificationLevel:da.BASIC,additionalAudioNodes:[],associatedViewNode:null,enabledDuringReset:!1,enabledDuringPhetioStateSetting:!1},e);super(t),this.audioContext=t.audioContext,this._outputLevel=t.initialOutputLevel,this.connectionList=[],this.mainGainNode=this.audioContext.createGain(),this.mainGainNode.gain.setValueAtTime(this._outputLevel,this.audioContext.currentTime);const i=t.associatedViewNode?new sN(t.associatedViewNode):new di(!0);this.fullyEnabledProperty=new Oi([Rf.enabledProperty,this.enabledProperty,H3,i,Rf.extraSoundEnabledProperty,Pc],(s,r,o,c,p,g)=>s&&r&&c&&(t.sonificationLevel===da.BASIC||p)&&(!o||t.enabledDuringReset)&&(!g||t.enabledDuringPhetioStateSetting)),t.connectImmediately&&this.mainGainNode.connect(this.audioContext.destination),this.fullyEnabledProperty.link(s=>{const r=s?0:this._outputLevel,o=s?this._outputLevel:0,c=this.audioContext.currentTime;this.mainGainNode.gain.setValueAtTime(r,c),this.mainGainNode.gain.linearRampToValueAtTime(o,this.audioContext.currentTime+Gr.DEFAULT_LINEAR_GAIN_CHANGE_TIME)}),this.soundSourceDestination=this.mainGainNode;for(let s=t.additionalAudioNodes.length-1;s>=0;s--){const r=t.additionalAudioNodes[s];r.connect(this.soundSourceDestination),this.soundSourceDestination=r}this.disposeEmitter.addListener(()=>{this.fullyEnabledProperty.dispose()})}connect(e){this.mainGainNode.connect(e),this.connectionList.push(e)}disconnect(e){this.mainGainNode.disconnect(e),this.connectionList=te.without(this.connectionList,e)}isConnectedTo(e){return this.connectionList.includes(e)}setOutputLevel(e,t=K3){if(e!==this._outputLevel){const i=this.audioContext.currentTime;this.fullyEnabledProperty.value&&(this.mainGainNode.gain.cancelScheduledValues(i),t===0?this.mainGainNode.gain.setValueAtTime(e,i):this.audioContext.state==="running"?this.mainGainNode.gain.setTargetAtTime(e,i,t):this.mainGainNode.gain.linearRampToValueAtTime(e,i+Gr.DEFAULT_LINEAR_GAIN_CHANGE_TIME)),this._outputLevel=e}}set outputLevel(e){this.setOutputLevel(e)}get outputLevel(){return this.getOutputLevel()}getOutputLevel(){return this._outputLevel}get fullyEnabled(){return this.fullyEnabledProperty.value}}const Y3=.2,G3=Gr.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,W3=.1;class qV extends U3{constructor(e,t){const i=lt()({loop:!1,trimSilence:!0,initialPlaybackRate:1,initiateWhenDisabled:!1,rateChangesAffectPlayingSounds:!0},t);if(super(i),this.wrappedAudioBuffer=e,this.loop=i.loop,this.rateChangesAffectPlayingSounds=i.rateChangesAffectPlayingSounds,this.initiateWhenDisabled=i.initiateWhenDisabled,this.soundStart=0,this.soundEnd=null,i.trimSilence){const s=r=>{if(r){const o=q3.detectSoundBounds(r);this.soundStart=o.soundStart,this.soundEnd=o.soundEnd,this.wrappedAudioBuffer.audioBufferProperty.unlink(s)}};this.wrappedAudioBuffer.audioBufferProperty.link(s)}this.activeBufferSources=[],this.localGainNode=this.audioContext.createGain(),this.localGainNode.connect(this.soundSourceDestination),this._playbackRate=i.initialPlaybackRate,this.isPlayingProperty=new di(!1),this.timeOfDeferredPlayRequest=Number.NEGATIVE_INFINITY,this.audioContextStateChangeListener=s=>{s==="running"&&((this.loop||(Date.now()-this.timeOfDeferredPlayRequest)/1e3<Y3)&&this.play(.1),Eo.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener))},this.fullyEnabledProperty.lazyLink(s=>{!this.loop&&!s&&this.stop()}),this.disposeEmitter.addListener(()=>{Eo.hasListener(this.audioContext,this.audioContextStateChangeListener)&&Eo.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener)})}play(e=0){if(this.audioContext.state==="running"&&this.wrappedAudioBuffer.audioBufferProperty.value){const t=this.audioContext.currentTime;if(this.loop&&!this.isPlayingProperty.get()||!this.loop&&(this.fullyEnabled||this.initiateWhenDisabled)){const i=this.audioContext.createBufferSource();i.buffer=this.wrappedAudioBuffer.audioBufferProperty.value,i.loop=this.loop,i.loopStart=this.soundStart,this.soundEnd&&(i.loopEnd=this.soundEnd),this.localGainNode.gain.cancelScheduledValues(t),this.localGainNode.gain.setValueAtTime(1,t),i.connect(this.soundSourceDestination),this.activeBufferSources.push(i),this.loop||(i.onended=()=>{const s=this.activeBufferSources.indexOf(i);s>-1&&this.activeBufferSources.splice(s,1),this.isPlayingProperty.value=this.activeBufferSources.length>0}),i.playbackRate.setValueAtTime(this._playbackRate,t),i.start(t+e,this.soundStart),this.isPlayingProperty.value=!0}}else this.audioContext.state==="suspended"&&(this.timeOfDeferredPlayRequest=Date.now(),Eo.hasListener(this.audioContext,this.audioContextStateChangeListener)||Eo.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener))}stop(e=W3){const t=e>0?e/4.61:Gr.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,i=this.audioContext.currentTime,s=i+e;this.localGainNode.gain.cancelScheduledValues(i),this.localGainNode.gain.setTargetAtTime(0,i,t),this.activeBufferSources.forEach(r=>{r.stop(s)}),this.activeBufferSources.length=0,this.isPlayingProperty.value=!1,Eo.hasListener(this.audioContext,this.audioContextStateChangeListener)&&Eo.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener)}setPlaybackRate(e,t=G3){if(this.rateChangesAffectPlayingSounds){const i=this.audioContext.currentTime;this.activeBufferSources.forEach(s=>{s.playbackRate.cancelScheduledValues(i),s.playbackRate.setTargetAtTime(e,i,t)})}this._playbackRate=e}getPlaybackRate(){return this._playbackRate}get playbackRate(){return this.getPlaybackRate()}get isPlaying(){return this.isPlayingProperty.value}getNumberOfPlayingInstances(){return this.activeBufferSources.length}}class ry{constructor(e,t){const i=lt()({soundClipOptions:{},soundManagerOptions:{}},t);this._soundClip=new qV(e,i.soundClipOptions),Rf.addSoundGenerator(this._soundClip,i.soundManagerOptions)}play(){this._soundClip.play()}stop(){this._soundClip.stop()}}const Er={soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}},X3={wrappedAudioBuffer:Ll,soundClipPlayerOptions:Er},la=n=>Ci({},Er,{soundClipOptions:{initialOutputLevel:n}}),dm=new Map,r0={get(n){if(!dm.has(n)){const e=j3.get(n)||X3;dm.set(n,new ry(e.wrappedAudioBuffer,e.soundClipPlayerOptions))}return dm.get(n)}},j3=new Map([["accordionBoxClosed",{wrappedAudioBuffer:Oh,soundClipPlayerOptions:la(.5)}],["accordionBoxOpened",{wrappedAudioBuffer:qh,soundClipPlayerOptions:la(.5)}],["boundaryReached",{wrappedAudioBuffer:Fh,soundClipPlayerOptions:la(.8)}],["checkboxChecked",{wrappedAudioBuffer:zh,soundClipPlayerOptions:Er}],["checkboxUnchecked",{wrappedAudioBuffer:Hh,soundClipPlayerOptions:Er}],["erase",{wrappedAudioBuffer:Uh,soundClipPlayerOptions:la(.22)}],["generalBoundaryBoop",{wrappedAudioBuffer:Il,soundClipPlayerOptions:la(.2)}],["generalClose",{wrappedAudioBuffer:Gh,soundClipPlayerOptions:la(.4)}],["generalOpen",{wrappedAudioBuffer:Wh,soundClipPlayerOptions:la(.4)}],["generalSoftClick",{wrappedAudioBuffer:xl,soundClipPlayerOptions:la(.2)}],["grab",{wrappedAudioBuffer:Xh,soundClipPlayerOptions:Er}],["pause",{wrappedAudioBuffer:jh,soundClipPlayerOptions:Er}],["play",{wrappedAudioBuffer:Qh,soundClipPlayerOptions:Er}],["pushButton",{wrappedAudioBuffer:Yh,soundClipPlayerOptions:la(.5)}],["release",{wrappedAudioBuffer:Zh,soundClipPlayerOptions:Er}],["resetAll",{wrappedAudioBuffer:Ll,soundClipPlayerOptions:{soundClipOptions:{initialOutputLevel:.39,enabledDuringReset:!0,enabledDuringPhetioStateSetting:!0},soundManagerOptions:{categoryName:"user-interface"}}}],["softClick",{wrappedAudioBuffer:Kh,soundClipPlayerOptions:Er}],["stepBackward",{wrappedAudioBuffer:kl,soundClipPlayerOptions:Er}],["stepForward",{wrappedAudioBuffer:Bl,soundClipPlayerOptions:Er}],["switchToLeft",{wrappedAudioBuffer:Jh,soundClipPlayerOptions:la(.2)}],["switchToRight",{wrappedAudioBuffer:$h,soundClipPlayerOptions:la(.2)}],["toggleOff",{wrappedAudioBuffer:kl,soundClipPlayerOptions:Er}],["toggleOn",{wrappedAudioBuffer:Bl,soundClipPlayerOptions:Er}]]);function Q3(n,e){return n.map(t=>t.createNode(e&&t.tandemName?e.createTandem(t.tandemName):Xe.OPTIONAL))}class An extends bn{}An.IDLE=new An;An.OVER=new An;An.PRESSED=new An;An.enumeration=new br(An);const Lb={LIGHT_BLUE:new et(153,206,255),LIGHT_GRAY:new et(220,220,220)},Z3=new t0(.7),J3=new e0(1.2);class ap extends lu(tr(At)){constructor(e,t,i,s){var A;const r=lt()({content:null,xMargin:10,yMargin:5,xAlign:"center",yAlign:"center",xContentOffset:0,yContentOffset:0,baseColor:Lb.LIGHT_BLUE,cursor:"pointer",buttonAppearanceStrategy:ap.FlatAppearanceStrategy,buttonAppearanceStrategyOptions:{},contentAppearanceStrategy:null,contentAppearanceStrategyOptions:{},enabledAppearanceStrategy:(C,D,P,F)=>{P.filters=C?[]:[Z3,J3],F&&(F.filters=C?[]:[i0.FULL],F.opacity=C?1:Cc.DISABLED_OPACITY)},disabledColor:Lb.LIGHT_GRAY,tagName:"button",tandemNameSuffix:"Button",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},s);r.listenerOptions=Ci({tandem:(A=r.tandem)==null?void 0:A.createTandem("pressListener")},r.listenerOptions),r.enabledProperty=e.enabledProperty,super(),this.contentContainer=null,this.layoutSizeProperty=new ui(new ps(0,0)),this.content=r.content,this.buttonModel=e,this._settableBaseColorProperty=new ca(r.baseColor),this._disabledColorProperty=new ca(r.disabledColor),this.baseColorProperty=new Oi([this._settableBaseColorProperty,this.enabledProperty,this._disabledColorProperty],(C,D,P)=>D?C:P),this._pressListener=e.createPressListener(r.listenerOptions),this.addInputListener(this._pressListener),t.fill=this.baseColorProperty,this.addChild(t);const o=new r.buttonAppearanceStrategy(t,i,this.baseColorProperty,r.buttonAppearanceStrategyOptions);let c;r.contentAppearanceStrategy&&r.content&&(c=new r.contentAppearanceStrategy(r.content,i,r.contentAppearanceStrategyOptions)),this.maxLineWidth=o.maxLineWidth;let p=null,g=null;r.content&&(this.contentContainer=new At({children:[r.content],pickable:!1}),p=new lV(this.contentContainer,{xAlign:r.xAlign,yAlign:r.yAlign,leftMargin:r.xMargin+r.xContentOffset,rightMargin:r.xMargin-r.xContentOffset,topMargin:r.yMargin+r.yContentOffset,bottomMargin:r.yMargin-r.yContentOffset}),g=_n.multilink([t.boundsProperty,this.layoutSizeProperty],(C,D)=>{D.width>0&&D.height>0&&(p.alignBounds=Je.point(C.center).dilatedXY(D.width/2,D.height/2))}),this.addChild(p)),this.mutate(r),this.enabledProperty.link(C=>r.enabledAppearanceStrategy(C,this,t,p)),this.disposeButtonNode=()=>{p&&p.dispose(),g&&g.dispose(),o.dispose&&o.dispose(),c&&c.dispose&&c.dispose(),this._pressListener.dispose(),this.baseColorProperty.dispose(),this._settableBaseColorProperty.dispose(),this._disabledColorProperty.dispose()}}dispose(){this.disposeButtonNode(),super.dispose()}setBaseColor(e){this._settableBaseColorProperty.paint=e}set baseColor(e){this.setBaseColor(e)}get baseColor(){return this.getBaseColor()}getBaseColor(){return this._settableBaseColorProperty.paint}pdomClick(){this._pressListener.click(null)}}class $3{constructor(e,t,i,s){const r=new ca(i,{luminanceFactor:.4}),o=new ca(i,{luminanceFactor:-.4}),c=i,p=r,g=o,A=Ci({stroke:o},s),C=typeof A.lineWidth=="number"?A.lineWidth:1;e.stroke=A.stroke||o,e.lineWidth=C,this.maxLineWidth=e.hasStroke()?C:0,e.cachedPaints=[c,p,g];function D(P){switch(P){case An.IDLE:e.fill=c;break;case An.OVER:e.fill=p;break;case An.PRESSED:e.fill=g;break;default:throw new Error(`unsupported interactionState: ${P}`)}}t.link(D),this.disposeFlatAppearanceStrategy=()=>{t.hasListener(D)&&t.unlink(D),r.dispose(),o.dispose()}}dispose(){this.disposeFlatAppearanceStrategy()}}ap.FlatAppearanceStrategy=$3;const FV=7,zV=7,Nf=3;class op extends ap{constructor(e,t,i){let s=lt()({size:null,minWidth:zV+Nf,minHeight:FV+Nf,xMargin:8,yMargin:5,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,touchAreaXShift:0,touchAreaYShift:0,mouseAreaXShift:0,mouseAreaYShift:0,stroke:null,lineWidth:.5,cornerRadius:4,leftTopCornerRadius:null,rightTopCornerRadius:null,leftBottomCornerRadius:null,rightBottomCornerRadius:null,buttonAppearanceStrategy:op.ThreeDAppearanceStrategy},i);s.content,s.size,s.buttonAppearanceStrategyOptions||(s.buttonAppearanceStrategyOptions={stroke:s.stroke,lineWidth:s.lineWidth});const r=new Xs(null),o=te.pick(s,At.REQUIRES_BOUNDS_OPTION_KEYS);s=te.omit(s,At.REQUIRES_BOUNDS_OPTION_KEYS),super(e,r,t,s),this.buttonNodeConstraint=new iO(this,this.layoutSizeProperty,{content:s.content??null,size:s.size,buttonBackground:r,buttonBackgroundOptions:s,minWidth:s.minWidth,minHeight:s.minHeight,xMargin:s.xMargin,yMargin:s.yMargin,maxLineWidth:this.maxLineWidth,touchAreaXDilation:s.touchAreaXDilation,touchAreaYDilation:s.touchAreaYDilation,touchAreaXShift:s.touchAreaXShift,touchAreaYShift:s.touchAreaYShift,mouseAreaXDilation:s.mouseAreaXDilation,mouseAreaYDilation:s.mouseAreaYDilation,mouseAreaXShift:s.mouseAreaXShift,mouseAreaYShift:s.mouseAreaYShift}),this.addDisposable(this.buttonNodeConstraint),this.mutate(o)}}function eO(n,e,t){const i=Math.min(n/2,e/2);return Tt.roundedRectangleWithRadii(0,0,n,e,{topLeft:Math.min(i,t.leftTopCornerRadius!==null?t.leftTopCornerRadius:t.cornerRadius),topRight:Math.min(i,t.rightTopCornerRadius!==null?t.rightTopCornerRadius:t.cornerRadius),bottomLeft:Math.min(i,t.leftBottomCornerRadius!==null?t.leftBottomCornerRadius:t.cornerRadius),bottomRight:Math.min(i,t.rightBottomCornerRadius!==null?t.rightBottomCornerRadius:t.cornerRadius)})}class tO{constructor(e,t,i,s){const r=s&&s.stroke?s.stroke:new ca(i,{luminanceFactor:-.4}),o=s&&s.lineWidth!==void 0?s.lineWidth:.5,c=lt()({stroke:r,lineWidth:o,overStroke:r,overLineWidth:o,overFill:i,overButtonOpacity:1,selectedStroke:r,selectedLineWidth:o,selectedButtonOpacity:1,deselectedStroke:r,deselectedFill:null,deselectedLineWidth:o,deselectedButtonOpacity:1},s),p=new ca(i,{luminanceFactor:.7}),g=new ca(i,{luminanceFactor:.5}),A=new ca(i,{luminanceFactor:.2}),C=new ca(i,{luminanceFactor:-.3}),D=new ca(i,{luminanceFactor:-.4}),P=new ca(i,{luminanceFactor:-.5}),F=new Oi([i],re=>re.withAlpha(0)),K=new et(255,255,255,.7),M=new Xs(null,{stroke:c.stroke,lineWidth:c.lineWidth,pickable:!1});e.addChild(M),this.maxLineWidth=typeof c.lineWidth=="number"?c.lineWidth:0;let U;const $=()=>{if(!e.shape)return;const re=e.shape.bounds.width,pe=e.shape.bounds.height;M.shape=e.shape;const ce=Math.min(FV/pe,1),T=Math.max(1-Nf/pe,0),Ce=Math.min(zV/re,1),ze=Math.max(1-Nf/re,0),be=new To(0,0,0,pe).addColorStop(0,p).addColorStop(ce,i).addColorStop(T,i).addColorStop(1,P),Be=new To(0,0,re,0).addColorStop(0,K).addColorStop(Ce,F).addColorStop(ze,F).addColorStop(1,P),xe=new To(0,0,0,pe).addColorStop(0,p).addColorStop(ce,g).addColorStop(T,g).addColorStop(1,P),Qe=new To(0,0,re,0).addColorStop(0,K).addColorStop(Ce/2,new et(255,255,255,0)).addColorStop(ze,F).addColorStop(1,C),Fe=new To(0,0,0,pe).addColorStop(0,p).addColorStop(ce*.67,C).addColorStop(T,A).addColorStop(1,P);e.cachedPaints=[be,xe,Fe],M.cachedPaints=[Be,Qe],U&&t.unlink(U),U=Ye=>{switch(Ye){case An.IDLE:e.fill=c.deselectedFill||be,e.stroke=c.deselectedStroke,e.lineWidth=c.deselectedLineWidth,e.opacity=c.deselectedButtonOpacity,M.fill=Be,M.opacity=c.deselectedButtonOpacity;break;case An.OVER:e.fill=xe,e.stroke=c.overStroke,e.lineWidth=c.overLineWidth,e.opacity=c.overButtonOpacity,M.fill=Qe,M.opacity=c.overButtonOpacity;break;case An.PRESSED:e.fill=Fe,e.stroke=c.selectedStroke,e.lineWidth=c.selectedLineWidth,e.opacity=c.selectedButtonOpacity,M.fill=Qe,M.opacity=c.selectedButtonOpacity;break;default:throw new Error(`unsupported interactionState: ${Ye}`)}},t.link(U)};e.selfBoundsProperty.link($),this.disposeThreeDAppearanceStrategy=()=>{e.selfBoundsProperty.unlink($),t.hasListener(U)&&t.unlink(U),p.dispose(),g.dispose(),A.dispose(),C.dispose(),D.dispose(),P.dispose(),F.dispose()}}dispose(){this.disposeThreeDAppearanceStrategy()}}op.ThreeDAppearanceStrategy=tO;class iO extends Ul{constructor(e,t,i){super(e),this.buttonNode=e,this.layoutSizeProperty=t,this.isFirstLayout=!0,this.lastLocalWidth=0,this.lastLocalHeight=0,this.options=i,this.buttonNode.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.options.content&&this.addNode(this.options.content),this.layout()}layout(){super.layout();const e=this.buttonNode,t=this.options.content,i=t?this.createLayoutProxy(t):null;if(!!t!=!!i)return;const s=e.widthSizable,r=e.heightSizable;let o=i?i.minimumWidth+this.options.xMargin*2:0,c=i?i.minimumHeight+this.options.yMargin*2:0;this.options.size&&(o=this.options.size.width,c=this.options.size.height),this.options.minWidth&&(o=Math.max(this.options.minWidth+this.options.maxLineWidth,o)),this.options.minHeight&&(c=Math.max(this.options.minHeight+this.options.maxLineWidth,c));const p=this.isFirstLayout||s?o:e.localMinimumWidth,g=this.isFirstLayout||r?c:e.localMinimumHeight;if(this.lastLocalWidth=this.isFirstLayout||s?Math.max(p,s?e.localPreferredWidth??0:0):this.lastLocalWidth,this.lastLocalHeight=this.isFirstLayout||r?Math.max(g,r?e.localPreferredHeight??0:0):this.lastLocalHeight,(this.isFirstLayout||s||r)&&(this.options.buttonBackground.shape=eO((s?this.lastLocalWidth:p)-this.options.maxLineWidth,(r?this.lastLocalHeight:g)-this.options.maxLineWidth,this.options.buttonBackgroundOptions),this.buttonNode.touchArea=this.options.buttonBackground.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation).shiftedXY(this.options.touchAreaXShift,this.options.touchAreaYShift),this.buttonNode.mouseArea=this.options.buttonBackground.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation).shiftedXY(this.options.mouseAreaXShift,this.options.mouseAreaYShift)),i){const A=this.lastLocalWidth-this.options.xMargin*2,C=this.lastLocalHeight-this.options.yMargin*2;if(i.preferredWidth=A,i.preferredHeight=C,this.options.size){const D=this.buttonNode.contentContainer;D.maxWidth=A,D.maxHeight=C}}this.isFirstLayout=!1,this.layoutSizeProperty.value=new ps(this.lastLocalWidth,this.lastLocalHeight),e.localMinimumWidth=p,e.localMinimumHeight=g,i&&i.dispose()}dispose(){this.buttonNode.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.unlink(this._updateLayoutListener),super.dispose()}}class sO extends Kf{constructor(e){const t=lt()({startCallback:te.noop,endCallback:te.noop,tandem:Xe.REQUIRED,phetioState:Gi.DEFAULT_OPTIONS.phetioState,phetioReadOnly:Gi.DEFAULT_OPTIONS.phetioReadOnly,phetioFeatured:Gi.DEFAULT_OPTIONS.phetioFeatured},e);t.enabledPropertyOptions=Ci({phetioState:t.phetioState,phetioReadOnly:t.phetioReadOnly,phetioDocumentation:"When disabled, the button is grayed out and cannot be pressed",phetioFeatured:!0},t.enabledPropertyOptions),super(t),this.overProperty=new di(!1),this.downProperty=new di(!1,{reentrant:!0}),this.pdomClickingProperty=new di(!1),this.focusedProperty=new di(!1),this.looksPressedProperty=new di(!1),this.isOverOrFocusedProperty=new di(!1),this.produceSoundEmitter=new Os,this.interrupted=!1,this.listeners=[],this.looksPressedMultilink=null,this.overOrFocusedMultilink=null,this.downProperty.lazyLink(i=>{i?t.startCallback():t.endCallback(this.isOverOrFocusedProperty.get())}),this.enabledProperty.link(i=>{if(!i)for(let s=0;s<this.listeners.length;s++){const r=this.listeners[s];r.interrupt&&r.interrupt()}}),this.disposeButtonModel=()=>{this.overProperty.dispose(),this.downProperty.dispose(),this.pdomClickingProperty.dispose(),this.produceSoundEmitter.dispose(),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.overOrFocusedMultilink&&this.overOrFocusedMultilink.dispose(),this.listeners=[]}}dispose(){this.disposeButtonModel(),super.dispose()}createPressListener(e){e=Ci({canStartPress:()=>this.enabledProperty.value},e);const t=new No(e);this.listeners.push(t),t.isPressedProperty.lazyLink(r=>{this.interrupted=t.interrupted,this.downProperty.set(r)}),t.isOverProperty.lazyLink(this.overProperty.set.bind(this.overProperty)),t.isFocusedProperty.lazyLink(this.focusedProperty.set.bind(this.focusedProperty)),t.pdomClickingProperty.lazyLink(this.pdomClickingProperty.set.bind(this.pdomClickingProperty)),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.overOrFocusedMultilink&&this.overOrFocusedMultilink.dispose();const i=this.listeners.map(r=>r.looksPressedProperty);i.push(this.downProperty),this.looksPressedMultilink=_n.multilinkAny(i,(...r)=>{this.looksPressedProperty.value=te.reduce(r,(o,c)=>o||c,!1)});const s=this.listeners.map(r=>r.isOverOrFocusedProperty);return this.overOrFocusedMultilink=_n.multilinkAny(s,(...r)=>{this.isOverOrFocusedProperty.value=te.reduce(r,(o,c)=>o||c,!1)}),t}}const HV="data:audio/mpeg;base64,//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAFAAAE5AAzMzMzMzMzMzMzMzMzMzMzMzMzZmZmZmZmZmZmZmZmZmZmZmZmZmaZmZmZmZmZmZmZmZmZmZmZmZmZmczMzMzMzMzMzMzMzMzMzMzMzMzM//////////////////////////8AAAA5TEFNRTMuOTlyAaUAAAAAAAAAABRAJAZmQgAAQAAABOTGvClKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjxrv+ggLoZGTXh9oJQAa222FG3ASABBG51MY/j4AAB4AYI3/H3//Pqd/zv0Jp/8//zn3n6Mmf/J7f//8jf+fOeeggHA4RXkGh8XEwHAMHD4udyCYuhAALhgJqWJAEDGMYxvHlyAHxc9P76dP//T/Rm//p+v9tvb0Tzr1XyfnelP/3b0//5vo86Mlm0dHQrscccRQg5oSYpziaiB52oQCkxnR6LQisRCEMhluyeqEhIiWMiSvQjhwDTCtCPyDkNrP+UsBTNwVsJGSD/+1LEFoAQMWtluYaQEWGP7H+wYAR9IvpDLBawV8OWbG5oShmbiVnh8GAU6ZIjnetMKuOcpmaSndX80HuS7puaIKq/6lvM36lIJf8+Zm6CFA0t3fV/91IOhPJ1GCH13q//5o6DJl9/F3ErtwAGRlJ26tx4H5gV4lzzrIqy8jTNBZl1Hep3doI2/x6AMOljV5/M4clzeagOVs4SmnmZk2fTyahylhxZ1R7/1HlnhEe4KgF3SISoKnviYs9T8sp4Ku5ICsAAg3RwNdct5GVqea2W4P/7UsQHgAuZRzrtmE8JO4qkaa4M4MXAzUcoyYPSsZe/D4w5DUicEmE/ziQka1VaLTh0y8+qp/UtRMpQoli5jYCz6St//RjTOrPXlI/KJaZ2RHX6mMrJqxfqVjPM/K/thi6pyAAPlyOxkEr9tPgR2ldNwBRI0383ZJR5NmIAG2zBZOw1tKaJR6jzjIxgTlVLjBgJmawwRo8JXAUYCz1gr/q+aVWur8tO+j4iUe////6ii3UCwZHQhxd93nYdy9H1MjPwThY/VGgQQLo200aOkCDF//tSxA+CCwg1HK3lIQHXlCPo97AIw8D44EBOcB8oGBIND4gcCBc+IFHC7wwUOA+oMiAaH1PDCw+mxbydxPV3/zjbCnci8p/9nIJTQYSH5vktZIAEdHIA5HkiS4k11MYsCUFS8QSbEVhJUnQlFpKIJNQhJJrBKEZ8kiKoJIkqToSj5KJJ6hiCTXCUJUZJEl45Ek9TCUfQkkyuSSbzS72V1mVruLnhMeBUsHREPDQiPA0VOiJwdKuBlR5Fqtbk3f///t8FdSogAuxJp2uAWhIWFmv/+1LEBgPGHADHoIhgIAAANIAAAATcLVLFRWKCwsLCyxUVFVf6xVmLCws1YqKior////2RVn/+LCwtTEFNRTMuOTkuM1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",nO=Fs(Ze,HV),rO=vs.createLock(HV),eu=new zs;let kb=!1;const Mf=()=>{kb||(rO(),kb=!0)},aO=n=>{eu.audioBufferProperty.value===null&&(eu.audioBufferProperty.set(n),Mf())},oO=n=>{console.warn("decode of audio data failed, using stubbed sound, error: "+n),eu.audioBufferProperty.set(Ze.createBuffer(1,1,Ze.sampleRate)),Mf()},Bb=Ze.decodeAudioData(nO.buffer,aO,oO);Bb&&Bb.then(n=>{eu.audioBufferProperty.value===null&&(eu.audioBufferProperty.set(n),Mf())}).catch(n=>{console.warn("promise rejection caught for audio decode, error = "+n),Mf()});class lO{constructor(){this._basisSoundClip=null,this.soundPlayers=[]}getSoundClipInstance(){return this._basisSoundClip||(this._basisSoundClip=new qV(eu,{initialOutputLevel:.7,rateChangesAffectPlayingSounds:!1}),Rf.addSoundGenerator(this._basisSoundClip,{categoryName:"user-interface"})),this._basisSoundClip}getSelectionSoundPlayer(e){if(!this.soundPlayers[e]){const t=Math.pow(2,-e/12);this.soundPlayers[e]=new hO(this.getSoundClipInstance(),t)}return this.soundPlayers[e]}}class hO{constructor(e,t){this.soundPlayer=e,this.playbackRate=t}play(){this.soundPlayer.setPlaybackRate(this.playbackRate),this.soundPlayer.play()}stop(){this.soundPlayer.stop()}}const KV=new lO;class lp extends ep(tr(At)){constructor(e,t,i,s){const r=lt()({centerColor:"black",radius:lp.DEFAULT_RADIUS,selectedColor:"rgb( 143, 197, 250 )",deselectedColor:"white",xSpacing:8,stroke:"black",soundPlayer:KV.getSelectionSoundPlayer(0),a11yNameAttribute:null,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,cursor:"pointer",disabledOpacity:Cc.DISABLED_OPACITY,tandem:Xe.REQUIRED,tandemNameSuffix:"RadioButton",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!1,tagName:"input",inputType:"radio",containerTagName:"li",labelTagName:"label",appendLabel:!0,appendDescription:!0,accessibleNameBehavior:tr.BASIC_ACCESSIBLE_NAME_BEHAVIOR},s);super(),this.onInputEmitter=new Os,this._isMouseAreaCustomized=!1,this._isTouchAreaCustomized=!1,this._isSettingAreas=!1,this.value=t;const o=new At,c=new ic(r.radius/3,{fill:r.centerColor}),p=new ic(r.radius,{fill:r.selectedColor,stroke:r.stroke}),g=new At({children:[p,c]});o.addChild(g);const A=new At,C=new ic(r.radius,{fill:r.deselectedColor,stroke:r.stroke});A.addChild(C);const D=new At({children:[o,A],pickable:!1}),P=()=>{i.left=C.right+r.xSpacing,i.centerY=C.centerY};i.boundsProperty.link(P);const F=new As({});o.pickable=A.pickable=!1,i.pickable=!1,this.children=[D,i,F],this.constraint=new uO(this,D,i,F,r),this.constraint.updateLayout();const K=pe=>{o.visible=pe===t,A.visible=!o.visible};e.link(K);const M=()=>{const pe=e.value;e.set(t),pe!==e.value&&this.onInputEmitter.emit()},U=new af({fire:M,tandem:r.tandem});this.addInputListener(U),this.onInputEmitter.addListener(()=>{r.soundPlayer.play(),this.voicingSpeakNameResponse()});const $={change:M};this.addInputListener($),e.value===t&&this.setPDOMAttribute("checked","checked");const re=pe=>{this.pdomChecked=pe===t};e.link(re),r.accessibleName||(r.accessibleName=Zv(i)),r.a11yNameAttribute!==null&&this.setPDOMAttribute("name",r.a11yNameAttribute),this.mutate(r),this.disposeAquaRadioButton=()=>{this.constraint.dispose(),this.onInputEmitter.dispose(),this.removeInputListener(U),this.removeInputListener($),e.unlink(re),e.unlink(K),i.boundsProperty.hasListener(P)&&i.boundsProperty.unlink(P),U.dispose()}}dispose(){this.disposeAquaRadioButton(),super.dispose()}}lp.DEFAULT_RADIUS=7;class uO extends Ul{constructor(e,t,i,s,r){super(e),this.radioButton=e,this.radioNode=t,this.labelNode=i,this.rectangle=s,this.options=r,this.radioButton.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.addNode(i)}layout(){super.layout();const e=this.createLayoutProxy(this.labelNode),t=e.minimumWidth,i=this.radioNode.width+this.options.xSpacing+t,s=Math.max(i,this.radioButton.localPreferredWidth||0);bc(this.labelNode)&&(e.preferredWidth=s-this.radioNode.width-this.options.xSpacing),e.left=this.radioNode.right+this.options.xSpacing,e.centerY=this.radioNode.centerY,this.rectangle.rectBounds=this.radioNode.bounds.union(e.bounds).withMaxX(Math.max(this.radioNode.left+s,e.right)),this.radioButton._isSettingAreas=!0,this.radioButton._isTouchAreaCustomized||(this.radioButton.touchArea=this.radioButton.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation)),this.radioButton._isMouseAreaCustomized||(this.radioButton.mouseArea=this.radioButton.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation)),this.radioButton._isSettingAreas=!1,e.dispose(),this.radioButton.localMinimumWidth=i}dispose(){this.radioButton.localPreferredWidthProperty.unlink(this._updateLayoutListener),super.dispose()}}let Rb=0;const cO="AquaRadioButtonGroup";class dO extends kc{constructor(e,t,i){Rb++;const s=lt()({touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,orientation:"vertical",spacing:3,stretch:!0,disabledOpacity:Cc.DISABLED_OPACITY,tandem:Xe.REQUIRED,tandemNameSuffix:"RadioButtonGroup",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioFeatured:!0,tagName:"ul",labelTagName:"h3",ariaRole:"radiogroup",accessibleHelpTextBehavior:Ir.HELP_TEXT_BEFORE_CONTENT,groupFocusHighlight:!0},i),r=Q3(t,s.tandem);s.orientation==="vertical"&&(s.align=s.align||"left");const o=t.map((A,C)=>{const D=r[C];return new lp(e,A.value,D,Ci({a11yNameAttribute:cO+Rb,soundPlayer:KV.getSelectionSoundPlayer(C),tandem:A.tandemName?s.tandem.createTandem(A.tandemName):s.tandem===Xe.OPT_OUT?Xe.OPT_OUT:Xe.REQUIRED,touchAreaXDilation:s.orientation==="horizontal"?s.spacing/2:s.touchAreaXDilation,touchAreaYDilation:s.orientation==="vertical"?s.spacing/2:s.touchAreaYDilation,mouseAreaXDilation:s.orientation==="horizontal"?s.spacing/2:s.mouseAreaXDilation,mouseAreaYDilation:s.orientation==="vertical"?s.spacing/2:s.mouseAreaYDilation},s.radioButtonOptions,A.options))});s.children=o,super(s),this.onInputEmitter=new Os;const c=new nL(this);c.focusTargetProperty.link(A=>{if(A){const C=A;c.focusWasInGroup?C.voicingSpeakNameResponse():C.voicingSpeakFullResponse({contextResponse:null,hintResponse:this.accessibleHelpText})}}),this.addInputListener(c),this.addAriaLabelledbyAssociation({thisElementName:cn.PRIMARY_SIBLING,otherNode:this,otherElementName:cn.LABEL_SIBLING});const p={keydown:A=>{Ne.isArrowKey(A.domEvent)&&A.pointer.reserveForKeyboardDrag()}};this.addInputListener(p);const g=this.onRadioButtonInput.bind(this);for(let A=0;A<o.length;A++)o[A].onInputEmitter.addListener(g);this.addLinkedElement(e,{tandemName:"property"}),this.disposeAquaRadioButtonGroup=()=>{this.removeInputListener(p),o.forEach(A=>A.dispose()),this.onInputEmitter.dispose(),c.dispose(),r.forEach(A=>A.dispose())},this.radioButtons=o}onRadioButtonInput(){this.onInputEmitter.emit()}dispose(){this.disposeAquaRadioButtonGroup(),super.dispose()}getButton(e){return te.find(this.radioButtons,i=>i.value===e)}}class fO extends kI{constructor(e){super([e.focusedProperty,e.overProperty,e.isOverOrFocusedProperty,e.looksPressedProperty],(t,i,s,r)=>s&&!r?An.OVER:(i||t)&&r?An.PRESSED:An.IDLE,{valueType:An})}}class pO extends sO{constructor(e){const t=lt()({fireOnDown:!1,listener:null,interruptListener:null,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:Xe.REQUIRED,phetioReadOnly:Gi.DEFAULT_OPTIONS.phetioReadOnly},e);super(t),this.startEvent=null,this.isFiringProperty=new di(!1),this.firedEmitter=new Os({tandem:t.tandem.createTandem("firedEmitter"),phetioDocumentation:"Emits when the button is fired",phetioReadOnly:t.phetioReadOnly,phetioEventType:si.USER,hasListenerOrderDependencies:!0}),t.interruptListener&&this.firedEmitter.addListener(()=>{t.interruptListener(this.startEvent)}),t.listener!==null&&this.firedEmitter.addListener(t.listener),t.fireOnHold&&(this.timer=new p1({callback:this.fire.bind(this),delay:t.fireOnHoldDelay,interval:t.fireOnHoldInterval}));const i=r=>{var o,c,p,g;if(r)this.enabledProperty.get()&&(this.startEvent=((g=(p=(c=(o=self.phet)==null?void 0:o.joist)==null?void 0:c.display)==null?void 0:p._input)==null?void 0:g.currentSceneryEvent)||null,t.fireOnDown&&this.fire(),this.timer&&this.timer.start(),(t.fireOnDown||this.timer)&&this.produceSoundEmitter.emit());else{const A=!t.fireOnDown&&(this.overProperty.get()||this.focusedProperty.get())&&this.enabledProperty.get()&&!this.interrupted;this.timer?this.timer.stop(A):A&&(this.produceSoundEmitter.emit(),this.fire())}};this.downProperty.link(i);const s=r=>{!r&&this.timer&&this.timer.stop(!1)};this.enabledProperty.link(s),this.disposePushButtonModel=()=>{this.isFiringProperty.value=!1,this.isFiringProperty.dispose(),this.firedEmitter.dispose(),this.downProperty.unlink(i),this.enabledProperty.unlink(s),this.timer&&(this.timer.dispose(),this.timer=null)}}dispose(){this.disposePushButtonModel(),super.dispose()}addListener(e){this.firedEmitter.addListener(e)}removeListener(e){this.firedEmitter.removeListener(e)}fire(){this.isFiringProperty.value=!0,this.firedEmitter.emit(),this.isFiringProperty.value=!1}}class gO extends op{constructor(e){const t=lt()({soundPlayer:r0.get("pushButton"),tandem:Xe.REQUIRED,listenerOptions:{tandem:Xe.OPT_OUT}},e),i=t.listener,s=te.omit(t,["listener"]),r=new pO(s);super(r,new fO(r),s),this.pushButtonModel=r,i&&this.addListener(i);const o=()=>{t.soundPlayer.play()};r.produceSoundEmitter.addListener(o),this.disposeRectangularPushButton=function(){r.produceSoundEmitter.removeListener(o),r.dispose()}}dispose(){super.dispose(),this.disposeRectangularPushButton()}addListener(e){this.pushButtonModel.addListener(e)}removeListener(e){this.pushButtonModel.removeListener(e)}}class mO{play(){}stop(){}}const fm=new mO,UV={SLIDER_VERTICAL_ROTATION:-Math.PI/2},YV={fill:"white",stroke:"black",lineWidth:1,lineDash:[],xMargin:5,yMargin:5,cornerRadius:10,resize:!0,backgroundPickable:!0,excludeInvisibleChildrenFromBounds:!0,align:"left",minWidth:0,minHeight:0,labelTagName:"span",accessibleHelpTextBehavior:Ir.HELP_TEXT_BEFORE_CONTENT};class ay extends lu(At){constructor(e,t){const i=ko()({},YV,t);super(),this._content=e,this._backgroundContainer=new At,this._background=new As(0,0,1,1,{lineWidth:i.lineWidth,pickable:i.backgroundPickable,lineDash:i.lineDash,cornerRadius:i.cornerRadius}),this.setStroke(i.stroke),this.setFill(i.fill),this.addChild(this._backgroundContainer),this.addChild(e),this.constraint=new yO(this,i),this.constraint.updateLayout(),this.constraint.enabled=i.resize,this.mutate(i)}getStroke(){return this._background.stroke}get stroke(){return this.getStroke()}set stroke(e){this.setStroke(e)}setStroke(e){this._background.stroke=e,this.constraint&&this.constraint.updateLayoutAutomatically()}getFill(){return this._background.fill}get fill(){return this.getFill()}set fill(e){this.setFill(e)}setFill(e){this._background.fill=e}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this.constraint.updateLayoutAutomatically()}}ay.DEFAULT_PANEL_OPTIONS=YV;class yO extends Ul{constructor(e,t){super(e),this.panel=e,this.minWidth=t.minWidth,this.minHeight=t.minHeight,this.xMargin=t.xMargin,this.yMargin=t.yMargin,this.lineWidth=t.lineWidth,this.align=t.align,this.panel.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.panel.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.addNode(e._content)}layout(){super.layout();const e=this.panel,t=e._content,i=e._background,s=e.isChildIncludedInLayout(t);if(e._backgroundContainer.children=s?[i]:[],!s){e.localMinimumWidth=null,e.localMinimumHeight=null;return}const r=this.createLayoutProxy(t);if(!r)return;const o=e.stroke===null?0:this.lineWidth,c=r.minimumWidth,p=r.minimumHeight,g=Math.max(this.minWidth,c+2*this.xMargin)+o,A=Math.max(this.minHeight,p+2*this.yMargin)+o,C=Math.max(g,e.localPreferredWidth||0),D=Math.max(A,e.localPreferredHeight||0);r.preferredWidth=C-o-2*this.xMargin,r.preferredHeight=D-o-2*this.yMargin,i.setRect(0,0,C-o,D-o),this.align==="center"?r.center=i.center:this.align==="left"?(r.left=i.centerX-i.rectWidth/2+this.xMargin,r.centerY=i.centerY):(r.right=i.centerX+i.rectWidth/2-this.xMargin,r.centerY=i.centerY),e.localMinimumWidth=g,e.localMinimumHeight=A,r.dispose()}dispose(){this.panel.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.panel.localPreferredHeightProperty.unlink(this._updateLayoutListener),super.dispose()}}const Nb=5,_O=new ry(Il,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),AO=new ry(xl,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),bO=n=>qd(n,1e-9),pm=()=>1,Mb=()=>{};class Qr extends Nl{constructor(e,t){const i=lt()({middleMovingUpSoundPlayer:r0.get("generalSoftClick"),middleMovingDownSoundPlayer:AO,middleMovingUpPlaybackRateMapper:pm,middleMovingDownPlaybackRateMapper:pm,numberOfMiddleThresholds:null,interThresholdDelta:null,constrainValue:bO,minSoundPlayer:_O,maxSoundPlayer:r0.get("generalBoundaryBoop"),minimumInterMiddleSoundTime:.035},t);i.numberOfMiddleThresholds===null&&i.interThresholdDelta===null&&(i.numberOfMiddleThresholds=Nb),super(i),this.interThresholdDistance=Nb,this.valueRangeProperty=e instanceof xi?new ui(e):e,this.middleMovingUpSoundPlayer=i.middleMovingUpSoundPlayer,this.middleMovingDownSoundPlayer=i.middleMovingDownSoundPlayer,this.middleMovingUpPlaybackRateMapper=i.middleMovingUpPlaybackRateMapper,this.middleMovingDownPlaybackRateMapper=i.middleMovingDownPlaybackRateMapper,this.minSoundPlayer=i.minSoundPlayer,this.maxSoundPlayer=i.maxSoundPlayer,this.minimumInterMiddleSoundTime=i.minimumInterMiddleSoundTime,this.timeOfMostRecentMiddleSound=0,this.constrainValue=i.constrainValue;const s=r=>{i.numberOfMiddleThresholds!==null?this.interThresholdDistance=r.getLength()/(i.numberOfMiddleThresholds+1):i.interThresholdDelta!==null?this.interThresholdDistance=i.interThresholdDelta:this.interThresholdDistance=r.getLength()/2};this.valueRangeProperty.link(s),this.disposeEmitter.addListener(()=>{this.valueRangeProperty.unlink(s)})}playSoundIfThresholdReached(e,t){if(e!==t){const i=this.constrainValue(e),s=this.constrainValue(t),r=this.getSurroundingThresholds(s),o=this.getSurroundingThresholds(i),c=r.length===1&&o.length===1&&Math.abs(r[0]-o[0])>this.interThresholdDistance||r.length===1&&o.length===2&&r[0]!==o[0]&&r[0]!==o[1]||r.length===2&&o.length===1&&o[0]!==r[0]&&o[0]!==r[1]||r.length===2&&o.length===2&&o[0]!==r[0],p=o.length===1&&(r.length===2||r[0]!==o[0]);(c||p||i===this.valueRangeProperty.value.min||i===this.valueRangeProperty.value.max)&&this.playSoundForValueChange(e,t)}}playSoundForValueChange(e,t){const i=this.constrainValue(e),s=this.constrainValue(t);if(i!==s||t!==e&&(e===this.valueRangeProperty.value.min||e===this.valueRangeProperty.value.max))if(e===this.valueRangeProperty.value.min&&this.minSoundPlayer!==Qr.USE_MIDDLE_SOUND)this.minSoundPlayer.play();else if(e===this.valueRangeProperty.value.max&&this.maxSoundPlayer!==Qr.USE_MIDDLE_SOUND)this.maxSoundPlayer.play();else{const r=Ze.currentTime;if(r-this.timeOfMostRecentMiddleSound>this.minimumInterMiddleSoundTime){let o,c;i>s?(o=this.middleMovingUpPlaybackRateMapper,c=this.middleMovingUpSoundPlayer):(o=this.middleMovingDownPlaybackRateMapper,c=this.middleMovingDownSoundPlayer),o!==pm&&c.setPlaybackRate(o(e)),c.play(),this.timeOfMostRecentMiddleSound=r}}}getSurroundingThresholds(e){const i=Math.floor(qd((e-this.valueRangeProperty.value.min)/this.interThresholdDistance,1e-7)),s=qd(i*this.interThresholdDistance+this.valueRangeProperty.value.min,1e-7),r=[s];if(s!==e){const o=Math.min(qd(s+this.interThresholdDistance,1e-7),this.valueRangeProperty.value.max);o>s&&r.push(o)}return r}}Qr.NO_SOUND=new Qr(new xi(0,1),{middleMovingUpSoundPlayer:fm,minSoundPlayer:fm,maxSoundPlayer:fm});Qr.USE_MIDDLE_SOUND={play:Mb,stop:Mb};const Of=new Qr(new xi(0,1));class vO extends ep(At){constructor(e,t,i,s){super(),this.rangeProperty=i instanceof xi?new ui(i):i;const r=lt()({size:new ps(100,5),startDrag:te.noop,drag:te.noop,endDrag:te.noop,constrainValue:te.identity,enabledRangeProperty:this.rangeProperty,soundGenerator:Of,valueChangeSoundGeneratorOptions:{},voicingOnEndResponse:te.noop,leftVisualOverflow:0,rightVisualOverflow:0,tandem:Xe.REQUIRED,tandemNameSuffix:"TrackNode"},s);r.soundGenerator===Of?r.soundGenerator=new Qr(this.rangeProperty.value,r.valueChangeSoundGeneratorOptions||{}):r.soundGenerator===null&&(r.soundGenerator=Qr.NO_SOUND),this.leftVisualOverflow=r.leftVisualOverflow,this.rightVisualOverflow=r.rightVisualOverflow,this.minimumSize=r.size,this.minimumWidth=this.minimumSize.width,this.internalWidthProperty=new Oi([this.localPreferredWidthProperty],p=>(p===null?this.minimumSize.width:Math.max(this.minimumSize.width,p))-r.leftVisualOverflow-r.rightVisualOverflow),this.sizeProperty=new Oi([this.internalWidthProperty],p=>new ps(p,this.minimumSize.height)),this.valueToPositionProperty=new Oi([this.rangeProperty,this.internalWidthProperty],(p,g)=>new ZI(p.min,p.max,0,g,!0));const o=(p,g)=>{const A=e.value,D=g.subtrailTo(this).getTransform().inversePosition2(p.pointer.point).x,P=this.valueToPositionProperty.value.inverse(D),F=r.enabledRangeProperty.value.constrainValue(P),K=r.constrainValue(F);e.set(K),p.type==="down"&&r.soundGenerator.playSoundIfThresholdReached(K,A)};this.addChild(t);let c=e.value;this.dragListener=new gV({tandem:r.tandem.createTandem("dragListener"),start:(p,g)=>{r.startDrag(p),c=e.value,o(p,g.pressedTrail)},drag:(p,g)=>{r.drag(p),o(p,g.pressedTrail)},end:p=>{r.endDrag(p),r.voicingOnEndResponse(c)}}),t.addInputListener(this.dragListener),this.mutate(r),this.disposeSliderTrack=()=>{t.removeInputListener(this.dragListener),this.dragListener.dispose()}}dispose(){this.disposeSliderTrack(),super.dispose()}}class VO extends vO{constructor(e,t,i){const s=lt()({fillEnabled:"white",fillDisabled:"gray",stroke:"black",lineWidth:1,cornerRadius:0},i),r=new As({fill:s.fillDisabled,stroke:s.stroke,lineWidth:s.lineWidth,cornerRadius:s.cornerRadius,cursor:"default",pickable:!1}),o=new As({fill:s.fillEnabled,stroke:s.stroke,lineWidth:s.lineWidth,cornerRadius:s.cornerRadius}),c=new At({children:[r,o]});super(e,c,t,Ci({leftVisualOverflow:s.stroke!==null?s.lineWidth/2:0,rightVisualOverflow:s.stroke!==null?s.lineWidth/2:0},s));const p=_n.multilink([s.enabledRangeProperty,this.valueToPositionProperty,this.sizeProperty],(g,A,C)=>{const D=A.evaluate(g.min),P=A.evaluate(g.max);r.setRect(0,0,C.width,C.height),o.setRect(D,0,P-D,C.height)});this.disposeDefaultSliderTrack=()=>{p.dispose()}}dispose(){this.disposeDefaultSliderTrack(),super.dispose()}}const ao=new f0("sun"),ds={HOME_HOTKEY_DATA:new yn({keyStringProperties:[new hi("home")],binderName:"Set value to minimum",repoName:ao.name}),END_HOTKEY_DATA:new yn({keyStringProperties:[new hi("end")],binderName:"Set value to maximum",repoName:ao.name}),PAGE_UP_HOTKEY_DATA:new yn({keyStringProperties:[new hi("pageUp")],binderName:"Increment value by page",repoName:ao.name}),PAGE_DOWN_HOTKEY_DATA:new yn({keyStringProperties:[new hi("pageDown")],binderName:"Decrement value by page",repoName:ao.name}),UP_ARROW_HOTKEY_DATA:new yn({keyStringProperties:[new hi("arrowUp")],binderName:"Increment value by up arrow",repoName:ao.name}),DOWN_ARROW_HOTKEY_DATA:new yn({keyStringProperties:[new hi("arrowDown")],binderName:"Decrement value by down arrow",repoName:ao.name}),RIGHT_ARROW_HOTKEY_DATA:new yn({keyStringProperties:[new hi("arrowRight")],binderName:"Increment value by right arrow",repoName:ao.name}),LEFT_ARROW_HOTKEY_DATA:new yn({keyStringProperties:[new hi("arrowLeft")],binderName:"Decrement value by left arrow",repoName:ao.name}),SHIFT_HOTKEY_DATA:new yn({keyStringProperties:[new hi("shift")],binderName:"Increment/decrement in smaller steps",repoName:ao.name}),isRangeKey(n){return yn.anyHaveKeyStroke([ds.HOME_HOTKEY_DATA,ds.END_HOTKEY_DATA,ds.PAGE_UP_HOTKEY_DATA,ds.PAGE_DOWN_HOTKEY_DATA,ds.UP_ARROW_HOTKEY_DATA,ds.DOWN_ARROW_HOTKEY_DATA,ds.RIGHT_ARROW_HOTKEY_DATA,ds.LEFT_ARROW_HOTKEY_DATA],n)}},GV="input",SO=n=>`${n}`,wO={withNameResponse:!1,withObjectResponse:!0,onlyOnValueChange:!0},Ob=["startInput","endInput","onInput","constrainValue","keyboardStep","shiftKeyboardStep","pageKeyboardStep","ariaOrientation","panTargetNode","roundToStepSize","pdomMapPDOMValue","pdomMapValue","pdomRepeatEqualValueText","pdomCreateAriaValueText","pdomCreateContextResponseAlert","contextResponsePerValueChangeDelay","contextResponseMaxDelay","pdomDependencies","voicingOnEndResponseOptions"],WV=(n,e)=>{const t=Hl("AccessibleValueHandler",Ob,class extends tr(n){constructor(...s){const r=s[e];s[e]=lt()({tagName:GV,inputType:"range"},r),super(...s),this._startInput=te.noop,this._onInput=te.noop,this._endInput=te.noop,this._constrainValue=te.identity,this._pdomMapValue=te.identity,this._panTargetNode=null,this._ariaOrientation=xt.HORIZONTAL,this._shiftKey=!1,this._pdomDependencies=[],this._oldValue=null,this._pdomCreateContextResponseAlert=null,this._contextResponseUtterance=new Ws,this._timesValueTextChangedBeforeAlerting=0,this._contextResponsePerValueChangeDelay=700,this._contextResponseMaxDelay=1500,this._pdomInputHandled=!1,this._blockInput=!1,this._roundToStepSize=!1,this._rangeKeysDown={},this._pdomMapPDOMValue=te.identity,this._pdomCreateAriaValueText=SO,this._dependenciesMultilink=null,this._pdomRepeatEqualValueText=!0,this._timesChangedBeforeAlerting=0,this._voicingOnEndResponseOptions=wO,this._pdomPointer=null,w0(this,["inputValue","setPDOMAttribute"]);const o=r.valueProperty,c=r.enabledRangeProperty;r.reverseAlternativeInput?this._valueProperty=new _1(new hi(o),{bidirectional:!0,map:A=>c.value.max-A,inverseMap:A=>c.value.max-A}):this._valueProperty=o,this._enabledRangeProperty=c,this._pdomValueTextUpdateListener=this.invalidateAriaValueText.bind(this),this.keyboardStep=(c.get().max-c.get().min)/20,this.shiftKeyboardStep=(c.get().max-c.get().min)/100,this.pageKeyboardStep=(c.get().max-c.get().min)/10,this._valueOnStart=o.value,this.invalidatePDOMDependencies();const p=this.invalidateEnabledRange.bind(this);this._enabledRangeProperty.link(p);const g=this.invalidateValueProperty.bind(this);this._valueProperty.link(g),this._pdomPointerListener={interrupt:()=>{this._interruptAccessibleValueHandler(null)},cancel:()=>{this._interruptAccessibleValueHandler(null)}},this._disposeAccessibleValueHandler=()=>{this._enabledRangeProperty.unlink(p),this._valueProperty.unlink(g),r.reverseAlternativeInput&&this._valueProperty.dispose(),this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._panTargetNode=null,this._pdomDependencies=[]}}set startInput(s){this._startInput=s}get startInput(){return this._startInput}set onInput(s){this._onInput=s}get onInput(){return this._onInput}set endInput(s){this._endInput=s}get endInput(){return this._endInput}set constrainValue(s){this._constrainValue=s}get constrainValue(){return this._constrainValue}set panTargetNode(s){this._panTargetNode=s}get panTargetNode(){return this._panTargetNode}set roundToStepSize(s){this._roundToStepSize=s}get roundToStepSize(){return this._roundToStepSize}set pdomMapPDOMValue(s){this._pdomMapPDOMValue=s,this.invalidateEnabledRange(this._enabledRangeProperty.value),this.invalidateValueProperty(),this.invalidateAriaValueText()}get pdomMapPDOMValue(){return this._pdomMapPDOMValue}set pdomMapValue(s){this._pdomMapValue=s}get pdomMapValue(){return this._pdomMapValue}set pdomRepeatEqualValueText(s){this._pdomRepeatEqualValueText=s,this.invalidateAriaValueText()}get pdomRepeatEqualValueText(){return this._pdomRepeatEqualValueText}set pdomCreateAriaValueText(s){this._pdomCreateAriaValueText=s,this.invalidateAriaValueText()}get pdomCreateAriaValueText(){return this._pdomCreateAriaValueText}set pdomCreateContextResponseAlert(s){this._pdomCreateContextResponseAlert=s}get pdomCreateContextResponseAlert(){return this._pdomCreateContextResponseAlert}set contextResponsePerValueChangeDelay(s){this._contextResponsePerValueChangeDelay=s}get contextResponsePerValueChangeDelay(){return this._contextResponsePerValueChangeDelay}set contextResponseMaxDelay(s){this._contextResponseMaxDelay=s}get contextResponseMaxDelay(){return this._contextResponseMaxDelay}set voicingOnEndResponseOptions(s){this._voicingOnEndResponseOptions=s}get voicingOnEndResponseOptions(){return this._voicingOnEndResponseOptions}invalidateAriaValueText(){this._updateAriaValueText(this._oldValue),this._oldValue=this._valueProperty.value}invalidateEnabledRange(s){const r=this._getMappedValue(s.min),o=this._getMappedValue(s.max);this.setPDOMAttribute("min",r),this.setPDOMAttribute("max",o),this._updateSiblingStepAttribute()}invalidateValueProperty(){const s=this._getMappedValue();this.setPDOMAttribute("aria-valuenow",s),this.inputValue=s}invalidatePDOMDependencies(){this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._dependenciesMultilink=_n.multilinkAny(this._pdomDependencies.concat([this._valueProperty]),this._pdomValueTextUpdateListener)}setPDOMDependencies(s){this._pdomDependencies=s,this.invalidatePDOMDependencies()}getPDOMDependencies(){return this._pdomDependencies}set pdomDependencies(s){this.setPDOMDependencies(s)}get pdomDependencies(){return this.getPDOMDependencies()}_updateAriaValueText(s){const r=this._getMappedValue(),o=this._pdomCreateAriaValueText(r,this._valueProperty.value,s);let c=Jt.unwrapStringProperty(o);const p=" ";this._pdomRepeatEqualValueText&&this.ariaValueText&&c===this.ariaValueText.replace(new RegExp(p,"g"),"")&&(c=this.ariaValueText+p),this.ariaValueText=c}alertContextResponse(){let s=!1;if(this._pdomCreateContextResponseAlert){const r=this._getMappedValue(),o=this._pdomCreateContextResponseAlert(r,this._valueProperty.value,this._valueOnStart);o&&(this._contextResponseUtterance.alert=o,this.forEachUtteranceQueue(c=>{s||(c.hasUtterance(this._contextResponseUtterance)?(s=!0,this._timesChangedBeforeAlerting++):this._timesChangedBeforeAlerting=1),this._contextResponseUtterance.alertStableDelay=Math.min(this._contextResponseMaxDelay,this._timesChangedBeforeAlerting*this._contextResponsePerValueChangeDelay),c.addToBack(this._contextResponseUtterance)}))}}reset(){this._pdomCreateAriaValueText.reset&&this._pdomCreateAriaValueText.reset(),this._pdomCreateContextResponseAlert&&this._pdomCreateContextResponseAlert.reset&&this._pdomCreateContextResponseAlert.reset(),this._timesChangedBeforeAlerting=0,this._updateAriaValueText(null)}_getMappedValue(s=this._valueProperty.value){return this._pdomMapPDOMValue(s)}getAccessibleValueHandlerInputListener(){return{keydown:this.handleKeyDown.bind(this),keyup:this.handleKeyUp.bind(this),input:this.handleInput.bind(this),change:this.handleChange.bind(this),blur:this.handleBlur.bind(this),interrupt:this.handleInterrupt.bind(this)}}handleKeyDown(s){const r=s.domEvent,o=Ne.getEventCode(r);if(o&&(this._shiftKey=r.shiftKey,Ne.isKeyEvent(r,Ne.KEY_TAB)&&(this._blockInput=!0),this.enabledProperty.get())){const c=Xd(o);if(ds.isRangeKey(c)&&(r.preventDefault(),!r.metaKey)){s.pointer.reserveForKeyboardDrag();let p=!0;this._anyKeysDown()||this._onInteractionStart(s),this._rangeKeysDown[o]=!0;let g=this._valueProperty.get();if(yn.anyHaveKeyStroke([ds.HOME_HOTKEY_DATA,ds.END_HOTKEY_DATA],c))ds.END_HOTKEY_DATA.hasKeyStroke(c)?g=this._enabledRangeProperty.get().max:ds.HOME_HOTKEY_DATA.hasKeyStroke(c)&&(g=this._enabledRangeProperty.get().min);else{let P;yn.anyHaveKeyStroke([ds.PAGE_DOWN_HOTKEY_DATA,ds.PAGE_UP_HOTKEY_DATA],c)?(P=this.pageKeyboardStep,ds.PAGE_UP_HOTKEY_DATA.hasKeyStroke(c)?g=this._valueProperty.get()+P:ds.PAGE_DOWN_HOTKEY_DATA.hasKeyStroke(c)&&(g=this._valueProperty.get()-P)):yn.anyHaveKeyStroke([ds.LEFT_ARROW_HOTKEY_DATA,ds.RIGHT_ARROW_HOTKEY_DATA,ds.UP_ARROW_HOTKEY_DATA,ds.DOWN_ARROW_HOTKEY_DATA],c)&&(P=r.shiftKey?this.shiftKeyboardStep:this.keyboardStep,p=!r.shiftKey,yn.anyHaveKeyStroke([ds.UP_ARROW_HOTKEY_DATA,ds.RIGHT_ARROW_HOTKEY_DATA],c)?g=this._valueProperty.get()+P:yn.anyHaveKeyStroke([ds.DOWN_ARROW_HOTKEY_DATA,ds.LEFT_ARROW_HOTKEY_DATA],c)&&(g=this._valueProperty.get()-P),this._roundToStepSize&&(g=qb(g,this._valueProperty.get(),P)))}const A=this._pdomMapValue(g,this._valueProperty.get());let C=A;p&&(C=this._constrainValue(A)),this._valueProperty.set(hs(C,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max)),this._onInput(s,this._valueOnStart);const D=this._panTargetNode||this;ef.initialized&&ef.listener.panToNode(D,!0,D.limitPanDirection)}}}handleKeyUp(s){const r=Ne.getEventCode(s.domEvent),o=Xd(r);this._allKeysUp()||(ds.SHIFT_HOTKEY_DATA.hasKeyStroke(o)&&(this._shiftKey=!1),this.enabledProperty.get()&&ds.isRangeKey(o)&&(this._rangeKeysDown[r]=!1,this._allKeysUp()&&this._onInteractionEnd(s)))}handleChange(s){this._pdomInputHandled||this.handleInput(s),this._pdomInputHandled=!1}handleInput(s){if(this.enabledProperty.get()&&!this._blockInput){this._pdomInputHandled=!0;let r=this._valueProperty.get();const o=parseFloat(s.domEvent.target.value),c=this._shiftKey?this.shiftKeyboardStep:this.keyboardStep,p=this._getMappedValue();this._onInteractionStart(s),o>p?r=this._valueProperty.get()+c:o<p&&(r=this._valueProperty.get()-c),this._roundToStepSize&&(r=qb(r,this._valueProperty.get(),c)),r=hs(r,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max),this._valueProperty.set(this._constrainValue(this._pdomMapValue(r,this._valueProperty.get()))),this._onInput(s,this._valueOnStart),this._onInteractionEnd(s)}this._blockInput=!1}_interruptAccessibleValueHandler(s){this._anyKeysDown()&&this._onInteractionEnd(s),this._shiftKey=!1,this._blockInput=!1,this._rangeKeysDown={}}handleInterrupt(){this._interruptAccessibleValueHandler(null)}handleBlur(s){this._interruptAccessibleValueHandler(s)}_onInteractionStart(s){this._pdomPointer=s.pointer,this._pdomPointer.addInputListener(this._pdomPointerListener,!0),this._valueOnStart=this._valueProperty.value,this._startInput(s)}_onInteractionEnd(s){this._pdomPointer&&(this.alertContextResponse(),this.voicingOnEndResponse(this._valueOnStart),this._endInput(s),this._pdomPointer.removeInputListener(this._pdomPointerListener),this._pdomPointer=null)}setKeyboardStep(s){this._keyboardStep=s}set keyboardStep(s){this.setKeyboardStep(s)}get keyboardStep(){return this.getKeyboardStep()}getKeyboardStep(){return this._keyboardStep}setShiftKeyboardStep(s){this._shiftKeyboardStep=s}set shiftKeyboardStep(s){this.setShiftKeyboardStep(s)}get shiftKeyboardStep(){return this.getShiftKeyboardStep()}getShiftKeyboardStep(){return this._shiftKeyboardStep}getShiftKeyDown(){return this._shiftKey}get shiftKeyDown(){return this.getShiftKeyDown()}setPageKeyboardStep(s){this._pageKeyboardStep=s}set pageKeyboardStep(s){this.setPageKeyboardStep(s)}get pageKeyboardStep(){return this.getPageKeyboardStep()}getPageKeyboardStep(){return this._pageKeyboardStep}setAriaOrientation(s){this._ariaOrientation=s,this.setPDOMAttribute("aria-orientation",s.ariaOrientation)}set ariaOrientation(s){this.setAriaOrientation(s)}get ariaOrientation(){return this._ariaOrientation}getAriaOrientation(){return this._ariaOrientation}_allKeysUp(){return te.every(this._rangeKeysDown,s=>!s)}_anyKeysDown(){return!!te.find(this._rangeKeysDown,s=>s)}_updateSiblingStepAttribute(){let s="any";if(qs.mobileSafari){const r=Math.min(this.keyboardStep,this.shiftKeyboardStep,this.pageKeyboardStep);s=Math.pow(10,-C1(r));const o=this._getMappedValue(this._enabledRangeProperty.get().min),c=this._getMappedValue(this._enabledRangeProperty.get().max),p=c-o;s/p<1e-5&&(s=c/100,s=Number(s.toPrecision(8)))}this.setPDOMAttribute("step",s)}voicingOnEndResponse(s,r){const o=Ci({},this._voicingOnEndResponseOptions,r),c=s!==this._valueProperty.value,p=this._valueProperty.value===this._enabledRangeProperty.value.min||this._valueProperty.value===this._enabledRangeProperty.value.max,g=!!(o.withNameResponse&&this.voicingNameResponse)||!!(o.withObjectResponse&&this.voicingObjectResponse);(!o.onlyOnValueChange||p||c)&&g&&this.voicingSpeakFullResponse({nameResponse:o.withNameResponse?this.voicingNameResponse:null,objectResponse:o.withObjectResponse?this.voicingObjectResponse:null,hintResponse:null})}dispose(){this._disposeAccessibleValueHandler(),super.dispose()}});return t.prototype._mutatorKeys=Ob.concat(t.prototype._mutatorKeys),t},qb=function(n,e,t){let i=n;return t!==0&&(i=Ys(i/t)*t,i=CO(i,e,t)),i},CO=function(n,e,t){let i=n;const s=Math.abs(n-e),r=s>t,o=S1(s,t,1e-14);return r&&!o&&(i+=n>e?-t:t),i};WV.DEFAULT_TAG_NAME=GV;const Fb=["startDrag","drag","endDrag"],PO=(n,e)=>{const t=Hl("AccessibleSlider",Fb,class extends WV(n,e){constructor(...s){s[e],super(...s),this._startDrag=te.noop,this._drag=te.noop,this._endDrag=te.noop,w0(this,["addInputListener","removeInputListener"]);const r=this.getAccessibleValueHandlerInputListener();this.addInputListener(r),this._disposeAccessibleSlider=()=>{this.removeInputListener(r)}}set startDrag(s){this._startDrag=s,this.startInput=s}get startDrag(){return this._startDrag}set drag(s){this._drag=s,this.onInput=s}get drag(){return this._drag}set endDrag(s){this._endDrag=s,this.endInput=s}get endDrag(){return this._endDrag}dispose(){this._disposeAccessibleSlider(),super.dispose()}});return t.prototype._mutatorKeys=Fb.concat(t.prototype._mutatorKeys),t},EO="rgb( 50, 145, 184 )",DO="rgb( 71, 207, 255 )";class TO extends As{constructor(e){const t=lt()({size:new ps(22,45),fillHighlighted:DO,centerLineStroke:"white",fill:EO,stroke:"black",lineWidth:1,tandem:Xe.REQUIRED,tandemNameSuffix:"ThumbNode"},e);t.cornerRadius===void 0&&(t.cornerRadius=.25*t.size.width),t.cachedPaints=[t.fill,t.fillHighlighted],super(0,0,t.size.width,t.size.height,t);const i=As.bounds(this.bounds.dilated(5),{fill:"transparent",localBounds:this.bounds,pickable:!1});this.addChild(i);const s=3;this.addChild(new Xs(Tt.lineSegment(t.size.width/2,s,t.size.width/2,t.size.height-s),{stroke:t.centerLineStroke}));const r=new No({attach:!1,tandem:Xe.OPT_OUT});r.isHighlightedProperty.link(o=>{this.fill=o?t.fillHighlighted:t.fill}),this.addInputListener(r)}}class IO{constructor(e,t,i,s,r,o,c,p,g){this.parent=e,this.value=t,this.label=i,this.labelXProperty=new Oi([g.valueToPositionProperty],D=>D.evaluate(t)),this.tickNode=new At,e.addChild(this.tickNode);const A=c.setTickInitialPoint(g.bounds,s),C=new Xs(new Tt().moveTo(A.x,A.y).lineTo(0,A.y-s),{stroke:r,lineWidth:o});this.labelXProperty.link(D=>{C.x=D}),this.tickNode.addChild(C),i&&(this.labelContainer=new At({pickable:!1}),this.tickNode.addChild(this.labelContainer),this.labelContainer.addChild(i),p===xt.VERTICAL&&(this.labelContainer.rotation=-UV.SLIDER_VERTICAL_ROTATION),this.labelManualConstraint=ny.create(this.tickNode,[C,this.labelContainer],(D,P)=>{c.positionLabel(P,D.bounds)}))}dispose(){this.parent.removeChild(this.tickNode),this.labelContainer&&this.labelContainer.dispose(),this.labelXProperty.dispose(),this.labelManualConstraint&&this.labelManualConstraint.dispose()}}const xO=new ps(100,5),LO=new ps(17,34);class ho extends lu(PO(At,0)){constructor(e,t,i){const s=lt()({orientation:xt.HORIZONTAL,trackNode:null,trackSize:null,trackFillEnabled:"white",trackFillDisabled:"gray",trackStroke:"black",trackLineWidth:1,trackCornerRadius:0,trackPickable:!0,thumbNode:null,thumbSize:null,thumbFill:"rgb(50,145,184)",thumbFillHighlighted:"rgb(71,207,255)",thumbStroke:"black",thumbLineWidth:1,thumbCenterLineStroke:"white",thumbTouchAreaXDilation:11,thumbTouchAreaYDilation:11,thumbMouseAreaXDilation:0,thumbMouseAreaYDilation:0,thumbYOffset:0,tickLabelSpacing:6,positionLabel:(T,Ce)=>{T.centerX=Ce.centerX,T.bottom=Ce.top-s.tickLabelSpacing},majorTickLength:25,majorTickStroke:"black",majorTickLineWidth:1,minorTickLength:10,minorTickStroke:"black",minorTickLineWidth:1,setTickInitialPoint:(T,Ce)=>new we(0,T.top),cursor:"pointer",startDrag:te.noop,drag:te.noop,endDrag:te.noop,constrainValue:te.identity,disabledOpacity:Cc.DISABLED_OPACITY,soundGenerator:Of,valueChangeSoundGeneratorOptions:{},phetioLinkedProperty:null,tandem:Xe.REQUIRED,tandemNameSuffix:"Slider",phetioType:ho.SliderIO,phetioFeatured:!0,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},i),r=t instanceof xi?new ui(t):t;if(s.soundGenerator===Of?s.soundGenerator=new Qr(r.value,s.valueChangeSoundGeneratorOptions||{}):s.soundGenerator===null&&(s.soundGenerator=Qr.NO_SOUND),s.soundGenerator!==Qr.NO_SOUND){let T=e.value;const Ce=s.drag;s.drag=ze=>{ze.isFromPDOM()?s.soundGenerator.playSoundForValueChange(e.value,T):s.soundGenerator.playSoundIfThresholdReached(e.value,T),Ce(ze),T=e.value}}s.orientation===xt.VERTICAL&&(s.trackSize&&(s.trackSize=s.trackSize.swapped()),s.thumbSize&&(s.thumbSize=s.thumbSize.swapped()),wA(s,"thumbTouchAreaXDilation","thumbTouchAreaYDilation"),wA(s,"thumbMouseAreaXDilation","thumbMouseAreaYDilation")),s.trackSize=s.trackSize||xO,s.thumbSize=s.thumbSize||LO;const o=s.tandem.createTandem(ho.THUMB_NODE_TANDEM_NAME);Xe.VALIDATION&&s.thumbNode;const c=s.thumbNode||new TO({size:s.thumbSize,fill:s.thumbFill,fillHighlighted:s.thumbFillHighlighted,stroke:s.thumbStroke,lineWidth:s.thumbLineWidth,centerLineStroke:s.thumbCenterLineStroke,tandem:o}),p=!s.enabledRangeProperty,g=te.pick(s,At.REQUIRES_BOUNDS_OPTION_KEYS),A=Ci({ariaOrientation:s.orientation,valueProperty:e,panTargetNode:c,enabledRangeProperty:s.enabledRangeProperty||(t instanceof xi?new hi(t,{valueType:xi,isValidValue:T=>T.min>=t.min&&T.max<=t.max,tandem:s.tandem.createTandem("enabledRangeProperty"),valueComparisonStrategy:"equalsFunction",phetioValueType:xi.RangeIO,phetioDocumentation:"Sliders support two ranges: the outer range which specifies the min and max of the track and the enabledRangeProperty, which determines how low and high the thumb can be dragged within the track."}):t)},s);super(A),this.ticks=Uf(),this.proposedValue=null,this.orientation=A.orientation,this.enabledRangeProperty=A.enabledRangeProperty,this.tickOptions=te.pick(s,"tickLabelSpacing","majorTickLength","majorTickStroke","majorTickLineWidth","minorTickLength","minorTickStroke","minorTickLineWidth","setTickInitialPoint","positionLabel");const C=[];this.majorTicksParent=new At,this.minorTicksParent=new At,C.push(this.majorTicksParent),C.push(this.minorTicksParent);const D=s.tandem.createTandem(ho.TRACK_NODE_TANDEM_NAME);Xe.VALIDATION&&s.trackNode;const P=new At;C.push(P),this.track=s.trackNode||new VO(e,t,{size:A.trackSize,fillEnabled:A.trackFillEnabled,fillDisabled:A.trackFillDisabled,stroke:A.trackStroke,lineWidth:A.trackLineWidth,cornerRadius:A.trackCornerRadius,startDrag:A.startDrag,drag:A.drag,endDrag:A.endDrag,constrainValue:A.constrainValue,enabledRangeProperty:this.enabledRangeProperty,soundGenerator:s.soundGenerator,pickable:A.trackPickable,voicingOnEndResponse:this.voicingOnEndResponse.bind(this),tandem:D}),C.push(this.track),c.setCenterY(this.track.centerY+s.thumbYOffset),C.push(c);const F=new At({children:C});s.orientation===xt.VERTICAL&&(F.rotation=UV.SLIDER_VERTICAL_ROTATION),this.addChild(F),!s.thumbNode&&(s.thumbTouchAreaXDilation||s.thumbTouchAreaYDilation)&&(c.touchArea=c.localBounds.dilatedXY(s.thumbTouchAreaXDilation,s.thumbTouchAreaYDilation)),!s.thumbNode&&(s.thumbMouseAreaXDilation||s.thumbMouseAreaYDilation)&&(c.mouseArea=c.localBounds.dilatedXY(s.thumbMouseAreaXDilation,s.thumbMouseAreaYDilation));let K=0,M=e.value;const U=new gV({tandem:c.tandem.createTandem("dragListener"),start:(T,Ce)=>{this.enabledProperty.get()&&(M=e.value,s.startDrag(T),K=Ce.pressedTrail.subtrailTo(F).getTransform().inversePosition2(T.pointer.point).x-c.centerX)},drag:(T,Ce)=>{if(this.enabledProperty.get()){const be=Ce.pressedTrail.subtrailTo(F).getTransform().inversePosition2(T.pointer.point).x-K;this.proposedValue=this.track.valueToPositionProperty.value.inverse(be);const Be=this.enabledRangeProperty.get().constrainValue(this.proposedValue);e.set(s.constrainValue(Be)),s.drag(T)}},end:T=>{this.enabledProperty.get()&&(s.endDrag(T),this.voicingOnEndResponse(M)),this.proposedValue=null}});c.addInputListener(U),this.thumbDragListener=U,this.trackDragListener=this.track.dragListener;const $=_n.multilink([e,this.track.valueToPositionProperty],(T,Ce)=>{c.centerX=Ce.evaluate(T)}),re=T=>{if(!e.isPhetioInstrumented()||!Pc.value)if(this.proposedValue===null)e.set(hs(e.value,T.min,T.max));else{const Ce=hs(this.proposedValue,T.min,T.max),ze=s.constrainValue(Ce);e.set(ze)}};this.enabledRangeProperty.link(re);const pe=new kO(this,this.track,c,F,s.orientation,P,this.ticks);this.disposeSlider=()=>{pe.dispose(),c.dispose&&c.dispose(),this.track.dispose&&this.track.dispose(),p?this.enabledRangeProperty.dispose():this.enabledRangeProperty.unlink(re),$.dispose(),U.dispose()},this.focusHighlight=new tf(c);const ce=s.phetioLinkedProperty||(e instanceof Ds?e:null);ce&&this.addLinkedElement(ce,{tandemName:"valueProperty"}),!p&&this.enabledRangeProperty instanceof Ds&&this.addLinkedElement(this.enabledRangeProperty,{tandemName:"enabledRangeProperty"}),this.mutate(g)}get majorTicksVisible(){return this.getMajorTicksVisible()}set majorTicksVisible(e){this.setMajorTicksVisible(e)}get minorTicksVisible(){return this.getMinorTicksVisible()}set minorTicksVisible(e){this.setMinorTicksVisible(e)}dispose(){this.disposeSlider(),this.ticks.forEach(e=>{e.dispose()}),super.dispose()}addMajorTick(e,t){this.addTick(this.majorTicksParent,e,t,this.tickOptions.majorTickLength,this.tickOptions.majorTickStroke,this.tickOptions.majorTickLineWidth)}addMinorTick(e,t){this.addTick(this.minorTicksParent,e,t,this.tickOptions.minorTickLength,this.tickOptions.minorTickStroke,this.tickOptions.minorTickLineWidth)}addTick(e,t,i,s,r,o){this.ticks.push(new IO(e,t,i,s,r,o,this.tickOptions,this.orientation,this.track))}setMajorTicksVisible(e){this.majorTicksParent.visible=e}getMajorTicksVisible(){return this.majorTicksParent.visible}setMinorTicksVisible(e){this.minorTicksParent.visible=e}getMinorTicksVisible(){return this.minorTicksParent.visible}}ho.THUMB_NODE_TANDEM_NAME="thumbNode";ho.TRACK_NODE_TANDEM_NAME="trackNode";ho.SliderIO=new Yt("SliderIO",{valueType:ho,documentation:"A traditional slider component, with a knob and possibly tick marks",supertype:At.NodeIO});class kO extends Ul{constructor(e,t,i,s,r,o,c){super(e),this.slider=e,this.track=t,this.thumb=i,this.sliderPartsNode=s,this.orientation=r,this.trackSpacer=o,this.ticks=c,r===xt.HORIZONTAL?(e.heightSizable=!1,this.preferredProperty=this.slider.localPreferredWidthProperty):(e.widthSizable=!1,this.preferredProperty=this.slider.localPreferredHeightProperty),this.preferredProperty.lazyLink(this._updateLayoutListener),this.track.rangeProperty.lazyLink(this._updateLayoutListener),this.thumb.localBoundsProperty.lazyLink(this._updateLayoutListener);const p=g=>{g.tickNode.localBoundsProperty.lazyLink(this._updateLayoutListener),c.addItemRemovedListener(A=>{A===g&&A.tickNode.localBoundsProperty.hasListener(this._updateLayoutListener)&&g.tickNode.localBoundsProperty.unlink(this._updateLayoutListener)})};c.addItemAddedListener(p),this.addNode(t),this.layout(),this.disposeSliderConstraint=()=>{c.removeItemAddedListener(p),this.preferredProperty.unlink(this._updateLayoutListener),this.track.rangeProperty.unlink(this._updateLayoutListener),this.thumb.localBoundsProperty.unlink(this._updateLayoutListener)}}layout(){super.layout();const e=this.slider,t=this.track,i=this.thumb;this.trackSpacer.localBounds=t.localBounds.dilatedX(i.width/2);const s=t.leftVisualOverflow+t.rightVisualOverflow,r=t.minimumWidth,o=r-s,c=D=>Un(t.rangeProperty.value.min,t.rangeProperty.value.max,0,1,D),p=-i.width/2-t.leftVisualOverflow,g=i.width/2-t.leftVisualOverflow,A=new xi(p,r+g);if(this.ticks.forEach(D=>{const P=o*c(D.value),F=D.tickNode.width/2;A.includeRange(new xi(-F,F).shifted(P))}),e.widthSizable&&this.preferredProperty.value!==null){const D=pr.max(pr.linear(1,g),...this.ticks.map(F=>{const K=c(F.value);return pr.linear(K,F.tickNode.width/2-s*K)})).minus(pr.min(pr.constant(p),...this.ticks.map(F=>{const K=c(F.value);return pr.linear(K,-F.tickNode.width/2-s*K)}))),P=D.withXValues([r-1,r,...D.points.map(F=>F.x).filter(F=>F>r+1e-10)]).inverted();t.preferredWidth=Math.max(r,P.evaluate(this.preferredProperty.value))}else t.preferredWidth=t.minimumWidth;const C=A.getLength();this.orientation===xt.HORIZONTAL?e.localMinimumWidth=C:e.localMinimumHeight=C}dispose(){this.disposeSliderConstraint(),super.dispose()}}class BO extends ho{constructor(e,t,i){super(e,t,lt()({orientation:xt.HORIZONTAL},i))}}class XV extends dO{constructor(e,t,i){super(e,t,lt()({orientation:"vertical",align:"left"},i))}}class jV extends gO{constructor(e,t){const i=lt()({font:_s.DEFAULT,textFill:"black",maxTextWidth:null,tandem:Xe.REQUIRED,innerContent:e},t),s=new Ms(e,Ci({font:i.font,fill:i.textFill,maxWidth:i.maxTextWidth},i.textNodeOptions));i.content=s,super(i),this.disposeTextPushButton=()=>{s.dispose()}}dispose(){this.disposeTextPushButton(),super.dispose()}}const RO="data:image/svg+xml,%3csvg%20viewBox='0%200%20200%20250'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Trunk%20--%3e%3crect%20x='85'%20y='130'%20width='30'%20height='80'%20fill='%237B4F2F'%20/%3e%3c!--%20Leaves%20(Bottom)%20--%3e%3ccircle%20cx='100'%20cy='120'%20r='45'%20fill='%233F8F3D'/%3e%3c!--%20Leaves%20(Middle)%20--%3e%3ccircle%20cx='80'%20cy='90'%20r='40'%20fill='%234F9F42'/%3e%3ccircle%20cx='120'%20cy='90'%20r='40'%20fill='%234F9F42'/%3e%3c!--%20Leaves%20(Top)%20--%3e%3ccircle%20cx='100'%20cy='60'%20r='35'%20fill='%2388C57A'/%3e%3c/svg%3e",NO="data:image/svg+xml,%3csvg%20viewBox='0%200%20200%20250'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Trunk%20--%3e%3crect%20x='90'%20y='180'%20width='20'%20height='50'%20fill='%237B4F2F'/%3e%3c!--%20Layered%20Pine%20Foliage%20--%3e%3cpolygon%20points='50,180%20100,110%20150,180'%20fill='%233F8F3D'/%3e%3cpolygon%20points='60,150%20100,80%20140,150'%20fill='%234F9F42'/%3e%3cpolygon%20points='70,120%20100,50%20130,120'%20fill='%2388C57A'/%3e%3c/svg%3e",MO=ai(RO),OO=ai(NO),Eh=class Eh extends At{constructor(e,t,i){super({children:[new gr(MO,{y:-125})]}),this.initialize(e,t,i)}initialize(e,t,i){return this.setScaleMagnitude(200/i),this.centerX=e,this.y=t,this}freeToPool(){Eh.pool.freeToPool(this)}};Eh.pool=new us(Eh,{initialize:Eh.prototype.initialize});let a0=Eh;const Dh=class Dh extends At{constructor(e,t,i){super({children:[new gr(OO,{y:-138})]}),this.initialize(e,t,i)}initialize(e,t,i){return this.setScaleMagnitude(300/i),this.centerX=e,this.y=t,this}freeToPool(){Dh.pool.freeToPool(this)}};Dh.pool=new us(Dh,{initialize:Dh.prototype.initialize});let o0=Dh;class QV extends At{constructor(e,t){const i=new As({}),s=new As({}),r=new Xs(null,{fill:"#FFC72C"}),o=new At;super({children:[s,i,r,o]}),this.positionProperty=e,this.layoutBoundsProperty=t;const c=(g,A)=>{let C=g*73856093^A*19349663;return C^=C>>13,C*=2246822507,C^=C>>16,(C>>>0)%100/100},p=(g,A,C)=>{const D=g,P=-50,F=30,K=30,M=.2,U=4,$=700,re=[];for(let pe=U-P;pe<$-P;pe+=K){const ce=P+pe,T=Un(P,0,0,A,ce),Ce=2,ze=Math.floor(-2+(D-T/2)/F)*F,be=Math.ceil(Ce+(D+T/2)/F)*F;for(let Be=ze;Be<=be;Be+=F){let xe=c(Be,ce);if(xe<M){xe=xe/M;const Qe=Be+.8*(xe-.5)*F,Fe=ce+.8*(xe*100%1)*K,Ye=(Qe-D)/T*C+C/2,Me=1-1/(1+.01*(Fe-U));re.push({x:Ye,y:Me,depth:pe,type:xe*1e3%1>.5?1:0})}}}return re};new _n([e,t],(g,A)=>{const C=ut=>A.bottom*(1-ut)+A.top*ut,P=C(.19),F=C(.343),K=C(.35),M=C(.48),U=C(.53),$=C(.67);i.rectBounds=new Je(A.left,M,A.right,P),i.fill=new To(0,P,0,M).addColorStop(0,"#555").addColorStop(.1,"#555").addColorStop(.1,"#D6D6D6").addColorStop(.12,"#D6D6D6").addColorStop(.12,"#555").addColorStop(.6,"#777").addColorStop(.92,"#555").addColorStop(.92,"#D6D6D6").addColorStop(.935,"#D6D6D6").addColorStop(.935,"#555").addColorStop(1,"#555"),s.rectBounds=A,s.fill=new To(0,A.bottom,0,A.top).addColorStop(0,"#3F8F3D").addColorStop(.67,"#88C57A").addColorStop(.67,"#cfecfc").addColorStop(1,"#02ace4");const re=A.centerX,pe=new Tt,ce=(ut,Me)=>{pe.moveTo(ut*(1+.003)+re,F),pe.lineTo(Me*(1+.003)+re,F),pe.lineTo(Me*(1-.003)+re,K),pe.lineTo(ut*(1-.003)+re,K),pe.close()},T=1,Ce=3,ze=A.height*.08,be=ut=>(ut-g)*ze,Be=ut=>ut/ze+g,xe=Be(-.6*A.width),Qe=Be(.6*A.width);for(let ut=Math.ceil(xe/Ce)*Ce;ut<Qe;ut+=Ce)ce(be(ut),be(ut+T));pe.makeImmutable(),r.shape=pe;const Fe=p(g,Qe-xe,1.1*A.width);o.children.forEach(ut=>{ut.freeToPool()}),o.removeAllChildren();const Ye=[];for(const ut of Fe)if(ut.x>A.left-200&&ut.x<A.right+200){const Lt=ut.type===0?a0.pool:o0.pool;Ye.push(Lt.create(ut.x,$*ut.y+U*(1-ut.y),ut.depth))}Ye.sort((ut,Me)=>ut.y-Me.y),o.children=Ye})}}class ZV extends BO{constructor(e,t){super(e,new xi(-3,3),t),this.addMinorTick(-3),this.addMinorTick(0),this.addMinorTick(3)}}window.ViewTypes={AnimatedPanZoomListener:F0,Font:_s,HBox:pV,Node:At,Text:Ms,VBox:n0,Model:np,CyclistNode:rp,Multilink:_n,Bounds2:Je,Dimension2:ps,toFixed:zf,Panel:ay,TextPushButton:jV,VerticalAquaRadioButtonGroup:XV,BackgroundNode:QV,BLUE_COLOR_SHIFT:vc,GREEN_COLOR_SHIFT:Vc,RED_COLOR_SHIFT:df,AccelerationSlider:ZV};class qO extends At{constructor(e,t){const i=_s.fromCSS("18px Arial"),s=_s.fromCSS("bold 18px Arial"),r=new At({tagName:"p",innerContent:"There is a cyclist on a road. You can control the acceleration of the cyclist using a slider. There is a stop button to stop the cyclist."}),o=new rp(e.cyclist,{tagName:"p",labelTagName:"h2",labelContent:"Cyclist"});e.cyclist.isPointingRightProperty.lazyLink(F=>{o.addAccessibleResponse(`The cyclist is now pointing to the ${F?"right":"left"}`)}),new _n([e.cyclist.isPointingRightProperty,e.cyclist.bicycleColorShiftProperty,e.cyclist.effortProperty,e.velocityProperty,e.accelerationProperty],(F,K,M,U,$)=>{const re={[vc]:"blue",[Vc]:"green",[df]:"red"}[K],pe=F?"right":"left",T=U*$<0?"braking":Math.abs($)<1e-5?"coasting":{0:"pedaling lightly",1:"pedaling moderately",2:"pedaling hard",3:"pedaling very hard"}[M];let Ce;const ze=Math.abs(U);ze<1e-5?Ce="stationary":ze<5?Ce="moving slowly":ze<13?Ce="moving at a moderate speed":ze<25?Ce="moving quickly":Ce="moving very quickly",o.innerContent=`The cyclist is on a ${re} bicycle pointing to the ${pe}. ${ze>1e-5?`The cyclist is ${T}. `:""}The cyclist is ${Ce}.`});const c=new ZV(e.accelerationProperty,{trackSize:new ps(200,5),thumbTouchAreaYDilation:7,accessibleName:"Acceleration",accessibleHelpText:"Adjust the acceleration of the cyclist",pdomCreateAriaValueText:F=>`${zf(F/2,1)} meters per second squared`}),p=new jV("Stop",{font:i,listener:()=>{e.stop(),p.addAccessibleResponse("The cyclist has stopped")},accessibleName:"Stop",accessibleHelpText:"Stop all motion of the cyclist"}),g=F=>()=>new Ms(F,{font:i}),A=new XV(e.cyclist.bicycleColorShiftProperty,[{value:vc,createNode:g("Blue")},{value:Vc,createNode:g("Green")},{value:df,createNode:g("Red")}],{labelTagName:"h3",accessibleName:"Bicycle Color",touchAreaXDilation:20,accessibleHelpText:"Change the color of the bicycle"}),C=new ay(new pV({spacing:30,align:"top",tagName:"div",labelTagName:"h2",labelContent:"Controls",children:[new n0({spacing:7,children:[new Ms("Acceleration",{font:s}),c,p]}),new n0({spacing:7,children:[new Ms("Bicycle Color",{font:s}),A]})]}),{top:o.bottom+7,xMargin:20}),D=new At({children:[o,C]});super({tagName:"div",labelTagName:"h1",labelContent:"Accessible Interaction Demo",children:[r,new QV(e.positionProperty,t),D]}),this.model=e;const P=new F0(this,{maxScale:10});this.addInputListener(P),t.link(F=>{const K=F.height/500;D.setScaleMagnitude(F.height/500),D.y=(F.top+3*F.bottom)/4,o.centerX=F.centerX/K,C.centerX=F.centerX/K,P.setTargetBounds(F),P.setPanBounds(F)})}}const l0=new hi(new Je(0,0,window.innerWidth,window.innerHeight)),h0=new At({renderer:"svg"}),JV=new di(!0);window.interactiveHighlightsEnabledProperty=JV;const Bc=new pc(h0,{allowSceneOverflow:!1,backgroundColor:"#eee",listenToOnlyElement:!1,assumeFullWindow:!0,interactiveHighlightsEnabledProperty:JV});document.body.appendChild(Bc.domElement);Bc.initializeEvents();window.display=Bc;let oy=!0;const $V=()=>{oy=!1;const n=new Je(0,0,window.innerWidth,window.innerHeight);Bc.setWidthHeight(n.width,n.height),l0.value=n,qs.mobileSafari&&window.scrollTo(0,0)},ly=()=>{oy=!0};window.addEventListener("resize",ly);window.addEventListener("orientationchange",ly);window.visualViewport&&window.visualViewport.addEventListener("resize",ly);$V();let u0=qO;const eS=new Ai;window.setViewClass=n=>{u0=n,eS.emit()};vs.addListener(()=>{let n=new np,e=new u0(n,l0);h0.addChild(e),eS.addListener(()=>{n=n.copy(),e.dispose(),e=new u0(n,l0),h0.addChild(e)}),Bc.updateOnRequestAnimationFrame(t=>{oy&&$V(),n.step(t)})});vs.stageComplete();
